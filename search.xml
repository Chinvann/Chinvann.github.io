<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ç« é±¼</title>
    <url>/2022/09/20/ZhangYu/</url>
    <content><![CDATA[<h1 id="å°ğŸŸå°ğŸŸåœ¨è¿™é‡Œ"><a href="#å°ğŸŸå°ğŸŸåœ¨è¿™é‡Œ" class="headerlink" title="å°ğŸŸå°ğŸŸåœ¨è¿™é‡Œ"></a>å°ğŸŸå°ğŸŸåœ¨è¿™é‡Œ</h1><h1 id="ğŸ˜†æ”’ä¸€å¤§è¢‹æ¦´è²"><a href="#ğŸ˜†æ”’ä¸€å¤§è¢‹æ¦´è²" class="headerlink" title="ğŸ˜†æ”’ä¸€å¤§è¢‹æ¦´è²"></a>ğŸ˜†æ”’ä¸€å¤§è¢‹æ¦´è²</h1>]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Redisç¬”è®°</title>
    <url>/2022/08/18/Redis%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="ä¸€ã€Nosqlæ¦‚è¿°"><a href="#ä¸€ã€Nosqlæ¦‚è¿°" class="headerlink" title="ä¸€ã€Nosqlæ¦‚è¿°"></a>ä¸€ã€Nosqlæ¦‚è¿°</h1><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨Nosql"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Nosql" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Nosql"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Nosql</h2><blockquote>
<p>1ã€å•æœºMysqlæ—¶ä»£</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2020082010365930.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>90å¹´ä»£,ä¸€ä¸ªç½‘ç«™çš„è®¿é—®é‡ä¸€èˆ¬ä¸ä¼šå¤ªå¤§ï¼Œå•ä¸ªæ•°æ®åº“å®Œå…¨å¤Ÿç”¨ã€‚éšç€ç”¨æˆ·å¢å¤šï¼Œç½‘ç«™å‡ºç°ä»¥ä¸‹é—®é¢˜</p>
<ol>
<li>æ•°æ®é‡å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼Œå•æœºæ•°æ®åº“å°±æ”¾ä¸ä¸‹äº†</li>
<li>æ•°æ®çš„ç´¢å¼•ï¼ˆB+ Treeï¼‰,ä¸€ä¸ªæœºå™¨å†…å­˜ä¹Ÿå­˜æ”¾ä¸ä¸‹</li>
<li>è®¿é—®é‡å˜å¤§åï¼ˆè¯»å†™æ··åˆï¼‰ï¼Œä¸€å°æœåŠ¡å™¨æ‰¿å—ä¸ä½ã€‚</li>
</ol>
<blockquote>
<p>2ã€Memcached(ç¼“å­˜) + Mysql + å‚ç›´æ‹†åˆ†ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰</p>
</blockquote>
<p>ç½‘ç«™80%çš„æƒ…å†µéƒ½æ˜¯åœ¨è¯»ï¼Œæ¯æ¬¡éƒ½è¦å»æŸ¥è¯¢æ•°æ®åº“çš„è¯å°±ååˆ†çš„éº»çƒ¦ï¼æ‰€ä»¥è¯´æˆ‘ä»¬å¸Œæœ›å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¼“å­˜æ¥ä¿è¯æ•ˆç‡ï¼</p>
<p><img src="https://img-blog.csdnimg.cn/20200820103713734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¼˜åŒ–è¿‡ç¨‹ç»å†äº†ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p>
<ol>
<li>ä¼˜åŒ–æ•°æ®åº“çš„æ•°æ®ç»“æ„å’Œç´¢å¼•(éš¾åº¦å¤§)</li>
<li>æ–‡ä»¶ç¼“å­˜ï¼Œé€šè¿‡IOæµè·å–æ¯”æ¯æ¬¡éƒ½è®¿é—®æ•°æ®åº“æ•ˆç‡ç•¥é«˜ï¼Œä½†æ˜¯æµé‡çˆ†ç‚¸å¼å¢é•¿æ—¶å€™ï¼ŒIOæµä¹Ÿæ‰¿å—ä¸äº†</li>
<li>MemCache,å½“æ—¶æœ€çƒ­é—¨çš„æŠ€æœ¯ï¼Œé€šè¿‡åœ¨æ•°æ®åº“å’Œæ•°æ®åº“è®¿é—®å±‚ä¹‹é—´åŠ ä¸Šä¸€å±‚ç¼“å­˜ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ï¼Œåç»­çš„æŸ¥è¯¢å…ˆæ£€æŸ¥ç¼“å­˜ï¼Œè‹¥æœ‰ç›´æ¥æ‹¿å»ä½¿ç”¨ï¼Œæ•ˆç‡æ˜¾è‘—æå‡ã€‚</li>
</ol>
<blockquote>
<p>3ã€åˆ†åº“åˆ†è¡¨ + æ°´å¹³æ‹†åˆ† + Mysqlé›†ç¾¤</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200820103739584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>4ã€å¦‚ä»Šæœ€è¿‘çš„å¹´ä»£</p>
</blockquote>
<p>å¦‚ä»Šä¿¡æ¯é‡äº•å–·å¼å¢é•¿ï¼Œå„ç§å„æ ·çš„æ•°æ®å‡ºç°ï¼ˆç”¨æˆ·å®šä½æ•°æ®ï¼Œå›¾ç‰‡æ•°æ®ç­‰ï¼‰ï¼Œå¤§æ•°æ®çš„èƒŒæ™¯ä¸‹å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰æ— æ³•æ»¡è¶³å¤§é‡æ•°æ®è¦æ±‚ã€‚Nosqlæ•°æ®åº“å°±èƒ½è½»æ¾è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<blockquote>
<p>ç›®å‰ä¸€ä¸ªåŸºæœ¬çš„äº’è”ç½‘é¡¹ç›®</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200820103804572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦ç”¨NoSQL ï¼Ÿ</p>
</blockquote>
<p>ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œç¤¾äº¤ç½‘ç»œï¼Œåœ°ç†ä½ç½®ã€‚ç”¨æˆ·è‡ªå·±äº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·æ—¥å¿—ç­‰ç­‰çˆ†å‘å¼å¢é•¿ï¼<br>è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨NoSQLæ•°æ®åº“çš„ï¼ŒNosqlå¯ä»¥å¾ˆå¥½çš„å¤„ç†ä»¥ä¸Šçš„æƒ…å†µï¼</p>
<h2 id="ä»€ä¹ˆæ˜¯Nosql"><a href="#ä»€ä¹ˆæ˜¯Nosql" class="headerlink" title="ä»€ä¹ˆæ˜¯Nosql"></a>ä»€ä¹ˆæ˜¯Nosql</h2><p><strong>NoSQL = Not Only SQLï¼ˆä¸ä»…ä»…æ˜¯SQLï¼‰</strong></p>
<p>Not Only Structured Query Language</p>
<p>å…³ç³»å‹æ•°æ®åº“ï¼šåˆ—+è¡Œï¼ŒåŒä¸€ä¸ªè¡¨ä¸‹æ•°æ®çš„ç»“æ„æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>éå…³ç³»å‹æ•°æ®åº“ï¼šæ•°æ®å­˜å‚¨æ²¡æœ‰å›ºå®šçš„æ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œæ¨ªå‘æ‰©å±•ã€‚</p>
<p>NoSQLæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼Œéšç€web2.0äº’è”ç½‘çš„è¯ç”Ÿï¼Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“å¾ˆéš¾å¯¹ä»˜web2.0æ—¶ä»£ï¼å°¤å…¶æ˜¯è¶…å¤§è§„æ¨¡çš„é«˜å¹¶å‘çš„ç¤¾åŒºï¼Œæš´éœ²å‡ºæ¥å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜ï¼ŒNoSQLåœ¨å½“ä»Šå¤§æ•°æ®ç¯å¢ƒä¸‹å‘å±•çš„ååˆ†è¿…é€Ÿï¼ŒRedisæ˜¯å‘å±•æœ€å¿«çš„ã€‚</p>
<h2 id="Nosqlç‰¹ç‚¹"><a href="#Nosqlç‰¹ç‚¹" class="headerlink" title="Nosqlç‰¹ç‚¹"></a>Nosqlç‰¹ç‚¹</h2><ol>
<li>æ–¹ä¾¿æ‰©å±•ï¼ˆæ•°æ®ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œå¾ˆå¥½æ‰©å±•ï¼ï¼‰</li>
<li>å¤§æ•°æ®é‡é«˜æ€§èƒ½ï¼ˆRedisä¸€ç§’å¯ä»¥å†™8ä¸‡æ¬¡ï¼Œè¯»11ä¸‡æ¬¡ï¼ŒNoSQLçš„ç¼“å­˜è®°å½•çº§ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ï¼ï¼‰</li>
<li>æ•°æ®ç±»å‹æ˜¯å¤šæ ·å‹çš„ï¼ï¼ˆä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ï¼Œéšå–éšç”¨ï¼‰</li>
<li>ä¼ ç»Ÿçš„ RDBMS å’Œ NoSQL</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ä¼ ç»Ÿçš„ RDBMS(å…³ç³»å‹æ•°æ®åº“)</span><br><span class="line">- ç»“æ„åŒ–ç»„ç»‡</span><br><span class="line">- SQL</span><br><span class="line">- æ•°æ®å’Œå…³ç³»éƒ½å­˜åœ¨å•ç‹¬çš„è¡¨ä¸­ row col</span><br><span class="line">- æ“ä½œï¼Œæ•°æ®å®šä¹‰è¯­è¨€</span><br><span class="line">- ä¸¥æ ¼çš„ä¸€è‡´æ€§</span><br><span class="line">- åŸºç¡€çš„äº‹åŠ¡</span><br><span class="line">- ...</span><br><span class="line">Nosql</span><br><span class="line">- ä¸ä»…ä»…æ˜¯æ•°æ®</span><br><span class="line">- æ²¡æœ‰å›ºå®šçš„æŸ¥è¯¢è¯­è¨€</span><br><span class="line">- é”®å€¼å¯¹å­˜å‚¨ï¼Œåˆ—å­˜å‚¨ï¼Œæ–‡æ¡£å­˜å‚¨ï¼Œå›¾å½¢æ•°æ®åº“ï¼ˆç¤¾äº¤å…³ç³»ï¼‰</span><br><span class="line">- æœ€ç»ˆä¸€è‡´æ€§</span><br><span class="line">- CAPå®šç†å’ŒBASE</span><br><span class="line">- é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œé«˜æ‰©å±•</span><br><span class="line">- ...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>äº†è§£ï¼š3V + 3é«˜</p>
</blockquote>
<p>å¤§æ•°æ®æ—¶ä»£çš„3V ï¼šä¸»è¦æ˜¯<strong>æè¿°é—®é¢˜</strong>çš„</p>
<ol>
<li>æµ·é‡Velume</li>
<li>å¤šæ ·Variety</li>
<li>å®æ—¶Velocity</li>
</ol>
<p>å¤§æ•°æ®æ—¶ä»£çš„3é«˜ ï¼š ä¸»è¦æ˜¯<strong>å¯¹ç¨‹åºçš„è¦æ±‚</strong></p>
<ol>
<li>é«˜å¹¶å‘</li>
<li>é«˜å¯æ‰©</li>
<li>é«˜æ€§èƒ½</li>
</ol>
<p>çœŸæ­£åœ¨å…¬å¸ä¸­çš„å®è·µï¼šNoSQL + RDBMS ä¸€èµ·ä½¿ç”¨æ‰æ˜¯æœ€å¼ºçš„ã€‚</p>
<h2 id="é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ"><a href="#é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ" class="headerlink" title="é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ"></a>é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ</h2><p>æ¨èé˜…è¯»ï¼šé˜¿é‡Œäº‘çš„è¿™ç¾¤ç–¯å­<a href="https://yq.aliyun.com/articles/653511">https://yq.aliyun.com/articles/653511</a></p>
<p><img src="https://img-blog.csdnimg.cn/20200820103829446.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="1"></p>
<p><img src="https://img-blog.csdnimg.cn/20200820103851613.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># å•†å“ä¿¡æ¯</span><br><span class="line">- ä¸€èˆ¬å­˜æ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ï¼šMysql,é˜¿é‡Œå·´å·´ä½¿ç”¨çš„Mysqléƒ½æ˜¯ç»è¿‡å†…éƒ¨æ”¹åŠ¨çš„ã€‚</span><br><span class="line"></span><br><span class="line"># å•†å“æè¿°ã€è¯„è®º(æ–‡å­—å±…å¤š)</span><br><span class="line">- æ–‡æ¡£å‹æ•°æ®åº“ï¼šMongoDB</span><br><span class="line"></span><br><span class="line"># å›¾ç‰‡</span><br><span class="line">- åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ FastDFS</span><br><span class="line">- æ·˜å®ï¼šTFS</span><br><span class="line">- Google: GFS</span><br><span class="line">- Hadoop: HDFS</span><br><span class="line">- é˜¿é‡Œäº‘: oss</span><br><span class="line"></span><br><span class="line"># å•†å“å…³é”®å­— ç”¨äºæœç´¢</span><br><span class="line">- æœç´¢å¼•æ“ï¼šsolr,elasticsearch</span><br><span class="line">- é˜¿é‡Œï¼šIsearch å¤šéš†</span><br><span class="line"></span><br><span class="line"># å•†å“çƒ­é—¨çš„æ³¢æ®µä¿¡æ¯</span><br><span class="line">- å†…å­˜æ•°æ®åº“ï¼šRedisï¼ŒMemcache</span><br><span class="line"></span><br><span class="line"># å•†å“äº¤æ˜“ï¼Œå¤–éƒ¨æ”¯ä»˜æ¥å£</span><br><span class="line">- ç¬¬ä¸‰æ–¹åº”ç”¨</span><br></pre></td></tr></table></figure>

<h2 id="Nosqlçš„å››å¤§åˆ†ç±»"><a href="#Nosqlçš„å››å¤§åˆ†ç±»" class="headerlink" title="Nosqlçš„å››å¤§åˆ†ç±»"></a>Nosqlçš„å››å¤§åˆ†ç±»</h2><blockquote>
<p><strong>KVé”®å€¼å¯¹</strong></p>
</blockquote>
<ul>
<li>æ–°æµªï¼š<strong>Redis</strong></li>
<li>ç¾å›¢ï¼šRedis + Tair</li>
<li>é˜¿é‡Œã€ç™¾åº¦ï¼šRedis + Memcache</li>
</ul>
<blockquote>
<p><strong>æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆbsonæ•°æ®æ ¼å¼ï¼‰ï¼š</strong></p>
</blockquote>
<ul>
<li>MongoDB(æŒæ¡)<ul>
<li>åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚C++ç¼–å†™ï¼Œç”¨äºå¤„ç†å¤§é‡æ–‡æ¡£ã€‚</li>
<li>MongoDBæ˜¯RDBMSå’ŒNoSQLçš„ä¸­é—´äº§å“ã€‚MongoDBæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œçš„ï¼ŒNoSQLä¸­æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li>ConthDB</li>
</ul>
<blockquote>
<p><strong>åˆ—å­˜å‚¨æ•°æ®åº“</strong></p>
</blockquote>
<ul>
<li><strong>HBase</strong>(å¤§æ•°æ®å¿…å­¦)</li>
<li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</li>
</ul>
<blockquote>
<p><strong>å›¾å…³ç³»æ•°æ®åº“</strong></p>
</blockquote>
<p>ç”¨äºå¹¿å‘Šæ¨èï¼Œç¤¾äº¤ç½‘ç»œ</p>
<ul>
<li><strong>Neo4j</strong>ã€InfoGrid</li>
</ul>
<p><a href="https://imgtu.com/i/4OvaB6"><img src="https://z3.ax1x.com/2021/10/04/4OvaB6.png" alt="4OvaB6.png"></a></p>
<h1 id="äºŒã€Rediså…¥é—¨"><a href="#äºŒã€Rediså…¥é—¨" class="headerlink" title="äºŒã€Rediså…¥é—¨"></a>äºŒã€Rediså…¥é—¨</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><blockquote>
<p>Redisæ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>Redisï¼ˆRemote Dictionary Server )ï¼Œå³è¿œç¨‹å­—å…¸æœåŠ¡ã€‚</p>
<p>æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€<strong>Key-Valueæ•°æ®åº“</strong>ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p>
<p><strong>ä¸memcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­</strong>ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥ã€‚</p>
<blockquote>
<p>Redisèƒ½è¯¥å¹²ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<ol>
<li>å†…å­˜å­˜å‚¨ã€æŒä¹…åŒ–ï¼Œå†…å­˜æ˜¯æ–­ç”µå³å¤±çš„ï¼Œæ‰€ä»¥éœ€è¦æŒä¹…åŒ–ï¼ˆRDBã€AOFï¼‰</li>
<li>é«˜æ•ˆç‡ã€ç”¨äºé«˜é€Ÿç¼“å†²</li>
<li>å‘å¸ƒè®¢é˜…ç³»ç»Ÿ</li>
<li>åœ°å›¾ä¿¡æ¯åˆ†æ</li>
<li>è®¡æ—¶å™¨ã€è®¡æ•°å™¨(egï¼šæµè§ˆé‡)</li>
<li>ã€‚ã€‚ã€‚</li>
</ol>
<blockquote>
<p>ç‰¹æ€§</p>
</blockquote>
<ol>
<li><p>å¤šæ ·çš„æ•°æ®ç±»å‹</p>
</li>
<li><p>æŒä¹…åŒ–</p>
</li>
<li><p>é›†ç¾¤</p>
</li>
<li><p>äº‹åŠ¡</p>
<p>â€¦</p>
</li>
</ol>
<h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p>å®˜ç½‘ï¼š<a href="https://redis.io/">https://redis.io/</a></p>
<p>æ¨èä½¿ç”¨LinuxæœåŠ¡å™¨å­¦ä¹ ã€‚</p>
<p>windowsç‰ˆæœ¬çš„Rediså·²ç»åœæ›´å¾ˆä¹…äº†â€¦</p>
<h2 id="Windowså®‰è£…"><a href="#Windowså®‰è£…" class="headerlink" title="Windowså®‰è£…"></a>Windowså®‰è£…</h2><p><a href="https://github.com/dmajkic/redis">https://github.com/dmajkic/redis</a></p>
<ol>
<li>è§£å‹å®‰è£…åŒ…<br><img src="https://img-blog.csdnimg.cn/20200820103922318.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>å¼€å¯redis-server.exe</li>
<li>å¯åŠ¨redis-cli.exeæµ‹è¯•<img src="https://img-blog.csdnimg.cn/20200820103950934.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ol>
<h2 id="Linuxå®‰è£…"><a href="#Linuxå®‰è£…" class="headerlink" title="Linuxå®‰è£…"></a>Linuxå®‰è£…</h2><p>ä¸‹è½½å®‰è£…åŒ…ï¼<code>redis-5.0.8.tar.gz</code></p>
<p>è§£å‹Redisçš„å®‰è£…åŒ…ï¼ç¨‹åºä¸€èˆ¬æ”¾åœ¨ <code>/opt</code> ç›®å½•ä¸‹</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@tianhong /]# <span class="built_in">cd</span> /home/tianhong	//ç°åœ¨å­˜çš„ä½ç½®</span><br><span class="line">[root@tianhong tianhong]# mv redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>.tar.gz /opt</span><br><span class="line">[root@tianhong tianhong]# <span class="built_in">cd</span> /opt</span><br><span class="line">[root@tianhong opt]# ls</span><br><span class="line">[root@tianhong opt]# tar -zxvf redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>.tar.gz  //è§£å‹</span><br><span class="line">[root@tianhong opt]# ls	//æŸ¥çœ‹</span><br><span class="line"></span><br><span class="line">[root@tianhong opt]# <span class="built_in">cd</span> redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>	//è¿›å…¥è§£å‹ç›®å½•</span><br></pre></td></tr></table></figure>

<p>åŸºæœ¬ç¯å¢ƒå®‰è£…</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">yum install gcc-c++</span><br><span class="line"># ç„¶åè¿›å…¥redisç›®å½•ä¸‹æ‰§è¡Œ</span><br><span class="line">make</span><br><span class="line"># ç„¶åæ‰§è¡Œ</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<ul>
<li>redisé»˜è®¤å®‰è£…è·¯å¾„ <code>/usr/local/bin</code></li>
<li>å°†redisçš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° ç¨‹åºå®‰è£…ç›®å½• <code>/usr/local/bin/kconfig</code>ä¸‹</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@tianhong redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>]# <span class="built_in">cd</span> /usr/local/bin	//<span class="number">1</span>.redisé»˜è®¤å®‰è£…è·¯å¾„ /usr/local/bin</span><br><span class="line">[root@tianhong bin]# ls</span><br><span class="line">chardetect	easy_install-<span class="number">3</span>.<span class="number">6</span>  jsondiff	    luajit	     redis-check-aof</span><br><span class="line">cloud-id	easy_install-<span class="number">3</span>.<span class="number">8</span>  jsonpatch	    luajit-<span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span>     redis-check-rdb</span><br><span class="line">cloud-init	jemalloc-config   jsonpointer	    mcrypt	     redis-cli</span><br><span class="line">cloud-init-per	jemalloc.sh	  jsonschema	    mdecrypt	     redis-sentinel</span><br><span class="line">easy_install	jeprof		  libmcrypt-config  redis-benchmark  redis-server</span><br><span class="line">[root@tianhong bin]# <span class="built_in">mkdir</span> myconfig</span><br><span class="line">[root@tianhong bin]# cp /opt/redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>/redis.conf myconfig 	//<span class="number">2</span>.å°†redisçš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° ç¨‹åºå®‰è£…ç›®å½• /usr/local/bin/kconfigä¸‹</span><br><span class="line">[root@tianhong bin]# <span class="built_in">cd</span>  myconfig/</span><br><span class="line">[root@tianhong myconfig]# ls</span><br><span class="line">redis.conf</span><br><span class="line">[root@tianhong myconfig]# vim redis.conf	//<span class="number">3</span>.redisé»˜è®¤ä¸æ˜¯åå°å¯åŠ¨çš„ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼//daemonize æ”¹æˆyesä¿å­˜é€€å‡º</span><br><span class="line">[root@tianhong myconfig]# <span class="built_in">cd</span> ..</span><br><span class="line">[root@tianhong bin]# redis-server myconfig/redis.conf 	//<span class="number">4</span>.é€šè¿‡åˆ¶å®šçš„é…ç½®æ–‡ä»¶å¯åŠ¨redisæœåŠ¡</span><br><span class="line">[root@tianhong bin]# redis-cli -p <span class="number">6379</span>	//<span class="number">5</span>.ä½¿ç”¨redis-cliè¿æ¥æŒ‡å®šçš„ç«¯å£å·æµ‹è¯•ï¼ŒRedisçš„é»˜è®¤ç«¯å£<span class="number">6379</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">ping</span></span><br><span class="line">PONG</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> name tianhong</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get name</span><br><span class="line">&quot;tianhong&quot;</span><br></pre></td></tr></table></figure>

<ol>
<li>æŸ¥çœ‹redisè¿›ç¨‹æ˜¯å¦å¼€å¯(é‡è¿ä¸€ä¸ª)</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ps -ef|grep redis</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200820104300532.png#pic_center" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-9PhN1jC1-1597890996513)(ç‹‚ç¥è¯´ Redis.assets/image-20200813114103769.png)]"></p>
<ol>
<li><p>å…³é—­RedisæœåŠ¡ <code>shutdown</code></p>
<p><img src="https://img-blog.csdnimg.cn/20200820104314297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-Y54EuOYm-1597890996514)(ç‹‚ç¥è¯´ Redis.assets/image-20200813114116691.png)]"></p>
</li>
<li><p>å†æ¬¡æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å­˜åœ¨</p>
</li>
<li><p>åé¢æˆ‘ä»¬ä¼šä½¿ç”¨å•æœºå¤šRediså¯åŠ¨é›†ç¾¤æµ‹è¯•</p>
</li>
</ol>
<h2 id="æµ‹è¯•æ€§èƒ½"><a href="#æµ‹è¯•æ€§èƒ½" class="headerlink" title="æµ‹è¯•æ€§èƒ½"></a>æµ‹è¯•æ€§èƒ½</h2><p><strong>redis-benchmarkï¼š</strong>Rediså®˜æ–¹æä¾›çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå‚æ•°é€‰é¡¹å¦‚ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214125892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>ç®€å•æµ‹è¯•ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å…ˆå¯åŠ¨æœåŠ¡</span><br><span class="line"><span class="built_in">cd</span> /usr/local/bin</span><br><span class="line">redis-server myconfig/redis.conf</span><br><span class="line"><span class="comment"># æµ‹è¯•ï¼š100ä¸ªå¹¶å‘è¿æ¥ 100000è¯·æ±‚</span></span><br><span class="line">redis-benchmark -h localhost -p 6379 -c 100 -n 100000</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210330193141671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210330201352239.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘èŠ±äº†14ç§’ä¸¢äººäº†</p>
<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><p>redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ç¬¬0ä¸ªï¼Œ<br>1.å¯ä»¥ä½¿ç”¨select è¿›è¡Œåˆ‡æ¢æ•°æ®åº“<br><img src="https://img-blog.csdnimg.cn/20210330201934145.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>2.æŸ¥çœ‹æ•°æ®åº“å¤§å°<br><img src="https://img-blog.csdnimg.cn/20210330202143155.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>3.æ¸…ç©ºdangqianæ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flushdb</span><br></pre></td></tr></table></figure>

<p>4.æ¸…ç©ºå…¨éƒ¨æ•°æ®åº“å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flushdb</span><br></pre></td></tr></table></figure>

<blockquote>
<h2 id="redisæ˜¯å•çº¿ç¨‹çš„"><a href="#redisæ˜¯å•çº¿ç¨‹çš„" class="headerlink" title="redisæ˜¯å•çº¿ç¨‹çš„"></a>redisæ˜¯å•çº¿ç¨‹çš„</h2></blockquote>
<p>redsiå¾ˆå¿«ï¼ŒredisåŸºäºå†…å­˜æ“ä½œï¼Œcpuä¸æ˜¯redisæ€§èƒ½ç“¶é¢ˆï¼Œredisçš„ç“¶é¢ˆæ˜¯æ ¹æ®æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ï¼Œæ—¢ç„¶å¯ä»¥ä½¿ç”¨å•çº¿ç¨‹æ¥å®ç°ï¼Œå°±ä½¿ç”¨å•çº¿ç¨‹ã€‚<br>redisæ˜¯cè¯­è¨€å†™çš„ï¼Œå®˜æ–¹æ•°æ®æ˜¯100000+çš„QPS,è¿™ä¸ªä¸å¿…åŒæ ·ä½¿ç”¨key-valueçš„Memecacheå·®<br>redisä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜è¿™ä¹ˆå¿«</p>
<p>1.è¯¯åŒºï¼šé«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ<br>2.è¯¯åŒºäºŒï¼šå¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹é«˜ï¼</p>
<p><strong>æ ¸å¿ƒï¼šrediså°†æ‰€æœ‰æ•°æ®å…¨éƒ¨æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡é«˜ï¼Œå¤šçº¿ç¨‹ï¼ˆcpuä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šè€—æ—¶æ“ä½œï¼‰ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªcpuä¸Šçš„ï¼Œåœ¨å†…å­˜æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯æœ€ä½³æ–¹æ¡ˆï¼</strong></p>
<p>Redisæ˜¯å¼€æ”¾æºä»£ç ï¼ˆBSDè®¸å¯ï¼‰çš„å†…å­˜ä¸­æ•°æ®ç»“æ„å­˜å‚¨ï¼Œ<strong>ç”¨ä½œæ•°æ®åº“ï¼Œç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶MQã€‚</strong>Redisæä¾›æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ï¼Œå“ˆå¸Œï¼Œåˆ—è¡¨ï¼Œé›†åˆï¼Œå¸¦èŒƒå›´æŸ¥è¯¢çš„æ’åºé›†åˆï¼Œä½å›¾ï¼Œè¶…æ—¥å¿—ï¼Œåœ°ç†ç©ºé—´ç´¢å¼•å’Œæµã€‚Rediså…·æœ‰å†…ç½®çš„å¤åˆ¶ï¼ŒLuaè„šæœ¬ï¼ŒLRUé©±é€ï¼Œäº‹åŠ¡å’Œä¸åŒçº§åˆ«çš„ç£ç›˜æŒä¹…æ€§ï¼Œå¹¶é€šè¿‡Redis Sentinelå’ŒRedis Clusterè‡ªåŠ¨åˆ†åŒºæä¾›äº†é«˜å¯ç”¨æ€§</p>
<blockquote>
<h2 id="redis-key"><a href="#redis-key" class="headerlink" title="redis-key"></a>redis-key</h2></blockquote>
<p>æ­¤å›¾çº¢è‰²ç®­å¤´æœ‰è¯¯ï¼Œ<br>exists nameåˆ¤æ–­nameæ˜¯å¦å­˜åœ¨</p>
<p><img src="https://img-blog.csdnimg.cn/20210330211440565.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210330211829940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210330212301199.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åé¢ä¸ä¼šçš„å‘½ä»¤å¯ä»¥åœ¨å®˜ç½‘æŸ¥ <img src="https://img-blog.csdnimg.cn/202103302124466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹"><a href="#ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹"></a>ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹</h1><h2 id="stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h2><p>90%çš„ç¨‹åºå‘˜ä½¿ç”¨redisåªä¼šä½¿ç”¨stringç±»å‹apiè°ƒç”¨å·¥ç¨‹å¸ˆ<br><img src="https://img-blog.csdnimg.cn/2021033021323821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> views <span class="number">0</span>     </span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get views</span><br><span class="line">&quot;<span class="number">0</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incr views    #è‡ªå¢ä¸€</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incr views</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get views</span><br><span class="line">&quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; decr views     #è‡ªå‡ä¸€</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incrby views <span class="number">10</span>   #è‡ªå¢<span class="number">10</span></span><br><span class="line">(integer) <span class="number">11</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incrby views <span class="number">10</span></span><br><span class="line">(integer) <span class="number">21</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; decrby views <span class="number">5</span>   #è‡ªå‡<span class="number">5</span></span><br><span class="line">(integer) <span class="number">16</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>æˆªå–å­—ç¬¦ä¸²getrange</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line">(empty array)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> key1 &quot;fang&quot;</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get key1</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getrange key1 <span class="number">0</span> <span class="number">2</span>  #æˆªå–<span class="number">012</span>å­—ç¬¦ä¸²</span><br><span class="line">&quot;fan&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getrange key1 <span class="number">0</span> -<span class="number">1</span> #è·å–å…¨éƒ¨å­—ç¬¦ä¸²</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>æ›¿æ¢setrange</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> key2 abcdefg</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get key2</span><br><span class="line"><span class="string">&quot;abcdefg&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; setrange key2 1 xx</span><br><span class="line">(<span class="built_in">integer</span>) 7</span><br><span class="line">127.0.0.1:6379&gt; get key2</span><br><span class="line"><span class="string">&quot;axxdefg&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>

<p><strong>setex #è®¾ç½®è¿‡æœŸæ—¶é—´</strong><br><strong>setnx #ä¸å­˜åœ¨åœ¨è®¾ç½®ï¼ˆåœ¨åˆ†å¸ƒå¼é”ä¸­å¸¸å¸¸ä½¿ç”¨ï¼‰</strong>**</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setex key3 <span class="number">30</span> &quot;hello&quot;</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; ttl key3</span><br><span class="line">(integer) <span class="number">17</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setnx mykey &quot;redsi&quot; #å¦‚æœmykeyå­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¤±è´¥ã€‚</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) &quot;mykey&quot;</span><br><span class="line"><span class="number">2</span>) &quot;key2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;key1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; ttl key3</span><br><span class="line">(integer) -<span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setnx mykey &quot;MongDB&quot;</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get mykey</span><br><span class="line">&quot;redsi&quot;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸€æ¬¡æ€§è·å–ï¼Œè®¾ç½®å¤šä¸ªå€¼ï¼šmsetï¼Œmget</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line">(empty array)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mset k1 v1 k2 v2 k3 v3     #åŒæ—¶è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) &quot;k3&quot;</span><br><span class="line"><span class="number">2</span>) &quot;k2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;k1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mget k1 k2 k3    #åŒæ—¶è·å–å¤šä¸ªå€¼</span><br><span class="line"><span class="number">1</span>) &quot;v1&quot;</span><br><span class="line"><span class="number">2</span>) &quot;v2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;v3&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; msetnx k1 v1 k4 v4   #msetnxæ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œï¼Œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get k4</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>å¯¹è±¡</strong><br>mset userï¼š1{nameï¼šzhangsanï¼Œageï¼š3}#è®¾ç½®ä¸€ä¸ªuserï¼š1å¯¹è±¡ å€¼ä¸ºjsonå­—ç¬¦æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mset user:<span class="number">1</span>:name fang user:<span class="number">1</span>:age <span class="number">2</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mget user:<span class="number">1</span>:name user:<span class="number">1</span>:age</span><br><span class="line"><span class="number">1</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>å…ˆgetåœ¨setâ€”â€”-getset</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getset db redis</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get db</span><br><span class="line">&quot;redis&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getset db mongodb</span><br><span class="line">&quot;redis&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get db</span><br><span class="line">&quot;mongodb&quot;</span><br></pre></td></tr></table></figure>

<p><strong>stringç±»å‹çš„ä½¿ç”¨åœºæ™¯ï¼švalueé™¤äº†å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯æ•°å­—</strong></p>
<ul>
<li>è®¡æ•°å™¨</li>
<li>ç»Ÿè®¡å¤šå•ä½æ•°é‡</li>
<li>ç²‰ä¸æ•°</li>
<li>å¯¹è±¡ç¼“å­˜å­˜å‚¨ï¼</li>
</ul>
<h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><p>åœ¨redisé‡Œé¢å¯ä»¥æŠŠlistå®Œæˆæ ˆï¼Œé˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ï¼<br>æ‰€æœ‰çš„listå‘½ä»¤ä»¥lå¼€å¤´</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list one</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list two</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list three</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;three&quot;</span><br><span class="line"><span class="number">2</span>) &quot;two&quot;</span><br><span class="line"><span class="number">3</span>) &quot;one&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;three&quot;</span><br><span class="line"><span class="number">2</span>) &quot;two&quot;</span><br><span class="line">å€’ç€è¾“å‡º</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210331225329852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>é»˜è®¤è±¡æ ˆ</strong><br><strong>ç§»é™¤</strong><br><strong>lpop</strong><br><strong>rpop</strong><br><img src="https://img-blog.csdnimg.cn/20210404105106348.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>lindex é€šè¿‡ä¸‹è¡¨è·å¾—å€¼</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lindex list <span class="number">1</span></span><br><span class="line">&quot;one&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lindex list <span class="number">0</span></span><br><span class="line">&quot;two&quot;</span><br></pre></td></tr></table></figure>

<p>llenè¿”å›åˆ—è¡¨é•¿åº¦</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list one</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list two</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list three</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; llen list</span><br><span class="line">(integer) <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>ç§»é™¤æŒ‡å®šå€¼<br>å–å…³ uid<br><strong>lrem</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20210404105948137.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>trim ä¿®å‰ªï¼šlistæˆªæ–­</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20210404110409467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>rpop lpush,å°†åˆ—è¡¨å³è¾¹å…ƒç´ ç§»åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦è¾¹</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist &quot;<span class="number">0</span>&quot;</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist &quot;<span class="number">1</span>&quot;</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist &quot;<span class="number">2</span>&quot;</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpoplpush mylist myother </span><br><span class="line">&quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">0</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange myother <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">2</span>&quot;</span><br></pre></td></tr></table></figure>

<p><strong>lset list 0 itemå°†ä¸‹æ ‡ä¸º0çš„å…ƒç´ æ›¿æ¢ä¸ºitem</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; exists list     //åˆ¤æ–­åˆ—è¡¨æ˜¯å¦å­˜åœ¨</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lset list <span class="number">0</span> item</span><br><span class="line">(error) ERR no such key</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list value1</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span>) &quot;value1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lset list <span class="number">0</span> item</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span>) &quot;item&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>linset åœ¨æŒ‡å®šå€¼çš„å‰é¢æˆ–è€…åé¢æ’å…¥å€¼</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist world</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; linsert mylist before world other</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">2</span>) &quot;other&quot;</span><br><span class="line"><span class="number">3</span>) &quot;world&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š<br>1.å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨<br>2.keyä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°é“¾è¡¨<br>3.ç§»é™¤æ‰€æœ‰å…ƒç´ ï¼Œç©ºé“¾è¡¨ä¹Ÿä»£è¡¨ä¸å­˜åœ¨<br>4.åœ¨ä¸¤è¾¹æ’å…¥æˆ–è€…æ”¹åŠ¨å€¼ï¼Œæ•ˆç‡é«˜ï¼Œä¸­é—´å…ƒç´ ï¼Œç›¸å¯¹æ•ˆç‡ä½<br>æ¶ˆæ¯é˜Ÿåˆ—</p>
<h2 id="setï¼ˆé›†åˆï¼‰"><a href="#setï¼ˆé›†åˆï¼‰" class="headerlink" title="setï¼ˆé›†åˆï¼‰"></a>setï¼ˆé›†åˆï¼‰</h2><p><strong>setå€¼æ˜¯ä¸èƒ½é‡å¤çš„</strong><br><strong>sdd</strong>:æ’å…¥<br><strong>smembers</strong>ï¼šæŸ¥è¯¢æŒ‡å®šsetä¸­æ‰€æœ‰å€¼<br><strong>sismember</strong>ï¼šæŸ¥çœ‹å€¼æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset fang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset lovefang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset</span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sismember myset hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sismember myset hello1</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; scard myset        #è·å–é›†åˆå…ƒç´ ä¸ªæ•°</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>ç§»é™¤ï¼šsrem myset hello</strong></p>
<p><strong>set:æ— åºä¸é‡å¤é›†åˆ</strong><br>######################################<br>éšæœºæŠ½é€‰å…ƒç´ <br><strong>srandmember</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; srandmember myset</span><br><span class="line">&quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; srandmember myset</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; srandmember myset <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>éšæœºåˆ é™¤value</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset</span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; spop myset</span><br><span class="line">&quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset</span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br></pre></td></tr></table></figure>

<p>#######################################################<br><strong>å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ç§»åŠ¨åˆ°å¦å¤–çš„set</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset2 <span class="number">1</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smove myset myset2 fang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset2</span><br><span class="line"><span class="number">1</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:</span><br></pre></td></tr></table></figure>

<p>###########################################################<br>å¾®åšï¼Œbç«™å…±åŒå…³æ³¨ï¼ˆäº¤é›†ï¼‰<br>æ•°å­—é›†åˆç±»ï¼š<br><strong>å·®é›†ï¼Œäº¤é›†ï¼Œå¹¶é›†</strong><br><img src="https://img-blog.csdnimg.cn/20210404114740600.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å¾®åšï¼Œå°†aç”¨æˆ·æ‰€æœ‰å…³æ³¨çš„äººæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†ä»–çš„ç²‰ä¸ä¹Ÿæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼<br>å…±åŒå…³æ³¨ï¼Œå…±åŒçˆ±å¥½</p>
<h2 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h2><p>mapé›†åˆï¼Œkey-Mapé›†åˆ</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hset myhash field1 fang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hget myhash field1</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hmset myhash filed1 hello filed2 world1  ##ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hmget myhash filed1 filed2 ##ä¸€æ¬¡å–å¤šä¸ªå€¼</span><br><span class="line"><span class="number">1</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">2</span>) &quot;world1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hgetall myhash   #è·å–å…¨éƒ¨æ•°æ®</span><br><span class="line"><span class="number">1</span>) &quot;field1&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">3</span>) &quot;filed1&quot;</span><br><span class="line"><span class="number">4</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">5</span>) &quot;filed2&quot;</span><br><span class="line"><span class="number">6</span>) &quot;world1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>åˆ é™¤æŒ‡å®š<strong>keyï¼šhdel</strong> myhash filed1<br>è·å–å­—æ®µæ•°é‡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hlen myhash</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>####################################################<br><strong>åˆ¤æ–­æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨</strong><br><strong>hexists myhash filed1</strong></p>
<p>####################################################<br><strong>åªè·å¾—æ‰€æœ‰çš„key</strong>**<br><strong>hkeys</strong> myhash</p>
<p><strong>åªè·å¾—æ‰€æœ‰çš„value</strong><br><strong>hvals</strong> myhash<br>####################################################<br><strong>incr</strong> decr</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hset myhash field3 <span class="number">3</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hincrby myhash field3 <span class="number">1</span></span><br><span class="line">(integer) <span class="number">4</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hincrby myhash field3 -<span class="number">1</span></span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br><span class="line">hsetnx myhash filed4 hello  #å¦‚æœä¸å­˜åœ¨åˆ™å¯ä»¥è®¾ç½®</span><br><span class="line">hsetnx myhash filed4 hello  #å­˜åœ¨åˆ™ä¸èƒ½è®¾ç½®</span><br></pre></td></tr></table></figure>

<p>hash å˜æ›´çš„æ•°æ®ï¼Œuser name ageï¼Œå°¤å…¶ä½¿ç”¨æˆ·ä¿¡æ¯ä¹‹ç±»çš„ï¼Œç»å¸¸å˜æ›´çš„æ•°æ®<br><strong>hashæ›´é€‚åˆå¯¹è±¡çš„å­˜å‚¨ï¼Œstringæ›´åŠ é€‚åˆå­—ç¬¦ä¸²å­˜å‚¨</strong></p>
<h2 id="zsetï¼ˆæœ‰åºé›†åˆï¼‰"><a href="#zsetï¼ˆæœ‰åºé›†åˆï¼‰" class="headerlink" title="zsetï¼ˆæœ‰åºé›†åˆï¼‰"></a>zsetï¼ˆæœ‰åºé›†åˆï¼‰</h2><p>åœ¨setçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªå€¼<br>set v1 k1<br><strong>zset k1 score1 v1</strong><br>æ’åºå¦‚ä½•å®ç°</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">1</span> one</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">2</span> two</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">3</span> three</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange myset <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;one&quot;</span><br><span class="line"><span class="number">2</span>) &quot;two&quot;</span><br><span class="line"><span class="number">3</span>) &quot;three&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>##############################################<br>æ’åºå¦‚ä½•å®ç°</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">27</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd salary <span class="number">2500</span> <span class="number">1</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd salary <span class="number">5000</span> <span class="number">2</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd salary <span class="number">500</span> <span class="number">3</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrangebyscore salary -inf +inf   #ä»è´Ÿæ— ç©·åˆ°æ­£æ— ç©·æ’åº</span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrangebyscore salary -inf +inf withscores   </span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">500</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">4</span>) &quot;<span class="number">2500</span>&quot;</span><br><span class="line"><span class="number">5</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">6</span>) &quot;<span class="number">5000</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrangebyscore salary -inf <span class="number">2500</span> withscores  #å·¥èµ„å°äº<span class="number">2500</span>çš„å‡åºæ’åˆ—</span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">500</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">4</span>) &quot;<span class="number">2500</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>##############################################<br><strong>ç§»é™¤rem</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange salary <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrem salary <span class="number">1</span> #ç§»é™¤æŒ‡å®šå…ƒç´ </span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange salary <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zcard salary   #è·å–æœ‰åºé›†åˆä¸­çš„ä¸ªæ•°</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>###################################################<br><strong>è·å–æŒ‡å®šåŒºé—´çš„æˆå‘˜æ•°é‡</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">1</span> hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">2</span> world <span class="number">3</span> fangqing</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zcount myset <span class="number">1</span> <span class="number">3</span></span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zcount myset <span class="number">1</span> <span class="number">2</span></span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>rediså®˜ç½‘å¯ä»¥æŸ¥çœ‹apiçš„ä½¿ç”¨<br>æ¡ˆä¾‹æ€è·¯;set æ’åºï¼Œå­˜å‚¨ç­çº§æˆç»©è¡¨ï¼Œå·¥èµ„è¡¨æ’åº<br>æ™®é€šæ¶ˆæ¯1ï¼Œé‡è¦æ¶ˆæ¯2ï¼Œå¸¦æƒé‡è¿›è¡Œæ’åºåˆ¤æ–­ï¼<br>æ’è¡Œæ¦œåº”ç”¨å®ç°</p>
<h1 id="å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"><a href="#å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹" class="headerlink" title="å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"></a>å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</h1><h2 id="geospatial-åœ°ç†ä½ç½®"><a href="#geospatial-åœ°ç†ä½ç½®" class="headerlink" title="geospatial(åœ°ç†ä½ç½®)"></a>geospatial(åœ°ç†ä½ç½®)</h2><p>æœ‹å‹å®šä½ï¼Œé™„è¿‘çš„äººï¼Œæ‰“è½¦è·ç¦»æŠ€æœ¯ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥æ¨ç®—åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œä¸¤åœ°ä¹‹é—´çš„è·ç¦»ï¼Œæ–¹åœ†å‡ é‡Œçš„äººï¼<br>å¯ä»¥æŸ¥è¯¢ä¸€äº›æµ‹è¯•æ•°æ®<br>åªæœ‰å…­ä¸ªå‘½ä»¤ï¼</p>
<blockquote>
<p><strong>geoadd</strong></p>
</blockquote>
<p>æ·»åŠ æ•°æ®<br>è§„åˆ™ï¼šä¸¤çº§æ— æ³•æ·»åŠ ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä¸‹è½½åŸå¸‚æ•°æ®ï¼Œç›´æ¥é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥ï¼<br>å‚æ•°ï¼ˆçº¬åº¦ ç»åº¦ åç§°ï¼‰<br>è¶…è¿‡æœ‰æ•ˆçš„ç»åº¦çº¬åº¦å°±ä¼šæŠ¥é”™</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">116</span>.<span class="number">40</span> <span class="number">39</span>.<span class="number">90</span> beijin</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">121</span>.<span class="number">47</span> <span class="number">31</span>.<span class="number">23</span> shanghai</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">106</span>.<span class="number">50</span> <span class="number">29</span>.<span class="number">53</span> chongqi</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">114</span>.<span class="number">05</span> <span class="number">22</span>.<span class="number">52</span> shengzhen</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">120</span>.<span class="number">16</span> <span class="number">30</span>.<span class="number">24</span> hangzhou <span class="number">118</span>.<span class="number">96</span> <span class="number">34</span>.<span class="number">26</span> xian</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geopos"><a href="#geopos" class="headerlink" title="geopos"></a>geopos</h3></blockquote>
<p>è·å–å½“å‰å®šä½ï¼šä¸€å®šæ˜¯ä¸€ä¸ªåæ ‡å€¼</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geopos china:city beijin</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;<span class="number">116</span>.<span class="number">39999896287918091</span>&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">39</span>.<span class="number">90000009167092543</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geopos china:city beijin chongqi</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;<span class="number">116</span>.<span class="number">39999896287918091</span>&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">39</span>.<span class="number">90000009167092543</span>&quot;</span><br><span class="line"><span class="number">2</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geodist"><a href="#geodist" class="headerlink" title="geodist"></a>geodist</h3></blockquote>
<p>ä¸¤äººä¹‹é—´çš„è·ç¦»</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geodist china:city beijin shanghai</span><br><span class="line">&quot;<span class="number">1067378</span>.<span class="number">7564</span>&quot;   #åŒ—äº¬ä¸Šæµ·çš„==ç›´çº¿è·ç¦»ï¼Œé»˜è®¤å•ä½ä¸ºç±³==</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geodist china:city beijin shanghai km</span><br><span class="line">&quot;<span class="number">1067</span>.<span class="number">3788</span>&quot;  </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ "><a href="#georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ " class="headerlink" title="georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ "></a>georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ </h3></blockquote>
<p>æˆ‘é™„è¿‘çš„äººï¼Ÿï¼ˆè·å¾—æ‰€æœ‰é™„è¿‘çš„äººçš„åœ°å€ï¼Œå®šä½ï¼ï¼‰é€šè¿‡åŠå¾„æ¥æŸ¥è¯¢</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">1000</span> km #ä»¥<span class="number">100</span>ç»åº¦<span class="number">30</span>çº¬åº¦ä¸ºä¸­å¿ƒ<span class="number">1000</span>kmä¸ºåŠå¾„çš„åœ†å†…åŸå¸‚</span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">2</span>) &quot;shengzhen&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hangzhou&quot;</span><br><span class="line"><span class="number">4</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km</span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist #æ˜¾ç¤ºåˆ°ä¸­å¿ƒä½ç½®çš„è·ç¦»</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withcoord #æ˜¾ç¤ºä»–äººçš„å®šä½ä¿¡æ¯</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist withcoord count <span class="number">1</span> #ç­›é€‰å‡ºæŒ‡å®šæ•°é‡çš„ç»“æœ</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line">   <span class="number">3</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist withcoord count <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line">   <span class="number">3</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist withcoord count <span class="number">3</span></span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line">   <span class="number">3</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="georadiusbymember"><a href="#georadiusbymember" class="headerlink" title="georadiusbymember"></a>georadiusbymember</h3></blockquote>
<p>æ‰¾å‡ºæŒ‡å®šåŸå¸‚å‘¨å›´çš„ä½ç½®</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadiusbymember china:city beijin <span class="number">1000</span> km</span><br><span class="line"><span class="number">1</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">2</span>) &quot;beijin&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geohash"><a href="#geohash" class="headerlink" title="geohash"></a>geohash</h3></blockquote>
<p>è¯¥å‘½ä»¤è¿”å›é•¿åº¦ä¸º11çš„å­—ç¬¦ä¸²</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geohash china:city beijin chongqi</span><br><span class="line"><span class="number">1</span>) &quot;wx4fbxxfke0&quot;    #å°†äºŒç»´çš„ç»çº¬åº¦è½¬æ¢ä¸ºä¸€ç»´çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²æœˆæ¥è¿‘ï¼Œé‚£ä¹ˆè·ç¦»åˆ™è¶Šè¿‘</span><br><span class="line"><span class="number">2</span>) &quot;wm5xzrybty0&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geoåº•å±‚å®ç°åŸç†"><a href="#geoåº•å±‚å®ç°åŸç†" class="headerlink" title="geoåº•å±‚å®ç°åŸç†"></a>geoåº•å±‚å®ç°åŸç†</h3></blockquote>
<p><strong>åŸç†å…¶å®å°±æ˜¯zsetï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨zsetå‘½ä»¤æ“ä½œgeoï¼</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange china:city <span class="number">0</span> -<span class="number">1</span> ##æŸ¥çœ‹å…ƒç´ </span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">2</span>) &quot;shengzhen&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hangzhou&quot;</span><br><span class="line"><span class="number">4</span>) &quot;shanghai&quot;</span><br><span class="line"><span class="number">5</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">6</span>) &quot;beijin&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrem china:city beijin</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange china:city <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">2</span>) &quot;shengzhen&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hangzhou&quot;</span><br><span class="line"><span class="number">4</span>) &quot;shanghai&quot;</span><br><span class="line"><span class="number">5</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="hyperloglog-åŸºæ•°ç»Ÿè®¡"><a href="#hyperloglog-åŸºæ•°ç»Ÿè®¡" class="headerlink" title="hyperloglog(åŸºæ•°ç»Ÿè®¡)"></a>hyperloglog(åŸºæ•°ç»Ÿè®¡)</h2><p>a{1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ8ï¼Œ7}<br>b{1ï¼Œ2ï¼Œ5ï¼Œ7ï¼Œ8}<br>åŸºæ•°ï¼ˆä¸é‡å¤çš„å…ƒç´ ï¼‰=5ï¼Œå¯ä»¥æ¥å—è¯¯å·®</p>
<p>åŸºæ•°ç»Ÿè®¡ç®—æ³•<br>ä¼˜ç‚¹ï¼šå ç”¨å†…å­˜æ˜¯å›ºå®šçš„ï¼Œ2^64ä¸åŒå…ƒç´ è®¡æ•°ï¼Œåªéœ€è¦è´¹12kbçš„å†…å­˜ï¼Œå¦‚æœè¦ä»å†…å­˜è§’åº¦æ¯”è¾ƒhyperloglogé¦–é€‰<br><strong>ç½‘é¡µçš„uv</strong>ï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä½†æ˜¯è¿˜æ˜¯ç®—ä½œä¸€ä¸ªäººï¼‰<br><strong>ä¼ ç»Ÿçš„æ–¹å¼ï¼Œsetä¿æŠ¤ç”¨æˆ·çš„idï¼Œå…¶å…ƒç´ ä¸é‡å¤ï¼Œ</strong>ç„¶åå°±å¯ä»¥ç»Ÿè®¡setä¸­å…ƒç´ çš„æ•°é‡ä½œä¸ºæ ‡å‡†åˆ¤æ–­<br>è¿™ä¸ªæ–¹å¼å¦‚æœä¿æŒå¤§é‡ç”¨æˆ·idå°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯ä¸ºäº†è®¡æ•°ï¼Œè€Œä¸æ˜¯ä¿å­˜ç”¨æˆ·idï¼›<br><strong>0.81%çš„é”™è¯¯ç‡</strong>ï¼Œå¯ä»¥æ¥å—</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfadd mykey a b c d e f g h i j </span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey #ç»Ÿè®¡mykeyå…ƒç´ åŸºæ•°æ•°é‡</span><br><span class="line">(integer) <span class="number">10</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey2 i j z x c v b n m #</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfadd mykey2 i j z x c v b n m</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey2</span><br><span class="line">(integer) <span class="number">9</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfmerge mykey3 mykey mykey2 #åˆå¹¶ä¸¤ç»„åˆ°mykey3</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey3</span><br><span class="line">(integer) <span class="number">15</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>å¦‚æœå…è®¸å®¹é”™ç»Ÿè®¡æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨hyperloglog<br>å¦‚æœä¸å…è®¸ä½¿ç”¨setæˆ–è€…å…¶ä»–æ•°æ®ç±»å‹</p>
<h2 id="bitmap"><a href="#bitmap" class="headerlink" title="bitmap"></a>bitmap</h2><p>ä½å­˜å‚¨<br>ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ï¼Œæ´»è·ƒï¼Œä¸æ´»è·ƒï¼Œç™»å…¥ï¼Œä¸ºç™»å…¥ï¼Œæ‰“å¡ï¼Œ365æ‰“å¡ï¼ä¸¤ä¸ªçŠ¶æ€çš„éƒ½å¯ä»¥ä½¿ç”¨bitmaps<br><strong>bitmapsä½å›¾</strong>ï¼Œæ•°æ®ç»“æ„ï¼Œéƒ½æ˜¯æ“ä½œäºŒè¿›åˆ¶ä½æ¥è¿›è¡Œè®°å½•çš„ï¼Œå°±åªæœ‰0ï¼Œ1ä¸¤ä¸ªçŠ¶æ€<br>365=365bit 1å­—èŠ‚=8bit 46å­—èŠ‚å·¦å³ï¼</p>
<p>æµ‹è¯•<br>è®°å½•å‘¨ä¸€åˆ°å‘¨æ—¥æ‰“å¡<br>å‘¨ä¸€ï¼š1ï¼Œå‘¨äºŒï¼š0ï¼Œå‘¨ä¸‰ï¼š0.ã€‚ã€‚ã€‚</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">0</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">1</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">2</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">3</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">4</span> <span class="number">1</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">5</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">6</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æŸä¸€å¤©æ˜¯å¦æ‰“å¡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getbit sign <span class="number">3</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getbit sign <span class="number">4</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>ç»Ÿè®¡æ‰“å¡å¤©æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å¦æœ‰ç¼ºå‹¤<br>127.0.0.1:6379&gt; <strong>bitcount sign</strong><br>(integer) 1</p>
<h1 id="äº”ã€äº‹åŠ¡"><a href="#äº”ã€äº‹åŠ¡" class="headerlink" title="äº”ã€äº‹åŠ¡"></a>äº”ã€äº‹åŠ¡</h1><p>redisäº‹åŠ¡æœ¬è´¨ï¼šä¸€ç»„å‘½ä»¤çš„é›†åˆ!ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­æŒ‰ç…§é¡ºåºæ‰§è¡Œ<br><strong>ä¸€æ¬¡æ€§ï¼Œé¡ºåºæ€§ï¼Œæ’ä»–æ€§</strong>ï¼Œæ‰§è¡Œä¸€äº›åˆ—çš„å‘½ä»¤</p>
<p><strong>rediså•æ¡å‘½ä»¤æ˜¯ä¿æŒåŸå­æ€§ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§<br>redisäº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</strong></p>
<p>æ‰€æœ‰çš„å‘½ä»¤åœ¨äº‹åŠ¡ä¸­ï¼Œå¹¶æ²¡æœ‰è¢«ç›´æ¥æ‰§è¡Œï¼Œåªæœ‰å‘èµ·æ‰§è¡Œå‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œ!exec<br>redisäº‹åŠ¡</p>
<ul>
<li><strong>å¼€å¯äº‹åŠ¡ï¼ˆmultiï¼‰=</strong></li>
<li>å‘½ä»¤å…¥é˜Ÿ</li>
<li><strong>æ‰§è¡Œäº‹åŠ¡ï¼ˆexecï¼‰</strong></li>
</ul>
<h2 id="æ­£å¸¸æ‰§è¡Œäº‹åŠ¡"><a href="#æ­£å¸¸æ‰§è¡Œäº‹åŠ¡" class="headerlink" title="æ­£å¸¸æ‰§è¡Œäº‹åŠ¡"></a>æ­£å¸¸æ‰§è¡Œäº‹åŠ¡</h2><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; get k2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k3 v3</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line"><span class="number">1</span>) OK</span><br><span class="line"><span class="number">2</span>) OK</span><br><span class="line"><span class="number">3</span>) &quot;v2&quot;</span><br><span class="line"><span class="number">4</span>) OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="æ”¾å¼ƒäº‹åŠ¡"><a href="#æ”¾å¼ƒäº‹åŠ¡" class="headerlink" title="æ”¾å¼ƒäº‹åŠ¡"></a>æ”¾å¼ƒäº‹åŠ¡</h2><p><strong>discard</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k4 v4</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; discard</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) &quot;k3&quot;</span><br><span class="line"><span class="number">2</span>) &quot;k2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;k1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘å‹å¼‚å¸¸"><a href="#ç¼–è¯‘å‹å¼‚å¸¸" class="headerlink" title="ç¼–è¯‘å‹å¼‚å¸¸"></a>ç¼–è¯‘å‹å¼‚å¸¸</h2><p>ä»£ç æœ‰é—®é¢˜ï¼Œå‘½ä»¤æœ‰é—®é¢˜</p>
<p>äº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œ</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k3 v3</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; getset k3</span><br><span class="line">(error) ERR wrong number of arguments <span class="keyword">for</span> &#x27;getset&#x27; command</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k4 v4</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line">(error) EXECABORT Transaction discarded because of previous errors.</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get k1</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œæ—¶å¼‚å¸¸"><a href="#è¿è¡Œæ—¶å¼‚å¸¸" class="headerlink" title="è¿è¡Œæ—¶å¼‚å¸¸"></a>è¿è¡Œæ—¶å¼‚å¸¸</h2><p>ï¼ˆå…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œï¼Œé”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸ï¼‰</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; incr k1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; get k2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line"><span class="number">1</span>) (error) ERR value is <span class="keyword">not</span> an integer or out of range #è™½ç„¶ç¬¬ä¸€æ¡å‘½ä»¤æŠ¥é”™ï¼Œä½†æ˜¯ä¾æ—§æ­£å¸¸æ‰§è¡Œ</span><br><span class="line"><span class="number">2</span>) OK</span><br><span class="line"><span class="number">3</span>) &quot;v2&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get k2</span><br><span class="line">&quot;v2&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h1 id="å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰"><a href="#å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰" class="headerlink" title="å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰"></a>å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰</h1><p>æ‚²è§‚é”ï¼šå¾ˆæ‚²è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºä»€ä¹ˆéƒ½ä¼šåŠ é”ï¼Œæ•ˆç‡é™ä½<br>ä¹è§‚é”ï¼šå¾ˆä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¸Šé”ï¼Œæ›´æ–°æ•°æ®æ—¶ä¼šåˆ¤æ–­åœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººæ”¹åŠ¨æ•°æ®ï¼Œ<strong>version</strong>ï¼<br>1.è·å–version<br>2.æ›´æ–°æ—¶æ¯”è¾ƒversion</p>
<h2 id="redisç›‘è§†æµ‹è¯•"><a href="#redisç›‘è§†æµ‹è¯•" class="headerlink" title="redisç›‘è§†æµ‹è¯•"></a>redisç›‘è§†æµ‹è¯•</h2><p>æ­£å¸¸æ‰§è¡ŒæˆåŠŸ</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> money <span class="number">100</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> out <span class="number">0</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; watch money    #ç›‘è§†moneyå¯¹è±¡</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; decrby money <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; incrby out <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line"><span class="number">1</span>) (integer) <span class="number">80</span></span><br><span class="line"><span class="number">2</span>) (integer) <span class="number">20</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ"><a href="#æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ" class="headerlink" title="æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ"></a>æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ</h2><p>æ–°å¼€å®¢æˆ·ç«¯æ¨¡æ‹Ÿç¬¬äºŒä¸ªçº¿ç¨‹</p>
<p><img src="https://img-blog.csdnimg.cn/20210404154242178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æ‰§è¡Œäº‹åŠ¡ä¹‹å‰å¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å€¼<br><img src="https://img-blog.csdnimg.cn/20210404154351811.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; unwatch</span><br><span class="line">OK #r#å¦‚æœäº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œå…ˆè§£é”</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; watch money</span><br><span class="line">OK## è·å–æœ€æ–°å€¼ï¼Œå†æ¬¡ç›‘è§†</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; decrby money <span class="number">1</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; incrby money <span class="number">1</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec ##å¯¹æ¯”ç›‘è§†å€¼æ˜¯å¦å‘é€å˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–å¯ä»¥æ‰§è¡Œï¼Œå˜åŒ–åˆ™æ‰§è¡Œå¤±è´¥</span><br><span class="line"><span class="number">1</span>) (integer) <span class="number">999</span></span><br><span class="line"><span class="number">2</span>) (integer) <span class="number">1000</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h1 id="ä¸ƒã€jedis"><a href="#ä¸ƒã€jedis" class="headerlink" title="ä¸ƒã€jedis"></a>ä¸ƒã€jedis</h1><p>æˆ‘ä»¬è¦ä½¿ç”¨javaæ“ä½œredis<br>jedisæ˜¯å®˜æ–¹æ¨èçš„javaè¿æ¥å¼€å‘å·¥å…·ï¼Œä½¿ç”¨javaæ“ä½œredisä¸­é—´ä»¶ï¼Œå¦‚æœä½ è¦ä½¿ç”¨javaæ“ä½œredisï¼Œé‚£ä¹ˆä½ ä¸€å®šè¦å¯¹jedisååˆ†ç†Ÿæ‚‰</p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="æ–°å»ºç©ºé¡¹ç›®"><a href="#æ–°å»ºç©ºé¡¹ç›®" class="headerlink" title="æ–°å»ºç©ºé¡¹ç›®"></a>æ–°å»ºç©ºé¡¹ç›®</h3><p><img src="https://img-blog.csdnimg.cn/20210404165919336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210404170015900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>2.æ–°å»ºæ–°çš„mavenæ¨¡å—<br><img src="https://img-blog.csdnimg.cn/20210404170146241.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥jredisçš„åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--fastjson--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.70<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼–ç æµ‹è¯•"><a href="#ç¼–ç æµ‹è¯•" class="headerlink" title="ç¼–ç æµ‹è¯•"></a>ç¼–ç æµ‹è¯•</h3><p>a.è¿æ¥æ•°æ®åº“<br>b.æ“ä½œå‘½ä»¤<br>c.æ–­å¼€è¿æ¥</p>
<p>å¼€æ”¾ç«¯å£6379</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">firewall-<span class="built_in">cmd</span> --zone=public --add-port=<span class="number">6379</span>/tcp --permanet</span><br></pre></td></tr></table></figure>

<p>é‡å¯é˜²ç«å¢™æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure>

<p>é‡å¯redis-server</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis-server myconfig/redis.conf </span><br></pre></td></tr></table></figure>

<p>æ“ä½œå‘½ä»¤</p>
<p><strong>TestPing.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPing</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.xx.xxx&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> jedis.ping();</span><br><span class="line">        System.out.println(response); <span class="comment">// PONG</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>äº‹åŠ¡</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTX</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;39.99.xxx.xx&quot;</span>, <span class="number">6379</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        jsonObject.put(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">        jsonObject.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;kuangshen&quot;</span>);</span><br><span class="line">        <span class="comment">// å¼€å¯äº‹åŠ¡</span></span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">multi</span> <span class="operator">=</span> jedis.multi();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jsonObject.toJSONString();</span><br><span class="line">        <span class="comment">// jedis.watch(result)</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            multi.set(<span class="string">&quot;user1&quot;</span>, result);</span><br><span class="line">            multi.set(<span class="string">&quot;user2&quot;</span>, result);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œäº‹åŠ¡</span></span><br><span class="line">            multi.exec();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="comment">// æ”¾å¼ƒäº‹åŠ¡</span></span><br><span class="line">            multi.discard();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">            System.out.println(jedis.get(<span class="string">&quot;user1&quot;</span>));</span><br><span class="line">            System.out.println(jedis.get(<span class="string">&quot;user2&quot;</span>));</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210404173402279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‰€æœ‰apiéƒ½æ˜¯ä¸Šé¢å¯¹åº”çš„å‘½ä»¤</p>
<h2 id="é€šè¿‡Jedisç†è§£äº‹åŠ¡"><a href="#é€šè¿‡Jedisç†è§£äº‹åŠ¡" class="headerlink" title="é€šè¿‡Jedisç†è§£äº‹åŠ¡"></a>é€šè¿‡Jedisç†è§£äº‹åŠ¡</h2><p><img src="https://img-blog.csdnimg.cn/20210404175650868.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210404175935387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="å…«ã€springbootæ•´åˆ"><a href="#å…«ã€springbootæ•´åˆ" class="headerlink" title="å…«ã€springbootæ•´åˆ"></a>å…«ã€springbootæ•´åˆ</h1><h2 id="æ•´åˆæµ‹è¯•"><a href="#æ•´åˆæµ‹è¯•" class="headerlink" title="æ•´åˆæµ‹è¯•"></a>æ•´åˆæµ‹è¯•</h2><p>springbooæ“ä½œæ•°æ®åº“ï¼šspring-data jpa jdbc mongodb redis<br>springDataä¹Ÿæ˜¯å’Œspringbootå…¶åçš„é¡¹ç›®</p>
<ol>
<li>å¯¼å…¥ä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>springboot 2.xå ï¼ŒåŸæ¥ä½¿ç”¨çš„ Jedis è¢« lettuce æ›¿æ¢</strong>ã€‚</p>
<blockquote>
<p>jedisï¼šé‡‡ç”¨çš„ç›´è¿ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚å¦‚æœè¦é¿å…ä¸å®‰å…¨ï¼Œä½¿ç”¨jedis poolè¿æ¥æ± ï¼æ›´åƒ<strong>BIO</strong>æ¨¡å¼</p>
<p>lettuceï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼å¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®äº†ï¼Œæ›´åƒ<strong>NIO</strong>æ¨¡å¼</p>
</blockquote>
<p>æˆ‘ä»¬åœ¨å­¦ä¹ SpringBootè‡ªåŠ¨é…ç½®çš„åŸç†æ—¶ï¼Œæ•´åˆä¸€ä¸ªç»„ä»¶å¹¶è¿›è¡Œé…ç½®ä¸€å®šä¼šæœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»<strong>xxxAutoConfiguration</strong>,å¹¶ä¸”åœ¨<strong>spring.factories</strong>ä¸­ä¹Ÿä¸€å®šèƒ½æ‰¾åˆ°è¿™ä¸ªç±»çš„å®Œå…¨é™å®šåã€‚Redisä¹Ÿä¸ä¾‹å¤–ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214531573.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é‚£ä¹ˆå°±ä¸€å®šè¿˜å­˜åœ¨ä¸€ä¸ªRedisPropertiesç±»</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214554661.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¹‹å‰æˆ‘ä»¬è¯´SpringBoot2.xåé»˜è®¤ä½¿ç”¨Lettuceæ¥æ›¿æ¢Jedisï¼Œç°åœ¨æˆ‘ä»¬å°±èƒ½æ¥éªŒè¯äº†ã€‚</p>
<p>å…ˆçœ‹Jedis:</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214607475.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>@ConditionalOnClassæ³¨è§£ä¸­æœ‰ä¸¤ä¸ªç±»æ˜¯é»˜è®¤ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥Jedisæ˜¯æ— æ³•ç”Ÿæ•ˆçš„</p>
<p>ç„¶åå†çœ‹Lettuceï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214618179.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å®Œç¾ç”Ÿæ•ˆã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å›åˆ°RedisAutoConfiguratio</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321462777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>åªæœ‰ä¸¤ä¸ªç®€å•çš„Bean</p>
<ul>
<li><strong>RedisTemplate</strong></li>
<li><strong>StringRedisTemplate</strong></li>
</ul>
<p>å½“çœ‹åˆ°xxTemplateæ—¶å¯ä»¥å¯¹æ¯”RestTemplatã€SqlSessionTemplate,é€šè¿‡ä½¿ç”¨è¿™äº›Templateæ¥é—´æ¥æ“ä½œç»„ä»¶ã€‚é‚£ä¹ˆè¿™ä¿©ä¹Ÿä¸ä¼šä¾‹å¤–ã€‚åˆ†åˆ«ç”¨äºæ“ä½œRediså’ŒRedisä¸­çš„Stringæ•°æ®ç±»å‹ã€‚</p>
<p>åœ¨RedisTemplateä¸Šä¹Ÿæœ‰ä¸€ä¸ªæ¡ä»¶æ³¨è§£ï¼Œè¯´æ˜æˆ‘ä»¬æ˜¯å¯ä»¥å¯¹å…¶è¿›è¡Œå®šåˆ¶åŒ–çš„</p>
<p>è¯´å®Œè¿™äº›ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•ç¼–å†™é…ç½®æ–‡ä»¶ç„¶åè¿æ¥Redisï¼Œå°±éœ€è¦é˜…è¯»RedisProperties</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214638238.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™æ˜¯ä¸€äº›åŸºæœ¬çš„é…ç½®å±æ€§ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214649380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿˜æœ‰ä¸€äº›è¿æ¥æ± ç›¸å…³çš„é…ç½®ã€‚æ³¨æ„ä½¿ç”¨æ—¶ä¸€å®š<strong>ä½¿ç”¨Lettuceçš„è¿æ¥æ± ã€‚</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200513214700372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>1ã€ç¼–å†™é…ç½®æ–‡ä»¶</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®redis,çœ‹ç€å†™</span></span><br><span class="line"><span class="attr">spring.redis.host</span>=<span class="string">127.0.0.1		</span></span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="string">6379</span></span><br></pre></td></tr></table></figure>

<p><strong>2ã€ ä½¿ç”¨RedisTemplate</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Redis02SpringbootApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// redisTemplate æ“ä½œä¸åŒçš„æ•°æ®ç±»å‹ï¼Œapiå’Œæˆ‘ä»¬çš„æŒ‡ä»¤æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">        <span class="comment">// opsForValue æ“ä½œå­—ç¬¦ä¸² ç±»ä¼¼String</span></span><br><span class="line">        <span class="comment">// opsForList æ“ä½œList ç±»ä¼¼List</span></span><br><span class="line">        <span class="comment">// opsForHah</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é™¤äº†åŸºæœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•éƒ½å¯ä»¥ç›´æ¥é€šè¿‡redisTemplateæ“ä½œï¼Œæ¯”å¦‚äº‹åŠ¡å’ŒåŸºæœ¬çš„CRUD</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–è¿æ¥å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span></span><br><span class="line">        <span class="comment">//connection.flushDb();</span></span><br><span class="line">        <span class="comment">//connection.flushAll();</span></span><br><span class="line"></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;mykey&quot;</span>,<span class="string">&quot;kuangshen&quot;</span>);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;mykey&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3ã€æµ‹è¯•ç»“æœ</strong></p>
<p>æ­¤æ—¶æˆ‘ä»¬å›åˆ°RedisæŸ¥çœ‹æ•°æ®æ—¶å€™ï¼ŒæƒŠå¥‡å‘ç°å…¨æ˜¯ä¹±ç ï¼Œå¯æ˜¯ç¨‹åºä¸­å¯ä»¥æ­£å¸¸è¾“å‡ºï¼š</p>
<p>è¿™æ—¶å€™å°±å…³ç³»åˆ°å­˜å‚¨å¯¹è±¡çš„åºåˆ—åŒ–é—®é¢˜ï¼Œåœ¨ç½‘ç»œä¸­ä¼ è¾“çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸€æ ·éœ€è¦åºåˆ—åŒ–ï¼Œå¦è€…å°±å…¨æ˜¯ä¹±ç ã€‚</p>
<p>æˆ‘ä»¬è½¬åˆ°çœ‹é‚£ä¸ªé»˜è®¤çš„RedisTemplateå†…éƒ¨ä»€ä¹ˆæ ·å­ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214746506.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>åœ¨æœ€å¼€å§‹å°±èƒ½çœ‹åˆ°å‡ ä¸ªå…³äºåºåˆ—åŒ–çš„å‚æ•°ã€‚</p>
<p><strong>é»˜è®¤çš„åºåˆ—åŒ–å™¨æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–å™¨</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200513214757247.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è€Œé»˜è®¤çš„RedisTemplateä¸­çš„æ‰€æœ‰åºåˆ—åŒ–å™¨éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªåºåˆ—åŒ–å™¨ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214809494.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>åç»­æˆ‘ä»¬å®šåˆ¶RedisTemplateå°±å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p>
<p><code>RedisSerializer</code>æä¾›äº†å¤šç§åºåˆ—åŒ–æ–¹æ¡ˆï¼š</p>
<ol>
<li>ç›´æ¥è°ƒç”¨RedisSerializerçš„é™æ€æ–¹æ³•æ¥è¿”å›åºåˆ—åŒ–å™¨ï¼Œç„¶åset</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200513214818682.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ol>
<li>è‡ªå·±new ç›¸åº”çš„å®ç°ç±»ï¼Œç„¶åset</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200513214827233.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š"><a href="#å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š" class="headerlink" title="å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š"></a><strong>å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š</strong></h2><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBeanåŠ å…¥å®¹å™¨ï¼Œå°±ä¼šè§¦å‘RedisTemplateä¸Šçš„æ¡ä»¶æ³¨è§£ä½¿é»˜è®¤çš„RedisTemplateå¤±æ•ˆã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="comment">// å°†template æ³›å‹è®¾ç½®ä¸º &lt;String, Object&gt;</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        <span class="comment">// è¿æ¥å·¥å‚ï¼Œä¸å¿…ä¿®æ”¹</span></span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * åºåˆ—åŒ–è®¾ç½®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// keyã€hashçš„key é‡‡ç”¨ Stringåºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setKeySerializer(RedisSerializer.string());</span><br><span class="line">        template.setHashKeySerializer(RedisSerializer.string());</span><br><span class="line">        <span class="comment">// valueã€hashçš„value é‡‡ç”¨ Jackson åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setValueSerializer(RedisSerializer.json());</span><br><span class="line">        template.setHashValueSerializer(RedisSerializer.json());</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œåªè¦å®ä½“ç±»è¿›è¡Œäº†åºåˆ—åŒ–ï¼Œæˆ‘ä»¬å­˜ä»€ä¹ˆéƒ½ä¸ä¼šæœ‰ä¹±ç çš„æ‹…å¿§äº†ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20210405145408459.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¹±ç é—®é¢˜å¾—åˆ°è§£å†³</p>
<p><img src="https://img-blog.csdnimg.cn/20210405145458697.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="è‡ªå®šä¹‰Rediså·¥å…·ç±»"><a href="#è‡ªå®šä¹‰Rediså·¥å…·ç±»" class="headerlink" title="è‡ªå®šä¹‰Rediså·¥å…·ç±»"></a>è‡ªå®šä¹‰Rediså·¥å…·ç±»</h2><p>ä½¿ç”¨RedisTemplateéœ€è¦é¢‘ç¹è°ƒç”¨<code>.opForxxx</code>ç„¶åæ‰èƒ½è¿›è¡Œå¯¹åº”çš„æ“ä½œï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥ä»£ç æ•ˆç‡ä½ä¸‹ï¼Œå·¥ä½œä¸­ä¸€èˆ¬ä¸ä¼šè¿™æ ·ä½¿ç”¨ï¼Œè€Œæ˜¯å°†è¿™äº›å¸¸ç”¨çš„å…¬å…±APIæŠ½å–å‡ºæ¥å°è£…æˆä¸ºä¸€ä¸ªå·¥å…·ç±»ï¼Œç„¶åç›´æ¥ä½¿ç”¨å·¥å…·ç±»æ¥é—´æ¥æ“ä½œRedis,ä¸ä½†æ•ˆç‡é«˜å¹¶ä¸”æ˜“ç”¨ã€‚</p>
<p>åœ¨ä¼ä¸šå¼€å‘ä¸­æˆ‘ä»¬80%ä¸ä¼šä½¿ç”¨åŸç”Ÿçš„æ–¹å¼å»ç¼–å†™ä»£ç ï¼Œ<strong>ä¸€èˆ¬ä½¿ç”¨å·¥å…·ç±»RedisUtils</strong><br><strong>ç½‘ä¸Šå¯ä»¥ç›´æ¥æœç´¢RedisUtils</strong></p>
<p>å·¥å…·ç±»å‚è€ƒåšå®¢ï¼š</p>
<blockquote>
<p><a href="https://www.cnblogs.com/zeng1994/p/03303c805731afc9aa9c60dbbd32a323.html">https://www.cnblogs.com/zeng1994/p/03303c805731afc9aa9c60dbbd32a323.html</a></p>
<p><a href="https://www.cnblogs.com/zhzhlong/p/11434284.html">https://www.cnblogs.com/zhzhlong/p/11434284.html</a></p>
</blockquote>
<h1 id="ä¹ã€Redis-conf"><a href="#ä¹ã€Redis-conf" class="headerlink" title="ä¹ã€Redis.conf"></a>ä¹ã€Redis.conf</h1><blockquote>
<p>å®¹é‡å•ä½ä¸åŒºåˆ†å¤§å°å†™ï¼ŒGå’ŒGBæœ‰åŒºåˆ«</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2020051321485460.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨ include ç»„åˆå¤šä¸ªé…ç½®é—®é¢˜</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214902552.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ç½‘ç»œé…ç½®</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214912813.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>æ—¥å¿—è¾“å‡ºçº§åˆ«</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214923678.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<blockquote>
<p>æ—¥å¿—è¾“å‡ºæ–‡ä»¶</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214933713.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>æŒä¹…åŒ–è§„åˆ™</p>
</blockquote>
<p>ç”±äºRedisæ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ï¼Œéœ€è¦å°†æ•°æ®ç”±å†…å­˜æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­</p>
<p>æŒä¹…åŒ–æ–¹å¼ï¼š</p>
<ul>
<li>RDB</li>
<li>AOF</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200513214944964.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>RDBæ–‡ä»¶ç›¸å…³</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214955679.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200513215006207.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ä¸»ä»å¤åˆ¶</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215016371.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>Securityæ¨¡å—ä¸­è¿›è¡Œå¯†ç è®¾ç½®</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215026143.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>å®¢æˆ·ç«¯è¿æ¥ç›¸å…³</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">maxclients 10000  æœ€å¤§å®¢æˆ·ç«¯æ•°é‡</span><br><span class="line">maxmemory &lt;bytes&gt; æœ€å¤§å†…å­˜é™åˆ¶</span><br><span class="line">maxmemory-policy noeviction <span class="comment"># å†…å­˜è¾¾åˆ°é™åˆ¶å€¼çš„å¤„ç†ç­–ç•¥</span></span><br></pre></td></tr></table></figure>

<p>redis ä¸­çš„<strong>é»˜è®¤</strong>çš„è¿‡æœŸç­–ç•¥æ˜¯ <strong>volatile-lru</strong> ã€‚</p>
<p><strong>è®¾ç½®æ–¹å¼</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">config <span class="built_in">set</span> maxmemory-policy volatile-lru </span><br></pre></td></tr></table></figure>

<p><strong>maxmemory-policy å…­ç§æ–¹å¼</strong></p>
<ol>
<li><strong>volatile-lru</strong>ï¼šåªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyè¿›è¡ŒLRUï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li><strong>allkeys-lru</strong> ï¼š åˆ é™¤lruç®—æ³•çš„key</li>
<li><strong>volatile-random</strong>ï¼šéšæœºåˆ é™¤å³å°†è¿‡æœŸkey</li>
<li><strong>allkeys-random</strong>ï¼šéšæœºåˆ é™¤</li>
<li><strong>volatile-ttl</strong> ï¼š åˆ é™¤å³å°†è¿‡æœŸçš„</li>
<li><strong>noeviction</strong> ï¼š æ°¸ä¸è¿‡æœŸï¼Œè¿”å›é”™è¯¯</li>
</ol>
<blockquote>
<p>AOFç›¸å…³éƒ¨åˆ†</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215037918.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200513215047999.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="åã€æŒä¹…åŒ–â€”RDB"><a href="#åã€æŒä¹…åŒ–â€”RDB" class="headerlink" title="åã€æŒä¹…åŒ–â€”RDB"></a>åã€æŒä¹…åŒ–â€”RDB</h1><p><strong>é¢è¯•å’Œå·¥ä½œçš„é‡ç‚¹</strong></p>
<p>redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æ•°æ®çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥redisæä¾›äº†æŒä¹…åŒ–çš„åŠŸèƒ½<br><strong>åŸç†æ˜¯redisä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªä¸å½“å‰çº¿ç¨‹ä¸€æ¨¡ä¸€æ ·çš„å­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œè¿™ä¸ªå­çº¿ç¨‹çš„æ‰€æœ‰æ•°æ®</strong>ï¼ˆå˜é‡ã€‚ç¯å¢ƒå˜é‡ï¼Œç¨‹åºç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰éƒ½å’ŒåŸè¿›ç¨‹ä¸€æ¨¡ä¸€æ ·ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹ä¸è¿›è¡Œä»»ä½•çš„ioæ“ä½œï¼Œè¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚<br><strong>æˆ‘ä»¬é»˜è®¤çš„å°±æ˜¯RDB</strong>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªé…ç½®<br>å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®çš„å®Œæ•´æ€§å›å¤ä¸æ˜¯éå¸¸çš„æ•æ„Ÿï¼Œé‚£ä¹ˆRDBæ–¹å¼æ¯”AOFçš„æ–¹å¼æ›´åŠ é«˜æ•ˆã€‚RDbçš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–çš„æ•°æ®å¯èƒ½ä¼šä¸¢å¤±<br>rdbä¿å­˜çš„æ–‡ä»¶æ˜¯dump.rdb</p>
<p>åœ¨æŒ‡å®šæ—¶é—´é—´éš”åï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥æ•°æ®åº“ ï¼›åœ¨æ¢å¤æ—¶å€™ï¼Œç›´æ¥è¯»å–å¿«ç…§æ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®çš„æ¢å¤ ï¼›</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215126515.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ Redis å°†æ•°æ®åº“å¿«ç…§ä¿å­˜åœ¨åå­—ä¸º dump.rdbçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚æ–‡ä»¶åå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè‡ªå®šä¹‰ã€‚</p>
<h3 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h3><hr>
<p>åœ¨è¿›è¡Œ <strong><code>RDB</code></strong> çš„æ—¶å€™ï¼Œ**<code>redis</code>** çš„ä¸»çº¿ç¨‹æ˜¯ä¸ä¼šåš <strong><code>io</code></strong> æ“ä½œçš„ï¼Œä¸»çº¿ç¨‹ä¼š <strong><code>fork</code></strong> ä¸€ä¸ªå­çº¿ç¨‹æ¥å®Œæˆè¯¥æ“ä½œï¼›</p>
<ol>
<li>Redis è°ƒç”¨forksã€‚åŒæ—¶æ‹¥æœ‰çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚</li>
<li>å­è¿›ç¨‹å°†æ•°æ®é›†å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶ RDB æ–‡ä»¶ä¸­ã€‚</li>
<li>å½“å­è¿›ç¨‹å®Œæˆå¯¹æ–° RDB æ–‡ä»¶çš„å†™å…¥æ—¶ï¼ŒRedis ç”¨æ–° RDB æ–‡ä»¶æ›¿æ¢åŸæ¥çš„ RDB æ–‡ä»¶ï¼Œå¹¶åˆ é™¤æ—§çš„ RDB æ–‡ä»¶ã€‚</li>
</ol>
<p>è¿™ç§å·¥ä½œæ–¹å¼ä½¿å¾— Redis å¯ä»¥ä»<strong>å†™æ—¶å¤åˆ¶ï¼ˆcopy-on-writeï¼‰</strong>æœºåˆ¶ä¸­è·ç›Š(å› ä¸ºæ˜¯ä½¿ç”¨å­è¿›ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œè€Œçˆ¶è¿›ç¨‹ä¾ç„¶å¯ä»¥æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚)</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215141519.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="è§¦å‘æœºåˆ¶"><a href="#è§¦å‘æœºåˆ¶" class="headerlink" title="è§¦å‘æœºåˆ¶"></a>è§¦å‘æœºåˆ¶</h3><ol>
<li>saveçš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘rdbåŸåˆ™</li>
<li>æ‰§è¡Œflushallå‘½ä»¤ï¼Œä¹Ÿä¼šè§¦å‘æˆ‘ä»¬çš„rdbåŸåˆ™</li>
<li>é€€å‡ºredisï¼Œä¹Ÿä¼šè‡ªåŠ¨äº§ç”Ÿrdbæ–‡ä»¶</li>
</ol>
<p><strong>save</strong></p>
<p>ä½¿ç”¨ <code>save</code> å‘½ä»¤ï¼Œä¼šç«‹åˆ»å¯¹å½“å‰å†…å­˜ä¸­çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ– ,ä½†æ˜¯ä¼šé˜»å¡ï¼Œä¹Ÿå°±æ˜¯ä¸æ¥å—å…¶ä»–æ“ä½œäº†ï¼›</p>
<blockquote>
<p>ç”±äº <code>save</code> å‘½ä»¤æ˜¯åŒæ­¥å‘½ä»¤ï¼Œä¼šå ç”¨Redisçš„ä¸»è¿›ç¨‹ã€‚è‹¥Redisæ•°æ®éå¸¸å¤šæ—¶ï¼Œ<code>save</code>å‘½ä»¤æ‰§è¡Œé€Ÿåº¦ä¼šéå¸¸æ…¢ï¼Œé˜»å¡æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215150892.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>flushallå‘½ä»¤</strong></p>
<p><code>flushall</code> å‘½ä»¤ä¹Ÿä¼šè§¦å‘æŒä¹…åŒ– ï¼›</p>
<p>è§¦å‘æŒä¹…åŒ–è§„åˆ™</p>
<p>æ»¡è¶³é…ç½®æ¡ä»¶ä¸­çš„è§¦å‘æ¡ä»¶ ï¼›</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å¯¹ Redis è¿›è¡Œè®¾ç½®ï¼Œ è®©å®ƒåœ¨â€œ N ç§’å†…æ•°æ®é›†è‡³å°‘æœ‰ M ä¸ªæ”¹åŠ¨â€è¿™ä¸€æ¡ä»¶è¢«æ»¡è¶³æ—¶ï¼Œ è‡ªåŠ¨è¿›è¡Œæ•°æ®é›†ä¿å­˜æ“ä½œã€‚</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215205970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200513215220858.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>bgsave</strong></p>
<p><code>bgsave</code> æ˜¯å¼‚æ­¥è¿›è¡Œï¼Œè¿›è¡ŒæŒä¹…åŒ–çš„æ—¶å€™ï¼Œ<code>redis</code> è¿˜å¯ä»¥å°†ç»§ç»­å“åº”å®¢æˆ·ç«¯è¯·æ±‚ ï¼›</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321523151.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>bgsaveå’Œsaveå¯¹æ¯”</strong></p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>save</th>
<th>bgsave</th>
</tr>
</thead>
<tbody><tr>
<td>IOç±»å‹</td>
<td>åŒæ­¥</td>
<td>å¼‚æ­¥</td>
</tr>
<tr>
<td>é˜»å¡ï¼Ÿ</td>
<td>æ˜¯</td>
<td>æ˜¯ï¼ˆé˜»å¡å‘ç”Ÿåœ¨fock()ï¼Œé€šå¸¸éå¸¸å¿«ï¼‰</td>
</tr>
<tr>
<td>å¤æ‚åº¦</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
<tr>
<td>ä¼˜ç‚¹</td>
<td>ä¸ä¼šæ¶ˆè€—é¢å¤–çš„å†…å­˜</td>
<td>ä¸é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤</td>
</tr>
<tr>
<td>ç¼ºç‚¹</td>
<td>é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤</td>
<td>éœ€è¦fockå­è¿›ç¨‹ï¼Œæ¶ˆè€—å†…å­˜</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210405200936348.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>å¦‚ä½•æ¢å¤rdbæ–‡ä»¶</strong><br>1.åªéœ€è¦å°†rdbæ–‡ä»¶æ”¾åœ¨rediså¯åŠ¨ç›®å½•å°±å¯ä»¥ï¼Œrediså¯åŠ¨æ—¶å°±ä¼šè‡ªåŠ¨æ£€æµ‹dum.rdbæ–‡ä»¶ï¼Œæ¢å¤å…¶ä¸­æ•°æ®<br>2.rdbæ–‡ä»¶å­˜æ”¾çš„ä½ç½®</p>
<p><img src="https://img-blog.csdnimg.cn/20210405202944350.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</li>
<li>å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œæ“ä½œï¼Œå¦‚æœredisæ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®å°±æ²¡æœ‰äº†ã€‚</li>
<li>forkè¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å®¹ç©ºé—´ã€‚</li>
</ol>
<h1 id="åä¸€ã€æŒä¹…åŒ–AOF"><a href="#åä¸€ã€æŒä¹…åŒ–AOF" class="headerlink" title="åä¸€ã€æŒä¹…åŒ–AOF"></a>åä¸€ã€æŒä¹…åŒ–AOF</h1><p>è¿½åŠ æ–‡ä»¶<br>å°†æˆ‘ä»¬æ‰€ä»¥çš„å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œå›å¤çš„æ—¶å€™å°†è¿™ä¸ªæ–‡ä»¶å…¨éƒ¨æ‰§è¡Œä¸€é</p>
<p>ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸€ä¸ªå†™æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä¸è®¸æ”¹å†™æ–‡ä»¶ï¼Œredisé‡å¯ä¹‹å¤„ä¼šä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œinother wordsï¼Œå¦‚æœredisé‡å¯å°±ä¼šæ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œã€‚</p>
<p>aofï¼ˆappend only fileï¼‰ä¿å­˜çš„æ–‡ä»¶æ˜¯appendonly.aof</p>
<p>é»˜è®¤ä¸ºnoéœ€è¦æ‰‹åŠ¨è¿›è¡Œå¼€å¯</p>
<p><img src="https://img-blog.csdnimg.cn/20210406131037622.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é‡å¯redisåè¯»å–.aofæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/20210406132012201.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210406132602336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å¦‚æœaofæ–‡ä»¶æœ‰é”™è¯¯ï¼Œè¿™æ—¶å€™rediså¯åŠ¨ä¸èµ·æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤é…ç½®æ–‡ä»¶</p>
<p>redisç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå·¥å…·</p>
<p><strong>redis-check-aof â€“fix appendonly.aof</strong><br>ä¼˜ç‚¹ï¼š<br>1.æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´æ€§ä¼šæ›´å¥½<br>2.æ¯ç§’åŒæ­¥ä¸€æ¬¡å¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®<br>3.ä»ä¸åŒä¸æ•ˆç‡æœ€é«˜<br>ç¼ºç‚¹<br>1.å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´ï¼Œaofâ€™è¿œå¤§äºrdbï¼Œä¿®å¤é€Ÿåº¦æ¯”rdbæ…¢<br>2.aofè¿è¡Œæ•ˆç‡è¦æ¯”rdbæ…¢ï¼Œæ‰€ä»¥redisçš„é»˜è®¤é…ç½®æ˜¯rdbæŒä¹…åŒ–ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20210406134028717.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>aofé»˜è®¤æ˜¯æ–‡ä»¶æ— çº¿è¿½åŠ ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§<br>å¦‚æœaofæ–‡ä»¶å¤§äº64mï¼Œforkä¸€ä¸ªæ–°è¿›ç¨‹å°†æˆ‘ä»¬çš„æ–‡ä»¶è¿›è¡Œé‡å†™<br><img src="https://img-blog.csdnimg.cn/20210406134219312.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä½ å¯ä»¥ä¸ä½¿ç”¨æŒä¹…åŒ–</strong></p>
<h2 id="RDBå’ŒAOPé€‰æ‹©"><a href="#RDBå’ŒAOPé€‰æ‹©" class="headerlink" title="RDBå’ŒAOPé€‰æ‹©"></a>RDBå’ŒAOPé€‰æ‹©</h2><p>RDB å’Œ AOF å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>RDB</th>
<th>AOF</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>å¯åŠ¨ä¼˜å…ˆçº§</td>
<td>ä½</td>
<td>é«˜</td>
</tr>
<tr>
<td>ä½“ç§¯</td>
<td>å°</td>
<td>å¤§</td>
</tr>
<tr>
<td>æ¢å¤é€Ÿåº¦</td>
<td>å¿«</td>
<td>æ…¢</td>
</tr>
<tr>
<td>æ•°æ®å®‰å…¨æ€§</td>
<td>ä¸¢æ•°æ®</td>
<td>æ ¹æ®ç­–ç•¥å†³å®š</td>
</tr>
</tbody></table>
<p><strong>å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ</strong></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œ å¦‚æœæƒ³è¾¾åˆ°è¶³ä»¥åª²ç¾ PostgreSQL çš„æ•°æ®å®‰å…¨æ€§ï¼Œ ä½ åº”è¯¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æŒä¹…åŒ–åŠŸèƒ½ã€‚</p>
<p>å¦‚æœä½ éå¸¸å…³å¿ƒä½ çš„æ•°æ®ï¼Œ ä½†ä»ç„¶å¯ä»¥æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œ é‚£ä¹ˆä½ å¯ä»¥åªä½¿ç”¨ RDB æŒä¹…åŒ–ã€‚</p>
<p>æœ‰å¾ˆå¤šç”¨æˆ·éƒ½åªä½¿ç”¨ AOF æŒä¹…åŒ–ï¼Œ ä½†å¹¶ä¸æ¨èè¿™ç§æ–¹å¼ï¼š å› ä¸ºå®šæ—¶ç”Ÿæˆ RDB å¿«ç…§ï¼ˆsnapshotï¼‰éå¸¸ä¾¿äºè¿›è¡Œæ•°æ®åº“å¤‡ä»½ï¼Œ å¹¶ä¸” RDB æ¢å¤æ•°æ®é›†çš„é€Ÿåº¦ä¹Ÿè¦æ¯” AOF æ¢å¤çš„é€Ÿåº¦è¦å¿«ã€‚</p>
<h1 id="åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…"><a href="#åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…" class="headerlink" title="åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…"></a>åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…</h1><p>Redis å‘å¸ƒè®¢é˜…(pub/sub)æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†é¢‘é“ channel1 ï¼Œ ä»¥åŠè®¢é˜…è¿™ä¸ªé¢‘é“çš„ä¸‰ä¸ªå®¢æˆ·ç«¯ â€”â€” client2 ã€ client5 å’Œ client1 ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215523258.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å½“æœ‰æ–°æ¶ˆæ¯é€šè¿‡ PUBLISH å‘½ä»¤å‘é€ç»™é¢‘é“ channel1 æ—¶ï¼Œ è¿™ä¸ªæ¶ˆæ¯å°±ä¼šè¢«å‘é€ç»™è®¢é˜…å®ƒçš„ä¸‰ä¸ªå®¢æˆ·ç«¯ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321553483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>å‘½ä»¤</strong></p>
<ul>
<li>PSUBSCRIBE pattern [pattern..] è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</li>
<li>PUNSUBSCRIBE pattern [pattern..] é€€è®¢ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</li>
<li>PUBSUB subcommand [argument[argument]] æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ã€‚</li>
<li>PUBLISH channel message å‘æŒ‡å®šé¢‘é“å‘å¸ƒæ¶ˆæ¯</li>
<li>SUBSCRIBE channel [channel..] è®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ã€‚</li>
<li>SUBSCRIBE channel [channel..] é€€è®¢ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“</li>
</ul>
<p><strong>ç¤ºä¾‹</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">------------è®¢é˜…ç«¯----------------------</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; SUBSCRIBE sakura # è®¢é˜…sakuraé¢‘é“</span><br><span class="line">Reading messages... (press Ctrl-C to quit) # ç­‰å¾…æ¥æ”¶æ¶ˆæ¯</span><br><span class="line"><span class="number">1</span>) &quot;subscribe&quot; # è®¢é˜…æˆåŠŸçš„æ¶ˆæ¯</span><br><span class="line"><span class="number">2</span>) &quot;sakura&quot;</span><br><span class="line"><span class="number">3</span>) (integer) <span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;message&quot; # æ¥æ”¶åˆ°æ¥è‡ªsakuraé¢‘é“çš„æ¶ˆæ¯ &quot;hello world&quot;</span><br><span class="line"><span class="number">2</span>) &quot;sakura&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello world&quot;</span><br><span class="line"><span class="number">1</span>) &quot;message&quot; # æ¥æ”¶åˆ°æ¥è‡ªsakuraé¢‘é“çš„æ¶ˆæ¯ &quot;hello i am sakura&quot;</span><br><span class="line"><span class="number">2</span>) &quot;sakura&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello i am sakura&quot;</span><br><span class="line"></span><br><span class="line">--------------æ¶ˆæ¯å‘å¸ƒç«¯-------------------</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; PUBLISH sakura &quot;hello world&quot; # å‘å¸ƒæ¶ˆæ¯åˆ°sakuraé¢‘é“</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; PUBLISH sakura &quot;hello i am sakura&quot; # å‘å¸ƒæ¶ˆæ¯</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"></span><br><span class="line">-----------------æŸ¥çœ‹æ´»è·ƒçš„é¢‘é“------------</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; PUBSUB channels</span><br><span class="line"><span class="number">1</span>) &quot;sakura&quot;</span><br></pre></td></tr></table></figure>

<p><strong>åŸç†</strong><br>æ¯ä¸ª Redis æœåŠ¡å™¨è¿›ç¨‹éƒ½ç»´æŒç€ä¸€ä¸ªè¡¨ç¤ºæœåŠ¡å™¨çŠ¶æ€çš„ redis.h/redisServer ç»“æ„ï¼Œ ç»“æ„çš„ pubsub_channels å±æ€§æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œ è¿™ä¸ªå­—å…¸å°±ç”¨äºä¿å­˜è®¢é˜…é¢‘é“çš„ä¿¡æ¯ï¼Œå…¶ä¸­ï¼Œå­—å…¸çš„é”®ä¸ºæ­£åœ¨è¢«è®¢é˜…çš„é¢‘é“ï¼Œ è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œ é“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ªé¢‘é“çš„å®¢æˆ·ç«¯ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321554964.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å®¢æˆ·ç«¯è®¢é˜…ï¼Œå°±è¢«é“¾æ¥åˆ°å¯¹åº”é¢‘é“çš„é“¾è¡¨çš„å°¾éƒ¨ï¼Œé€€è®¢åˆ™å°±æ˜¯å°†å®¢æˆ·ç«¯èŠ‚ç‚¹ä»é“¾è¡¨ä¸­ç§»é™¤ã€‚</p>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è®¢é˜…äº†é¢‘é“ï¼Œä½†è‡ªå·±è¯»å–æ¶ˆæ¯çš„é€Ÿåº¦å´ä¸å¤Ÿå¿«çš„è¯ï¼Œé‚£ä¹ˆä¸æ–­ç§¯å‹çš„æ¶ˆæ¯ä¼šä½¿redisè¾“å‡ºç¼“å†²åŒºçš„ä½“ç§¯å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œè¿™å¯èƒ½ä½¿å¾—redisæœ¬èº«çš„é€Ÿåº¦å˜æ…¢ï¼Œç”šè‡³ç›´æ¥å´©æºƒã€‚</li>
<li>è¿™å’Œæ•°æ®ä¼ è¾“å¯é æ€§æœ‰å…³ï¼Œå¦‚æœåœ¨è®¢é˜…æ–¹æ–­çº¿ï¼Œé‚£ä¹ˆä»–å°†ä¼šä¸¢å¤±æ‰€æœ‰åœ¨çŸ­çº¿æœŸé—´å‘å¸ƒè€…å‘å¸ƒçš„æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>åº”ç”¨</strong></p>
<ol>
<li>æ¶ˆæ¯è®¢é˜…ï¼šå…¬ä¼—å·è®¢é˜…ï¼Œå¾®åšå…³æ³¨ç­‰ç­‰ï¼ˆèµ·å§‹æ›´å¤šæ˜¯ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥è¿›è¡Œå®ç°ï¼‰</li>
<li>å¤šäººåœ¨çº¿èŠå¤©å®¤ã€‚</li>
</ol>
<p>ç¨å¾®å¤æ‚çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°±ä¼šä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶MQå¤„ç†ã€‚</p>
<h1 id="åå››ã€Redisä¸»ä»å¤åˆ¶"><a href="#åå››ã€Redisä¸»ä»å¤åˆ¶" class="headerlink" title="åå››ã€Redisä¸»ä»å¤åˆ¶"></a>åå››ã€Redisä¸»ä»å¤åˆ¶</h1><h2 id="æ¦‚å¿µå’Œä½œç”¨"><a href="#æ¦‚å¿µå’Œä½œç”¨" class="headerlink" title="æ¦‚å¿µå’Œä½œç”¨"></a>æ¦‚å¿µå’Œä½œç”¨</h2><p><strong>æ¦‚å¿µ</strong></p>
<p>ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹ï¼ˆ<strong>Master/Leaderï¼‰,åè€…ç§°ä¸ºä»èŠ‚ç‚¹ï¼ˆSlave/Followerï¼‰</strong>ï¼Œ æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼åªèƒ½ç”±ä¸»èŠ‚ç‚¹å¤åˆ¶åˆ°ä»èŠ‚ç‚¹ï¼ˆ<strong>ä¸»èŠ‚ç‚¹ä»¥å†™ä¸ºä¸»ã€ä»èŠ‚ç‚¹ä»¥è¯»ä¸ºä¸»</strong>ï¼‰ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰0ä¸ªæˆ–è€…å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä½†æ¯ä¸ªä»èŠ‚ç‚¹åªèƒ½ç”±ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p>
<p><strong>ä½œç”¨</strong></p>
<ol>
<li><strong>æ•°æ®å†—ä½™ï¼š</strong>ä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™çš„æ–¹å¼ã€‚</li>
<li><strong>æ•…éšœæ¢å¤</strong>ï¼šå½“ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œä»èŠ‚ç‚¹å¯ä»¥æš‚æ—¶æ›¿ä»£ä¸»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œæ˜¯ä¸€ç§æœåŠ¡å†—ä½™çš„æ–¹å¼</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”±ä¸»èŠ‚ç‚¹è¿›è¡Œå†™æ“ä½œï¼Œä»èŠ‚ç‚¹è¿›è¡Œè¯»æ“ä½œï¼Œåˆ†æ‹…æœåŠ¡å™¨çš„è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å¤šè¯»å°‘å†™çš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è´Ÿè½½ï¼Œæé«˜å¹¶å‘é‡ã€‚</li>
<li><strong>é«˜å¯ç”¨åŸºçŸ³</strong>ï¼šä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ã€‚</li>
</ol>
<blockquote>
<h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤"></a>ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤</h3></blockquote>
<ol>
<li>å•å°æœåŠ¡å™¨éš¾ä»¥è´Ÿè½½å¤§é‡çš„è¯·æ±‚</li>
<li>å•å°æœåŠ¡å™¨æ•…éšœç‡é«˜ï¼Œç³»ç»Ÿå´©åæ¦‚ç‡å¤§</li>
<li>å•å°æœåŠ¡å™¨å†…å­˜å®¹é‡æœ‰é™ã€‚</li>
</ol>
<h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; info replication</span><br><span class="line"># Replication</span><br><span class="line"><span class="function">role:<span class="title">master</span> # è§’è‰²</span></span><br><span class="line"><span class="function"><span class="title">connected_slaves</span>:0 # ä»æœºæ•°é‡</span></span><br><span class="line"><span class="function"><span class="title">master_replid</span>:3<span class="title">b54deef5b7b7b7f7dd8acefa23be48879b4fcff</span></span></span><br><span class="line"><span class="function"><span class="title">master_replid2</span>:0000000000000000000000000000000000000000</span></span><br><span class="line"><span class="function"><span class="title">master_repl_offset</span>:0</span></span><br><span class="line"><span class="function"><span class="title">second_repl_offset</span>:-1</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_active</span>:0</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_size</span>:1048576</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_first_byte_offset</span>:0</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_histlen</span>:0</span></span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶éœ€è¦å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼Œå°±éœ€è¦å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªé…ç½®æ–‡ä»¶å¯¹åº”ä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>ç«¯å£å·</li>
<li>pidæ–‡ä»¶å</li>
<li>æ—¥å¿—æ–‡ä»¶å</li>
<li>rdbæ–‡ä»¶å</li>
</ul>
<p>å¯åŠ¨å•æœºå¤šæœåŠ¡é›†ç¾¤ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215610163.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¸€ä¸»äºŒä»é…ç½®"><a href="#ä¸€ä¸»äºŒä»é…ç½®" class="headerlink" title="ä¸€ä¸»äºŒä»é…ç½®"></a>ä¸€ä¸»äºŒä»é…ç½®</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹åªç”¨é…ç½®ä»æœºå°±å¥½äº†ï¼</p>
<p>è®¤è€å¤§ï¼ä¸€ä¸»ï¼ˆ79ï¼‰äºŒä»ï¼ˆ80ï¼Œ81ï¼‰</p>
<p>ä½¿ç”¨<code>SLAVEOF host port</code>å°±å¯ä»¥ä¸ºä»æœºé…ç½®ä¸»æœºäº†ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215637483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç„¶åä¸»æœºä¸Šä¹Ÿèƒ½çœ‹åˆ°ä»æœºçš„çŠ¶æ€ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215645778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬è¿™é‡Œæ˜¯ä½¿ç”¨å‘½ä»¤æ­å»ºï¼Œæ˜¯æš‚æ—¶çš„ï¼ŒçœŸå®å¼€å‘ä¸­åº”è¯¥åœ¨ä»æœºçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œè¿™æ ·çš„è¯æ˜¯æ°¸ä¹…çš„ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215654634.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<h3 id="ä½¿ç”¨è§„åˆ™"><a href="#ä½¿ç”¨è§„åˆ™" class="headerlink" title="ä½¿ç”¨è§„åˆ™"></a>ä½¿ç”¨è§„åˆ™</h3></blockquote>
<ol>
<li><strong>ä»æœºåªèƒ½è¯»ï¼Œä¸èƒ½å†™ï¼Œä¸»æœºå¯è¯»å¯å†™ä½†æ˜¯å¤šç”¨äºå†™ã€‚</strong></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"> <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6381</span>&gt; <span class="built_in">set</span> name sakura # ä»æœº<span class="number">6381</span>å†™å…¥å¤±è´¥</span><br><span class="line">(error) READONLY You can&#x27;t write against a read only replica.</span><br><span class="line"></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6380</span>&gt; <span class="built_in">set</span> name sakura # ä»æœº<span class="number">6380</span>å†™å…¥å¤±è´¥</span><br><span class="line">(error) READONLY You can&#x27;t write against a read only replica.</span><br><span class="line"></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> name sakura</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get name</span><br><span class="line">&quot;sakura&quot;</span><br></pre></td></tr></table></figure>

<ol>
<li>å½“ä¸»æœºæ–­ç”µå®•æœºåï¼Œé»˜è®¤æƒ…å†µä¸‹ä»æœºçš„è§’è‰²ä¸ä¼šå‘ç”Ÿå˜åŒ– ï¼Œé›†ç¾¤ä¸­åªæ˜¯å¤±å»äº†å†™æ“ä½œï¼Œå½“ä¸»æœºæ¢å¤ä»¥åï¼Œåˆä¼šè¿æ¥ä¸Šä»æœºæ¢å¤åŸçŠ¶ã€‚</li>
<li>å½“ä»æœºæ–­ç”µå®•æœºåï¼Œè‹¥ä¸æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½®çš„ä»æœºï¼Œå†æ¬¡å¯åŠ¨åä½œä¸ºä¸»æœºæ˜¯æ— æ³•è·å–ä¹‹å‰ä¸»æœºçš„æ•°æ®çš„ï¼Œè‹¥æ­¤æ—¶é‡æ–°é…ç½®ç§°ä¸ºä»æœºï¼Œåˆå¯ä»¥è·å–åˆ°ä¸»æœºçš„æ‰€æœ‰æ•°æ®ã€‚è¿™é‡Œå°±è¦æåˆ°ä¸€ä¸ªåŒæ­¥åŸç†ã€‚</li>
<li>ç¬¬äºŒæ¡ä¸­æåˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»æœºæ•…éšœåï¼Œä¸ä¼šå‡ºç°æ–°çš„ä¸»æœºï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥äº§ç”Ÿæ–°çš„ä¸»æœºï¼š</li>
</ol>
<ul>
<li>ä»æœºæ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤slaveof no one,è¿™æ ·æ‰§è¡Œä»¥åä»æœºä¼šç‹¬ç«‹å‡ºæ¥æˆä¸ºä¸€ä¸ªä¸»æœº</li>
<li><strong>ä½¿ç”¨å“¨å…µæ¨¡å¼ï¼ˆè‡ªåŠ¨é€‰ä¸¾ï¼‰</strong></li>
</ul>
<blockquote>
<p>å¦‚æœæ²¡æœ‰è€å¤§äº†ï¼Œè¿™ä¸ªæ—¶å€™èƒ½ä¸èƒ½é€‰æ‹©å‡ºæ¥ä¸€ä¸ªè€å¤§å‘¢ï¼Ÿæ‰‹åŠ¨ï¼</p>
</blockquote>
<p>å¦‚æœä¸»æœºæ–­å¼€äº†è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>SLAVEOF no one</code>è®©è‡ªå·±å˜æˆä¸»æœºï¼å…¶ä»–çš„èŠ‚ç‚¹å°±å¯ä»¥æ‰‹åŠ¨è¿æ¥åˆ°æœ€æ–°çš„ä¸»èŠ‚ç‚¹ï¼ˆæ‰‹åŠ¨ï¼‰ï¼å¦‚æœè¿™ä¸ªæ—¶å€™è€å¤§ä¿®å¤äº†ï¼Œé‚£ä¹ˆå°±é‡æ–°è¿æ¥ï¼</p>
<h1 id="åäº”ã€å“¨å…µæ¨¡å¼"><a href="#åäº”ã€å“¨å…µæ¨¡å¼" class="headerlink" title="åäº”ã€å“¨å…µæ¨¡å¼"></a>åäº”ã€å“¨å…µæ¨¡å¼</h1><p>æ›´å¤šä¿¡æ¯å‚è€ƒåšå®¢ï¼š<a href="https://www.jianshu.com/p/06ab9daf921d">https://www.jianshu.com/p/06ab9daf921d</a></p>
<p><strong>ä¸»ä»åˆ‡æ¢æŠ€æœ¯çš„æ–¹æ³•æ˜¯ï¼šå½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°ä»æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦äººå·¥å¹²é¢„ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ã€‚è¿™ä¸æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘å“¨å…µæ¨¡å¼</strong>ã€‚</p>
<p>å•æœºå•ä¸ªå“¨å…µ</p>
<p><a href="https://imgtu.com/i/5PhKPg"><img src="https://z3.ax1x.com/2021/10/08/5PhKPg.png" alt="5PhKPg.png"></a></p>
<p>å“¨å…µçš„ä½œç”¨ï¼š</p>
<ul>
<li>é€šè¿‡å‘é€å‘½ä»¤ï¼Œè®©RedisæœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ã€‚</li>
<li>å½“å“¨å…µç›‘æµ‹åˆ°masterå®•æœºï¼Œä¼šè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmasterï¼Œç„¶åé€šè¿‡<strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong>é€šçŸ¥å…¶ä»–çš„ä»æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒä»¬åˆ‡æ¢ä¸»æœºã€‚</li>
</ul>
<p>å¤šå“¨å…µæ¨¡å¼</p>
<p><a href="https://imgtu.com/i/5PhQ2j"><img src="https://z3.ax1x.com/2021/10/08/5PhQ2j.png" alt="5PhQ2j.png"></a></p>
<p>å“¨å…µçš„æ ¸å¿ƒé…ç½®</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">sentinel monitor mymaster <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ•°å­—1è¡¨ç¤º ï¼šå½“ä¸€ä¸ªå“¨å…µä¸»è§‚è®¤ä¸ºä¸»æœºæ–­å¼€ï¼Œå°±å¯ä»¥å®¢è§‚è®¤ä¸ºä¸»æœºæ•…éšœï¼Œç„¶åå¼€å§‹é€‰ä¸¾æ–°çš„ä¸»æœºã€‚</li>
</ul>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis-sentinel xxx/sentinel.conf</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸå¯åŠ¨å“¨å…µæ¨¡å¼</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215752444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æ­¤æ—¶å“¨å…µç›‘è§†ç€æˆ‘ä»¬çš„ä¸»æœº6379ï¼Œå½“æˆ‘ä»¬æ–­å¼€ä¸»æœºåï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215806972.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>å“¨å…µæ¨¡å¼ä¼˜ç¼ºç‚¹</p>
</blockquote>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>å“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‰€æœ‰ä¸»ä»å¤åˆ¶çš„ä¼˜ç‚¹ï¼Œå®ƒéƒ½æœ‰</li>
<li>ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§æ›´å¥½</li>
<li>å“¨å…µæ¨¡å¼æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œæ‰‹åŠ¨åˆ°è‡ªåŠ¨ï¼Œæ›´åŠ å¥å£®</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>Redisä¸å¥½åœ¨çº¿æ‰©å®¹ï¼Œé›†ç¾¤å®¹é‡ä¸€æ—¦è¾¾åˆ°ä¸Šé™ï¼Œåœ¨çº¿æ‰©å®¹å°±ååˆ†éº»çƒ¦</li>
<li>å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé…ç½®é¡¹</li>
</ol>
<blockquote>
<p>å“¨å…µæ¨¡å¼çš„å…¨éƒ¨é…ç½®</p>
</blockquote>
<p>å®Œæ•´çš„å“¨å…µæ¨¡å¼é…ç½®æ–‡ä»¶ sentinel.conf</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># Example sentinel.conf</span><br><span class="line"> </span><br><span class="line"># å“¨å…µsentinelå®ä¾‹è¿è¡Œçš„ç«¯å£ é»˜è®¤<span class="number">26379</span></span><br><span class="line">port <span class="number">26379</span></span><br><span class="line"> </span><br><span class="line"># å“¨å…µsentinelçš„å·¥ä½œç›®å½•</span><br><span class="line"><span class="built_in">dir</span> /tmp</span><br><span class="line"> </span><br><span class="line"># å“¨å…µsentinelç›‘æ§çš„redisä¸»èŠ‚ç‚¹çš„ ip port </span><br><span class="line"># master-name  å¯ä»¥è‡ªå·±å‘½åçš„ä¸»èŠ‚ç‚¹åå­— åªèƒ½ç”±å­—æ¯A-zã€æ•°å­—<span class="number">0</span>-<span class="number">9</span> ã€è¿™ä¸‰ä¸ªå­—ç¬¦&quot;.-_&quot;ç»„æˆã€‚</span><br><span class="line"># quorum å½“è¿™äº›quorumä¸ªæ•°sentinelå“¨å…µè®¤ä¸ºmasterä¸»èŠ‚ç‚¹å¤±è” é‚£ä¹ˆè¿™æ—¶ å®¢è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹å¤±è”äº†</span><br><span class="line"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span><br><span class="line">sentinel monitor mymaster <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> <span class="number">6379</span> <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"># å½“åœ¨Rediså®ä¾‹ä¸­å¼€å¯äº†requirepass foobared æˆæƒå¯†ç  è¿™æ ·æ‰€æœ‰è¿æ¥Rediså®ä¾‹çš„å®¢æˆ·ç«¯éƒ½è¦æä¾›å¯†ç </span><br><span class="line"># è®¾ç½®å“¨å…µsentinel è¿æ¥ä¸»ä»çš„å¯†ç  æ³¨æ„å¿…é¡»ä¸ºä¸»ä»è®¾ç½®ä¸€æ ·çš„éªŒè¯å¯†ç </span><br><span class="line"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span><br><span class="line">sentinel auth-pass mymaster MySUPER--secret-<span class="number">0123</span>passw0rd</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># æŒ‡å®šå¤šå°‘æ¯«ç§’ä¹‹å ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µsentinel æ­¤æ—¶ å“¨å…µä¸»è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿ é»˜è®¤<span class="number">30</span>ç§’</span><br><span class="line"># sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span><br><span class="line">sentinel down-after-milliseconds mymaster <span class="number">30000</span></span><br><span class="line"> </span><br><span class="line"># è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œ</span><br><span class="line">è¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œ</span><br><span class="line">ä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚</span><br><span class="line">å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º <span class="number">1</span> æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚</span><br><span class="line"># sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span><br><span class="line">sentinel parallel-syncs mymaster <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># æ•…éšœè½¬ç§»çš„è¶…æ—¶æ—¶é—´ failover-timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š </span><br><span class="line">#<span class="number">1</span>. åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚</span><br><span class="line">#<span class="number">2</span>. å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚</span><br><span class="line">#<span class="number">3</span>.å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚  </span><br><span class="line">#<span class="number">4</span>.å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel-syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†</span><br><span class="line"># é»˜è®¤ä¸‰åˆ†é’Ÿ</span><br><span class="line"># sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span><br><span class="line">sentinel failover-timeout mymaster <span class="number">180000</span></span><br><span class="line"> </span><br><span class="line"># SCRIPTS EXECUTION</span><br><span class="line"> </span><br><span class="line">#é…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚</span><br><span class="line">#å¯¹äºè„šæœ¬çš„è¿è¡Œç»“æœæœ‰ä»¥ä¸‹è§„åˆ™ï¼š</span><br><span class="line">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›<span class="number">1</span>ï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ç¨åå°†ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œé‡å¤æ¬¡æ•°ç›®å‰é»˜è®¤ä¸º<span class="number">10</span></span><br><span class="line">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›<span class="number">2</span>ï¼Œæˆ–è€…æ¯”<span class="number">2</span>æ›´é«˜çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œè„šæœ¬å°†ä¸ä¼šé‡å¤æ‰§è¡Œã€‚</span><br><span class="line">#å¦‚æœè„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·è¢«ç»ˆæ­¢äº†ï¼Œåˆ™åŒè¿”å›å€¼ä¸º<span class="number">1</span>æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</span><br><span class="line">#ä¸€ä¸ªè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º<span class="number">60</span>sï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œè„šæœ¬å°†ä¼šè¢«ä¸€ä¸ªSIGKILLä¿¡å·ç»ˆæ­¢ï¼Œä¹‹åé‡æ–°æ‰§è¡Œã€‚</span><br><span class="line"> </span><br><span class="line">#é€šçŸ¥å‹è„šæœ¬:å½“sentinelæœ‰ä»»ä½•è­¦å‘Šçº§åˆ«çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è¯´rediså®ä¾‹çš„ä¸»è§‚å¤±æ•ˆå’Œå®¢è§‚å¤±æ•ˆç­‰ç­‰ï¼‰ï¼Œå°†ä¼šå»è°ƒç”¨è¿™ä¸ªè„šæœ¬ï¼Œ</span><br><span class="line">#è¿™æ—¶è¿™ä¸ªè„šæœ¬åº”è¯¥é€šè¿‡é‚®ä»¶ï¼ŒSMSç­‰æ–¹å¼å»é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜å…³äºç³»ç»Ÿä¸æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ã€‚è°ƒç”¨è¯¥è„šæœ¬æ—¶ï¼Œå°†ä¼ ç»™è„šæœ¬ä¸¤ä¸ªå‚æ•°ï¼Œ</span><br><span class="line">#ä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œ</span><br><span class="line">#ä¸€ä¸ªæ˜¯äº‹ä»¶çš„æè¿°ã€‚</span><br><span class="line">#å¦‚æœsentinel.confé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è¿™ä¸ªè„šæœ¬è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯è¿™ä¸ªè„šæœ¬å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦åˆ™sentinelæ— æ³•æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚</span><br><span class="line">#é€šçŸ¥è„šæœ¬</span><br><span class="line"># sentinel notification-script &lt;master-name&gt; &lt;script-<span class="built_in">path</span>&gt;</span><br><span class="line">  sentinel notification-script mymaster /var/redis/notify.sh</span><br><span class="line"> </span><br><span class="line"># å®¢æˆ·ç«¯é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹å‚æ•°è„šæœ¬</span><br><span class="line"># å½“ä¸€ä¸ªmasterç”±äºfailoverè€Œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªè„šæœ¬å°†ä¼šè¢«è°ƒç”¨ï¼Œé€šçŸ¥ç›¸å…³çš„å®¢æˆ·ç«¯å…³äºmasteråœ°å€å·²ç»å‘ç”Ÿæ”¹å˜çš„ä¿¡æ¯ã€‚</span><br><span class="line"># ä»¥ä¸‹å‚æ•°å°†ä¼šåœ¨è°ƒç”¨è„šæœ¬æ—¶ä¼ ç»™è„šæœ¬:</span><br><span class="line"># &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span><br><span class="line"># ç›®å‰&lt;state&gt;æ€»æ˜¯â€œfailoverâ€,</span><br><span class="line"># &lt;role&gt;æ˜¯â€œleaderâ€æˆ–è€…â€œobserverâ€ä¸­çš„ä¸€ä¸ªã€‚ </span><br><span class="line"># å‚æ•° from-ip, from-port, to-ip, to-portæ˜¯ç”¨æ¥å’Œæ—§çš„masterå’Œæ–°çš„master(å³æ—§çš„slave)é€šä¿¡çš„</span><br><span class="line"># è¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œèƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ˜¯é’ˆå¯¹æ€§çš„ã€‚</span><br><span class="line"># sentinel client-reconfig-script &lt;master-name&gt; &lt;script-<span class="built_in">path</span>&gt;</span><br><span class="line">sentinel client-reconfig-script mymaster /var/redis/reconfig.sh</span><br></pre></td></tr></table></figure>

<h1 id="åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©"><a href="#åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©" class="headerlink" title="åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©"></a>åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©</h1><h3 id="ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"><a href="#ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰" class="headerlink" title="ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"></a>ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰</h3><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·è¯·æ±‚æ•°æ®æ—¶ï¼Œä¼šå…ˆåœ¨ç¼“å­˜(Redis)ä¸­æŸ¥æ‰¾ï¼Œè‹¥æ²¡æ‰¾åˆ°å³ç¼“å­˜æœªå‘½ä¸­ï¼Œå†åœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ•°é‡å°‘å¯èƒ½é—®é¢˜ä¸å¤§ï¼Œå¯æ˜¯ä¸€æ—¦å¤§é‡çš„è¯·æ±‚æ•°æ®ï¼ˆä¾‹å¦‚ç§’æ€åœºæ™¯ï¼‰ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œå°±ä¼šå…¨éƒ¨è½¬ç§»åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“æå¤§çš„å‹åŠ›ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æ•°æ®åº“å´©æºƒã€‚ç½‘ç»œå®‰å…¨ä¸­ä¹Ÿæœ‰äººæ¶æ„ä½¿ç”¨è¿™ç§æ‰‹æ®µè¿›è¡Œæ”»å‡»è¢«ç§°ä¸ºæ´ªæ°´æ”»å‡»ã€‚</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong></p>
<p>å¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥Hashçš„å½¢å¼å­˜å‚¨ï¼Œä»¥ä¾¿å¿«é€Ÿç¡®å®šæ˜¯å¦å­˜åœ¨è¿™ä¸ªå€¼ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ‹¦æˆªæ ¡éªŒï¼Œæ ¡éªŒä¸é€šè¿‡ç›´æ¥æ‰“å›ï¼Œå‡è½»äº†å­˜å‚¨ç³»ç»Ÿçš„å‹åŠ›ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215824722.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong></p>
<p>ä¸€æ¬¡è¯·æ±‚è‹¥åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æ‰¾åˆ°ï¼Œå°±åœ¨ç¼“å­˜ä¸­æ–¹ä¸€ä¸ªç©ºå¯¹è±¡ç”¨äºå¤„ç†åç»­è¿™ä¸ªè¯·æ±‚ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215836317.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™æ ·åšæœ‰ä¸€ä¸ªç¼ºé™·ï¼šå­˜å‚¨ç©ºå¯¹è±¡ä¹Ÿéœ€è¦ç©ºé—´ï¼Œå¤§é‡çš„ç©ºå¯¹è±¡ä¼šè€—è´¹ä¸€å®šçš„ç©ºé—´ï¼Œå­˜å‚¨æ•ˆç‡å¹¶ä¸é«˜ã€‚è§£å†³è¿™ä¸ªç¼ºé™·çš„æ–¹å¼å°±æ˜¯è®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</p>
<p>å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£çš„ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“ã€‚</p>
<h3 id="ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"><a href="#ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰" class="headerlink" title="ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"></a>ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰</h3><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>ç›¸è¾ƒäºç¼“å­˜ç©¿é€ï¼Œç¼“å­˜å‡»ç©¿çš„ç›®çš„æ€§æ›´å¼ºï¼Œä¸€ä¸ªå­˜åœ¨çš„keyï¼Œåœ¨ç¼“å­˜è¿‡æœŸçš„ä¸€åˆ»ï¼ŒåŒæ—¶æœ‰å¤§é‡çš„è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šå‡»ç©¿åˆ°DBï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ã€‚è¿™å°±æ˜¯ç¼“å­˜è¢«å‡»ç©¿ï¼Œåªæ˜¯é’ˆå¯¹å…¶ä¸­æŸä¸ªkeyçš„ç¼“å­˜ä¸å¯ç”¨è€Œå¯¼è‡´å‡»ç©¿ï¼Œä½†æ˜¯å…¶ä»–çš„keyä¾ç„¶å¯ä»¥ä½¿ç”¨ç¼“å­˜å“åº”ã€‚</p>
<p>æ¯”å¦‚çƒ­æœæ’è¡Œä¸Šï¼Œä¸€ä¸ªçƒ­ç‚¹æ–°é—»è¢«åŒæ—¶å¤§é‡è®¿é—®å°±å¯èƒ½å¯¼è‡´ç¼“å­˜å‡»ç©¿ã€‚</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<ol>
<li><strong>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</strong></li>
</ol>
<p>è¿™æ ·å°±ä¸ä¼šå‡ºç°çƒ­ç‚¹æ•°æ®è¿‡æœŸçš„æƒ…å†µï¼Œä½†æ˜¯å½“Rediså†…å­˜ç©ºé—´æ»¡çš„æ—¶å€™ä¹Ÿä¼šæ¸…ç†éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸”æ­¤ç§æ–¹æ¡ˆä¼šå ç”¨ç©ºé—´ï¼Œä¸€æ—¦çƒ­ç‚¹æ•°æ®å¤šäº†èµ·æ¥ï¼Œå°±ä¼šå ç”¨éƒ¨åˆ†ç©ºé—´ã€‚</p>
<ol>
<li><strong>åŠ äº’æ–¥é”(åˆ†å¸ƒå¼é”)</strong></li>
</ol>
<p>åœ¨è®¿é—®keyä¹‹å‰ï¼Œé‡‡ç”¨SETNXï¼ˆset if not existsï¼‰æ¥è®¾ç½®å¦ä¸€ä¸ªçŸ­æœŸkeyæ¥é”ä½å½“å‰keyçš„è®¿é—®ï¼Œè®¿é—®ç»“æŸå†åˆ é™¤è¯¥çŸ­æœŸkeyã€‚ä¿è¯åŒæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚è¿™æ ·å¯¹é”çš„è¦æ±‚å°±ååˆ†é«˜ã€‚</p>
<h2 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h2><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>å¤§é‡çš„keyè®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´åœ¨ç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215850428.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<ul>
<li><p><strong>redisé«˜å¯ç”¨</strong></p>
<p>è¿™ä¸ªæ€æƒ³çš„å«ä¹‰æ˜¯ï¼Œæ—¢ç„¶redisæœ‰å¯èƒ½æŒ‚æ‰ï¼Œé‚£æˆ‘å¤šå¢è®¾å‡ å°redisï¼Œè¿™æ ·ä¸€å°æŒ‚æ‰ä¹‹åå…¶ä»–çš„è¿˜å¯ä»¥ç»§ç»­å·¥ä½œï¼Œå…¶å®å°±æ˜¯æ­å»ºçš„é›†ç¾¤</p>
</li>
<li><p><strong>é™æµé™çº§</strong></p>
<p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€æƒ³æ˜¯ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚</p>
</li>
<li><p><strong>æ•°æ®é¢„çƒ­</strong></p>
<p>æ•°æ®åŠ çƒ­çš„å«ä¹‰å°±æ˜¯åœ¨æ­£å¼éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘å…ˆæŠŠå¯èƒ½çš„æ•°æ®å…ˆé¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·éƒ¨åˆ†å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚åœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚</p>
</li>
</ul>
<blockquote>
<p>ç¬”è®°å‚è€ƒè‡ªï¼š<a href="https://blog.csdn.net/weixin_43873227/article/details/106107270">https://blog.csdn.net/weixin_43873227/article/details/106107270</a> &gt; <strong>æ­é…ç‹‚ç¥è¯´ Redisè§†é¢‘ä¸€èµ·å­¦ä¹ </strong><br><a href="https://www.bilibili.com/video/BV1S54y1R7SB?from=search&seid=3929831479981400108">ç‹‚ç¥è§†é¢‘</a></p>
</blockquote>
<h1 id="ä¸€ã€Nosqlæ¦‚è¿°-1"><a href="#ä¸€ã€Nosqlæ¦‚è¿°-1" class="headerlink" title="ä¸€ã€Nosqlæ¦‚è¿°"></a>ä¸€ã€Nosqlæ¦‚è¿°</h1><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨Nosql-1"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Nosql-1" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Nosql"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Nosql</h2><blockquote>
<p>1ã€å•æœºMysqlæ—¶ä»£</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2020082010365930.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>90å¹´ä»£,ä¸€ä¸ªç½‘ç«™çš„è®¿é—®é‡ä¸€èˆ¬ä¸ä¼šå¤ªå¤§ï¼Œå•ä¸ªæ•°æ®åº“å®Œå…¨å¤Ÿç”¨ã€‚éšç€ç”¨æˆ·å¢å¤šï¼Œç½‘ç«™å‡ºç°ä»¥ä¸‹é—®é¢˜</p>
<ol>
<li>æ•°æ®é‡å¢åŠ åˆ°ä¸€å®šç¨‹åº¦ï¼Œå•æœºæ•°æ®åº“å°±æ”¾ä¸ä¸‹äº†</li>
<li>æ•°æ®çš„ç´¢å¼•ï¼ˆB+ Treeï¼‰,ä¸€ä¸ªæœºå™¨å†…å­˜ä¹Ÿå­˜æ”¾ä¸ä¸‹</li>
<li>è®¿é—®é‡å˜å¤§åï¼ˆè¯»å†™æ··åˆï¼‰ï¼Œä¸€å°æœåŠ¡å™¨æ‰¿å—ä¸ä½ã€‚</li>
</ol>
<blockquote>
<p>2ã€Memcached(ç¼“å­˜) + Mysql + å‚ç›´æ‹†åˆ†ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰</p>
</blockquote>
<p>ç½‘ç«™80%çš„æƒ…å†µéƒ½æ˜¯åœ¨è¯»ï¼Œæ¯æ¬¡éƒ½è¦å»æŸ¥è¯¢æ•°æ®åº“çš„è¯å°±ååˆ†çš„éº»çƒ¦ï¼æ‰€ä»¥è¯´æˆ‘ä»¬å¸Œæœ›å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¼“å­˜æ¥ä¿è¯æ•ˆç‡ï¼</p>
<p><img src="https://img-blog.csdnimg.cn/20200820103713734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¼˜åŒ–è¿‡ç¨‹ç»å†äº†ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p>
<ol>
<li>ä¼˜åŒ–æ•°æ®åº“çš„æ•°æ®ç»“æ„å’Œç´¢å¼•(éš¾åº¦å¤§)</li>
<li>æ–‡ä»¶ç¼“å­˜ï¼Œé€šè¿‡IOæµè·å–æ¯”æ¯æ¬¡éƒ½è®¿é—®æ•°æ®åº“æ•ˆç‡ç•¥é«˜ï¼Œä½†æ˜¯æµé‡çˆ†ç‚¸å¼å¢é•¿æ—¶å€™ï¼ŒIOæµä¹Ÿæ‰¿å—ä¸äº†</li>
<li>MemCache,å½“æ—¶æœ€çƒ­é—¨çš„æŠ€æœ¯ï¼Œé€šè¿‡åœ¨æ•°æ®åº“å’Œæ•°æ®åº“è®¿é—®å±‚ä¹‹é—´åŠ ä¸Šä¸€å±‚ç¼“å­˜ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ï¼Œåç»­çš„æŸ¥è¯¢å…ˆæ£€æŸ¥ç¼“å­˜ï¼Œè‹¥æœ‰ç›´æ¥æ‹¿å»ä½¿ç”¨ï¼Œæ•ˆç‡æ˜¾è‘—æå‡ã€‚</li>
</ol>
<blockquote>
<p>3ã€åˆ†åº“åˆ†è¡¨ + æ°´å¹³æ‹†åˆ† + Mysqlé›†ç¾¤</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200820103739584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>4ã€å¦‚ä»Šæœ€è¿‘çš„å¹´ä»£</p>
</blockquote>
<p>å¦‚ä»Šä¿¡æ¯é‡äº•å–·å¼å¢é•¿ï¼Œå„ç§å„æ ·çš„æ•°æ®å‡ºç°ï¼ˆç”¨æˆ·å®šä½æ•°æ®ï¼Œå›¾ç‰‡æ•°æ®ç­‰ï¼‰ï¼Œå¤§æ•°æ®çš„èƒŒæ™¯ä¸‹å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰æ— æ³•æ»¡è¶³å¤§é‡æ•°æ®è¦æ±‚ã€‚Nosqlæ•°æ®åº“å°±èƒ½è½»æ¾è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<blockquote>
<p>ç›®å‰ä¸€ä¸ªåŸºæœ¬çš„äº’è”ç½‘é¡¹ç›®</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200820103804572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦ç”¨NoSQL ï¼Ÿ</p>
</blockquote>
<p>ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œç¤¾äº¤ç½‘ç»œï¼Œåœ°ç†ä½ç½®ã€‚ç”¨æˆ·è‡ªå·±äº§ç”Ÿçš„æ•°æ®ï¼Œç”¨æˆ·æ—¥å¿—ç­‰ç­‰çˆ†å‘å¼å¢é•¿ï¼<br>è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨NoSQLæ•°æ®åº“çš„ï¼ŒNosqlå¯ä»¥å¾ˆå¥½çš„å¤„ç†ä»¥ä¸Šçš„æƒ…å†µï¼</p>
<h2 id="ä»€ä¹ˆæ˜¯Nosql-1"><a href="#ä»€ä¹ˆæ˜¯Nosql-1" class="headerlink" title="ä»€ä¹ˆæ˜¯Nosql"></a>ä»€ä¹ˆæ˜¯Nosql</h2><p><strong>NoSQL = Not Only SQLï¼ˆä¸ä»…ä»…æ˜¯SQLï¼‰</strong></p>
<p>Not Only Structured Query Language</p>
<p>å…³ç³»å‹æ•°æ®åº“ï¼šåˆ—+è¡Œï¼ŒåŒä¸€ä¸ªè¡¨ä¸‹æ•°æ®çš„ç»“æ„æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>éå…³ç³»å‹æ•°æ®åº“ï¼šæ•°æ®å­˜å‚¨æ²¡æœ‰å›ºå®šçš„æ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œæ¨ªå‘æ‰©å±•ã€‚</p>
<p>NoSQLæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼Œéšç€web2.0äº’è”ç½‘çš„è¯ç”Ÿï¼Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“å¾ˆéš¾å¯¹ä»˜web2.0æ—¶ä»£ï¼å°¤å…¶æ˜¯è¶…å¤§è§„æ¨¡çš„é«˜å¹¶å‘çš„ç¤¾åŒºï¼Œæš´éœ²å‡ºæ¥å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜ï¼ŒNoSQLåœ¨å½“ä»Šå¤§æ•°æ®ç¯å¢ƒä¸‹å‘å±•çš„ååˆ†è¿…é€Ÿï¼ŒRedisæ˜¯å‘å±•æœ€å¿«çš„ã€‚</p>
<h2 id="Nosqlç‰¹ç‚¹-1"><a href="#Nosqlç‰¹ç‚¹-1" class="headerlink" title="Nosqlç‰¹ç‚¹"></a>Nosqlç‰¹ç‚¹</h2><ol>
<li>æ–¹ä¾¿æ‰©å±•ï¼ˆæ•°æ®ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œå¾ˆå¥½æ‰©å±•ï¼ï¼‰</li>
<li>å¤§æ•°æ®é‡é«˜æ€§èƒ½ï¼ˆRedisä¸€ç§’å¯ä»¥å†™8ä¸‡æ¬¡ï¼Œè¯»11ä¸‡æ¬¡ï¼ŒNoSQLçš„ç¼“å­˜è®°å½•çº§ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ï¼ï¼‰</li>
<li>æ•°æ®ç±»å‹æ˜¯å¤šæ ·å‹çš„ï¼ï¼ˆä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ï¼Œéšå–éšç”¨ï¼‰</li>
<li>ä¼ ç»Ÿçš„ RDBMS å’Œ NoSQL</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ä¼ ç»Ÿçš„ RDBMS(å…³ç³»å‹æ•°æ®åº“)</span><br><span class="line">- ç»“æ„åŒ–ç»„ç»‡</span><br><span class="line">- SQL</span><br><span class="line">- æ•°æ®å’Œå…³ç³»éƒ½å­˜åœ¨å•ç‹¬çš„è¡¨ä¸­ row col</span><br><span class="line">- æ“ä½œï¼Œæ•°æ®å®šä¹‰è¯­è¨€</span><br><span class="line">- ä¸¥æ ¼çš„ä¸€è‡´æ€§</span><br><span class="line">- åŸºç¡€çš„äº‹åŠ¡</span><br><span class="line">- ...</span><br><span class="line">Nosql</span><br><span class="line">- ä¸ä»…ä»…æ˜¯æ•°æ®</span><br><span class="line">- æ²¡æœ‰å›ºå®šçš„æŸ¥è¯¢è¯­è¨€</span><br><span class="line">- é”®å€¼å¯¹å­˜å‚¨ï¼Œåˆ—å­˜å‚¨ï¼Œæ–‡æ¡£å­˜å‚¨ï¼Œå›¾å½¢æ•°æ®åº“ï¼ˆç¤¾äº¤å…³ç³»ï¼‰</span><br><span class="line">- æœ€ç»ˆä¸€è‡´æ€§</span><br><span class="line">- CAPå®šç†å’ŒBASE</span><br><span class="line">- é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œé«˜æ‰©å±•</span><br><span class="line">- ...</span><br></pre></td></tr></table></figure>

<blockquote>
<p>äº†è§£ï¼š3V + 3é«˜</p>
</blockquote>
<p>å¤§æ•°æ®æ—¶ä»£çš„3V ï¼šä¸»è¦æ˜¯<strong>æè¿°é—®é¢˜</strong>çš„</p>
<ol>
<li>æµ·é‡Velume</li>
<li>å¤šæ ·Variety</li>
<li>å®æ—¶Velocity</li>
</ol>
<p>å¤§æ•°æ®æ—¶ä»£çš„3é«˜ ï¼š ä¸»è¦æ˜¯<strong>å¯¹ç¨‹åºçš„è¦æ±‚</strong></p>
<ol>
<li>é«˜å¹¶å‘</li>
<li>é«˜å¯æ‰©</li>
<li>é«˜æ€§èƒ½</li>
</ol>
<p>çœŸæ­£åœ¨å…¬å¸ä¸­çš„å®è·µï¼šNoSQL + RDBMS ä¸€èµ·ä½¿ç”¨æ‰æ˜¯æœ€å¼ºçš„ã€‚</p>
<h2 id="é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ-1"><a href="#é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ-1" class="headerlink" title="é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ"></a>é˜¿é‡Œå·´å·´æ¼”è¿›åˆ†æ</h2><p>æ¨èé˜…è¯»ï¼šé˜¿é‡Œäº‘çš„è¿™ç¾¤ç–¯å­<a href="https://yq.aliyun.com/articles/653511">https://yq.aliyun.com/articles/653511</a></p>
<p><img src="https://img-blog.csdnimg.cn/20200820103829446.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="1"></p>
<p><img src="https://img-blog.csdnimg.cn/20200820103851613.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># å•†å“ä¿¡æ¯</span><br><span class="line">- ä¸€èˆ¬å­˜æ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ï¼šMysql,é˜¿é‡Œå·´å·´ä½¿ç”¨çš„Mysqléƒ½æ˜¯ç»è¿‡å†…éƒ¨æ”¹åŠ¨çš„ã€‚</span><br><span class="line"></span><br><span class="line"># å•†å“æè¿°ã€è¯„è®º(æ–‡å­—å±…å¤š)</span><br><span class="line">- æ–‡æ¡£å‹æ•°æ®åº“ï¼šMongoDB</span><br><span class="line"></span><br><span class="line"># å›¾ç‰‡</span><br><span class="line">- åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ FastDFS</span><br><span class="line">- æ·˜å®ï¼šTFS</span><br><span class="line">- Google: GFS</span><br><span class="line">- Hadoop: HDFS</span><br><span class="line">- é˜¿é‡Œäº‘: oss</span><br><span class="line"></span><br><span class="line"># å•†å“å…³é”®å­— ç”¨äºæœç´¢</span><br><span class="line">- æœç´¢å¼•æ“ï¼šsolr,elasticsearch</span><br><span class="line">- é˜¿é‡Œï¼šIsearch å¤šéš†</span><br><span class="line"></span><br><span class="line"># å•†å“çƒ­é—¨çš„æ³¢æ®µä¿¡æ¯</span><br><span class="line">- å†…å­˜æ•°æ®åº“ï¼šRedisï¼ŒMemcache</span><br><span class="line"></span><br><span class="line"># å•†å“äº¤æ˜“ï¼Œå¤–éƒ¨æ”¯ä»˜æ¥å£</span><br><span class="line">- ç¬¬ä¸‰æ–¹åº”ç”¨</span><br></pre></td></tr></table></figure>

<h2 id="Nosqlçš„å››å¤§åˆ†ç±»-1"><a href="#Nosqlçš„å››å¤§åˆ†ç±»-1" class="headerlink" title="Nosqlçš„å››å¤§åˆ†ç±»"></a>Nosqlçš„å››å¤§åˆ†ç±»</h2><blockquote>
<p><strong>KVé”®å€¼å¯¹</strong></p>
</blockquote>
<ul>
<li>æ–°æµªï¼š<strong>Redis</strong></li>
<li>ç¾å›¢ï¼šRedis + Tair</li>
<li>é˜¿é‡Œã€ç™¾åº¦ï¼šRedis + Memcache</li>
</ul>
<blockquote>
<p><strong>æ–‡æ¡£å‹æ•°æ®åº“ï¼ˆbsonæ•°æ®æ ¼å¼ï¼‰ï¼š</strong></p>
</blockquote>
<ul>
<li>MongoDB(æŒæ¡)<ul>
<li>åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚C++ç¼–å†™ï¼Œç”¨äºå¤„ç†å¤§é‡æ–‡æ¡£ã€‚</li>
<li>MongoDBæ˜¯RDBMSå’ŒNoSQLçš„ä¸­é—´äº§å“ã€‚MongoDBæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œçš„ï¼ŒNoSQLä¸­æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li>ConthDB</li>
</ul>
<blockquote>
<p><strong>åˆ—å­˜å‚¨æ•°æ®åº“</strong></p>
</blockquote>
<ul>
<li><strong>HBase</strong>(å¤§æ•°æ®å¿…å­¦)</li>
<li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</li>
</ul>
<blockquote>
<p><strong>å›¾å…³ç³»æ•°æ®åº“</strong></p>
</blockquote>
<p>ç”¨äºå¹¿å‘Šæ¨èï¼Œç¤¾äº¤ç½‘ç»œ</p>
<ul>
<li><strong>Neo4j</strong>ã€InfoGrid</li>
</ul>
<p><a href="https://imgtu.com/i/4OvaB6"><img src="https://z3.ax1x.com/2021/10/04/4OvaB6.png" alt="4OvaB6.png"></a></p>
<h1 id="äºŒã€Rediså…¥é—¨-1"><a href="#äºŒã€Rediså…¥é—¨-1" class="headerlink" title="äºŒã€Rediså…¥é—¨"></a>äºŒã€Rediså…¥é—¨</h1><h2 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><blockquote>
<p>Redisæ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>Redisï¼ˆRemote Dictionary Server )ï¼Œå³è¿œç¨‹å­—å…¸æœåŠ¡ã€‚</p>
<p>æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€<strong>Key-Valueæ•°æ®åº“</strong>ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p>
<p><strong>ä¸memcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­</strong>ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥ã€‚</p>
<blockquote>
<p>Redisèƒ½è¯¥å¹²ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<ol>
<li>å†…å­˜å­˜å‚¨ã€æŒä¹…åŒ–ï¼Œå†…å­˜æ˜¯æ–­ç”µå³å¤±çš„ï¼Œæ‰€ä»¥éœ€è¦æŒä¹…åŒ–ï¼ˆRDBã€AOFï¼‰</li>
<li>é«˜æ•ˆç‡ã€ç”¨äºé«˜é€Ÿç¼“å†²</li>
<li>å‘å¸ƒè®¢é˜…ç³»ç»Ÿ</li>
<li>åœ°å›¾ä¿¡æ¯åˆ†æ</li>
<li>è®¡æ—¶å™¨ã€è®¡æ•°å™¨(egï¼šæµè§ˆé‡)</li>
<li>ã€‚ã€‚ã€‚</li>
</ol>
<blockquote>
<p>ç‰¹æ€§</p>
</blockquote>
<ol>
<li><p>å¤šæ ·çš„æ•°æ®ç±»å‹</p>
</li>
<li><p>æŒä¹…åŒ–</p>
</li>
<li><p>é›†ç¾¤</p>
</li>
<li><p>äº‹åŠ¡</p>
<p>â€¦</p>
</li>
</ol>
<h2 id="ç¯å¢ƒæ­å»º-1"><a href="#ç¯å¢ƒæ­å»º-1" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p>å®˜ç½‘ï¼š<a href="https://redis.io/">https://redis.io/</a></p>
<p>æ¨èä½¿ç”¨LinuxæœåŠ¡å™¨å­¦ä¹ ã€‚</p>
<p>windowsç‰ˆæœ¬çš„Rediså·²ç»åœæ›´å¾ˆä¹…äº†â€¦</p>
<h2 id="Windowså®‰è£…-1"><a href="#Windowså®‰è£…-1" class="headerlink" title="Windowså®‰è£…"></a>Windowså®‰è£…</h2><p><a href="https://github.com/dmajkic/redis">https://github.com/dmajkic/redis</a></p>
<ol>
<li>è§£å‹å®‰è£…åŒ…<br><img src="https://img-blog.csdnimg.cn/20200820103922318.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>å¼€å¯redis-server.exe</li>
<li>å¯åŠ¨redis-cli.exeæµ‹è¯•<img src="https://img-blog.csdnimg.cn/20200820103950934.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ol>
<h2 id="Linuxå®‰è£…-1"><a href="#Linuxå®‰è£…-1" class="headerlink" title="Linuxå®‰è£…"></a>Linuxå®‰è£…</h2><p>ä¸‹è½½å®‰è£…åŒ…ï¼<code>redis-5.0.8.tar.gz</code></p>
<p>è§£å‹Redisçš„å®‰è£…åŒ…ï¼ç¨‹åºä¸€èˆ¬æ”¾åœ¨ <code>/opt</code> ç›®å½•ä¸‹</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@tianhong /]# <span class="built_in">cd</span> /home/tianhong	//ç°åœ¨å­˜çš„ä½ç½®</span><br><span class="line">[root@tianhong tianhong]# mv redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>.tar.gz /opt</span><br><span class="line">[root@tianhong tianhong]# <span class="built_in">cd</span> /opt</span><br><span class="line">[root@tianhong opt]# ls</span><br><span class="line">[root@tianhong opt]# tar -zxvf redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>.tar.gz  //è§£å‹</span><br><span class="line">[root@tianhong opt]# ls	//æŸ¥çœ‹</span><br><span class="line"></span><br><span class="line">[root@tianhong opt]# <span class="built_in">cd</span> redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>	//è¿›å…¥è§£å‹ç›®å½•</span><br></pre></td></tr></table></figure>

<p>åŸºæœ¬ç¯å¢ƒå®‰è£…</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">yum install gcc-c++</span><br><span class="line"># ç„¶åè¿›å…¥redisç›®å½•ä¸‹æ‰§è¡Œ</span><br><span class="line">make</span><br><span class="line"># ç„¶åæ‰§è¡Œ</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<ul>
<li>redisé»˜è®¤å®‰è£…è·¯å¾„ <code>/usr/local/bin</code></li>
<li>å°†redisçš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° ç¨‹åºå®‰è£…ç›®å½• <code>/usr/local/bin/kconfig</code>ä¸‹</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@tianhong redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>]# <span class="built_in">cd</span> /usr/local/bin	//<span class="number">1</span>.redisé»˜è®¤å®‰è£…è·¯å¾„ /usr/local/bin</span><br><span class="line">[root@tianhong bin]# ls</span><br><span class="line">chardetect	easy_install-<span class="number">3</span>.<span class="number">6</span>  jsondiff	    luajit	     redis-check-aof</span><br><span class="line">cloud-id	easy_install-<span class="number">3</span>.<span class="number">8</span>  jsonpatch	    luajit-<span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span>     redis-check-rdb</span><br><span class="line">cloud-init	jemalloc-config   jsonpointer	    mcrypt	     redis-cli</span><br><span class="line">cloud-init-per	jemalloc.sh	  jsonschema	    mdecrypt	     redis-sentinel</span><br><span class="line">easy_install	jeprof		  libmcrypt-config  redis-benchmark  redis-server</span><br><span class="line">[root@tianhong bin]# <span class="built_in">mkdir</span> myconfig</span><br><span class="line">[root@tianhong bin]# cp /opt/redis-<span class="number">6</span>.<span class="number">2</span>.<span class="number">5</span>/redis.conf myconfig 	//<span class="number">2</span>.å°†redisçš„é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° ç¨‹åºå®‰è£…ç›®å½• /usr/local/bin/kconfigä¸‹</span><br><span class="line">[root@tianhong bin]# <span class="built_in">cd</span>  myconfig/</span><br><span class="line">[root@tianhong myconfig]# ls</span><br><span class="line">redis.conf</span><br><span class="line">[root@tianhong myconfig]# vim redis.conf	//<span class="number">3</span>.redisé»˜è®¤ä¸æ˜¯åå°å¯åŠ¨çš„ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼//daemonize æ”¹æˆyesä¿å­˜é€€å‡º</span><br><span class="line">[root@tianhong myconfig]# <span class="built_in">cd</span> ..</span><br><span class="line">[root@tianhong bin]# redis-server myconfig/redis.conf 	//<span class="number">4</span>.é€šè¿‡åˆ¶å®šçš„é…ç½®æ–‡ä»¶å¯åŠ¨redisæœåŠ¡</span><br><span class="line">[root@tianhong bin]# redis-cli -p <span class="number">6379</span>	//<span class="number">5</span>.ä½¿ç”¨redis-cliè¿æ¥æŒ‡å®šçš„ç«¯å£å·æµ‹è¯•ï¼ŒRedisçš„é»˜è®¤ç«¯å£<span class="number">6379</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">ping</span></span><br><span class="line">PONG</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> name tianhong</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get name</span><br><span class="line">&quot;tianhong&quot;</span><br></pre></td></tr></table></figure>

<ol>
<li>æŸ¥çœ‹redisè¿›ç¨‹æ˜¯å¦å¼€å¯(é‡è¿ä¸€ä¸ª)</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ps -ef|grep redis</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200820104300532.png#pic_center" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-9PhN1jC1-1597890996513)(ç‹‚ç¥è¯´ Redis.assets/image-20200813114103769.png)]"></p>
<ol>
<li><p>å…³é—­RedisæœåŠ¡ <code>shutdown</code></p>
<p><img src="https://img-blog.csdnimg.cn/20200820104314297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-Y54EuOYm-1597890996514)(ç‹‚ç¥è¯´ Redis.assets/image-20200813114116691.png)]"></p>
</li>
<li><p>å†æ¬¡æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å­˜åœ¨</p>
</li>
<li><p>åé¢æˆ‘ä»¬ä¼šä½¿ç”¨å•æœºå¤šRediså¯åŠ¨é›†ç¾¤æµ‹è¯•</p>
</li>
</ol>
<h2 id="æµ‹è¯•æ€§èƒ½-1"><a href="#æµ‹è¯•æ€§èƒ½-1" class="headerlink" title="æµ‹è¯•æ€§èƒ½"></a>æµ‹è¯•æ€§èƒ½</h2><p><strong>redis-benchmarkï¼š</strong>Rediså®˜æ–¹æä¾›çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œå‚æ•°é€‰é¡¹å¦‚ä¸‹ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214125892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>ç®€å•æµ‹è¯•ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å…ˆå¯åŠ¨æœåŠ¡</span><br><span class="line"><span class="built_in">cd</span> /usr/local/bin</span><br><span class="line">redis-server myconfig/redis.conf</span><br><span class="line"><span class="comment"># æµ‹è¯•ï¼š100ä¸ªå¹¶å‘è¿æ¥ 100000è¯·æ±‚</span></span><br><span class="line">redis-benchmark -h localhost -p 6379 -c 100 -n 100000</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210330193141671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210330201352239.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘èŠ±äº†14ç§’ä¸¢äººäº†</p>
<h2 id="åŸºç¡€çŸ¥è¯†-1"><a href="#åŸºç¡€çŸ¥è¯†-1" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><p>redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ç¬¬0ä¸ªï¼Œ<br>1.å¯ä»¥ä½¿ç”¨select è¿›è¡Œåˆ‡æ¢æ•°æ®åº“<br><img src="https://img-blog.csdnimg.cn/20210330201934145.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>2.æŸ¥çœ‹æ•°æ®åº“å¤§å°<br><img src="https://img-blog.csdnimg.cn/20210330202143155.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>3.æ¸…ç©ºdangqianæ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flushdb</span><br></pre></td></tr></table></figure>

<p>4.æ¸…ç©ºå…¨éƒ¨æ•°æ®åº“å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flushdb</span><br></pre></td></tr></table></figure>

<blockquote>
<h2 id="redisæ˜¯å•çº¿ç¨‹çš„-1"><a href="#redisæ˜¯å•çº¿ç¨‹çš„-1" class="headerlink" title="redisæ˜¯å•çº¿ç¨‹çš„"></a>redisæ˜¯å•çº¿ç¨‹çš„</h2></blockquote>
<p>redsiå¾ˆå¿«ï¼ŒredisåŸºäºå†…å­˜æ“ä½œï¼Œcpuä¸æ˜¯redisæ€§èƒ½ç“¶é¢ˆï¼Œredisçš„ç“¶é¢ˆæ˜¯æ ¹æ®æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ï¼Œæ—¢ç„¶å¯ä»¥ä½¿ç”¨å•çº¿ç¨‹æ¥å®ç°ï¼Œå°±ä½¿ç”¨å•çº¿ç¨‹ã€‚<br>redisæ˜¯cè¯­è¨€å†™çš„ï¼Œå®˜æ–¹æ•°æ®æ˜¯100000+çš„QPS,è¿™ä¸ªä¸å¿…åŒæ ·ä½¿ç”¨key-valueçš„Memecacheå·®<br>redisä¸ºä»€ä¹ˆå•çº¿ç¨‹è¿˜è¿™ä¹ˆå¿«</p>
<p>1.è¯¯åŒºï¼šé«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ<br>2.è¯¯åŒºäºŒï¼šå¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹é«˜ï¼</p>
<p><strong>æ ¸å¿ƒï¼šrediså°†æ‰€æœ‰æ•°æ®å…¨éƒ¨æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡é«˜ï¼Œå¤šçº¿ç¨‹ï¼ˆcpuä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šè€—æ—¶æ“ä½œï¼‰ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªcpuä¸Šçš„ï¼Œåœ¨å†…å­˜æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯æœ€ä½³æ–¹æ¡ˆï¼</strong></p>
<p>Redisæ˜¯å¼€æ”¾æºä»£ç ï¼ˆBSDè®¸å¯ï¼‰çš„å†…å­˜ä¸­æ•°æ®ç»“æ„å­˜å‚¨ï¼Œ<strong>ç”¨ä½œæ•°æ®åº“ï¼Œç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶MQã€‚</strong>Redisæä¾›æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ï¼Œå“ˆå¸Œï¼Œåˆ—è¡¨ï¼Œé›†åˆï¼Œå¸¦èŒƒå›´æŸ¥è¯¢çš„æ’åºé›†åˆï¼Œä½å›¾ï¼Œè¶…æ—¥å¿—ï¼Œåœ°ç†ç©ºé—´ç´¢å¼•å’Œæµã€‚Rediså…·æœ‰å†…ç½®çš„å¤åˆ¶ï¼ŒLuaè„šæœ¬ï¼ŒLRUé©±é€ï¼Œäº‹åŠ¡å’Œä¸åŒçº§åˆ«çš„ç£ç›˜æŒä¹…æ€§ï¼Œå¹¶é€šè¿‡Redis Sentinelå’ŒRedis Clusterè‡ªåŠ¨åˆ†åŒºæä¾›äº†é«˜å¯ç”¨æ€§</p>
<blockquote>
<h2 id="redis-key-1"><a href="#redis-key-1" class="headerlink" title="redis-key"></a>redis-key</h2></blockquote>
<p>æ­¤å›¾çº¢è‰²ç®­å¤´æœ‰è¯¯ï¼Œ<br>exists nameåˆ¤æ–­nameæ˜¯å¦å­˜åœ¨</p>
<p><img src="https://img-blog.csdnimg.cn/20210330211440565.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210330211829940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210330212301199.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åé¢ä¸ä¼šçš„å‘½ä»¤å¯ä»¥åœ¨å®˜ç½‘æŸ¥ <img src="https://img-blog.csdnimg.cn/202103302124466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹-1"><a href="#ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹-1" class="headerlink" title="ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹"></a>ä¸‰ã€äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹</h1><h2 id="stringï¼ˆå­—ç¬¦ä¸²ï¼‰-1"><a href="#stringï¼ˆå­—ç¬¦ä¸²ï¼‰-1" class="headerlink" title="stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h2><p>90%çš„ç¨‹åºå‘˜ä½¿ç”¨redisåªä¼šä½¿ç”¨stringç±»å‹apiè°ƒç”¨å·¥ç¨‹å¸ˆ<br><img src="https://img-blog.csdnimg.cn/2021033021323821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> views <span class="number">0</span>     </span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get views</span><br><span class="line">&quot;<span class="number">0</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incr views    #è‡ªå¢ä¸€</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incr views</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get views</span><br><span class="line">&quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; decr views     #è‡ªå‡ä¸€</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incrby views <span class="number">10</span>   #è‡ªå¢<span class="number">10</span></span><br><span class="line">(integer) <span class="number">11</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; incrby views <span class="number">10</span></span><br><span class="line">(integer) <span class="number">21</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; decrby views <span class="number">5</span>   #è‡ªå‡<span class="number">5</span></span><br><span class="line">(integer) <span class="number">16</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>æˆªå–å­—ç¬¦ä¸²getrange</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line">(empty array)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> key1 &quot;fang&quot;</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get key1</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getrange key1 <span class="number">0</span> <span class="number">2</span>  #æˆªå–<span class="number">012</span>å­—ç¬¦ä¸²</span><br><span class="line">&quot;fan&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getrange key1 <span class="number">0</span> -<span class="number">1</span> #è·å–å…¨éƒ¨å­—ç¬¦ä¸²</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>æ›¿æ¢setrange</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> key2 abcdefg</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get key2</span><br><span class="line"><span class="string">&quot;abcdefg&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; setrange key2 1 xx</span><br><span class="line">(<span class="built_in">integer</span>) 7</span><br><span class="line">127.0.0.1:6379&gt; get key2</span><br><span class="line"><span class="string">&quot;axxdefg&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>

<p><strong>setex #è®¾ç½®è¿‡æœŸæ—¶é—´</strong><br><strong>setnx #ä¸å­˜åœ¨åœ¨è®¾ç½®ï¼ˆåœ¨åˆ†å¸ƒå¼é”ä¸­å¸¸å¸¸ä½¿ç”¨ï¼‰</strong>**</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setex key3 <span class="number">30</span> &quot;hello&quot;</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; ttl key3</span><br><span class="line">(integer) <span class="number">17</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setnx mykey &quot;redsi&quot; #å¦‚æœmykeyå­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¤±è´¥ã€‚</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) &quot;mykey&quot;</span><br><span class="line"><span class="number">2</span>) &quot;key2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;key1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; ttl key3</span><br><span class="line">(integer) -<span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setnx mykey &quot;MongDB&quot;</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get mykey</span><br><span class="line">&quot;redsi&quot;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸€æ¬¡æ€§è·å–ï¼Œè®¾ç½®å¤šä¸ªå€¼ï¼šmsetï¼Œmget</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line">(empty array)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mset k1 v1 k2 v2 k3 v3     #åŒæ—¶è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) &quot;k3&quot;</span><br><span class="line"><span class="number">2</span>) &quot;k2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;k1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mget k1 k2 k3    #åŒæ—¶è·å–å¤šä¸ªå€¼</span><br><span class="line"><span class="number">1</span>) &quot;v1&quot;</span><br><span class="line"><span class="number">2</span>) &quot;v2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;v3&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; msetnx k1 v1 k4 v4   #msetnxæ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œï¼Œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get k4</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>å¯¹è±¡</strong><br>mset userï¼š1{nameï¼šzhangsanï¼Œageï¼š3}#è®¾ç½®ä¸€ä¸ªuserï¼š1å¯¹è±¡ å€¼ä¸ºjsonå­—ç¬¦æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mset user:<span class="number">1</span>:name fang user:<span class="number">1</span>:age <span class="number">2</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; mget user:<span class="number">1</span>:name user:<span class="number">1</span>:age</span><br><span class="line"><span class="number">1</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>å…ˆgetåœ¨setâ€”â€”-getset</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; clear</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getset db redis</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get db</span><br><span class="line">&quot;redis&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getset db mongodb</span><br><span class="line">&quot;redis&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get db</span><br><span class="line">&quot;mongodb&quot;</span><br></pre></td></tr></table></figure>

<p><strong>stringç±»å‹çš„ä½¿ç”¨åœºæ™¯ï¼švalueé™¤äº†å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯æ•°å­—</strong></p>
<ul>
<li>è®¡æ•°å™¨</li>
<li>ç»Ÿè®¡å¤šå•ä½æ•°é‡</li>
<li>ç²‰ä¸æ•°</li>
<li>å¯¹è±¡ç¼“å­˜å­˜å‚¨ï¼</li>
</ul>
<h2 id="list-1"><a href="#list-1" class="headerlink" title="list"></a>list</h2><p>åœ¨redisé‡Œé¢å¯ä»¥æŠŠlistå®Œæˆæ ˆï¼Œé˜Ÿåˆ—ï¼Œé˜»å¡é˜Ÿåˆ—ï¼<br>æ‰€æœ‰çš„listå‘½ä»¤ä»¥lå¼€å¤´</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list one</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list two</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list three</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;three&quot;</span><br><span class="line"><span class="number">2</span>) &quot;two&quot;</span><br><span class="line"><span class="number">3</span>) &quot;one&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;three&quot;</span><br><span class="line"><span class="number">2</span>) &quot;two&quot;</span><br><span class="line">å€’ç€è¾“å‡º</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210331225329852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>é»˜è®¤è±¡æ ˆ</strong><br><strong>ç§»é™¤</strong><br><strong>lpop</strong><br><strong>rpop</strong><br><img src="https://img-blog.csdnimg.cn/20210404105106348.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>lindex é€šè¿‡ä¸‹è¡¨è·å¾—å€¼</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lindex list <span class="number">1</span></span><br><span class="line">&quot;one&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lindex list <span class="number">0</span></span><br><span class="line">&quot;two&quot;</span><br></pre></td></tr></table></figure>

<p>llenè¿”å›åˆ—è¡¨é•¿åº¦</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list one</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list two</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list three</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; llen list</span><br><span class="line">(integer) <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>ç§»é™¤æŒ‡å®šå€¼<br>å–å…³ uid<br><strong>lrem</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20210404105948137.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>trim ä¿®å‰ªï¼šlistæˆªæ–­</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20210404110409467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>rpop lpush,å°†åˆ—è¡¨å³è¾¹å…ƒç´ ç§»åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦è¾¹</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist &quot;<span class="number">0</span>&quot;</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist &quot;<span class="number">1</span>&quot;</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist &quot;<span class="number">2</span>&quot;</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpoplpush mylist myother </span><br><span class="line">&quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">0</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange myother <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">2</span>&quot;</span><br></pre></td></tr></table></figure>

<p><strong>lset list 0 itemå°†ä¸‹æ ‡ä¸º0çš„å…ƒç´ æ›¿æ¢ä¸ºitem</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; exists list     //åˆ¤æ–­åˆ—è¡¨æ˜¯å¦å­˜åœ¨</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lset list <span class="number">0</span> item</span><br><span class="line">(error) ERR no such key</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lpush list value1</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span>) &quot;value1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lset list <span class="number">0</span> item</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span>) &quot;item&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>linset åœ¨æŒ‡å®šå€¼çš„å‰é¢æˆ–è€…åé¢æ’å…¥å€¼</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; rpush mylist world</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; linsert mylist before world other</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">2</span>) &quot;other&quot;</span><br><span class="line"><span class="number">3</span>) &quot;world&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š<br>1.å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨<br>2.keyä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°é“¾è¡¨<br>3.ç§»é™¤æ‰€æœ‰å…ƒç´ ï¼Œç©ºé“¾è¡¨ä¹Ÿä»£è¡¨ä¸å­˜åœ¨<br>4.åœ¨ä¸¤è¾¹æ’å…¥æˆ–è€…æ”¹åŠ¨å€¼ï¼Œæ•ˆç‡é«˜ï¼Œä¸­é—´å…ƒç´ ï¼Œç›¸å¯¹æ•ˆç‡ä½<br>æ¶ˆæ¯é˜Ÿåˆ—</p>
<h2 id="setï¼ˆé›†åˆï¼‰-1"><a href="#setï¼ˆé›†åˆï¼‰-1" class="headerlink" title="setï¼ˆé›†åˆï¼‰"></a>setï¼ˆé›†åˆï¼‰</h2><p><strong>setå€¼æ˜¯ä¸èƒ½é‡å¤çš„</strong><br><strong>sdd</strong>:æ’å…¥<br><strong>smembers</strong>ï¼šæŸ¥è¯¢æŒ‡å®šsetä¸­æ‰€æœ‰å€¼<br><strong>sismember</strong>ï¼šæŸ¥çœ‹å€¼æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset fang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset lovefang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset</span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sismember myset hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sismember myset hello1</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; scard myset        #è·å–é›†åˆå…ƒç´ ä¸ªæ•°</span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>ç§»é™¤ï¼šsrem myset hello</strong></p>
<p><strong>set:æ— åºä¸é‡å¤é›†åˆ</strong><br>######################################<br>éšæœºæŠ½é€‰å…ƒç´ <br><strong>srandmember</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; srandmember myset</span><br><span class="line">&quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; srandmember myset</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; srandmember myset <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p><strong>éšæœºåˆ é™¤value</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset</span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; spop myset</span><br><span class="line">&quot;hello&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset</span><br><span class="line"><span class="number">1</span>) &quot;lovefang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br></pre></td></tr></table></figure>

<p>#######################################################<br><strong>å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ç§»åŠ¨åˆ°å¦å¤–çš„set</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; sadd myset2 <span class="number">1</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smove myset myset2 fang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; smembers myset2</span><br><span class="line"><span class="number">1</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:</span><br></pre></td></tr></table></figure>

<p>###########################################################<br>å¾®åšï¼Œbç«™å…±åŒå…³æ³¨ï¼ˆäº¤é›†ï¼‰<br>æ•°å­—é›†åˆç±»ï¼š<br><strong>å·®é›†ï¼Œäº¤é›†ï¼Œå¹¶é›†</strong><br><img src="https://img-blog.csdnimg.cn/20210404114740600.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å¾®åšï¼Œå°†aç”¨æˆ·æ‰€æœ‰å…³æ³¨çš„äººæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†ä»–çš„ç²‰ä¸ä¹Ÿæ”¾åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼<br>å…±åŒå…³æ³¨ï¼Œå…±åŒçˆ±å¥½</p>
<h2 id="hash-1"><a href="#hash-1" class="headerlink" title="hash"></a>hash</h2><p>mapé›†åˆï¼Œkey-Mapé›†åˆ</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hset myhash field1 fang</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hget myhash field1</span><br><span class="line">&quot;fang&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hmset myhash filed1 hello filed2 world1  ##ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hmget myhash filed1 filed2 ##ä¸€æ¬¡å–å¤šä¸ªå€¼</span><br><span class="line"><span class="number">1</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">2</span>) &quot;world1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hgetall myhash   #è·å–å…¨éƒ¨æ•°æ®</span><br><span class="line"><span class="number">1</span>) &quot;field1&quot;</span><br><span class="line"><span class="number">2</span>) &quot;fang&quot;</span><br><span class="line"><span class="number">3</span>) &quot;filed1&quot;</span><br><span class="line"><span class="number">4</span>) &quot;hello&quot;</span><br><span class="line"><span class="number">5</span>) &quot;filed2&quot;</span><br><span class="line"><span class="number">6</span>) &quot;world1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>åˆ é™¤æŒ‡å®š<strong>keyï¼šhdel</strong> myhash filed1<br>è·å–å­—æ®µæ•°é‡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hlen myhash</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>####################################################<br><strong>åˆ¤æ–­æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨</strong><br><strong>hexists myhash filed1</strong></p>
<p>####################################################<br><strong>åªè·å¾—æ‰€æœ‰çš„key</strong>**<br><strong>hkeys</strong> myhash</p>
<p><strong>åªè·å¾—æ‰€æœ‰çš„value</strong><br><strong>hvals</strong> myhash<br>####################################################<br><strong>incr</strong> decr</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hset myhash field3 <span class="number">3</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hincrby myhash field3 <span class="number">1</span></span><br><span class="line">(integer) <span class="number">4</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; hincrby myhash field3 -<span class="number">1</span></span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br><span class="line">hsetnx myhash filed4 hello  #å¦‚æœä¸å­˜åœ¨åˆ™å¯ä»¥è®¾ç½®</span><br><span class="line">hsetnx myhash filed4 hello  #å­˜åœ¨åˆ™ä¸èƒ½è®¾ç½®</span><br></pre></td></tr></table></figure>

<p>hash å˜æ›´çš„æ•°æ®ï¼Œuser name ageï¼Œå°¤å…¶ä½¿ç”¨æˆ·ä¿¡æ¯ä¹‹ç±»çš„ï¼Œç»å¸¸å˜æ›´çš„æ•°æ®<br><strong>hashæ›´é€‚åˆå¯¹è±¡çš„å­˜å‚¨ï¼Œstringæ›´åŠ é€‚åˆå­—ç¬¦ä¸²å­˜å‚¨</strong></p>
<h2 id="zsetï¼ˆæœ‰åºé›†åˆï¼‰-1"><a href="#zsetï¼ˆæœ‰åºé›†åˆï¼‰-1" class="headerlink" title="zsetï¼ˆæœ‰åºé›†åˆï¼‰"></a>zsetï¼ˆæœ‰åºé›†åˆï¼‰</h2><p>åœ¨setçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªå€¼<br>set v1 k1<br><strong>zset k1 score1 v1</strong><br>æ’åºå¦‚ä½•å®ç°</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">1</span> one</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">2</span> two</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">3</span> three</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange myset <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;one&quot;</span><br><span class="line"><span class="number">2</span>) &quot;two&quot;</span><br><span class="line"><span class="number">3</span>) &quot;three&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>##############################################<br>æ’åºå¦‚ä½•å®ç°</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">27</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd salary <span class="number">2500</span> <span class="number">1</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd salary <span class="number">5000</span> <span class="number">2</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd salary <span class="number">500</span> <span class="number">3</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrangebyscore salary -inf +inf   #ä»è´Ÿæ— ç©·åˆ°æ­£æ— ç©·æ’åº</span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrangebyscore salary -inf +inf withscores   </span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">500</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">4</span>) &quot;<span class="number">2500</span>&quot;</span><br><span class="line"><span class="number">5</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">6</span>) &quot;<span class="number">5000</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrangebyscore salary -inf <span class="number">2500</span> withscores  #å·¥èµ„å°äº<span class="number">2500</span>çš„å‡åºæ’åˆ—</span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">500</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">4</span>) &quot;<span class="number">2500</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>##############################################<br><strong>ç§»é™¤rem</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange salary <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">1</span>&quot;</span><br><span class="line"><span class="number">3</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrem salary <span class="number">1</span> #ç§»é™¤æŒ‡å®šå…ƒç´ </span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange salary <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;<span class="number">3</span>&quot;</span><br><span class="line"><span class="number">2</span>) &quot;<span class="number">2</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zcard salary   #è·å–æœ‰åºé›†åˆä¸­çš„ä¸ªæ•°</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>###################################################<br><strong>è·å–æŒ‡å®šåŒºé—´çš„æˆå‘˜æ•°é‡</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">1</span> hello</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zadd myset <span class="number">2</span> world <span class="number">3</span> fangqing</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zcount myset <span class="number">1</span> <span class="number">3</span></span><br><span class="line">(integer) <span class="number">3</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zcount myset <span class="number">1</span> <span class="number">2</span></span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>rediså®˜ç½‘å¯ä»¥æŸ¥çœ‹apiçš„ä½¿ç”¨<br>æ¡ˆä¾‹æ€è·¯;set æ’åºï¼Œå­˜å‚¨ç­çº§æˆç»©è¡¨ï¼Œå·¥èµ„è¡¨æ’åº<br>æ™®é€šæ¶ˆæ¯1ï¼Œé‡è¦æ¶ˆæ¯2ï¼Œå¸¦æƒé‡è¿›è¡Œæ’åºåˆ¤æ–­ï¼<br>æ’è¡Œæ¦œåº”ç”¨å®ç°</p>
<h1 id="å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹-1"><a href="#å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹-1" class="headerlink" title="å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹"></a>å››ã€ä¸‰ç§ç‰¹æ®Šæ•°æ®ç±»å‹</h1><h2 id="geospatial-åœ°ç†ä½ç½®-1"><a href="#geospatial-åœ°ç†ä½ç½®-1" class="headerlink" title="geospatial(åœ°ç†ä½ç½®)"></a>geospatial(åœ°ç†ä½ç½®)</h2><p>æœ‹å‹å®šä½ï¼Œé™„è¿‘çš„äººï¼Œæ‰“è½¦è·ç¦»æŠ€æœ¯ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥æ¨ç®—åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œä¸¤åœ°ä¹‹é—´çš„è·ç¦»ï¼Œæ–¹åœ†å‡ é‡Œçš„äººï¼<br>å¯ä»¥æŸ¥è¯¢ä¸€äº›æµ‹è¯•æ•°æ®<br>åªæœ‰å…­ä¸ªå‘½ä»¤ï¼</p>
<blockquote>
<p><strong>geoadd</strong></p>
</blockquote>
<p>æ·»åŠ æ•°æ®<br>è§„åˆ™ï¼šä¸¤çº§æ— æ³•æ·»åŠ ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä¸‹è½½åŸå¸‚æ•°æ®ï¼Œç›´æ¥é€šè¿‡javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥ï¼<br>å‚æ•°ï¼ˆçº¬åº¦ ç»åº¦ åç§°ï¼‰<br>è¶…è¿‡æœ‰æ•ˆçš„ç»åº¦çº¬åº¦å°±ä¼šæŠ¥é”™</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">116</span>.<span class="number">40</span> <span class="number">39</span>.<span class="number">90</span> beijin</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">121</span>.<span class="number">47</span> <span class="number">31</span>.<span class="number">23</span> shanghai</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">106</span>.<span class="number">50</span> <span class="number">29</span>.<span class="number">53</span> chongqi</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">114</span>.<span class="number">05</span> <span class="number">22</span>.<span class="number">52</span> shengzhen</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geoadd china:city <span class="number">120</span>.<span class="number">16</span> <span class="number">30</span>.<span class="number">24</span> hangzhou <span class="number">118</span>.<span class="number">96</span> <span class="number">34</span>.<span class="number">26</span> xian</span><br><span class="line">(integer) <span class="number">2</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geopos-1"><a href="#geopos-1" class="headerlink" title="geopos"></a>geopos</h3></blockquote>
<p>è·å–å½“å‰å®šä½ï¼šä¸€å®šæ˜¯ä¸€ä¸ªåæ ‡å€¼</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geopos china:city beijin</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;<span class="number">116</span>.<span class="number">39999896287918091</span>&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">39</span>.<span class="number">90000009167092543</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geopos china:city beijin chongqi</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;<span class="number">116</span>.<span class="number">39999896287918091</span>&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">39</span>.<span class="number">90000009167092543</span>&quot;</span><br><span class="line"><span class="number">2</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geodist-1"><a href="#geodist-1" class="headerlink" title="geodist"></a>geodist</h3></blockquote>
<p>ä¸¤äººä¹‹é—´çš„è·ç¦»</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geodist china:city beijin shanghai</span><br><span class="line">&quot;<span class="number">1067378</span>.<span class="number">7564</span>&quot;   #åŒ—äº¬ä¸Šæµ·çš„==ç›´çº¿è·ç¦»ï¼Œé»˜è®¤å•ä½ä¸ºç±³==</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geodist china:city beijin shanghai km</span><br><span class="line">&quot;<span class="number">1067</span>.<span class="number">3788</span>&quot;  </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ -1"><a href="#georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ -1" class="headerlink" title="georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ "></a>georadiuså·²ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾æŸä¸€åŠå¾„å†…çš„å…ƒç´ </h3></blockquote>
<p>æˆ‘é™„è¿‘çš„äººï¼Ÿï¼ˆè·å¾—æ‰€æœ‰é™„è¿‘çš„äººçš„åœ°å€ï¼Œå®šä½ï¼ï¼‰é€šè¿‡åŠå¾„æ¥æŸ¥è¯¢</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">1000</span> km #ä»¥<span class="number">100</span>ç»åº¦<span class="number">30</span>çº¬åº¦ä¸ºä¸­å¿ƒ<span class="number">1000</span>kmä¸ºåŠå¾„çš„åœ†å†…åŸå¸‚</span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">2</span>) &quot;shengzhen&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hangzhou&quot;</span><br><span class="line"><span class="number">4</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km</span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist #æ˜¾ç¤ºåˆ°ä¸­å¿ƒä½ç½®çš„è·ç¦»</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withcoord #æ˜¾ç¤ºä»–äººçš„å®šä½ä¿¡æ¯</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist withcoord count <span class="number">1</span> #ç­›é€‰å‡ºæŒ‡å®šæ•°é‡çš„ç»“æœ</span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line">   <span class="number">3</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist withcoord count <span class="number">2</span></span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line">   <span class="number">3</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadius china:city <span class="number">110</span> <span class="number">30</span> <span class="number">500</span> km withdist withcoord count <span class="number">3</span></span><br><span class="line"><span class="number">1</span>) <span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line">   <span class="number">2</span>) &quot;<span class="number">341</span>.<span class="number">9374</span>&quot;</span><br><span class="line">   <span class="number">3</span>) <span class="number">1</span>) &quot;<span class="number">106</span>.<span class="number">49999767541885376</span>&quot;</span><br><span class="line">      <span class="number">2</span>) &quot;<span class="number">29</span>.<span class="number">52999957900659211</span>&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="georadiusbymember-1"><a href="#georadiusbymember-1" class="headerlink" title="georadiusbymember"></a>georadiusbymember</h3></blockquote>
<p>æ‰¾å‡ºæŒ‡å®šåŸå¸‚å‘¨å›´çš„ä½ç½®</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; georadiusbymember china:city beijin <span class="number">1000</span> km</span><br><span class="line"><span class="number">1</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">2</span>) &quot;beijin&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geohash-1"><a href="#geohash-1" class="headerlink" title="geohash"></a>geohash</h3></blockquote>
<p>è¯¥å‘½ä»¤è¿”å›é•¿åº¦ä¸º11çš„å­—ç¬¦ä¸²</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; geohash china:city beijin chongqi</span><br><span class="line"><span class="number">1</span>) &quot;wx4fbxxfke0&quot;    #å°†äºŒç»´çš„ç»çº¬åº¦è½¬æ¢ä¸ºä¸€ç»´çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²æœˆæ¥è¿‘ï¼Œé‚£ä¹ˆè·ç¦»åˆ™è¶Šè¿‘</span><br><span class="line"><span class="number">2</span>) &quot;wm5xzrybty0&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="geoåº•å±‚å®ç°åŸç†-1"><a href="#geoåº•å±‚å®ç°åŸç†-1" class="headerlink" title="geoåº•å±‚å®ç°åŸç†"></a>geoåº•å±‚å®ç°åŸç†</h3></blockquote>
<p><strong>åŸç†å…¶å®å°±æ˜¯zsetï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨zsetå‘½ä»¤æ“ä½œgeoï¼</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange china:city <span class="number">0</span> -<span class="number">1</span> ##æŸ¥çœ‹å…ƒç´ </span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">2</span>) &quot;shengzhen&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hangzhou&quot;</span><br><span class="line"><span class="number">4</span>) &quot;shanghai&quot;</span><br><span class="line"><span class="number">5</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">6</span>) &quot;beijin&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrem china:city beijin</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; zrange china:city <span class="number">0</span> -<span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;chongqi&quot;</span><br><span class="line"><span class="number">2</span>) &quot;shengzhen&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hangzhou&quot;</span><br><span class="line"><span class="number">4</span>) &quot;shanghai&quot;</span><br><span class="line"><span class="number">5</span>) &quot;xian&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="hyperloglog-åŸºæ•°ç»Ÿè®¡-1"><a href="#hyperloglog-åŸºæ•°ç»Ÿè®¡-1" class="headerlink" title="hyperloglog(åŸºæ•°ç»Ÿè®¡)"></a>hyperloglog(åŸºæ•°ç»Ÿè®¡)</h2><p>a{1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ8ï¼Œ7}<br>b{1ï¼Œ2ï¼Œ5ï¼Œ7ï¼Œ8}<br>åŸºæ•°ï¼ˆä¸é‡å¤çš„å…ƒç´ ï¼‰=5ï¼Œå¯ä»¥æ¥å—è¯¯å·®</p>
<p>åŸºæ•°ç»Ÿè®¡ç®—æ³•<br>ä¼˜ç‚¹ï¼šå ç”¨å†…å­˜æ˜¯å›ºå®šçš„ï¼Œ2^64ä¸åŒå…ƒç´ è®¡æ•°ï¼Œåªéœ€è¦è´¹12kbçš„å†…å­˜ï¼Œå¦‚æœè¦ä»å†…å­˜è§’åº¦æ¯”è¾ƒhyperloglogé¦–é€‰<br><strong>ç½‘é¡µçš„uv</strong>ï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä½†æ˜¯è¿˜æ˜¯ç®—ä½œä¸€ä¸ªäººï¼‰<br><strong>ä¼ ç»Ÿçš„æ–¹å¼ï¼Œsetä¿æŠ¤ç”¨æˆ·çš„idï¼Œå…¶å…ƒç´ ä¸é‡å¤ï¼Œ</strong>ç„¶åå°±å¯ä»¥ç»Ÿè®¡setä¸­å…ƒç´ çš„æ•°é‡ä½œä¸ºæ ‡å‡†åˆ¤æ–­<br>è¿™ä¸ªæ–¹å¼å¦‚æœä¿æŒå¤§é‡ç”¨æˆ·idå°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯ä¸ºäº†è®¡æ•°ï¼Œè€Œä¸æ˜¯ä¿å­˜ç”¨æˆ·idï¼›<br><strong>0.81%çš„é”™è¯¯ç‡</strong>ï¼Œå¯ä»¥æ¥å—</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfadd mykey a b c d e f g h i j </span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey #ç»Ÿè®¡mykeyå…ƒç´ åŸºæ•°æ•°é‡</span><br><span class="line">(integer) <span class="number">10</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey2 i j z x c v b n m #</span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfadd mykey2 i j z x c v b n m</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey2</span><br><span class="line">(integer) <span class="number">9</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfmerge mykey3 mykey mykey2 #åˆå¹¶ä¸¤ç»„åˆ°mykey3</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; pfcount mykey3</span><br><span class="line">(integer) <span class="number">15</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>å¦‚æœå…è®¸å®¹é”™ç»Ÿè®¡æ•°é‡ï¼Œå¯ä»¥ä½¿ç”¨hyperloglog<br>å¦‚æœä¸å…è®¸ä½¿ç”¨setæˆ–è€…å…¶ä»–æ•°æ®ç±»å‹</p>
<h2 id="bitmap-1"><a href="#bitmap-1" class="headerlink" title="bitmap"></a>bitmap</h2><p>ä½å­˜å‚¨<br>ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ï¼Œæ´»è·ƒï¼Œä¸æ´»è·ƒï¼Œç™»å…¥ï¼Œä¸ºç™»å…¥ï¼Œæ‰“å¡ï¼Œ365æ‰“å¡ï¼ä¸¤ä¸ªçŠ¶æ€çš„éƒ½å¯ä»¥ä½¿ç”¨bitmaps<br><strong>bitmapsä½å›¾</strong>ï¼Œæ•°æ®ç»“æ„ï¼Œéƒ½æ˜¯æ“ä½œäºŒè¿›åˆ¶ä½æ¥è¿›è¡Œè®°å½•çš„ï¼Œå°±åªæœ‰0ï¼Œ1ä¸¤ä¸ªçŠ¶æ€<br>365=365bit 1å­—èŠ‚=8bit 46å­—èŠ‚å·¦å³ï¼</p>
<p>æµ‹è¯•<br>è®°å½•å‘¨ä¸€åˆ°å‘¨æ—¥æ‰“å¡<br>å‘¨ä¸€ï¼š1ï¼Œå‘¨äºŒï¼š0ï¼Œå‘¨ä¸‰ï¼š0.ã€‚ã€‚ã€‚</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">0</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">1</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">2</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">3</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">4</span> <span class="number">1</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">5</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; setbit sign <span class="number">6</span> <span class="number">0</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æŸä¸€å¤©æ˜¯å¦æ‰“å¡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getbit sign <span class="number">3</span></span><br><span class="line">(integer) <span class="number">0</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; getbit sign <span class="number">4</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<p>ç»Ÿè®¡æ‰“å¡å¤©æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å¦æœ‰ç¼ºå‹¤<br>127.0.0.1:6379&gt; <strong>bitcount sign</strong><br>(integer) 1</p>
<h1 id="äº”ã€äº‹åŠ¡-1"><a href="#äº”ã€äº‹åŠ¡-1" class="headerlink" title="äº”ã€äº‹åŠ¡"></a>äº”ã€äº‹åŠ¡</h1><p>redisäº‹åŠ¡æœ¬è´¨ï¼šä¸€ç»„å‘½ä»¤çš„é›†åˆ!ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­æŒ‰ç…§é¡ºåºæ‰§è¡Œ<br><strong>ä¸€æ¬¡æ€§ï¼Œé¡ºåºæ€§ï¼Œæ’ä»–æ€§</strong>ï¼Œæ‰§è¡Œä¸€äº›åˆ—çš„å‘½ä»¤</p>
<p><strong>rediså•æ¡å‘½ä»¤æ˜¯ä¿æŒåŸå­æ€§ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§<br>redisäº‹åŠ¡æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ</strong></p>
<p>æ‰€æœ‰çš„å‘½ä»¤åœ¨äº‹åŠ¡ä¸­ï¼Œå¹¶æ²¡æœ‰è¢«ç›´æ¥æ‰§è¡Œï¼Œåªæœ‰å‘èµ·æ‰§è¡Œå‘½ä»¤æ‰ä¼šè¢«æ‰§è¡Œ!exec<br>redisäº‹åŠ¡</p>
<ul>
<li><strong>å¼€å¯äº‹åŠ¡ï¼ˆmultiï¼‰=</strong></li>
<li>å‘½ä»¤å…¥é˜Ÿ</li>
<li><strong>æ‰§è¡Œäº‹åŠ¡ï¼ˆexecï¼‰</strong></li>
</ul>
<h2 id="æ­£å¸¸æ‰§è¡Œäº‹åŠ¡-1"><a href="#æ­£å¸¸æ‰§è¡Œäº‹åŠ¡-1" class="headerlink" title="æ­£å¸¸æ‰§è¡Œäº‹åŠ¡"></a>æ­£å¸¸æ‰§è¡Œäº‹åŠ¡</h2><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; get k2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k3 v3</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line"><span class="number">1</span>) OK</span><br><span class="line"><span class="number">2</span>) OK</span><br><span class="line"><span class="number">3</span>) &quot;v2&quot;</span><br><span class="line"><span class="number">4</span>) OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="æ”¾å¼ƒäº‹åŠ¡-1"><a href="#æ”¾å¼ƒäº‹åŠ¡-1" class="headerlink" title="æ”¾å¼ƒäº‹åŠ¡"></a>æ”¾å¼ƒäº‹åŠ¡</h2><p><strong>discard</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k4 v4</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; discard</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; keys *</span><br><span class="line"><span class="number">1</span>) &quot;k3&quot;</span><br><span class="line"><span class="number">2</span>) &quot;k2&quot;</span><br><span class="line"><span class="number">3</span>) &quot;k1&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¯‘å‹å¼‚å¸¸-1"><a href="#ç¼–è¯‘å‹å¼‚å¸¸-1" class="headerlink" title="ç¼–è¯‘å‹å¼‚å¸¸"></a>ç¼–è¯‘å‹å¼‚å¸¸</h2><p>ä»£ç æœ‰é—®é¢˜ï¼Œå‘½ä»¤æœ‰é—®é¢˜</p>
<p>äº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œ</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k3 v3</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; getset k3</span><br><span class="line">(error) ERR wrong number of arguments <span class="keyword">for</span> &#x27;getset&#x27; command</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k4 v4</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line">(error) EXECABORT Transaction discarded because of previous errors.</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get k1</span><br><span class="line">(nil)</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œæ—¶å¼‚å¸¸-1"><a href="#è¿è¡Œæ—¶å¼‚å¸¸-1" class="headerlink" title="è¿è¡Œæ—¶å¼‚å¸¸"></a>è¿è¡Œæ—¶å¼‚å¸¸</h2><p>ï¼ˆå…¶ä»–å‘½ä»¤æ­£å¸¸æ‰§è¡Œï¼Œé”™è¯¯å‘½ä»¤æŠ›å‡ºå¼‚å¸¸ï¼‰</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> k1 v1</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; incr k1</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; <span class="built_in">set</span> k2 v2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; get k2</span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line"><span class="number">1</span>) (error) ERR value is <span class="keyword">not</span> an integer or out of range #è™½ç„¶ç¬¬ä¸€æ¡å‘½ä»¤æŠ¥é”™ï¼Œä½†æ˜¯ä¾æ—§æ­£å¸¸æ‰§è¡Œ</span><br><span class="line"><span class="number">2</span>) OK</span><br><span class="line"><span class="number">3</span>) &quot;v2&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get k2</span><br><span class="line">&quot;v2&quot;</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h1 id="å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰-1"><a href="#å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰-1" class="headerlink" title="å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰"></a>å…­ã€rediså®ç°ä¹è§‚é”ï¼ˆé¢è¯•å¸¸é—®ï¼‰</h1><p>æ‚²è§‚é”ï¼šå¾ˆæ‚²è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºä»€ä¹ˆéƒ½ä¼šåŠ é”ï¼Œæ•ˆç‡é™ä½<br>ä¹è§‚é”ï¼šå¾ˆä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¸Šé”ï¼Œæ›´æ–°æ•°æ®æ—¶ä¼šåˆ¤æ–­åœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººæ”¹åŠ¨æ•°æ®ï¼Œ<strong>version</strong>ï¼<br>1.è·å–version<br>2.æ›´æ–°æ—¶æ¯”è¾ƒversion</p>
<h2 id="redisç›‘è§†æµ‹è¯•-1"><a href="#redisç›‘è§†æµ‹è¯•-1" class="headerlink" title="redisç›‘è§†æµ‹è¯•"></a>redisç›‘è§†æµ‹è¯•</h2><p>æ­£å¸¸æ‰§è¡ŒæˆåŠŸ</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> money <span class="number">100</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> out <span class="number">0</span></span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; watch money    #ç›‘è§†moneyå¯¹è±¡</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; decrby money <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; incrby out <span class="number">20</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec</span><br><span class="line"><span class="number">1</span>) (integer) <span class="number">80</span></span><br><span class="line"><span class="number">2</span>) (integer) <span class="number">20</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ-1"><a href="#æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ-1" class="headerlink" title="æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ"></a>æµ‹è¯•å¤šçº¿ç¨‹ä¿®æ”¹å€¼ï¼Œä½¿ç”¨watchå¯ä»¥å½“ä½œä¹è§‚é”æ“ä½œ</h2><p>æ–°å¼€å®¢æˆ·ç«¯æ¨¡æ‹Ÿç¬¬äºŒä¸ªçº¿ç¨‹</p>
<p><img src="https://img-blog.csdnimg.cn/20210404154242178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æ‰§è¡Œäº‹åŠ¡ä¹‹å‰å¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å€¼<br><img src="https://img-blog.csdnimg.cn/20210404154351811.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; unwatch</span><br><span class="line">OK #r#å¦‚æœäº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œå…ˆè§£é”</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; watch money</span><br><span class="line">OK## è·å–æœ€æ–°å€¼ï¼Œå†æ¬¡ç›‘è§†</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; multi</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; decrby money <span class="number">1</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; incrby money <span class="number">1</span></span><br><span class="line">QUEUED</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>(TX)&gt; exec ##å¯¹æ¯”ç›‘è§†å€¼æ˜¯å¦å‘é€å˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–å¯ä»¥æ‰§è¡Œï¼Œå˜åŒ–åˆ™æ‰§è¡Œå¤±è´¥</span><br><span class="line"><span class="number">1</span>) (integer) <span class="number">999</span></span><br><span class="line"><span class="number">2</span>) (integer) <span class="number">1000</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; </span><br></pre></td></tr></table></figure>

<h1 id="ä¸ƒã€jedis-1"><a href="#ä¸ƒã€jedis-1" class="headerlink" title="ä¸ƒã€jedis"></a>ä¸ƒã€jedis</h1><p>æˆ‘ä»¬è¦ä½¿ç”¨javaæ“ä½œredis<br>jedisæ˜¯å®˜æ–¹æ¨èçš„javaè¿æ¥å¼€å‘å·¥å…·ï¼Œä½¿ç”¨javaæ“ä½œredisä¸­é—´ä»¶ï¼Œå¦‚æœä½ è¦ä½¿ç”¨javaæ“ä½œredisï¼Œé‚£ä¹ˆä½ ä¸€å®šè¦å¯¹jedisååˆ†ç†Ÿæ‚‰</p>
<h2 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="æ–°å»ºç©ºé¡¹ç›®-1"><a href="#æ–°å»ºç©ºé¡¹ç›®-1" class="headerlink" title="æ–°å»ºç©ºé¡¹ç›®"></a>æ–°å»ºç©ºé¡¹ç›®</h3><p><img src="https://img-blog.csdnimg.cn/20210404165919336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210404170015900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>2.æ–°å»ºæ–°çš„mavenæ¨¡å—<br><img src="https://img-blog.csdnimg.cn/20210404170146241.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="å¯¼å…¥ä¾èµ–-1"><a href="#å¯¼å…¥ä¾èµ–-1" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥jredisçš„åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--fastjson--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.70<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼–ç æµ‹è¯•-1"><a href="#ç¼–ç æµ‹è¯•-1" class="headerlink" title="ç¼–ç æµ‹è¯•"></a>ç¼–ç æµ‹è¯•</h3><p>a.è¿æ¥æ•°æ®åº“<br>b.æ“ä½œå‘½ä»¤<br>c.æ–­å¼€è¿æ¥</p>
<p>å¼€æ”¾ç«¯å£6379</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">firewall-<span class="built_in">cmd</span> --zone=public --add-port=<span class="number">6379</span>/tcp --permanet</span><br></pre></td></tr></table></figure>

<p>é‡å¯é˜²ç«å¢™æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure>

<p>é‡å¯redis-server</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis-server myconfig/redis.conf </span><br></pre></td></tr></table></figure>

<p>æ“ä½œå‘½ä»¤</p>
<p><strong>TestPing.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPing</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.xx.xxx&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> jedis.ping();</span><br><span class="line">        System.out.println(response); <span class="comment">// PONG</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>äº‹åŠ¡</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTX</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;39.99.xxx.xx&quot;</span>, <span class="number">6379</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        jsonObject.put(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">        jsonObject.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;kuangshen&quot;</span>);</span><br><span class="line">        <span class="comment">// å¼€å¯äº‹åŠ¡</span></span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">multi</span> <span class="operator">=</span> jedis.multi();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jsonObject.toJSONString();</span><br><span class="line">        <span class="comment">// jedis.watch(result)</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            multi.set(<span class="string">&quot;user1&quot;</span>, result);</span><br><span class="line">            multi.set(<span class="string">&quot;user2&quot;</span>, result);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œäº‹åŠ¡</span></span><br><span class="line">            multi.exec();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="comment">// æ”¾å¼ƒäº‹åŠ¡</span></span><br><span class="line">            multi.discard();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">            System.out.println(jedis.get(<span class="string">&quot;user1&quot;</span>));</span><br><span class="line">            System.out.println(jedis.get(<span class="string">&quot;user2&quot;</span>));</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210404173402279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æ‰€æœ‰apiéƒ½æ˜¯ä¸Šé¢å¯¹åº”çš„å‘½ä»¤</p>
<h2 id="é€šè¿‡Jedisç†è§£äº‹åŠ¡-1"><a href="#é€šè¿‡Jedisç†è§£äº‹åŠ¡-1" class="headerlink" title="é€šè¿‡Jedisç†è§£äº‹åŠ¡"></a>é€šè¿‡Jedisç†è§£äº‹åŠ¡</h2><p><img src="https://img-blog.csdnimg.cn/20210404175650868.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210404175935387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="å…«ã€springbootæ•´åˆ-1"><a href="#å…«ã€springbootæ•´åˆ-1" class="headerlink" title="å…«ã€springbootæ•´åˆ"></a>å…«ã€springbootæ•´åˆ</h1><h2 id="æ•´åˆæµ‹è¯•-1"><a href="#æ•´åˆæµ‹è¯•-1" class="headerlink" title="æ•´åˆæµ‹è¯•"></a>æ•´åˆæµ‹è¯•</h2><p>springbooæ“ä½œæ•°æ®åº“ï¼šspring-data jpa jdbc mongodb redis<br>springDataä¹Ÿæ˜¯å’Œspringbootå…¶åçš„é¡¹ç›®</p>
<ol>
<li>å¯¼å…¥ä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>springboot 2.xå ï¼ŒåŸæ¥ä½¿ç”¨çš„ Jedis è¢« lettuce æ›¿æ¢</strong>ã€‚</p>
<blockquote>
<p>jedisï¼šé‡‡ç”¨çš„ç›´è¿ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯ï¼Œæ˜¯ä¸å®‰å…¨çš„ã€‚å¦‚æœè¦é¿å…ä¸å®‰å…¨ï¼Œä½¿ç”¨jedis poolè¿æ¥æ± ï¼æ›´åƒ<strong>BIO</strong>æ¨¡å¼</p>
<p>lettuceï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼å¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®äº†ï¼Œæ›´åƒ<strong>NIO</strong>æ¨¡å¼</p>
</blockquote>
<p>æˆ‘ä»¬åœ¨å­¦ä¹ SpringBootè‡ªåŠ¨é…ç½®çš„åŸç†æ—¶ï¼Œæ•´åˆä¸€ä¸ªç»„ä»¶å¹¶è¿›è¡Œé…ç½®ä¸€å®šä¼šæœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»<strong>xxxAutoConfiguration</strong>,å¹¶ä¸”åœ¨<strong>spring.factories</strong>ä¸­ä¹Ÿä¸€å®šèƒ½æ‰¾åˆ°è¿™ä¸ªç±»çš„å®Œå…¨é™å®šåã€‚Redisä¹Ÿä¸ä¾‹å¤–ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214531573.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é‚£ä¹ˆå°±ä¸€å®šè¿˜å­˜åœ¨ä¸€ä¸ªRedisPropertiesç±»</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214554661.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¹‹å‰æˆ‘ä»¬è¯´SpringBoot2.xåé»˜è®¤ä½¿ç”¨Lettuceæ¥æ›¿æ¢Jedisï¼Œç°åœ¨æˆ‘ä»¬å°±èƒ½æ¥éªŒè¯äº†ã€‚</p>
<p>å…ˆçœ‹Jedis:</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214607475.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>@ConditionalOnClassæ³¨è§£ä¸­æœ‰ä¸¤ä¸ªç±»æ˜¯é»˜è®¤ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥Jedisæ˜¯æ— æ³•ç”Ÿæ•ˆçš„</p>
<p>ç„¶åå†çœ‹Lettuceï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214618179.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å®Œç¾ç”Ÿæ•ˆã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å›åˆ°RedisAutoConfiguratio</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321462777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>åªæœ‰ä¸¤ä¸ªç®€å•çš„Bean</p>
<ul>
<li><strong>RedisTemplate</strong></li>
<li><strong>StringRedisTemplate</strong></li>
</ul>
<p>å½“çœ‹åˆ°xxTemplateæ—¶å¯ä»¥å¯¹æ¯”RestTemplatã€SqlSessionTemplate,é€šè¿‡ä½¿ç”¨è¿™äº›Templateæ¥é—´æ¥æ“ä½œç»„ä»¶ã€‚é‚£ä¹ˆè¿™ä¿©ä¹Ÿä¸ä¼šä¾‹å¤–ã€‚åˆ†åˆ«ç”¨äºæ“ä½œRediså’ŒRedisä¸­çš„Stringæ•°æ®ç±»å‹ã€‚</p>
<p>åœ¨RedisTemplateä¸Šä¹Ÿæœ‰ä¸€ä¸ªæ¡ä»¶æ³¨è§£ï¼Œè¯´æ˜æˆ‘ä»¬æ˜¯å¯ä»¥å¯¹å…¶è¿›è¡Œå®šåˆ¶åŒ–çš„</p>
<p>è¯´å®Œè¿™äº›ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•ç¼–å†™é…ç½®æ–‡ä»¶ç„¶åè¿æ¥Redisï¼Œå°±éœ€è¦é˜…è¯»RedisProperties</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214638238.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™æ˜¯ä¸€äº›åŸºæœ¬çš„é…ç½®å±æ€§ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214649380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿˜æœ‰ä¸€äº›è¿æ¥æ± ç›¸å…³çš„é…ç½®ã€‚æ³¨æ„ä½¿ç”¨æ—¶ä¸€å®š<strong>ä½¿ç”¨Lettuceçš„è¿æ¥æ± ã€‚</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200513214700372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>1ã€ç¼–å†™é…ç½®æ–‡ä»¶</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®redis,çœ‹ç€å†™</span></span><br><span class="line"><span class="attr">spring.redis.host</span>=<span class="string">127.0.0.1		</span></span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="string">6379</span></span><br></pre></td></tr></table></figure>

<p><strong>2ã€ ä½¿ç”¨RedisTemplate</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Redis02SpringbootApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// redisTemplate æ“ä½œä¸åŒçš„æ•°æ®ç±»å‹ï¼Œapiå’Œæˆ‘ä»¬çš„æŒ‡ä»¤æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">        <span class="comment">// opsForValue æ“ä½œå­—ç¬¦ä¸² ç±»ä¼¼String</span></span><br><span class="line">        <span class="comment">// opsForList æ“ä½œList ç±»ä¼¼List</span></span><br><span class="line">        <span class="comment">// opsForHah</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é™¤äº†åŸºæœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•éƒ½å¯ä»¥ç›´æ¥é€šè¿‡redisTemplateæ“ä½œï¼Œæ¯”å¦‚äº‹åŠ¡å’ŒåŸºæœ¬çš„CRUD</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–è¿æ¥å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span></span><br><span class="line">        <span class="comment">//connection.flushDb();</span></span><br><span class="line">        <span class="comment">//connection.flushAll();</span></span><br><span class="line"></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;mykey&quot;</span>,<span class="string">&quot;kuangshen&quot;</span>);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;mykey&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3ã€æµ‹è¯•ç»“æœ</strong></p>
<p>æ­¤æ—¶æˆ‘ä»¬å›åˆ°RedisæŸ¥çœ‹æ•°æ®æ—¶å€™ï¼ŒæƒŠå¥‡å‘ç°å…¨æ˜¯ä¹±ç ï¼Œå¯æ˜¯ç¨‹åºä¸­å¯ä»¥æ­£å¸¸è¾“å‡ºï¼š</p>
<p>è¿™æ—¶å€™å°±å…³ç³»åˆ°å­˜å‚¨å¯¹è±¡çš„åºåˆ—åŒ–é—®é¢˜ï¼Œåœ¨ç½‘ç»œä¸­ä¼ è¾“çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸€æ ·éœ€è¦åºåˆ—åŒ–ï¼Œå¦è€…å°±å…¨æ˜¯ä¹±ç ã€‚</p>
<p>æˆ‘ä»¬è½¬åˆ°çœ‹é‚£ä¸ªé»˜è®¤çš„RedisTemplateå†…éƒ¨ä»€ä¹ˆæ ·å­ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214746506.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>åœ¨æœ€å¼€å§‹å°±èƒ½çœ‹åˆ°å‡ ä¸ªå…³äºåºåˆ—åŒ–çš„å‚æ•°ã€‚</p>
<p><strong>é»˜è®¤çš„åºåˆ—åŒ–å™¨æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–å™¨</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200513214757247.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è€Œé»˜è®¤çš„RedisTemplateä¸­çš„æ‰€æœ‰åºåˆ—åŒ–å™¨éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªåºåˆ—åŒ–å™¨ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513214809494.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>åç»­æˆ‘ä»¬å®šåˆ¶RedisTemplateå°±å¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p>
<p><code>RedisSerializer</code>æä¾›äº†å¤šç§åºåˆ—åŒ–æ–¹æ¡ˆï¼š</p>
<ol>
<li>ç›´æ¥è°ƒç”¨RedisSerializerçš„é™æ€æ–¹æ³•æ¥è¿”å›åºåˆ—åŒ–å™¨ï¼Œç„¶åset</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200513214818682.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ol>
<li>è‡ªå·±new ç›¸åº”çš„å®ç°ç±»ï¼Œç„¶åset</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200513214827233.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š-1"><a href="#å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š-1" class="headerlink" title="å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š"></a><strong>å®šåˆ¶RedisTemplateçš„æ¨¡æ¿ï¼š</strong></h2><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBeanåŠ å…¥å®¹å™¨ï¼Œå°±ä¼šè§¦å‘RedisTemplateä¸Šçš„æ¡ä»¶æ³¨è§£ä½¿é»˜è®¤çš„RedisTemplateå¤±æ•ˆã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="comment">// å°†template æ³›å‹è®¾ç½®ä¸º &lt;String, Object&gt;</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        <span class="comment">// è¿æ¥å·¥å‚ï¼Œä¸å¿…ä¿®æ”¹</span></span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * åºåˆ—åŒ–è®¾ç½®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// keyã€hashçš„key é‡‡ç”¨ Stringåºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setKeySerializer(RedisSerializer.string());</span><br><span class="line">        template.setHashKeySerializer(RedisSerializer.string());</span><br><span class="line">        <span class="comment">// valueã€hashçš„value é‡‡ç”¨ Jackson åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setValueSerializer(RedisSerializer.json());</span><br><span class="line">        template.setHashValueSerializer(RedisSerializer.json());</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œåªè¦å®ä½“ç±»è¿›è¡Œäº†åºåˆ—åŒ–ï¼Œæˆ‘ä»¬å­˜ä»€ä¹ˆéƒ½ä¸ä¼šæœ‰ä¹±ç çš„æ‹…å¿§äº†ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20210405145408459.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¹±ç é—®é¢˜å¾—åˆ°è§£å†³</p>
<p><img src="https://img-blog.csdnimg.cn/20210405145458697.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="è‡ªå®šä¹‰Rediså·¥å…·ç±»-1"><a href="#è‡ªå®šä¹‰Rediså·¥å…·ç±»-1" class="headerlink" title="è‡ªå®šä¹‰Rediså·¥å…·ç±»"></a>è‡ªå®šä¹‰Rediså·¥å…·ç±»</h2><p>ä½¿ç”¨RedisTemplateéœ€è¦é¢‘ç¹è°ƒç”¨<code>.opForxxx</code>ç„¶åæ‰èƒ½è¿›è¡Œå¯¹åº”çš„æ“ä½œï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥ä»£ç æ•ˆç‡ä½ä¸‹ï¼Œå·¥ä½œä¸­ä¸€èˆ¬ä¸ä¼šè¿™æ ·ä½¿ç”¨ï¼Œè€Œæ˜¯å°†è¿™äº›å¸¸ç”¨çš„å…¬å…±APIæŠ½å–å‡ºæ¥å°è£…æˆä¸ºä¸€ä¸ªå·¥å…·ç±»ï¼Œç„¶åç›´æ¥ä½¿ç”¨å·¥å…·ç±»æ¥é—´æ¥æ“ä½œRedis,ä¸ä½†æ•ˆç‡é«˜å¹¶ä¸”æ˜“ç”¨ã€‚</p>
<p>åœ¨ä¼ä¸šå¼€å‘ä¸­æˆ‘ä»¬80%ä¸ä¼šä½¿ç”¨åŸç”Ÿçš„æ–¹å¼å»ç¼–å†™ä»£ç ï¼Œ<strong>ä¸€èˆ¬ä½¿ç”¨å·¥å…·ç±»RedisUtils</strong><br><strong>ç½‘ä¸Šå¯ä»¥ç›´æ¥æœç´¢RedisUtils</strong></p>
<p>å·¥å…·ç±»å‚è€ƒåšå®¢ï¼š</p>
<blockquote>
<p><a href="https://www.cnblogs.com/zeng1994/p/03303c805731afc9aa9c60dbbd32a323.html">https://www.cnblogs.com/zeng1994/p/03303c805731afc9aa9c60dbbd32a323.html</a></p>
<p><a href="https://www.cnblogs.com/zhzhlong/p/11434284.html">https://www.cnblogs.com/zhzhlong/p/11434284.html</a></p>
</blockquote>
<h1 id="ä¹ã€Redis-conf-1"><a href="#ä¹ã€Redis-conf-1" class="headerlink" title="ä¹ã€Redis.conf"></a>ä¹ã€Redis.conf</h1><blockquote>
<p>å®¹é‡å•ä½ä¸åŒºåˆ†å¤§å°å†™ï¼ŒGå’ŒGBæœ‰åŒºåˆ«</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2020051321485460.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨ include ç»„åˆå¤šä¸ªé…ç½®é—®é¢˜</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214902552.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ç½‘ç»œé…ç½®</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214912813.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>æ—¥å¿—è¾“å‡ºçº§åˆ«</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214923678.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></p>
<blockquote>
<p>æ—¥å¿—è¾“å‡ºæ–‡ä»¶</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214933713.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>æŒä¹…åŒ–è§„åˆ™</p>
</blockquote>
<p>ç”±äºRedisæ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ï¼Œéœ€è¦å°†æ•°æ®ç”±å†…å­˜æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­</p>
<p>æŒä¹…åŒ–æ–¹å¼ï¼š</p>
<ul>
<li>RDB</li>
<li>AOF</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200513214944964.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>RDBæ–‡ä»¶ç›¸å…³</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513214955679.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200513215006207.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ä¸»ä»å¤åˆ¶</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215016371.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>Securityæ¨¡å—ä¸­è¿›è¡Œå¯†ç è®¾ç½®</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215026143.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>å®¢æˆ·ç«¯è¿æ¥ç›¸å…³</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">maxclients 10000  æœ€å¤§å®¢æˆ·ç«¯æ•°é‡</span><br><span class="line">maxmemory &lt;bytes&gt; æœ€å¤§å†…å­˜é™åˆ¶</span><br><span class="line">maxmemory-policy noeviction <span class="comment"># å†…å­˜è¾¾åˆ°é™åˆ¶å€¼çš„å¤„ç†ç­–ç•¥</span></span><br></pre></td></tr></table></figure>

<p>redis ä¸­çš„<strong>é»˜è®¤</strong>çš„è¿‡æœŸç­–ç•¥æ˜¯ <strong>volatile-lru</strong> ã€‚</p>
<p><strong>è®¾ç½®æ–¹å¼</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">config <span class="built_in">set</span> maxmemory-policy volatile-lru </span><br></pre></td></tr></table></figure>

<p><strong>maxmemory-policy å…­ç§æ–¹å¼</strong></p>
<ol>
<li><strong>volatile-lru</strong>ï¼šåªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyè¿›è¡ŒLRUï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li><strong>allkeys-lru</strong> ï¼š åˆ é™¤lruç®—æ³•çš„key</li>
<li><strong>volatile-random</strong>ï¼šéšæœºåˆ é™¤å³å°†è¿‡æœŸkey</li>
<li><strong>allkeys-random</strong>ï¼šéšæœºåˆ é™¤</li>
<li><strong>volatile-ttl</strong> ï¼š åˆ é™¤å³å°†è¿‡æœŸçš„</li>
<li><strong>noeviction</strong> ï¼š æ°¸ä¸è¿‡æœŸï¼Œè¿”å›é”™è¯¯</li>
</ol>
<blockquote>
<p>AOFç›¸å…³éƒ¨åˆ†</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215037918.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200513215047999.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="åã€æŒä¹…åŒ–â€”RDB-1"><a href="#åã€æŒä¹…åŒ–â€”RDB-1" class="headerlink" title="åã€æŒä¹…åŒ–â€”RDB"></a>åã€æŒä¹…åŒ–â€”RDB</h1><p><strong>é¢è¯•å’Œå·¥ä½œçš„é‡ç‚¹</strong></p>
<p>redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æ•°æ®çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥redisæä¾›äº†æŒä¹…åŒ–çš„åŠŸèƒ½<br><strong>åŸç†æ˜¯redisä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªä¸å½“å‰çº¿ç¨‹ä¸€æ¨¡ä¸€æ ·çš„å­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œè¿™ä¸ªå­çº¿ç¨‹çš„æ‰€æœ‰æ•°æ®</strong>ï¼ˆå˜é‡ã€‚ç¯å¢ƒå˜é‡ï¼Œç¨‹åºç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰éƒ½å’ŒåŸè¿›ç¨‹ä¸€æ¨¡ä¸€æ ·ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹ä¸è¿›è¡Œä»»ä½•çš„ioæ“ä½œï¼Œè¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚<br><strong>æˆ‘ä»¬é»˜è®¤çš„å°±æ˜¯RDB</strong>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªé…ç½®<br>å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®çš„å®Œæ•´æ€§å›å¤ä¸æ˜¯éå¸¸çš„æ•æ„Ÿï¼Œé‚£ä¹ˆRDBæ–¹å¼æ¯”AOFçš„æ–¹å¼æ›´åŠ é«˜æ•ˆã€‚RDbçš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–çš„æ•°æ®å¯èƒ½ä¼šä¸¢å¤±<br>rdbä¿å­˜çš„æ–‡ä»¶æ˜¯dump.rdb</p>
<p>åœ¨æŒ‡å®šæ—¶é—´é—´éš”åï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥æ•°æ®åº“ ï¼›åœ¨æ¢å¤æ—¶å€™ï¼Œç›´æ¥è¯»å–å¿«ç…§æ–‡ä»¶ï¼Œè¿›è¡Œæ•°æ®çš„æ¢å¤ ï¼›</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215126515.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ Redis å°†æ•°æ®åº“å¿«ç…§ä¿å­˜åœ¨åå­—ä¸º dump.rdbçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚æ–‡ä»¶åå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè‡ªå®šä¹‰ã€‚</p>
<h3 id="å·¥ä½œåŸç†-1"><a href="#å·¥ä½œåŸç†-1" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h3><hr>
<p>åœ¨è¿›è¡Œ <strong><code>RDB</code></strong> çš„æ—¶å€™ï¼Œ**<code>redis</code>** çš„ä¸»çº¿ç¨‹æ˜¯ä¸ä¼šåš <strong><code>io</code></strong> æ“ä½œçš„ï¼Œä¸»çº¿ç¨‹ä¼š <strong><code>fork</code></strong> ä¸€ä¸ªå­çº¿ç¨‹æ¥å®Œæˆè¯¥æ“ä½œï¼›</p>
<ol>
<li>Redis è°ƒç”¨forksã€‚åŒæ—¶æ‹¥æœ‰çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚</li>
<li>å­è¿›ç¨‹å°†æ•°æ®é›†å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶ RDB æ–‡ä»¶ä¸­ã€‚</li>
<li>å½“å­è¿›ç¨‹å®Œæˆå¯¹æ–° RDB æ–‡ä»¶çš„å†™å…¥æ—¶ï¼ŒRedis ç”¨æ–° RDB æ–‡ä»¶æ›¿æ¢åŸæ¥çš„ RDB æ–‡ä»¶ï¼Œå¹¶åˆ é™¤æ—§çš„ RDB æ–‡ä»¶ã€‚</li>
</ol>
<p>è¿™ç§å·¥ä½œæ–¹å¼ä½¿å¾— Redis å¯ä»¥ä»<strong>å†™æ—¶å¤åˆ¶ï¼ˆcopy-on-writeï¼‰</strong>æœºåˆ¶ä¸­è·ç›Š(å› ä¸ºæ˜¯ä½¿ç”¨å­è¿›ç¨‹è¿›è¡Œå†™æ“ä½œï¼Œè€Œçˆ¶è¿›ç¨‹ä¾ç„¶å¯ä»¥æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚)</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215141519.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="è§¦å‘æœºåˆ¶-1"><a href="#è§¦å‘æœºåˆ¶-1" class="headerlink" title="è§¦å‘æœºåˆ¶"></a>è§¦å‘æœºåˆ¶</h3><ol>
<li>saveçš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘rdbåŸåˆ™</li>
<li>æ‰§è¡Œflushallå‘½ä»¤ï¼Œä¹Ÿä¼šè§¦å‘æˆ‘ä»¬çš„rdbåŸåˆ™</li>
<li>é€€å‡ºredisï¼Œä¹Ÿä¼šè‡ªåŠ¨äº§ç”Ÿrdbæ–‡ä»¶</li>
</ol>
<p><strong>save</strong></p>
<p>ä½¿ç”¨ <code>save</code> å‘½ä»¤ï¼Œä¼šç«‹åˆ»å¯¹å½“å‰å†…å­˜ä¸­çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ– ,ä½†æ˜¯ä¼šé˜»å¡ï¼Œä¹Ÿå°±æ˜¯ä¸æ¥å—å…¶ä»–æ“ä½œäº†ï¼›</p>
<blockquote>
<p>ç”±äº <code>save</code> å‘½ä»¤æ˜¯åŒæ­¥å‘½ä»¤ï¼Œä¼šå ç”¨Redisçš„ä¸»è¿›ç¨‹ã€‚è‹¥Redisæ•°æ®éå¸¸å¤šæ—¶ï¼Œ<code>save</code>å‘½ä»¤æ‰§è¡Œé€Ÿåº¦ä¼šéå¸¸æ…¢ï¼Œé˜»å¡æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215150892.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>flushallå‘½ä»¤</strong></p>
<p><code>flushall</code> å‘½ä»¤ä¹Ÿä¼šè§¦å‘æŒä¹…åŒ– ï¼›</p>
<p>è§¦å‘æŒä¹…åŒ–è§„åˆ™</p>
<p>æ»¡è¶³é…ç½®æ¡ä»¶ä¸­çš„è§¦å‘æ¡ä»¶ ï¼›</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å¯¹ Redis è¿›è¡Œè®¾ç½®ï¼Œ è®©å®ƒåœ¨â€œ N ç§’å†…æ•°æ®é›†è‡³å°‘æœ‰ M ä¸ªæ”¹åŠ¨â€è¿™ä¸€æ¡ä»¶è¢«æ»¡è¶³æ—¶ï¼Œ è‡ªåŠ¨è¿›è¡Œæ•°æ®é›†ä¿å­˜æ“ä½œã€‚</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200513215205970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200513215220858.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>bgsave</strong></p>
<p><code>bgsave</code> æ˜¯å¼‚æ­¥è¿›è¡Œï¼Œè¿›è¡ŒæŒä¹…åŒ–çš„æ—¶å€™ï¼Œ<code>redis</code> è¿˜å¯ä»¥å°†ç»§ç»­å“åº”å®¢æˆ·ç«¯è¯·æ±‚ ï¼›</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321523151.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>bgsaveå’Œsaveå¯¹æ¯”</strong></p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>save</th>
<th>bgsave</th>
</tr>
</thead>
<tbody><tr>
<td>IOç±»å‹</td>
<td>åŒæ­¥</td>
<td>å¼‚æ­¥</td>
</tr>
<tr>
<td>é˜»å¡ï¼Ÿ</td>
<td>æ˜¯</td>
<td>æ˜¯ï¼ˆé˜»å¡å‘ç”Ÿåœ¨fock()ï¼Œé€šå¸¸éå¸¸å¿«ï¼‰</td>
</tr>
<tr>
<td>å¤æ‚åº¦</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
<tr>
<td>ä¼˜ç‚¹</td>
<td>ä¸ä¼šæ¶ˆè€—é¢å¤–çš„å†…å­˜</td>
<td>ä¸é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤</td>
</tr>
<tr>
<td>ç¼ºç‚¹</td>
<td>é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤</td>
<td>éœ€è¦fockå­è¿›ç¨‹ï¼Œæ¶ˆè€—å†…å­˜</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210405200936348.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>å¦‚ä½•æ¢å¤rdbæ–‡ä»¶</strong><br>1.åªéœ€è¦å°†rdbæ–‡ä»¶æ”¾åœ¨rediså¯åŠ¨ç›®å½•å°±å¯ä»¥ï¼Œrediså¯åŠ¨æ—¶å°±ä¼šè‡ªåŠ¨æ£€æµ‹dum.rdbæ–‡ä»¶ï¼Œæ¢å¤å…¶ä¸­æ•°æ®<br>2.rdbæ–‡ä»¶å­˜æ”¾çš„ä½ç½®</p>
<p><img src="https://img-blog.csdnimg.cn/20210405202944350.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</li>
<li>å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›è¡Œæ“ä½œï¼Œå¦‚æœredisæ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®å°±æ²¡æœ‰äº†ã€‚</li>
<li>forkè¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å®¹ç©ºé—´ã€‚</li>
</ol>
<h1 id="åä¸€ã€æŒä¹…åŒ–AOF-1"><a href="#åä¸€ã€æŒä¹…åŒ–AOF-1" class="headerlink" title="åä¸€ã€æŒä¹…åŒ–AOF"></a>åä¸€ã€æŒä¹…åŒ–AOF</h1><p>è¿½åŠ æ–‡ä»¶<br>å°†æˆ‘ä»¬æ‰€ä»¥çš„å‘½ä»¤éƒ½è®°å½•ä¸‹æ¥ï¼Œå›å¤çš„æ—¶å€™å°†è¿™ä¸ªæ–‡ä»¶å…¨éƒ¨æ‰§è¡Œä¸€é</p>
<p>ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸€ä¸ªå†™æ“ä½œï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä¸è®¸æ”¹å†™æ–‡ä»¶ï¼Œredisé‡å¯ä¹‹å¤„ä¼šä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œinother wordsï¼Œå¦‚æœredisé‡å¯å°±ä¼šæ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œã€‚</p>
<p>aofï¼ˆappend only fileï¼‰ä¿å­˜çš„æ–‡ä»¶æ˜¯appendonly.aof</p>
<p>é»˜è®¤ä¸ºnoéœ€è¦æ‰‹åŠ¨è¿›è¡Œå¼€å¯</p>
<p><img src="https://img-blog.csdnimg.cn/20210406131037622.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é‡å¯redisåè¯»å–.aofæ–‡ä»¶<br><img src="https://img-blog.csdnimg.cn/20210406132012201.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20210406132602336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80ODQxMjg0Ng==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å¦‚æœaofæ–‡ä»¶æœ‰é”™è¯¯ï¼Œè¿™æ—¶å€™rediså¯åŠ¨ä¸èµ·æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤é…ç½®æ–‡ä»¶</p>
<p>redisç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå·¥å…·</p>
<p><strong>redis-check-aof â€“fix appendonly.aof</strong><br>ä¼˜ç‚¹ï¼š<br>1.æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´æ€§ä¼šæ›´å¥½<br>2.æ¯ç§’åŒæ­¥ä¸€æ¬¡å¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®<br>3.ä»ä¸åŒä¸æ•ˆç‡æœ€é«˜<br>ç¼ºç‚¹<br>1.å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´ï¼Œaofâ€™è¿œå¤§äºrdbï¼Œä¿®å¤é€Ÿåº¦æ¯”rdbæ…¢<br>2.aofè¿è¡Œæ•ˆç‡è¦æ¯”rdbæ…¢ï¼Œæ‰€ä»¥redisçš„é»˜è®¤é…ç½®æ˜¯rdbæŒä¹…åŒ–ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20210406134028717.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>aofé»˜è®¤æ˜¯æ–‡ä»¶æ— çº¿è¿½åŠ ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§<br>å¦‚æœaofæ–‡ä»¶å¤§äº64mï¼Œforkä¸€ä¸ªæ–°è¿›ç¨‹å°†æˆ‘ä»¬çš„æ–‡ä»¶è¿›è¡Œé‡å†™<br><img src="https://img-blog.csdnimg.cn/20210406134219312.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä½ å¯ä»¥ä¸ä½¿ç”¨æŒä¹…åŒ–</strong></p>
<h2 id="RDBå’ŒAOPé€‰æ‹©-1"><a href="#RDBå’ŒAOPé€‰æ‹©-1" class="headerlink" title="RDBå’ŒAOPé€‰æ‹©"></a>RDBå’ŒAOPé€‰æ‹©</h2><p>RDB å’Œ AOF å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>RDB</th>
<th>AOF</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>å¯åŠ¨ä¼˜å…ˆçº§</td>
<td>ä½</td>
<td>é«˜</td>
</tr>
<tr>
<td>ä½“ç§¯</td>
<td>å°</td>
<td>å¤§</td>
</tr>
<tr>
<td>æ¢å¤é€Ÿåº¦</td>
<td>å¿«</td>
<td>æ…¢</td>
</tr>
<tr>
<td>æ•°æ®å®‰å…¨æ€§</td>
<td>ä¸¢æ•°æ®</td>
<td>æ ¹æ®ç­–ç•¥å†³å®š</td>
</tr>
</tbody></table>
<p><strong>å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ</strong></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œ å¦‚æœæƒ³è¾¾åˆ°è¶³ä»¥åª²ç¾ PostgreSQL çš„æ•°æ®å®‰å…¨æ€§ï¼Œ ä½ åº”è¯¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æŒä¹…åŒ–åŠŸèƒ½ã€‚</p>
<p>å¦‚æœä½ éå¸¸å…³å¿ƒä½ çš„æ•°æ®ï¼Œ ä½†ä»ç„¶å¯ä»¥æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œ é‚£ä¹ˆä½ å¯ä»¥åªä½¿ç”¨ RDB æŒä¹…åŒ–ã€‚</p>
<p>æœ‰å¾ˆå¤šç”¨æˆ·éƒ½åªä½¿ç”¨ AOF æŒä¹…åŒ–ï¼Œ ä½†å¹¶ä¸æ¨èè¿™ç§æ–¹å¼ï¼š å› ä¸ºå®šæ—¶ç”Ÿæˆ RDB å¿«ç…§ï¼ˆsnapshotï¼‰éå¸¸ä¾¿äºè¿›è¡Œæ•°æ®åº“å¤‡ä»½ï¼Œ å¹¶ä¸” RDB æ¢å¤æ•°æ®é›†çš„é€Ÿåº¦ä¹Ÿè¦æ¯” AOF æ¢å¤çš„é€Ÿåº¦è¦å¿«ã€‚</p>
<h1 id="åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…-1"><a href="#åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…-1" class="headerlink" title="åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…"></a>åäºŒã€Rediså‘å¸ƒä¸è®¢é˜…</h1><p>Redis å‘å¸ƒè®¢é˜…(pub/sub)æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†é¢‘é“ channel1 ï¼Œ ä»¥åŠè®¢é˜…è¿™ä¸ªé¢‘é“çš„ä¸‰ä¸ªå®¢æˆ·ç«¯ â€”â€” client2 ã€ client5 å’Œ client1 ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215523258.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å½“æœ‰æ–°æ¶ˆæ¯é€šè¿‡ PUBLISH å‘½ä»¤å‘é€ç»™é¢‘é“ channel1 æ—¶ï¼Œ è¿™ä¸ªæ¶ˆæ¯å°±ä¼šè¢«å‘é€ç»™è®¢é˜…å®ƒçš„ä¸‰ä¸ªå®¢æˆ·ç«¯ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321553483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>å‘½ä»¤</strong></p>
<ul>
<li>PSUBSCRIBE pattern [pattern..] è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</li>
<li>PUNSUBSCRIBE pattern [pattern..] é€€è®¢ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</li>
<li>PUBSUB subcommand [argument[argument]] æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ã€‚</li>
<li>PUBLISH channel message å‘æŒ‡å®šé¢‘é“å‘å¸ƒæ¶ˆæ¯</li>
<li>SUBSCRIBE channel [channel..] è®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ã€‚</li>
<li>SUBSCRIBE channel [channel..] é€€è®¢ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“</li>
</ul>
<p><strong>ç¤ºä¾‹</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">------------è®¢é˜…ç«¯----------------------</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; SUBSCRIBE sakura # è®¢é˜…sakuraé¢‘é“</span><br><span class="line">Reading messages... (press Ctrl-C to quit) # ç­‰å¾…æ¥æ”¶æ¶ˆæ¯</span><br><span class="line"><span class="number">1</span>) &quot;subscribe&quot; # è®¢é˜…æˆåŠŸçš„æ¶ˆæ¯</span><br><span class="line"><span class="number">2</span>) &quot;sakura&quot;</span><br><span class="line"><span class="number">3</span>) (integer) <span class="number">1</span></span><br><span class="line"><span class="number">1</span>) &quot;message&quot; # æ¥æ”¶åˆ°æ¥è‡ªsakuraé¢‘é“çš„æ¶ˆæ¯ &quot;hello world&quot;</span><br><span class="line"><span class="number">2</span>) &quot;sakura&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello world&quot;</span><br><span class="line"><span class="number">1</span>) &quot;message&quot; # æ¥æ”¶åˆ°æ¥è‡ªsakuraé¢‘é“çš„æ¶ˆæ¯ &quot;hello i am sakura&quot;</span><br><span class="line"><span class="number">2</span>) &quot;sakura&quot;</span><br><span class="line"><span class="number">3</span>) &quot;hello i am sakura&quot;</span><br><span class="line"></span><br><span class="line">--------------æ¶ˆæ¯å‘å¸ƒç«¯-------------------</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; PUBLISH sakura &quot;hello world&quot; # å‘å¸ƒæ¶ˆæ¯åˆ°sakuraé¢‘é“</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; PUBLISH sakura &quot;hello i am sakura&quot; # å‘å¸ƒæ¶ˆæ¯</span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"></span><br><span class="line">-----------------æŸ¥çœ‹æ´»è·ƒçš„é¢‘é“------------</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; PUBSUB channels</span><br><span class="line"><span class="number">1</span>) &quot;sakura&quot;</span><br></pre></td></tr></table></figure>

<p><strong>åŸç†</strong><br>æ¯ä¸ª Redis æœåŠ¡å™¨è¿›ç¨‹éƒ½ç»´æŒç€ä¸€ä¸ªè¡¨ç¤ºæœåŠ¡å™¨çŠ¶æ€çš„ redis.h/redisServer ç»“æ„ï¼Œ ç»“æ„çš„ pubsub_channels å±æ€§æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œ è¿™ä¸ªå­—å…¸å°±ç”¨äºä¿å­˜è®¢é˜…é¢‘é“çš„ä¿¡æ¯ï¼Œå…¶ä¸­ï¼Œå­—å…¸çš„é”®ä¸ºæ­£åœ¨è¢«è®¢é˜…çš„é¢‘é“ï¼Œ è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œ é“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ªé¢‘é“çš„å®¢æˆ·ç«¯ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/2020051321554964.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å®¢æˆ·ç«¯è®¢é˜…ï¼Œå°±è¢«é“¾æ¥åˆ°å¯¹åº”é¢‘é“çš„é“¾è¡¨çš„å°¾éƒ¨ï¼Œé€€è®¢åˆ™å°±æ˜¯å°†å®¢æˆ·ç«¯èŠ‚ç‚¹ä»é“¾è¡¨ä¸­ç§»é™¤ã€‚</p>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è®¢é˜…äº†é¢‘é“ï¼Œä½†è‡ªå·±è¯»å–æ¶ˆæ¯çš„é€Ÿåº¦å´ä¸å¤Ÿå¿«çš„è¯ï¼Œé‚£ä¹ˆä¸æ–­ç§¯å‹çš„æ¶ˆæ¯ä¼šä½¿redisè¾“å‡ºç¼“å†²åŒºçš„ä½“ç§¯å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œè¿™å¯èƒ½ä½¿å¾—redisæœ¬èº«çš„é€Ÿåº¦å˜æ…¢ï¼Œç”šè‡³ç›´æ¥å´©æºƒã€‚</li>
<li>è¿™å’Œæ•°æ®ä¼ è¾“å¯é æ€§æœ‰å…³ï¼Œå¦‚æœåœ¨è®¢é˜…æ–¹æ–­çº¿ï¼Œé‚£ä¹ˆä»–å°†ä¼šä¸¢å¤±æ‰€æœ‰åœ¨çŸ­çº¿æœŸé—´å‘å¸ƒè€…å‘å¸ƒçš„æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>åº”ç”¨</strong></p>
<ol>
<li>æ¶ˆæ¯è®¢é˜…ï¼šå…¬ä¼—å·è®¢é˜…ï¼Œå¾®åšå…³æ³¨ç­‰ç­‰ï¼ˆèµ·å§‹æ›´å¤šæ˜¯ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥è¿›è¡Œå®ç°ï¼‰</li>
<li>å¤šäººåœ¨çº¿èŠå¤©å®¤ã€‚</li>
</ol>
<p>ç¨å¾®å¤æ‚çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°±ä¼šä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶MQå¤„ç†ã€‚</p>
<h1 id="åå››ã€Redisä¸»ä»å¤åˆ¶-1"><a href="#åå››ã€Redisä¸»ä»å¤åˆ¶-1" class="headerlink" title="åå››ã€Redisä¸»ä»å¤åˆ¶"></a>åå››ã€Redisä¸»ä»å¤åˆ¶</h1><h2 id="æ¦‚å¿µå’Œä½œç”¨-1"><a href="#æ¦‚å¿µå’Œä½œç”¨-1" class="headerlink" title="æ¦‚å¿µå’Œä½œç”¨"></a>æ¦‚å¿µå’Œä½œç”¨</h2><p><strong>æ¦‚å¿µ</strong></p>
<p>ä¸»ä»å¤åˆ¶ï¼Œæ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ã€‚å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹ï¼ˆ<strong>Master/Leaderï¼‰,åè€…ç§°ä¸ºä»èŠ‚ç‚¹ï¼ˆSlave/Followerï¼‰</strong>ï¼Œ æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼åªèƒ½ç”±ä¸»èŠ‚ç‚¹å¤åˆ¶åˆ°ä»èŠ‚ç‚¹ï¼ˆ<strong>ä¸»èŠ‚ç‚¹ä»¥å†™ä¸ºä¸»ã€ä»èŠ‚ç‚¹ä»¥è¯»ä¸ºä¸»</strong>ï¼‰ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰0ä¸ªæˆ–è€…å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä½†æ¯ä¸ªä»èŠ‚ç‚¹åªèƒ½ç”±ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚</p>
<p><strong>ä½œç”¨</strong></p>
<ol>
<li><strong>æ•°æ®å†—ä½™ï¼š</strong>ä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™çš„æ–¹å¼ã€‚</li>
<li><strong>æ•…éšœæ¢å¤</strong>ï¼šå½“ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œä»èŠ‚ç‚¹å¯ä»¥æš‚æ—¶æ›¿ä»£ä¸»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œæ˜¯ä¸€ç§æœåŠ¡å†—ä½™çš„æ–¹å¼</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”±ä¸»èŠ‚ç‚¹è¿›è¡Œå†™æ“ä½œï¼Œä»èŠ‚ç‚¹è¿›è¡Œè¯»æ“ä½œï¼Œåˆ†æ‹…æœåŠ¡å™¨çš„è´Ÿè½½ï¼›å°¤å…¶æ˜¯åœ¨å¤šè¯»å°‘å†™çš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…è´Ÿè½½ï¼Œæé«˜å¹¶å‘é‡ã€‚</li>
<li><strong>é«˜å¯ç”¨åŸºçŸ³</strong>ï¼šä¸»ä»å¤åˆ¶è¿˜æ˜¯å“¨å…µå’Œé›†ç¾¤èƒ½å¤Ÿå®æ–½çš„åŸºç¡€ã€‚</li>
</ol>
<blockquote>
<h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤-1"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤-1" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤"></a>ä¸ºä»€ä¹ˆä½¿ç”¨é›†ç¾¤</h3></blockquote>
<ol>
<li>å•å°æœåŠ¡å™¨éš¾ä»¥è´Ÿè½½å¤§é‡çš„è¯·æ±‚</li>
<li>å•å°æœåŠ¡å™¨æ•…éšœç‡é«˜ï¼Œç³»ç»Ÿå´©åæ¦‚ç‡å¤§</li>
<li>å•å°æœåŠ¡å™¨å†…å­˜å®¹é‡æœ‰é™ã€‚</li>
</ol>
<h2 id="ç¯å¢ƒé…ç½®-1"><a href="#ç¯å¢ƒé…ç½®-1" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; info replication</span><br><span class="line"># Replication</span><br><span class="line"><span class="function">role:<span class="title">master</span> # è§’è‰²</span></span><br><span class="line"><span class="function"><span class="title">connected_slaves</span>:0 # ä»æœºæ•°é‡</span></span><br><span class="line"><span class="function"><span class="title">master_replid</span>:3<span class="title">b54deef5b7b7b7f7dd8acefa23be48879b4fcff</span></span></span><br><span class="line"><span class="function"><span class="title">master_replid2</span>:0000000000000000000000000000000000000000</span></span><br><span class="line"><span class="function"><span class="title">master_repl_offset</span>:0</span></span><br><span class="line"><span class="function"><span class="title">second_repl_offset</span>:-1</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_active</span>:0</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_size</span>:1048576</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_first_byte_offset</span>:0</span></span><br><span class="line"><span class="function"><span class="title">repl_backlog_histlen</span>:0</span></span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶éœ€è¦å¯åŠ¨å¤šä¸ªæœåŠ¡ï¼Œå°±éœ€è¦å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªé…ç½®æ–‡ä»¶å¯¹åº”ä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>ç«¯å£å·</li>
<li>pidæ–‡ä»¶å</li>
<li>æ—¥å¿—æ–‡ä»¶å</li>
<li>rdbæ–‡ä»¶å</li>
</ul>
<p>å¯åŠ¨å•æœºå¤šæœåŠ¡é›†ç¾¤ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215610163.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="ä¸€ä¸»äºŒä»é…ç½®-1"><a href="#ä¸€ä¸»äºŒä»é…ç½®-1" class="headerlink" title="ä¸€ä¸»äºŒä»é…ç½®"></a>ä¸€ä¸»äºŒä»é…ç½®</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹åªç”¨é…ç½®ä»æœºå°±å¥½äº†ï¼</p>
<p>è®¤è€å¤§ï¼ä¸€ä¸»ï¼ˆ79ï¼‰äºŒä»ï¼ˆ80ï¼Œ81ï¼‰</p>
<p>ä½¿ç”¨<code>SLAVEOF host port</code>å°±å¯ä»¥ä¸ºä»æœºé…ç½®ä¸»æœºäº†ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215637483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç„¶åä¸»æœºä¸Šä¹Ÿèƒ½çœ‹åˆ°ä»æœºçš„çŠ¶æ€ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215645778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬è¿™é‡Œæ˜¯ä½¿ç”¨å‘½ä»¤æ­å»ºï¼Œæ˜¯æš‚æ—¶çš„ï¼ŒçœŸå®å¼€å‘ä¸­åº”è¯¥åœ¨ä»æœºçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œè¿™æ ·çš„è¯æ˜¯æ°¸ä¹…çš„ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215654634.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<h3 id="ä½¿ç”¨è§„åˆ™-1"><a href="#ä½¿ç”¨è§„åˆ™-1" class="headerlink" title="ä½¿ç”¨è§„åˆ™"></a>ä½¿ç”¨è§„åˆ™</h3></blockquote>
<ol>
<li><strong>ä»æœºåªèƒ½è¯»ï¼Œä¸èƒ½å†™ï¼Œä¸»æœºå¯è¯»å¯å†™ä½†æ˜¯å¤šç”¨äºå†™ã€‚</strong></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"> <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6381</span>&gt; <span class="built_in">set</span> name sakura # ä»æœº<span class="number">6381</span>å†™å…¥å¤±è´¥</span><br><span class="line">(error) READONLY You can&#x27;t write against a read only replica.</span><br><span class="line"></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6380</span>&gt; <span class="built_in">set</span> name sakura # ä»æœº<span class="number">6380</span>å†™å…¥å¤±è´¥</span><br><span class="line">(error) READONLY You can&#x27;t write against a read only replica.</span><br><span class="line"></span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; <span class="built_in">set</span> name sakura</span><br><span class="line">OK</span><br><span class="line"><span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">6379</span>&gt; get name</span><br><span class="line">&quot;sakura&quot;</span><br></pre></td></tr></table></figure>

<ol>
<li>å½“ä¸»æœºæ–­ç”µå®•æœºåï¼Œé»˜è®¤æƒ…å†µä¸‹ä»æœºçš„è§’è‰²ä¸ä¼šå‘ç”Ÿå˜åŒ– ï¼Œé›†ç¾¤ä¸­åªæ˜¯å¤±å»äº†å†™æ“ä½œï¼Œå½“ä¸»æœºæ¢å¤ä»¥åï¼Œåˆä¼šè¿æ¥ä¸Šä»æœºæ¢å¤åŸçŠ¶ã€‚</li>
<li>å½“ä»æœºæ–­ç”µå®•æœºåï¼Œè‹¥ä¸æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶é…ç½®çš„ä»æœºï¼Œå†æ¬¡å¯åŠ¨åä½œä¸ºä¸»æœºæ˜¯æ— æ³•è·å–ä¹‹å‰ä¸»æœºçš„æ•°æ®çš„ï¼Œè‹¥æ­¤æ—¶é‡æ–°é…ç½®ç§°ä¸ºä»æœºï¼Œåˆå¯ä»¥è·å–åˆ°ä¸»æœºçš„æ‰€æœ‰æ•°æ®ã€‚è¿™é‡Œå°±è¦æåˆ°ä¸€ä¸ªåŒæ­¥åŸç†ã€‚</li>
<li>ç¬¬äºŒæ¡ä¸­æåˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»æœºæ•…éšœåï¼Œä¸ä¼šå‡ºç°æ–°çš„ä¸»æœºï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥äº§ç”Ÿæ–°çš„ä¸»æœºï¼š</li>
</ol>
<ul>
<li>ä»æœºæ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤slaveof no one,è¿™æ ·æ‰§è¡Œä»¥åä»æœºä¼šç‹¬ç«‹å‡ºæ¥æˆä¸ºä¸€ä¸ªä¸»æœº</li>
<li><strong>ä½¿ç”¨å“¨å…µæ¨¡å¼ï¼ˆè‡ªåŠ¨é€‰ä¸¾ï¼‰</strong></li>
</ul>
<blockquote>
<p>å¦‚æœæ²¡æœ‰è€å¤§äº†ï¼Œè¿™ä¸ªæ—¶å€™èƒ½ä¸èƒ½é€‰æ‹©å‡ºæ¥ä¸€ä¸ªè€å¤§å‘¢ï¼Ÿæ‰‹åŠ¨ï¼</p>
</blockquote>
<p>å¦‚æœä¸»æœºæ–­å¼€äº†è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>SLAVEOF no one</code>è®©è‡ªå·±å˜æˆä¸»æœºï¼å…¶ä»–çš„èŠ‚ç‚¹å°±å¯ä»¥æ‰‹åŠ¨è¿æ¥åˆ°æœ€æ–°çš„ä¸»èŠ‚ç‚¹ï¼ˆæ‰‹åŠ¨ï¼‰ï¼å¦‚æœè¿™ä¸ªæ—¶å€™è€å¤§ä¿®å¤äº†ï¼Œé‚£ä¹ˆå°±é‡æ–°è¿æ¥ï¼</p>
<h1 id="åäº”ã€å“¨å…µæ¨¡å¼-1"><a href="#åäº”ã€å“¨å…µæ¨¡å¼-1" class="headerlink" title="åäº”ã€å“¨å…µæ¨¡å¼"></a>åäº”ã€å“¨å…µæ¨¡å¼</h1><p>æ›´å¤šä¿¡æ¯å‚è€ƒåšå®¢ï¼š<a href="https://www.jianshu.com/p/06ab9daf921d">https://www.jianshu.com/p/06ab9daf921d</a></p>
<p><strong>ä¸»ä»åˆ‡æ¢æŠ€æœ¯çš„æ–¹æ³•æ˜¯ï¼šå½“ä¸»æœåŠ¡å™¨å®•æœºåï¼Œéœ€è¦æ‰‹åŠ¨æŠŠä¸€å°ä»æœåŠ¡å™¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦äººå·¥å¹²é¢„ï¼Œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´å†…æœåŠ¡ä¸å¯ç”¨ã€‚è¿™ä¸æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘å“¨å…µæ¨¡å¼</strong>ã€‚</p>
<p>å•æœºå•ä¸ªå“¨å…µ</p>
<p><a href="https://imgtu.com/i/5PhKPg"><img src="https://z3.ax1x.com/2021/10/08/5PhKPg.png" alt="5PhKPg.png"></a></p>
<p>å“¨å…µçš„ä½œç”¨ï¼š</p>
<ul>
<li>é€šè¿‡å‘é€å‘½ä»¤ï¼Œè®©RedisæœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ã€‚</li>
<li>å½“å“¨å…µç›‘æµ‹åˆ°masterå®•æœºï¼Œä¼šè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmasterï¼Œç„¶åé€šè¿‡<strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong>é€šçŸ¥å…¶ä»–çš„ä»æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒä»¬åˆ‡æ¢ä¸»æœºã€‚</li>
</ul>
<p>å¤šå“¨å…µæ¨¡å¼</p>
<p><a href="https://imgtu.com/i/5PhQ2j"><img src="https://z3.ax1x.com/2021/10/08/5PhQ2j.png" alt="5PhQ2j.png"></a></p>
<p>å“¨å…µçš„æ ¸å¿ƒé…ç½®</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">sentinel monitor mymaster <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ•°å­—1è¡¨ç¤º ï¼šå½“ä¸€ä¸ªå“¨å…µä¸»è§‚è®¤ä¸ºä¸»æœºæ–­å¼€ï¼Œå°±å¯ä»¥å®¢è§‚è®¤ä¸ºä¸»æœºæ•…éšœï¼Œç„¶åå¼€å§‹é€‰ä¸¾æ–°çš„ä¸»æœºã€‚</li>
</ul>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis-sentinel xxx/sentinel.conf</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸå¯åŠ¨å“¨å…µæ¨¡å¼</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215752444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æ­¤æ—¶å“¨å…µç›‘è§†ç€æˆ‘ä»¬çš„ä¸»æœº6379ï¼Œå½“æˆ‘ä»¬æ–­å¼€ä¸»æœºåï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215806972.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>å“¨å…µæ¨¡å¼ä¼˜ç¼ºç‚¹</p>
</blockquote>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>å“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‰€æœ‰ä¸»ä»å¤åˆ¶çš„ä¼˜ç‚¹ï¼Œå®ƒéƒ½æœ‰</li>
<li>ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§æ›´å¥½</li>
<li>å“¨å…µæ¨¡å¼æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œæ‰‹åŠ¨åˆ°è‡ªåŠ¨ï¼Œæ›´åŠ å¥å£®</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>Redisä¸å¥½åœ¨çº¿æ‰©å®¹ï¼Œé›†ç¾¤å®¹é‡ä¸€æ—¦è¾¾åˆ°ä¸Šé™ï¼Œåœ¨çº¿æ‰©å®¹å°±ååˆ†éº»çƒ¦</li>
<li>å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé…ç½®é¡¹</li>
</ol>
<blockquote>
<p>å“¨å…µæ¨¡å¼çš„å…¨éƒ¨é…ç½®</p>
</blockquote>
<p>å®Œæ•´çš„å“¨å…µæ¨¡å¼é…ç½®æ–‡ä»¶ sentinel.conf</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># Example sentinel.conf</span><br><span class="line"> </span><br><span class="line"># å“¨å…µsentinelå®ä¾‹è¿è¡Œçš„ç«¯å£ é»˜è®¤<span class="number">26379</span></span><br><span class="line">port <span class="number">26379</span></span><br><span class="line"> </span><br><span class="line"># å“¨å…µsentinelçš„å·¥ä½œç›®å½•</span><br><span class="line"><span class="built_in">dir</span> /tmp</span><br><span class="line"> </span><br><span class="line"># å“¨å…µsentinelç›‘æ§çš„redisä¸»èŠ‚ç‚¹çš„ ip port </span><br><span class="line"># master-name  å¯ä»¥è‡ªå·±å‘½åçš„ä¸»èŠ‚ç‚¹åå­— åªèƒ½ç”±å­—æ¯A-zã€æ•°å­—<span class="number">0</span>-<span class="number">9</span> ã€è¿™ä¸‰ä¸ªå­—ç¬¦&quot;.-_&quot;ç»„æˆã€‚</span><br><span class="line"># quorum å½“è¿™äº›quorumä¸ªæ•°sentinelå“¨å…µè®¤ä¸ºmasterä¸»èŠ‚ç‚¹å¤±è” é‚£ä¹ˆè¿™æ—¶ å®¢è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹å¤±è”äº†</span><br><span class="line"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span><br><span class="line">sentinel monitor mymaster <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> <span class="number">6379</span> <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"># å½“åœ¨Rediså®ä¾‹ä¸­å¼€å¯äº†requirepass foobared æˆæƒå¯†ç  è¿™æ ·æ‰€æœ‰è¿æ¥Rediså®ä¾‹çš„å®¢æˆ·ç«¯éƒ½è¦æä¾›å¯†ç </span><br><span class="line"># è®¾ç½®å“¨å…µsentinel è¿æ¥ä¸»ä»çš„å¯†ç  æ³¨æ„å¿…é¡»ä¸ºä¸»ä»è®¾ç½®ä¸€æ ·çš„éªŒè¯å¯†ç </span><br><span class="line"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span><br><span class="line">sentinel auth-pass mymaster MySUPER--secret-<span class="number">0123</span>passw0rd</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># æŒ‡å®šå¤šå°‘æ¯«ç§’ä¹‹å ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µsentinel æ­¤æ—¶ å“¨å…µä¸»è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿ é»˜è®¤<span class="number">30</span>ç§’</span><br><span class="line"># sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span><br><span class="line">sentinel down-after-milliseconds mymaster <span class="number">30000</span></span><br><span class="line"> </span><br><span class="line"># è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œ</span><br><span class="line">è¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œ</span><br><span class="line">ä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚</span><br><span class="line">å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º <span class="number">1</span> æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚</span><br><span class="line"># sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span><br><span class="line">sentinel parallel-syncs mymaster <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># æ•…éšœè½¬ç§»çš„è¶…æ—¶æ—¶é—´ failover-timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š </span><br><span class="line">#<span class="number">1</span>. åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚</span><br><span class="line">#<span class="number">2</span>. å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚</span><br><span class="line">#<span class="number">3</span>.å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚  </span><br><span class="line">#<span class="number">4</span>.å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel-syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†</span><br><span class="line"># é»˜è®¤ä¸‰åˆ†é’Ÿ</span><br><span class="line"># sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span><br><span class="line">sentinel failover-timeout mymaster <span class="number">180000</span></span><br><span class="line"> </span><br><span class="line"># SCRIPTS EXECUTION</span><br><span class="line"> </span><br><span class="line">#é…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚</span><br><span class="line">#å¯¹äºè„šæœ¬çš„è¿è¡Œç»“æœæœ‰ä»¥ä¸‹è§„åˆ™ï¼š</span><br><span class="line">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›<span class="number">1</span>ï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ç¨åå°†ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œé‡å¤æ¬¡æ•°ç›®å‰é»˜è®¤ä¸º<span class="number">10</span></span><br><span class="line">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›<span class="number">2</span>ï¼Œæˆ–è€…æ¯”<span class="number">2</span>æ›´é«˜çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œè„šæœ¬å°†ä¸ä¼šé‡å¤æ‰§è¡Œã€‚</span><br><span class="line">#å¦‚æœè„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·è¢«ç»ˆæ­¢äº†ï¼Œåˆ™åŒè¿”å›å€¼ä¸º<span class="number">1</span>æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</span><br><span class="line">#ä¸€ä¸ªè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º<span class="number">60</span>sï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œè„šæœ¬å°†ä¼šè¢«ä¸€ä¸ªSIGKILLä¿¡å·ç»ˆæ­¢ï¼Œä¹‹åé‡æ–°æ‰§è¡Œã€‚</span><br><span class="line"> </span><br><span class="line">#é€šçŸ¥å‹è„šæœ¬:å½“sentinelæœ‰ä»»ä½•è­¦å‘Šçº§åˆ«çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è¯´rediså®ä¾‹çš„ä¸»è§‚å¤±æ•ˆå’Œå®¢è§‚å¤±æ•ˆç­‰ç­‰ï¼‰ï¼Œå°†ä¼šå»è°ƒç”¨è¿™ä¸ªè„šæœ¬ï¼Œ</span><br><span class="line">#è¿™æ—¶è¿™ä¸ªè„šæœ¬åº”è¯¥é€šè¿‡é‚®ä»¶ï¼ŒSMSç­‰æ–¹å¼å»é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜å…³äºç³»ç»Ÿä¸æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ã€‚è°ƒç”¨è¯¥è„šæœ¬æ—¶ï¼Œå°†ä¼ ç»™è„šæœ¬ä¸¤ä¸ªå‚æ•°ï¼Œ</span><br><span class="line">#ä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œ</span><br><span class="line">#ä¸€ä¸ªæ˜¯äº‹ä»¶çš„æè¿°ã€‚</span><br><span class="line">#å¦‚æœsentinel.confé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è¿™ä¸ªè„šæœ¬è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯è¿™ä¸ªè„šæœ¬å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦åˆ™sentinelæ— æ³•æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚</span><br><span class="line">#é€šçŸ¥è„šæœ¬</span><br><span class="line"># sentinel notification-script &lt;master-name&gt; &lt;script-<span class="built_in">path</span>&gt;</span><br><span class="line">  sentinel notification-script mymaster /var/redis/notify.sh</span><br><span class="line"> </span><br><span class="line"># å®¢æˆ·ç«¯é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹å‚æ•°è„šæœ¬</span><br><span class="line"># å½“ä¸€ä¸ªmasterç”±äºfailoverè€Œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªè„šæœ¬å°†ä¼šè¢«è°ƒç”¨ï¼Œé€šçŸ¥ç›¸å…³çš„å®¢æˆ·ç«¯å…³äºmasteråœ°å€å·²ç»å‘ç”Ÿæ”¹å˜çš„ä¿¡æ¯ã€‚</span><br><span class="line"># ä»¥ä¸‹å‚æ•°å°†ä¼šåœ¨è°ƒç”¨è„šæœ¬æ—¶ä¼ ç»™è„šæœ¬:</span><br><span class="line"># &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span><br><span class="line"># ç›®å‰&lt;state&gt;æ€»æ˜¯â€œfailoverâ€,</span><br><span class="line"># &lt;role&gt;æ˜¯â€œleaderâ€æˆ–è€…â€œobserverâ€ä¸­çš„ä¸€ä¸ªã€‚ </span><br><span class="line"># å‚æ•° from-ip, from-port, to-ip, to-portæ˜¯ç”¨æ¥å’Œæ—§çš„masterå’Œæ–°çš„master(å³æ—§çš„slave)é€šä¿¡çš„</span><br><span class="line"># è¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œèƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ˜¯é’ˆå¯¹æ€§çš„ã€‚</span><br><span class="line"># sentinel client-reconfig-script &lt;master-name&gt; &lt;script-<span class="built_in">path</span>&gt;</span><br><span class="line">sentinel client-reconfig-script mymaster /var/redis/reconfig.sh</span><br></pre></td></tr></table></figure>

<h1 id="åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©-1"><a href="#åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©-1" class="headerlink" title="åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©"></a>åå…­ã€ç¼“å­˜ç©¿é€ä¸é›ªå´©</h1><h3 id="ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰-1"><a href="#ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰-1" class="headerlink" title="ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰"></a>ç¼“å­˜ç©¿é€ï¼ˆæŸ¥ä¸åˆ°ï¼‰</h3><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·è¯·æ±‚æ•°æ®æ—¶ï¼Œä¼šå…ˆåœ¨ç¼“å­˜(Redis)ä¸­æŸ¥æ‰¾ï¼Œè‹¥æ²¡æ‰¾åˆ°å³ç¼“å­˜æœªå‘½ä¸­ï¼Œå†åœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ•°é‡å°‘å¯èƒ½é—®é¢˜ä¸å¤§ï¼Œå¯æ˜¯ä¸€æ—¦å¤§é‡çš„è¯·æ±‚æ•°æ®ï¼ˆä¾‹å¦‚ç§’æ€åœºæ™¯ï¼‰ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œå°±ä¼šå…¨éƒ¨è½¬ç§»åˆ°æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“æå¤§çš„å‹åŠ›ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æ•°æ®åº“å´©æºƒã€‚ç½‘ç»œå®‰å…¨ä¸­ä¹Ÿæœ‰äººæ¶æ„ä½¿ç”¨è¿™ç§æ‰‹æ®µè¿›è¡Œæ”»å‡»è¢«ç§°ä¸ºæ´ªæ°´æ”»å‡»ã€‚</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p><strong>å¸ƒéš†è¿‡æ»¤å™¨</strong></p>
<p>å¯¹æ‰€æœ‰å¯èƒ½æŸ¥è¯¢çš„å‚æ•°ä»¥Hashçš„å½¢å¼å­˜å‚¨ï¼Œä»¥ä¾¿å¿«é€Ÿç¡®å®šæ˜¯å¦å­˜åœ¨è¿™ä¸ªå€¼ï¼Œåœ¨æ§åˆ¶å±‚å…ˆè¿›è¡Œæ‹¦æˆªæ ¡éªŒï¼Œæ ¡éªŒä¸é€šè¿‡ç›´æ¥æ‰“å›ï¼Œå‡è½»äº†å­˜å‚¨ç³»ç»Ÿçš„å‹åŠ›ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215824722.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>ç¼“å­˜ç©ºå¯¹è±¡</strong></p>
<p>ä¸€æ¬¡è¯·æ±‚è‹¥åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æ‰¾åˆ°ï¼Œå°±åœ¨ç¼“å­˜ä¸­æ–¹ä¸€ä¸ªç©ºå¯¹è±¡ç”¨äºå¤„ç†åç»­è¿™ä¸ªè¯·æ±‚ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215836317.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™æ ·åšæœ‰ä¸€ä¸ªç¼ºé™·ï¼šå­˜å‚¨ç©ºå¯¹è±¡ä¹Ÿéœ€è¦ç©ºé—´ï¼Œå¤§é‡çš„ç©ºå¯¹è±¡ä¼šè€—è´¹ä¸€å®šçš„ç©ºé—´ï¼Œå­˜å‚¨æ•ˆç‡å¹¶ä¸é«˜ã€‚è§£å†³è¿™ä¸ªç¼ºé™·çš„æ–¹å¼å°±æ˜¯è®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´</p>
<p>å³ä½¿å¯¹ç©ºå€¼è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨ç¼“å­˜å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®ä¼šæœ‰ä¸€æ®µæ—¶é—´çª—å£çš„ä¸ä¸€è‡´ï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒä¸€è‡´æ€§çš„ä¸šåŠ¡ä¼šæœ‰å½±å“ã€‚</p>
<h3 id="ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰-1"><a href="#ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰-1" class="headerlink" title="ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰"></a>ç¼“å­˜å‡»ç©¿ï¼ˆé‡å¤ªå¤§ï¼Œç¼“å­˜è¿‡æœŸï¼‰</h3><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>ç›¸è¾ƒäºç¼“å­˜ç©¿é€ï¼Œç¼“å­˜å‡»ç©¿çš„ç›®çš„æ€§æ›´å¼ºï¼Œä¸€ä¸ªå­˜åœ¨çš„keyï¼Œåœ¨ç¼“å­˜è¿‡æœŸçš„ä¸€åˆ»ï¼ŒåŒæ—¶æœ‰å¤§é‡çš„è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šå‡»ç©¿åˆ°DBï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ã€‚è¿™å°±æ˜¯ç¼“å­˜è¢«å‡»ç©¿ï¼Œåªæ˜¯é’ˆå¯¹å…¶ä¸­æŸä¸ªkeyçš„ç¼“å­˜ä¸å¯ç”¨è€Œå¯¼è‡´å‡»ç©¿ï¼Œä½†æ˜¯å…¶ä»–çš„keyä¾ç„¶å¯ä»¥ä½¿ç”¨ç¼“å­˜å“åº”ã€‚</p>
<p>æ¯”å¦‚çƒ­æœæ’è¡Œä¸Šï¼Œä¸€ä¸ªçƒ­ç‚¹æ–°é—»è¢«åŒæ—¶å¤§é‡è®¿é—®å°±å¯èƒ½å¯¼è‡´ç¼“å­˜å‡»ç©¿ã€‚</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<ol>
<li><strong>è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ</strong></li>
</ol>
<p>è¿™æ ·å°±ä¸ä¼šå‡ºç°çƒ­ç‚¹æ•°æ®è¿‡æœŸçš„æƒ…å†µï¼Œä½†æ˜¯å½“Rediså†…å­˜ç©ºé—´æ»¡çš„æ—¶å€™ä¹Ÿä¼šæ¸…ç†éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸”æ­¤ç§æ–¹æ¡ˆä¼šå ç”¨ç©ºé—´ï¼Œä¸€æ—¦çƒ­ç‚¹æ•°æ®å¤šäº†èµ·æ¥ï¼Œå°±ä¼šå ç”¨éƒ¨åˆ†ç©ºé—´ã€‚</p>
<ol>
<li><strong>åŠ äº’æ–¥é”(åˆ†å¸ƒå¼é”)</strong></li>
</ol>
<p>åœ¨è®¿é—®keyä¹‹å‰ï¼Œé‡‡ç”¨SETNXï¼ˆset if not existsï¼‰æ¥è®¾ç½®å¦ä¸€ä¸ªçŸ­æœŸkeyæ¥é”ä½å½“å‰keyçš„è®¿é—®ï¼Œè®¿é—®ç»“æŸå†åˆ é™¤è¯¥çŸ­æœŸkeyã€‚ä¿è¯åŒæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚è¿™æ ·å¯¹é”çš„è¦æ±‚å°±ååˆ†é«˜ã€‚</p>
<h2 id="ç¼“å­˜é›ªå´©-1"><a href="#ç¼“å­˜é›ªå´©-1" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h2><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>å¤§é‡çš„keyè®¾ç½®äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´åœ¨ç¼“å­˜åœ¨åŒä¸€æ—¶åˆ»å…¨éƒ¨å¤±æ•ˆï¼Œé€ æˆç¬æ—¶DBè¯·æ±‚é‡å¤§ã€å‹åŠ›éª¤å¢ï¼Œå¼•èµ·é›ªå´©ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200513215850428.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<ul>
<li><p><strong>redisé«˜å¯ç”¨</strong></p>
<p>è¿™ä¸ªæ€æƒ³çš„å«ä¹‰æ˜¯ï¼Œæ—¢ç„¶redisæœ‰å¯èƒ½æŒ‚æ‰ï¼Œé‚£æˆ‘å¤šå¢è®¾å‡ å°redisï¼Œè¿™æ ·ä¸€å°æŒ‚æ‰ä¹‹åå…¶ä»–çš„è¿˜å¯ä»¥ç»§ç»­å·¥ä½œï¼Œå…¶å®å°±æ˜¯æ­å»ºçš„é›†ç¾¤</p>
</li>
<li><p><strong>é™æµé™çº§</strong></p>
<p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€æƒ³æ˜¯ï¼Œåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚</p>
</li>
<li><p><strong>æ•°æ®é¢„çƒ­</strong></p>
<p>æ•°æ®åŠ çƒ­çš„å«ä¹‰å°±æ˜¯åœ¨æ­£å¼éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘å…ˆæŠŠå¯èƒ½çš„æ•°æ®å…ˆé¢„å…ˆè®¿é—®ä¸€éï¼Œè¿™æ ·éƒ¨åˆ†å¯èƒ½å¤§é‡è®¿é—®çš„æ•°æ®å°±ä¼šåŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚åœ¨å³å°†å‘ç”Ÿå¤§å¹¶å‘è®¿é—®å‰æ‰‹åŠ¨è§¦å‘åŠ è½½ç¼“å­˜ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ç‚¹å°½é‡å‡åŒ€ã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Swaggerå­¦ä¹ </title>
    <url>/2022/07/23/Swagger%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="1ã€Swaggerç®€ä»‹"><a href="#1ã€Swaggerç®€ä»‹" class="headerlink" title="1ã€Swaggerç®€ä»‹"></a>1ã€Swaggerç®€ä»‹</h2><p><strong>å‰åç«¯åˆ†ç¦»</strong></p>
<p>Vue+SpringBoot</p>
<p>åç«¯æ—¶ä»£ï¼šå‰ç«¯åªç”¨ç®¡ç†é™æ€é¡µé¢ï¼›html==&gt;åç«¯ã€‚æ¨¡æ¿å¼•æ“JSP=&gt;åç«¯æ‰æ˜¯ä¸»åŠ›</p>
<p><strong>å‰åç«¯åˆ†ç¦»æ—¶ä»£</strong></p>
<p>Vue+SpringBoot</p>
<p>åç«¯æ—¶ä»£ï¼šå‰ç«¯åªç”¨ç®¡ç†é™æ€é¡µé¢ï¼›html==&gt;åç«¯ã€‚æ¨¡æ¿å¼•æ“JSP=&gt;åç«¯æ‰æ˜¯ä¸»åŠ›</p>
<p><strong>å‰åç«¯åˆ†ç¦»æ—¶ä»£</strong></p>
<ul>
<li>å‰ç«¯ -&gt; å‰ç«¯æ§åˆ¶å±‚ã€è§†å›¾å±‚</li>
<li>ä¼ªé€ åç«¯æ•°æ®ï¼Œjsonã€‚å·²ç»å­˜åœ¨äº†ï¼Œä¸éœ€è¦åç«¯ï¼Œå‰ç«¯å·¥ç¨‹é˜Ÿä¾æ—§èƒ½å¤Ÿè·‘èµ·æ¥</li>
<li>åç«¯ -&gt; åç«¯æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚</li>
<li>å‰åç«¯é€šè¿‡APIè¿›è¡Œäº¤äº’</li>
<li>å‰åç«¯ç›¸å¯¹ç‹¬ç«‹ä¸”æ¾è€¦åˆ</li>
</ul>
<p><strong>äº§ç”Ÿçš„é—®é¢˜</strong></p>
<ul>
<li>å‰åç«¯é›†æˆè”è°ƒï¼Œå‰ç«¯æˆ–è€…åç«¯æ— æ³•åšåˆ°â€œåŠæ—¶åå•†ï¼Œå°½æ—©è§£å†³â€ï¼Œæœ€ç»ˆå¯¼è‡´é—®é¢˜é›†ä¸­çˆ†å‘</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>é¦–å…ˆå®šä¹‰schema [ è®¡åˆ’çš„æçº² ]ï¼Œå¹¶å®æ—¶è·Ÿè¸ªæœ€æ–°çš„APIï¼Œé™ä½é›†æˆé£é™©ï¼›</li>
<li>æ—©äº›å¹´ï¼šæŒ‡å®šwordè®¡åˆ’æ–‡æ¡£ï¼›</li>
<li>å‰åç«¯åˆ†ç¦»ï¼š<ul>
<li><strong>å‰ç«¯æµ‹è¯•åç«¯æ¥å£ï¼špostman</strong></li>
<li><strong>åç«¯æä¾›æ¥å£ï¼Œéœ€è¦å®æ—¶æ›´æ–°æœ€æ–°çš„æ¶ˆæ¯åŠæ”¹åŠ¨</strong></li>
</ul>
</li>
</ul>
<p><strong>Swagger</strong></p>
<ul>
<li>å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶</li>
<li>Restful Api æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆå™¨ =&gt; <strong>API æ–‡æ¡£ ä¸API å®šä¹‰åŒæ­¥æ›´æ–°</strong></li>
<li>ç›´æ¥è¿è¡Œï¼Œåœ¨çº¿æµ‹è¯•API</li>
<li>æ”¯æŒå¤šç§è¯­è¨€ ï¼ˆå¦‚ï¼šJavaï¼ŒPHPç­‰ï¼‰</li>
<li>å®˜ç½‘ï¼š<a href="https://swagger.io/">https://swagger.io/</a></li>
</ul>
<h2 id="2ã€SpringBooté›†æˆSwagger"><a href="#2ã€SpringBooté›†æˆSwagger" class="headerlink" title="2ã€SpringBooté›†æˆSwagger"></a>2ã€SpringBooté›†æˆSwagger</h2><p><strong>SpringBooté›†æˆSwagger</strong> =&gt; <strong>springfox</strong>ï¼Œä¸¤ä¸ªjaråŒ…</p>
<ul>
<li><strong><a href="https://mvnrepository.com/artifact/io.springfox/springfox-swagger2">Springfox-swagger2</a></strong></li>
<li><a href="https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui">springfox-swagger-ui</a></li>
</ul>
<p><strong>ä½¿ç”¨Swagger</strong></p>
<p>è¦æ±‚ï¼šjdk 1.8 + å¦åˆ™swagger2æ— æ³•è¿è¡Œ</p>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>æ–°å»ºä¸€ä¸ªSpringBoot-webé¡¹ç›®</li>
<li>æ·»åŠ Mavenä¾èµ–ï¼ˆæ³¨æ„ï¼š2.9.2ç‰ˆæœ¬ä¹‹å‰ï¼Œä¹‹åçš„ä¸è¡Œï¼‰</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™HelloControllerï¼Œæµ‹è¯•ç¡®ä¿è¿è¡ŒæˆåŠŸï¼</li>
<li>è¦ä½¿ç”¨Swaggerï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªé…ç½®ç±»-SwaggerConfigæ¥é…ç½® Swagger</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">// å¼€å¯Swagger2çš„è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>è®¿é—®æµ‹è¯• ï¼š<a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a> ï¼Œå¯ä»¥çœ‹åˆ°swaggerçš„ç•Œé¢ï¼›</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExMzIyMjkyNjUucG5n?x-oss-process=image/format,png" alt="image-20200731132229265"></p>
<h2 id="3ã€é…ç½®Swagger"><a href="#3ã€é…ç½®Swagger" class="headerlink" title="3ã€é…ç½®Swagger"></a>3ã€é…ç½®Swagger</h2><ol>
<li><p>Swaggerå®ä¾‹<strong>Bean</strong>æ˜¯Docketï¼Œæ‰€ä»¥é€šè¿‡é…ç½®Docketå®ä¾‹æ¥é…ç½®Swagggerã€‚</p>
<blockquote>
<p>beanå…¶å®å°±æ˜¯å®ä¾‹å¯¹è±¡.<br>ä¸è¿‡beanæ˜¯springä¸­ä¸“å±çš„æ¦‚å¿µï¼ˆæˆ–è€…ç±»ä¼¼æ¡†æ¶æˆ–å®¹å™¨ï¼‰</p>
<p>æ™®é€šnewå‡ºæ¥çš„å¯¹è±¡ï¼Œå«å¯¹è±¡ã€‚<br>ä½†æ˜¯ä½ æŠŠè¿™ä¸ªå¯¹è±¡äº¤ç»™springè¿›è¡Œç®¡ç†ï¼ˆé€šè¿‡componentä¹‹ç±»çš„ï¼‰ï¼Œè¿™æ ·æ¯æ¬¡ä¸ç”¨åœ¨ä»£ç é‡Œnewäº†ï¼Œå®ƒå°±å˜æˆbeanäº†.</p>
</blockquote>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">//é…ç½®docketä»¥é…ç½®Swaggerå…·ä½“å‚æ•°</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å¯ä»¥é€šè¿‡apiInfo()å±æ€§é…ç½®æ–‡æ¡£ä¿¡æ¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®æ–‡æ¡£ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;è”ç³»äººåå­—&quot;</span>, <span class="string">&quot;http://xxx.xxx.com/è”ç³»äººè®¿é—®é“¾æ¥&quot;</span>, <span class="string">&quot;è”ç³»äººé‚®ç®±&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfo</span>(</span><br><span class="line">           <span class="string">&quot;Swaggerå­¦ä¹ &quot;</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">           <span class="string">&quot;å­¦ä¹ æ¼”ç¤ºå¦‚ä½•é…ç½®Swagger&quot;</span>, <span class="comment">// æè¿°</span></span><br><span class="line">           <span class="string">&quot;v1.0&quot;</span>, <span class="comment">// ç‰ˆæœ¬</span></span><br><span class="line">           <span class="string">&quot;http://terms.service.url/ç»„ç»‡é“¾æ¥&quot;</span>, <span class="comment">// ç»„ç»‡é“¾æ¥</span></span><br><span class="line">           contact, <span class="comment">// è”ç³»äººä¿¡æ¯</span></span><br><span class="line">           <span class="string">&quot;Apach 2.0 è®¸å¯&quot;</span>, <span class="comment">// è®¸å¯</span></span><br><span class="line">           <span class="string">&quot;è®¸å¯é“¾æ¥&quot;</span>, <span class="comment">// è®¸å¯è¿æ¥</span></span><br><span class="line">           <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()<span class="comment">// æ‰©å±•</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>Docket å®ä¾‹å…³è”ä¸Š apiInfo()</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>é‡å¯é¡¹ç›®ï¼Œè®¿é—®æµ‹è¯• <a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a> çœ‹ä¸‹æ•ˆæœï¼›</strong></li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExNjE4NTExMzYucG5n?x-oss-process=image/format,png" alt="image-20200731161851136"></p>
<h2 id="4ã€é…ç½®æ‰«ææ¥å£"><a href="#4ã€é…ç½®æ‰«ææ¥å£" class="headerlink" title="4ã€é…ç½®æ‰«ææ¥å£"></a>4ã€é…ç½®æ‰«ææ¥å£</h2><ol>
<li>æ„å»ºDocketæ—¶é€šè¿‡select()æ–¹æ³•é…ç½®æ€ä¹ˆæ‰«ææ¥å£ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .select()<span class="comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;nuc.ss.swagger.controller&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>é‡å¯é¡¹ç›®æµ‹è¯•ï¼Œç”±äºæˆ‘ä»¬é…ç½®æ ¹æ®åŒ…çš„è·¯å¾„æ‰«ææ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½çœ‹åˆ°ä¸€ä¸ªç±»</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExNjU4MzczOTEucG5n?x-oss-process=image/format,png" alt="image-20200731165837391"></p>
<ol>
<li>é™¤äº†é€šè¿‡åŒ…è·¯å¾„é…ç½®æ‰«ææ¥å£å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®å…¶ä»–æ–¹å¼æ‰«ææ¥å£ï¼Œè¿™é‡Œæ³¨é‡Šä¸€ä¸‹æ‰€æœ‰çš„é…ç½®æ–¹å¼ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">basePackage(<span class="keyword">final</span> String basePackage) <span class="comment">// æ ¹æ®åŒ…è·¯å¾„æ‰«ææ¥å£</span></span><br><span class="line">any() <span class="comment">// æ‰«ææ‰€æœ‰ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ‰«æåˆ°</span></span><br><span class="line">none() <span class="comment">// ä¸æ‰«ææ¥å£</span></span><br><span class="line"><span class="comment">// é€šè¿‡æ–¹æ³•ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚withMethodAnnotation(GetMapping.class)åªæ‰«ægetè¯·æ±‚</span></span><br><span class="line">withMethodAnnotation(<span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; annotation)</span><br><span class="line"><span class="comment">// é€šè¿‡ç±»ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚.withClassAnnotation(Controller.class)åªæ‰«ææœ‰controlleræ³¨è§£çš„ç±»ä¸­çš„æ¥å£</span></span><br><span class="line">withClassAnnotation(<span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; annotation)</span><br></pre></td></tr></table></figure>

<ol>
<li>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®æ¥å£æ‰«æè¿‡æ»¤ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .select()</span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.kuang.swagger.controller&quot;</span>))</span><br><span class="line">       <span class="comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/sså¼€å¤´çš„æ¥å£</span></span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">&quot;/ss/**&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>è¿™é‡Œçš„å¯é€‰å€¼è¿˜æœ‰</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">any() <span class="comment">// ä»»ä½•è¯·æ±‚éƒ½æ‰«æ</span></span><br><span class="line">none() <span class="comment">// ä»»ä½•è¯·æ±‚éƒ½ä¸æ‰«æ</span></span><br><span class="line">regex(<span class="keyword">final</span> String pathRegex) <span class="comment">// é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶</span></span><br><span class="line">ant(<span class="keyword">final</span> String antPattern) <span class="comment">// é€šè¿‡ant()æ§åˆ¶</span></span><br></pre></td></tr></table></figure>

<h2 id="5ã€é…ç½®Swaggerå¼€å…³"><a href="#5ã€é…ç½®Swaggerå¼€å…³" class="headerlink" title="5ã€é…ç½®Swaggerå¼€å…³"></a>5ã€é…ç½®Swaggerå¼€å…³</h2><ol>
<li>é€šè¿‡<strong>enable</strong>()æ–¹æ³•é…ç½®æ˜¯å¦å¯ç”¨swaggerï¼Œå¦‚æœæ˜¯falseï¼Œswaggerå°†ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®äº†</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .enable(<span class="literal">false</span>) <span class="comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span></span><br><span class="line">      .select()</span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;nuc.ss.swagger.controller&quot;</span>))</span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">&quot;/ss/**&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTA2MTQzODEucG5n?x-oss-process=image/format,png" alt="image-20200731190614381"></p>
<ol>
<li><strong>å¦‚ä½•åŠ¨æ€é…ç½®å½“é¡¹ç›®å¤„äºtestã€devç¯å¢ƒæ—¶æ˜¾ç¤ºswaggerï¼Œå¤„äºprodæ—¶ä¸æ˜¾ç¤ºï¼Ÿ</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span> &#123;</span><br><span class="line">   <span class="comment">// è®¾ç½®è¦æ˜¾ç¤ºswaggerçš„ç¯å¢ƒ</span></span><br><span class="line">   <span class="type">Profiles</span> <span class="variable">of</span> <span class="operator">=</span> Profiles.of(<span class="string">&quot;dev&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">   <span class="comment">// åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºè¯¥ç¯å¢ƒ</span></span><br><span class="line">   <span class="comment">// é€šè¿‡ enable() æ¥æ”¶æ­¤å‚æ•°åˆ¤æ–­æ˜¯å¦è¦æ˜¾ç¤º</span></span><br><span class="line">   <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> environment.acceptsProfiles(of);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .enable(b)</span><br><span class="line">      .select()</span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.kuang.swagger.controller&quot;</span>))</span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">&quot;/ss/**&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å¯ä»¥åœ¨é¡¹ç›®ä¸­å¢åŠ é…ç½®æ–‡ä»¶</li>
</ol>
<ul>
<li><p>devæµ‹è¯•ç¯å¢ƒ</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTMxMDk4MjYucG5n?x-oss-process=image/format,png" alt="image-20200731193109826"></p>
<p>é¡¹ç›®è¿è¡Œç»“æœ</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTM0MjUwOTAucG5n?x-oss-process=image/format,png" alt="image-20200731193425090"></p>
<ol>
<li>proæµ‹è¯•ç¯å¢ƒ</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">server.port=8082</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTQ0NTU1MTAucG5n?x-oss-process=image/format,png" alt="image-20200731194455510"></p>
<p>é¡¹ç›®è¿è¡Œç»“æœ</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTQ1NTkyOTAucG5n?x-oss-process=image/format,png" alt="image-20200731194559290"></p>
<h2 id="6ã€é…ç½®APIåˆ†ç»„"><a href="#6ã€é…ç½®APIåˆ†ç»„" class="headerlink" title="6ã€é…ç½®APIåˆ†ç»„"></a>6ã€é…ç½®APIåˆ†ç»„</h2><ol>
<li>å¦‚æœæ²¡æœ‰é…ç½®åˆ†ç»„ï¼Œé»˜è®¤æ˜¯defaultã€‚é€šè¿‡<strong>groupName</strong>()æ–¹æ³•å³å¯é…ç½®åˆ†ç»„ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo())</span><br><span class="line">      .groupName(<span class="string">&quot;ç‹‚ç¥&quot;</span>) <span class="comment">// é…ç½®åˆ†ç»„</span></span><br><span class="line">       <span class="comment">// çœç•¥é…ç½®....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>é‡å¯é¡¹ç›®æŸ¥çœ‹åˆ†ç»„</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTUzNTQ3MTQucG5n?x-oss-process=image/format,png" alt="image-20200731195354714"></p>
<ol>
<li>å¦‚ä½•é…ç½®å¤šä¸ªåˆ†ç»„ï¼Ÿ<strong>é…ç½®å¤šä¸ªåˆ†ç»„åªéœ€è¦é…ç½®å¤šä¸ªdocketå³å¯ï¼š</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket1</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;group1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket2</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;group2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket3</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;group3&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>é‡å¯é¡¹ç›®æŸ¥çœ‹å³å¯</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzExOTU1NDMxMDIucG5n?x-oss-process=image/format,png" alt="image-20200731195543102"></p>
<h2 id="7ã€å®ä½“é…ç½®"><a href="#7ã€å®ä½“é…ç½®" class="headerlink" title="7ã€å®ä½“é…ç½®"></a>7ã€å®ä½“é…ç½®</h2><ol>
<li>æ–°å»ºä¸€ä¸ªå®ä½“ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@Api(&quot;æ³¨é‡Š&quot;)</span></span><br><span class="line"><span class="meta">@ApiModel(&quot;ç”¨æˆ·å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>åªè¦è¿™ä¸ªå®ä½“åœ¨<strong>è¯·æ±‚æ¥å£</strong>çš„è¿”å›å€¼ä¸Šï¼ˆå³ä½¿æ˜¯æ³›å‹ï¼‰ï¼Œéƒ½èƒ½æ˜ å°„åˆ°å®ä½“é¡¹ä¸­ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//   /erroré»˜è®¤é”™è¯¯è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åªè¦æˆ‘ä»¬çš„æ¥å£ä¸­ï¼Œè¿”å›å€¼ä¸­å­˜åœ¨å®ä½“ç±»ï¼Œä»–å°±ä¼šè¢«æ‰«æåˆ°Swaggerä¸­</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>é‡å¯æŸ¥çœ‹æµ‹è¯•</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDA0MTM3MjUucG5n?x-oss-process=image/format,png" alt="image-20200731200413725"></p>
<p>æ³¨ï¼šå¹¶ä¸æ˜¯å› ä¸º**@ApiModel<strong>è¿™ä¸ªæ³¨è§£è®©å®ä½“æ˜¾ç¤ºåœ¨è¿™é‡Œäº†ï¼Œè€Œæ˜¯åªè¦å‡ºç°åœ¨æ¥å£æ–¹æ³•çš„</strong>è¿”å›å€¼<strong>ä¸Šçš„å®ä½“éƒ½ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œ</strong>è€Œ@ApiModelå’Œ@ApiModelPropertyè¿™ä¸¤ä¸ªæ³¨è§£åªæ˜¯ä¸ºå®ä½“æ·»åŠ æ³¨é‡Šçš„ã€‚**</p>
<ul>
<li>@ApiModelä¸ºç±»æ·»åŠ æ³¨é‡Š</li>
<li>@ApiModelPropertyä¸ºç±»å±æ€§æ·»åŠ æ³¨é‡Š</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡Swaggerç»™ä¸€äº›æ¯”è¾ƒéš¾ç†è§£çš„æ¥å£æˆ–è€…å±æ€§ï¼Œå¢åŠ æ³¨é‡Šä¿¡æ¯</li>
<li>æ¥å£æ–‡æ¡£å®æ—¶æ›´æ–°</li>
<li>å¯ä»¥åœ¨çº¿æµ‹è¯•</li>
</ul>
<p>Swaggeræ˜¯ä¸€ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œå‡ ä¹æ‰€æœ‰å¤§å…¬å¸éƒ½æœ‰ä½¿ç”¨å®ƒ</p>
<p>ã€æ³¨æ„ç‚¹ã€‘ï¼šåœ¨æ­£å¼å‘å¸ƒçš„æ—¶å€™ï¼Œ<strong>å…³é—­Swagger</strong>ï¼ï¼ï¼</p>
<ul>
<li>å‡ºäºå®‰å…¨è€ƒè™‘</li>
<li>è€Œä¸”èŠ‚çœå†…å­˜</li>
</ul>
<h2 id="8ã€å¸¸ç”¨æ³¨è§£"><a href="#8ã€å¸¸ç”¨æ³¨è§£" class="headerlink" title="8ã€å¸¸ç”¨æ³¨è§£"></a>8ã€å¸¸ç”¨æ³¨è§£</h2><p>Swaggerçš„æ‰€æœ‰æ³¨è§£å®šä¹‰åœ¨io.swagger.annotationsåŒ…ä¸‹</p>
<p>ä¸‹é¢åˆ—ä¸€äº›ç»å¸¸ç”¨åˆ°çš„ï¼Œæœªåˆ—ä¸¾å‡ºæ¥çš„å¯ä»¥å¦è¡ŒæŸ¥é˜…è¯´æ˜ï¼š</p>
<p><a href="https://imgtu.com/i/4hXRLq"><img src="https://z3.ax1x.com/2021/09/29/4hXRLq.png" alt="4hXRLq.png"></a></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è¯·æ±‚çš„æ¥å£é…ç½®ä¸€äº›æ³¨é‡Š</p>
<ol>
<li>åœ¨HelloControlleræ§åˆ¶ç±»ä¸­çš„æ¥å£æ·»åŠ apiæ¥å£æ³¨é‡Š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="meta">@ApiOperation(&quot;Helloæ§åˆ¶æ¥å£&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello2</span><span class="params">(<span class="meta">@ApiParam(&quot;ç”¨æˆ·å&quot;)</span> String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span> + username;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiOperation(&quot;getæµ‹è¯•&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">hello2</span><span class="params">(<span class="meta">@ApiParam(&quot;ç”¨æˆ·&quot;)</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDE3NTUwMDEucG5n?x-oss-process=image/format,png" alt="image-20200731201755001"></p>
<ol>
<li>è¿›è¡Œtry it outæµ‹è¯•</li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDI5NTgyNTUucG5n?x-oss-process=image/format,png" alt="image-20200731202958255"></p>
<p>æµ‹è¯•ç»“æœ</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDMwMzQ3MDIucG5n?x-oss-process=image/format,png" alt="image-20200731203034702"></p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ol>
<li>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ç»™ä¸€äº›æ¯”è¾ƒéš¾ç†è§£çš„å±æ€§æˆ–è€…æ¥å£ï¼Œå¢åŠ ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè®©äººæ›´å®¹æ˜“é˜…è¯»ï¼</li>
<li>ç›¸è¾ƒäºä¼ ç»Ÿçš„Postmanæˆ–Curlæ–¹å¼æµ‹è¯•æ¥å£ï¼Œä½¿ç”¨swaggerç®€ç›´å°±æ˜¯å‚»ç“œå¼æ“ä½œï¼Œä¸éœ€è¦é¢å¤–è¯´æ˜æ–‡æ¡£(å†™å¾—å¥½æœ¬èº«å°±æ˜¯æ–‡æ¡£)è€Œä¸”æ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œåªéœ€è¦å½•å…¥æ•°æ®ç„¶åç‚¹å‡»Executeï¼Œå¦‚æœå†é…åˆè‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œå¯ä»¥è¯´åŸºæœ¬å°±ä¸éœ€è¦äººä¸ºæ“ä½œäº†ã€‚</li>
<li>Swaggeræ˜¯ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œç°åœ¨å›½å†…å·²ç»æœ‰å¾ˆå¤šçš„ä¸­å°å‹äº’è”ç½‘å…¬å¸éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„è¦å…ˆå‡ºWordæ¥å£æ–‡æ¡£å†æµ‹è¯•çš„æ–¹å¼ï¼Œæ˜¾ç„¶è¿™æ ·ä¹Ÿæ›´ç¬¦åˆç°åœ¨çš„å¿«é€Ÿè¿­ä»£å¼€å‘è¡Œæƒ…ã€‚å½“ç„¶äº†ï¼Œæé†’ä¸‹å¤§å®¶åœ¨æ­£å¼ç¯å¢ƒè¦è®°å¾—å…³é—­Swaggerï¼Œä¸€æ¥å‡ºäºå®‰å…¨è€ƒè™‘äºŒæ¥ä¹Ÿå¯ä»¥èŠ‚çœè¿è¡Œæ—¶å†…å­˜ã€‚</li>
</ol>
<h2 id="9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤"><a href="#9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤" class="headerlink" title="9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤"></a>9ã€æ‹“å±•ï¼šå…¶ä»–çš®è‚¤</h2><p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥ä¸åŒçš„åŒ…å®ç°ä¸åŒçš„çš®è‚¤å®šä¹‰ï¼š</p>
<p>1ã€é»˜è®¤çš„ <strong>è®¿é—® <a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt; </span><br><span class="line">   &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;<span class="number">2.9</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDQ5Mjk4NTQucG5n?x-oss-process=image/format,png" alt="image-20200731204929854"></p>
<p>2ã€<strong>bootstrap-ui è®¿é—® <a href="http://localhost:8080/doc.html">http://localhost:8080/doc.html</a></strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥swagger-bootstrap-uiåŒ… /doc.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-bootstrap-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDU1NTA4NDUucG5n?x-oss-process=image/format,png" alt="image-20200731205550845"></p>
<p><strong>3ã€Layui-ui è®¿é—® <a href="http://localhost:8080/docs.html">http://localhost:8080/docs.html</a></strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥swagger-ui-layeråŒ… /docs.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.caspar-chen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-ui-layer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æˆ‘è¿™ä¸ªæµ‹è¯•æ²¡æˆåŠŸ(Layui-ui)</li>
</ul>
<p><strong>4ã€mg-ui è®¿é—® <a href="http://localhost:8080/document.html">http://localhost:8080/document.html</a></strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥swagger-ui-layeråŒ… /document.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zyplayer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-mg-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbHpoX2dpdGVlL3NwcmluZ2Jvb3RfaW1hZ2UvcmF3L21hc3Rlci9pbWcvaW1hZ2UtMjAyMDA3MzEyMDU3MjM5MTQucG5n?x-oss-process=image/format,png" alt="image-20200731205723914"></p>
]]></content>
      <categories>
        <category>Swagger</category>
      </categories>
      <tags>
        <tag>Swagger</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç¬”è®°</title>
    <url>/2022/07/13/Linux%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="1ã€æ¦‚è¿°åŠç¯å¢ƒæ­å»º"><a href="#1ã€æ¦‚è¿°åŠç¯å¢ƒæ­å»º" class="headerlink" title="1ã€æ¦‚è¿°åŠç¯å¢ƒæ­å»º"></a><strong>1ã€æ¦‚è¿°åŠç¯å¢ƒæ­å»º</strong></h2><h3 id="1-1å…¥é—¨æ¦‚è¿°"><a href="#1-1å…¥é—¨æ¦‚è¿°" class="headerlink" title="1.1å…¥é—¨æ¦‚è¿°"></a>1.1å…¥é—¨æ¦‚è¿°</h3><blockquote>
<p>1ï¼‰<strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ Linux</strong></p>
</blockquote>
<p> Linuxè¯ç”Ÿäº†è¿™ä¹ˆå¤šå¹´ï¼Œä»¥å‰è¿˜å–Šç€å¦‚ä½•èƒ½å–ä»£windowsç³»ç»Ÿï¼Œç°åœ¨è¿™ä¸ªå£å·å·²ç»å°å¤šäº†ï¼Œä»»ä½•äº‹ç‰©å‘å±•éƒ½æœ‰å…¶å±€é™æ€§éƒ½æœ‰å…¶å¤©èŠ±æ¿ã€‚å°±å¦‚åŒåœ¨å›½å†…å†æä¸€ä¸ªç¤¾äº¤è½¯ä»¶å–ä»£è…¾è®¯ä¸€æ ·ï¼Œæƒ³æƒ³è€Œå·²åŸºæœ¬ä¸å¯èƒ½ï¼Œå› ä¸ºç”¨æˆ·å·²ç»ä¹ æƒ¯äºä½¿ç”¨å¾®ä¿¡äº¤æµï¼Œä¸æ˜¯è¯´æŠ€æœ¯ä¸Šå®ç°ä¸äº†è§£è€Œæ˜¯è€ç™¾å§“å·²ç»ä¹ æƒ¯äº†ï¼Œæƒ³è®©ä»–ä»¬ä¸ç”¨ï¼Œå³ä½¿ä»–ä»¬è‡ªå·±ä¸ç”¨äº²æˆšæœ‹å‹è¿˜æ˜¯è¦ç”¨ï¼Œæ²¡æœ‰åŠæ³•çš„äº‹æƒ…ã€‚</p>
<p> ç”¨ä¹ æƒ¯äº†windowsæ“ä½œç³»ç»Ÿï¼Œå†è®©å¤§å®¶åˆ‡æ¢åˆ°åˆ«çš„æ“ä½œç³»ç»ŸåŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½çš„äº‹æƒ…ï¼Œæ”¹å˜ä¸€ä¸ªäººå·²ç»å…»æˆçš„ä¹ æƒ¯å¤ªéš¾ã€‚æ²¡æœ‰åŠæ³•æ·±å…¥åˆ°æ™®é€šè€ç™¾å§“çš„ç”Ÿæ´»ä¸­ï¼Œå¹¶ä¸æ„å‘³ç€Linuxå°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚<strong>åœ¨æœåŠ¡å™¨ç«¯ï¼Œåœ¨å¼€å‘é¢†åŸŸLinuxå€’æ˜¯è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œ</strong>å¾ˆå¤šç¨‹åºå‘˜éƒ½è§‰å¾—ä¸æ‡‚ç‚¹Linuxéƒ½è§‰å¾—ä¸å¥½æ„æ€ï¼ŒLinuxåœ¨å¼€æºç¤¾åŒºçš„åœ°ä½ä¾ç„¶å²¿ç„¶ä¸åŠ¨ã€‚</p>
<p> å°¤å…¶æ˜¯ä½œä¸ºä¸€ä¸ªåç«¯ç¨‹åºå‘˜ï¼Œæ˜¯å¿…é¡»è¦æŒæ¡Linuxçš„ï¼Œå› ä¸ºè¿™éƒ½æˆä¸ºäº†ä½ æ‰¾å·¥ä½œçš„åŸºç¡€é—¨æ§›äº†ï¼Œæ‰€ä»¥ä¸å¾—ä¸å­¦ä¹ ï¼</p>
<blockquote>
<p><strong>2ï¼‰Linux ç®€ä»‹</strong></p>
</blockquote>
<p>Linux å†…æ ¸æœ€åˆåªæ˜¯ç”±èŠ¬å…°äººæ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼ˆLinus Torvaldsï¼‰åœ¨èµ«å°”è¾›åŸºå¤§å­¦ä¸Šå­¦æ—¶å‡ºäºä¸ªäººçˆ±å¥½è€Œç¼–å†™çš„ã€‚</p>
<p>Linux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäº POSIXï¼ˆå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼‰ å’Œ UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚</p>
<p>Linux èƒ½è¿è¡Œä¸»è¦çš„ UNIX å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ 32 ä½å’Œ 64 ä½ç¡¬ä»¶ã€‚Linux ç»§æ‰¿äº† Unix ä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚</p>
<blockquote>
<p><strong>3ï¼‰Linux å‘è¡Œç‰ˆ</strong></p>
</blockquote>
<p>Linux çš„å‘è¡Œç‰ˆè¯´ç®€å•ç‚¹å°±æ˜¯å°† Linux å†…æ ¸ä¸åº”ç”¨è½¯ä»¶åšä¸€ä¸ªæ‰“åŒ…ã€‚</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TERraHJEbDRIOVRxWmh3eWVOU2VhTkl5QzV0Ym93ZmxIeVJJVFBLdmdBeVNmM0FaSmliRVVUclNvM2Z6Um04NVZEZkluWjJvbGtJZ2cvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>ç›®å‰å¸‚é¢ä¸Šè¾ƒçŸ¥åçš„å‘è¡Œç‰ˆæœ‰ï¼šUbuntuã€RedHatã€CentOSã€Debianã€Fedoraã€SuSEã€OpenSUSEã€Arch Linuxã€SolusOS ç­‰ã€‚</p>
<blockquote>
<p><strong>4ï¼‰ Linux åº”ç”¨é¢†åŸŸ</strong></p>
</blockquote>
<p> ä»Šå¤©å„ç§åœºåˆéƒ½æœ‰ä½¿ç”¨å„ç§ Linux å‘è¡Œç‰ˆï¼Œä»åµŒå…¥å¼è®¾å¤‡åˆ°è¶…çº§è®¡ç®—æœºï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨é¢†åŸŸç¡®å®šäº†åœ°ä½ï¼Œé€šå¸¸æœåŠ¡å™¨ä½¿ç”¨ ä¸¤ç§ç»„åˆæ–¹å¼ï¼š</p>
<ul>
<li><strong>LAMP</strong>ï¼ˆLinux + Apache + MySQL + PHPï¼‰</li>
<li><strong>LNMP</strong>ï¼ˆLinux + Nginx+ MySQL + PHPï¼‰</li>
</ul>
<p>ç›®å‰ Linux ä¸ä»…åœ¨å®¶åº­ä¸ä¼ä¸šä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨æ”¿åºœä¸­ä¹Ÿå¾ˆå—æ¬¢è¿ã€‚</p>
<ul>
<li>å·´è¥¿è”é‚¦æ”¿åºœç”±äºæ”¯æŒ Linux è€Œä¸–ç•Œé—»åã€‚</li>
<li>æœ‰æ–°é—»æŠ¥é“ä¿„ç½—æ–¯å†›é˜Ÿè‡ªå·±åˆ¶é€ çš„ Linux å‘å¸ƒç‰ˆçš„ï¼Œåšä¸º G.H.ost é¡¹ç›®å·²ç»å–å¾—æˆæœã€‚</li>
<li>å°åº¦çš„ Kerala è”é‚¦è®¡åˆ’åœ¨å‘å…¨è”é‚¦çš„é«˜ä¸­æ¨å¹¿ä½¿ç”¨ Linuxã€‚</li>
<li>ä¸­åäººæ°‘å…±å’Œå›½ä¸ºå–å¾—æŠ€æœ¯ç‹¬ç«‹ï¼Œåœ¨é¾™èŠ¯å¤„ç†å™¨ä¸­æ’ä»–æ€§åœ°ä½¿ç”¨ Linuxã€‚</li>
<li>åœ¨è¥¿ç­ç‰™çš„ä¸€äº›åœ°åŒºå¼€å‘äº†è‡ªå·±çš„ Linux å‘å¸ƒç‰ˆï¼Œå¹¶ä¸”åœ¨æ”¿åºœä¸æ•™è‚²é¢†åŸŸå¹¿æ³›ä½¿ç”¨ï¼Œå¦‚ Extremadura åœ°åŒºçš„ gnuLinEx å’Œ Andalusia åœ°åŒºçš„ Guadalinexã€‚</li>
<li>è‘¡è„ç‰™åŒæ ·ä½¿ç”¨è‡ªå·±çš„ Linux å‘å¸ƒç‰ˆ Caixa MÃ¡gicaï¼Œç”¨äº Magalh?es ç¬”è®°æœ¬ç”µè„‘å’Œ e-escola æ”¿åºœè½¯ä»¶ã€‚</li>
<li>æ³•å›½å’Œå¾·å›½åŒæ ·å¼€å§‹é€æ­¥é‡‡ç”¨ Linuxã€‚</li>
</ul>
<blockquote>
<p><strong>5ï¼‰Linux vs Windows</strong></p>
</blockquote>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TERraHJEbDRIOVRxWmh3eWVOU2VhTjJza3V5TEFlaWFsdFRRRkVEUTVGZDZiUFd4MmdXVmRXNlNsSHBqVjUzdVR5c1ZPTG5rOTZkZVEvNjQw?x-oss-process=image/format,png" alt="img"></p>
<h3 id="1-2-ç¯å¢ƒæ­å»º"><a href="#1-2-ç¯å¢ƒæ­å»º" class="headerlink" title="1.2 ç¯å¢ƒæ­å»º"></a>1.2 ç¯å¢ƒæ­å»º</h3><p>Linux çš„å®‰è£…ï¼Œå®‰è£…æ­¥éª¤æ¯”è¾ƒç¹çï¼Œç°åœ¨å…¶å®äº‘æœåŠ¡å™¨æŒºæ™®éçš„ï¼Œä»·æ ¼ä¹Ÿä¾¿å®œï¼Œå¦‚æœç›´æ¥ä¸æƒ³æ­å»ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¹°ä¸€å°å­¦ä¹ ç”¨ç”¨ï¼</p>
<blockquote>
<p><strong>1ï¼‰å®‰è£…CentOSï¼ˆè™šæ‹Ÿæœºå®‰è£…ï¼Œè€—èµ„æºï¼‰</strong></p>
</blockquote>
<ul>
<li>å¯ä»¥é€šè¿‡é•œåƒè¿›è¡Œå®‰è£…ï¼</li>
<li>å¯ä»¥ä½¿ç”¨æˆ‘å·²ç»åˆ¶ä½œå¥½çš„é•œåƒï¼è§†é¢‘ä¸­è®²è§£äº†è¯¥ç§æ–¹å¼ï¼</li>
<li>å®‰è£… VMware è™šæ‹Ÿæœºè½¯ä»¶ï¼Œç„¶åæ‰“å¼€æˆ‘ä»¬çš„é•œåƒå³å¯ä½¿ç”¨ï¼</li>
</ul>
<blockquote>
<p><strong>2ï¼‰è´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆæ¨èï¼‰</strong></p>
</blockquote>
<p>è™šæ‹Ÿæœºå®‰è£…åå ç”¨ç©ºé—´ï¼Œä¹Ÿä¼šæœ‰äº›å¡é¡¿ï¼Œæˆ‘ä»¬ä½œä¸ºç¨‹åºå‘˜å…¶å®å¯ä»¥é€‰æ‹©è´­ä¹°ä¸€å°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œè¿™æ ·çš„è¯æ›´åŠ æ¥è¿‘çœŸå®çº¿ä¸Šå·¥ä½œï¼›</p>
<p>1ã€é˜¿é‡Œäº‘è´­ä¹°æœåŠ¡å™¨ï¼š<a href="https://www.aliyun.com/minisite/goods?userCode=0phtycgr">https://www.aliyun.com/minisite/goods?userCode=0phtycgr</a></p>
<p>2ã€è´­ä¹°å®Œæ¯•åï¼Œè·å–æœåŠ¡å™¨çš„ipåœ°å€ï¼Œé‡ç½®æœåŠ¡å™¨å¯†ç ï¼Œå°±å¯ä»¥è¿œç¨‹ç™»å½•äº†</p>
<p>3ã€ä¸‹è½½ xShell å·¥å…·ï¼Œè¿›è¡Œè¿œç¨‹è¿æ¥ä½¿ç”¨ï¼è¿æ¥æˆåŠŸæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TERraHJEbDRIOVRxWmh3eWVOU2VhTkJ2Y29uZDZadHVlRDRxb1k1ZHpHcGRvZ1NkOUFnY2lidk45SHFpY3gwUExJdUN5Q2VESXJyM0ZBLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<p>å¦‚æœè¦æ‰“å¼€ç«¯å£ï¼Œéœ€è¦åœ¨é˜¿é‡Œäº‘çš„å®‰å…¨ç»„é¢æ¿ä¸­å¼€å¯å¯¹åº”çš„å‡ºå…¥è§„åˆ™ï¼Œä¸ç„¶çš„è¯ä¼šè¢«é˜¿é‡Œæ‹¦æˆªï¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¦‚æœå‰æœŸä¸å¥½æ“ä½œï¼Œå¯ä»¥æ¨èå®‰è£…å®å¡”é¢æ¿ï¼Œå‚»ç“œå¼ç®¡ç†æœåŠ¡å™¨</span><br></pre></td></tr></table></figure>

<p>å®‰è£…æ•™ç¨‹ï¼š<a href="https://www.bt.cn/bbs/thread-19376-1-1.html">https://www.bt.cn/bbs/thread-19376-1-1.html</a></p>
<p>1ã€å¼€å¯å¯¹åº”çš„ç«¯å£</p>
<p>2ã€ä¸€é”®å®‰è£…</p>
<p>3ã€å®‰è£…å®Œæ¯•åä¼šå¾—åˆ°è¿œç¨‹é¢æ¿çš„åœ°å€ï¼Œè´¦å·ï¼Œå¯†ç ï¼Œå°±å¯ä»¥ç™»å½•äº†</p>
<p>4ã€ç™»å½•ä¹‹åå°±å¯ä»¥å¯è§†åŒ–çš„å®‰è£…ç¯å¢ƒå’Œéƒ¨ç½²ç½‘ç«™ï¼</p>
<h3 id="1-3-èµ°è¿‘Linuxç³»ç»Ÿ"><a href="#1-3-èµ°è¿‘Linuxç³»ç»Ÿ" class="headerlink" title="1.3 èµ°è¿‘Linuxç³»ç»Ÿ"></a>1.3 èµ°è¿‘Linuxç³»ç»Ÿ</h3><blockquote>
<p><strong>1ï¼‰å¼€æœºç™»å½•</strong></p>
</blockquote>
<p>å¼€æœºä¼šå¯åŠ¨è®¸å¤šç¨‹åºã€‚å®ƒä»¬åœ¨Windowså«åšâ€æœåŠ¡â€ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åšâ€<strong>å®ˆæŠ¤è¿›ç¨‹</strong>â€œï¼ˆdaemonï¼‰ã€‚</p>
<p>å¼€æœºæˆåŠŸåï¼Œå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬ç™»å½•ç•Œé¢ï¼Œè¿™ä¸ªç•Œé¢å°±æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ç™»å½•ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç™»å½•ç•Œé¢ä¸­ä¼šæç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·åï¼Œè€Œç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å°†ä½œä¸ºå‚æ•°ä¼ ç»™loginç¨‹åºæ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¯†ç æ˜¯ä¸æ˜¾ç¤ºçš„ï¼Œè¾“å®Œå›è½¦å³å¯ï¼</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>å‘½ä»¤è¡Œç™»å½•</li>
<li>sshç™»å½•</li>
<li>å›¾å½¢ç•Œé¢ç™»å½•</li>
</ul>
<p>æœ€é«˜æƒé™è´¦æˆ·ä¸º <strong>root</strong>ï¼Œå¯ä»¥æ“ä½œä¸€åˆ‡ï¼</p>
<blockquote>
<p><strong>2ï¼‰å…³æœº</strong></p>
</blockquote>
<p>åœ¨linuxé¢†åŸŸå†…å¤§å¤šç”¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¾ˆå°‘é‡åˆ°å…³æœºçš„æ“ä½œã€‚æ¯•ç«ŸæœåŠ¡å™¨ä¸Šè·‘ä¸€ä¸ªæœåŠ¡æ˜¯æ°¸æ— æ­¢å¢ƒçš„ï¼Œé™¤éç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¸å¾—å·²æ‰ä¼šå…³æœºã€‚</p>
<p>å…³æœºæŒ‡ä»¤ä¸ºï¼š<strong>shutdown</strong> ï¼›</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">sync # å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚</span><br><span class="line"> </span><br><span class="line">shutdown # å…³æœºæŒ‡ä»¤ï¼Œä½ å¯ä»¥man shutdown æ¥çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡æ¡£ã€‚ä¾‹å¦‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å…³æœºï¼š</span><br><span class="line"> </span><br><span class="line">shutdown â€“h <span class="number">10</span> # è¿™ä¸ªå‘½ä»¤å‘Šè¯‰å¤§å®¶ï¼Œè®¡ç®—æœºå°†åœ¨<span class="number">10</span>åˆ†é’Ÿåå…³æœº</span><br><span class="line"> </span><br><span class="line">shutdown â€“h now # ç«‹é©¬å…³æœº</span><br><span class="line"> </span><br><span class="line">shutdown â€“h <span class="number">20</span>:<span class="number">25</span> # ç³»ç»Ÿä¼šåœ¨ä»Šå¤©<span class="number">20</span>:<span class="number">25</span>å…³æœº</span><br><span class="line"> </span><br><span class="line">shutdown â€“h +<span class="number">10</span> # ååˆ†é’Ÿåå…³æœº</span><br><span class="line"> </span><br><span class="line">shutdown â€“r now # ç³»ç»Ÿç«‹é©¬é‡å¯</span><br><span class="line"> </span><br><span class="line">shutdown â€“r +<span class="number">10</span> # ç³»ç»Ÿååˆ†é’Ÿåé‡å¯</span><br><span class="line"> </span><br><span class="line">reboot # å°±æ˜¯é‡å¯ï¼Œç­‰åŒäº shutdown â€“r now</span><br><span class="line"> </span><br><span class="line">halt # å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown â€“h now å’Œ poweroff</span><br></pre></td></tr></table></figure>

<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œä¸ç®¡æ˜¯é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œ <strong>sync</strong> å‘½ä»¤ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­ã€‚</p>
<p><strong>3ï¼‰ç³»ç»Ÿç›®å½•ç»“æ„</strong></p>
<p>ç™»å½•ç³»ç»Ÿåï¼Œåœ¨å½“å‰å‘½ä»¤çª—å£ä¸‹è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">ls</span> <span class="string">/</span></span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TERraHJEbDRIOVRxWmh3eWVOU2VhTlN2cXBBcFprclFOQ1FGaFZoeVBvUGR0RlRpYlJCRXNzSWo2RW1pYXBnRVR2SzJiclZoZmxpYVJSZy82NDA?x-oss-process=image/format,png" alt="img"></p>
<p>æ ‘çŠ¶ç›®å½•ç»“æ„ï¼šï¼ˆLinuxçš„ä¸€åˆ‡èµ„æºéƒ½æŒ‚è½½åœ¨è¿™ä¸ª / æ ¹èŠ‚ç‚¹ä¸‹ï¼‰</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TERraHJEbDRIOVRxWmh3eWVOU2VhTmliUVlXMnhiUUlMMzhsckNDU1BFekZLSmhDaWF1MEZ2UU1GU2EzN05ReFRUYmJvM1BycGpKaWM1Zy82NDA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>ä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç›®å½•çš„è§£é‡Šï¼š</strong></p>
<ul>
<li>/binï¼šbinæ˜¯Binaryçš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚</li>
<li>/bootï¼š è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚</li>
<li>/dev ï¼š devæ˜¯Device(è®¾å¤‡)çš„ç¼©å†™, å­˜æ”¾çš„æ˜¯Linuxçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨Linuxä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚</li>
<li>/etcï¼š è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚</li>
<li>/homeï¼šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ã€‚</li>
<li>/libï¼šè¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºWindowsé‡Œçš„DLLæ–‡ä»¶ã€‚</li>
<li>/lost+foundï¼šè¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚</li>
<li>/mediaï¼šlinuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼Œlinuxä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</li>
<li>/mntï¼šç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨/mnt/ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚</li>
<li>/optï¼šè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“åˆ™å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚</li>
<li>/procï¼šè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚</li>
<li>/rootï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚</li>
<li>/sbinï¼šså°±æ˜¯Super Userçš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚</li>
<li>/srvï¼šè¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚</li>
<li>/sysï¼šè¿™æ˜¯linux2.6å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs ã€‚</li>
<li>/tmpï¼šè¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚</li>
<li>/usrï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºwindowsä¸‹çš„program filesç›®å½•ã€‚</li>
<li>/usr/binï¼š ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>/usr/sbinï¼š è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚</li>
<li>/usr/srcï¼š å†…æ ¸æºä»£ç é»˜è®¤çš„æ”¾ç½®ç›®å½•ã€‚</li>
<li>/varï¼šè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚</li>
<li>/runï¼šæ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ã€‚å½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚</li>
</ul>
<p>åé¢çš„è¯ï¼Œæˆ‘ä»¬å°±å¼€å§‹å­¦ä¹ ä¸€äº›åŸºæœ¬çš„Linuxå‘½ä»¤ï¼å¿«é€Ÿä¸Šæ‰‹ï¼</p>
<h3 id="1-4-å®‰å…¨ç»„é…ç½®"><a href="#1-4-å®‰å…¨ç»„é…ç½®" class="headerlink" title="1.4 å®‰å…¨ç»„é…ç½®"></a>1.4 å®‰å…¨ç»„é…ç½®</h3><p><a href="https://imgtu.com/i/47a0Bt"><img src="https://z3.ax1x.com/2021/10/01/47a0Bt.png" alt="47a0Bt.png"></a></p>
<p><a href="https://imgtu.com/i/47aLv9"><img src="https://z3.ax1x.com/2021/10/01/47aLv9.png" alt="47aLv9.png"></a></p>
<p><a href="https://imgtu.com/i/47dp4O"><img src="https://z3.ax1x.com/2021/10/01/47dp4O.png" alt="47dp4O.png"></a></p>
<p><strong>ä½ æ‰‹åŠ¨æ·»åŠ è¿˜æ˜¯å¿«é€Ÿæ·»åŠ éƒ½è¡Œï¼Œåˆ°è¿™ä¸€æ­¥è¿˜ä¸ä¼šå°±æ¬ç –å»å§</strong></p>
<h2 id="2ã€å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆå¿…æŒæ¡ï¼‰"><a href="#2ã€å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆå¿…æŒæ¡ï¼‰" class="headerlink" title="2ã€å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆå¿…æŒæ¡ï¼‰"></a>2ã€å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆå¿…æŒæ¡ï¼‰</h2><h3 id="2-1-ç›®å½•ç®¡ç†"><a href="#2-1-ç›®å½•ç®¡ç†" class="headerlink" title="2.1 ç›®å½•ç®¡ç†"></a>2.1 ç›®å½•ç®¡ç†</h3><blockquote>
<p><strong>1ï¼‰ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„</strong></p>
</blockquote>
<p>æˆ‘ä»¬çŸ¥é“Linuxçš„ç›®å½•ç»“æ„ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œæœ€é¡¶çº§çš„ç›®å½•ä¸ºæ ¹ç›®å½• /ã€‚</p>
<p>å…¶ä»–ç›®å½•é€šè¿‡æŒ‚è½½å¯ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°æ ‘ä¸­ï¼Œé€šè¿‡è§£é™¤æŒ‚è½½å¯ä»¥ç§»é™¤å®ƒä»¬ã€‚</p>
<p>åœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“ä»€ä¹ˆæ˜¯ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„ã€‚</p>
<p><strong>ç»å¯¹è·¯å¾„ï¼š</strong></p>
<p>è·¯å¾„çš„å†™æ³•ï¼Œç”±æ ¹ç›®å½• / å†™èµ·ï¼Œä¾‹å¦‚ï¼š/usr/share/doc è¿™ä¸ªç›®å½•ã€‚</p>
<p><strong>ç›¸å¯¹è·¯å¾„ï¼š</strong></p>
<p>è·¯å¾„çš„å†™æ³•ï¼Œä¸æ˜¯ç”± / å†™èµ·ï¼Œä¾‹å¦‚ç”± /usr/share/doc è¦åˆ° /usr/share/man åº•ä¸‹æ—¶ï¼Œå¯ä»¥å†™æˆï¼šcd â€¦/man è¿™å°±æ˜¯ç›¸å¯¹è·¯å¾„çš„å†™æ³•å•¦ï¼</p>
<blockquote>
<p><strong>2ï¼‰å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤</strong></p>
</blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹å‡ ä¸ªå¸¸è§çš„å¤„ç†ç›®å½•çš„å‘½ä»¤å§ï¼š</p>
<ul>
<li><strong>ls</strong>: åˆ—å‡ºç›®å½•</li>
<li><strong>cd</strong>ï¼šåˆ‡æ¢ç›®å½•</li>
<li><strong>pwd</strong>ï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•</li>
<li><strong>mkdir</strong>ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•</li>
<li><strong>rmdir</strong>ï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•</li>
<li><strong>cp</strong>: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</li>
<li><strong>rm</strong>: ç§»é™¤æ–‡ä»¶æˆ–ç›®å½•</li>
<li><strong>mv</strong>: ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§°</li>
</ul>
<p>ä½ å¯ä»¥ä½¿ç”¨ man [å‘½ä»¤] æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚</p>
<blockquote>
<p><strong>3ï¼‰ls ï¼ˆåˆ—å‡ºç›®å½•ï¼‰</strong></p>
</blockquote>
<p>åœ¨Linuxç³»ç»Ÿå½“ä¸­ï¼Œ ls å‘½ä»¤å¯èƒ½æ˜¯æœ€å¸¸è¢«è¿è¡Œçš„ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">root@www ~</span>]<span class="meta"># ls [-aAdfFhilnrRSt] ç›®å½•åç§°</span></span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li><strong>-a</strong> ï¼šå…¨éƒ¨çš„æ–‡ä»¶ï¼Œè¿åŒéšè—æ–‡ä»¶( å¼€å¤´ä¸º . çš„æ–‡ä»¶) ä¸€èµ·åˆ—å‡ºæ¥(å¸¸ç”¨)</li>
<li><strong>-l</strong> ï¼šé•¿æ•°æ®ä¸²åˆ—å‡ºï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™ç­‰ç­‰æ•°æ®ï¼›(å¸¸ç”¨)</li>
</ul>
<p>å°†ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ—å‡ºæ¥(å«å±æ€§ä¸éšè—æ¡£)</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">root@www ~</span>]<span class="meta"># ls -al ~</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>4ï¼‰ cd ï¼ˆåˆ‡æ¢ç›®å½•ï¼‰</strong></p>
</blockquote>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># åˆ‡æ¢åˆ°ç”¨æˆ·ç›®å½•ä¸‹</span><br><span class="line">[root@kuangshen /]# <span class="built_in">cd</span> home  </span><br><span class="line"> </span><br><span class="line"># ä½¿ç”¨ <span class="built_in">mkdir</span> å‘½ä»¤åˆ›å»º kuangstudy ç›®å½•</span><br><span class="line">[root@kuangshen home]# <span class="built_in">mkdir</span> kuangstudy</span><br><span class="line"> </span><br><span class="line"># è¿›å…¥ kuangstudy ç›®å½•</span><br><span class="line">[root@kuangshen home]# <span class="built_in">cd</span> kuangstudy</span><br><span class="line"> </span><br><span class="line"># å›åˆ°ä¸Šä¸€çº§</span><br><span class="line">[root@kuangshen kuangstudy]# <span class="built_in">cd</span> ..</span><br><span class="line"> </span><br><span class="line"># å›åˆ°æ ¹ç›®å½•</span><br><span class="line">[root@kuangshen kuangstudy]# <span class="built_in">cd</span> /</span><br><span class="line"> </span><br><span class="line"># è¡¨ç¤ºå›åˆ°è‡ªå·±çš„å®¶ç›®å½•ï¼Œäº¦å³æ˜¯ /root è¿™ä¸ªç›®å½•</span><br><span class="line">[root@kuangshen kuangstudy]# <span class="built_in">cd</span> ~</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥å¤§å®¶å¤šæ“ä½œå‡ æ¬¡åº”è¯¥å°±å¯ä»¥å¾ˆå¥½çš„ç†è§£ cd å‘½ä»¤çš„ã€‚</p>
<blockquote>
<p><strong>5ï¼‰pwd ( æ˜¾ç¤ºç›®å‰æ‰€åœ¨çš„ç›®å½• )</strong></p>
</blockquote>
<p>pwd æ˜¯ <strong>Print Working Directory</strong> çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºç›®å‰æ‰€åœ¨ç›®å½•çš„å‘½ä»¤ã€‚</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-attr">[root@kuangshen kuangstudy]</span><span class="selector-id">#pwd</span> <span class="selector-attr">[-P]</span></span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š**-P** ï¼šæ˜¾ç¤ºå‡ºç¡®å®çš„è·¯å¾„ï¼Œè€Œéä½¿ç”¨è¿æ¥(link) è·¯å¾„ã€‚</p>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># å•çº¯æ˜¾ç¤ºå‡ºç›®å‰çš„å·¥ä½œç›®å½•</span><br><span class="line">[root@kuangshen ~]# pwd</span><br><span class="line">/root</span><br><span class="line"> </span><br><span class="line"># å¦‚æœæ˜¯é“¾æ¥ï¼Œè¦æ˜¾ç¤ºçœŸå®åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ -På‚æ•°</span><br><span class="line">[root@kuangshen /]# <span class="built_in">cd</span> bin</span><br><span class="line">[root@kuangshen bin]# pwd -P</span><br><span class="line">/usr/bin</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>6ï¼‰mkdir ï¼ˆåˆ›å»ºæ–°ç›®å½•ï¼‰</strong></p>
</blockquote>
<p>å¦‚æœæƒ³è¦åˆ›å»ºæ–°çš„ç›®å½•çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨mkdir (make directory)å§ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [-mp] ç›®å½•åç§°</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-m ï¼šé…ç½®æ–‡ä»¶çš„æƒé™å–”ï¼ç›´æ¥é…ç½®ï¼Œä¸éœ€è¦çœ‹é»˜è®¤æƒé™ (umask) çš„è„¸è‰²ï½</li>
<li>-p ï¼šå¸®åŠ©ä½ ç›´æ¥å°†æ‰€éœ€è¦çš„ç›®å½•(åŒ…å«ä¸Šä¸€çº§ç›®å½•)é€’å½’åˆ›å»ºèµ·æ¥ï¼</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># è¿›å…¥æˆ‘ä»¬ç”¨æˆ·ç›®å½•ä¸‹</span><br><span class="line">[root@kuangshen /]# <span class="built_in">cd</span> /home</span><br><span class="line"> </span><br><span class="line"># åˆ›å»ºä¸€ä¸ª test æ–‡ä»¶å¤¹</span><br><span class="line">[root@kuangshen home]# <span class="built_in">mkdir</span> test</span><br><span class="line"> </span><br><span class="line"># åˆ›å»ºå¤šå±‚çº§ç›®å½•</span><br><span class="line">[root@kuangshen home]# <span class="built_in">mkdir</span> test1/test2/test3/test4</span><br><span class="line"><span class="function">mkdir: <span class="title">cannot</span> <span class="title">create</span> <span class="title">directory</span> â€˜<span class="title">test1</span>/<span class="title">test2</span>/<span class="title">test3</span>/<span class="title">test4</span>â€™:</span></span><br><span class="line"><span class="function"><span class="title">No</span> <span class="title">such</span> <span class="title">file</span> <span class="title">or</span> <span class="title">directory</span>  # &lt;== æ²¡åŠæ³•ç›´æ¥åˆ›å»ºæ­¤ç›®å½•å•Šï¼</span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"># åŠ äº†è¿™ä¸ª -<span class="title">p</span> çš„é€‰é¡¹ï¼Œå¯ä»¥è‡ªè¡Œå¸®ä½ åˆ›å»ºå¤šå±‚ç›®å½•ï¼</span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">kuangshen</span> <span class="title">home</span>]# <span class="title">mkdir</span> -<span class="title">p</span> <span class="title">test1</span>/<span class="title">test2</span>/<span class="title">test3</span>/<span class="title">test4</span></span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"># åˆ›å»ºæƒé™ä¸º <span class="title">rwx</span>--<span class="title">x</span>--<span class="title">x</span> çš„ç›®å½•ã€‚</span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">kuangshen</span> <span class="title">home</span>]# <span class="title">mkdir</span> -<span class="title">m</span> 711 <span class="title">test2</span></span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">kuangshen</span> <span class="title">home</span>]# <span class="title">ls</span> -<span class="title">l</span></span></span><br><span class="line"><span class="function"><span class="title">drwxr</span>-<span class="title">xr</span>-<span class="title">x</span> 2 <span class="title">root</span>  <span class="title">root</span>  4096 <span class="title">Mar</span> 12 21:55 <span class="title">test</span></span></span><br><span class="line"><span class="function"><span class="title">drwxr</span>-<span class="title">xr</span>-<span class="title">x</span> 3 <span class="title">root</span>  <span class="title">root</span>  4096 <span class="title">Mar</span> 12 21:56 <span class="title">test1</span></span></span><br><span class="line"><span class="function"><span class="title">drwx</span>--<span class="title">x</span>--<span class="title">x</span> 2 <span class="title">root</span>  <span class="title">root</span>  4096 <span class="title">Mar</span> 12 21:58 <span class="title">test2</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>7ï¼‰rmdir ( åˆ é™¤ç©ºçš„ç›®å½• )</strong></p>
</blockquote>
<p>é€‰é¡¹ä¸å‚æ•°ï¼š**-p ï¼š**è¿åŒä¸Šä¸€çº§ã€ç©ºçš„ã€ç›®å½•ä¹Ÿä¸€èµ·åˆ é™¤</p>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># çœ‹çœ‹æœ‰å¤šå°‘ç›®å½•å­˜åœ¨ï¼Ÿ</span><br><span class="line">[root@kuangshen home]# ls -l</span><br><span class="line">drwxr-xr-x <span class="number">2</span> root  root  <span class="number">4096</span> Mar <span class="number">12</span> <span class="number">21</span>:<span class="number">55</span> test</span><br><span class="line">drwxr-xr-x <span class="number">3</span> root  root  <span class="number">4096</span> Mar <span class="number">12</span> <span class="number">21</span>:<span class="number">56</span> test1</span><br><span class="line">drwx--x--x <span class="number">2</span> root  root  <span class="number">4096</span> Mar <span class="number">12</span> <span class="number">21</span>:<span class="number">58</span> test2</span><br><span class="line"> </span><br><span class="line"># å¯ç›´æ¥åˆ é™¤æ‰ï¼Œæ²¡é—®é¢˜</span><br><span class="line">[root@kuangshen home]# <span class="built_in">rmdir</span> test</span><br><span class="line"> </span><br><span class="line"># å› ä¸ºå°šæœ‰å†…å®¹ï¼Œæ‰€ä»¥æ— æ³•åˆ é™¤ï¼</span><br><span class="line">[root@kuangshen home]# <span class="built_in">rmdir</span> test1</span><br><span class="line"><span class="function">rmdir: <span class="title">failed</span> <span class="title">to</span> <span class="title">remove</span> â€˜<span class="title">test1</span>â€™: <span class="title">Directory</span> <span class="title">not</span> <span class="title">empty</span></span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"># åˆ©ç”¨ -<span class="title">p</span> è¿™ä¸ªé€‰é¡¹ï¼Œç«‹åˆ»å°±å¯ä»¥å°† <span class="title">test1</span>/<span class="title">test2</span>/<span class="title">test3</span>/<span class="title">test4</span> ä¾æ¬¡åˆ é™¤ã€‚</span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">kuangshen</span> <span class="title">home</span>]# <span class="title">rmdir</span> -<span class="title">p</span> <span class="title">test1</span>/<span class="title">test2</span>/<span class="title">test3</span>/<span class="title">test4</span></span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šè¿™ä¸ª rmdir ä»…èƒ½åˆ é™¤ç©ºçš„ç›®å½•ï¼Œä½ å¯ä»¥ä½¿ç”¨ rm å‘½ä»¤æ¥åˆ é™¤éç©ºç›®å½•ï¼Œåé¢æˆ‘ä»¬ä¼šå°†ï¼</p>
<blockquote>
<p><strong>8ï¼‰cp ( å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• )</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@www ~]# cp [-adfilprsu] æ¥æºæ¡£(source) ç›®æ ‡æ¡£(destination)</span><br><span class="line">[root@www ~]# cp [options] source1 source2 source3 .... directory</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-aï¼šç›¸å½“æ–¼ -pdr çš„æ„æ€ï¼Œè‡³æ–¼ pdr è¯·å‚è€ƒä¸‹åˆ—è¯´æ˜ï¼›(å¸¸ç”¨)</li>
<li>-pï¼šè¿åŒæ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶è¿‡å»ï¼Œè€Œéä½¿ç”¨é»˜è®¤å±æ€§(å¤‡ä»½å¸¸ç”¨)ï¼›</li>
<li>-dï¼šè‹¥æ¥æºæ¡£ä¸ºè¿ç»“æ¡£çš„å±æ€§(link file)ï¼Œåˆ™å¤åˆ¶è¿ç»“æ¡£å±æ€§è€Œéæ–‡ä»¶æœ¬èº«ï¼›</li>
<li>-rï¼šé€’å½’æŒç»­å¤åˆ¶ï¼Œç”¨æ–¼ç›®å½•çš„å¤åˆ¶è¡Œä¸ºï¼›(å¸¸ç”¨)</li>
<li>-fï¼šä¸ºå¼ºåˆ¶(force)çš„æ„æ€ï¼Œè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ä¸”æ— æ³•å¼€å¯ï¼Œåˆ™ç§»é™¤åå†å°è¯•ä¸€æ¬¡ï¼›</li>
<li>-iï¼šè‹¥ç›®æ ‡æ¡£(destination)å·²ç»å­˜åœ¨æ—¶ï¼Œåœ¨è¦†ç›–æ—¶ä¼šå…ˆè¯¢é—®åŠ¨ä½œçš„è¿›è¡Œ(å¸¸ç”¨)</li>
<li>-lï¼šè¿›è¡Œç¡¬å¼è¿ç»“(hard link)çš„è¿ç»“æ¡£åˆ›å»ºï¼Œè€Œéå¤åˆ¶æ–‡ä»¶æœ¬èº«ã€‚</li>
<li>-sï¼šå¤åˆ¶æˆä¸ºç¬¦å·è¿ç»“æ¡£ (symbolic link)ï¼Œäº¦å³ã€æ·å¾„ã€æ–‡ä»¶ï¼›</li>
<li>-uï¼šè‹¥ destination æ¯” source æ—§æ‰å‡çº§ destination ï¼</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># æ‰¾ä¸€ä¸ªæœ‰æ–‡ä»¶çš„ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ‰¾åˆ° rootç›®å½•</span><br><span class="line">[root@kuangshen home]# <span class="built_in">cd</span> /root</span><br><span class="line">[root@kuangshen ~]# ls</span><br><span class="line">install.sh</span><br><span class="line">[root@kuangshen ~]# <span class="built_in">cd</span> /home</span><br><span class="line"> </span><br><span class="line"># å¤åˆ¶ rootç›®å½•ä¸‹çš„install.sh åˆ° homeç›®å½•ä¸‹</span><br><span class="line">[root@kuangshen home]# cp /root/install.sh /home</span><br><span class="line">[root@kuangshen home]# ls</span><br><span class="line">install.sh</span><br><span class="line"> </span><br><span class="line"># å†æ¬¡å¤åˆ¶ï¼ŒåŠ ä¸Š-iå‚æ•°ï¼Œå¢åŠ è¦†ç›–è¯¢é—®ï¼Ÿ</span><br><span class="line">[root@kuangshen home]# cp -i /root/install.sh /home</span><br><span class="line"><span class="function">cp: <span class="title">overwrite</span> â€˜/<span class="title">home</span>/<span class="title">install.sh</span>â€™? <span class="title">y</span> # <span class="title">n</span>ä¸è¦†ç›–ï¼Œ<span class="title">y</span>ä¸ºè¦†ç›–</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>9ï¼‰rm ( ç§»é™¤æ–‡ä»¶æˆ–ç›®å½• )</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> [-fir] æ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li><strong>-f</strong> ï¼šå°±æ˜¯ force çš„æ„æ€ï¼Œå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ä¼šå‡ºç°è­¦å‘Šä¿¡æ¯ï¼›</li>
<li><strong>-i</strong> ï¼šäº’åŠ¨æ¨¡å¼ï¼Œåœ¨åˆ é™¤å‰ä¼šè¯¢é—®ä½¿ç”¨è€…æ˜¯å¦åŠ¨ä½œ</li>
<li><strong>-r ï¼šé€’å½’åˆ é™¤å•Šï¼</strong>æœ€å¸¸ç”¨åœ¨ç›®å½•çš„åˆ é™¤äº†ï¼è¿™æ˜¯éå¸¸å±é™©çš„é€‰é¡¹ï¼ï¼ï¼</li>
</ul>
<blockquote>
<p><strong>10ï¼‰mv ( ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹åç§° )</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@www ~]# mv [-fiu] source destination</span><br><span class="line">[root@www ~]# mv [options] source1 source2 source3 .... directory</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-f ï¼šforce å¼ºåˆ¶çš„æ„æ€ï¼Œå¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›–ï¼›</li>
<li>-i ï¼šè‹¥ç›®æ ‡æ–‡ä»¶ (destination) å·²ç»å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¯¢é—®æ˜¯å¦è¦†ç›–ï¼</li>
<li>-u ï¼šè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸” source æ¯”è¾ƒæ–°ï¼Œæ‰ä¼šå‡çº§ (update)</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°å½“å‰ç›®å½•</span><br><span class="line">[root@kuangshen home]# cp /root/install.sh /home</span><br><span class="line"> </span><br><span class="line"># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ test</span><br><span class="line">[root@kuangshen home]# <span class="built_in">mkdir</span> test</span><br><span class="line"> </span><br><span class="line"># å°†å¤åˆ¶è¿‡æ¥çš„æ–‡ä»¶ç§»åŠ¨åˆ°æˆ‘ä»¬åˆ›å»ºçš„ç›®å½•ï¼Œå¹¶æŸ¥çœ‹</span><br><span class="line">[root@kuangshen home]# mv install.sh test</span><br><span class="line">[root@kuangshen home]# ls</span><br><span class="line">test</span><br><span class="line">[root@kuangshen home]# <span class="built_in">cd</span> test</span><br><span class="line">[root@kuangshen test]# ls</span><br><span class="line">install.sh</span><br><span class="line"> </span><br><span class="line"># å°†æ–‡ä»¶å¤¹é‡å‘½åï¼Œç„¶åå†æ¬¡æŸ¥çœ‹ï¼</span><br><span class="line">[root@kuangshen test]# <span class="built_in">cd</span> ..</span><br><span class="line">[root@kuangshen home]# mv test mvtest</span><br><span class="line">[root@kuangshen home]# ls</span><br><span class="line">mvtest</span><br></pre></td></tr></table></figure>

<h3 id="2-2-åŸºæœ¬å±æ€§"><a href="#2-2-åŸºæœ¬å±æ€§" class="headerlink" title="2.2 åŸºæœ¬å±æ€§"></a>2.2 åŸºæœ¬å±æ€§</h3><blockquote>
<p><strong>1ï¼‰çœ‹æ‡‚æ–‡ä»¶å±æ€§</strong></p>
</blockquote>
<p>Linuxç³»ç»Ÿæ˜¯ä¸€ç§å…¸å‹çš„å¤šç”¨æˆ·ç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·å¤„äºä¸åŒçš„åœ°ä½ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ã€‚ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒLinuxç³»ç»Ÿå¯¹ä¸åŒçš„ç”¨æˆ·è®¿é—®åŒä¸€æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•æ–‡ä»¶ï¼‰çš„æƒé™åšäº†ä¸åŒçš„è§„å®šã€‚</p>
<p>åœ¨Linuxä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨llæˆ–è€…ls â€“lå‘½ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·å’Œç»„ï¼Œå¦‚ï¼š<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkdwZUlTNGo5cTNCNExRaHNRa0ZpYXVYQVFOMHFPblZDWXZqN0NtMW9RYnZleFZERnFQaFVJZVRlODNCZEFIbFhDSmhHb05hYlNGS1EvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>å®ä¾‹ä¸­ï¼Œbootæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå±æ€§ç”¨â€dâ€è¡¨ç¤ºã€‚â€dâ€åœ¨Linuxä¸­ä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ã€‚</p>
<p>åœ¨Linuxä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨è¿™ä¸ªæ–‡ä»¶æ˜¯ç›®å½•ã€æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶ç­‰ç­‰ï¼š</p>
<ul>
<li>å½“ä¸º[ d ]åˆ™æ˜¯ç›®å½•</li>
<li>å½“ä¸º[ - ]åˆ™æ˜¯æ–‡ä»¶ï¼›</li>
<li>è‹¥æ˜¯[ l ]åˆ™è¡¨ç¤ºä¸ºé“¾æ¥æ–‡æ¡£ ( link file )ï¼›</li>
<li>è‹¥æ˜¯[ b ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æ¥å£è®¾å¤‡ ( å¯éšæœºå­˜å–è£…ç½® )ï¼›</li>
<li>è‹¥æ˜¯[ c ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡ ( ä¸€æ¬¡æ€§è¯»å–è£…ç½® )ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ï¼Œä»¥ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡ä¸ºã€rwxã€ çš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆã€‚</p>
<p>å…¶ä¸­ï¼Œ[ r ]ä»£è¡¨å¯è¯»(read)ã€[ w ]ä»£è¡¨å¯å†™(write)ã€[ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute)ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªæƒé™çš„ä½ç½®ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºç°å‡å·[ - ]è€Œå·²ã€‚</p>
<p>æ¯ä¸ªæ–‡ä»¶çš„å±æ€§ç”±å·¦è¾¹ç¬¬ä¸€éƒ¨åˆ†çš„10ä¸ªå­—ç¬¦æ¥ç¡®å®šï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkdwZUlTNGo5cTNCNExRaHNRa0ZpYXVFeWJ6RzJYSWRsT01MeU8xM2xNZlBLVVdScEdKR2d5eENBSjltaWNzOWRUWjFxcldESXZsZVlRLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p>ä»å·¦è‡³å³ç”¨0-9è¿™äº›æ•°å­—æ¥è¡¨ç¤ºã€‚</p>
<p>ç¬¬0ä½ç¡®å®šæ–‡ä»¶ç±»å‹ï¼Œç¬¬1-3ä½ç¡®å®šå±ä¸»ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚ç¬¬4-6ä½ç¡®å®šå±ç»„ï¼ˆæ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œç¬¬7-9ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚</p>
<p>å…¶ä¸­ï¼š</p>
<p>ç¬¬1ã€4ã€7ä½è¡¨ç¤ºè¯»æƒé™ï¼Œå¦‚æœç”¨â€râ€å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰è¯»æƒé™ï¼Œå¦‚æœç”¨â€-â€œå­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æ²¡æœ‰è¯»æƒé™ï¼›</p>
<p>ç¬¬2ã€5ã€8ä½è¡¨ç¤ºå†™æƒé™ï¼Œå¦‚æœç”¨â€wâ€å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰å†™æƒé™ï¼Œå¦‚æœç”¨â€-â€œå­—ç¬¦è¡¨ç¤ºæ²¡æœ‰å†™æƒé™ï¼›</p>
<p>ç¬¬3ã€6ã€9ä½è¡¨ç¤ºå¯æ‰§è¡Œæƒé™ï¼Œå¦‚æœç”¨â€xâ€å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰æ‰§è¡Œæƒé™ï¼Œå¦‚æœç”¨â€-â€œå­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æ²¡æœ‰æ‰§è¡Œæƒé™ã€‚</p>
<p>å¯¹äºæ–‡ä»¶æ¥è¯´ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„æ‰€æœ‰è€…ï¼Œä¹Ÿå°±æ˜¯å¯¹è¯¥æ–‡ä»¶å…·æœ‰æ‰€æœ‰æƒçš„ç”¨æˆ·ã€‚</p>
<p>åŒæ—¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œç”¨æˆ·æ˜¯æŒ‰ç»„åˆ†ç±»çš„ï¼Œä¸€ä¸ªç”¨æˆ·å±äºä¸€ä¸ªæˆ–å¤šä¸ªç»„ã€‚</p>
<p>æ–‡ä»¶æ‰€æœ‰è€…ä»¥å¤–çš„ç”¨æˆ·åˆå¯ä»¥åˆ†ä¸ºæ–‡ä»¶æ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·ã€‚</p>
<p>å› æ­¤ï¼ŒLinuxç³»ç»ŸæŒ‰æ–‡ä»¶æ‰€æœ‰è€…ã€æ–‡ä»¶æ‰€æœ‰è€…åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·æ¥è§„å®šäº†ä¸åŒçš„æ–‡ä»¶è®¿é—®æƒé™ã€‚</p>
<p>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œboot æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œå±ä¸»å’Œå±ç»„éƒ½ä¸º rootã€‚</p>
<blockquote>
<p><strong>2ï¼‰ä¿®æ”¹æ–‡ä»¶å±æ€§</strong></p>
</blockquote>
<p><strong>1. chgrpï¼šæ›´æ”¹æ–‡ä»¶å±ç»„</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> [-R] å±ç»„å æ–‡ä»¶å</span><br></pre></td></tr></table></figure>

<p>-Rï¼šé€’å½’æ›´æ”¹æ–‡ä»¶å±ç»„ï¼Œå°±æ˜¯åœ¨æ›´æ”¹æŸä¸ªç›®å½•æ–‡ä»¶çš„å±ç»„æ—¶ï¼Œå¦‚æœåŠ ä¸Š-Rçš„å‚æ•°ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å±ç»„éƒ½ä¼šæ›´æ”¹ã€‚</p>
<p><strong>2.chownï¼šæ›´æ”¹æ–‡ä»¶å±ä¸»ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chown</span> [â€“R] å±ä¸»å æ–‡ä»¶å</span><br><span class="line"><span class="built_in">chown</span> [-R] å±ä¸»åï¼šå±ç»„å æ–‡ä»¶å</span><br></pre></td></tr></table></figure>

<p><strong>3. chmodï¼šæ›´æ”¹æ–‡ä»¶9ä¸ªå±æ€§</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [-R] xyz æ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure>

<p><strong>Linuxæ–‡ä»¶å±æ€§æœ‰ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼Œä¸€ç§æ˜¯æ•°å­—ï¼Œä¸€ç§æ˜¯ç¬¦å·ã€‚</strong></p>
<p>Linuxæ–‡ä»¶çš„åŸºæœ¬æƒé™å°±æœ‰ä¹ä¸ªï¼Œåˆ†åˆ«æ˜¯owner/group/othersä¸‰ç§èº«ä»½å„æœ‰è‡ªå·±çš„<strong>read/write/execute</strong>æƒé™ã€‚</p>
<p>å…ˆå¤ä¹ ä¸€ä¸‹åˆšåˆšä¸Šé¢æåˆ°çš„æ•°æ®ï¼šæ–‡ä»¶çš„æƒé™å­—ç¬¦ä¸ºï¼šã€-rwxrwxrwxã€ï¼Œ è¿™ä¹ä¸ªæƒé™æ˜¯ä¸‰ä¸ªä¸‰ä¸ªä¸€ç»„çš„ï¼å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—æ¥ä»£è¡¨å„ä¸ªæƒé™ï¼Œå„æƒé™çš„åˆ†æ•°å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">r:4      w:2         x:1</span></span><br></pre></td></tr></table></figure>

<p>æ¯ç§èº«ä»½(owner/group/others)å„è‡ªçš„ä¸‰ä¸ªæƒé™(r/w/x)åˆ†æ•°æ˜¯éœ€è¦ç´¯åŠ çš„ï¼Œä¾‹å¦‚å½“æƒé™ä¸ºï¼š[-rwxrwxâ€”] åˆ†æ•°åˆ™æ˜¯ï¼š</p>
<ul>
<li>owner = rwx = 4+2+1 = 7</li>
<li>group = rwx = 4+2+1 = 7</li>
<li>others= â€” = 0+0+0 = 0</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">chmod</span> <span class="number">770</span> <span class="string">filename</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥è‡ªå·±ä¸‹å»å¤šè¿›è¡Œæµ‹è¯•ï¼</p>
<h3 id="2-3-æ–‡ä»¶å†…å®¹æŸ¥çœ‹"><a href="#2-3-æ–‡ä»¶å†…å®¹æŸ¥çœ‹" class="headerlink" title="2.3 æ–‡ä»¶å†…å®¹æŸ¥çœ‹"></a>2.3 æ–‡ä»¶å†…å®¹æŸ¥çœ‹</h3><blockquote>
<p><strong>1ï¼‰æ¦‚è¿°</strong></p>
</blockquote>
<p>Linuxç³»ç»Ÿä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼š</p>
<ul>
<li><strong>cat</strong> ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li>
<li><strong>tac</strong> ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼</li>
<li><strong>nl</strong> æ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºé“è¾“å‡ºè¡Œå·ï¼</li>
<li><strong>more</strong> ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li>
<li><strong>less</strong> ä¸ <strong>more</strong> ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥å¾€å‰ç¿»é¡µï¼</li>
<li><strong>head</strong> åªçœ‹å¤´å‡ è¡Œ</li>
<li><strong>tail</strong> åªçœ‹å°¾å·´å‡ è¡Œ</li>
</ul>
<p>ä½ å¯ä»¥ä½¿ç”¨ man [å‘½ä»¤]æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚</p>
<blockquote>
<p><strong>2ï¼‰cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> [-AbEnTv</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-A ï¼šç›¸å½“æ–¼ -vET çš„æ•´åˆé€‰é¡¹ï¼Œå¯åˆ—å‡ºä¸€äº›ç‰¹æ®Šå­—ç¬¦è€Œä¸æ˜¯ç©ºç™½è€Œå·²ï¼›</li>
<li>-b ï¼šåˆ—å‡ºè¡Œå·ï¼Œä»…é’ˆå¯¹éç©ºç™½è¡Œåšè¡Œå·æ˜¾ç¤ºï¼Œç©ºç™½è¡Œä¸æ ‡è¡Œå·ï¼</li>
<li>-E ï¼šå°†ç»“å°¾çš„æ–­è¡Œå­—èŠ‚ $ æ˜¾ç¤ºå‡ºæ¥ï¼›</li>
<li>-n ï¼šåˆ—å°å‡ºè¡Œå·ï¼Œè¿åŒç©ºç™½è¡Œä¹Ÿä¼šæœ‰è¡Œå·ï¼Œä¸ -b çš„é€‰é¡¹ä¸åŒï¼›</li>
<li>-T ï¼šå°† [tab] æŒ‰é”®ä»¥ ^I æ˜¾ç¤ºå‡ºæ¥ï¼›</li>
<li>-v ï¼šåˆ—å‡ºä¸€äº›çœ‹ä¸å‡ºæ¥çš„ç‰¹æ®Šå­—ç¬¦</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># æŸ¥çœ‹ç½‘ç»œé…ç½®: æ–‡ä»¶åœ°å€ /etc/sysconfig/network-scripts/</span><br><span class="line">[root@kuangshen ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">ONBOOT=yes</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>3ï¼‰tac</strong></p>
</blockquote>
<p>tacä¸catå‘½ä»¤åˆšå¥½ç›¸åï¼Œæ–‡ä»¶å†…å®¹ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼å¦‚ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen ~]# tac /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">DEVICE=eth0</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>4ï¼‰nl æ˜¾ç¤ºè¡Œå·</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">nl</span> [-bnw] æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-b ï¼šæŒ‡å®šè¡Œå·æŒ‡å®šçš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š-b a ï¼šè¡¨ç¤ºä¸è®ºæ˜¯å¦ä¸ºç©ºè¡Œï¼Œä¹ŸåŒæ ·åˆ—å‡ºè¡Œå·(ç±»ä¼¼ cat -n)ï¼›-b t ï¼šå¦‚æœæœ‰ç©ºè¡Œï¼Œç©ºçš„é‚£ä¸€è¡Œä¸è¦åˆ—å‡ºè¡Œå·(é»˜è®¤å€¼)ï¼›</li>
<li>-n ï¼šåˆ—å‡ºè¡Œå·è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼š-n ln ï¼šè¡Œå·åœ¨è§å¹•çš„æœ€å·¦æ–¹æ˜¾ç¤ºï¼›-n rn ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”ä¸åŠ  0 ï¼›-n rz ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”åŠ  0 ï¼›</li>
<li>-w ï¼šè¡Œå·æ ä½çš„å ç”¨çš„ä½æ•°ã€‚</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen ~]# nl /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"><span class="number">1</span>   DEVICE=eth0</span><br><span class="line"><span class="number">2</span>   BOOTPROTO=dhcp</span><br><span class="line"><span class="number">3</span>   ONBOOT=yes</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>5ï¼‰ more ä¸€é¡µä¸€é¡µç¿»åŠ¨</strong></p>
</blockquote>
<p>åœ¨ more è¿™ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ æœ‰å‡ ä¸ªæŒ‰é”®å¯ä»¥æŒ‰çš„ï¼š</p>
<ul>
<li><p>ç©ºç™½é”® (space)ï¼šä»£è¡¨å‘ä¸‹ç¿»ä¸€é¡µï¼›</p>
</li>
<li><p>Enter ï¼šä»£è¡¨å‘ä¸‹ç¿»ã€ä¸€è¡Œã€ï¼›</p>
</li>
<li><p>/å­—ä¸² ï¼šä»£è¡¨åœ¨è¿™ä¸ªæ˜¾ç¤ºçš„å†…å®¹å½“ä¸­ï¼Œå‘ä¸‹æœå¯»ã€å­—ä¸²ã€è¿™ä¸ªå…³é”®å­—ï¼›</p>
</li>
<li><p>:f ï¼šç«‹åˆ»æ˜¾ç¤ºå‡ºæ¡£åä»¥åŠç›®å‰æ˜¾ç¤ºçš„è¡Œæ•°ï¼›</p>
</li>
<li><p>q ï¼šä»£è¡¨ç«‹åˆ»ç¦»å¼€ more ï¼Œä¸å†æ˜¾ç¤ºè¯¥æ–‡ä»¶å†…å®¹ã€‚</p>
</li>
<li><p>b æˆ– [ctrl]-b ï¼šä»£è¡¨å¾€å›ç¿»é¡µï¼Œä¸è¿‡è¿™åŠ¨ä½œåªå¯¹æ–‡ä»¶æœ‰ç”¨ï¼Œå¯¹ç®¡çº¿æ— ç”¨ã€‚</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen etc]# <span class="built_in">more</span> /etc/csh.login</span><br><span class="line">....(ä¸­é—´çœç•¥)....</span><br><span class="line">--<span class="built_in">More</span>--(<span class="number">28</span>%) # é‡ç‚¹åœ¨è¿™ä¸€è¡Œå–”ï¼ä½ çš„å…‰æ ‡ä¹Ÿä¼šåœ¨è¿™é‡Œç­‰å¾…ä½ çš„å‘½ä»¤</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p><strong>6ï¼‰less ä¸€é¡µä¸€é¡µç¿»åŠ¨ï¼Œä»¥ä¸‹å®ä¾‹è¾“å‡º/etc/man.configæ–‡ä»¶çš„å†…å®¹ï¼š</strong></p>
</blockquote>
<p>lessè¿è¡Œæ—¶å¯ä»¥è¾“å…¥çš„å‘½ä»¤æœ‰ï¼š</p>
<ul>
<li>ç©ºç™½é”® ï¼šå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼›</li>
<li>[pagedown]ï¼šå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼›</li>
<li>[pageup] ï¼šå‘ä¸Šç¿»åŠ¨ä¸€é¡µï¼›</li>
<li>/å­—ä¸² ï¼šå‘ä¸‹æœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼›</li>
<li>?å­—ä¸² ï¼šå‘ä¸Šæœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼›</li>
<li>n ï¼šé‡å¤å‰ä¸€ä¸ªæœå¯» (ä¸ / æˆ– ? æœ‰å…³ï¼)</li>
<li>N ï¼šåå‘çš„é‡å¤å‰ä¸€ä¸ªæœå¯» (ä¸ / æˆ– ? æœ‰å…³ï¼)</li>
<li>q ï¼šç¦»å¼€ less è¿™ä¸ªç¨‹åºï¼›</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen etc]# <span class="built_in">more</span> /etc/csh.login</span><br><span class="line">....(ä¸­é—´çœç•¥)....</span><br><span class="line">:   # è¿™é‡Œå¯ä»¥ç­‰å¾…ä½ è¾“å…¥å‘½ä»¤ï¼</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>7ï¼‰ head å–å‡ºæ–‡ä»¶å‰é¢å‡ è¡Œ</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">head</span> [-n number] æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š**-n** åé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€ï¼</p>
<p>é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºå‰é¢ 10 è¡Œï¼è‹¥è¦æ˜¾ç¤ºå‰ 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">root@kuangshen etc</span>]<span class="meta"># head -n 20 /etc/csh.login</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>8ï¼‰tail å–å‡ºæ–‡ä»¶åé¢å‡ è¡Œ</strong></p>
</blockquote>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">tail</span> [-n number] æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-n ï¼šåé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€</li>
</ul>
<p>é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºæœ€å 10 è¡Œï¼è‹¥è¦æ˜¾ç¤ºæœ€å 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">[<span class="meta">root@kuangshen etc</span>]<span class="meta"># tail -n 20 /etc/csh.login</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>9ï¼‰æ‹“å±•ï¼šLinux é“¾æ¥æ¦‚å¿µ</strong></p>
</blockquote>
<p>Linux é“¾æ¥åˆ†ä¸¤ç§ï¼Œä¸€ç§è¢«ç§°ä¸ºç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰ï¼Œå¦ä¸€ç§è¢«ç§°ä¸ºç¬¦å·é“¾æ¥ï¼ˆSymbolic Linkï¼‰ã€‚</p>
<p>æƒ…å†µä¸‹ï¼Œln å‘½ä»¤äº§ç”Ÿç¡¬é“¾æ¥ã€‚</p>
<p><strong>ç¡¬è¿æ¥</strong></p>
<p>ç¡¬è¿æ¥æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥è¿›è¡Œè¿æ¥ã€‚åœ¨ Linux çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºä¸­çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨ Linux ä¸­ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ç´¢å¼•èŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ã€‚æ¯”å¦‚ï¼šA æ˜¯ B çš„ç¡¬é“¾æ¥ï¼ˆA å’Œ B éƒ½æ˜¯æ–‡ä»¶åï¼‰ï¼Œåˆ™ A çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ä¸ B çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ç›¸åŒï¼Œå³ä¸€ä¸ª inode èŠ‚ç‚¹å¯¹åº”ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶åï¼Œä¸¤ä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼ŒA å’Œ B å¯¹æ–‡ä»¶ç³»ç»Ÿæ¥è¯´æ˜¯å®Œå…¨å¹³ç­‰çš„ã€‚åˆ é™¤å…¶ä¸­ä»»ä½•ä¸€ä¸ªéƒ½ä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªçš„è®¿é—®ã€‚</p>
<p>ç¡¬è¿æ¥çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆè·¯å¾„åï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å»ºç«‹ç¡¬è¿æ¥åˆ°é‡è¦æ–‡ä»¶ï¼Œä»¥é˜²æ­¢â€œè¯¯åˆ â€çš„åŠŸèƒ½ã€‚å…¶åŸå› å¦‚ä¸Šæ‰€è¿°ï¼Œå› ä¸ºå¯¹åº”è¯¥ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹æœ‰ä¸€ä¸ªä»¥ä¸Šçš„è¿æ¥ã€‚åªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚</p>
<p>è½¯è¿æ¥</p>
<p>å¦å¤–ä¸€ç§è¿æ¥ç§°ä¹‹ä¸ºç¬¦å·è¿æ¥ï¼ˆSymbolic Linkï¼‰ï¼Œä¹Ÿå«è½¯è¿æ¥ã€‚è½¯é“¾æ¥æ–‡ä»¶æœ‰ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ã€‚åœ¨ç¬¦å·è¿æ¥ä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„æœ‰å¦ä¸€æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚æ¯”å¦‚ï¼šA æ˜¯ B çš„è½¯é“¾æ¥ï¼ˆA å’Œ B éƒ½æ˜¯æ–‡ä»¶åï¼‰ï¼ŒA çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ä¸ B çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ä¸ç›¸åŒï¼ŒA å’Œ B æŒ‡å‘çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„ inodeï¼Œç»§è€ŒæŒ‡å‘ä¸¤å—ä¸åŒçš„æ•°æ®å—ã€‚ä½†æ˜¯ A çš„æ•°æ®å—ä¸­å­˜æ”¾çš„åªæ˜¯ B çš„è·¯å¾„åï¼ˆå¯ä»¥æ ¹æ®è¿™ä¸ªæ‰¾åˆ° B çš„ç›®å½•é¡¹ï¼‰ã€‚A å’Œ B ä¹‹é—´æ˜¯â€œä¸»ä»â€å…³ç³»ï¼Œå¦‚æœ B è¢«åˆ é™¤äº†ï¼ŒA ä»ç„¶å­˜åœ¨ï¼ˆå› ä¸ºä¸¤ä¸ªæ˜¯ä¸åŒçš„æ–‡ä»¶ï¼‰ï¼Œä½†æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ— æ•ˆçš„é“¾æ¥ã€‚</p>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen /]# <span class="built_in">cd</span> /home</span><br><span class="line">[root@kuangshen home]# touch f1  # åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶f1</span><br><span class="line">[root@kuangshen home]# ls</span><br><span class="line">f1</span><br><span class="line">[root@kuangshen home]# ln f1 f2      # åˆ›å»ºf1çš„ä¸€ä¸ªç¡¬è¿æ¥æ–‡ä»¶f2</span><br><span class="line">[root@kuangshen home]# ln -s f1 f3   # åˆ›å»ºf1çš„ä¸€ä¸ªç¬¦å·è¿æ¥æ–‡ä»¶f3</span><br><span class="line">[root@kuangshen home]# ls -li        # -iå‚æ•°æ˜¾ç¤ºæ–‡ä»¶çš„inodeèŠ‚ç‚¹ä¿¡æ¯</span><br><span class="line"><span class="number">397247</span> -rw-r--r-- <span class="number">2</span> root  root     <span class="number">0</span> Mar <span class="number">13</span> <span class="number">00</span>:<span class="number">50</span> f1</span><br><span class="line"><span class="number">397247</span> -rw-r--r-- <span class="number">2</span> root  root     <span class="number">0</span> Mar <span class="number">13</span> <span class="number">00</span>:<span class="number">50</span> f2</span><br><span class="line"><span class="number">397248</span> lrwxrwxrwx <span class="number">1</span> root  root     <span class="number">2</span> Mar <span class="number">13</span> <span class="number">00</span>:<span class="number">50</span> f3 -&gt; f1</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œç¡¬è¿æ¥æ–‡ä»¶ f2 ä¸åŸæ–‡ä»¶ f1 çš„ inode èŠ‚ç‚¹ç›¸åŒï¼Œå‡ä¸º 397247ï¼Œç„¶è€Œç¬¦å·è¿æ¥æ–‡ä»¶çš„ inode èŠ‚ç‚¹ä¸åŒã€‚</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># <span class="built_in">echo</span> å­—ç¬¦ä¸²è¾“å‡º  &gt;&gt; f1 è¾“å‡ºåˆ° f1æ–‡ä»¶</span><br><span class="line">[root@kuangshen home]# <span class="built_in">echo</span> &quot;I am f1 file&quot; &gt;&gt;f1</span><br><span class="line">[root@kuangshen home]# cat f1</span><br><span class="line">I am f1 file</span><br><span class="line">[root@kuangshen home]# cat f2</span><br><span class="line">I am f1 file</span><br><span class="line">[root@kuangshen home]# cat f3</span><br><span class="line">I am f1 file</span><br><span class="line">[root@kuangshen home]# rm -f f1</span><br><span class="line">[root@kuangshen home]# cat f2</span><br><span class="line">I am f1 file</span><br><span class="line">[root@kuangshen home]# cat f3</span><br><span class="line"><span class="function">cat: <span class="title">f3</span>: <span class="title">No</span> <span class="title">such</span> <span class="title">file</span> <span class="title">or</span> <span class="title">directory</span></span></span><br></pre></td></tr></table></figure>

<p><strong>é€šè¿‡ä¸Šé¢çš„æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼šå½“åˆ é™¤åŸå§‹æ–‡ä»¶ f1 åï¼Œç¡¬è¿æ¥ f2 ä¸å—å½±å“ï¼Œä½†æ˜¯ç¬¦å·è¿æ¥ f1 æ–‡ä»¶æ— æ•ˆï¼›</strong></p>
<p>ä¾æ­¤æ‚¨å¯ä»¥åšä¸€äº›ç›¸å…³çš„æµ‹è¯•ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹å…¨éƒ¨ç»“è®ºï¼š</p>
<ul>
<li>åˆ é™¤ç¬¦å·è¿æ¥f3,å¯¹f1,f2æ— å½±å“ï¼›</li>
<li>åˆ é™¤ç¡¬è¿æ¥f2ï¼Œå¯¹f1,f3ä¹Ÿæ— å½±å“ï¼›</li>
<li>åˆ é™¤åŸæ–‡ä»¶f1ï¼Œå¯¹ç¡¬è¿æ¥f2æ²¡æœ‰å½±å“ï¼Œå¯¼è‡´ç¬¦å·è¿æ¥f3å¤±æ•ˆï¼›</li>
<li>åŒæ—¶åˆ é™¤åŸæ–‡ä»¶f1,ç¡¬è¿æ¥f2ï¼Œæ•´ä¸ªæ–‡ä»¶ä¼šçœŸæ­£çš„è¢«åˆ é™¤ã€‚</li>
</ul>
<p>åé¢çš„è¯ï¼Œæˆ‘ä»¬å°±å¼€å§‹å­¦ä¹ Vimå’Œç”¨æˆ·ç£ç›˜ç›¸å…³çš„å‘½ä»¤ï¼ä»è€Œä¿®æ”¹é…ç½®ï¼</p>
<h3 id="2-4-Vimç¼–è¾‘å™¨"><a href="#2-4-Vimç¼–è¾‘å™¨" class="headerlink" title="2.4 Vimç¼–è¾‘å™¨"></a>2.4 Vimç¼–è¾‘å™¨</h3><blockquote>
<p><strong>1ï¼‰ä»€ä¹ˆæ˜¯Vimç¼–è¾‘å™¨</strong></p>
</blockquote>
<p>Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<p>ç®€å•çš„æ¥è¯´ï¼Œ vi æ˜¯è€å¼çš„å­—å¤„ç†å™¨ï¼Œä¸è¿‡åŠŸèƒ½å·²ç»å¾ˆé½å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¯ä»¥è¿›æ­¥çš„åœ°æ–¹ã€‚</p>
<p>vim åˆ™å¯ä»¥è¯´æ˜¯ç¨‹åºå¼€å‘è€…çš„ä¸€é¡¹å¾ˆå¥½ç”¨çš„å·¥å…·ã€‚</p>
<p>æ‰€æœ‰çš„ Unix Like ç³»ç»Ÿéƒ½ä¼šå†…å»º vi æ–‡ä¹¦ç¼–è¾‘å™¨ï¼Œå…¶ä»–çš„æ–‡ä¹¦ç¼–è¾‘å™¨åˆ™ä¸ä¸€å®šä¼šå­˜åœ¨ã€‚</p>
<p>è¿ vim çš„å®˜æ–¹ç½‘ç«™ (<a href="http://www.vim.org/">http://www.vim.org</a>) è‡ªå·±ä¹Ÿè¯´ vim æ˜¯ä¸€ä¸ªç¨‹åºå¼€å‘å·¥å…·è€Œä¸æ˜¯æ–‡å­—å¤„ç†è½¯ä»¶ã€‚</p>
<p>vim é”®ç›˜å›¾ï¼š<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TDFJNzJDMUhyd0o5Ykc2WEFiVmdnTTRSc1F1RWFvTUk3OGdyM2pHeGtWSDdPTld5REhtcmVtT0hpYVVpYmMzc3FQUmZFdVZ1SHFpY2ZxQS82NDA?x-oss-process=image/format,png" alt="img"></p>
<blockquote>
<p><strong>2) ä¸‰ç§ä½¿ç”¨æ¨¡å¼</strong></p>
</blockquote>
<p>åŸºæœ¬ä¸Š vi/vim å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰ï¼Œè¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰å’Œåº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰</strong>ã€‚è¿™ä¸‰ç§æ¨¡å¼çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p>
<p><strong>å‘½ä»¤æ¨¡å¼ï¼š</strong></p>
<p>ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi/vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ã€‚</p>
<p>æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶æŒ‰ä¸‹iï¼Œå¹¶ä¸ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œiè¢«å½“ä½œäº†ä¸€ä¸ªå‘½ä»¤ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ï¼š</p>
<ul>
<li>i åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œä»¥è¾“å…¥å­—ç¬¦ã€‚</li>
<li>x åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚</li>
<li>: åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œä»¥åœ¨æœ€åº•ä¸€è¡Œè¾“å…¥å‘½ä»¤ã€‚</li>
</ul>
<p>è‹¥æƒ³è¦ç¼–è¾‘æ–‡æœ¬ï¼š<strong>å¯åŠ¨Vim</strong>ï¼Œè¿›å…¥äº†å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰ä¸‹iï¼Œåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ã€‚</p>
<p>å‘½ä»¤æ¨¡å¼åªæœ‰ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå› æ­¤ä»è¦ä¾é åº•çº¿å‘½ä»¤æ¨¡å¼è¾“å…¥æ›´å¤šå‘½ä»¤ã€‚</p>
<p><strong>è¾“å…¥æ¨¡å¼ï¼š</strong></p>
<p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹iå°±è¿›å…¥äº†è¾“å…¥æ¨¡å¼ã€‚</p>
<p>åœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”®ï¼š</p>
<ul>
<li>å­—ç¬¦æŒ‰é”®ä»¥åŠShiftç»„åˆï¼Œè¾“å…¥å­—ç¬¦</li>
<li>ENTERï¼Œå›è½¦é”®ï¼Œæ¢è¡Œ</li>
<li>BACK SPACEï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦</li>
<li>DELï¼Œåˆ é™¤é”®ï¼Œåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦</li>
<li>æ–¹å‘é”®ï¼Œåœ¨æ–‡æœ¬ä¸­ç§»åŠ¨å…‰æ ‡</li>
<li>HOME/ENDï¼Œç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–/è¡Œå°¾</li>
<li>Page Up/Page Downï¼Œä¸Š/ä¸‹ç¿»é¡µ</li>
<li><strong>Insert</strong>ï¼Œåˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿</li>
<li><strong>ESC</strong>ï¼Œé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼</li>
</ul>
<p><strong>åº•çº¿å‘½ä»¤æ¨¡å¼</strong></p>
<p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹:ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</p>
<p>åº•çº¿å‘½ä»¤æ¨¡å¼å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼Œå¯ç”¨çš„å‘½ä»¤éå¸¸å¤šã€‚</p>
<p>åœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒåŸºæœ¬çš„å‘½ä»¤æœ‰ï¼ˆå·²ç»çœç•¥äº†å†’å·ï¼‰ï¼š</p>
<p><strong>q</strong> é€€å‡ºç¨‹åº</p>
<p><strong>w</strong> ä¿å­˜æ–‡ä»¶</p>
<p>æŒ‰ESCé”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</p>
<p>ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸‰ä¸ªæ¨¡å¼æƒ³æˆåº•ä¸‹çš„å›¾æ ‡æ¥è¡¨ç¤ºï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TDFJNzJDMUhyd0o5Ykc2WEFiVmdnTUl4Vm9EeVE0TFd4U2JIRGpBWWZIdUlkN3hmSEhpY2h0cVpLMmVoc1h2Y0M5S2lhaWJQZjY4czlkZy82NDA?x-oss-process=image/format,png" alt="img"></p>
<blockquote>
<p><strong>3) ä¸Šæ‰‹ä½“éªŒä¸€ä¸‹ï¼Œåœ¨homeç›®å½•ä¸‹æµ‹è¯•</strong></p>
</blockquote>
<p>å¦‚æœä½ æƒ³è¦ä½¿ç”¨ vi æ¥å»ºç«‹ä¸€ä¸ªåä¸º kuangstudy.txt çš„æ–‡ä»¶æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@kuangshen home]<span class="comment"># vim kuangstudy.txt</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±ä¼šè¿›å…¥æ–‡ä»¶</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TDFJNzJDMUhyd0o5Ykc2WEFiVmdnTTQ0NjFocXVzUmJRWjMyOTY3enFVaENocVhiQ3pKVE4zSTIwUnBpYVZiRnFXdkhpY3ZpY2M5aWNCVVEvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p><strong>æŒ‰ä¸‹ i è¿›å…¥è¾“å…¥æ¨¡å¼(ä¹Ÿç§°ä¸ºç¼–è¾‘æ¨¡å¼)ï¼Œå¼€å§‹ç¼–è¾‘æ–‡å­—</strong></p>
<p>åœ¨ä¸€èˆ¬æ¨¡å¼ä¹‹ä¸­ï¼Œåªè¦æŒ‰ä¸‹ <strong>i, o, a</strong> ç­‰å­—ç¬¦å°±å¯ä»¥è¿›å…¥è¾“å…¥æ¨¡å¼äº†ï¼</p>
<p>åœ¨ç¼–è¾‘æ¨¡å¼å½“ä¸­ï¼Œä½ å¯ä»¥å‘ç°åœ¨å·¦ä¸‹è§’çŠ¶æ€æ ä¸­ä¼šå‡ºç° â€“INSERT- çš„å­—æ ·ï¼Œé‚£å°±æ˜¯å¯ä»¥è¾“å…¥ä»»æ„å­—ç¬¦çš„æç¤ºã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œé”®ç›˜ä¸Šé™¤äº† <strong>Esc</strong> è¿™ä¸ªæŒ‰é”®ä¹‹å¤–ï¼Œå…¶ä»–çš„æŒ‰é”®éƒ½å¯ä»¥è§†ä½œä¸ºä¸€èˆ¬çš„è¾“å…¥æŒ‰é’®äº†ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿›è¡Œä»»ä½•çš„ç¼–è¾‘ã€‚</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TDFJNzJDMUhyd0o5Ykc2WEFiVmdnTUVhcklDdGtyOGlhMU42enFjdXYzUk9qMVRCRG9NaWNNNURvWXphR1UyOXFRMm1iUWhsQlViYnd3LzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>æŒ‰ä¸‹ ESC æŒ‰é’®å›åˆ°ä¸€èˆ¬æ¨¡å¼</strong></p>
<p>å¥½äº†ï¼Œå‡è®¾æˆ‘å·²ç»æŒ‰ç…§ä¸Šé¢çš„æ ·å¼ç»™ä»–ç¼–è¾‘å®Œæ¯•äº†ï¼Œé‚£ä¹ˆåº”è¯¥è¦å¦‚ä½•é€€å‡ºå‘¢ï¼Ÿæ˜¯çš„ï¼æ²¡é”™ï¼å°±æ˜¯ç»™ä»–æŒ‰ä¸‹ <strong>Esc</strong> è¿™ä¸ªæŒ‰é’®å³å¯ï¼é©¬ä¸Šä½ å°±ä¼šå‘ç°ç”»é¢å·¦ä¸‹è§’çš„ â€“ INSERT â€“ ä¸è§äº†ï¼</p>
<p>åœ¨ä¸€èˆ¬æ¨¡å¼ä¸­æŒ‰ä¸‹ <strong>:wq</strong> å‚¨å­˜åç¦»å¼€ vimï¼</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3TDFJNzJDMUhyd0o5Ykc2WEFiVmdnTWVBNUVvVlV0NGoyNTQ0b2liamRvZVJhaDA2czJBTGgxUURYd2VwNDFNajRabmhXeWI2aWNkcDB3LzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p>OK! è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ª kuangstudy.txt çš„æ–‡ä»¶ã€‚</p>
<blockquote>
<p><strong>4) Vim æŒ‰é”®è¯´æ˜</strong></p>
</blockquote>
<p>é™¤äº†ä¸Šé¢ç®€æ˜“èŒƒä¾‹çš„ i, Esc, :wq ä¹‹å¤–ï¼Œå…¶å® vim è¿˜æœ‰éå¸¸å¤šçš„æŒ‰é”®å¯ä»¥ä½¿ç”¨ã€‚</p>
<p><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼å¯ç”¨çš„å…‰æ ‡ç§»åŠ¨ã€å¤åˆ¶ç²˜è´´ã€æœç´¢æ›¿æ¢ç­‰</strong></p>
<table>
<thead>
<tr>
<th><strong>ç§»åŠ¨å…‰æ ‡çš„æ–¹æ³•</strong></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>h æˆ– å‘å·¦ç®­å¤´é”®(â†)</td>
<td>å…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>j æˆ– å‘ä¸‹ç®­å¤´é”®(â†“)</td>
<td>å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>k æˆ– å‘ä¸Šç®­å¤´é”®(â†‘)</td>
<td>å…‰æ ‡å‘ä¸Šç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>l æˆ– å‘å³ç®­å¤´é”®(â†’)</td>
<td>å…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[Ctrl] + [f]</td>
<td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Down]æŒ‰é”® (å¸¸ç”¨)</td>
</tr>
<tr>
<td>[Ctrl] + [b]</td>
<td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Up] æŒ‰é”® (å¸¸ç”¨)</td>
</tr>
<tr>
<td>[Ctrl] + [d]</td>
<td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨åŠé¡µ</td>
</tr>
<tr>
<td>[Ctrl] + [u]</td>
<td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨åŠé¡µ</td>
</tr>
<tr>
<td>+</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸‹ä¸€è¡Œ</td>
</tr>
<tr>
<td>-</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸Šä¸€è¡Œ</td>
</tr>
<tr>
<td>n&lt; space&gt;</td>
<td>é‚£ä¸ª n è¡¨ç¤ºã€æ•°å­—ã€ï¼Œä¾‹å¦‚ 20 ã€‚æŒ‰ä¸‹æ•°å­—åå†æŒ‰ç©ºæ ¼é”®ï¼Œå…‰æ ‡ä¼šå‘å³ç§»åŠ¨è¿™ä¸€è¡Œçš„ n ä¸ªå­—ç¬¦ã€‚</td>
</tr>
<tr>
<td>0 æˆ–åŠŸèƒ½é”®[Home]</td>
<td>è¿™æ˜¯æ•°å­—ã€ 0 ã€ï¼šç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€å‰é¢å­—ç¬¦å¤„ (å¸¸ç”¨)</td>
</tr>
<tr>
<td>$ æˆ–åŠŸèƒ½é”®[End]</td>
<td>ç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€åé¢å­—ç¬¦å¤„(å¸¸ç”¨)</td>
</tr>
<tr>
<td>H</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„æœ€ä¸Šæ–¹é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>M</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„ä¸­å¤®é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>L</td>
<td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„æœ€ä¸‹æ–¹é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>G</td>
<td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„æœ€åä¸€è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr>
<td>nG</td>
<td>n ä¸ºæ•°å­—ã€‚ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ n è¡Œã€‚ä¾‹å¦‚ 20G åˆ™ä¼šç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ 20 è¡Œ(å¯é…åˆ :set nu)</td>
</tr>
<tr>
<td>gg</td>
<td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ä¸€è¡Œï¼Œç›¸å½“äº 1G å•Šï¼(å¸¸ç”¨)</td>
</tr>
<tr>
<td>n&lt; Enter&gt;</td>
<td>n ä¸ºæ•°å­—ã€‚å…‰æ ‡å‘ä¸‹ç§»åŠ¨ n è¡Œ(å¸¸ç”¨)</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>æœç´¢æ›¿æ¢</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>/word</strong></td>
<td>å‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ä¸€ä¸ªåç§°ä¸º word çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚è¦åœ¨æ¡£æ¡ˆå†…æœå¯» vbird è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå°±è¾“å…¥ /vbird å³å¯ï¼(å¸¸ç”¨)</td>
</tr>
<tr>
<td>?word</td>
<td>å‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²åç§°ä¸º word çš„å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td>n</td>
<td>è¿™ä¸ª n æ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä»£è¡¨é‡å¤å‰ä¸€ä¸ªæœå¯»çš„åŠ¨ä½œã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ å¦‚æœåˆšåˆšæˆ‘ä»¬æ‰§è¡Œ /vbird å»å‘ä¸‹æœå¯» vbird è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™æŒ‰ä¸‹ n åï¼Œä¼šå‘ä¸‹ç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªåç§°ä¸º vbird çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯æ‰§è¡Œ ?vbird çš„è¯ï¼Œé‚£ä¹ˆæŒ‰ä¸‹ n åˆ™ä¼šå‘ä¸Šç»§ç»­æœå¯»åç§°ä¸º vbird çš„å­—ç¬¦ä¸²ï¼</td>
</tr>
<tr>
<td>N</td>
<td>è¿™ä¸ª N æ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä¸ n åˆšå¥½ç›¸åï¼Œä¸ºã€åå‘ã€è¿›è¡Œå‰ä¸€ä¸ªæœå¯»åŠ¨ä½œã€‚ä¾‹å¦‚ /vbird åï¼ŒæŒ‰ä¸‹ N åˆ™è¡¨ç¤ºã€å‘ä¸Šã€æœå¯» vbird ã€‚</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>åˆ é™¤ã€ å¤åˆ¶ä¸ç²˜è´´</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>x, X</td>
<td>åœ¨ä¸€è¡Œå­—å½“ä¸­ï¼Œx ä¸ºå‘ååˆ é™¤ä¸€ä¸ªå­—ç¬¦ (ç›¸å½“äº [del] æŒ‰é”®)ï¼Œ X ä¸ºå‘å‰åˆ é™¤ä¸€ä¸ªå­—ç¬¦(ç›¸å½“äº [backspace] äº¦å³æ˜¯é€€æ ¼é”®) (å¸¸ç”¨)</td>
</tr>
<tr>
<td>nx</td>
<td>n ä¸ºæ•°å­—ï¼Œè¿ç»­å‘ååˆ é™¤ n ä¸ªå­—ç¬¦ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘è¦è¿ç»­åˆ é™¤ 10 ä¸ªå­—ç¬¦ï¼Œ ã€10xã€ã€‚</td>
</tr>
<tr>
<td>dd</td>
<td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€æ•´è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr>
<td>ndd</td>
<td>n ä¸ºæ•°å­—ã€‚åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 20dd åˆ™æ˜¯åˆ é™¤ 20 è¡Œ (å¸¸ç”¨)</td>
</tr>
<tr>
<td>d1G</td>
<td>åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>dG</td>
<td>åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>d$</td>
<td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>d0</td>
<td>é‚£ä¸ªæ˜¯æ•°å­—çš„ 0 ï¼Œåˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€å‰é¢ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>yy</td>
<td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr>
<td>nyy</td>
<td>n ä¸ºæ•°å­—ã€‚å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 20yy åˆ™æ˜¯å¤åˆ¶ 20 è¡Œ(å¸¸ç”¨)</td>
</tr>
<tr>
<td>y1G</td>
<td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨è¡Œåˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>yG</td>
<td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨è¡Œåˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>y0</td>
<td>å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œé¦–çš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>y$</td>
<td>å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œå°¾çš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>p, P</td>
<td>p ä¸ºå°†å·²å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œè´´ä¸Šï¼ŒP åˆ™ä¸ºè´´åœ¨æ¸¸æ ‡ä¸Šä¸€è¡Œï¼ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ç›®å‰å…‰æ ‡åœ¨ç¬¬ 20 è¡Œï¼Œä¸”å·²ç»å¤åˆ¶äº† 10 è¡Œæ•°æ®ã€‚åˆ™æŒ‰ä¸‹ p åï¼Œ é‚£ 10 è¡Œæ•°æ®ä¼šè´´åœ¨åŸæœ¬çš„ 20 è¡Œä¹‹åï¼Œäº¦å³ç”± 21 è¡Œå¼€å§‹è´´ã€‚ä½†å¦‚æœæ˜¯æŒ‰ä¸‹ P å‘¢ï¼Ÿé‚£ä¹ˆåŸæœ¬çš„ç¬¬ 20 è¡Œä¼šè¢«æ¨åˆ°å˜æˆ 30 è¡Œã€‚(å¸¸ç”¨)</td>
</tr>
<tr>
<td>J</td>
<td>å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸ä¸‹ä¸€è¡Œçš„æ•°æ®ç»“åˆæˆåŒä¸€è¡Œ</td>
</tr>
<tr>
<td>c</td>
<td>é‡å¤åˆ é™¤å¤šä¸ªæ•°æ®ï¼Œä¾‹å¦‚å‘ä¸‹åˆ é™¤ 10 è¡Œï¼Œ[ 10cj ]</td>
</tr>
<tr>
<td>u</td>
<td>å¤åŸå‰ä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td>
</tr>
<tr>
<td>[Ctrl]+r</td>
<td>é‡åšä¸Šä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td>
</tr>
</tbody></table>
<p><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼çš„å¯ç”¨çš„æŒ‰é’®è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th>è¿›å…¥è¾“å…¥æˆ–å–ä»£çš„ç¼–è¾‘æ¨¡å¼</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>i, I</strong></td>
<td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼ši ä¸ºã€ä»ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„è¾“å…¥ã€ï¼Œ I ä¸ºã€åœ¨ç›®å‰æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ã€‚(å¸¸ç”¨)</td>
</tr>
<tr>
<td><strong>a, A</strong></td>
<td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼ša ä¸ºã€ä»ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ï¼Œ A ä¸ºã€ä»å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ã€‚(å¸¸ç”¨)</td>
</tr>
<tr>
<td><strong>o, O</strong></td>
<td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼šè¿™æ˜¯è‹±æ–‡å­—æ¯ o çš„å¤§å°å†™ã€‚o ä¸ºã€åœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡Œã€ï¼›O ä¸ºåœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„çš„ä¸Šä¸€è¡Œè¾“å…¥æ–°çš„ä¸€è¡Œï¼(å¸¸ç”¨)</td>
</tr>
<tr>
<td><strong>r, R</strong></td>
<td>è¿›å…¥å–ä»£æ¨¡å¼(Replace mode)ï¼šr åªä¼šå–ä»£å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡ï¼›Rä¼šä¸€ç›´å–ä»£å…‰æ ‡æ‰€åœ¨çš„æ–‡å­—ï¼Œç›´åˆ°æŒ‰ä¸‹ ESC ä¸ºæ­¢ï¼›(å¸¸ç”¨)</td>
</tr>
<tr>
<td>[<strong>Esc</strong>]</td>
<td>é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œå›åˆ°ä¸€èˆ¬æ¨¡å¼ä¸­(å¸¸ç”¨)</td>
</tr>
</tbody></table>
<p><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼çš„å¯ç”¨çš„æŒ‰é’®è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤è¡Œçš„å‚¨å­˜ã€ç¦»å¼€ç­‰æŒ‡ä»¤</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>:w</td>
<td>å°†ç¼–è¾‘çš„æ•°æ®å†™å…¥ç¡¬ç›˜æ¡£æ¡ˆä¸­(å¸¸ç”¨)</td>
</tr>
<tr>
<td>:w!</td>
<td>è‹¥æ–‡ä»¶å±æ€§ä¸ºã€åªè¯»ã€æ—¶ï¼Œå¼ºåˆ¶å†™å…¥è¯¥æ¡£æ¡ˆã€‚ä¸è¿‡ï¼Œåˆ°åº•èƒ½ä¸èƒ½å†™å…¥ï¼Œ è¿˜æ˜¯è·Ÿä½ å¯¹è¯¥æ¡£æ¡ˆçš„æ¡£æ¡ˆæƒé™æœ‰å…³å•Šï¼</td>
</tr>
<tr>
<td>:q</td>
<td>ç¦»å¼€ vi (å¸¸ç”¨)</td>
</tr>
<tr>
<td>:q!</td>
<td>è‹¥æ›¾ä¿®æ”¹è¿‡æ¡£æ¡ˆï¼Œåˆä¸æƒ³å‚¨å­˜ï¼Œä½¿ç”¨ ! ä¸ºå¼ºåˆ¶ç¦»å¼€ä¸å‚¨å­˜æ¡£æ¡ˆã€‚</td>
</tr>
<tr>
<td>æ³¨æ„ä¸€ä¸‹å•Šï¼Œé‚£ä¸ªæƒŠå¹å· (!) åœ¨ vi å½“ä¸­ï¼Œå¸¸å¸¸å…·æœ‰ã€å¼ºåˆ¶ã€çš„æ„æ€ï½</td>
<td></td>
</tr>
<tr>
<td>:wq</td>
<td>å‚¨å­˜åç¦»å¼€ï¼Œè‹¥ä¸º :wq! åˆ™ä¸ºå¼ºåˆ¶å‚¨å­˜åç¦»å¼€ (å¸¸ç”¨)</td>
</tr>
<tr>
<td>ZZ</td>
<td>è¿™æ˜¯å¤§å†™çš„ Z å–”ï¼è‹¥æ¡£æ¡ˆæ²¡æœ‰æ›´åŠ¨ï¼Œåˆ™ä¸å‚¨å­˜ç¦»å¼€ï¼Œè‹¥æ¡£æ¡ˆå·²ç»è¢«æ›´åŠ¨è¿‡ï¼Œåˆ™å‚¨å­˜åç¦»å¼€ï¼</td>
</tr>
<tr>
<td>:w [filename]</td>
<td>å°†ç¼–è¾‘çš„æ•°æ®å‚¨å­˜æˆå¦ä¸€ä¸ªæ¡£æ¡ˆï¼ˆç±»ä¼¼å¦å­˜æ–°æ¡£ï¼‰</td>
</tr>
<tr>
<td>:r [filename]</td>
<td>åœ¨ç¼–è¾‘çš„æ•°æ®ä¸­ï¼Œè¯»å…¥å¦ä¸€ä¸ªæ¡£æ¡ˆçš„æ•°æ®ã€‚äº¦å³å°† ã€filenameã€ è¿™ä¸ªæ¡£æ¡ˆå†…å®¹åŠ åˆ°æ¸¸æ ‡æ‰€åœ¨è¡Œåé¢</td>
</tr>
<tr>
<td>:n1,n2 w [filename]</td>
<td>å°† n1 åˆ° n2 çš„å†…å®¹å‚¨å­˜æˆ filename è¿™ä¸ªæ¡£æ¡ˆã€‚</td>
</tr>
<tr>
<td>:! command</td>
<td>æš‚æ—¶ç¦»å¼€ vi åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼ä¸‹æ‰§è¡Œ command çš„æ˜¾ç¤ºç»“æœï¼ä¾‹å¦‚ ã€:! ls /homeã€å³å¯åœ¨ vi å½“ä¸­çœ‹ /home åº•ä¸‹ä»¥ ls è¾“å‡ºçš„æ¡£æ¡ˆä¿¡æ¯ï¼</td>
</tr>
<tr>
<td>:set nu</td>
<td>æ˜¾ç¤ºè¡Œå·ï¼Œè®¾å®šä¹‹åï¼Œä¼šåœ¨æ¯ä¸€è¡Œçš„å‰ç¼€æ˜¾ç¤ºè¯¥è¡Œçš„è¡Œå·</td>
</tr>
<tr>
<td>:set nonu</td>
<td>ä¸ set nu ç›¸åï¼Œä¸ºå–æ¶ˆè¡Œå·ï¼</td>
</tr>
</tbody></table>
<h3 id="2-5-è´¦å·ç®¡ç†"><a href="#2-5-è´¦å·ç®¡ç†" class="headerlink" title="2.5 è´¦å·ç®¡ç†"></a>2.5 è´¦å·ç®¡ç†</h3><blockquote>
<p><strong>ç®€ä»‹</strong></p>
</blockquote>
<p>Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚</p>
<p>ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ã€‚</p>
<p>æ¯ä¸ªç”¨æˆ·è´¦å·éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç”¨æˆ·åå’Œå„è‡ªçš„å£ä»¤ã€‚</p>
<p>ç”¨æˆ·åœ¨ç™»å½•æ—¶é”®å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå£ä»¤åï¼Œå°±èƒ½å¤Ÿè¿›å…¥ç³»ç»Ÿå’Œè‡ªå·±çš„ä¸»ç›®å½•ã€‚</p>
<p>å®ç°ç”¨æˆ·è´¦å·çš„ç®¡ç†ï¼Œè¦å®Œæˆçš„å·¥ä½œä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€åˆ é™¤ä¸ä¿®æ”¹ã€‚</li>
<li>ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚</li>
<li>ç”¨æˆ·ç»„çš„ç®¡ç†ã€‚</li>
</ul>
<blockquote>
<p><strong>ç”¨æˆ·è´¦å·çš„ç®¡ç†</strong></p>
</blockquote>
<p>ç”¨æˆ·è´¦å·çš„ç®¡ç†å·¥ä½œä¸»è¦æ¶‰åŠåˆ°ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚</p>
<p>æ·»åŠ ç”¨æˆ·è´¦å·å°±æ˜¯åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªæ–°è´¦å·ï¼Œç„¶åä¸ºæ–°è´¦å·åˆ†é…ç”¨æˆ·å·ã€ç”¨æˆ·ç»„ã€ä¸»ç›®å½•å’Œç™»å½•Shellç­‰èµ„æºã€‚</p>
<blockquote>
<p><strong>æ·»åŠ è´¦å· useradd</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure>

<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>é€‰é¡¹ :<ul>
<li>-c comment æŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚</li>
<li>-d ç›®å½• æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚</li>
<li>-g ç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</li>
<li>-G ç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚</li>
<li>-mã€€ä½¿ç”¨è€…ç›®å½•å¦‚ä¸å­˜åœ¨åˆ™è‡ªåŠ¨å»ºç«‹ã€‚</li>
<li>-s Shellæ–‡ä»¶ æŒ‡å®šç”¨æˆ·çš„ç™»å½•Shellã€‚</li>
<li>-u ç”¨æˆ·å· æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰-oé€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·ã€‚</li>
</ul>
</li>
<li>ç”¨æˆ·å :<ul>
<li>æŒ‡å®šæ–°è´¦å·çš„ç™»å½•åã€‚</li>
</ul>
</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># æ­¤å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·kuangshenï¼Œå…¶ä¸­-mé€‰é¡¹ç”¨æ¥ä¸ºç™»å½•åkuangshenäº§ç”Ÿä¸€ä¸ªä¸»ç›®å½• /home/kuangshen</span><br><span class="line">[root@kuangshen home]# useradd -m kuangshen</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Linuxä¸‹å¦‚ä½•åˆ‡æ¢ç”¨æˆ·</strong></p>
</blockquote>
<p>1**.åˆ‡æ¢ç”¨æˆ·çš„å‘½ä»¤ä¸ºï¼šsu username ã€usernameæ˜¯ä½ çš„ç”¨æˆ·åå“¦ã€‘**</p>
<p>2.ä»æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š<strong>sudo su</strong></p>
<p>3.åœ¨ç»ˆç«¯è¾“å…¥exitæˆ–logoutæˆ–ä½¿ç”¨å¿«æ·æ–¹å¼ctrl+dï¼Œå¯ä»¥é€€å›åˆ°åŸæ¥ç”¨æˆ·ï¼Œå…¶å®ctrl+dä¹Ÿæ˜¯æ‰§è¡Œçš„exitå‘½ä»¤</p>
<p>4.åœ¨åˆ‡æ¢ç”¨æˆ·æ—¶ï¼Œå¦‚æœæƒ³åœ¨åˆ‡æ¢ç”¨æˆ·ä¹‹åä½¿ç”¨æ–°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒï¼Œå¯ä»¥åœ¨suå’Œusernameä¹‹é—´åŠ -ï¼Œä¾‹å¦‚ï¼šã€su - rootã€‘</p>
<p>$è¡¨ç¤ºæ™®é€šç”¨æˆ·</p>
<p>#è¡¨ç¤ºè¶…çº§ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯rootç”¨æˆ·</p>
<blockquote>
<p><strong>åˆ é™¤å¸å·</strong></p>
</blockquote>
<p>å¦‚æœä¸€ä¸ªç”¨æˆ·çš„è´¦å·ä¸å†ä½¿ç”¨ï¼Œå¯ä»¥ä»ç³»ç»Ÿä¸­åˆ é™¤ã€‚</p>
<p>åˆ é™¤ç”¨æˆ·è´¦å·å°±æ˜¯è¦å°†**/etc/passwd**ç­‰ç³»ç»Ÿæ–‡ä»¶ä¸­çš„è¯¥ç”¨æˆ·è®°å½•åˆ é™¤ï¼Œå¿…è¦æ—¶è¿˜åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p>
<p>åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·è´¦å·ä½¿ç”¨<strong>userdel</strong>å‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">userdel é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„é€‰é¡¹æ˜¯ <strong>-r</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@kuangshen home]<span class="comment"># userdel -r kuangshen</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤åˆ é™¤ç”¨æˆ·kuangshenåœ¨ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼ˆä¸»è¦æ˜¯/etc/passwd, /etc/shadow, /etc/groupç­‰ï¼‰çš„è®°å½•ï¼ŒåŒæ—¶åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p>
<blockquote>
<p><strong>ä¿®æ”¹å¸å·</strong></p>
</blockquote>
<p>ä¿®æ”¹ç”¨æˆ·è´¦å·å°±æ˜¯æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹ç”¨æˆ·çš„æœ‰å…³å±æ€§ï¼Œå¦‚ç”¨æˆ·å·ã€ä¸»ç›®å½•ã€ç”¨æˆ·ç»„ã€ç™»å½•Shellç­‰ã€‚</p>
<p>ä¿®æ”¹å·²æœ‰ç”¨æˆ·çš„ä¿¡æ¯ä½¿ç”¨<strong>usermod</strong>å‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">usermod é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬-c, -d, -m, -g, -G, -s, -uä»¥åŠ-oç­‰ï¼Œè¿™äº›é€‰é¡¹çš„æ„ä¹‰ä¸useraddå‘½ä»¤ä¸­çš„é€‰é¡¹ä¸€æ ·ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šæ–°çš„èµ„æºå€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># usermod -s /bin/ksh -d /home/z â€“g developer kuangshen</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤å°†ç”¨æˆ·kuangshençš„ç™»å½•Shellä¿®æ”¹ä¸ºkshï¼Œä¸»ç›®å½•æ”¹ä¸º/home/zï¼Œç”¨æˆ·ç»„æ”¹ä¸ºdeveloperã€‚</p>
<blockquote>
<p>ç”¨æˆ·å£ä»¤çš„ç®¡ç†</p>
</blockquote>
<p>ç”¨æˆ·ç®¡ç†çš„ä¸€é¡¹é‡è¦å†…å®¹æ˜¯ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚ç”¨æˆ·è´¦å·åˆšåˆ›å»ºæ—¶æ²¡æœ‰å£ä»¤ï¼Œä½†æ˜¯è¢«ç³»ç»Ÿé”å®šï¼Œæ— æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä¸ºå…¶æŒ‡å®šå£ä»¤åæ‰å¯ä»¥ä½¿ç”¨ï¼Œå³ä½¿æ˜¯æŒ‡å®šç©ºå£ä»¤ã€‚</p>
<p>æŒ‡å®šå’Œä¿®æ”¹ç”¨æˆ·å£ä»¤çš„Shellå‘½ä»¤æ˜¯passwdã€‚è¶…çº§ç”¨æˆ·å¯ä»¥ä¸ºè‡ªå·±å’Œå…¶ä»–ç”¨æˆ·æŒ‡å®šå£ä»¤ï¼Œæ™®é€šç”¨æˆ·åªèƒ½ç”¨å®ƒä¿®æ”¹è‡ªå·±çš„å£ä»¤ã€‚</p>
<p>å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">passwd é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure>

<p>å¯ä½¿ç”¨çš„é€‰é¡¹ï¼š</p>
<ul>
<li><strong>-l é”å®šå£ä»¤ï¼Œå³ç¦ç”¨è´¦å·ã€‚</strong></li>
<li>-u å£ä»¤è§£é”ã€‚</li>
<li>-d ä½¿è´¦å·æ— å£ä»¤ã€‚</li>
<li>-f å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤ã€‚</li>
</ul>
<p>å¦‚æœé»˜è®¤ç”¨æˆ·åï¼Œåˆ™ä¿®æ”¹å½“å‰ç”¨æˆ·çš„å£ä»¤ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾å½“å‰ç”¨æˆ·æ˜¯kuangshenï¼Œåˆ™ä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹è¯¥ç”¨æˆ·è‡ªå·±çš„å£ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ passwd </span><br><span class="line">Old password:******</span><br><span class="line">New password:*******</span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯è¶…çº§ç”¨æˆ·ï¼Œå¯ä»¥ç”¨ä¸‹åˆ—å½¢å¼æŒ‡å®šä»»ä½•ç”¨æˆ·çš„å£ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># passwd kuangshen</span></span><br><span class="line">New password:*******</span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure>

<p>æ™®é€šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å£ä»¤æ—¶ï¼Œpasswdå‘½ä»¤ä¼šå…ˆè¯¢é—®åŸå£ä»¤ï¼ŒéªŒè¯åå†è¦æ±‚ç”¨æˆ·è¾“å…¥ä¸¤éæ–°å£ä»¤ï¼Œå¦‚æœä¸¤æ¬¡è¾“å…¥çš„å£ä»¤ä¸€è‡´ï¼Œåˆ™å°†è¿™ä¸ªå£ä»¤æŒ‡å®šç»™ç”¨æˆ·ï¼›è€Œè¶…çº§ç”¨æˆ·ä¸ºç”¨æˆ·æŒ‡å®šå£ä»¤æ—¶ï¼Œå°±ä¸éœ€è¦çŸ¥é“åŸå£ä»¤ã€‚</p>
<p>ä¸ºäº†ç³»ç»Ÿå®‰å…¨èµ·è§ï¼Œç”¨æˆ·åº”è¯¥é€‰æ‹©æ¯”è¾ƒå¤æ‚çš„å£ä»¤ï¼Œä¾‹å¦‚æœ€å¥½ä½¿ç”¨8ä½é•¿çš„å£ä»¤ï¼Œå£ä»¤ä¸­åŒ…å«æœ‰å¤§å†™ã€å°å†™å­—æ¯å’Œæ•°å­—ï¼Œå¹¶ä¸”åº”è¯¥ä¸å§“åã€ç”Ÿæ—¥ç­‰ä¸ç›¸åŒã€‚</p>
<p><strong>ä¸ºç”¨æˆ·æŒ‡å®šç©ºå£ä»¤æ—¶</strong>ï¼Œæ‰§è¡Œä¸‹åˆ—å½¢å¼çš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">passwd -d kuangshen</span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤å°†ç”¨æˆ· kuangshençš„å£ä»¤åˆ é™¤ï¼Œè¿™æ ·ç”¨æˆ· kuangshenä¸‹ä¸€æ¬¡ç™»å½•æ—¶ï¼Œç³»ç»Ÿå°±ä¸å†å…è®¸è¯¥ç”¨æˆ·ç™»å½•äº†ã€‚</p>
<p><strong>passwd å‘½ä»¤è¿˜å¯ä»¥ç”¨ -l(lock) é€‰é¡¹é”å®šæŸä¸€ç”¨æˆ·ï¼Œä½¿å…¶ä¸èƒ½ç™»å½•</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># passwd -l kuangshen</span></span><br></pre></td></tr></table></figure>

<h3 id="2-6-ç”¨æˆ·ç»„ç®¡ç†"><a href="#2-6-ç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="2.6 ç”¨æˆ·ç»„ç®¡ç†"></a>2.6 ç”¨æˆ·ç»„ç®¡ç†</h3><p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚ä¸åŒLinux ç³»ç»Ÿå¯¹ç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸å®ƒåŒåçš„ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·æ—¶åŒæ—¶åˆ›å»ºã€‚</p>
<p>ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ã€‚ç»„çš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹**/etc/group**æ–‡ä»¶çš„æ›´æ–°ã€‚</p>
<blockquote>
<p><strong>å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ä½¿ç”¨groupaddå‘½ä»¤</strong></p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">groupadd é€‰é¡¹ ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨çš„é€‰é¡¹æœ‰ï¼š</p>
<ul>
<li>-g GID æŒ‡å®šæ–°ç”¨æˆ·ç»„çš„ç»„æ ‡è¯†å·ï¼ˆGIDï¼‰ã€‚</li>
<li>-o ä¸€èˆ¬ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œè¡¨ç¤ºæ–°ç”¨æˆ·ç»„çš„GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚</li>
</ul>
<p>å®ä¾‹1ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># groupadd group1</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤å‘ç³»ç»Ÿä¸­å¢åŠ äº†ä¸€ä¸ªæ–°ç»„group1ï¼Œæ–°ç»„çš„ç»„æ ‡è¯†å·æ˜¯åœ¨å½“å‰å·²æœ‰çš„æœ€å¤§ç»„æ ‡è¯†å·çš„åŸºç¡€ä¸ŠåŠ 1ã€‚</p>
<p>å®ä¾‹2ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># groupadd -g 101 group2</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤å‘ç³»ç»Ÿä¸­å¢åŠ äº†ä¸€ä¸ªæ–°ç»„group2ï¼ŒåŒæ—¶æŒ‡å®šæ–°ç»„çš„ç»„æ ‡è¯†å·æ˜¯101ã€‚</p>
<blockquote>
<p><strong>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼Œä½¿ç”¨groupdelå‘½ä»¤</strong></p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">groupdel ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„é€‰é¡¹æœ‰ï¼š</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># groupdel group1</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å‘½ä»¤ä»ç³»ç»Ÿä¸­åˆ é™¤ç»„group1ã€‚</p>
<blockquote>
<p><strong>ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ä½¿ç”¨groupmodå‘½ä»¤</strong></p>
</blockquote>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">groupmod é€‰é¡¹ ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„é€‰é¡¹æœ‰ï¼š</p>
<ul>
<li>-g GID ä¸ºç”¨æˆ·ç»„æŒ‡å®šæ–°çš„ç»„æ ‡è¯†å·ã€‚</li>
<li>-o ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œç”¨æˆ·ç»„çš„æ–°GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚</li>
<li>-næ–°ç”¨æˆ·ç»„ å°†ç”¨æˆ·ç»„çš„åå­—æ”¹ä¸ºæ–°åå­—</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># æ­¤å‘½ä»¤å°†ç»„group2çš„ç»„æ ‡è¯†å·ä¿®æ”¹ä¸º<span class="number">102</span>ã€‚</span><br><span class="line">groupmod -g <span class="number">102</span> group2</span><br><span class="line"> </span><br><span class="line"># å°†ç»„group2çš„æ ‡è¯†å·æ”¹ä¸º<span class="number">10000</span>ï¼Œç»„åä¿®æ”¹ä¸ºgroup3ã€‚</span><br><span class="line">groupmod â€“g <span class="number">10000</span> -n group3 group</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>åˆ‡æ¢ç»„</strong></p>
</blockquote>
<p>å¦‚æœä¸€ä¸ªç”¨æˆ·åŒæ—¶å±äºå¤šä¸ªç”¨æˆ·ç»„ï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥åœ¨ç”¨æˆ·ç»„ä¹‹é—´åˆ‡æ¢ï¼Œä»¥ä¾¿å…·æœ‰å…¶ä»–ç”¨æˆ·ç»„çš„æƒé™ã€‚</p>
<p>ç”¨æˆ·å¯ä»¥åœ¨ç™»å½•åï¼Œä½¿ç”¨å‘½ä»¤<strong>newgrp</strong>åˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªå‘½ä»¤çš„å‚æ•°å°±æ˜¯ç›®çš„ç”¨æˆ·ç»„ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">$ newgrp root</span><br></pre></td></tr></table></figure>

<p>è¿™æ¡å‘½ä»¤å°†å½“å‰ç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ç»„ï¼Œå‰ææ¡ä»¶æ˜¯rootç”¨æˆ·ç»„ç¡®å®æ˜¯è¯¥ç”¨æˆ·çš„ä¸»ç»„æˆ–é™„åŠ ç»„ã€‚</p>
<blockquote>
<p><strong>/etc/passwd</strong></p>
</blockquote>
<p>å®Œæˆç”¨æˆ·ç®¡ç†çš„å·¥ä½œæœ‰è®¸å¤šç§æ–¹æ³•ï¼Œä½†æ˜¯æ¯ä¸€ç§æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯å¯¹æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>ä¸ç”¨æˆ·å’Œç”¨æˆ·ç»„ç›¸å…³çš„ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ä¸€äº›ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬/etc/passwd, /etc/shadow, /etc/groupç­‰ã€‚</p>
<p> ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™äº›æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p><strong>/etc/passwdæ–‡ä»¶æ˜¯ç”¨æˆ·ç®¡ç†å·¥ä½œæ¶‰åŠçš„æœ€é‡è¦çš„ä¸€ä¸ªæ–‡ä»¶ã€‚</strong></p>
<p>Linuxç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·éƒ½åœ¨/etc/passwdæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„è®°å½•è¡Œï¼Œå®ƒè®°å½•äº†è¿™ä¸ªç”¨æˆ·çš„ä¸€äº›åŸºæœ¬å±æ€§ã€‚</p>
<p>è¿™ä¸ªæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å¯è¯»çš„ã€‚å®ƒçš„å†…å®¹ç±»ä¼¼ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ï¼ƒ cat /etc/passwd</span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">root:<span class="title">x</span>:0:0:<span class="title">Superuser</span>:/:</span></span><br><span class="line"><span class="function"><span class="title">daemon:x</span>:1:1:<span class="title">System</span> <span class="title">daemons</span>:/<span class="title">etc</span>:</span></span><br><span class="line"><span class="function"><span class="title">bin:x</span>:2:2:<span class="title">Owner</span> <span class="title">of</span> <span class="title">system</span> <span class="title">commands</span>:/<span class="title">bin</span>:</span></span><br><span class="line"><span class="function"><span class="title">sys:x</span>:3:3:<span class="title">Owner</span> <span class="title">of</span> <span class="title">system</span> <span class="title">files</span>:/<span class="title">usr</span>/<span class="title">sys</span>:</span></span><br><span class="line"><span class="function"><span class="title">adm:x</span>:4:4:<span class="title">System</span> <span class="title">accounting</span>:/<span class="title">usr</span>/<span class="title">adm</span>:</span></span><br><span class="line"><span class="function"><span class="title">uucp:x</span>:5:5:<span class="title">UUCP</span> <span class="title">administrator</span>:/<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">uucp</span>:</span></span><br><span class="line"><span class="function"><span class="title">auth:x</span>:7:21:<span class="title">Authentication</span> <span class="title">administrator</span>:/<span class="title">tcb</span>/<span class="title">files</span>/<span class="title">auth</span>:</span></span><br><span class="line"><span class="function"><span class="title">cron:x</span>:9:16:<span class="title">Cron</span> <span class="title">daemon</span>:/<span class="title">usr</span>/<span class="title">spool</span>/<span class="title">cron</span>:</span></span><br><span class="line"><span class="function"><span class="title">listen:x</span>:37:4:<span class="title">Network</span> <span class="title">daemon</span>:/<span class="title">usr</span>/<span class="title">net</span>/<span class="title">nls</span>:</span></span><br><span class="line"><span class="function"><span class="title">lp:x</span>:71:18:<span class="title">Printer</span> <span class="title">administrator</span>:/<span class="title">usr</span>/<span class="title">spool</span>/<span class="title">lp</span>:</span></span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ/etc/passwdä¸­ä¸€è¡Œè®°å½•å¯¹åº”ç€ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯è¡Œè®°å½•åˆè¢«å†’å·(:)åˆ†éš”ä¸º7ä¸ªå­—æ®µï¼Œå…¶æ ¼å¼å’Œå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</span><br></pre></td></tr></table></figure>

<p>1ï¼‰â€ç”¨æˆ·åâ€æ˜¯ä»£è¡¨ç”¨æˆ·è´¦å·çš„å­—ç¬¦ä¸²ã€‚</p>
<p>é€šå¸¸é•¿åº¦ä¸è¶…è¿‡8ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ç”±å¤§å°å†™å­—æ¯å’Œ/æˆ–æ•°å­—ç»„æˆã€‚ç™»å½•åä¸­ä¸èƒ½æœ‰å†’å·ãƒ¾(ï½ï½¥Ï‰ï½¥)ï¾‰ï¼Œå› ä¸ºå†’å·åœ¨è¿™é‡Œæ˜¯åˆ†éš”ç¬¦ã€‚</p>
<p>ä¸ºäº†å…¼å®¹èµ·è§ï¼Œç™»å½•åä¸­æœ€å¥½ä¸è¦åŒ…å«ç‚¹å­—ç¬¦(.)ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨è¿å­—ç¬¦(-)å’ŒåŠ å·(+)æ‰“å¤´ã€‚</p>
<p>2ï¼‰â€œå£ä»¤â€ä¸€äº›ç³»ç»Ÿä¸­ï¼Œå­˜æ”¾ç€åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ã€‚</p>
<p>è™½ç„¶è¿™ä¸ªå­—æ®µå­˜æ”¾çš„åªæ˜¯ç”¨æˆ·å£ä»¤çš„åŠ å¯†ä¸²ï¼Œä¸æ˜¯æ˜æ–‡ï¼Œä½†æ˜¯ç”±äº/etc/passwdæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»ï¼Œæ‰€ä»¥è¿™ä»æ˜¯ä¸€ä¸ªå®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œ<strong>ç°åœ¨è®¸å¤šLinux ç³»ç»Ÿï¼ˆå¦‚SVR4ï¼‰éƒ½ä½¿ç”¨äº†shadowæŠ€æœ¯ï¼ŒæŠŠçœŸæ­£çš„åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—å­˜æ”¾åˆ°/etc/shadowæ–‡ä»¶ä¸­ï¼Œè€Œåœ¨/etc/passwdæ–‡ä»¶çš„å£ä»¤å­—æ®µä¸­åªå­˜æ”¾ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ï¼Œä¾‹å¦‚â€œxâ€æˆ–è€…â€œ*â€ã€‚</strong><br>3ï¼‰â€œç”¨æˆ·æ ‡è¯†å·â€æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç³»ç»Ÿå†…éƒ¨ç”¨å®ƒæ¥æ ‡è¯†ç”¨æˆ·ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä¸ç”¨æˆ·åæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚å¦‚æœå‡ ä¸ªç”¨æˆ·åå¯¹åº”çš„ç”¨æˆ·æ ‡è¯†å·æ˜¯ä¸€æ ·çš„ï¼Œç³»ç»Ÿå†…éƒ¨å°†æŠŠå®ƒä»¬è§†ä¸ºåŒä¸€ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥æœ‰ä¸åŒçš„å£ä»¤ã€ä¸åŒçš„ä¸»ç›®å½•ä»¥åŠä¸åŒçš„ç™»å½•Shellç­‰ã€‚</p>
<p>é€šå¸¸ç”¨æˆ·æ ‡è¯†å·çš„å–å€¼èŒƒå›´æ˜¯0ï½65 535ã€‚0æ˜¯è¶…çº§ç”¨æˆ·rootçš„æ ‡è¯†å·ï¼Œ1ï½99ç”±ç³»ç»Ÿä¿ç•™ï¼Œä½œä¸ºç®¡ç†è´¦å·ï¼Œæ™®é€šç”¨æˆ·çš„æ ‡è¯†å·ä»100å¼€å§‹ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç•Œé™æ˜¯500ã€‚</p>
<p>4ï¼‰â€œç»„æ ‡è¯†å·â€å­—æ®µè®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</p>
<p>å®ƒå¯¹åº”ç€/etc/groupæ–‡ä»¶ä¸­çš„ä¸€æ¡è®°å½•ã€‚</p>
<p>5)â€œæ³¨é‡Šæ€§æè¿°â€å­—æ®µè®°å½•ç€ç”¨æˆ·çš„ä¸€äº›ä¸ªäººæƒ…å†µã€‚</p>
<p>ä¾‹å¦‚ç”¨æˆ·çš„çœŸå®å§“åã€ç”µè¯ã€åœ°å€ç­‰ï¼Œè¿™ä¸ªå­—æ®µå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ç”¨é€”ã€‚åœ¨ä¸åŒçš„Linux ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µçš„æ ¼å¼å¹¶æ²¡æœ‰ç»Ÿä¸€ã€‚åœ¨è®¸å¤šLinuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µå­˜æ”¾çš„æ˜¯ä¸€æ®µä»»æ„çš„æ³¨é‡Šæ€§æè¿°æ–‡å­—ï¼Œç”¨ä½œfingerå‘½ä»¤çš„è¾“å‡ºã€‚</p>
<p>6)â€œä¸»ç›®å½•â€ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„èµ·å§‹å·¥ä½œç›®å½•ã€‚</p>
<p>å®ƒæ˜¯ç”¨æˆ·åœ¨ç™»å½•åˆ°ç³»ç»Ÿä¹‹åæ‰€å¤„çš„ç›®å½•ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œå„ç”¨æˆ·çš„ä¸»ç›®å½•éƒ½è¢«ç»„ç»‡åœ¨åŒä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹ï¼Œè€Œç”¨æˆ·ä¸»ç›®å½•çš„åç§°å°±æ˜¯è¯¥ç”¨æˆ·çš„ç™»å½•åã€‚å„ç”¨æˆ·å¯¹è‡ªå·±çš„ä¸»ç›®å½•æœ‰è¯»ã€å†™ã€æ‰§è¡Œï¼ˆæœç´¢ï¼‰æƒé™ï¼Œå…¶ä»–ç”¨æˆ·å¯¹æ­¤ç›®å½•çš„è®¿é—®æƒé™åˆ™æ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®ã€‚</p>
<p>7)ç”¨æˆ·ç™»å½•åï¼Œè¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„æ“ä½œä¼ ç»™å†…æ ¸ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯ç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿåè¿è¡Œçš„å‘½ä»¤è§£é‡Šå™¨æˆ–æŸä¸ªç‰¹å®šçš„ç¨‹åºï¼Œå³Shellã€‚</p>
<p>Shellæ˜¯ç”¨æˆ·ä¸Linuxç³»ç»Ÿä¹‹é—´çš„æ¥å£ã€‚Linuxçš„Shellæœ‰è®¸å¤šç§ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹ã€‚å¸¸ç”¨çš„æœ‰sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)ç­‰ã€‚</p>
<p>ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æ ¹æ®ç³»ç»Ÿæƒ…å†µå’Œç”¨æˆ·ä¹ æƒ¯ä¸ºç”¨æˆ·æŒ‡å®šæŸä¸ªShellã€‚å¦‚æœä¸æŒ‡å®šShellï¼Œé‚£ä¹ˆç³»ç»Ÿä½¿ç”¨shä¸ºé»˜è®¤çš„ç™»å½•Shellï¼Œå³è¿™ä¸ªå­—æ®µçš„å€¼ä¸º/bin/shã€‚</p>
<p>ç”¨æˆ·çš„ç™»å½•Shellä¹Ÿå¯ä»¥æŒ‡å®šä¸ºæŸä¸ªç‰¹å®šçš„ç¨‹åºï¼ˆæ­¤ç¨‹åºä¸æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼‰ã€‚</p>
<p>åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶ç”¨æˆ·åªèƒ½è¿è¡ŒæŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œåœ¨è¯¥åº”ç”¨ç¨‹åºè¿è¡Œç»“æŸåï¼Œç”¨æˆ·å°±è‡ªåŠ¨é€€å‡ºäº†ç³»ç»Ÿã€‚æœ‰äº›Linux ç³»ç»Ÿè¦æ±‚åªæœ‰é‚£äº›åœ¨ç³»ç»Ÿä¸­ç™»è®°äº†çš„ç¨‹åºæ‰èƒ½å‡ºç°åœ¨è¿™ä¸ªå­—æ®µä¸­ã€‚</p>
<p>8)ç³»ç»Ÿä¸­æœ‰ä¸€ç±»ç”¨æˆ·ç§°ä¸ºä¼ªç”¨æˆ·ï¼ˆpseudo usersï¼‰ã€‚</p>
<p>è¿™äº›ç”¨æˆ·åœ¨/etc/passwdæ–‡ä»¶ä¸­ä¹Ÿå æœ‰ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯ä¸èƒ½ç™»å½•ï¼Œå› ä¸ºå®ƒä»¬çš„ç™»å½•Shellä¸ºç©ºã€‚å®ƒä»¬çš„å­˜åœ¨ä¸»è¦æ˜¯æ–¹ä¾¿ç³»ç»Ÿç®¡ç†ï¼Œæ»¡è¶³ç›¸åº”çš„ç³»ç»Ÿè¿›ç¨‹å¯¹æ–‡ä»¶å±ä¸»çš„è¦æ±‚ã€‚</p>
<p>å¸¸è§çš„ä¼ªç”¨æˆ·å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ä¼ª ç”¨ æˆ· å« ä¹‰</span><br><span class="line">bin æ‹¥æœ‰å¯æ‰§è¡Œçš„ç”¨æˆ·å‘½ä»¤æ–‡ä»¶</span><br><span class="line">sys æ‹¥æœ‰ç³»ç»Ÿæ–‡ä»¶</span><br><span class="line">adm æ‹¥æœ‰å¸æˆ·æ–‡ä»¶</span><br><span class="line">uucp UUCPä½¿ç”¨</span><br><span class="line">lp lpæˆ–lpdå­ç³»ç»Ÿä½¿ç”¨</span><br><span class="line">nobody NFSä½¿ç”¨</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>/etc/shadow</strong></p>
</blockquote>
<p>1ã€<strong>é™¤äº†ä¸Šé¢åˆ—å‡ºçš„ä¼ªç”¨æˆ·å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ ‡å‡†çš„ä¼ªç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šaudit, cron, mail, usenetç­‰ï¼Œå®ƒä»¬ä¹Ÿéƒ½å„è‡ªä¸ºç›¸å…³çš„è¿›ç¨‹å’Œæ–‡ä»¶æ‰€éœ€è¦ã€‚</strong></p>
<p>ç”±äº/etc/passwdæ–‡ä»¶æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»çš„ï¼Œå¦‚æœç”¨æˆ·çš„å¯†ç å¤ªç®€å•æˆ–è§„å¾‹æ¯”è¾ƒæ˜æ˜¾çš„è¯ï¼Œä¸€å°æ™®é€šçš„è®¡ç®—æœºå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°å°†å®ƒç ´è§£ï¼Œå› æ­¤å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„Linuxç³»ç»Ÿéƒ½æŠŠåŠ å¯†åçš„å£ä»¤å­—åˆ†ç¦»å‡ºæ¥ï¼Œå•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯/etc/shadowæ–‡ä»¶ã€‚æœ‰è¶…çº§ç”¨æˆ·æ‰æ‹¥æœ‰è¯¥æ–‡ä»¶è¯»æƒé™ï¼Œè¿™å°±ä¿è¯äº†ç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§ã€‚</p>
<p><strong>2ã€/etc/shadowä¸­çš„è®°å½•è¡Œä¸/etc/passwdä¸­çš„ä¸€ä¸€å¯¹åº”ï¼Œå®ƒç”±pwconvå‘½ä»¤æ ¹æ®/etc/passwdä¸­çš„æ•°æ®è‡ªåŠ¨äº§ç”Ÿ</strong></p>
<p>å®ƒçš„æ–‡ä»¶æ ¼å¼ä¸/etc/passwdç±»ä¼¼ï¼Œç”±è‹¥å¹²ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ç”¨â€:â€éš”å¼€ã€‚è¿™äº›å­—æ®µæ˜¯ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:</span><br></pre></td></tr></table></figure>

<ol>
<li>â€œç™»å½•åâ€æ˜¯ä¸/etc/passwdæ–‡ä»¶ä¸­çš„ç™»å½•åç›¸ä¸€è‡´çš„ç”¨æˆ·è´¦å·</li>
<li>â€œå£ä»¤â€å­—æ®µå­˜æ”¾çš„æ˜¯åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ï¼Œé•¿åº¦ä¸º13ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸ºç©ºï¼Œåˆ™å¯¹åº”ç”¨æˆ·æ²¡æœ‰å£ä»¤ï¼Œç™»å½•æ—¶ä¸éœ€è¦å£ä»¤ï¼›å¦‚æœå«æœ‰ä¸å±äºé›†åˆ { ./0-9A-Za-z }ä¸­çš„å­—ç¬¦ï¼Œåˆ™å¯¹åº”çš„ç”¨æˆ·ä¸èƒ½ç™»å½•ã€‚</li>
<li>â€œæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´â€è¡¨ç¤ºçš„æ˜¯ä»æŸä¸ªæ—¶åˆ»èµ·ï¼Œåˆ°ç”¨æˆ·æœ€åä¸€æ¬¡ä¿®æ”¹å£ä»¤æ—¶çš„å¤©æ•°ã€‚æ—¶é—´èµ·ç‚¹å¯¹ä¸åŒçš„ç³»ç»Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚ä¾‹å¦‚åœ¨SCO Linux ä¸­ï¼Œè¿™ä¸ªæ—¶é—´èµ·ç‚¹æ˜¯1970å¹´1æœˆ1æ—¥ã€‚</li>
<li>â€œæœ€å°æ—¶é—´é—´éš”â€æŒ‡çš„æ˜¯ä¸¤æ¬¡ä¿®æ”¹å£ä»¤ä¹‹é—´æ‰€éœ€çš„æœ€å°å¤©æ•°ã€‚</li>
<li>â€œæœ€å¤§æ—¶é—´é—´éš”â€æŒ‡çš„æ˜¯å£ä»¤ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚</li>
<li>â€œè­¦å‘Šæ—¶é—´â€å­—æ®µè¡¨ç¤ºçš„æ˜¯ä»ç³»ç»Ÿå¼€å§‹è­¦å‘Šç”¨æˆ·åˆ°ç”¨æˆ·å¯†ç æ­£å¼å¤±æ•ˆä¹‹é—´çš„å¤©æ•°ã€‚</li>
<li>â€œä¸æ´»åŠ¨æ—¶é—´â€è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·æ²¡æœ‰ç™»å½•æ´»åŠ¨ä½†è´¦å·ä»èƒ½ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚</li>
<li>â€œå¤±æ•ˆæ—¶é—´â€å­—æ®µç»™å‡ºçš„æ˜¯ä¸€ä¸ªç»å¯¹çš„å¤©æ•°ï¼Œå¦‚æœä½¿ç”¨äº†è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå°±ç»™å‡ºç›¸åº”è´¦å·çš„ç”Ÿå­˜æœŸã€‚æœŸæ»¡åï¼Œè¯¥è´¦å·å°±ä¸å†æ˜¯ä¸€ä¸ªåˆæ³•çš„è´¦å·ï¼Œä¹Ÿå°±ä¸èƒ½å†ç”¨æ¥ç™»å½•äº†ã€‚</li>
</ol>
<p>/etc/group</p>
<p>ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚</p>
<p>å°†ç”¨æˆ·åˆ†ç»„æ˜¯Linux ç³»ç»Ÿä¸­å¯¹ç”¨æˆ·è¿›è¡Œç®¡ç†åŠæ§åˆ¶è®¿é—®æƒé™çš„ä¸€ç§æ‰‹æ®µã€‚</p>
<p>æ¯ä¸ªç”¨æˆ·éƒ½å±äºæŸä¸ªç”¨æˆ·ç»„ï¼›ä¸€ä¸ªç»„ä¸­å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å±äºä¸åŒçš„ç»„ã€‚</p>
<p>å½“ä¸€ä¸ªç”¨æˆ·åŒæ—¶æ˜¯å¤šä¸ªç»„ä¸­çš„æˆå‘˜æ—¶ï¼Œåœ¨/etc/passwdæ–‡ä»¶ä¸­è®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¹Ÿå°±æ˜¯ç™»å½•æ—¶æ‰€å±çš„é»˜è®¤ç»„ï¼Œè€Œå…¶ä»–ç»„ç§°ä¸ºé™„åŠ ç»„ã€‚</p>
<p>ç”¨æˆ·è¦è®¿é—®å±äºé™„åŠ ç»„çš„æ–‡ä»¶æ—¶ï¼Œå¿…é¡»é¦–å…ˆä½¿ç”¨newgrpå‘½ä»¤ä½¿è‡ªå·±æˆä¸ºæ‰€è¦è®¿é—®çš„ç»„ä¸­çš„æˆå‘˜ã€‚</p>
<p><strong>ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­</strong>ã€‚æ­¤æ–‡ä»¶çš„æ ¼å¼ä¹Ÿç±»ä¼¼äº/etc/passwdæ–‡ä»¶ï¼Œç”±å†’å·(:)éš”å¼€è‹¥å¹²ä¸ªå­—æ®µï¼Œè¿™äº›å­—æ®µæœ‰ï¼š</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>

<ol>
<li>â€œç»„åâ€æ˜¯ç”¨æˆ·ç»„çš„åç§°ï¼Œç”±å­—æ¯æˆ–æ•°å­—æ„æˆã€‚ä¸/etc/passwdä¸­çš„ç™»å½•åä¸€æ ·ï¼Œç»„åä¸åº”é‡å¤ã€‚</li>
<li>â€œå£ä»¤â€å­—æ®µå­˜æ”¾çš„æ˜¯ç”¨æˆ·ç»„åŠ å¯†åçš„å£ä»¤å­—ã€‚ä¸€èˆ¬Linux ç³»ç»Ÿçš„ç”¨æˆ·ç»„éƒ½æ²¡æœ‰å£ä»¤ï¼Œå³è¿™ä¸ªå­—æ®µä¸€èˆ¬ä¸ºç©ºï¼Œæˆ–è€…æ˜¯*ã€‚</li>
<li>â€œç»„æ ‡è¯†å·â€ä¸ç”¨æˆ·æ ‡è¯†å·ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç³»ç»Ÿå†…éƒ¨ç”¨æ¥æ ‡è¯†ç»„ã€‚</li>
<li>â€œç»„å†…ç”¨æˆ·åˆ—è¡¨â€æ˜¯å±äºè¿™ä¸ªç»„çš„æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨/b]ï¼Œä¸åŒç”¨æˆ·ä¹‹é—´ç”¨é€—å·(,)åˆ†éš”ã€‚è¿™ä¸ªç”¨æˆ·ç»„å¯èƒ½æ˜¯ç”¨æˆ·çš„ä¸»ç»„ï¼Œä¹Ÿå¯èƒ½æ˜¯é™„åŠ ç»„ã€‚</li>
</ol>
<h3 id="2-7-ç£ç›˜ç®¡ç†"><a href="#2-7-ç£ç›˜ç®¡ç†" class="headerlink" title="2.7 ç£ç›˜ç®¡ç†"></a>2.7 ç£ç›˜ç®¡ç†</h3><blockquote>
<p><strong>æ¦‚è¿°</strong></p>
</blockquote>
<p>Linuxç£ç›˜ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p><strong>Linuxç£ç›˜ç®¡ç†å¸¸ç”¨å‘½ä»¤ä¸º dfã€duã€‚</strong></p>
<ul>
<li>df ï¼šåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡</li>
<li>duï¼šæ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡</li>
</ul>
<blockquote>
<p>df</p>
</blockquote>
<p>dfå‘½ä»¤å‚æ•°åŠŸèƒ½ï¼šæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚å¯ä»¥åˆ©ç”¨è¯¥å‘½ä»¤æ¥è·å–ç¡¬ç›˜è¢«å ç”¨äº†å¤šå°‘ç©ºé—´ï¼Œç›®å‰è¿˜å‰©ä¸‹å¤šå°‘ç©ºé—´ç­‰ä¿¡æ¯ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">df [-ahikHTm] [ç›®å½•æˆ–æ–‡ä»¶å]</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-a ï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç³»ç»Ÿç‰¹æœ‰çš„ /proc ç­‰æ–‡ä»¶ç³»ç»Ÿï¼›</li>
<li>-k ï¼šä»¥ KBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼›</li>
<li>-m ï¼šä»¥ MBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼›</li>
<li>-h ï¼šä»¥äººä»¬è¾ƒæ˜“é˜…è¯»çš„ GBytes, MBytes, KBytes ç­‰æ ¼å¼è‡ªè¡Œæ˜¾ç¤ºï¼›</li>
<li>-H ï¼šä»¥ M=1000K å–ä»£ M=1024K çš„è¿›ä½æ–¹å¼ï¼›</li>
<li>-T ï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹, è¿åŒè¯¥ partition çš„ filesystem åç§° (ä¾‹å¦‚ ext3) ä¹Ÿåˆ—å‡ºï¼›</li>
<li>-i ï¼šä¸ç”¨ç¡¬ç›˜å®¹é‡ï¼Œè€Œä»¥ inode çš„æ•°é‡æ¥æ˜¾ç¤º</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># å°†ç³»ç»Ÿå†…æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿåˆ—å‡ºæ¥ï¼</span><br><span class="line"># åœ¨ Linux åº•ä¸‹å¦‚æœ df æ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹</span><br><span class="line"># é‚£ä¹ˆé»˜è®¤ä¼šå°†ç³»ç»Ÿå†…æ‰€æœ‰çš„ (ä¸å«ç‰¹æ®Šå†…å­˜å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸ swap) éƒ½ä»¥ <span class="number">1</span> Kbytes çš„å®¹é‡æ¥åˆ—å‡ºæ¥ï¼</span><br><span class="line">[root@kuangshen /]# df</span><br><span class="line">Filesystem     <span class="number">1</span>K-blocks   Used Available Use% Mounted on</span><br><span class="line">devtmpfs          <span class="number">889100</span>       <span class="number">0</span>    <span class="number">889100</span>   <span class="number">0</span>% /dev</span><br><span class="line">tmpfs             <span class="number">899460</span>     <span class="number">704</span>    <span class="number">898756</span>   <span class="number">1</span>% /dev/shm</span><br><span class="line">tmpfs             <span class="number">899460</span>     <span class="number">496</span>    <span class="number">898964</span>   <span class="number">1</span>% /run</span><br><span class="line">tmpfs             <span class="number">899460</span>       <span class="number">0</span>    <span class="number">899460</span>   <span class="number">0</span>% /sys/<span class="built_in">fs</span>/cgroup</span><br><span class="line">/dev/vda1       <span class="number">41152812</span> <span class="number">6586736</span>  <span class="number">32662368</span>  <span class="number">17</span>% /</span><br><span class="line">tmpfs             <span class="number">179896</span>       <span class="number">0</span>    <span class="number">179896</span>   <span class="number">0</span>% /run/user/<span class="number">0</span></span><br><span class="line"># å°†å®¹é‡ç»“æœä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">[root@kuangshen /]# df -h</span><br><span class="line">Filesystem     Size Used Avail Use% Mounted on</span><br><span class="line">devtmpfs       <span class="number">869</span>M     <span class="number">0</span> <span class="number">869</span>M   <span class="number">0</span>% /dev</span><br><span class="line">tmpfs           <span class="number">879</span>M <span class="number">708</span>K <span class="number">878</span>M   <span class="number">1</span>% /dev/shm</span><br><span class="line">tmpfs           <span class="number">879</span>M <span class="number">496</span>K <span class="number">878</span>M   <span class="number">1</span>% /run</span><br><span class="line">tmpfs           <span class="number">879</span>M     <span class="number">0</span> <span class="number">879</span>M   <span class="number">0</span>% /sys/<span class="built_in">fs</span>/cgroup</span><br><span class="line">/dev/vda1       <span class="number">40</span>G  <span class="number">6</span>.<span class="number">3</span>G   <span class="number">32</span>G  <span class="number">17</span>% /</span><br><span class="line">tmpfs           <span class="number">176</span>M     <span class="number">0</span> <span class="number">176</span>M   <span class="number">0</span>% /run/user/<span class="number">0</span></span><br><span class="line"># å°†ç³»ç»Ÿå†…çš„æ‰€æœ‰ç‰¹æ®Šæ–‡ä»¶æ ¼å¼åŠåç§°éƒ½åˆ—å‡ºæ¥</span><br><span class="line">[root@kuangshen /]# df -<span class="built_in">aT</span></span><br><span class="line">Filesystem     <span class="built_in">Type</span>       <span class="number">1</span>K-blocks   Used Available Use% Mounted on</span><br><span class="line">sysfs         sysfs               <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys</span><br><span class="line">proc           proc                <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /proc</span><br><span class="line">devtmpfs       devtmpfs       <span class="number">889100</span>       <span class="number">0</span>    <span class="number">889100</span>   <span class="number">0</span>% /dev</span><br><span class="line">securityfs     securityfs          <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/kernel/security</span><br><span class="line">tmpfs         tmpfs          <span class="number">899460</span>     <span class="number">708</span>    <span class="number">898752</span>   <span class="number">1</span>% /dev/shm</span><br><span class="line">devpts         devpts              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /dev/pts</span><br><span class="line">tmpfs         tmpfs          <span class="number">899460</span>     <span class="number">496</span>    <span class="number">898964</span>   <span class="number">1</span>% /run</span><br><span class="line">tmpfs         tmpfs          <span class="number">899460</span>       <span class="number">0</span>    <span class="number">899460</span>   <span class="number">0</span>% /sys/<span class="built_in">fs</span>/cgroup</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/systemd</span><br><span class="line">pstore         pstore              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/pstore</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/freezer</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/cpuset</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/hugetlb</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/blkio</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/net_cls,net_prio</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/memory</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/pids</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/cpu,cpuacct</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/devices</span><br><span class="line">cgroup         cgroup              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/<span class="built_in">fs</span>/cgroup/perf_event</span><br><span class="line">configfs       configfs            <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/kernel/config</span><br><span class="line">/dev/vda1     ext4         <span class="number">41152812</span> <span class="number">6586748</span>  <span class="number">32662356</span>  <span class="number">17</span>% /</span><br><span class="line">systemd-<span class="number">1</span>      -                   -       -         -    - /proc/sys/<span class="built_in">fs</span>/binfmt_misc</span><br><span class="line">mqueue         mqueue              <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /dev/mqueue</span><br><span class="line">debugfs       debugfs             <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /sys/kernel/debug</span><br><span class="line">hugetlbfs     hugetlbfs           <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /dev/hugepages</span><br><span class="line">tmpfs         tmpfs          <span class="number">179896</span>       <span class="number">0</span>    <span class="number">179896</span>   <span class="number">0</span>% /run/user/<span class="number">0</span></span><br><span class="line">binfmt_misc   binfmt_misc         <span class="number">0</span>       <span class="number">0</span>         <span class="number">0</span>    - /proc/sys/<span class="built_in">fs</span>/binfmt_misc</span><br><span class="line"># å°† /etc åº•ä¸‹çš„å¯ç”¨çš„ç£ç›˜å®¹é‡ä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">[root@kuangshen /]# df -h /etc</span><br><span class="line">Filesystem     Size Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1       <span class="number">40</span>G  <span class="number">6</span>.<span class="number">3</span>G   <span class="number">32</span>G  <span class="number">17</span>% /</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>du</strong></p>
</blockquote>
<p>Linux duå‘½ä»¤ä¹Ÿæ˜¯æŸ¥çœ‹ä½¿ç”¨ç©ºé—´çš„ï¼Œä½†æ˜¯ä¸dfå‘½ä»¤ä¸åŒçš„æ˜¯Linux duå‘½ä»¤æ˜¯å¯¹æ–‡ä»¶å’Œç›®å½•ç£ç›˜ä½¿ç”¨çš„ç©ºé—´çš„æŸ¥çœ‹ï¼Œè¿˜æ˜¯å’Œdfå‘½ä»¤æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œè¿™é‡Œä»‹ç»Linux duå‘½ä»¤ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">du [-ahskm] æ–‡ä»¶æˆ–ç›®å½•åç§°</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-a ï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ä¸ç›®å½•å®¹é‡ï¼Œå› ä¸ºé»˜è®¤ä»…ç»Ÿè®¡ç›®å½•åº•ä¸‹çš„æ–‡ä»¶é‡è€Œå·²ã€‚</li>
<li>-h ï¼šä»¥äººä»¬è¾ƒæ˜“è¯»çš„å®¹é‡æ ¼å¼ (G/M) æ˜¾ç¤ºï¼›</li>
<li>-s ï¼šåˆ—å‡ºæ€»é‡è€Œå·²ï¼Œè€Œä¸åˆ—å‡ºæ¯ä¸ªå„åˆ«çš„ç›®å½•å ç”¨å®¹é‡ï¼›</li>
<li>-S ï¼šä¸åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ€»è®¡ï¼Œä¸ -s æœ‰ç‚¹å·®åˆ«ã€‚</li>
<li>-k ï¼šä»¥ KBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼›</li>
<li>-m ï¼šä»¥ MBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼›</li>
</ul>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># åªåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å®¹é‡ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶å¤¹ï¼‰:</span><br><span class="line"># ç›´æ¥è¾“å…¥ du æ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹æ—¶ï¼Œåˆ™ du ä¼šåˆ†æå½“å‰æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶ä¸ç›®å½•æ‰€å ç”¨çš„ç¡¬ç›˜ç©ºé—´ã€‚</span><br><span class="line">[root@kuangshen home]# du</span><br><span class="line"><span class="number">16</span>./redis</span><br><span class="line"><span class="number">8</span>./www/.oracle_jre_usage  # åŒ…æ‹¬éšè—æ–‡ä»¶çš„ç›®å½•</span><br><span class="line"><span class="number">24</span>./www</span><br><span class="line"><span class="number">48</span>.                        # è¿™ä¸ªç›®å½•(.)æ‰€å ç”¨çš„æ€»é‡</span><br><span class="line"># å°†æ–‡ä»¶çš„å®¹é‡ä¹Ÿåˆ—å‡ºæ¥</span><br><span class="line">[root@kuangshen home]# du -a</span><br><span class="line"><span class="number">4</span>./redis/.bash_profile</span><br><span class="line"><span class="number">4</span>./redis/.bash_logout    </span><br><span class="line">....ä¸­é—´çœç•¥....</span><br><span class="line"><span class="number">4</span>./kuangstudy.txt # æœ‰æ–‡ä»¶çš„åˆ—è¡¨äº†</span><br><span class="line"><span class="number">48</span>.</span><br><span class="line"># æ£€æŸ¥æ ¹ç›®å½•åº•ä¸‹æ¯ä¸ªç›®å½•æ‰€å ç”¨çš„å®¹é‡</span><br><span class="line">[root@kuangshen home]# du -sm /*</span><br><span class="line"><span class="number">0</span>/bin</span><br><span class="line"><span class="number">146</span>/boot</span><br><span class="line">.....ä¸­é—´çœç•¥....</span><br><span class="line"><span class="number">0</span>/proc</span><br><span class="line">.....ä¸­é—´çœç•¥....</span><br><span class="line"><span class="number">1</span>/tmp</span><br><span class="line"><span class="number">3026</span>/usr  # ç³»ç»ŸåˆæœŸæœ€å¤§å°±æ˜¯ä»–äº†å•¦ï¼</span><br><span class="line"><span class="number">513</span>/var</span><br><span class="line"><span class="number">2666</span>/www</span><br></pre></td></tr></table></figure>

<p>é€šé…ç¬¦ * æ¥ä»£è¡¨æ¯ä¸ªç›®å½•ã€‚</p>
<p>ä¸ df ä¸ä¸€æ ·çš„æ˜¯ï¼Œdu è¿™ä¸ªå‘½ä»¤å…¶å®ä¼šç›´æ¥åˆ°æ–‡ä»¶ç³»ç»Ÿå†…å»æœå¯»æ‰€æœ‰çš„æ–‡ä»¶æ•°æ®ã€‚</p>
<blockquote>
<p><strong>ç£ç›˜æŒ‚è½½ä¸å¸é™¤</strong></p>
</blockquote>
<p>æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–çš„å…¶ä»–æ–‡ä»¶è¦æƒ³èƒ½å¤Ÿè¢«è®¿é—®ï¼Œéƒ½å¿…é¡»é€šè¿‡â€œå…³è”â€è‡³æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æŸä¸ªç›®å½•æ¥å®ç°ï¼Œæ­¤å…³è”æ“ä½œå³ä¸ºâ€œæŒ‚è½½â€ï¼Œæ­¤ç›®å½•å³ä¸ºâ€œæŒ‚è½½ç‚¹â€,è§£é™¤æ­¤å…³è”å…³ç³»çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºâ€œå¸è½½â€</p>
<p><strong>Linux çš„ç£ç›˜æŒ‚è½½ä½¿ç”¨mountå‘½ä»¤ï¼Œå¸è½½ä½¿ç”¨umountå‘½ä»¤ã€‚</strong></p>
<p>ç£ç›˜æŒ‚è½½è¯­æ³•ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">mount [-t æ–‡ä»¶ç³»ç»Ÿ] [-L <span class="built_in">Label</span>å] [-o é¢å¤–é€‰é¡¹] [-n] è£…ç½®æ–‡ä»¶å æŒ‚è½½ç‚¹</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°† /dev/hdc6 æŒ‚è½½åˆ° /mnt/hdc6 ä¸Šé¢ï¼</span></span><br><span class="line">[root@www ~]<span class="comment"># mkdir /mnt/hdc6</span></span><br><span class="line">[root@www ~]<span class="comment"># mount /dev/hdc6 /mnt/hdc6</span></span><br><span class="line">[root@www ~]<span class="comment"># df</span></span><br><span class="line">Filesystem           1K-blocks     Used Available Use% Mounted on</span><br><span class="line">/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6</span><br></pre></td></tr></table></figure>

<p>ç£ç›˜å¸è½½å‘½ä»¤ umount è¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">umount [-fn] è£…ç½®æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹</span><br></pre></td></tr></table></figure>

<p>é€‰é¡¹ä¸å‚æ•°ï¼š</p>
<ul>
<li>-f ï¼šå¼ºåˆ¶å¸é™¤ï¼å¯ç”¨åœ¨ç±»ä¼¼ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ (NFS) æ— æ³•è¯»å–åˆ°çš„æƒ…å†µä¸‹ï¼›</li>
<li>-n ï¼šä¸å‡çº§ /etc/mtab æƒ…å†µä¸‹å¸é™¤ã€‚</li>
</ul>
<p>å¸è½½/dev/hdc6</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@www ~]# umount /dev/hdc6</span><br></pre></td></tr></table></figure>

<h3 id="2-8-è¿›ç¨‹ç®¡ç†"><a href="#2-8-è¿›ç¨‹ç®¡ç†" class="headerlink" title="2.8 è¿›ç¨‹ç®¡ç†"></a>2.8 è¿›ç¨‹ç®¡ç†</h3><blockquote>
<p><strong>psï¼ˆæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼‰</strong></p>
</blockquote>
<p>1ã€åœ¨Linuxä¸­ ,æ¯ä¸€ä¸ªç¨‹åºéƒ½æ˜¯æœ‰è‡ªå·±çš„ä¸€ä¸ªè¿›ç¨‹,æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªidå·!<br>2ã€æ¯ä¸€ä¸ªè¿›ç¨‹å‘¢,éƒ½ä¼šæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹!<br>3ã€è¿›ç¨‹å¯ä»¥æœ‰ä¸¤ç§å­˜åœ¨æ–¹å¼:å‰å°!åå°è¿è¡Œ!<br>4ã€ä¸€èˆ¬çš„è¯æœåŠ¡éƒ½æ˜¯åå°è¿è¡Œçš„ï¼ŒåŸºæœ¬çš„ç¨‹åºéƒ½æ˜¯å‰å°è¿è¡Œçš„</p>
<p>ps æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨æ‰§è¡Œçš„å„ç§è¿›ç¨‹çš„ä¿¡æ¯ï¼<br>ps- xxï¼š<br>â€ƒ -a æ˜¾ç¤ºå½“å‰ç»ˆç«¯æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯<br>â€ƒ -u ä»¥ç”¨æˆ·çš„ä¿¡æ¯æ˜¾ç¤ºè¿›ç¨‹<br>â€ƒ -x æ˜¾ç¤ºåå°è¿è¡Œè¿›ç¨‹çš„å‚æ•°</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">#ps -<span class="built_in">aux</span>  æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹</span><br><span class="line">ps-<span class="built_in">aux</span>|grep mysql  æŸ¥çœ‹mysqlç›¸å…³è¿›ç¨‹</span><br><span class="line"># | åœ¨Linuxä¸­è¿™ä¸ªå«ç®¡é“ç¬¦   A|B</span><br><span class="line"># grep æŸ¥æ‰¾æ–‡ä»¶ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>

<p>å¯¹äºæˆ‘ä»¬æ¥è¯´,è¿™é‡Œç›®å‰åªéœ€è¦è®°ä½ä¸€ä¸ªå‘½ä»¤å³å¯<strong>ps -xx|grepè¿›ç¨‹åå­—!è¿‡æ»¤è¿›ç¨‹ä¿¡æ¯!</strong><br><strong>ps-ef ï¼šå¯ä»¥æŸ¥çœ‹åˆ°çˆ¶è¿›ç¨‹çš„ä¿¡æ¯</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">ps-ef|grep mysql çœ‹çˆ¶è¿›ç¨‹æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥é€šè¿‡ç›®å½•æ ‘ç»“æ„æ¥æŸ¥çœ‹</span><br><span class="line">#è¿›ç¨‹æ ‘</span><br><span class="line">#pstree -pu</span><br><span class="line">#-p æ˜¾ç¤ºçˆ¶id</span><br><span class="line">#-u æ˜¾ç¤ºç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20210506202638975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNjY1NzQ1,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç»“æŸè¿›ç¨‹ï¼šæ€æ‰è¿›ç¨‹ ç­‰ä»·äºWindowsç»“æŸä»»åŠ¡</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">kill -<span class="number">9</span> pid</span><br></pre></td></tr></table></figure>

<h2 id="3ã€ä¸‰ç§è½¯ä»¶å®‰è£…æ–¹å¼åŠæœåŠ¡å™¨åŸºæœ¬ç¯å¢ƒæ­å»º"><a href="#3ã€ä¸‰ç§è½¯ä»¶å®‰è£…æ–¹å¼åŠæœåŠ¡å™¨åŸºæœ¬ç¯å¢ƒæ­å»º" class="headerlink" title="3ã€ä¸‰ç§è½¯ä»¶å®‰è£…æ–¹å¼åŠæœåŠ¡å™¨åŸºæœ¬ç¯å¢ƒæ­å»º"></a>3ã€ä¸‰ç§è½¯ä»¶å®‰è£…æ–¹å¼åŠæœåŠ¡å™¨åŸºæœ¬ç¯å¢ƒæ­å»º</h2><h3 id="3-1-jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰"><a href="#3-1-jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰" class="headerlink" title="3.1 jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰"></a>3.1 jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰</h3><p>1ã€rpmä¸‹è½½åœ°å€<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
<p>2ã€å¦‚æœæœ‰å®‰è£…openjdk åˆ™å¸è½½</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen ~]# java -version</span><br><span class="line">java version &quot;<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_121&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build <span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_121-b13)</span><br><span class="line">Java HotSpot(TM) <span class="number">64</span>-Bit Server VM (build <span class="number">25</span>.<span class="number">121</span>-b13, mixed <span class="built_in">mode</span>)</span><br><span class="line"># æ£€æŸ¥</span><br><span class="line">[root@kuangshen ~]# rpm -qa|grep jdk</span><br><span class="line">jdk1.<span class="number">8</span>.<span class="number">0</span>_121-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_121-fcs.x86_64</span><br><span class="line"># å¸è½½ -e --nodeps å¼ºåˆ¶åˆ é™¤</span><br><span class="line">[root@kuangshen ~]# rpm -e --nodeps jdk1.<span class="number">8</span>.<span class="number">0</span>_121-<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_121-fcs.x86_64</span><br><span class="line">[root@kuangshen ~]# java -version</span><br><span class="line">-bash: /usr/bin/java: No such file or directory  # OK</span><br></pre></td></tr></table></figure>

<p>3ã€å®‰è£…JDK</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># å®‰è£…java rpm</span><br><span class="line">[root@kuangshen kuangshen]# rpm -ivh jdk-<span class="number">8</span>u221-linux-x64.rpm</span><br><span class="line"> </span><br><span class="line"># å®‰è£…å®Œæˆåé…ç½®ç¯å¢ƒå˜é‡ æ–‡ä»¶ï¼š/etc/profile</span><br><span class="line">JAVA_HOME=/usr/java/jdk1.<span class="number">8</span>.<span class="number">0</span>_221-amd64</span><br><span class="line">CLASSPATH=<span class="variable">%JAVA_HOME%</span>/lib:<span class="variable">%JAVA_HOME%</span>/jre/lib</span><br><span class="line"><span class="built_in">PATH</span>=$<span class="built_in">PATH</span>:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</span><br><span class="line">export <span class="built_in">PATH</span> CLASSPATH JAVA_HOME</span><br><span class="line"># ä¿å­˜é€€å‡º</span><br><span class="line"> </span><br><span class="line"># è®©æ–°å¢çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼</span><br><span class="line">source /etc/profile</span><br><span class="line"> </span><br><span class="line"># æµ‹è¯• java -version</span><br><span class="line">[root@kuangshen java]# java -version</span><br><span class="line">java version &quot;<span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_221&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build <span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_221-b11)</span><br><span class="line">Java HotSpot(TM) <span class="number">64</span>-Bit Server VM (build <span class="number">25</span>.<span class="number">221</span>-b11, mixed <span class="built_in">mode</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>firewall-cmd â€“list-port</strong> æŸ¥çœ‹ç«¯å£å·ï¼Œ</li>
<li><strong>systemctl start firewalld</strong> å¯åŠ¨é˜²ç«å¢™</li>
<li><strong>firewall-cmd â€“permanent â€“zone=public â€“add-port=ç«¯å£å·/tcp</strong></li>
<li>systemctl status firewalld æŸ¥çœ‹çŠ¶æ€</li>
<li><strong>systemctl restart firewalld.service</strong> é‡å¯é˜²ç«å¢™</li>
<li>java -jar xxx // å‰å°è¿è¡Œ</li>
<li><strong>nohup command &amp; java -jar kuang-0.0.1-SNAPSHOT.jar //åå°è¿è¡Œ</strong></li>
</ul>
<h3 id="3-2-Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰"><a href="#3-2-Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰" class="headerlink" title="3.2 Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰"></a>3.2 Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰</h3><p>1ã€å®‰è£…å¥½äº†Javaç¯å¢ƒåæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸‹Tomcatï¼å‡†å¤‡å¥½Tomcatçš„å®‰è£…åŒ…ï¼</p>
<p>2ã€å°†æ–‡ä»¶ç§»åŠ¨åˆ°/usr/tomcat/ä¸‹ï¼Œå¹¶è§£å‹ï¼</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">[root@kuangshen kuangshen]# mv apache-tomcat-<span class="number">9</span>.<span class="number">0</span>.<span class="number">22</span>.tar.gz /usr</span><br><span class="line">[root@kuangshen kuangshen]# <span class="built_in">cd</span> /usr</span><br><span class="line">[root@kuangshen usr]# ls</span><br><span class="line">apache-tomcat-<span class="number">9</span>.<span class="number">0</span>.<span class="number">22</span>.tar.gz</span><br><span class="line">[root@kuangshen usr]# tar -zxvf apache-tomcat-<span class="number">9</span>.<span class="number">0</span>.<span class="number">22</span>.tar.gz   # è§£å‹</span><br></pre></td></tr></table></figure>

<p>3ã€è¿è¡ŒTomcatï¼Œè¿›å…¥binç›®å½•ï¼Œå’Œæˆ‘ä»¬ä»¥å‰åœ¨Windowsä¸‹çœ‹çš„éƒ½æ˜¯ä¸€æ ·çš„</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># æ‰§è¡Œï¼šstartup.sh  --&gt;å¯åŠ¨tomcat</span><br><span class="line"># æ‰§è¡Œï¼šshutdown.sh --&gt;å…³é—­tomcat</span><br><span class="line">./startup.sh</span><br><span class="line">./shutdown.sh</span><br></pre></td></tr></table></figure>

<p>4ã€ç¡®ä¿Linuxçš„é˜²ç«å¢™ç«¯å£æ˜¯å¼€å¯çš„ï¼Œå¦‚æœæ˜¯é˜¿é‡Œäº‘ï¼Œéœ€è¦ä¿è¯é˜¿é‡Œäº‘çš„å®‰å…¨ç»„ç­–ç•¥æ˜¯å¼€æ”¾çš„ï¼</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># æŸ¥çœ‹firewallæœåŠ¡çŠ¶æ€</span><br><span class="line">systemctl status firewalld</span><br><span class="line"> </span><br><span class="line"># å¼€å¯ã€é‡å¯ã€å…³é—­ã€firewalld.serviceæœåŠ¡</span><br><span class="line"># å¼€å¯</span><br><span class="line">service firewalld <span class="built_in">start</span></span><br><span class="line"># é‡å¯</span><br><span class="line">service firewalld restart</span><br><span class="line"># å…³é—­</span><br><span class="line">service firewalld stop</span><br><span class="line"> </span><br><span class="line"># æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™</span><br><span class="line">firewall-<span class="built_in">cmd</span> --list-all    # æŸ¥çœ‹å…¨éƒ¨ä¿¡æ¯</span><br><span class="line">firewall-<span class="built_in">cmd</span> --list-ports  # åªçœ‹ç«¯å£ä¿¡æ¯</span><br><span class="line"> </span><br><span class="line"># å¼€å¯ç«¯å£</span><br><span class="line">å¼€ç«¯å£å‘½ä»¤ï¼šfirewall-<span class="built_in">cmd</span> --zone=public --add-port=<span class="number">80</span>/tcp --permanent</span><br><span class="line">é‡å¯é˜²ç«å¢™ï¼šsystemctl restart firewalld.service</span><br><span class="line"> </span><br><span class="line">å‘½ä»¤å«ä¹‰ï¼š</span><br><span class="line">--zone #ä½œç”¨åŸŸ</span><br><span class="line">--add-port=<span class="number">80</span>/tcp  #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®</span><br><span class="line">--permanent   #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ</span><br></pre></td></tr></table></figure>

<p> å¦‚æœæ˜¯é˜¿é‡Œäº‘ ä¸Šä¼ å®Œæ¯•çš„é¡¹ç›®ç›´æ¥è´­ä¹°è‡ªå·±çš„åŸŸå,<strong>å¤‡æ¡ˆè§£æ</strong>è¿‡å»å³å¯!<br><strong>åŸŸåè§£æå,å¦‚æœç«¯å£æ˜¯80 - httpæˆ–è€…443-https å¯ä»¥ç›´æ¥è®¿é—®,å¦‚æœæ˜¯9000 8080 ,å°±éœ€è¦é€šè¿‡Apcaheæˆ–è€…Nginxåšä¸€ä¸‹åå‘ä»£ç†å³å¯ï¼ˆé…ç½®æ–‡ä»¶ï¼‰</strong></p>
<h3 id="3-å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰"><a href="#3-å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰" class="headerlink" title="3.å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰"></a>3.å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰</h3><blockquote>
<p>åŸºäº CentOS 7 å®‰è£…</p>
</blockquote>
<ol>
<li><p>å®˜ç½‘å®‰è£…å‚è€ƒæ‰‹å†Œï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/">https://docs.docker.com/install/linux/docker-ce/centos/</a></p>
</li>
<li><p>ç¡®å®šä½ æ˜¯CentOS7åŠä»¥ä¸Šç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@192 Desktop]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br></pre></td></tr></table></figure></li>
<li><p>yumå®‰è£…gccç›¸å…³ï¼ˆéœ€è¦ç¡®ä¿ è™šæ‹Ÿæœºå¯ä»¥ä¸Šå¤–ç½‘ ï¼‰</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install gcc</span><br><span class="line">yum -y install gcc-c++</span><br></pre></td></tr></table></figure>

<ol>
<li>å¸è½½æ—§ç‰ˆæœ¬</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y remove docker docker-common docker-selinux docker-engine</span><br><span class="line"><span class="comment"># å®˜ç½‘ç‰ˆæœ¬</span></span><br><span class="line">yum remove docker \</span><br><span class="line">            docker-client \</span><br><span class="line">            docker-client-latest \</span><br><span class="line">            docker-common \</span><br><span class="line">            docker-latest \</span><br><span class="line">            docker-latest-logrotate \</span><br><span class="line">            docker-logrotate \</span><br><span class="line">            docker-engine</span><br></pre></td></tr></table></figure>

<ol>
<li>å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>

<ol>
<li>è®¾ç½®stableé•œåƒä»“åº“</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é”™è¯¯</span></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment">## æŠ¥é”™</span></span><br><span class="line">[Errno 14] curl<span class="comment">#35 - TCP connection reset by peer</span></span><br><span class="line">[Errno 12] curl<span class="comment">#35 - Timeout</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ­£ç¡®æ¨èä½¿ç”¨å›½å†…çš„</span></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<ol>
<li>æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure>

<ol>
<li>å®‰è£…Docker CE</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<ol>
<li>å¯åŠ¨docker</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">docker version</span><br><span class="line"> </span><br><span class="line">docker run hello-world</span><br><span class="line"> </span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h3 id="4-å‚»ç“œå¼ï¼ˆå®å¡”é¢æ¿ï¼‰"><a href="#4-å‚»ç“œå¼ï¼ˆå®å¡”é¢æ¿ï¼‰" class="headerlink" title="4.å‚»ç“œå¼ï¼ˆå®å¡”é¢æ¿ï¼‰"></a>4.å‚»ç“œå¼ï¼ˆå®å¡”é¢æ¿ï¼‰</h3><p>å®å¡”é¢æ¿å®‰è£…æ•™å­¦ï¼š<a href="https://www.bt.cn/bbs/thread-19376-1-1.html">https://www.bt.cn/bbs/thread-19376-1-1.html</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</span><br></pre></td></tr></table></figure>

<p>ä¸‹è½½å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåœ°å€ï¼šå®å¡”çš„ç®¡ç†é¢æ¿</p>
<ul>
<li>url</li>
<li>username</li>
<li>password</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200603113130373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0N1dGVfYmFieQ==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitå­¦ä¹ </title>
    <url>/2022/06/23/Git%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="1ã€ç‰ˆæœ¬æ§åˆ¶"><a href="#1ã€ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="1ã€ç‰ˆæœ¬æ§åˆ¶"></a>1ã€ç‰ˆæœ¬æ§åˆ¶</h2><h3 id="1-1ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶"><a href="#1-1ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="1.1ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶"></a>1.1ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶</h3><p>ç‰ˆæœ¬æ§åˆ¶ï¼ˆRevision controlï¼‰æ˜¯ä¸€ç§åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ç”¨äºç®¡ç†æˆ‘ä»¬å¯¹æ–‡ä»¶ã€ç›®å½•æˆ–å·¥ç¨‹ç­‰å†…å®¹çš„ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ›´æ”¹å†å²è®°å½•ï¼Œå¤‡ä»½ä»¥ä¾¿æ¢å¤ä»¥å‰çš„ç‰ˆæœ¬çš„è½¯ä»¶å·¥ç¨‹æŠ€æœ¯ã€‚</p>
<ul>
<li>å®ç°è·¨åŒºåŸŸå¤šäººååŒå¼€å‘</li>
<li>è¿½è¸ªå’Œè®°è½½ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶çš„å†å²è®°å½•</li>
<li>ç»„ç»‡å’Œä¿æŠ¤ä½ çš„æºä»£ç å’Œæ–‡æ¡£</li>
<li>ç»Ÿè®¡å·¥ä½œé‡</li>
<li>å¹¶è¡Œå¼€å‘ã€æé«˜å¼€å‘æ•ˆç‡</li>
<li>è·Ÿè¸ªè®°å½•æ•´ä¸ªè½¯ä»¶çš„å¼€å‘è¿‡ç¨‹</li>
<li>å‡è½»å¼€å‘äººå‘˜çš„è´Ÿæ‹…ï¼ŒèŠ‚çœæ—¶é—´ï¼ŒåŒæ—¶é™ä½äººä¸ºé”™è¯¯</li>
</ul>
<p>ç®€å•è¯´å°±æ˜¯ç”¨äºç®¡ç†å¤šäººååŒå¼€å‘é¡¹ç›®çš„æŠ€æœ¯ã€‚</p>
<p>æ²¡æœ‰è¿›è¡Œç‰ˆæœ¬æ§åˆ¶æˆ–è€…ç‰ˆæœ¬æ§åˆ¶æœ¬èº«ç¼ºä¹æ­£ç¡®çš„æµç¨‹ç®¡ç†ï¼Œåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å°†ä¼šå¼•å…¥å¾ˆå¤šé—®é¢˜ï¼Œå¦‚è½¯ä»¶ä»£ç çš„ä¸€è‡´æ€§ã€è½¯ä»¶å†…å®¹çš„å†—ä½™ã€è½¯ä»¶è¿‡ç¨‹çš„äº‹ç‰©æ€§ã€è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„å¹¶å‘æ€§ã€è½¯ä»¶æºä»£ç çš„å®‰å…¨æ€§ï¼Œä»¥åŠè½¯ä»¶çš„æ•´åˆç­‰é—®é¢˜ã€‚</p>
<p>æ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯å­¦ä¹ ï¼Œæˆ–è€…æ˜¯è‡ªå·±åšç¬”è®°ï¼Œéƒ½ç»å†è¿‡è¿™æ ·ä¸€ä¸ªé˜¶æ®µï¼æˆ‘ä»¬å°±è¿«åˆ‡éœ€è¦ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼</p>
<h3 id="1-2å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·"><a href="#1-2å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·" class="headerlink" title="1.2å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·"></a>1.2å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·</h3><p>æˆ‘ä»¬å­¦ä¹ çš„ä¸œè¥¿ï¼Œä¸€å®šæ˜¯å½“ä¸‹æœ€æµè¡Œçš„ï¼</p>
<p>ä¸»æµçš„ç‰ˆæœ¬æ§åˆ¶å™¨æœ‰å¦‚ä¸‹è¿™äº›ï¼š</p>
<ul>
<li><strong>Git</strong></li>
<li><strong>SVN</strong>ï¼ˆSubversionï¼‰</li>
<li><strong>CVS</strong>ï¼ˆConcurrent Versions Systemï¼‰</li>
<li><strong>VSS</strong>ï¼ˆMicorosoft Visual SourceSafeï¼‰</li>
<li><strong>TFS</strong>ï¼ˆTeam Foundation Serverï¼‰</li>
<li>Visual Studio Online</li>
</ul>
<p>ç‰ˆæœ¬æ§åˆ¶äº§å“éå¸¸çš„å¤šï¼ˆPerforceã€Rational ClearCaseã€RCSï¼ˆGNU Revision Control Systemï¼‰ã€Serena Dimentionã€SVKã€BitKeeperã€Monotoneã€Bazaarã€Mercurialã€SourceGear Vaultï¼‰<strong>ï¼Œç°åœ¨å½±å“åŠ›æœ€å¤§ä¸”ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯Gitä¸SVN</strong></p>
<h3 id="1-3ç‰ˆæœ¬æ§åˆ¶åˆ†ç±»"><a href="#1-3ç‰ˆæœ¬æ§åˆ¶åˆ†ç±»" class="headerlink" title="1.3ç‰ˆæœ¬æ§åˆ¶åˆ†ç±»"></a>1.3ç‰ˆæœ¬æ§åˆ¶åˆ†ç±»</h3><p><strong>1ã€æœ¬åœ°ç‰ˆæœ¬æ§åˆ¶</strong></p>
<p>è®°å½•æ–‡ä»¶æ¯æ¬¡çš„æ›´æ–°ï¼Œå¯ä»¥å¯¹æ¯ä¸ªç‰ˆæœ¬åšä¸€ä¸ªå¿«ç…§ï¼Œæˆ–æ˜¯è®°å½•è¡¥ä¸æ–‡ä»¶ï¼Œé€‚åˆä¸ªäººç”¨ï¼Œå¦‚RCSã€‚</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMERnM2ZIcmJQcWJORU9NTzlHVGpGaFZhdWtNWld4NTRpY1M3ZVMyeDhBN0JFdTBWQjlpYndFaHpRLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>2ã€é›†ä¸­ç‰ˆæœ¬æ§åˆ¶ SVN</strong></p>
<p>æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼ŒååŒå¼€å‘è€…ä»æœåŠ¡å™¨ä¸ŠåŒæ­¥æ›´æ–°æˆ–ä¸Šä¼ è‡ªå·±çš„ä¿®æ”¹</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMDBWNHVMYWlieHRaSTlSTHBxN3RrU2RsV2lhRjkyQVZlWjBpYjlEaWNxQmtTMnBvbzV1OHNFVTJtQ1EvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·çš„æœ¬åœ°åªæœ‰è‡ªå·±ä»¥å‰æ‰€åŒæ­¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸è¿ç½‘çš„è¯ï¼Œç”¨æˆ·å°±çœ‹ä¸åˆ°å†å²ç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•åˆ‡æ¢ç‰ˆæœ¬éªŒè¯é—®é¢˜ï¼Œæˆ–åœ¨ä¸åŒåˆ†æ”¯å·¥ä½œã€‚è€Œä¸”ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å•ä¸€çš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¾ˆå¤§çš„é£é™©è¿™ä¸ªæœåŠ¡å™¨ä¼šæŸåï¼Œè¿™æ ·å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„æ•°æ®ï¼Œå½“ç„¶å¯ä»¥å®šæœŸå¤‡ä»½ã€‚ä»£è¡¨äº§å“ï¼šSVNã€CVSã€VSS</p>
<p><strong>3ã€åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ Git</strong></p>
<p>æ¯ä¸ªäººéƒ½æ‹¥æœ‰å…¨éƒ¨çš„ä»£ç ï¼å®‰å…¨éšæ‚£ï¼</p>
<p>æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ä»“åº“å…¨éƒ¨åŒæ­¥åˆ°æœ¬åœ°çš„æ¯ä¸ªç”¨æˆ·ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬å†å²ï¼Œå¯ä»¥ç¦»çº¿åœ¨æœ¬åœ°æäº¤ï¼Œåªéœ€åœ¨è¿ç½‘æ—¶pushåˆ°ç›¸åº”çš„æœåŠ¡å™¨æˆ–å…¶ä»–ç”¨æˆ·é‚£é‡Œã€‚ç”±äºæ¯ä¸ªç”¨æˆ·é‚£é‡Œä¿å­˜çš„éƒ½æ˜¯æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®ï¼Œåªè¦æœ‰ä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡æ²¡æœ‰é—®é¢˜å°±å¯ä»¥æ¢å¤æ‰€æœ‰çš„æ•°æ®ï¼Œä½†è¿™å¢åŠ äº†æœ¬åœ°å­˜å‚¨ç©ºé—´çš„å ç”¨ã€‚</p>
<p>ä¸ä¼šå› ä¸ºæœåŠ¡å™¨æŸåæˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œé€ æˆä¸èƒ½å·¥ä½œçš„æƒ…å†µï¼</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMGV2OFE3cVhqc1RmZVN3RmV4ZEE0dEdqRkFpYVZFS1F6QUhkR2NJTlhJTEtmbEkyY2ZrOUJpYXdRLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<h2 id="2ã€Gitä¸SVNçš„ä¸»è¦åŒºåˆ«"><a href="#2ã€Gitä¸SVNçš„ä¸»è¦åŒºåˆ«" class="headerlink" title="2ã€Gitä¸SVNçš„ä¸»è¦åŒºåˆ«"></a>2ã€<strong>Gitä¸SVNçš„ä¸»è¦åŒºåˆ«</strong></h2><p><strong>SVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„</strong>ï¼Œè€Œå·¥ä½œçš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œæ‰€ä»¥é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨å¾—åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå·¥ä½œï¼Œå®Œæˆå·¥ä½œåï¼Œéœ€è¦æŠŠè‡ªå·±åšå®Œçš„æ´»æ¨é€åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¯¹ç½‘ç»œå¸¦å®½è¦æ±‚è¾ƒé«˜ã€‚<br>Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨ï¼Œæ¯ä¸ªäººçš„ç”µè„‘å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œå·¥ä½œçš„æ—¶å€™ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬éƒ½åœ¨è‡ªå·±ç”µè„‘ä¸Šã€‚ååŒçš„æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼šæ¯”å¦‚è¯´è‡ªå·±åœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œå…¶ä»–äººä¹Ÿåœ¨ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¸¤ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚Gitå¯ä»¥ç›´æ¥çœ‹åˆ°æ›´æ–°äº†å“ªäº›ä»£ç å’Œæ–‡ä»¶ï¼</p>
<p><strong>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</strong></p>
<p>èŠèŠGitçš„å†å²</p>
<p>åŒç”Ÿæ´»ä¸­çš„è®¸å¤šä¼Ÿå¤§äº‹ç‰©ä¸€æ ·ï¼ŒGit è¯ç”Ÿäºä¸€ä¸ªæå¯Œçº·äº‰å¤§ä¸¾åˆ›æ–°çš„å¹´ä»£ã€‚</p>
<p>Linux å†…æ ¸å¼€æºé¡¹ç›®æœ‰ç€ä¸ºæ•°ä¼—å¹¿çš„å‚ä¸è€…ã€‚ç»å¤§å¤šæ•°çš„ Linux å†…æ ¸ç»´æŠ¤å·¥ä½œéƒ½èŠ±åœ¨äº†æäº¤è¡¥ä¸å’Œä¿å­˜å½’æ¡£çš„ç¹çäº‹åŠ¡ä¸Š(1991ï¼2002å¹´é—´)ã€‚åˆ° 2002 å¹´ï¼Œæ•´ä¸ªé¡¹ç›®ç»„å¼€å§‹å¯ç”¨ä¸€ä¸ªä¸“æœ‰çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ BitKeeper æ¥ç®¡ç†å’Œç»´æŠ¤ä»£ç ã€‚</p>
<p>Linuxç¤¾åŒºä¸­å­˜åœ¨å¾ˆå¤šçš„å¤§ä½¬ï¼ç ´è§£ç ”ç©¶ BitKeeper ï¼</p>
<p>åˆ°äº† 2005 å¹´ï¼Œå¼€å‘ BitKeeper çš„å•†ä¸šå…¬å¸åŒ Linux å†…æ ¸å¼€æºç¤¾åŒºçš„åˆä½œå…³ç³»ç»“æŸï¼Œä»–ä»¬æ”¶å›äº† Linux å†…æ ¸ç¤¾åŒºå…è´¹ä½¿ç”¨ BitKeeper çš„æƒåŠ›ã€‚è¿™å°±è¿«ä½¿ Linux å¼€æºç¤¾åŒº(ç‰¹åˆ«æ˜¯ Linux çš„ç¼”é€ è€… Linus Torvalds)åŸºäºä½¿ç”¨ BitKeeper æ—¶çš„ç»éªŒæ•™è®­ï¼Œå¼€å‘å‡ºè‡ªå·±çš„ç‰ˆæœ¬ç³»ç»Ÿã€‚ï¼ˆ2å‘¨å·¦å³ï¼ï¼‰ ä¹Ÿå°±æ˜¯åæ¥çš„ Gitï¼</p>
<p>Gitæ˜¯å…è´¹ã€å¼€æºçš„ï¼Œæœ€åˆGitæ˜¯ä¸ºè¾…åŠ© Linux å†…æ ¸å¼€å‘çš„ï¼Œæ¥æ›¿ä»£ BitKeeperï¼Linuxå’ŒGitä¹‹çˆ¶æçº³æ–¯Â·æ‰˜æ²ƒå…¹ï¼ˆLinus Benedic Torvaldsï¼‰1969ã€èŠ¬å…°</p>
<p>Gitç¯å¢ƒé…ç½®</p>
<h2 id="3ã€è½¯ä»¶ä¸‹è½½"><a href="#3ã€è½¯ä»¶ä¸‹è½½" class="headerlink" title="3ã€è½¯ä»¶ä¸‹è½½"></a>3ã€è½¯ä»¶ä¸‹è½½</h2><p>æ‰“å¼€ [gitå®˜ç½‘] **<a href="https://git-scm.com/**%EF%BC%8C%E4%B8%8B%E8%BD%BDgit%E5%AF%B9%E5%BA%94%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%88%E6%9C%AC%E3%80%82">https://git-scm.com/**ï¼Œä¸‹è½½gitå¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚</a></p>
<p>æ‰€æœ‰ä¸œè¥¿ä¸‹è½½æ…¢çš„è¯å°±å¯ä»¥å»æ‰¾é•œåƒï¼</p>
<p>å®˜ç½‘ä¸‹è½½å¤ªæ…¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ·˜å®é•œåƒä¸‹è½½ï¼š<strong><a href="http://npm.taobao.org/mirrors/git-for-windows/">http://npm.taobao.org/mirrors/git-for-windows/</a></strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMElYa3RzZUJSN2xwdlZGNGJpYkZ3aWFpYm5HeGtEbTB3WWljUElpYVp4Y1VlMkt1aWJBSGo4M01pYVdGU1EvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬å³å¯å®‰è£…ï¼</p>
<p>å®‰è£…ï¼šæ— è„‘ä¸‹ä¸€æ­¥å³å¯ï¼å®‰è£…å®Œæ¯•å°±å¯ä»¥ä½¿ç”¨äº†ï¼</p>
<h2 id="4ã€å¯åŠ¨Git"><a href="#4ã€å¯åŠ¨Git" class="headerlink" title="4ã€å¯åŠ¨Git"></a>4ã€<strong>å¯åŠ¨Git</strong></h2><p>å®‰è£…æˆåŠŸååœ¨å¼€å§‹èœå•ä¸­ä¼šæœ‰Gité¡¹ï¼Œèœå•ä¸‹æœ‰3ä¸ªç¨‹åºï¼šä»»æ„æ–‡ä»¶å¤¹ä¸‹å³é”®ä¹Ÿå¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç¨‹åºï¼</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMGphaWFBZnIycEFmV3RGWDU3a0dZcVIzU2xOeERsQVpEa0NVNklPQjFZQWljS3hIaWI1eUdidjl6US82NDA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>Git Bash</strong>ï¼šUnixä¸Linuxé£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š</p>
<p><strong>Git CMD</strong>ï¼šWindowsé£æ ¼çš„å‘½ä»¤è¡Œ</p>
<p><strong>Git GUI</strong>ï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤</p>
<h3 id="4-1å¸¸ç”¨çš„Linuxå‘½ä»¤"><a href="#4-1å¸¸ç”¨çš„Linuxå‘½ä»¤" class="headerlink" title="4.1å¸¸ç”¨çš„Linuxå‘½ä»¤"></a>4.1å¸¸ç”¨çš„Linuxå‘½ä»¤</h3><p>å¹³æ—¶ä¸€å®šè¦å¤šä½¿ç”¨è¿™äº›åŸºç¡€çš„å‘½ä»¤ï¼</p>
<p>1ï¼‰ã€cd : æ”¹å˜ç›®å½•ã€‚</p>
<p>2ï¼‰ã€cd . . å›é€€åˆ°ä¸Šä¸€ä¸ªç›®å½•ï¼Œç›´æ¥cdè¿›å…¥é»˜è®¤ç›®å½•</p>
<p>3ï¼‰ã€pwd : æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚</p>
<p>4ï¼‰ã€ls(ll): éƒ½æ˜¯åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåªä¸è¿‡ll(ä¸¤ä¸ªll)åˆ—å‡ºçš„å†…å®¹æ›´ä¸ºè¯¦ç»†ã€‚</p>
<p>5ï¼‰ã€touch : æ–°å»ºä¸€ä¸ªæ–‡ä»¶ å¦‚ touch index.js å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ã€‚</p>
<p>6ï¼‰ã€rm: åˆ é™¤ä¸€ä¸ªæ–‡ä»¶, rm index.js å°±ä¼šæŠŠindex.jsæ–‡ä»¶åˆ é™¤ã€‚</p>
<p>7ï¼‰ã€mkdir: æ–°å»ºä¸€ä¸ªç›®å½•,å°±æ˜¯æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</p>
<p>8ï¼‰ã€rm -r : åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹, rm -r src åˆ é™¤srcç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /  åˆ‡å‹¿åœ¨Linuxä¸­å°è¯•ï¼åˆ é™¤ç”µè„‘ä¸­å…¨éƒ¨æ–‡ä»¶ï¼</span><br></pre></td></tr></table></figure>

<p>9ï¼‰ã€mv ç§»åŠ¨æ–‡ä»¶, mv index.html src index.html æ˜¯æˆ‘ä»¬è¦ç§»åŠ¨çš„æ–‡ä»¶, src æ˜¯ç›®æ ‡æ–‡ä»¶å¤¹,å½“ç„¶, è¿™æ ·å†™,å¿…é¡»ä¿è¯æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶å¤¹åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚</p>
<p>10ï¼‰ã€reset é‡æ–°åˆå§‹åŒ–ç»ˆç«¯/æ¸…å±ã€‚</p>
<p>11ï¼‰ã€clear æ¸…å±ã€‚</p>
<p>12ï¼‰ã€history æŸ¥çœ‹å‘½ä»¤å†å²ã€‚</p>
<p>13ï¼‰ã€help å¸®åŠ©ã€‚</p>
<p>14ï¼‰ã€exit é€€å‡ºã€‚</p>
<p>15ï¼‰ã€#è¡¨ç¤ºæ³¨é‡Š</p>
<h3 id="4-2Gité…ç½®"><a href="#4-2Gité…ç½®" class="headerlink" title="4.2Gité…ç½®"></a>4.2Gité…ç½®</h3><p>æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å®éƒ½ä¿å­˜åœ¨æœ¬åœ°ï¼</p>
<p>æŸ¥çœ‹é…ç½® <strong>git config -l</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEdKQU5pYnM4NkR3WXFvQURkZ1p5U0dpYm1hZlI4cDFYQnE2WkczdDBKMndTZzlpY3JJVlZRbzZkUS82NDA?x-oss-process=image/format,png" alt="img"></p>
<p>æŸ¥çœ‹ä¸åŒçº§åˆ«çš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹ç³»ç»Ÿconfig</span></span><br><span class="line">git config --system --<span class="keyword">list</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span></span><br><span class="line">git config --<span class="keyword">global</span>  --<span class="keyword">list</span></span><br></pre></td></tr></table></figure>

<p><strong>Gitç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼š</strong></p>
<p>1ï¼‰ã€Git\etc\gitconfig ï¼šGit å®‰è£…ç›®å½•ä¸‹çš„ gitconfig â€“system ç³»ç»Ÿçº§</p>
<p>2ï¼‰ã€C:\Users\Administrator\ .gitconfig åªé€‚ç”¨äºå½“å‰ç™»å½•ç”¨æˆ·çš„é…ç½® â€“global å…¨å±€</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMGhjSlMwcnhqM3FvQ1Z2ZkRLaDNXeHdRSmxTVjNQMTVFSVp1ZWpyYU93WExkaWM2TkNCOFg4b1EvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>è¿™é‡Œå¯ä»¥ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å‘½ä»¤è®¾ç½®åä¼šå“åº”åˆ°è¿™é‡Œã€‚</p>
<h3 id="4-3è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±ï¼ˆç”¨æˆ·æ ‡è¯†ï¼Œå¿…è¦ï¼‰"><a href="#4-3è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±ï¼ˆç”¨æˆ·æ ‡è¯†ï¼Œå¿…è¦ï¼‰" class="headerlink" title="4.3è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±ï¼ˆç”¨æˆ·æ ‡è¯†ï¼Œå¿…è¦ï¼‰"></a>4.3<strong>è®¾ç½®ç”¨æˆ·åä¸é‚®ç®±ï¼ˆç”¨æˆ·æ ‡è¯†ï¼Œå¿…è¦ï¼‰</strong></h3><p>å½“ä½ å®‰è£…Gitåé¦–å…ˆè¦åšçš„äº‹æƒ…æ˜¯è®¾ç½®ä½ çš„ç”¨æˆ·åç§°å’Œe-mailåœ°å€ã€‚è¿™æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºæ¯æ¬¡Gitæäº¤éƒ½ä¼šä½¿ç”¨è¯¥ä¿¡æ¯ã€‚å®ƒè¢«æ°¸è¿œçš„åµŒå…¥åˆ°äº†ä½ çš„æäº¤ä¸­ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;kuangshen&quot;  #åç§°</span><br><span class="line">git config --global user.email <span class="number">24736743</span>@qq.com   #é‚®ç®±</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦åšä¸€æ¬¡è¿™ä¸ªè®¾ç½®ï¼Œå¦‚æœä½ ä¼ é€’äº†â€“global é€‰é¡¹ï¼Œå› ä¸ºGitå°†æ€»æ˜¯ä¼šä½¿ç”¨è¯¥ä¿¡æ¯æ¥å¤„ç†ä½ åœ¨ç³»ç»Ÿä¸­æ‰€åšçš„ä¸€åˆ‡æ“ä½œã€‚å¦‚æœä½ å¸Œæœ›åœ¨ä¸€ä¸ªç‰¹å®šçš„é¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒçš„åç§°æˆ–e-mailåœ°å€ï¼Œä½ å¯ä»¥åœ¨è¯¥é¡¹ç›®ä¸­è¿è¡Œè¯¥å‘½ä»¤è€Œä¸è¦â€“globalé€‰é¡¹ã€‚æ€»ä¹‹â€“globalä¸ºå…¨å±€é…ç½®ï¼Œä¸åŠ ä¸ºæŸä¸ªé¡¹ç›®çš„ç‰¹å®šé…ç½®ã€‚<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMHpRWlkzN3ExaWFHMG43NDQ1WDhZZ1BWdlpINUFxeUd2VDRSZ21veUljWmxKV2lhTGN4eURnU2RRLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p>GitåŸºæœ¬ç†è®ºï¼ˆé‡è¦ï¼‰</p>
<h3 id="4-4ä¸‰ä¸ªåŒºåŸŸ"><a href="#4-4ä¸‰ä¸ªåŒºåŸŸ" class="headerlink" title="4.4ä¸‰ä¸ªåŒºåŸŸ"></a>4.4ä¸‰ä¸ªåŒºåŸŸ</h3><p>Gitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼š<strong>å·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage/Index)ã€èµ„æºåº“(Repositoryæˆ–Git Directory)ã€‚</strong>å¦‚æœåœ¨åŠ ä¸Š**è¿œç¨‹çš„gitä»“åº“(Remote Directory)**å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwME5KNEw5T1BJOWlhMU1taWJwdkRkNmNTZGRCZHZybGJkRXR5RU9yaDRDS25XVmlieWZDSGEzbHpYdy82NDA?x-oss-process=image/format,png" alt="img"></p>
<ul>
<li><strong>Workspaceï¼šå·¥ä½œåŒº</strong>ï¼Œå°±æ˜¯ä½ å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹</li>
<li><strong>Index / Stageï¼šæš‚å­˜åŒº</strong>ï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯</li>
<li><strong>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</strong>ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰ä½ æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬</li>
<li><strong>Remoteï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨</strong>ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä½ é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢</li>
</ul>
<p>æœ¬åœ°çš„ä¸‰ä¸ªåŒºåŸŸç¡®åˆ‡çš„è¯´åº”è¯¥æ˜¯gitä»“åº“ä¸­HEADæŒ‡å‘çš„ç‰ˆæœ¬ï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMGljejZYMmFpYklnVVd6SHh0d1g4a2ljUENLcERyc2lhUHpaazA0T2xJMmJ6bHlkemljQnVYVEp2TEVRLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<ul>
<li>Directoryï¼šä½¿ç”¨Gitç®¡ç†çš„ä¸€ä¸ªç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä»“åº“ï¼ŒåŒ…å«æˆ‘ä»¬çš„å·¥ä½œç©ºé—´å’ŒGitçš„ç®¡ç†ç©ºé—´ã€‚</li>
<li>WorkSpaceï¼šéœ€è¦é€šè¿‡Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œè¿™äº›ç›®å½•å’Œæ–‡ä»¶ç»„æˆäº†å·¥ä½œç©ºé—´ã€‚</li>
<li>.gitï¼šå­˜æ”¾Gitç®¡ç†ä¿¡æ¯çš„ç›®å½•ï¼Œåˆå§‹åŒ–ä»“åº“çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºã€‚</li>
<li>Index/Stageï¼šæš‚å­˜åŒºï¼Œæˆ–è€…å«å¾…æäº¤æ›´æ–°åŒºï¼Œåœ¨æäº¤è¿›å…¥repoä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„æ›´æ–°æ”¾åœ¨æš‚å­˜åŒºã€‚</li>
<li>Local Repoï¼šæœ¬åœ°ä»“åº“ï¼Œä¸€ä¸ªå­˜æ”¾åœ¨æœ¬åœ°çš„ç‰ˆæœ¬åº“ï¼›HEADä¼šåªæ˜¯å½“å‰çš„å¼€å‘åˆ†æ”¯ï¼ˆbranchï¼‰ã€‚</li>
<li>Stashï¼šéšè—ï¼Œæ˜¯ä¸€ä¸ªå·¥ä½œçŠ¶æ€ä¿å­˜æ ˆï¼Œç”¨äºä¿å­˜/æ¢å¤WorkSpaceä¸­çš„ä¸´æ—¶çŠ¶æ€ã€‚</li>
</ul>
<h3 id="4-5å·¥ä½œæµç¨‹"><a href="#4-5å·¥ä½œæµç¨‹" class="headerlink" title="4.5å·¥ä½œæµç¨‹"></a>4.5<strong>å·¥ä½œæµç¨‹</strong></h3><p>gitçš„å·¥ä½œæµç¨‹ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š</p>
<p>ï¼‘ã€åœ¨å·¥ä½œç›®å½•ä¸­æ·»åŠ ã€ä¿®æ”¹æ–‡ä»¶ï¼›</p>
<p>ï¼’ã€å°†éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒºåŸŸï¼›</p>
<p>ï¼“ã€å°†æš‚å­˜åŒºåŸŸçš„æ–‡ä»¶æäº¤åˆ°gitä»“åº“ã€‚</p>
<p><strong>å› æ­¤ï¼Œgitç®¡ç†çš„æ–‡ä»¶æœ‰ä¸‰ç§çŠ¶æ€ï¼šå·²ä¿®æ”¹ï¼ˆmodifiedï¼‰,å·²æš‚å­˜ï¼ˆstagedï¼‰,å·²æäº¤(committed)</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMDlpYU9obDBkQUNmTHJNd05iRHp1Y0dRMzBzM0huc2lhY3pmY1I2ZEM5T2VoaWN1d2liS3VIalJsemcvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>Gité¡¹ç›®æ­å»º</p>
<h3 id="4-6åˆ›å»ºå·¥ä½œç›®å½•ä¸å¸¸ç”¨æŒ‡ä»¤"><a href="#4-6åˆ›å»ºå·¥ä½œç›®å½•ä¸å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="4.6åˆ›å»ºå·¥ä½œç›®å½•ä¸å¸¸ç”¨æŒ‡ä»¤"></a>4.6åˆ›å»ºå·¥ä½œç›®å½•ä¸å¸¸ç”¨æŒ‡ä»¤</h3><p>å·¥ä½œç›®å½•ï¼ˆWorkSpace)ä¸€èˆ¬å°±æ˜¯ä½ å¸Œæœ›Gitå¸®åŠ©ä½ ç®¡ç†çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ˜¯ä½ é¡¹ç›®çš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç©ºç›®å½•ï¼Œå»ºè®®ä¸è¦æœ‰ä¸­æ–‡ã€‚</p>
<p>æ—¥å¸¸ä½¿ç”¨åªè¦è®°ä½ä¸‹å›¾6ä¸ªå‘½ä»¤ï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEFJSTZZVm9vVXppYnBpYnpKbm9PSEhYVXNMM2Y5RHFBNGhvclVpYmZjcEVaODhPeWYyZ1FRTlI2dy82NDA?x-oss-process=image/format,png" alt="img"></p>
<h2 id="5ã€æœ¬åœ°ä»“åº“æ­å»º"><a href="#5ã€æœ¬åœ°ä»“åº“æ­å»º" class="headerlink" title="5ã€æœ¬åœ°ä»“åº“æ­å»º"></a>5ã€<strong>æœ¬åœ°ä»“åº“æ­å»º</strong></h2><h3 id="5-1åˆ›å»ºå…¨æ–°çš„ä»“åº“"><a href="#5-1åˆ›å»ºå…¨æ–°çš„ä»“åº“" class="headerlink" title="5.1åˆ›å»ºå…¨æ–°çš„ä»“åº“"></a>5.1åˆ›å»ºå…¨æ–°çš„ä»“åº“</h3><p>åˆ›å»ºæœ¬åœ°ä»“åº“çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯åˆ›å»ºå…¨æ–°çš„ä»“åº“ï¼Œå¦ä¸€ç§æ˜¯å…‹éš†è¿œç¨‹ä»“åº“ã€‚</p>
<p>1ã€åˆ›å»ºå…¨æ–°çš„ä»“åº“ï¼Œéœ€è¦ç”¨GITç®¡ç†çš„é¡¹ç›®çš„æ ¹ç›®å½•æ‰§è¡Œï¼š</p>
<blockquote>
<p>åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“</p>
<p>$ git init</p>
</blockquote>
<p>2ã€æ‰§è¡Œåå¯ä»¥çœ‹åˆ°ï¼Œä»…ä»…åœ¨é¡¹ç›®ç›®å½•å¤šå‡ºäº†ä¸€ä¸ª.gitç›®å½•ï¼Œå…³äºç‰ˆæœ¬ç­‰çš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨è¿™ä¸ªç›®å½•é‡Œé¢ã€‚</p>
<h3 id="5-2å…‹éš†è¿œç¨‹ä»“åº“"><a href="#5-2å…‹éš†è¿œç¨‹ä»“åº“" class="headerlink" title="5.2å…‹éš†è¿œç¨‹ä»“åº“"></a>5.2å…‹éš†è¿œç¨‹ä»“åº“</h3><p>1ã€å¦ä¸€ç§æ–¹å¼æ˜¯å…‹éš†è¿œç¨‹ç›®å½•ï¼Œç”±äºæ˜¯å°†è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»“åº“å®Œå…¨é•œåƒä¸€ä»½è‡³æœ¬åœ°ï¼</p>
<blockquote>
<p>å…‹éš†ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²(ç‰ˆæœ¬ä¿¡æ¯)</p>
<p>$ git clone [url] # <a href="https://gitee.com/kuangstudy/openclass.git">https://gitee.com/kuangstudy/openclass.git</a></p>
</blockquote>
<p>2ã€å» gitee æˆ–è€… github ä¸Šå…‹éš†ä¸€ä¸ªæµ‹è¯•ï¼</p>
<h2 id="6ã€Gitæ–‡ä»¶æ“ä½œ"><a href="#6ã€Gitæ–‡ä»¶æ“ä½œ" class="headerlink" title="6ã€Gitæ–‡ä»¶æ“ä½œ"></a>6ã€Gitæ–‡ä»¶æ“ä½œ</h2><h3 id="6-1æ–‡ä»¶çš„å››ç§çŠ¶æ€"><a href="#6-1æ–‡ä»¶çš„å››ç§çŠ¶æ€" class="headerlink" title="6.1æ–‡ä»¶çš„å››ç§çŠ¶æ€"></a>6.1æ–‡ä»¶çš„å››ç§çŠ¶æ€</h3><p><strong>ç‰ˆæœ¬æ§åˆ¶å°±æ˜¯å¯¹æ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œè¦å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€æäº¤ç­‰æ“ä½œï¼Œé¦–</strong>å…ˆè¦çŸ¥é“æ–‡ä»¶å½“å‰åœ¨ä»€ä¹ˆçŠ¶æ€ï¼Œä¸ç„¶å¯èƒ½ä¼šæäº¤äº†ç°åœ¨è¿˜ä¸æƒ³æäº¤çš„æ–‡ä»¶ï¼Œæˆ–è€…è¦æäº¤çš„æ–‡ä»¶æ²¡æäº¤ä¸Šã€‚</p>
<ul>
<li><strong>Untracked</strong>: æœªè·Ÿè¸ª, æ­¤æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­, ä½†å¹¶æ²¡æœ‰åŠ å…¥åˆ°gitåº“, ä¸å‚ä¸ç‰ˆæœ¬æ§åˆ¶. é€šè¿‡git add çŠ¶æ€å˜ä¸ºStaged.</li>
<li><strong>Unmodify</strong>: æ–‡ä»¶å·²ç»å…¥åº“, æœªä¿®æ”¹, å³ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶å¿«ç…§å†…å®¹ä¸æ–‡ä»¶å¤¹ä¸­å®Œå…¨ä¸€è‡´. è¿™ç§ç±»å‹çš„æ–‡ä»¶æœ‰ä¸¤ç§å»å¤„, å¦‚æœå®ƒè¢«ä¿®æ”¹, è€Œå˜ä¸ºModified. å¦‚æœä½¿ç”¨git rmç§»å‡ºç‰ˆæœ¬åº“, åˆ™æˆä¸ºUntrackedæ–‡ä»¶</li>
<li><strong>Modified</strong>: æ–‡ä»¶å·²ä¿®æ”¹, ä»…ä»…æ˜¯ä¿®æ”¹, å¹¶æ²¡æœ‰è¿›è¡Œå…¶ä»–çš„æ“ä½œ. è¿™ä¸ªæ–‡ä»¶ä¹Ÿæœ‰ä¸¤ä¸ªå»å¤„, é€šè¿‡git addå¯è¿›å…¥æš‚å­˜stagedçŠ¶æ€, ä½¿ç”¨git checkout åˆ™ä¸¢å¼ƒä¿®æ”¹è¿‡, è¿”å›åˆ°unmodifyçŠ¶æ€, è¿™ä¸ªgit checkoutå³ä»åº“ä¸­å–å‡ºæ–‡ä»¶, è¦†ç›–å½“å‰ä¿®æ”¹ !</li>
<li><strong>Staged</strong>: æš‚å­˜çŠ¶æ€. æ‰§è¡Œgit commitåˆ™å°†ä¿®æ”¹åŒæ­¥åˆ°åº“ä¸­, è¿™æ—¶åº“ä¸­çš„æ–‡ä»¶å’Œæœ¬åœ°æ–‡ä»¶åˆå˜ä¸ºä¸€è‡´, æ–‡ä»¶ä¸ºUnmodifyçŠ¶æ€. æ‰§è¡Œgit reset HEAD filenameå–æ¶ˆæš‚å­˜, æ–‡ä»¶çŠ¶æ€ä¸ºModified</li>
</ul>
<h3 id="6-2-æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€"><a href="#6-2-æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€" class="headerlink" title="6.2 æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€"></a>6.2 æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€</h3><p>ä¸Šé¢è¯´æ–‡ä»¶æœ‰4ç§çŠ¶æ€ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°æ–‡ä»¶çš„çŠ¶æ€ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çŠ¶æ€</span><br><span class="line">git status [filename]</span><br><span class="line"> </span><br><span class="line">#æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çŠ¶æ€</span><br><span class="line">git status</span><br><span class="line"> </span><br><span class="line"># git add .                  æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span><br><span class="line"># git commit -m &quot;æ¶ˆæ¯å†…å®¹&quot;    æäº¤æš‚å­˜åŒºä¸­çš„å†…å®¹åˆ°æœ¬åœ°ä»“åº“ -m æäº¤ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<h3 id="6-3-å¿½ç•¥æ–‡ä»¶"><a href="#6-3-å¿½ç•¥æ–‡ä»¶" class="headerlink" title="6.3 å¿½ç•¥æ–‡ä»¶"></a>6.3 <strong>å¿½ç•¥æ–‡ä»¶</strong></h3><p>æœ‰äº›æ—¶å€™æˆ‘ä»¬ä¸æƒ³æŠŠæŸäº›æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œæ¯”å¦‚æ•°æ®åº“æ–‡ä»¶ï¼Œä¸´æ—¶æ–‡ä»¶ï¼Œè®¾è®¡æ–‡ä»¶ç­‰</p>
<p>åœ¨ä¸»ç›®å½•ä¸‹å»ºç«‹â€.gitignoreâ€æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>å¿½ç•¥æ–‡ä»¶ä¸­çš„ç©ºè¡Œæˆ–ä»¥äº•å·ï¼ˆ#ï¼‰å¼€å§‹çš„è¡Œå°†ä¼šè¢«å¿½ç•¥ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨Linuxé€šé…ç¬¦ã€‚ä¾‹å¦‚ï¼šæ˜Ÿå·ï¼ˆ*ï¼‰ä»£è¡¨ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œé—®å·ï¼ˆï¼Ÿï¼‰ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼Œæ–¹æ‹¬å·ï¼ˆ[abc]ï¼‰ä»£è¡¨å¯é€‰å­—ç¬¦èŒƒå›´ï¼Œå¤§æ‹¬å·ï¼ˆ{string1,string2,â€¦}ï¼‰ä»£è¡¨å¯é€‰çš„å­—ç¬¦ä¸²ç­‰ã€‚</li>
<li>å¦‚æœåç§°çš„æœ€å‰é¢æœ‰ä¸€ä¸ªæ„Ÿå¹å·ï¼ˆ!ï¼‰ï¼Œè¡¨ç¤ºä¾‹å¤–è§„åˆ™ï¼Œå°†ä¸è¢«å¿½ç•¥ã€‚</li>
<li>å¦‚æœåç§°çš„æœ€å‰é¢æ˜¯ä¸€ä¸ªè·¯å¾„åˆ†éš”ç¬¦ï¼ˆ/ï¼‰ï¼Œè¡¨ç¤ºè¦å¿½ç•¥çš„æ–‡ä»¶åœ¨æ­¤ç›®å½•ä¸‹ï¼Œè€Œå­ç›®å½•ä¸­çš„æ–‡ä»¶ä¸å¿½ç•¥ã€‚</li>
<li>å¦‚æœåç§°çš„æœ€åé¢æ˜¯ä¸€ä¸ªè·¯å¾„åˆ†éš”ç¬¦ï¼ˆ/ï¼‰ï¼Œè¡¨ç¤ºè¦å¿½ç•¥çš„æ˜¯æ­¤ç›®å½•ä¸‹è¯¥åç§°çš„å­ç›®å½•ï¼Œè€Œéæ–‡ä»¶ï¼ˆé»˜è®¤æ–‡ä»¶æˆ–ç›®å½•éƒ½å¿½ç•¥ï¼‰ã€‚</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">#ä¸ºæ³¨é‡Š</span><br><span class="line">*.txt        #å¿½ç•¥æ‰€æœ‰ .txtç»“å°¾çš„æ–‡ä»¶,è¿™æ ·çš„è¯ä¸Šä¼ å°±ä¸ä¼šè¢«é€‰ä¸­ï¼</span><br><span class="line">!lib.txt     #ä½†lib.txté™¤å¤–</span><br><span class="line">/temp        #ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„TODOæ–‡ä»¶,ä¸åŒ…æ‹¬å…¶å®ƒç›®å½•temp</span><br><span class="line">build/       #å¿½ç•¥build/ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">doc/*.txt    #ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬ doc/server/arch.txt</span><br></pre></td></tr></table></figure>

<h2 id="7ã€ä½¿ç”¨ç äº‘"><a href="#7ã€ä½¿ç”¨ç äº‘" class="headerlink" title="7ã€ä½¿ç”¨ç äº‘"></a>7ã€ä½¿ç”¨ç äº‘</h2><blockquote>
<h4 id="github-æ˜¯æœ‰å¢™çš„ï¼Œæ¯”è¾ƒæ…¢ï¼Œåœ¨å›½å†…çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨-gitee-ï¼Œå…¬å¸ä¸­æœ‰æ—¶å€™ä¼šæ­å»ºè‡ªå·±çš„gitlabæœåŠ¡å™¨"><a href="#github-æ˜¯æœ‰å¢™çš„ï¼Œæ¯”è¾ƒæ…¢ï¼Œåœ¨å›½å†…çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨-gitee-ï¼Œå…¬å¸ä¸­æœ‰æ—¶å€™ä¼šæ­å»ºè‡ªå·±çš„gitlabæœåŠ¡å™¨" class="headerlink" title="github æ˜¯æœ‰å¢™çš„ï¼Œæ¯”è¾ƒæ…¢ï¼Œåœ¨å›½å†…çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ gitee ï¼Œå…¬å¸ä¸­æœ‰æ—¶å€™ä¼šæ­å»ºè‡ªå·±çš„gitlabæœåŠ¡å™¨"></a>github æ˜¯æœ‰å¢™çš„ï¼Œæ¯”è¾ƒæ…¢ï¼Œåœ¨å›½å†…çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ gitee ï¼Œå…¬å¸ä¸­æœ‰æ—¶å€™ä¼šæ­å»ºè‡ªå·±çš„gitlabæœåŠ¡å™¨</h4></blockquote>
<p>è¿™ä¸ªå…¶å®å¯ä»¥ä½œä¸ºå¤§å®¶æœªæ¥æ‰¾å·¥ä½œçš„ä¸€ä¸ªé‡è¦ä¿¡æ¯ï¼</p>
<p><strong>1ã€æ³¨å†Œç™»å½•ç äº‘</strong>ï¼Œå®Œå–„ä¸ªäººä¿¡æ¯</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMGViQXFodGVza0c0R0h3RDAxYlg0bFhZbXhsbU1HbjhQUnFuNGFDWGZhUWRwM1NuYkJIZGlidFEvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p><strong>2ã€è®¾ç½®æœ¬æœºç»‘å®šSSHå…¬é’¥ï¼Œå®ç°å…å¯†ç ç™»å½•ï¼</strong>ï¼ˆå…å¯†ç ç™»å½•ï¼Œè¿™ä¸€æ­¥æŒºé‡è¦çš„ï¼Œç äº‘æ˜¯è¿œç¨‹ä»“åº“ï¼Œæˆ‘ä»¬æ˜¯å¹³æ—¶å·¥ä½œåœ¨æœ¬åœ°ä»“åº“ï¼)</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥ C:\Users\Administrator\.ssh ç›®å½•</span></span><br><span class="line"><span class="comment"># ç”Ÿæˆå…¬é’¥</span></span><br><span class="line"><span class="attribute">ssh</span>-keygen</span><br></pre></td></tr></table></figure>

<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMFlsSzRpYlEwRU1zM0xtUm1kaWFocG1hOHNzVFFlZGtoeVNoTmtpYlR5RkJ2YVpXaWNpY1RmTmljV1FJQS82NDA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>3ã€å°†å…¬é’¥ä¿¡æ¯public key æ·»åŠ åˆ°ç äº‘è´¦æˆ·ä¸­å³å¯ï¼</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEk1Wmljcm00UEVibm94OUw1d2pDUHRQeWJDeXJLSTFKT2tSV0NZSVk1enNYNEZ2STc3TFhYbVEvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>4ã€ä½¿ç”¨ç äº‘<strong>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ä»“åº“ï¼</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEZTSXdKYjlnNlFicDk5alk2MDV4ZFBmaDNONGwyckdwRDQ0ZDZOQ2NkaWJhbmtCVUw2MHVPRGcvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>è®¸å¯è¯ï¼šå¼€æºæ˜¯å¦å¯ä»¥éšæ„è½¬è½½ï¼Œå¼€æºä½†æ˜¯ä¸èƒ½å•†ä¸šä½¿ç”¨ï¼Œä¸èƒ½è½¬è½½ï¼Œâ€¦ é™åˆ¶ï¼</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMFM5NlhmR29nTldWcVJBZXhleWJUN0RYZHlRaGZjWUoxb0VBZ2FIMVJpYlJVMFdaRTBlY3pkeHcvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p><strong>å…‹éš†åˆ°æœ¬åœ°ï¼</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMFB5S2ZHRmQ4VUhTR0lSYlZMa1hINWljUXNneGg2SzJSUGliWWVVRVI1NFV6dU5WQVlzZ3hYY2ZBLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<h2 id="8ã€IDEAä¸­é›†æˆGit"><a href="#8ã€IDEAä¸­é›†æˆGit" class="headerlink" title="8ã€IDEAä¸­é›†æˆGit"></a>8ã€<strong>IDEAä¸­é›†æˆGit</strong></h2><h3 id="8-1-æ–°å»ºé¡¹ç›®ï¼Œç»‘å®šgitã€‚"><a href="#8-1-æ–°å»ºé¡¹ç›®ï¼Œç»‘å®šgitã€‚" class="headerlink" title="8.1 æ–°å»ºé¡¹ç›®ï¼Œç»‘å®šgitã€‚"></a><strong>8.1 æ–°å»ºé¡¹ç›®ï¼Œç»‘å®šgitã€‚</strong></h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEQ4TFBHdTJTTktYRDAxSU1xRGFTa0JlUDhpYnR2bmFzQllpYVJleXVaV0FsMEVqRWliOElZZjdjUS82NDA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>æ³¨æ„è§‚å¯Ÿideaä¸­çš„å˜åŒ–</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMENzOTNCaWFPaWExU2RrOGljZEg3dlF6UGZ6SWp1b1ROWXF1S3pZdHJFZTVta2xoZzJiN0tPWXNvdy82NDA?x-oss-process=image/format,png" alt="img"></p>
<h3 id="8-2-ä¿®æ”¹æ–‡ä»¶ï¼Œä½¿ç”¨IDEAæ“ä½œgitã€‚"><a href="#8-2-ä¿®æ”¹æ–‡ä»¶ï¼Œä½¿ç”¨IDEAæ“ä½œgitã€‚" class="headerlink" title="8.2 ä¿®æ”¹æ–‡ä»¶ï¼Œä½¿ç”¨IDEAæ“ä½œgitã€‚"></a><strong>8.2 ä¿®æ”¹æ–‡ä»¶ï¼Œä½¿ç”¨IDEAæ“ä½œgitã€‚</strong></h3><p>æ·»åŠ åˆ°æš‚å­˜åŒº</p>
<p>commit æäº¤</p>
<p>pushåˆ°è¿œç¨‹ä»“åº“</p>
<h3 id="8-3-æäº¤æµ‹è¯•"><a href="#8-3-æäº¤æµ‹è¯•" class="headerlink" title="8.3 æäº¤æµ‹è¯•"></a><strong>8.3 æäº¤æµ‹è¯•</strong></h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMHRFUklzemRnTFZsVVdhbXlSYXBmTjc0YVI4WGVHRlYyT1lXaWFlUjlDa1lsZm9CZWZSaDJBSUEvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p>è¿™äº›éƒ½æ˜¯å•ä¸ªäººçš„æ“ä½œï¼</p>
<p>å­¦ä¹ çš„æ–¹å¼æœ€é‡è¦ï¼å­¦ä¼šå­¦ä¹ ï¼æˆ‘ä¸Šè¯¾çš„æ›´å¤šæ—¶å€™éƒ½æ˜¯åœ¨æ•™å¤§å®¶å»å­¦ä¹ ä¸€ç§ç†å¿µå’Œæ€æƒ³ï¼ˆå­¦ä¹ æ–¹å¼ï¼‰</p>
<p>æœ‰é“æ— æœ¯ã€æœ¯å°šå¯æ±‚ã€‚æœ‰æœ¯æ— é“ã€æ­¢äºæœ¯ï¼</p>
<p>çœŸæ­£çš„æ•™å­¦ï¼Œæˆäººä»¥æ¸”ï¼</p>
<h3 id="8-4-è¯´æ˜ï¼šGITåˆ†æ”¯"><a href="#8-4-è¯´æ˜ï¼šGITåˆ†æ”¯" class="headerlink" title="8.4 è¯´æ˜ï¼šGITåˆ†æ”¯"></a>8.4 è¯´æ˜ï¼šGITåˆ†æ”¯</h3><p><strong>åˆ†æ”¯åœ¨GITä¸­ç›¸å¯¹è¾ƒéš¾ï¼Œåˆ†æ”¯å°±æ˜¯ç§‘å¹»ç”µå½±é‡Œé¢çš„å¹³è¡Œå®‡å®™ï¼Œ</strong>å¦‚æœä¸¤ä¸ªå¹³è¡Œå®‡å®™äº’ä¸å¹²æ‰°ï¼Œé‚£å¯¹ç°åœ¨çš„ä½ ä¹Ÿæ²¡å•¥å½±å“ã€‚ä¸è¿‡ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸¤ä¸ªå¹³è¡Œå®‡å®™åˆå¹¶äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦å¤„ç†ä¸€äº›é—®é¢˜äº†ï¼</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEJPR3phRzRRVGM0SlhPMGhTbHdjTnR1ak56QXZ4ZWliU3JhakxZTENUNm90Tm5IRFY5eFlXd0EvNjQw?x-oss-process=image/format,png" alt="img"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMEF5bjg3d294ZmVwT2hTbFVqNEZRVEZVc2lhNGljMGo2YVF5NFR6MzJQUnVKMEhTVmVHZVV6VVJBLzY0MA?x-oss-process=image/format,png" alt="img"></p>
<p><strong>gitåˆ†æ”¯ä¸­å¸¸ç”¨æŒ‡ä»¤ï¼š</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span><br><span class="line">git branch</span><br><span class="line"> </span><br><span class="line"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span><br><span class="line">git branch -r</span><br><span class="line"> </span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span><br><span class="line">git branch [branch-name]</span><br><span class="line"> </span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span><br><span class="line">git checkout -b [branch]</span><br><span class="line"> </span><br><span class="line"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span><br><span class="line">$ git merge [branch]</span><br><span class="line"> </span><br><span class="line"># åˆ é™¤åˆ†æ”¯</span><br><span class="line">$ git branch -d [branch-name]</span><br><span class="line"> </span><br><span class="line"># åˆ é™¤è¿œç¨‹åˆ†æ”¯</span><br><span class="line">$ git push origin --delete [branch-name]</span><br><span class="line">$ git branch -dr [remote/branch]</span><br></pre></td></tr></table></figure>

<p>IDEAä¸­æ“ä½œ</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3S3N1OFVsSVR3TWxiWDNrTUd0WjlwMHdITklZZVRIQzhhSEdBU29EeVpPNjRRaWNzbHFpYU1iMU9KMVoxTFBvaWMzTEJHeURJWUJhN1hYdy82NDA?x-oss-process=image/format,png" alt="img"></p>
<p>å¦‚æœåŒä¸€ä¸ªæ–‡ä»¶åœ¨åˆå¹¶åˆ†æ”¯æ—¶éƒ½è¢«ä¿®æ”¹äº†åˆ™ä¼šå¼•èµ·å†²çªï¼šè§£å†³çš„åŠæ³•æ˜¯æˆ‘ä»¬å¯ä»¥ä¿®æ”¹å†²çªæ–‡ä»¶åé‡æ–°æäº¤ï¼é€‰æ‹©è¦ä¿ç•™ä»–çš„ä»£ç è¿˜æ˜¯ä½ çš„ä»£ç ï¼</p>
<p>masterä¸»åˆ†æ”¯åº”è¯¥éå¸¸ç¨³å®šï¼Œç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸å…è®¸åœ¨ä¸Šé¢å·¥ä½œï¼Œå·¥ä½œä¸€èˆ¬æƒ…å†µä¸‹åœ¨æ–°å»ºçš„devåˆ†æ”¯ä¸Šå·¥ä½œï¼Œå·¥ä½œå®Œåï¼Œæ¯”å¦‚ä¸Šè¦å‘å¸ƒï¼Œæˆ–è€…è¯´devåˆ†æ”¯ä»£ç ç¨³å®šåå¯ä»¥åˆå¹¶åˆ°ä¸»åˆ†æ”¯masterä¸Šæ¥ã€‚</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloudå­¦ä¹ </title>
    <url>/2022/06/03/SpringCloud%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="1-å­¦ä¹ å‰è¨€"><a href="#1-å­¦ä¹ å‰è¨€" class="headerlink" title="1.å­¦ä¹ å‰è¨€"></a>1.å­¦ä¹ å‰è¨€</h1><h4 id="1-1-å­¦ä¹ å‰æ"><a href="#1-1-å­¦ä¹ å‰æ" class="headerlink" title="1.1 å­¦ä¹ å‰æ"></a>1.1 å­¦ä¹ å‰æ</h4><ul>
<li><p>ç†Ÿç»ƒä½¿ç”¨SpringBoot å¾®æœåŠ¡å¿«é€Ÿå¼€å‘æ¡†æ¶</p>
</li>
<li><p>äº†è§£è¿‡Dubbo + Zookeeper åˆ†å¸ƒå¼åŸºç¡€</p>
</li>
</ul>
<h4 id="1-2-å¤§çº²"><a href="#1-2-å¤§çº²" class="headerlink" title="1.2 å¤§çº²"></a>1.2 å¤§çº²</h4><blockquote>
<p>Spring Cloud äº”å¤§ç»„ä»¶</p>
</blockquote>
<ul>
<li>æœåŠ¡æ³¨å†Œä¸å‘ç°â€”â€”<strong>Netflix Eureka</strong></li>
<li>è´Ÿè½½å‡è¡¡ï¼š<ul>
<li>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡â€”â€”<strong>Netflix Ribbon</strong></li>
<li>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ï¼šâ€”â€”<strong>Feign</strong>(å…¶ä¹Ÿæ˜¯ä¾èµ–äºRibbonï¼Œåªæ˜¯å°†è°ƒç”¨æ–¹å¼RestTemplete æ›´æ”¹æˆService æ¥å£)</li>
</ul>
</li>
<li>æ–­è·¯å™¨â€”â€”<strong>Netflix Hystrix</strong></li>
<li>æœåŠ¡ç½‘å…³â€”â€”<strong>Netflix Zuul</strong></li>
<li>åˆ†å¸ƒå¼é…ç½®â€”â€”<strong>Spring Cloud Config</strong></li>
</ul>
<h4 id="1-3-å¸¸è§é¢è¯•é¢˜"><a href="#1-3-å¸¸è§é¢è¯•é¢˜" class="headerlink" title="1.3 å¸¸è§é¢è¯•é¢˜"></a>1.3 å¸¸è§é¢è¯•é¢˜</h4><p>1.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ<br>1.2 å¾®æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•ç‹¬ç«‹é€šè®¯çš„ï¼Ÿ<br>1.3 SpringCloud å’Œ Dubboæœ‰é‚£äº›åŒºåˆ«ï¼Ÿ<br>1.4 SpringBoot å’Œ SpringCloudï¼Œè¯·è°ˆè°ˆä½ å¯¹ä»–ä»¬çš„ç†è§£<br>1.5 ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼Ÿä»€ä¹ˆæ˜¯æœåŠ¡é™çº§ï¼Ÿ<br>1.6 å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿè¯´ä¸‹ä½ åœ¨é¡¹ç›®å¼€å‘ä¸­é‡åˆ°çš„å‘<br>1.7 ä½ æ‰€çŸ¥é“çš„å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰å“ªäº›ï¼Ÿåˆ—ä¸¾ä¸€äºŒ<br>1.8 Eurekaå’ŒZookeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤è€…çš„åŒºåˆ«</p>
<h1 id="2-å¾®æœåŠ¡æ¦‚è¿°"><a href="#2-å¾®æœåŠ¡æ¦‚è¿°" class="headerlink" title="2. å¾®æœåŠ¡æ¦‚è¿°"></a>2. å¾®æœåŠ¡æ¦‚è¿°</h1><h2 id="2-1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"><a href="#2-1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"></a>2.1 ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</h2><blockquote>
<p>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</p>
</blockquote>
<p>å¾®æœåŠ¡(Microservice Architecture) æ˜¯è¿‘å‡ å¹´æµè¡Œçš„ä¸€ç§æ¶æ„æ€æƒ³ï¼Œå…³äºå®ƒçš„æ¦‚å¿µå¾ˆéš¾ä¸€è¨€ä»¥è”½ä¹‹ã€‚<br>ç©¶ç«Ÿä»€ä¹ˆæ˜¯å¾®æœåŠ¡å‘¢ï¼Ÿæˆ‘ä»¬åœ¨æ­¤å¼•ç”¨ThoughtWorks å…¬å¸çš„é¦–å¸­ç§‘å­¦å®¶ Martin Fowler äº2014å¹´æå‡ºçš„ä¸€æ®µè¯ï¼š<br>åŸæ–‡ï¼š<a href="https://martinfowler.com/articles/microservices.html">https://martinfowler.com/articles/microservices.html</a><br>æ±‰åŒ–ï¼š<a href="https://www.cnblogs.com/liuning8023/p/4493156.html">https://www.cnblogs.com/liuning8023/p/4493156.html</a></p>
<ul>
<li>å°±ç›®å‰è€Œè¨€ï¼Œå¯¹äºå¾®æœåŠ¡ï¼Œä¸šç•Œå¹¶æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ï¼Œæ ‡å‡†çš„å®šä¹‰ã€‚</li>
<li>ä½†é€šå¸¸è€Œè¨€ï¼Œå¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå®ƒä½“é•¿å°†å•ä¸€çš„åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è‡ªå·±çš„è¿›ç¨‹å†…ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸åè°ƒï¼Œäº’ç›¸é…ç½®ï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ï¼ŒæœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶(HTTP)äº’ç›¸æ²Ÿé€šï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½ç‹—è¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”è¯¥æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ï¼Œå·¥å…·(Maven)å¯¹å…¶è¿›è¡Œæ„å»ºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªéå¸¸è½»é‡çº§çš„é›†ä¸­å¼ç®¡ç†æ¥åè°ƒè¿™äº›æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨ã€‚</li>
</ul>
<blockquote>
<p>å†æ¥ä»æŠ€æœ¯ç»´åº¦è§’åº¦ç†è§£ä¸‹ï¼š</p>
</blockquote>
<ul>
<li>å¾®æœåŠ¡åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°†ä¼ ç»Ÿçš„ä¸€ç«™å¼åº”ç”¨ï¼Œæ ¹æ®ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æœåŠ¡ï¼Œå½»åº•åœ°å»è€¦åˆï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡æä¾›å•ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡åšä¸€ä»¶äº‹æƒ…ï¼Œä»æŠ€æœ¯è§’åº¦çœ‹å°±æ˜¯ä¸€ç§å°è€Œç‹¬ç«‹çš„å¤„ç†è¿‡ç¨‹ï¼Œç±»ä¼¼è¿›ç¨‹çš„æ¦‚å¿µï¼Œèƒ½å¤Ÿè‡ªè¡Œå•ç‹¬å¯åŠ¨æˆ–é”€æ¯ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚</li>
</ul>
<h2 id="2-2-å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„"><a href="#2-2-å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„" class="headerlink" title="2.2 å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„"></a>2.2 å¾®æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„</h2><blockquote>
<p>å¾®æœåŠ¡</p>
</blockquote>
<p>å¼ºè°ƒçš„æ˜¯æœåŠ¡çš„å¤§å°ï¼Œå®ƒå…³æ³¨çš„æ˜¯æŸä¸€ä¸ªç‚¹ï¼Œæ˜¯å…·ä½“è§£å†³æŸä¸€ä¸ªé—®é¢˜/æä¾›è½åœ°å¯¹åº”æœåŠ¡çš„ä¸€ä¸ªæœåŠ¡åº”ç”¨ï¼Œç‹­ä¹‰çš„çœ‹ï¼Œå¯ä»¥çœ‹ä½œæ˜¯IDEAä¸­çš„ä¸€ä¸ªä¸ªå¾®æœåŠ¡å·¥ç¨‹ï¼Œæˆ–è€…Moudelã€‚IDEA å·¥å…·é‡Œé¢ä½¿ç”¨Mavenå¼€å‘çš„ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å°Moudelï¼Œå®ƒå…·ä½“æ˜¯ä½¿ç”¨SpringBootå¼€å‘çš„ä¸€ä¸ªå°æ¨¡å—ï¼Œä¸“ä¸šçš„äº‹æƒ…äº¤ç»™ä¸“ä¸šçš„æ¨¡å—æ¥åšï¼Œä¸€ä¸ªæ¨¡å—å°±åšç€ä¸€ä»¶äº‹æƒ…ã€‚å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªä¸ªçš„ä¸ªä½“ï¼Œæ¯ä¸ªä¸ªä½“å®Œæˆä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡æˆ–è€…åŠŸèƒ½ã€‚</p>
<blockquote>
<p>å¾®æœåŠ¡æ¶æ„</p>
</blockquote>
<p>ä¸€ç§æ–°çš„æ¶æ„å½¢å¼ï¼ŒMartin Fowler äº2014å¹´æå‡ºã€‚<br>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒä½“é•¿å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒï¼Œäº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶**(å¦‚HTTP)äº’ç›¸åä½œï¼Œæ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦å¤–ï¼Œåº”å°½é‡é¿å…ç»Ÿä¸€çš„ï¼Œé›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·(å¦‚Maven)**å¯¹å…¶è¿›è¡Œæ„å»ºã€‚</p>
<h2 id="2-3-å¾®æœåŠ¡ä¼˜ç¼ºç‚¹"><a href="#2-3-å¾®æœåŠ¡ä¼˜ç¼ºç‚¹" class="headerlink" title="2.3 å¾®æœåŠ¡ä¼˜ç¼ºç‚¹"></a>2.3 å¾®æœåŠ¡ä¼˜ç¼ºç‚¹</h2><blockquote>
<p>ä¼˜ç‚¹</p>
</blockquote>
<ul>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼›</li>
<li>æ¯ä¸ªæœåŠ¡è¶³å¤Ÿå†…èšï¼Œè¶³å¤Ÿå°ï¼Œä»£ç å®¹æ˜“ç†è§£ï¼Œè¿™æ ·èƒ½èšç„¦ä¸€ä¸ªæŒ‡å®šçš„ä¸šåŠ¡åŠŸèƒ½æˆ–ä¸šåŠ¡éœ€æ±‚ï¼›</li>
<li>å¼€å‘ç®€å•ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼Œä¸€ä¸ªæœåŠ¡å¯èƒ½å°±æ˜¯ä¸“ä¸€çš„åªå¹²ä¸€ä»¶äº‹ï¼›</li>
<li>å¾®æœåŠ¡èƒ½å¤Ÿè¢«å°å›¢é˜Ÿå•ç‹¬å¼€å‘ï¼Œè¿™ä¸ªå›¢é˜Ÿåªéœ€2-5ä¸ªå¼€å‘äººå‘˜ç»„æˆï¼›</li>
<li>å¾®æœåŠ¡æ˜¯æ¾è€¦åˆçš„ï¼Œæ˜¯æœ‰åŠŸèƒ½æ„ä¹‰çš„æœåŠ¡ï¼Œæ— è®ºæ˜¯åœ¨å¼€å‘é˜¶æ®µæˆ–éƒ¨ç½²é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹çš„ï¼›</li>
<li>å¾®æœåŠ¡èƒ½ä½¿ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ï¼›</li>
<li>æ˜“äºå’Œç¬¬ä¸‰æ–¹é›†æˆï¼Œå¾®æœåŠ¡å…è®¸å®¹æ˜“ä¸”çµæ´»çš„æ–¹å¼é›†æˆè‡ªåŠ¨éƒ¨ç½²ï¼Œé€šè¿‡æŒç»­é›†æˆå·¥å…·ï¼Œå¦‚jenkinsï¼ŒHudsonï¼Œbambooï¼›</li>
<li>å¾®æœåŠ¡æ˜“äºè¢«ä¸€ä¸ªå¼€å‘äººå‘˜ç†è§£ï¼Œä¿®æ”¹å’Œç»´æŠ¤ï¼Œè¿™æ ·å°å›¢é˜Ÿèƒ½å¤Ÿæ›´å…³æ³¨è‡ªå·±çš„å·¥ä½œæˆæœï¼Œæ— éœ€é€šè¿‡åˆä½œæ‰èƒ½ä½“ç°ä»·å€¼ï¼›</li>
<li>å¾®æœåŠ¡å…è®¸åˆ©ç”¨å’Œèåˆæœ€æ–°æŠ€æœ¯ï¼›</li>
<li>å¾®æœåŠ¡åªæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œä¸ä¼šå’ŒHTMLï¼ŒCSSï¼Œæˆ–å…¶ä»–çš„ç•Œé¢æ··åˆ;</li>
<li>æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨èƒ½åŠ›ï¼Œå¯ä»¥æœ‰è‡ªå·±çš„æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥æœ‰ç»Ÿ</li>
</ul>
<blockquote>
<p>ç¼ºç‚¹</p>
</blockquote>
<ul>
<li>å¼€å‘äººå‘˜è¦å¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ï¼›</li>
<li>å¤šæœåŠ¡è¿ç»´éš¾åº¦ï¼Œéšç€æœåŠ¡çš„å¢åŠ ï¼Œè¿ç»´çš„å‹åŠ›ä¹Ÿåœ¨å¢å¤§ï¼›</li>
<li>ç³»ç»Ÿéƒ¨ç½²ä¾èµ–é—®é¢˜ï¼›</li>
<li>æœåŠ¡é—´é€šä¿¡æˆæœ¬é—®é¢˜ï¼›</li>
<li>æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼›</li>
<li>ç³»ç»Ÿé›†æˆæµ‹è¯•é—®é¢˜ï¼›</li>
<li>æ€§èƒ½å’Œç›‘æ§é—®é¢˜ï¼›</li>
</ul>
<h2 id="2-4-å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ"><a href="#2-4-å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="2.4 å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ"></a>2.4 å¾®æœåŠ¡æŠ€æœ¯æ ˆæœ‰é‚£äº›ï¼Ÿ</h2><table>
<thead>
<tr>
<th>å¾®æœåŠ¡æ¡ç›®</th>
<th>æŠ€æœ¯</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>æœåŠ¡å¼€å‘</td>
<td>Springbootã€Springã€SpringMVC</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡é…ç½®ä¸ç®¡ç†</td>
<td>Netflixå…¬å¸çš„Archaiusã€é˜¿é‡Œçš„Diamondç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡æ³¨å†Œä¸å‘ç°</td>
<td>Eurekaã€Consulã€Zookeeperç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡è°ƒç”¨</td>
<td>RESTã€RPCã€gRPC</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡ç†”æ–­å™¨</td>
<td>Hystrixã€Envoyç­‰</td>
<td></td>
</tr>
<tr>
<td>è´Ÿè½½å‡è¡¡</td>
<td>Ribbonã€Nginxç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡æ¥å£è°ƒç”¨ï¼ˆå®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡å‘ç®€å•å·¥å…·ï¼‰</td>
<td>Feignç­‰</td>
<td></td>
</tr>
<tr>
<td>æ¶ˆæ¯é˜Ÿåˆ—</td>
<td>kafkaã€RabbitMQã€ActiveMQç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡é…ç½®ä¸­å¿ƒç®¡ç†</td>
<td>SpringCloudConfigã€Chefç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡è·¯ç”±ï¼ˆAPIç½‘å…³ï¼‰</td>
<td>Zuulç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡ç›‘æ§</td>
<td>Zabbixã€Nagiosã€Metricsã€Spectatorç­‰</td>
<td></td>
</tr>
<tr>
<td>å…¨é“¾è·¯è¿½è¸ª</td>
<td>Zipkinã€Braveã€Dapperç­‰</td>
<td></td>
</tr>
<tr>
<td>æœåŠ¡éƒ¨ç½²</td>
<td>Dockerã€OpenStackã€Kubernetesç­‰</td>
<td></td>
</tr>
<tr>
<td>æ•°æ®æµæ“ä½œå¼€å‘åŒ…</td>
<td>SpringCloud Streamï¼ˆå°è£…ä¸Redisï¼ŒRabbitã€Kafkaç­‰å‘é€æ¥æ”¶æ¶ˆæ¯ï¼‰</td>
<td></td>
</tr>
<tr>
<td>äº‹ä»¶æ¶ˆæ¯æ€»çº¿</td>
<td>SpringCloud Bus</td>
<td></td>
</tr>
<tr>
<td>â€¦â€¦</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="2-5-ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„"><a href="#2-5-ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„" class="headerlink" title="2.5 ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„"></a>2.5 ä¸ºä»€ä¹ˆé€‰æ‹©SpringCloudä½œä¸ºå¾®æœåŠ¡æ¶æ„</h4><p>é€‰å‹ä¾æ®</p>
<ol>
<li><ul>
<li>æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œæ¡†æ¶æˆç†Ÿåº¦</li>
<li>ç¤¾åŒºçƒ­åº¦</li>
<li>å¯ç»´æŠ¤æ€§</li>
<li>å­¦ä¹ æ›²çº¿</li>
</ul>
</li>
<li><p>å½“å‰å„å¤§ITå…¬å¸ç”¨çš„å¾®æœåŠ¡æ¶æ„æœ‰é‚£äº›ï¼Ÿ</p>
<ul>
<li><p>é˜¿é‡Œï¼šdubbo+HFS</p>
</li>
<li><p>äº¬ä¸œï¼šJFS</p>
</li>
<li><p>æ–°æµªï¼šMotan</p>
</li>
<li><p>å½“å½“ç½‘ï¼šDubboX</p>
<p>â€¦</p>
</li>
</ul>
</li>
<li><p>å„å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>åŠŸèƒ½ç‚¹/æœåŠ¡æ¡†æ¶</th>
<th>Netflix/SpringCloud</th>
<th>Motan</th>
<th>gRPC</th>
<th>Thrift</th>
<th>Dubbo/DubboX</th>
</tr>
</thead>
<tbody><tr>
<td>åŠŸèƒ½å®šä½</td>
<td>å®Œæ•´çš„å¾®æœåŠ¡æ¡†æ¶</td>
<td>RPCæ¡†æ¶ï¼Œä½†æ•´åˆäº†ZKæˆ–Consulï¼Œå®ç°é›†ç¾¤ç¯å¢ƒçš„åŸºæœ¬æœåŠ¡æ³¨å†Œ/å‘ç°</td>
<td>RPCæ¡†æ¶</td>
<td>RPCæ¡†æ¶</td>
<td>æœåŠ¡æ¡†æ¶</td>
</tr>
<tr>
<td>æ”¯æŒRest</td>
<td>æ˜¯ï¼ŒRibbonæ”¯æŒå¤šç§å¯æ’æ‹”çš„åºåˆ—åŒ–é€‰æ‹©</td>
<td>å¦</td>
<td>å¦</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td>æ”¯æŒRPC</td>
<td>å¦</td>
<td>æ˜¯ï¼ˆHession2ï¼‰</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>æ”¯æŒå¤šè¯­è¨€</td>
<td>æ˜¯ï¼ˆRestå½¢å¼ï¼‰ï¼Ÿ</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>å¦</td>
</tr>
<tr>
<td>è´Ÿè½½å‡è¡¡</td>
<td>æ˜¯ï¼ˆæœåŠ¡ç«¯zuul+å®¢æˆ·ç«¯Ribbonï¼‰ï¼Œzuul-æœåŠ¡ï¼ŒåŠ¨æ€è·¯ç”±ï¼Œäº‘ç«¯è´Ÿè½½å‡è¡¡Eurekaï¼ˆé’ˆå¯¹ä¸­é—´å±‚æœåŠ¡å™¨ï¼‰</td>
<td>æ˜¯ï¼ˆå®¢æˆ·ç«¯ï¼‰</td>
<td>å¦</td>
<td>å¦</td>
<td>æ˜¯ï¼ˆå®¢æˆ·ç«¯ï¼‰</td>
</tr>
<tr>
<td>é…ç½®æœåŠ¡</td>
<td>Netfix Archaiusï¼ŒSpring Cloud Config Serveré›†ä¸­é…ç½®</td>
<td>æ˜¯ï¼ˆzookeeperæä¾›ï¼‰</td>
<td>å¦</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td>æœåŠ¡è°ƒç”¨é“¾ç›‘æ§</td>
<td>æ˜¯ï¼ˆzuulï¼‰ï¼Œzuulæä¾›è¾¹ç¼˜æœåŠ¡ï¼ŒAPIç½‘å…³</td>
<td>å¦</td>
<td>å¦</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td>é«˜å¯ç”¨/å®¹é”™</td>
<td>æ˜¯ï¼ˆæœåŠ¡ç«¯Hystrix+å®¢æˆ·ç«¯Ribbonï¼‰</td>
<td>æ˜¯ï¼ˆå®¢æˆ·ç«¯ï¼‰</td>
<td>å¦</td>
<td>å¦</td>
<td>æ˜¯ï¼ˆå®¢æˆ·ç«¯ï¼‰</td>
</tr>
<tr>
<td>å…¸å‹åº”ç”¨æ¡ˆä¾‹</td>
<td>Netflix</td>
<td>Sina</td>
<td>Google</td>
<td>Facebook</td>
<td></td>
</tr>
<tr>
<td>ç¤¾åŒºæ´»è·ƒç¨‹åº¦</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
<td>2017å¹´åé‡æ–°å¼€å§‹ç»´æŠ¤ï¼Œä¹‹å‰ä¸­æ–­äº†5å¹´</td>
</tr>
<tr>
<td>å­¦ä¹ éš¾åº¦</td>
<td>ä¸­ç­‰</td>
<td>ä½</td>
<td>é«˜</td>
<td>é«˜</td>
<td>ä½</td>
</tr>
<tr>
<td>æ–‡æ¡£ä¸°å¯Œç¨‹åº¦</td>
<td>é«˜</td>
<td>ä¸€èˆ¬</td>
<td>ä¸€èˆ¬</td>
<td>ä¸€èˆ¬</td>
<td>é«˜</td>
</tr>
<tr>
<td>å…¶ä»–</td>
<td>Spring Cloud Busä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¸¦æ¥äº†æ›´å¤šç®¡ç†ç«¯ç‚¹</td>
<td>æ”¯æŒé™çº§</td>
<td>Netflixå†…éƒ¨åœ¨å¼€å‘é›†æˆgRPC</td>
<td>IDLå®šä¹‰</td>
<td>å®è·µçš„å…¬å¸æ¯”è¾ƒå¤š</td>
</tr>
</tbody></table>
<h1 id="3-SpringCloudå…¥é—¨æ¦‚è¿°"><a href="#3-SpringCloudå…¥é—¨æ¦‚è¿°" class="headerlink" title="3. SpringCloudå…¥é—¨æ¦‚è¿°"></a>3. SpringCloudå…¥é—¨æ¦‚è¿°</h1><h2 id="3-1-SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3-1-SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3.1 SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ"></a>3.1 SpringCloudæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Springå®˜ç½‘ï¼š<a href="https://spring.io/">https://spring.io/</a></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczEuYmRzdGF0aWMuY29tLzcwY0Z1WFNoX1ExWW54R2twb1dLMUhGNmhoeS9pdC91PTM1NzgwMTc3ODAsMTIxODQyMDAyOSZmbT0yNiZncD0wLmpwZw?x-oss-process=image/format,png" alt="img"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczIuYmRzdGF0aWMuY29tLzcwY0Z2blNoX1ExWW54R2twb1dLMUhGNmhoeS9pdC91PTE2Mzc3ODY4OTcsNzQ1MTM1MjUxJmZtPTI2JmdwPTAuanBn?x-oss-process=image/format,png" alt="img"></p>
<h2 id="3-2-SpringCloudå’ŒSpringBootçš„å…³ç³»"><a href="#3-2-SpringCloudå’ŒSpringBootçš„å…³ç³»" class="headerlink" title="3.2 SpringCloudå’ŒSpringBootçš„å…³ç³»"></a>3.2 SpringCloudå’ŒSpringBootçš„å…³ç³»</h2><ul>
<li>SpringBootä¸“æ³¨äºå¼€è‹æ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ï¼›</li>
<li>SpringCloudæ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ•´ç†æ²»ç†æ¡†æ¶ï¼Œå®ƒå°†SpringBootå¼€å‘çš„ä¸€ä¸ªä¸ªå•ä½“å¾®æœåŠ¡ï¼Œæ•´åˆå¹¶ç®¡ç†èµ·æ¥ï¼Œä¸ºå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æä¾›ï¼šé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€ä¸ºä»£ç†ã€äº‹ä»¶æ€»æ ˆã€å…¨å±€é”ã€å†³ç­–ç«é€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰é›†æˆæœåŠ¡ï¼›</li>
<li>SpringBootå¯ä»¥ç¦»å¼€SpringCloudç‹¬ç«‹ä½¿ç”¨ï¼Œå¼€å‘é¡¹ç›®ï¼Œä½†SpringCloudç¦»ä¸å¼€SpringBootï¼Œå±äºä¾èµ–å…³ç³»ï¼›</li>
<li>SpringBootä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ï¼ŒSpringCloudå…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æ¶ï¼›</li>
</ul>
<h2 id="3-3-Dubbo-å’Œ-SpringCloudæŠ€æœ¯é€‰å‹"><a href="#3-3-Dubbo-å’Œ-SpringCloudæŠ€æœ¯é€‰å‹" class="headerlink" title="3.3 Dubbo å’Œ SpringCloudæŠ€æœ¯é€‰å‹"></a>3.3 Dubbo å’Œ SpringCloudæŠ€æœ¯é€‰å‹</h2><h5 id="1-åˆ†å¸ƒå¼-æœåŠ¡æ²»ç†Dubbo"><a href="#1-åˆ†å¸ƒå¼-æœåŠ¡æ²»ç†Dubbo" class="headerlink" title="1. åˆ†å¸ƒå¼+æœåŠ¡æ²»ç†Dubbo"></a>1. åˆ†å¸ƒå¼+æœåŠ¡æ²»ç†Dubbo</h5><p>ç›®å‰æˆç†Ÿçš„äº’è”ç½‘æ¶æ„ï¼Œåº”ç”¨æœåŠ¡åŒ–æ‹†åˆ† + æ¶ˆæ¯ä¸­é—´ä»¶</p>
<h5 id="Dubbo-å’Œ-SpringCloudå¯¹æ¯”"><a href="#Dubbo-å’Œ-SpringCloudå¯¹æ¯”" class="headerlink" title="Dubbo å’Œ SpringCloudå¯¹æ¯”"></a>Dubbo å’Œ SpringCloudå¯¹æ¯”</h5><p>å¯ä»¥çœ‹ä¸€ä¸‹ç¤¾åŒºæ´»è·ƒåº¦ï¼š</p>
<p><a href="https://github.com/dubbo">https://github.com/dubbo</a></p>
<p><a href="https://github.com/spring-cloud">https://github.com/spring-cloud</a></p>
<p><strong>å¯¹æ¯”ç»“æœï¼š</strong></p>
<p><a href="https://imgtu.com/i/hUuEVK"><img src="https://z3.ax1x.com/2021/08/31/hUuEVK.png" alt="hUuEVK.png"></a></p>
<p><em><strong>æœ€å¤§åŒºåˆ«ï¼šSpring Cloud æŠ›å¼ƒäº†Dubboçš„RPCé€šä¿¡ï¼Œé‡‡ç”¨çš„æ˜¯åŸºäºHTTPçš„RESTæ–¹å¼</strong></em><br>ä¸¥æ ¼æ¥è¯´ï¼Œè¿™ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚è™½ç„¶ä»ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´ï¼Œåè€…ç‰ºç‰²äº†æœåŠ¡è°ƒç”¨çš„æ€§èƒ½ï¼Œä½†ä¹Ÿé¿å…äº†ä¸Šé¢æåˆ°çš„åŸç”ŸRPCå¸¦æ¥çš„é—®é¢˜ã€‚è€Œä¸”RESTç›¸æ¯”RPCæ›´ä¸ºçµæ´»ï¼ŒæœåŠ¡æä¾›æ–¹å’Œè°ƒç”¨æ–¹çš„ä¾èµ–åªä¾é ä¸€çº¸å¥‘çº¦ï¼Œä¸å­˜åœ¨ä»£ç çº§åˆ«çš„å¼ºä¾èµ–ï¼Œè¿™ä¸ªä¼˜ç‚¹åœ¨å½“ä¸‹å¼ºè°ƒå¿«é€Ÿæ¼”åŒ–çš„å¾®æœåŠ¡ç¯å¢ƒä¸‹ï¼Œæ˜¾å¾—æ›´åŠ åˆé€‚ã€‚</p>
<p><strong>å“ç‰Œæœºå’Œç»„è£…æœºçš„åŒºåˆ«</strong></p>
<p><strong>ç¤¾åŒºæ”¯æŒä¸æ›´æ–°åŠ›åº¦çš„åŒºåˆ«</strong></p>
<p><strong>æ€»ç»“ï¼š</strong>äºŒè€…è§£å†³çš„é—®é¢˜åŸŸä¸ä¸€æ ·ï¼šDubboçš„å®šä½æ˜¯ä¸€æ¬¾RPCæ¡†æ¶ï¼Œè€ŒSpringCloudçš„ç›®æ ‡æ˜¯å¾®æœåŠ¡æ¶æ„ä¸‹çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="3-4-SpringCloudèƒ½å¹²å˜›ï¼Ÿ"><a href="#3-4-SpringCloudèƒ½å¹²å˜›ï¼Ÿ" class="headerlink" title="3.4 SpringCloudèƒ½å¹²å˜›ï¼Ÿ"></a>3.4 SpringCloudèƒ½å¹²å˜›ï¼Ÿ</h2><ul>
<li>Distributed/versioned configuration åˆ†å¸ƒå¼/ç‰ˆæœ¬æ§åˆ¶é…ç½®</li>
<li>Service registration and discovery æœåŠ¡æ³¨å†Œä¸å‘ç°</li>
<li>Routing è·¯ç”±Service-to-service calls æœåŠ¡åˆ°æœåŠ¡çš„è°ƒç”¨</li>
<li>Load balancing è´Ÿè½½å‡è¡¡é…ç½®</li>
<li>Circuit Breakers æ–­è·¯å™¨</li>
<li>Distributed messaging åˆ†å¸ƒå¼æ¶ˆæ¯ç®¡ç†</li>
<li>â€¦</li>
</ul>
<h2 id="3-5-SpringCloudä¸‹è½½"><a href="#3-5-SpringCloudä¸‹è½½" class="headerlink" title="3.5 SpringCloudä¸‹è½½"></a>3.5 SpringCloudä¸‹è½½</h2><p>å®˜ç½‘ï¼š<a href="http://projects.spring.io/spring-cloud/">http://projects.spring.io/spring-cloud/</a></p>
<p>ç‰ˆæœ¬å·æœ‰ç‚¹ç‰¹åˆ«ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200521130004420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>SpringCloudæ²¡æœ‰é‡‡ç”¨æ•°å­—ç¼–å·çš„æ–¹å¼å‘½åç‰ˆæœ¬å·ï¼Œè€Œæ˜¯é‡‡ç”¨äº†<strong>ä¼¦æ•¦åœ°é“ç«™</strong>çš„åç§°ï¼ŒåŒæ—¶æ ¹æ®å­—æ¯è¡¨çš„é¡ºåºæ¥å¯¹åº”ç‰ˆæœ¬æ—¶é—´é¡ºåºï¼Œæ¯”å¦‚æœ€æ—©çš„Realseç‰ˆæœ¬ï¼šAngelï¼Œç¬¬äºŒä¸ªRealseç‰ˆæœ¬ï¼šBrixtonï¼Œç„¶åæ˜¯Camdenã€Dalstonã€Edgwareï¼Œç›®å‰æœ€æ–°çš„æ˜¯Hoxton SR4 CURRENT GAé€šç”¨ç¨³å®šç‰ˆã€‚</p>
<p><strong>è‡ªå­¦å‚è€ƒä¹¦</strong>ï¼š</p>
<ul>
<li>SpringCloud Netflix ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://springcloud.cc/spring-cloud-netflix.html">https://springcloud.cc/spring-cloud-netflix.html</a></li>
<li>SpringCloud ä¸­æ–‡APIæ–‡æ¡£(å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ç‰ˆ)ï¼š<a href="https://springcloud.cc/spring-cloud-dalston.html">https://springcloud.cc/spring-cloud-dalston.html</a></li>
<li>SpringCloudä¸­å›½ç¤¾åŒºï¼š<a href="http://springcloud.cn/">http://springcloud.cn/</a></li>
<li>SpringCloudä¸­æ–‡ç½‘ï¼š<a href="https://springcloud.cc/">https://springcloud.cc</a></li>
</ul>
<h1 id="4-SpringCloud-Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…"><a href="#4-SpringCloud-Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…" class="headerlink" title="4. SpringCloud Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…"></a>4. SpringCloud Restå­¦ä¹ ç¯å¢ƒæ­å»ºï¼šæœåŠ¡æä¾›è€…</h1><h2 id="4-1-ä»‹ç»"><a href="#4-1-ä»‹ç»" class="headerlink" title="4.1 ä»‹ç»"></a>4.1 ä»‹ç»</h2><ul>
<li>æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªDeptéƒ¨é—¨æ¨¡å—åšä¸€ä¸ªå¾®æœåŠ¡é€šç”¨æ¡ˆä¾‹<strong>Consumer</strong>æ¶ˆè´¹è€…(<strong>Client</strong>)é€šè¿‡RESTè°ƒç”¨<strong>Provider</strong>æä¾›è€…(<strong>Server</strong>)æä¾›çš„æœåŠ¡ã€‚</li>
<li>å›é¡¾Springï¼ŒSpringMVCï¼ŒMybatisç­‰ä»¥å¾€å­¦ä¹ çš„çŸ¥è¯†ã€‚</li>
<li>Mavençš„åˆ†åŒ…åˆ†æ¨¡å—æ¶æ„å¤ä¹ ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ä¸€ä¸ªç®€å•çš„Mavenæ¨¡å—ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">-- app-parent: ä¸€ä¸ªçˆ¶é¡¹ç›®(app-parent)èšåˆäº†å¾ˆå¤šå­é¡¹ç›®(app-util\app-dao\app-web...)</span></span><br><span class="line">  |<span class="comment">-- pom.xml</span></span><br><span class="line">  |</span><br><span class="line">  |<span class="comment">-- app-core</span></span><br><span class="line">  ||<span class="comment">---- pom.xml</span></span><br><span class="line">  |</span><br><span class="line">  |<span class="comment">-- app-web</span></span><br><span class="line">  ||<span class="comment">---- pom.xml</span></span><br><span class="line">  ......</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªçˆ¶å·¥ç¨‹å¸¦ç€å¤šä¸ªMouduleå­æ¨¡å—</p>
<p>MicroServiceCloudçˆ¶å·¥ç¨‹(Project)ä¸‹åˆæ¬¡å¸¦ç€3ä¸ªå­æ¨¡å—(Module)</p>
<ul>
<li>microservicecloud-api ã€å°è£…çš„æ•´ä½“entity/æ¥å£/å…¬å…±é…ç½®ç­‰ã€‘</li>
<li>microservicecloud-consumer-dept-80 ã€æœåŠ¡æ¶ˆè´¹è€…ã€‘</li>
<li>microservicecloud-provider-dept-8001ã€æœåŠ¡æä¾›è€…ã€‘</li>
</ul>
<h2 id="4-2-SpringCloudç‰ˆæœ¬é€‰æ‹©"><a href="#4-2-SpringCloudç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="4.2 SpringCloudç‰ˆæœ¬é€‰æ‹©"></a>4.2 SpringCloudç‰ˆæœ¬é€‰æ‹©</h2><p><strong>å¤§ç‰ˆæœ¬è¯´æ˜</strong></p>
<p><a href="https://imgtu.com/i/hUT6Wn"><img src="https://z3.ax1x.com/2021/08/31/hUT6Wn.png" alt="hUT6Wn.png"></a></p>
<p><strong>å®é™…å¼€å‘ç‰ˆæœ¬å…³ç³»</strong></p>
<p><a href="https://imgtu.com/i/hUTJJA"><img src="https://z3.ax1x.com/2021/08/31/hUTJJA.png" alt="hUTJJA.png"></a></p>
<p><strong>ä½¿ç”¨åä¸¤ä¸ª</strong></p>
<h2 id="4-3-åˆ›å»ºçˆ¶å·¥ç¨‹"><a href="#4-3-åˆ›å»ºçˆ¶å·¥ç¨‹" class="headerlink" title="4.3 åˆ›å»ºçˆ¶å·¥ç¨‹"></a>4.3 åˆ›å»ºçˆ¶å·¥ç¨‹</h2><ul>
<li>æ–°å»ºçˆ¶å·¥ç¨‹é¡¹ç›®springcloudï¼Œåˆ‡è®°<strong>Packageingæ˜¯pomæ¨¡å¼</strong></li>
<li>ä¸»è¦æ˜¯å®šä¹‰POMæ–‡ä»¶ï¼Œå°†åç»­å„ä¸ªå­æ¨¡å—å…¬ç”¨çš„jaråŒ…ç­‰ç»Ÿä¸€æå–å‡ºæ¥ï¼Œç±»ä¼¼ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200521130052880.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a><strong>pom.xml</strong></h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.haust<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-api<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-provider-dept-8001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-consumer-dept-80<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-eureka-7001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-eureka-7002<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-eureka-7003<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-provider-dept-8002<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-provider-dept-8003<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-consumer-dept-feign<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-provider-dept-hystrix-8001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-consumer-hystrix-dashboard<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-zuul-9527<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-config-server-3344<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-config-client-3355<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-config-eureka-7001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springcloud-config-dept-8001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ‰“åŒ…æ–¹å¼  pom--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.16.18<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--springCloudçš„ä¾èµ–--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Greenwich.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--SpringBoot--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--SpringBoot å¯åŠ¨å™¨--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æµ‹è¯•~--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>çˆ¶å·¥ç¨‹ä¸ºspringcloudï¼Œå…¶ä¸‹æœ‰å¤šä¸ªå­muduleï¼Œ</strong>è¯¦æƒ…å‚è€ƒå®Œæ•´ä»£ç äº†è§£</p>
<ul>
<li>springcloud-consumer-dept-80è®¿é—®springcloud-provider-dept-8001ä¸‹çš„controllerä½¿ç”¨RESTæ–¹å¼</li>
</ul>
<h3 id="å¦‚DeptConsumerController-java"><a href="#å¦‚DeptConsumerController-java" class="headerlink" title="å¦‚DeptConsumerController.java"></a><strong>å¦‚DeptConsumerController.java</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptConsumerController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç†è§£ï¼šæ¶ˆè´¹è€…ï¼Œä¸åº”è¯¥æœ‰serviceå±‚~</span></span><br><span class="line"><span class="comment">     * RestTemplate .... ä¾›æˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±å¯ä»¥äº†ï¼ æ³¨å†Œåˆ°Springä¸­</span></span><br><span class="line"><span class="comment">     * (åœ°å€ï¼šurl, å®ä½“ï¼šMap ,Class&lt;T&gt; responseType)</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * æä¾›å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹httpæœåŠ¡çš„æ–¹æ³•ï¼Œç®€å•çš„RestfulæœåŠ¡æ¨¡æ¿~</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœåŠ¡æä¾›æ–¹åœ°å€å‰ç¼€</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * Ribbon:æˆ‘ä»¬è¿™é‡Œçš„åœ°å€ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡æœåŠ¡åæ¥è®¿é—®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REST_URL_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8001&quot;</span>;</span><br><span class="line">    <span class="comment">//private static final String REST_URL_PREFIX = &quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æ·»åŠ éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dept</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="comment">// postForObject(æœåŠ¡æä¾›æ–¹åœ°å€(æ¥å£),å‚æ•°å®ä½“,è¿”å›ç±»å‹.class)</span></span><br><span class="line">        <span class="keyword">return</span> restTemplate.postForObject(REST_URL_PREFIX + <span class="string">&quot;/dept/add&quot;</span>, dept, Boolean.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        <span class="comment">// getForObject(æœåŠ¡æä¾›æ–¹åœ°å€(æ¥å£),è¿”å›ç±»å‹.class)</span></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="string">&quot;/dept/get/&quot;</span> + id, Dept.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="string">&quot;/dept/list&quot;</span>, List.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨RestTempleteå…ˆéœ€è¦æ”¾å…¥Springå®¹å™¨ä¸­</p>
<h3 id="ConfigBean-java"><a href="#ConfigBean-java" class="headerlink" title="ConfigBean.java"></a><strong>ConfigBean.java</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigBean</span> &#123;<span class="comment">//@Configuration -- spring  applicationContext.xml</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTemplate</span></span><br><span class="line">    <span class="comment">// IRule</span></span><br><span class="line">    <span class="comment">// RoundRobinRule è½®è¯¢</span></span><br><span class="line">    <span class="comment">// RandomRule éšæœº</span></span><br><span class="line">    <span class="comment">// AvailabilityFilteringRule ï¼š ä¼šå…ˆè¿‡æ»¤æ‰ï¼Œè·³é—¸ï¼Œè®¿é—®æ•…éšœçš„æœåŠ¡~ï¼Œå¯¹å‰©ä¸‹çš„è¿›è¡Œè½®è¯¢~</span></span><br><span class="line">    <span class="comment">// RetryRule ï¼š ä¼šå…ˆæŒ‰ç…§è½®è¯¢è·å–æœåŠ¡~ï¼Œå¦‚æœæœåŠ¡è·å–å¤±è´¥ï¼Œåˆ™ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´å†…è¿›è¡Œï¼Œé‡è¯•</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>springcloud-provider-dept-8001çš„daoæ¥å£è°ƒç”¨springcloud-apiæ¨¡å—ä¸‹çš„pojoï¼Œå¯ä½¿ç”¨åœ¨springcloud-provider-dept-8001çš„pomæ–‡ä»¶å¯¼å…¥springcloud-apiæ¨¡å—ä¾èµ–çš„æ–¹å¼ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æˆ‘ä»¬éœ€è¦æ‹¿åˆ°å®ä½“ç±»ï¼Œæ‰€ä»¥è¦é…ç½®api module--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.haust<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>springcloud-consumer-dept-80å’Œspringcloud-provider-dept-8001çš„pom.xmlå’Œçˆ¶å·¥ç¨‹ä¸‹çš„ä¾èµ–åŸºæœ¬ä¸€æ ·ï¼Œç›´æ¥çœ‹å®Œæ•´ä»£ç å³å¯ï¼Œä¸å†æ·»åŠ é‡å¤ç¬”è®°ã€‚</p>
<h1 id="5-EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#5-EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="5. EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>5. EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ</h1><h2 id="5-1-ä»€ä¹ˆæ˜¯Eureka"><a href="#5-1-ä»€ä¹ˆæ˜¯Eureka" class="headerlink" title="5.1 ä»€ä¹ˆæ˜¯Eureka"></a>5.1 ä»€ä¹ˆæ˜¯Eureka</h2><ul>
<li>Netflixåœ¨æ¶‰åŠEurekaæ—¶ï¼Œéµå¾ªçš„å°±æ˜¯APIåŸåˆ™.Eurekaæ˜¯Netflixçš„ä¸€ä¸ªå­æ¨¡å—ï¼Œä¹Ÿæ˜¯æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ã€‚</li>
<li>Eurekaæ˜¯åŸºäºRESTçš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´ä»¶å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»ï¼ŒæœåŠ¡æ³¨å†Œä¸å‘ç°å¯¹äºå¾®æœåŠ¡æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ï¼Œæœ‰äº†æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œåªéœ€è¦ä½¿ç”¨æœåŠ¡çš„æ ‡è¯†ç¬¦ï¼Œå°±å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æœåŠ¡è°ƒç”¨çš„é…ç½®æ–‡ä»¶äº†ï¼Œ<strong>åŠŸèƒ½ç±»ä¼¼äºDubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚Zookeeper.</strong></li>
</ul>
<h2 id="5-2-åŸç†ç†è§£"><a href="#5-2-åŸç†ç†è§£" class="headerlink" title="5.2 åŸç†ç†è§£"></a>5.2 åŸç†ç†è§£</h2><h3 id="EurekaåŸºæœ¬çš„æ¶æ„"><a href="#EurekaåŸºæœ¬çš„æ¶æ„" class="headerlink" title="EurekaåŸºæœ¬çš„æ¶æ„"></a><strong>EurekaåŸºæœ¬çš„æ¶æ„</strong></h3><ul>
<li>Springcloud å°è£…äº†Netflixå…¬å¸å¼€å‘çš„Eurekaæ¨¡å—æ¥å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç° (å¯¹æ¯”Zookeeper).</li>
<li>Eurekaé‡‡ç”¨äº†C-Sçš„æ¶æ„è®¾è®¡ï¼ŒEurekaServerä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œä»–æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒ.</li>
<li>è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨Eurekaçš„å®¢æˆ·ç«¯è¿æ¥åˆ°EurekaServerå¹¶ç»´æŒå¿ƒè·³è¿æ¥ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡EurekaServeræ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ŒSpringcloud çš„ä¸€äº›å…¶ä»–æ¨¡å— (æ¯”å¦‚Zuul) å°±å¯ä»¥é€šè¿‡EurekaServeræ¥å‘ç°ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸å…³çš„é€»è¾‘.<br><img src="https://img-blog.csdnimg.cn/20200521130157770.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
</ul>
<h3 id="å’ŒDubboæ¶æ„å¯¹æ¯”"><a href="#å’ŒDubboæ¶æ„å¯¹æ¯”" class="headerlink" title="å’ŒDubboæ¶æ„å¯¹æ¯”."></a><strong>å’ŒDubboæ¶æ„å¯¹æ¯”.</strong></h3><p><img src="https://img-blog.csdnimg.cn/20201120091517323.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ul>
<li>Eureka åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šEureka Server å’Œ Eureka Client.</li>
<li>Eureka Server æä¾›æœåŠ¡æ³¨å†Œï¼Œå„ä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œå›åœ¨EurekaServerä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·Eureka Serverä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå‚¨å­˜æ‰€æœ‰è¯¾ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çš„çœ‹åˆ°.</li>
<li>Eureka Client æ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–EurekaServerçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ï¼Œä½¿ç”¨è½®è¯¢è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åï¼Œå°†ä¼šå‘EurekaServerå‘é€å¿ƒè·³ (é»˜è®¤å‘¨æœŸä¸º30ç§’) ã€‚å¦‚æœEureka Serveråœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤æ‰ (é»˜è®¤å‘¨æœŸä¸º90s).</li>
</ul>
<h3 id="ä¸‰å¤§è§’è‰²"><a href="#ä¸‰å¤§è§’è‰²" class="headerlink" title="ä¸‰å¤§è§’è‰²"></a><strong>ä¸‰å¤§è§’è‰²</strong></h3><ul>
<li>Eureka Serverï¼šæä¾›æœåŠ¡çš„æ³¨å†Œä¸å‘ç°</li>
<li>Service Providerï¼šæœåŠ¡ç”Ÿäº§æ–¹ï¼Œå°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°Eurekaä¸­ï¼Œä»è€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½ç‹—æ‰¾åˆ°</li>
<li>Service Consumerï¼šæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œä»Eurekaä¸­è·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»è€Œæ‰¾åˆ°æ¶ˆè´¹æœåŠ¡</li>
</ul>
<p>ç›®å‰å·¥ç¨‹çŠ¶å†µ</p>
<h2 id="5-3-æ„å»ºæ­¥éª¤"><a href="#5-3-æ„å»ºæ­¥éª¤" class="headerlink" title="5.3 æ„å»ºæ­¥éª¤"></a>5.3 æ„å»ºæ­¥éª¤</h2><h3 id="1-eureka-server"><a href="#1-eureka-server" class="headerlink" title="1. eureka-server"></a>1. eureka-server</h3><ul>
<li>springcloud-eureka-7001 æ¨¡å—å»ºç«‹</li>
<li>pom.xml é…ç½®</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼åŒ…~--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥Eureka Serverä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--çƒ­éƒ¨ç½²å·¥å…·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>application.yml</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7001</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Eurekaé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="comment"># EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="comment"># è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ,å®¢æˆ·ç«¯çš„åŒ–ä¸º ture</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Eurekaç›‘æ§é¡µé¢~</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br></pre></td></tr></table></figure>

<p>æºç ä¸­Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„:</p>
<p><img src="https://img-blog.csdnimg.cn/20200521130439891.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ul>
<li>ä¸»å¯åŠ¨ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// @EnableEurekaServer æœåŠ¡ç«¯çš„å¯åŠ¨ç±»ï¼Œå¯ä»¥æ¥å—åˆ«äººæ³¨å†Œè¿›æ¥~</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EurekaServer_7001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(EurekaServer_7001.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨æˆåŠŸåè®¿é—® <a href="http://localhost:7001/">http://localhost:7001/</a> å¾—åˆ°ä»¥ä¸‹é¡µé¢</p>
<p><img src="https://img-blog.csdnimg.cn/20200521130420201.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="2-eureka-client"><a href="#2-eureka-client" class="headerlink" title="2. eureka-client"></a>2. eureka-client</h3><p><strong>è°ƒæ•´ä¹‹å‰åˆ›å»ºçš„springlouc-provider-dept-8001</strong></p>
<ul>
<li>å¯¼å…¥eurekaä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Eurekaä¾èµ–--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>applicationä¸­æ–°å¢eurekaé…ç½®</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ºä¸»å¯åŠ¨ç±»æ·»åŠ @EnableEurekaClientæ³¨è§£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// @EnableEurekaClient å¼€å¯Eurekaå®¢æˆ·ç«¯æ³¨è§£ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptProvider_8001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DeptProvider_8001.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å…ˆå¯åŠ¨7001æœåŠ¡ç«¯åå¯åŠ¨8001å®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ï¼Œç„¶åè®¿é—®ç›‘æ§é¡µ<a href="http://localhost:7001/">http://localhost:7001/</a> äº§çœ‹ç»“æœå¦‚å›¾ï¼ŒæˆåŠŸ</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200521130507106.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ul>
<li>ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">springcloud-provider-dept-8001</span> <span class="comment">#ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>

<p>ç»“æœå¦‚å›¾ï¼š<br><img src="https://img-blog.csdnimg.cn/20200521130659314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>**<strong>å¦‚æœæ­¤æ—¶åœæ‰springcloud-provider-dept-8001 ç­‰30så ç›‘æ§ä¼šå¼€å¯ä¿æŠ¤æœºåˆ¶ï¼š</strong><img src="https://img-blog.csdnimg.cn/20200521130557974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ul>
<li>é…ç½®å…³äºæœåŠ¡åŠ è½½çš„ç›‘æ§ä¿¡æ¯</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200521130718511.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>pom.xmlä¸­æ·»åŠ ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--actuatorå®Œå–„ç›‘æ§ä¿¡æ¯--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€"><a href="#3-EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€" class="headerlink" title="3. EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€"></a>3. EureKaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼šå¥½æ­»ä¸å¦‚èµ–æ´»ç€</h3><p>ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š<strong>æŸæ—¶åˆ»æŸä¸€ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨ï¼Œeurekaä¸ä¼šç«‹å³æ¸…ç†ï¼Œä¾æ—§ä¼šå¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ï¼</strong></p>
<ul>
<li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“eureka serveråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å®ä¾‹çš„å¿ƒè·³ï¼Œä¾¿ä¼šæŠŠè¯¥å®ä¾‹ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰ï¼Œä½†æ˜¯ï¼Œå¦‚æœçŸ­æ—¶é—´å†…ä¸¢å¤±å¤§é‡çš„å®ä¾‹å¿ƒè·³ï¼Œä¾¿ä¼šè§¦å‘eureka serverçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œæ¯”å¦‚åœ¨å¼€å‘æµ‹è¯•æ—¶ï¼Œéœ€è¦é¢‘ç¹åœ°é‡å¯å¾®æœåŠ¡å®ä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå°‘ä¼šæŠŠeureka serverä¸€èµ·é‡å¯ï¼ˆå› ä¸ºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ä¼šä¿®æ”¹eurekaæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œå½“ä¸€åˆ†é’Ÿå†…æ”¶åˆ°çš„å¿ƒè·³æ•°å¤§é‡å‡å°‘æ—¶ï¼Œä¼šè§¦å‘è¯¥ä¿æŠ¤æœºåˆ¶ã€‚å¯ä»¥åœ¨eurekaç®¡ç†ç•Œé¢çœ‹åˆ°Renews thresholdå’ŒRenews(last min)ï¼Œå½“åè€…ï¼ˆæœ€åä¸€åˆ†é’Ÿæ”¶åˆ°çš„å¿ƒè·³æ•°ï¼‰å°äºå‰è€…ï¼ˆå¿ƒè·³é˜ˆå€¼ï¼‰çš„æ—¶å€™ï¼Œè§¦å‘ä¿æŠ¤æœºåˆ¶ï¼Œä¼šå‡ºç°çº¢è‰²çš„è­¦å‘Šï¼šEMERGENCY!EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEYâ€™RE NOT.RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEGING EXPIRED JUST TO BE SAFE.ä»è­¦å‘Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œeurekaè®¤ä¸ºè™½ç„¶æ”¶ä¸åˆ°å®ä¾‹çš„å¿ƒè·³ï¼Œä½†å®ƒè®¤ä¸ºå®ä¾‹è¿˜æ˜¯å¥åº·çš„ï¼Œeurekaä¼šä¿æŠ¤è¿™äº›å®ä¾‹ï¼Œä¸ä¼šæŠŠå®ƒä»¬ä»æ³¨å†Œè¡¨ä¸­åˆ æ‰ã€‚</p>
</li>
<li><p>è¯¥ä¿æŠ¤æœºåˆ¶çš„ç›®çš„æ˜¯é¿å…ç½‘ç»œè¿æ¥æ•…éšœï¼Œåœ¨å‘ç”Ÿç½‘ç»œæ•…éšœæ—¶ï¼Œå¾®æœåŠ¡å’Œæ³¨å†Œä¸­å¿ƒä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä½†æœåŠ¡æœ¬èº«æ˜¯å¥åº·çš„ï¼Œä¸åº”è¯¥æ³¨é”€è¯¥æœåŠ¡ï¼Œå¦‚æœeurekaå› ç½‘ç»œæ•…éšœè€ŒæŠŠå¾®æœåŠ¡è¯¯åˆ äº†ï¼Œé‚£å³ä½¿ç½‘ç»œæ¢å¤äº†ï¼Œè¯¥å¾®æœåŠ¡ä¹Ÿä¸ä¼šé‡æ–°æ³¨å†Œåˆ°eureka serveräº†ï¼Œå› ä¸ºåªæœ‰åœ¨å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™æ‰ä¼šå‘èµ·æ³¨å†Œè¯·æ±‚ï¼Œåé¢åªä¼šå‘é€å¿ƒè·³å’ŒæœåŠ¡åˆ—è¡¨è¯·æ±‚ï¼Œè¿™æ ·çš„è¯ï¼Œè¯¥å®ä¾‹è™½ç„¶æ˜¯è¿è¡Œç€ï¼Œä½†æ°¸è¿œä¸ä¼šè¢«å…¶å®ƒæœåŠ¡æ‰€æ„ŸçŸ¥ã€‚æ‰€ä»¥ï¼Œeureka serveråœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šçš„å®¢æˆ·ç«¯å¿ƒè·³æ—¶ï¼Œä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹ï¼Œeurekaä¼šä¿æŠ¤æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸åœ¨æ³¨é”€ä»»ä½•å¾®æœåŠ¡ï¼Œå½“ç½‘ç»œæ•…éšœæ¢å¤åï¼Œeurekaä¼šè‡ªåŠ¨é€€å‡ºä¿æŠ¤æ¨¡å¼ã€‚è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼å¯ä»¥è®©é›†ç¾¤æ›´åŠ å¥å£®ã€‚</p>
</li>
<li><p>ä½†æ˜¯æˆ‘ä»¬åœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œéœ€è¦é¢‘ç¹åœ°é‡å¯å‘å¸ƒï¼Œå¦‚æœè§¦å‘äº†ä¿æŠ¤æœºåˆ¶ï¼Œåˆ™æ—§çš„æœåŠ¡å®ä¾‹æ²¡æœ‰è¢«åˆ é™¤ï¼Œè¿™æ—¶è¯·æ±‚æœ‰å¯èƒ½è·‘åˆ°æ—§çš„å®ä¾‹ä¸­ï¼Œè€Œè¯¥å®ä¾‹å·²ç»å…³é—­äº†ï¼Œè¿™å°±å¯¼è‡´è¯·æ±‚é”™è¯¯ï¼Œå½±å“å¼€å‘æµ‹è¯•ã€‚æ‰€ä»¥ï¼Œåœ¨å¼€å‘æµ‹è¯•é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼å…³é—­ï¼Œåªéœ€åœ¨eureka serveré…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹é…ç½®å³å¯ï¼šeureka.server.enable-self-preservation=falseã€ä¸æ¨èå…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‘</p>
<blockquote>
<p>è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒä¸‹è¿™ç¯‡åšå®¢å†…å®¹ï¼š<a href="https://blog.csdn.net/wudiyong22/article/details/80827594">https://blog.csdn.net/wudiyong22/article/details/80827594</a></p>
</blockquote>
</li>
</ul>
<h3 id="4-æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ä¼šç”¨åˆ°ï¼‰"><a href="#4-æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ä¼šç”¨åˆ°ï¼‰" class="headerlink" title="4. æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ä¼šç”¨åˆ°ï¼‰"></a>4. æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡ï¼Œè·å–ä¸€äº›æ¶ˆæ¯ï¼ˆå›¢é˜Ÿå¼€å‘ä¼šç”¨åˆ°ï¼‰</h3><p><strong>DeptController.java</strong>æ–°å¢æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DiscoveryClient å¯ä»¥ç”¨æ¥è·å–ä¸€äº›é…ç½®çš„ä¿¡æ¯ï¼Œå¾—åˆ°å…·ä½“çš„å¾®æœåŠ¡ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DiscoveryClient client;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ä¸€äº›æ³¨å†Œè¿›æ¥çš„å¾®æœåŠ¡çš„ä¿¡æ¯~ï¼Œ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/dept/discovery&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">discovery</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å¾®æœåŠ¡åˆ—è¡¨çš„æ¸…å•</span></span><br><span class="line">    List&lt;String&gt; services = client.getServices();</span><br><span class="line">    System.out.println(<span class="string">&quot;discovery=&gt;services:&quot;</span> + services);</span><br><span class="line">    <span class="comment">// å¾—åˆ°ä¸€ä¸ªå…·ä½“çš„å¾®æœåŠ¡ä¿¡æ¯,é€šè¿‡å…·ä½“çš„å¾®æœåŠ¡idï¼ŒapplicaioinNameï¼›</span></span><br><span class="line">    List&lt;ServiceInstance&gt; instances = client.getInstances(<span class="string">&quot;SPRINGCLOUD-PROVIDER-DEPT&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (ServiceInstance instance : instances) &#123;</span><br><span class="line">        System.out.println(</span><br><span class="line">                instance.getHost() + <span class="string">&quot;\t&quot;</span> + <span class="comment">// ä¸»æœºåç§°</span></span><br><span class="line">                        instance.getPort() + <span class="string">&quot;\t&quot;</span> + <span class="comment">// ç«¯å£å·</span></span><br><span class="line">                        instance.getUri() + <span class="string">&quot;\t&quot;</span> + <span class="comment">// uri</span></span><br><span class="line">                        instance.getServiceId() <span class="comment">// æœåŠ¡id</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.client;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200521130913485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>ä¸»å¯åŠ¨ç±»ä¸­åŠ å…¥@EnableDiscoveryClient æ³¨è§£</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// @EnableEurekaClient å¼€å¯Eurekaå®¢æˆ·ç«¯æ³¨è§£ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="comment">// @EnableEurekaClient å¼€å¯æœåŠ¡å‘ç°å®¢æˆ·ç«¯çš„æ³¨è§£ï¼Œå¯ä»¥ç”¨æ¥è·å–ä¸€äº›é…ç½®çš„ä¿¡æ¯ï¼Œå¾—åˆ°å…·ä½“çš„å¾®æœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptProvider_8001</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201120101109857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200521131103616.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="5-4-Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®"><a href="#5-4-Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®" class="headerlink" title="5.4 Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®"></a>5.4 Eurekaï¼šé›†ç¾¤ç¯å¢ƒé…ç½®</h2><p><img src="https://img-blog.csdnimg.cn/20201120102037473.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="1-åˆå§‹åŒ–"><a href="#1-åˆå§‹åŒ–" class="headerlink" title="1.åˆå§‹åŒ–"></a>1.åˆå§‹åŒ–</h3><p>æ–°å»ºspringcloud-eureka-7002ã€springcloud-eureka-7003 æ¨¡å—</p>
<p>1.ä¸ºpom.xmlæ·»åŠ ä¾èµ– (ä¸springcloud-eureka-7001ç›¸åŒ)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼åŒ…~--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-eureka-server --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥Eureka Serverä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--çƒ­éƒ¨ç½²å·¥å…·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.application.ymlé…ç½®(ä¸springcloud-eureka-7001ç›¸åŒ)</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7003</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Eurekaé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span> <span class="comment"># EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span> <span class="comment"># è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span> <span class="comment"># fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">    <span class="attr">service-url:</span> <span class="comment"># ç›‘æ§é¡µé¢~</span></span><br><span class="line">      <span class="comment"># é‡å†™Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„ ---&gt;http://localhost:7001/eureka/</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br></pre></td></tr></table></figure>

<p>3.ä¸»å¯åŠ¨ç±»(ä¸springcloud-eureka-7001ç›¸åŒ)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// @EnableEurekaServer æœåŠ¡ç«¯çš„å¯åŠ¨ç±»ï¼Œå¯ä»¥æ¥å—åˆ«äººæ³¨å†Œè¿›æ¥~</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EurekaServer_7003</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(EurekaServer_7003.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”"><a href="#2-é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”" class="headerlink" title="2.é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”"></a>2.é›†ç¾¤æˆå‘˜ç›¸äº’å…³è”</h3><p><strong>é…ç½®ä¸€äº›è‡ªå®šä¹‰æœ¬æœºåå­—ï¼Œæ‰¾åˆ°æœ¬æœºhostsæ–‡ä»¶å¹¶æ‰“å¼€</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200521131127278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>åœ¨hostsæ–‡ä»¶æœ€ååŠ ä¸Šï¼Œè¦è®¿é—®çš„æœ¬æœºåç§°ï¼Œé»˜è®¤æ˜¯localhost</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200521131141804.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>ä¿®æ”¹application.ymlçš„é…ç½®ï¼Œå¦‚å›¾ä¸ºspringcloud-eureka-7001é…ç½®ï¼Œspringcloud-eureka-7002/springcloud-eureka-7003åŒæ ·åˆ†åˆ«ä¿®æ”¹ä¸ºå…¶å¯¹åº”çš„åç§°å³å¯</strong></p>
<p><img src="https://img-blog.csdnimg.cn/202005211312020.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>åœ¨é›†ç¾¤ä¸­ä½¿springcloud-eureka-7001å…³è”springcloud-eureka-7002ã€springcloud-eureka-7003</strong></p>
<p><strong>å®Œæ•´çš„springcloud-eureka-7001ä¸‹çš„application.ymlå¦‚ä¸‹</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7001</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Eurekaé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">eureka7001.com</span> <span class="comment">#EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span> <span class="comment">#è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span> <span class="comment">#fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">    <span class="attr">service-url:</span> <span class="comment">#ç›‘æ§é¡µé¢~</span></span><br><span class="line">      <span class="comment">#é‡å†™Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„ ---&gt;http://localhost:7001/eureka/</span></span><br><span class="line">      <span class="comment"># å•æœºï¼š defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br><span class="line">      <span class="comment"># é›†ç¾¤ï¼ˆå…³è”ï¼‰ï¼š7001å…³è”7002ã€7003</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span></span><br></pre></td></tr></table></figure>

<p>åŒæ—¶åœ¨é›†ç¾¤ä¸­ä½¿springcloud-eureka-7002å…³è”springcloud-eureka-7001ã€springcloud-eureka-7003</p>
<p>å®Œæ•´çš„springcloud-eureka-7002ä¸‹çš„<strong>application.yml</strong>å¦‚ä¸‹</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7002</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Eurekaé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">eureka7002.com</span> <span class="comment">#EurekaæœåŠ¡ç«¯çš„å®ä¾‹åå­—</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span> <span class="comment">#è¡¨ç¤ºæ˜¯å¦å‘ Eureka æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±(è¿™ä¸ªæ¨¡å—æœ¬èº«æ˜¯æœåŠ¡å™¨,æ‰€ä»¥ä¸éœ€è¦)</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span> <span class="comment">#fetch-registryå¦‚æœä¸ºfalse,åˆ™è¡¨ç¤ºè‡ªå·±ä¸ºæ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">    <span class="attr">service-url:</span> <span class="comment">#ç›‘æ§é¡µé¢~</span></span><br><span class="line">      <span class="comment">#é‡å†™Eurekaçš„é»˜è®¤ç«¯å£ä»¥åŠè®¿é—®è·¯å¾„ ---&gt;http://localhost:7001/eureka/</span></span><br><span class="line">      <span class="comment"># å•æœºï¼š defaultZone: http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br><span class="line">      <span class="comment"># é›†ç¾¤ï¼ˆå…³è”ï¼‰ï¼š7002å…³è”7001ã€7003</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka/,http://eureka7003.com:7003/eureka/</span></span><br></pre></td></tr></table></figure>

<p>springcloud-eureka-7003é…ç½®æ–¹å¼åŒç†å¯å¾—.</p>
<p>é€šè¿‡springcloud-provider-dept-8001ä¸‹çš„ymlé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹<strong>Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># æ³¨å†Œä¸­å¿ƒåœ°å€7001-7003</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">springcloud-provider-dept-8001</span> <span class="comment">#ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æ¨¡æ‹Ÿé›†ç¾¤å°±æ­å»ºå·äº†ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªé¡¹ç›®æŒ‚è½½åˆ°ä¸‰ä¸ªæœåŠ¡å™¨ä¸Šäº†<img src="https://img-blog.csdnimg.cn/20200521131237217.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="5-5-å¯¹æ¯”å’ŒZookeeperåŒºåˆ«"><a href="#5-5-å¯¹æ¯”å’ŒZookeeperåŒºåˆ«" class="headerlink" title="5.5 å¯¹æ¯”å’ŒZookeeperåŒºåˆ«"></a>5.5 å¯¹æ¯”å’ŒZookeeperåŒºåˆ«</h2><h3 id="1-å›é¡¾CAPåŸåˆ™"><a href="#1-å›é¡¾CAPåŸåˆ™" class="headerlink" title="1. å›é¡¾CAPåŸåˆ™"></a><strong>1. å›é¡¾CAPåŸåˆ™</strong></h3><p>RDBMS (MySQL\Oracle\sqlServer) ===&gt; ACID</p>
<p>NoSQL (Redis\MongoDB) ===&gt; CAP</p>
<h3 id="2-ACIDæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-ACIDæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. ACIDæ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>2. ACIDæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><ul>
<li>A (Atomicity) åŸå­æ€§</li>
<li>C (Consistency) ä¸€è‡´æ€§</li>
<li>I (Isolation) éš”ç¦»æ€§</li>
<li>D (Durability) æŒä¹…æ€§</li>
</ul>
<h3 id="3-CAPæ˜¯ä»€ä¹ˆ"><a href="#3-CAPæ˜¯ä»€ä¹ˆ" class="headerlink" title="3. CAPæ˜¯ä»€ä¹ˆ?"></a><strong>3. CAPæ˜¯ä»€ä¹ˆ?</strong></h3><ul>
<li>C (Consistency) å¼ºä¸€è‡´æ€§</li>
<li>A (Availability) å¯ç”¨æ€§</li>
<li>P (Partition tolerance) åˆ†åŒºå®¹é”™æ€§</li>
</ul>
<p>CAPçš„ä¸‰è¿›äºŒï¼šCAã€APã€CP</p>
<h3 id="4-CAPç†è®ºçš„æ ¸å¿ƒ"><a href="#4-CAPç†è®ºçš„æ ¸å¿ƒ" class="headerlink" title="4. CAPç†è®ºçš„æ ¸å¿ƒ"></a><strong>4. CAPç†è®ºçš„æ ¸å¿ƒ</strong></h3><ul>
<li>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶å¾ˆå¥½çš„æ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªéœ€æ±‚</li>
<li>æ ¹æ®CAPåŸç†ï¼Œå°†NoSQLæ•°æ®åº“åˆ†æˆäº†æ»¡è¶³CAåŸåˆ™ï¼Œæ»¡è¶³CPåŸåˆ™å’Œæ»¡è¶³APåŸåˆ™ä¸‰å¤§ç±»<ul>
<li>CAï¼šå•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯æ‰©å±•æ€§è¾ƒå·®</li>
<li>CPï¼šæ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜</li>
<li>APï¼šæ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›</li>
</ul>
</li>
</ul>
<h3 id="5-ä½œä¸ºåˆ†å¸ƒå¼æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿ"><a href="#5-ä½œä¸ºåˆ†å¸ƒå¼æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="5. ä½œä¸ºåˆ†å¸ƒå¼æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿ"></a><strong>5. ä½œä¸ºåˆ†å¸ƒå¼æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒEurekaæ¯”Zookeeperå¥½åœ¨å“ªé‡Œï¼Ÿ</strong></h3><p>è‘—åçš„CAPç†è®ºæŒ‡å‡ºï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³C (ä¸€è‡´æ€§) ã€A (å¯ç”¨æ€§) ã€P (å®¹é”™æ€§)ï¼Œç”±äºåˆ†åŒºå®¹é”™æ€§På†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ˜¯å¿…é¡»è¦ä¿è¯çš„ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½å†Aå’ŒCä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚</p>
<ul>
<li>Zookeeper ä¿è¯çš„æ˜¯ CP â€”&gt; æ»¡è¶³ä¸€è‡´æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜</li>
<li>Eureka ä¿è¯çš„æ˜¯ AP â€”&gt; æ»¡è¶³å¯ç”¨æ€§ï¼Œåˆ†åŒºå®¹é”™çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›</li>
</ul>
<h4 id="Zookeeperä¿è¯çš„æ˜¯CP"><a href="#Zookeeperä¿è¯çš„æ˜¯CP" class="headerlink" title="Zookeeperä¿è¯çš„æ˜¯CP"></a><strong>Zookeeperä¿è¯çš„æ˜¯CP</strong></h4><ul>
<li>å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„æ³¨å†Œä¿¡æ¯ï¼Œä½†ä¸èƒ½æ¥æ”¶æœåŠ¡ç›´æ¥downæ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹å¯ç”¨æ€§çš„è¦æ±‚è¦é«˜äºä¸€è‡´æ€§ã€‚ä½†zookeeperä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“masterèŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°è¿›è¡Œleaderé€‰ä¸¾ã€‚é—®é¢˜åœ¨äºï¼Œé€‰ä¸¾leaderçš„æ—¶é—´å¤ªé•¿ï¼Œ30-120sï¼Œä¸”é€‰ä¸¾æœŸé—´æ•´ä¸ªzookeeperé›†ç¾¤æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™å°±å¯¼è‡´åœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ä¸ºç½‘ç»œé—®é¢˜ä½¿å¾—zookeeperé›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡å‘ç”Ÿçš„äº‹ä»¶ï¼Œè™½ç„¶æœåŠ¡æœ€ç»ˆèƒ½å¤Ÿæ¢å¤ï¼Œä½†æ˜¯ï¼Œæ¼«é•¿çš„é€‰ä¸¾æ—¶é—´å¯¼è‡´æ³¨å†Œé•¿æœŸä¸å¯ç”¨ï¼Œæ˜¯ä¸å¯å®¹å¿çš„ã€‚</li>
</ul>
<h4 id="Eurekaä¿è¯çš„æ˜¯AP"><a href="#Eurekaä¿è¯çš„æ˜¯AP" class="headerlink" title="Eurekaä¿è¯çš„æ˜¯AP"></a><strong>Eurekaä¿è¯çš„æ˜¯AP</strong></h4><p>Eurekaçœ‹æ˜ç™½äº†è¿™ä¸€ç‚¹ï¼Œå› æ­¤åœ¨è®¾è®¡æ—¶å°±ä¼˜å…ˆä¿è¯å¯ç”¨æ€§ã€‚Eurekaå„ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯åœ¨å‘æŸä¸ªEurekaæ³¨å†Œæ—¶ï¼Œå¦‚æœå‘ç°è¿æ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å…¶ä»–èŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨ï¼Œå°±èƒ½ä¿ä½æ³¨å†ŒæœåŠ¡çš„å¯ç”¨æ€§ï¼Œåªä¸è¿‡æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰ä¹‹ä¸­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‡ºç°äº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li>Eurekaä¸åœ¨ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡</li>
<li>Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Š (å³ä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨)</li>
<li>å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸­</li>
</ul>
<p><strong>å› æ­¤ï¼ŒEurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒzookeeperé‚£æ ·ä½¿æ•´ä¸ªæ³¨å†ŒæœåŠ¡ç˜«ç—ª</strong></p>
<h1 id="6-Ribbonï¼šè´Ÿè½½å‡è¡¡-åŸºäºå®¢æˆ·ç«¯"><a href="#6-Ribbonï¼šè´Ÿè½½å‡è¡¡-åŸºäºå®¢æˆ·ç«¯" class="headerlink" title="6. Ribbonï¼šè´Ÿè½½å‡è¡¡(åŸºäºå®¢æˆ·ç«¯)"></a>6. Ribbonï¼šè´Ÿè½½å‡è¡¡(åŸºäºå®¢æˆ·ç«¯)</h1><h2 id="6-1-è´Ÿè½½å‡è¡¡ä»¥åŠRibbon"><a href="#6-1-è´Ÿè½½å‡è¡¡ä»¥åŠRibbon" class="headerlink" title="6.1 è´Ÿè½½å‡è¡¡ä»¥åŠRibbon"></a>6.1 è´Ÿè½½å‡è¡¡ä»¥åŠRibbon</h2><blockquote>
<p>Ribbonæ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<ul>
<li>Spring Cloud Ribbon æ˜¯åŸºäºNetflix Ribbon å®ç°çš„ä¸€å¥—å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„å·¥å…·ã€‚</li>
<li>ç®€å•çš„è¯´ï¼ŒRibbon æ˜¯ Netflix å‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯çš„è½¯ä»¶è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°† Netflix çš„ä¸­é—´å±‚æœåŠ¡è¿æ¥åœ¨ä¸€èµ·ã€‚Ribbon çš„å®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œæ•´çš„é…ç½®é¡¹ï¼Œå¦‚ï¼šè¿æ¥è¶…æ—¶ã€é‡è¯•ç­‰ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡º LoadBalancer (ç®€ç§°LBï¼šè´Ÿè½½å‡è¡¡) åé¢æ‰€æœ‰çš„åŠå…¶ï¼ŒRibbon ä¼šè‡ªåŠ¨çš„å¸®åŠ©ä½ åŸºäºæŸç§è§„åˆ™ (å¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿æ¥ç­‰ç­‰) å»è¿æ¥è¿™äº›æœºå™¨ã€‚æˆ‘ä»¬ä¹Ÿå®¹æ˜“ä½¿ç”¨ Ribbon å®ç°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼</li>
</ul>
<blockquote>
<h3 id="Ribbonèƒ½å¹²å˜›ï¼Ÿ"><a href="#Ribbonèƒ½å¹²å˜›ï¼Ÿ" class="headerlink" title="Ribbonèƒ½å¹²å˜›ï¼Ÿ"></a>Ribbonèƒ½å¹²å˜›ï¼Ÿ</h3></blockquote>
<p><img src="https://img-blog.csdnimg.cn/20201121103107791.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ul>
<li>LBï¼Œå³è´Ÿè½½å‡è¡¡ (LoadBalancer) ï¼Œåœ¨å¾®æœåŠ¡æˆ–åˆ†å¸ƒå¼é›†ç¾¤ä¸­ç»å¸¸ç”¨çš„ä¸€ç§åº”ç”¨ã€‚</li>
<li>è´Ÿè½½å‡è¡¡ç®€å•çš„è¯´å°±æ˜¯å°†ç”¨æˆ·çš„è¯·æ±‚å¹³æ‘Šçš„åˆ†é…åˆ°å¤šä¸ªæœåŠ¡ä¸Šï¼Œä»è€Œè¾¾åˆ°ç³»ç»Ÿçš„HA (é«˜ç”¨)ã€‚</li>
<li>å¸¸è§çš„è´Ÿè½½å‡è¡¡è½¯ä»¶æœ‰ Nginxã€Lvs ç­‰ç­‰ã€‚</li>
<li>Dubboã€SpringCloud ä¸­å‡ç»™æˆ‘ä»¬æä¾›äº†è´Ÿè½½å‡è¡¡ï¼ŒSpringCloud çš„è´Ÿè½½å‡è¡¡ç®—æ³•å¯ä»¥è‡ªå®šä¹‰ã€‚</li>
<li>è´Ÿè½½å‡è¡¡ç®€å•åˆ†ç±»ï¼š<ul>
<li>é›†ä¸­å¼LB<ul>
<li>å³åœ¨æœåŠ¡çš„æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„LBè®¾æ–½ï¼Œå¦‚**Nginx(åå‘ä»£ç†æœåŠ¡å™¨)**ï¼Œç”±è¯¥è®¾æ–½è´Ÿè´£æŠŠè®¿é—®è¯·æ±‚é€šè¿‡æŸç§ç­–ç•¥è½¬å‘è‡³æœåŠ¡çš„æä¾›æ–¹ï¼</li>
</ul>
</li>
<li>è¿›ç¨‹å¼ LB<ul>
<li>å°†LBé€»è¾‘é›†æˆåˆ°æ¶ˆè´¹æ–¹ï¼Œæ¶ˆè´¹æ–¹ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·çŸ¥æœ‰å“ªäº›åœ°å€å¯ç”¨ï¼Œç„¶åè‡ªå·±å†ä»è¿™äº›åœ°å€ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„æœåŠ¡å™¨ã€‚</li>
<li>Ribbon å°±å±äºè¿›ç¨‹å†…LBï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»åº“ï¼Œé›†æˆäºæ¶ˆè´¹æ–¹è¿›ç¨‹ï¼Œæ¶ˆè´¹æ–¹é€šè¿‡å®ƒæ¥è·å–åˆ°æœåŠ¡æä¾›æ–¹çš„åœ°å€ï¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-2-é›†æˆRibbon"><a href="#6-2-é›†æˆRibbon" class="headerlink" title="6.2 é›†æˆRibbon"></a>6.2 é›†æˆRibbon</h2><p><strong>springcloud-consumer-dept-80</strong>å‘pom.xmlä¸­æ·»åŠ Ribbonå’ŒEurekaä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Ribbon--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Eureka: Ribbonéœ€è¦ä»EurekaæœåŠ¡ä¸­å¿ƒè·å–è¦æ‹¿ä»€ä¹ˆ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>åœ¨application.ymlæ–‡ä»¶ä¸­é…ç½®Eureka</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Eurekaé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span> <span class="comment"># ä¸å‘ Eurekaæ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">service-url:</span> <span class="comment"># ä»ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒä¸­éšæœºå–ä¸€ä¸ªå»è®¿é—®</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸»å¯åŠ¨ç±»åŠ ä¸Š@EnableEurekaClientæ³¨è§£ï¼Œå¼€å¯Eureka</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Ribbon å’Œ Eureka æ•´åˆä»¥åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨å…³å¿ƒIPåœ°å€å’Œç«¯å£å·</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">//å¼€å¯Eureka å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptConsumer_80</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DeptConsumer_80.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è‡ªå®šä¹‰Springé…ç½®ç±»ï¼šConfigBean.java é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTemplate</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigBean</span> &#123;<span class="comment">//@Configuration -- spring  applicationContext.xml</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@LoadBalanced</span> <span class="comment">//é…ç½®è´Ÿè½½å‡è¡¡å®ç°RestTemplate</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">getRestTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¿®æ”¹controllerï¼šDteptConsumerController.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Ribbon:æˆ‘ä»¬è¿™é‡Œçš„åœ°å€ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡æœåŠ¡åæ¥è®¿é—®</span></span><br><span class="line"><span class="comment">//private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REST_URL_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"><a href="#6-3-ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡" class="headerlink" title="6.3 ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"></a>6.3 ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡</h2><p>æµç¨‹å›¾ï¼š<img src="https://img-blog.csdnimg.cn/20200521131315626.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>1**.æ–°å»ºä¸¤ä¸ªæœåŠ¡æä¾›è€…Moudle**ï¼šspringcloud-provider-dept-8003ã€springcloud-provider-dept-8002</p>
<p>2.å‚ç…§springcloud-provider-dept-8001 ä¾æ¬¡ä¸ºå¦å¤–ä¸¤ä¸ªMoudleæ·»åŠ pom.xmlä¾èµ– ã€resoureceä¸‹çš„mybatiså’Œapplication.ymlé…ç½®ï¼ŒJavaä»£ç </p>
<p>3.å¯åŠ¨æ‰€æœ‰æœåŠ¡æµ‹è¯•(æ ¹æ®è‡ªèº«ç”µè„‘é…ç½®å†³å®šå¯åŠ¨æœåŠ¡çš„ä¸ªæ•°)ï¼Œè®¿é—®<a href="http://eureka7001.com:7002/%E6%9F%A5%E7%9C%8B%E7%BB%93%E6%9E%9C">http://eureka7001.com:7002/æŸ¥çœ‹ç»“æœ</a></p>
<p><img src="https://img-blog.csdnimg.cn/20200521131332466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>æµ‹è¯•è®¿é—®<a href="http://localhost/consumer/dept/list">http://localhost/consumer/dept/list</a> è¿™æ—¶å€™éšæœºè®¿é—®çš„æ˜¯æœåŠ¡æä¾›è€…ï¼ˆ8003ï¼‰</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20201121115756709.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>å†æ¬¡è®¿é—®<a href="http://localhost/consumer/dept/list%E8%BF%99%E6%97%B6%E5%80%99%E9%9A%8F%E6%9C%BA%E7%9A%84%E6%98%AF%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%858001">http://localhost/consumer/dept/listè¿™æ—¶å€™éšæœºçš„æ˜¯æœåŠ¡æä¾›è€…8001</a></strong></p>
<p><img src="https://img-blog.csdnimg.cn/20201121115944955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä»¥ä¸Šè¿™ç§<strong>æ¯æ¬¡è®¿é—®<a href="http://localhost/consumer/dept/list%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9F%90%E4%B8%AA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E5%8F%AB%E5%81%9A%E8%BD%AE%E8%AF%A2">http://localhost/consumer/dept/listéšæœºè®¿é—®é›†ç¾¤ä¸­æŸä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿™ç§æƒ…å†µå«åšè½®è¯¢</a></strong>ï¼Œè½®è¯¢ç®—æ³•åœ¨SpringCloudä¸­å¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<p><strong>å¦‚ä½•åˆ‡æ¢æˆ–è€…è‡ªå®šä¹‰è§„åˆ™å‘¢ï¼Ÿ</strong></p>
<p>åœ¨springcloud-provider-dept-80æ¨¡å—ä¸‹çš„ConfigBeanä¸­è¿›è¡Œé…ç½®ï¼Œåˆ‡æ¢ä½¿ç”¨ä¸åŒçš„è§„åˆ™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigBean</span> &#123;<span class="comment">//@Configuration -- spring  applicationContext.xml</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * IRule:</span></span><br><span class="line"><span class="comment">     * RoundRobinRule è½®è¯¢ç­–ç•¥</span></span><br><span class="line"><span class="comment">     * RandomRule éšæœºç­–ç•¥</span></span><br><span class="line"><span class="comment">     * AvailabilityFilteringRule ï¼š ä¼šå…ˆè¿‡æ»¤æ‰ï¼Œè·³é—¸ï¼Œè®¿é—®æ•…éšœçš„æœåŠ¡~ï¼Œå¯¹å‰©ä¸‹çš„è¿›è¡Œè½®è¯¢~</span></span><br><span class="line"><span class="comment">     * RetryRule ï¼š ä¼šå…ˆæŒ‰ç…§è½®è¯¢è·å–æœåŠ¡~ï¼Œå¦‚æœæœåŠ¡è·å–å¤±è´¥ï¼Œåˆ™ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´å†…è¿›è¡Œï¼Œé‡è¯•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IRule <span class="title function_">myRule</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RandomRule</span>();<span class="comment">//ä½¿ç”¨éšæœºç­–ç•¥</span></span><br><span class="line">        <span class="comment">//return new RoundRobinRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span></span><br><span class="line">        <span class="comment">//return new AvailabilityFilteringRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span></span><br><span class="line">        <span class="comment">//return new RetryRule();//ä½¿ç”¨è½®è¯¢ç­–ç•¥</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è§„åˆ™ï¼Œåœ¨myRuleåŒ…ä¸‹è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±»MyRule.javaï¼Œæ³¨æ„ï¼š<strong>è¯¥åŒ…ä¸è¦å’Œä¸»å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŒçº§ï¼Œè¦è·Ÿå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŒçº§</strong>ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200521131456478.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>MyRule.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/05/19/11:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è‡ªå®šä¹‰è§„åˆ™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRule</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IRule <span class="title function_">myRule</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyRandomRule</span>();<span class="comment">//é»˜è®¤æ˜¯è½®è¯¢RandomRule,ç°åœ¨è‡ªå®šä¹‰ä¸ºè‡ªå·±çš„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸»å¯åŠ¨ç±»å¼€å¯è´Ÿè½½å‡è¡¡å¹¶æŒ‡å®šè‡ªå®šä¹‰çš„MyRuleé…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Ribbon å’Œ Eureka æ•´åˆä»¥åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨å…³å¿ƒIPåœ°å€å’Œç«¯å£å·</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="comment">//åœ¨å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™å°±èƒ½åŠ è½½è‡ªå®šä¹‰çš„Ribbonç±»(è‡ªå®šä¹‰çš„è§„åˆ™ä¼šè¦†ç›–åŸæœ‰é»˜è®¤çš„è§„åˆ™)</span></span><br><span class="line"><span class="meta">@RibbonClient(name = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;,configuration = MyRule.class)</span><span class="comment">//å¼€å¯è´Ÿè½½å‡è¡¡,å¹¶æŒ‡å®šè‡ªå®šä¹‰çš„è§„åˆ™</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptConsumer_80</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DeptConsumer_80.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰çš„è§„åˆ™(è¿™é‡Œæˆ‘ä»¬å‚è€ƒRibbonä¸­é»˜è®¤çš„è§„åˆ™ä»£ç è‡ªå·±ç¨å¾®æ”¹åŠ¨)ï¼šMyRandomRule.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRandomRule</span> <span class="keyword">extends</span> <span class="title class_">AbstractLoadBalancerRule</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯ä¸ªæœåŠ¡è®¿é—®5æ¬¡åˆ™æ¢ä¸‹ä¸€ä¸ªæœåŠ¡(æ€»å…±3ä¸ªæœåŠ¡)</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * total=0,é»˜è®¤=0,å¦‚æœ=5,æŒ‡å‘ä¸‹ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * index=0,é»˜è®¤=0,å¦‚æœtotal=5,index+1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//è¢«è°ƒç”¨çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">currentIndex</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//å½“å‰æ˜¯è°åœ¨æä¾›æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@edu.umd.cs.findbugs.annotations.SuppressWarnings(value = &quot;RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Server <span class="title function_">choose</span><span class="params">(ILoadBalancer lb, Object key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (lb == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Server</span> <span class="variable">server</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (server == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (Thread.interrupted()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;Server&gt; upList = lb.getReachableServers();<span class="comment">//è·å¾—å½“å‰æ´»ç€çš„æœåŠ¡</span></span><br><span class="line">            List&lt;Server&gt; allList = lb.getAllServers();<span class="comment">//è·å–æ‰€æœ‰çš„æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">serverCount</span> <span class="operator">=</span> allList.size();</span><br><span class="line">            <span class="keyword">if</span> (serverCount == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                 * No servers. End regardless of pass, because subsequent passes</span></span><br><span class="line"><span class="comment">                 * only get more restrictive.</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//int index = chooseRandomInt(serverCount);//ç”ŸæˆåŒºé—´éšæœºæ•°</span></span><br><span class="line">            <span class="comment">//server = upList.get(index);//ä»æˆ–æ´»ç€çš„æœåŠ¡ä¸­,éšæœºè·å–ä¸€ä¸ª</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//=====================è‡ªå®šä¹‰ä»£ç =========================</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (total &lt; <span class="number">5</span>) &#123;</span><br><span class="line">                server = upList.get(currentIndex);</span><br><span class="line">                total++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                total = <span class="number">0</span>;</span><br><span class="line">                currentIndex++;</span><br><span class="line">                <span class="keyword">if</span> (currentIndex &gt; upList.size()) &#123;</span><br><span class="line">                    currentIndex = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                server = upList.get(currentIndex);<span class="comment">//ä»æ´»ç€çš„æœåŠ¡ä¸­,è·å–æŒ‡å®šçš„æœåŠ¡æ¥è¿›è¡Œæ“ä½œ</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//======================================================</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (server == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                 * The only time this should happen is if the server list were</span></span><br><span class="line"><span class="comment">                 * somehow trimmed. This is a transient condition. Retry after</span></span><br><span class="line"><span class="comment">                 * yielding.</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                Thread.yield();</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (server.isAlive()) &#123;</span><br><span class="line">                <span class="keyword">return</span> (server);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// Shouldn&#x27;t actually happen.. but must be transient or a bug.</span></span><br><span class="line">            server = <span class="literal">null</span>;</span><br><span class="line">            Thread.yield();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> server;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">chooseRandomInt</span><span class="params">(<span class="type">int</span> serverCount)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ThreadLocalRandom.current().nextInt(serverCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Server <span class="title function_">choose</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> choose(getLoadBalancer(), key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initWithNiwsConfig</span><span class="params">(IClientConfig clientConfig)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="7-Feignï¼šè´Ÿè½½å‡è¡¡-åŸºäºæœåŠ¡ç«¯"><a href="#7-Feignï¼šè´Ÿè½½å‡è¡¡-åŸºäºæœåŠ¡ç«¯" class="headerlink" title="7.Feignï¼šè´Ÿè½½å‡è¡¡(åŸºäºæœåŠ¡ç«¯)"></a>7.Feignï¼šè´Ÿè½½å‡è¡¡(åŸºäºæœåŠ¡ç«¯)</h1><h2 id="7-1-Feignç®€ä»‹"><a href="#7-1-Feignç®€ä»‹" class="headerlink" title="7.1 Feignç®€ä»‹"></a>7.1 Feignç®€ä»‹</h2><p>Feignæ˜¯å£°æ˜å¼Web Serviceå®¢æˆ·ç«¯ï¼Œå®ƒè®©å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å˜å¾—æ›´ç®€å•ï¼Œç±»ä¼¼controllerè°ƒç”¨serviceã€‚SpringCloudé›†æˆäº†Ribbonå’ŒEurekaï¼Œå¯ä»¥ä½¿ç”¨Feiginæä¾›è´Ÿè½½å‡è¡¡çš„httpå®¢æˆ·ç«¯</p>
<p><strong>åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç„¶åæ·»åŠ æ³¨è§£å³å¯~</strong></p>
<p>Feignï¼Œä¸»è¦æ˜¯ç¤¾åŒºç‰ˆï¼Œå¤§å®¶éƒ½ä¹ æƒ¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚è¿™ä¸ªæ˜¯å¾ˆå¤šå¼€å‘äººå‘˜çš„è§„èŒƒã€‚è°ƒç”¨å¾®æœåŠ¡è®¿é—®ä¸¤ç§æ–¹æ³•</p>
<ol>
<li>å¾®æœåŠ¡åå­— ã€ribbonã€‘</li>
<li>æ¥å£å’Œæ³¨è§£ ã€feignã€‘</li>
</ol>
<p><strong>Feignèƒ½å¹²ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>Feignæ—¨åœ¨ä½¿ç¼–å†™Java Httpå®¢æˆ·ç«¯å˜å¾—æ›´å®¹æ˜“</li>
<li>å‰é¢åœ¨ä½¿ç”¨Ribbon + RestTemplateæ—¶ï¼Œåˆ©ç”¨RestTemplateå¯¹Httpè¯·æ±‚çš„å°è£…å¤„ç†ï¼Œå½¢æˆäº†ä¸€å¥—æ¨¡æ¿åŒ–çš„è°ƒç”¨æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºå¯¹æœåŠ¡ä¾èµ–çš„è°ƒç”¨å¯èƒ½ä¸æ­¢ä¸€å¤„ï¼Œå¾€å¾€ä¸€ä¸ªæ¥å£ä¼šè¢«å¤šå¤„è°ƒç”¨ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šé’ˆå¯¹æ¯ä¸ªå¾®æœåŠ¡è‡ªè¡Œå°è£…ä¸€ä¸ªå®¢æˆ·ç«¯ç±»æ¥åŒ…è£…è¿™äº›ä¾èµ–æœåŠ¡çš„è°ƒç”¨ã€‚æ‰€ä»¥ï¼ŒFeignåœ¨æ­¤åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥çš„å°è£…ï¼Œç”±ä»–æ¥å¸®åŠ©æˆ‘ä»¬å®šä¹‰å’Œå®ç°ä¾èµ–æœåŠ¡æ¥å£çš„å®šä¹‰ï¼Œåœ¨Feignçš„å®ç°ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å®ƒ (ç±»ä¼¼ä»¥å‰Daoæ¥å£ä¸Šæ ‡æ³¨Mapperæ³¨è§£ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¥å£ä¸Šé¢æ ‡æ³¨ä¸€ä¸ªFeignæ³¨è§£)ï¼Œå³å¯å®Œæˆå¯¹æœåŠ¡æä¾›æ–¹çš„æ¥å£ç»‘å®šï¼Œç®€åŒ–äº†ä½¿ç”¨Spring Cloud Ribbon æ—¶ï¼Œè‡ªåŠ¨å°è£…æœåŠ¡è°ƒç”¨å®¢æˆ·ç«¯çš„å¼€å‘é‡ã€‚</li>
</ul>
<p><strong>Feigné»˜è®¤é›†æˆäº†Ribbon</strong></p>
<ul>
<li>åˆ©ç”¨Ribbonç»´æŠ¤äº†MicroServiceCloud-Deptçš„æœåŠ¡åˆ—è¡¨ä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡è½®è¯¢å®ç°äº†å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡ï¼Œè€Œä¸Ribbonä¸åŒçš„æ˜¯ï¼Œé€šè¿‡Feignåªéœ€è¦å®šä¹‰æœåŠ¡ç»‘å®šæ¥å£ä¸”ä»¥å£°æ˜å¼çš„æ–¹æ³•ï¼Œä¼˜é›…è€Œç®€å•çš„å®ç°äº†æœåŠ¡è°ƒç”¨ã€‚</li>
</ul>
<h2 id="7-2-Feignçš„ä½¿ç”¨æ­¥éª¤"><a href="#7-2-Feignçš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="7.2 Feignçš„ä½¿ç”¨æ­¥éª¤"></a>7.2 Feignçš„ä½¿ç”¨æ­¥éª¤</h2><ol>
<li><p>åˆ›å»ºspringcloud-consumer-dept-feignæ¨¡å—</p>
<p><img src="https://img-blog.csdnimg.cn/20201121123410804.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æ‹·è´springcloud-consumer-dept-80æ¨¡å—ä¸‹çš„pom.xmlï¼Œresourceï¼Œä»¥åŠjavaä»£ç åˆ°springcloud-consumer-feignæ¨¡å—ï¼Œå¹¶æ·»åŠ feignä¾èµ–ã€‚</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Feignçš„ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡Ribbon<strong>å®ç°ï¼šâ€”åŸæ¥çš„controllerï¼š</strong>DeptConsumerController.java**</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptConsumerController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç†è§£ï¼šæ¶ˆè´¹è€…ï¼Œä¸åº”è¯¥æœ‰serviceå±‚~</span></span><br><span class="line"><span class="comment">     * RestTemplate .... ä¾›æˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±å¯ä»¥äº†ï¼ æ³¨å†Œåˆ°Springä¸­</span></span><br><span class="line"><span class="comment">     * (åœ°å€ï¼šurl, å®ä½“ï¼šMap ,Class&lt;T&gt; responseType)</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * æä¾›å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹httpæœåŠ¡çš„æ–¹æ³•ï¼Œç®€å•çš„RestfulæœåŠ¡æ¨¡æ¿~</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœåŠ¡æä¾›æ–¹åœ°å€å‰ç¼€</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * Ribbon:æˆ‘ä»¬è¿™é‡Œçš„åœ°å€ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡æœåŠ¡åæ¥è®¿é—®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    private static final String REST_URL_PREFIX = &quot;http://localhost:8001&quot;;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">REST_URL_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;http://SPRINGCLOUD-PROVIDER-DEPT&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æ·»åŠ éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dept</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="comment">// postForObject(æœåŠ¡æä¾›æ–¹åœ°å€(æ¥å£),å‚æ•°å®ä½“,è¿”å›ç±»å‹.class)</span></span><br><span class="line">        <span class="keyword">return</span> restTemplate.postForObject(REST_URL_PREFIX + <span class="string">&quot;/dept/add&quot;</span>, dept, Boolean.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        <span class="comment">// getForObject(æœåŠ¡æä¾›æ–¹åœ°å€(æ¥å£),è¿”å›ç±»å‹.class)</span></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="string">&quot;/dept/get/&quot;</span> + id, Dept.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(REST_URL_PREFIX + <span class="string">&quot;/dept/list&quot;</span>, List.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡<strong>Feign</strong>å®ç°ï¼šâ€”æ”¹é€ åcontrollerï¼š<strong>DeptConsumerController.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptConsumerController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptClientService deptClientService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æ·»åŠ éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dept</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> deptClientService.addDept(dept);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> deptClientService.queryById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¶ˆè´¹æ–¹æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/consumer/dept/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> deptClientService.queryAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Feignå’ŒRibbonäºŒè€…å¯¹æ¯”ï¼Œå‰è€…æ˜¾ç°å‡ºé¢å‘æ¥å£ç¼–ç¨‹ç‰¹ç‚¹ï¼Œä»£ç çœ‹èµ·æ¥æ›´æ¸…çˆ½ï¼Œè€Œä¸”Feignè°ƒç”¨æ–¹å¼æ›´ç¬¦åˆæˆ‘ä»¬ä¹‹å‰åœ¨åšSSMæˆ–è€…SprngBooté¡¹ç›®æ—¶ï¼ŒControllerå±‚è°ƒç”¨Serviceå±‚çš„ç¼–ç¨‹ä¹ æƒ¯ï¼</p>
<p><strong>ä¸»é…ç½®ç±»</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="comment">// feignå®¢æˆ·ç«¯æ³¨è§£,å¹¶æŒ‡å®šè¦æ‰«æçš„åŒ…ä»¥åŠé…ç½®æ¥å£DeptClientService</span></span><br><span class="line"><span class="meta">@EnableFeignClients(basePackages = &#123;&quot;com.haust.springcloud&quot;&#125;)</span></span><br><span class="line"><span class="comment">// åˆ‡è®°ä¸è¦åŠ è¿™ä¸ªæ³¨è§£ï¼Œä¸ç„¶ä¼šå‡ºç°404è®¿é—®ä¸åˆ°</span></span><br><span class="line"><span class="comment">//@ComponentScan(&quot;com.haust.springcloud&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FeignDeptConsumer_80</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(FeignDeptConsumer_80.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong>æ”¹é€ springcloud-apiæ¨¡å—</strong></p>
<p>pom.xmlæ·»åŠ feignä¾èµ–</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Feignçš„ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–°å»ºserviceåŒ…ï¼Œå¹¶æ–°å»ºDeptClientService.javaæ¥å£ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @FeignClient:å¾®æœåŠ¡å®¢æˆ·ç«¯æ³¨è§£,value:æŒ‡å®šå¾®æœåŠ¡çš„åå­—,è¿™æ ·å°±å¯ä»¥ä½¿Feignå®¢æˆ·ç«¯ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„å¾®æœåŠ¡</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptClientService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dept/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dept/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">addDept</span><span class="params">(Dept dept)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-3-Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#7-3-Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="7.3 Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ"></a>7.3 Feignå’ŒRibbonå¦‚ä½•é€‰æ‹©ï¼Ÿ</h2><p><strong>æ ¹æ®ä¸ªäººä¹ æƒ¯è€Œå®šï¼Œå¦‚æœå–œæ¬¢RESTé£æ ¼ä½¿ç”¨Ribbonï¼›å¦‚æœå–œæ¬¢ç¤¾åŒºç‰ˆçš„é¢å‘æ¥å£é£æ ¼ä½¿ç”¨Feign.</strong></p>
<p>Feign æœ¬è´¨ä¸Šä¹Ÿæ˜¯å®ç°äº† Ribbonï¼Œåªä¸è¿‡åè€…æ˜¯åœ¨è°ƒç”¨æ–¹å¼ä¸Šï¼Œä¸ºäº†æ»¡è¶³ä¸€äº›å¼€å‘è€…ä¹ æƒ¯çš„æ¥å£è°ƒç”¨ä¹ æƒ¯ï¼</p>
<p>ä¸‹é¢æˆ‘ä»¬å…³é—­springcloud-consumer-dept-80 è¿™ä¸ªæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œæ¢ç”¨springcloud-consumer-dept-feign(ç«¯å£è¿˜æ˜¯80) æ¥ä»£æ›¿ï¼š(ä¾ç„¶å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå°±æ˜¯è°ƒç”¨æ–¹å¼ç›¸æ¯”äºRibbonå˜åŒ–äº†)</p>
<h1 id="8-Hystrixï¼šæœåŠ¡ç†”æ–­"><a href="#8-Hystrixï¼šæœåŠ¡ç†”æ–­" class="headerlink" title="8. Hystrixï¼šæœåŠ¡ç†”æ–­"></a>8. Hystrixï¼šæœåŠ¡ç†”æ–­</h1><blockquote>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é—®é¢˜</p>
</blockquote>
<p>å¤æ‚åˆ†å¸ƒå¼ä½“ç³»ç»“æ„ä¸­çš„åº”ç”¨ç¨‹åºæœ‰æ•°åä¸ªä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªä¾èµ–å…³ç³»åœ¨æŸäº›æ—¶å€™å°†ä¸å¯é¿å…å¤±è´¥ï¼</p>
<h2 id="8-1-æœåŠ¡é›ªå´©"><a href="#8-1-æœåŠ¡é›ªå´©" class="headerlink" title="8.1 æœåŠ¡é›ªå´©"></a>8.1 æœåŠ¡é›ªå´©</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´è°ƒç”¨çš„æ—¶å€™ï¼Œå‡è®¾å¾®æœåŠ¡<span class="selector-tag">A</span>è°ƒç”¨å¾®æœåŠ¡<span class="selector-tag">B</span>å’Œå¾®æœåŠ¡Cï¼Œå¾®æœåŠ¡<span class="selector-tag">B</span>å’Œå¾®æœåŠ¡Cåˆè°ƒç”¨å…¶ä»–çš„å¾®æœåŠ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ï¼Œå¦‚æœæ‰‡å‡ºçš„é“¾è·¯ä¸ŠæŸä¸ªå¾®æœåŠ¡çš„è°ƒç”¨å“åº”æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…ä¸å¯ç”¨ï¼Œå¯¹å¾®æœåŠ¡<span class="selector-tag">A</span>çš„è°ƒç”¨å°±ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿèµ„æºï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œæ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€ã€‚</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20201121144830148.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p> å¯¹äºé«˜æµé‡çš„åº”ç”¨æ¥è¯´ï¼Œå•ä¸€çš„åç«¯ä¾èµ–å¯èƒ½ä¼šå¯¼è‡´æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰èµ„æºéƒ½åœ¨å‡ åç§’å†…é¥±å’Œã€‚æ¯”å¤±è´¥æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›åº”ç”¨ç¨‹åºè¿˜å¯èƒ½å¯¼è‡´æœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿå¢åŠ ï¼Œå¤‡ä»½é˜Ÿåˆ—ï¼Œçº¿ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºç´§å¼ ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå‘ç”Ÿæ›´å¤šçš„çº§è”æ•…éšœï¼Œè¿™äº›éƒ½è¡¨ç¤ºéœ€è¦å¯¹æ•…éšœå’Œå»¶è¿Ÿè¿›è¡Œéš”ç¦»å’Œç®¡ç†ï¼Œä»¥è¾¾åˆ°å•ä¸ªä¾èµ–å…³ç³»çš„å¤±è´¥è€Œä¸å½±å“æ•´ä¸ªåº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿè¿è¡Œ<br>æˆ‘ä»¬éœ€è¦ï¼Œ</p>
<p><strong>å¼ƒè½¦ä¿å¸…</strong>ï¼</p>
<h2 id="8-2-ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ"><a href="#8-2-ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ" class="headerlink" title="8.2 ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ"></a>8.2 ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Hystrixæ˜¯ä¸€ä¸ªåº”ç”¨äºå¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å»¶è¿Ÿå’Œå®¹é”™çš„å¼€æºåº“ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œè®¸å¤šä¾èµ–ä¸å¯é¿å…çš„ä¼šè°ƒç”¨å¤±è´¥ï¼Œæ¯”å¦‚è¶…æ—¶ï¼Œå¼‚å¸¸ç­‰ï¼Œ==Hystrix èƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä¸ªä½“ç³»æœåŠ¡å¤±è´¥ï¼Œé¿å…çº§è”æ•…éšœï¼Œä»¥æé«˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼¹æ€§==</span><br><span class="line">â€œæ–­è·¯å™¨â€æœ¬èº«æ˜¯ä¸€ç§å¼€å…³è£…ç½®ï¼Œå½“æŸä¸ªæœåŠ¡å•å…ƒå‘ç”Ÿæ•…éšœä¹‹åï¼Œé€šè¿‡æ–­è·¯å™¨çš„æ•…éšœç›‘æ§ (ç±»ä¼¼ç†”æ–­ä¿é™©ä¸) ï¼Œ<span class="strong">**å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªæœåŠ¡é¢„æœŸçš„ï¼Œå¯å¤„ç†çš„å¤‡é€‰å“åº” (FallBack) ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ³•æ— æ³•å¤„ç†çš„å¼‚å¸¸ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯äº†æœåŠ¡è°ƒç”¨æ–¹çš„çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´ï¼Œä¸å¿…è¦çš„å ç”¨ï¼Œä»è€Œé¿å…äº†æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è”“å»¶ï¼Œä¹ƒè‡³é›ªå´©ã€‚**</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/2020112114554744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p>
<h2 id="8-3-Hystrixèƒ½å¹²å˜›ï¼Ÿ"><a href="#8-3-Hystrixèƒ½å¹²å˜›ï¼Ÿ" class="headerlink" title="8.3 Hystrixèƒ½å¹²å˜›ï¼Ÿ"></a>8.3 Hystrixèƒ½å¹²å˜›ï¼Ÿ</h2><ul>
<li>æœåŠ¡é™çº§</li>
<li>æœåŠ¡ç†”æ–­</li>
<li>æœåŠ¡é™æµ</li>
<li>æ¥è¿‘å®æ—¶çš„ç›‘æ§</li>
<li>â€¦</li>
</ul>
<p>å½“ä¸€åˆ‡æ­£å¸¸æ—¶ï¼Œè¯·æ±‚æµå¯ä»¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRodWIuY29tL05ldGZsaXgvSHlzdHJpeC93aWtpL2ltYWdlcy9zb2EtMS02NDAucG5n?x-oss-process=image/format,png" alt="img"></p>
<p><strong>å½“è®¸å¤šåç«¯ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ½œåœ¨é˜»å¡æœåŠ¡æ—¶ï¼Œå®ƒå¯ä»¥é˜»æ­¢æ•´ä¸ªç”¨æˆ·è¯·æ±‚ï¼š</strong></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRodWIuY29tL05ldGZsaXgvSHlzdHJpeC93aWtpL2ltYWdlcy9zb2EtMi02NDAucG5n?x-oss-process=image/format,png" alt="img"></p>
<p> éšç€å¤§å®¹é‡é€šä¿¡é‡çš„å¢åŠ ï¼Œå•ä¸ªåç«¯ä¾èµ–é¡¹çš„æ½œåœ¨æ€§ä¼šå¯¼è‡´æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰èµ„æºåœ¨å‡ ç§’é’Ÿå†…é¥±å’Œã€‚</p>
<p> åº”ç”¨ç¨‹åºä¸­é€šè¿‡ç½‘ç»œæˆ–å®¢æˆ·ç«¯åº“å¯èƒ½å¯¼è‡´ç½‘ç»œè¯·æ±‚çš„æ¯ä¸ªç‚¹éƒ½æ˜¯æ½œåœ¨æ•…éšœçš„æ¥æºã€‚æ¯”å¤±è´¥æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›åº”ç”¨ç¨‹åºè¿˜ å¯èƒ½å¯¼è‡´æœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿå¢åŠ ï¼Œä»è€Œå¤‡ä»½é˜Ÿåˆ—ã€çº¿ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºï¼Œä»è€Œå¯¼è‡´æ›´å¤šè·¨ç³»ç»Ÿçš„çº§è”æ•…éšœã€‚</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRodWIuY29tL05ldGZsaXgvSHlzdHJpeC93aWtpL2ltYWdlcy9zb2EtMy02NDAucG5n?x-oss-process=image/format,png" alt="img"></p>
<p> å½“ä½¿ç”¨<strong>Hystrix</strong>åŒ…è£…æ¯ä¸ªåŸºç¡€ä¾èµ–é¡¹æ—¶ï¼Œä¸Šé¢çš„å›¾è¡¨ä¸­æ‰€ç¤ºçš„ä½“ç³»ç»“æ„ä¼šå‘ç”Ÿç±»ä¼¼äºä»¥ä¸‹å…³ç³»å›¾çš„å˜åŒ–ã€‚<strong>æ¯ä¸ªä¾èµ–é¡¹æ˜¯ç›¸äº’éš”ç¦»çš„</strong>ï¼Œé™åˆ¶åœ¨å»¶è¿Ÿå‘ç”Ÿæ—¶å®ƒå¯ä»¥å¡«å……çš„èµ„æºä¸­ï¼Œå¹¶åŒ…å«åœ¨å›é€€é€»è¾‘ä¸­ï¼Œè¯¥é€»è¾‘å†³å®šåœ¨ä¾èµ–é¡¹ä¸­å‘ç”Ÿä»»ä½•ç±»å‹çš„æ•…éšœæ—¶è¦åšå‡ºä»€ä¹ˆæ ·çš„å“åº”ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20200521131820586.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<h3 id="å®˜ç½‘èµ„æ–™ï¼šhttps-github-com-Netflix-Hystrix-wiki"><a href="#å®˜ç½‘èµ„æ–™ï¼šhttps-github-com-Netflix-Hystrix-wiki" class="headerlink" title="å®˜ç½‘èµ„æ–™ï¼šhttps://github.com/Netflix/Hystrix/wiki"></a><strong>å®˜ç½‘èµ„æ–™</strong>ï¼š<a href="https://github.com/Netflix/Hystrix/wiki">https://github.com/Netflix/Hystrix/wiki</a></h3></blockquote>
<h2 id="8-4-æœåŠ¡ç†”æ–­"><a href="#8-4-æœåŠ¡ç†”æ–­" class="headerlink" title="8.4 æœåŠ¡ç†”æ–­"></a>8.4 æœåŠ¡ç†”æ–­</h2><p>ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­?</p>
<p> <strong>ç†”æ–­æœºåˆ¶æ˜¯åº”å¯¹æœåŠ¡é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶</strong>ï¼Œå½“æ‰‡å‡ºé“¾è·¯çš„æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡Œæœ<strong>åŠ¡çš„é™çº§</strong>ï¼Œ<strong>è¿›è€Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨ï¼Œå¿«é€Ÿè¿”å›â€é”™è¯¯â€çš„å“åº”ä¿¡æ¯</strong>ã€‚å½“æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡å“åº”æ­£å¸¸åæ¢å¤è°ƒç”¨é“¾è·¯ï¼Œåœ¨SpringCloudæ¡†æ¶æœºåˆ¶é€šè¿‡Hystrixå®ç°ï¼ŒHystrixä¼šç›‘æ§å¾®æœåŠ¡è§è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥çš„è°ƒç”¨åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼Œç¼ºçœæ˜¯5<strong>ç§’å†…20æ¬¡</strong>è°ƒç”¨å¤±è´¥å°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶ï¼Œç†”æ–­æœºåˆ¶çš„æ³¨è§£æ˜¯@HystrixCommand</p>
<p><strong>æœåŠ¡ç†”æ–­è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š</strong></p>
<ul>
<li>å½“æ‰€ä¾èµ–çš„å¯¹è±¡ä¸ç¨³å®šæ—¶ï¼Œèƒ½å¤Ÿèµ·åˆ°å¿«é€Ÿå¤±è´¥çš„ç›®çš„ï¼›</li>
<li>å¿«é€Ÿå¤±è´¥åï¼Œèƒ½å¤Ÿæ ¹æ®ä¸€å®šçš„ç®—æ³•åŠ¨æ€è¯•æ¢æ‰€ä¾èµ–å¯¹è±¡æ˜¯å¦æ¢å¤ã€‚</li>
</ul>
<h3 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h3><p>æ–°å»ºspringcloud-provider-dept-hystrix-8001æ¨¡å—å¹¶æ‹·è´springcloud-provider-deptâ€“8001å†…çš„<strong>pom.xmlã€resource</strong>å’ŒJavaä»£ç è¿›è¡Œåˆå§‹åŒ–å¹¶è°ƒæ•´ã€‚</p>
<p>å¯¼å…¥hystrixä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥Hystrixä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>è°ƒæ•´ymlé…ç½®æ–‡ä»¶</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8001</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mybatisé…ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># springcloud-api æ¨¡å—ä¸‹çš„pojoåŒ…</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.haust.springcloud.pojo</span></span><br><span class="line">  <span class="comment"># æœ¬æ¨¡å—ä¸‹çš„mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ç±»è·¯å¾„</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis/mybatis-config.xml</span></span><br><span class="line">  <span class="comment"># æœ¬æ¨¡å—ä¸‹çš„mapperé…ç½®æ–‡ä»¶ç±»è·¯å¾„</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># springé…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="comment">#é¡¹ç›®å</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">springcloud-provider-dept</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment"># å¾·é²ä¼Šæ•°æ®æº</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db01?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Eurekaé…ç½®ï¼šé…ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="comment"># æ³¨å†Œä¸­å¿ƒåœ°å€7001-7003</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">springcloud-provider-dept-hystrix-8001</span> <span class="comment">#ä¿®æ”¹Eurekaä¸Šçš„é»˜è®¤æè¿°ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment">#æ”¹ä¸ºtrueåé»˜è®¤æ˜¾ç¤ºçš„æ˜¯ipåœ°å€è€Œä¸å†æ˜¯localhost</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#infoé…ç½®</span></span><br><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">app.name:</span> <span class="string">haust-springcloud</span> <span class="comment">#é¡¹ç›®çš„åç§°</span></span><br><span class="line">  <span class="attr">company.name:</span> <span class="string">com.haust</span> <span class="comment">#å…¬å¸çš„åç§°</span></span><br></pre></td></tr></table></figure>

<p><strong>prefer-ip-address: false</strong>:</p>
<p><img src="https://img-blog.csdnimg.cn/20200521131940911.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>prefer-ip-address: true</strong>ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/2020052113195798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>ä¿®æ”¹controller</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æä¾›RestfulæœåŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ ¹æ®idæŸ¥è¯¢å‡ºç°å¼‚å¸¸,åˆ™èµ°hystrixGetè¿™æ®µå¤‡é€‰ä»£ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod = &quot;hystrixGet&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span><span class="comment">//æ ¹æ®idæŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="type">Dept</span> <span class="variable">dept</span> <span class="operator">=</span> deptService.queryById(id);</span><br><span class="line">        <span class="keyword">if</span> (dept==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¿™ä¸ªid=&gt;&quot;</span>+id+<span class="string">&quot;,ä¸å­˜åœ¨è¯¥ç”¨æˆ·ï¼Œæˆ–ä¿¡æ¯æ— æ³•æ‰¾åˆ°~&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dept;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢å¤‡é€‰æ–¹æ¡ˆ(ç†”æ–­)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">hystrixGet</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Dept</span>().setDeptno(id)</span><br><span class="line">                .setDname(<span class="string">&quot;è¿™ä¸ªid=&gt;&quot;</span>+id+<span class="string">&quot;,æ²¡æœ‰å¯¹åº”çš„ä¿¡æ¯,null---@Hystrix~&quot;</span>)</span><br><span class="line">                .setDb_source(<span class="string">&quot;åœ¨MySQLä¸­æ²¡æœ‰è¿™ä¸ªæ•°æ®åº“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸ºä¸»å¯åŠ¨ç±»æ·»åŠ å¯¹ç†”æ–­çš„æ”¯æŒæ³¨è§£@EnableCircuitBreaker</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: å¯åŠ¨ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// å®¢æˆ·ç«¯çš„å¯åŠ¨ç±»ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span> <span class="comment">// æœåŠ¡å‘ç°~</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span> <span class="comment">// æ·»åŠ å¯¹ç†”æ–­çš„æ”¯æŒæ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixDeptProvider_8001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(HystrixDeptProvider_8001.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•</strong>ï¼š</p>
<p>ä½¿ç”¨ç†”æ–­åï¼Œå½“è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„idæ—¶ï¼Œå‰å°é¡µå±•ç¤ºæ•°æ®å¦‚ä¸‹:</p>
<p><img src="https://img-blog.csdnimg.cn/202011211516091.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è€Œä¸é€‚ç”¨ç†”æ–­çš„springcloud-provider-deptâ€“8001æ¨¡å—è®¿é—®ç›¸åŒåœ°å€ä¼šå‡ºç°ä¸‹é¢çŠ¶å†µ:</p>
<p><img src="https://img-blog.csdnimg.cn/20200521132119757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å› æ­¤ï¼Œ<strong>ä¸ºäº†é¿å…å› æŸä¸ªå¾®æœåŠ¡åå°å‡ºç°å¼‚å¸¸æˆ–é”™è¯¯è€Œå¯¼è‡´æ•´ä¸ªåº”ç”¨æˆ–ç½‘é¡µæŠ¥é”™ï¼Œä½¿ç”¨ç†”æ–­æ˜¯å¿…è¦çš„</strong></p>
<h2 id="8-5-æœåŠ¡é™çº§"><a href="#8-5-æœåŠ¡é™çº§" class="headerlink" title="8.5 æœåŠ¡é™çº§"></a>8.5 æœåŠ¡é™çº§</h2><h3 id="ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§?"></a>ä»€ä¹ˆæ˜¯æœåŠ¡é™çº§?</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡é™çº§æ˜¯æŒ‡ å½“æœåŠ¡å™¨å‹åŠ›å‰§å¢çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µåŠæµé‡ï¼Œå¯¹ä¸€äº›æœåŠ¡å’Œé¡µé¢æœ‰ç­–ç•¥çš„ä¸å¤„ç†ï¼Œæˆ–æ¢ç§ç®€å•çš„æ–¹å¼å¤„ç†ï¼Œä»è€Œé‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯æ ¸å¿ƒä¸šåŠ¡æ­£å¸¸è¿ä½œæˆ–é«˜æ•ˆè¿ä½œã€‚è¯´ç™½äº†ï¼Œå°±æ˜¯å°½å¯èƒ½çš„æŠŠç³»ç»Ÿèµ„æºè®©ç»™ä¼˜å…ˆçº§é«˜çš„æœåŠ¡ã€‚</span><br></pre></td></tr></table></figure>

<p>èµ„æºæœ‰é™ï¼Œè€Œè¯·æ±‚æ˜¯æ— é™çš„ã€‚å¦‚æœåœ¨å¹¶å‘é«˜å³°æœŸï¼Œä¸åšæœåŠ¡é™çº§å¤„ç†ï¼Œä¸€æ–¹é¢è‚¯å®šä¼šå½±å“æ•´ä½“æœåŠ¡çš„æ€§èƒ½ï¼Œä¸¥é‡çš„è¯å¯èƒ½ä¼šå¯¼è‡´å®•æœºæŸäº›é‡è¦çš„æœåŠ¡ä¸å¯ç”¨ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬åœ¨é«˜å³°æœŸï¼Œä¸ºäº†ä¿è¯æ ¸å¿ƒåŠŸèƒ½æœåŠ¡çš„å¯ç”¨æ€§ï¼Œéƒ½è¦å¯¹æŸäº›æœåŠ¡é™çº§å¤„ç†ã€‚æ¯”å¦‚å½“åŒ11æ´»åŠ¨æ—¶ï¼ŒæŠŠäº¤æ˜“æ— å…³çš„æœåŠ¡ç»Ÿç»Ÿé™çº§ï¼Œå¦‚æŸ¥çœ‹èš‚èšæ£®æ—ï¼ŒæŸ¥çœ‹å†å²è®¢å•ç­‰ç­‰ã€‚</p>
<p>æœåŠ¡é™çº§ä¸»è¦ç”¨äºä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿå½“æ•´ä¸ªå¾®æœåŠ¡æ¶æ„æ•´ä½“çš„è´Ÿè½½è¶…å‡ºäº†é¢„è®¾çš„ä¸Šé™é˜ˆå€¼æˆ–å³å°†åˆ°æ¥çš„æµé‡é¢„è®¡å°†ä¼šè¶…è¿‡é¢„è®¾çš„é˜ˆå€¼æ—¶ï¼Œä¸ºäº†ä¿è¯é‡è¦æˆ–åŸºæœ¬çš„æœåŠ¡èƒ½æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥å°†ä¸€äº› ä¸é‡è¦ æˆ– ä¸ç´§æ€¥ çš„æœåŠ¡æˆ–ä»»åŠ¡è¿›è¡ŒæœåŠ¡çš„ å»¶è¿Ÿä½¿ç”¨ æˆ– æš‚åœä½¿ç”¨ã€‚</p>
<p>é™çº§çš„æ–¹å¼å¯ä»¥æ ¹æ®ä¸šåŠ¡æ¥ï¼Œå¯ä»¥å»¶è¿ŸæœåŠ¡ï¼Œæ¯”å¦‚å»¶è¿Ÿç»™ç”¨æˆ·å¢åŠ ç§¯åˆ†ï¼Œåªæ˜¯æ”¾åˆ°ä¸€ä¸ªç¼“å­˜ä¸­ï¼Œç­‰æœåŠ¡å¹³ç¨³ä¹‹åå†æ‰§è¡Œ ï¼›æˆ–è€…åœ¨ç²’åº¦èŒƒå›´å†…å…³é—­æœåŠ¡ï¼Œæ¯”å¦‚å…³é—­ç›¸å…³æ–‡ç« çš„æ¨èã€‚<br><img src="https://img-blog.csdnimg.cn/20200521132141732.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç”±ä¸Šå›¾å¯å¾—ï¼Œ<strong>å½“æŸä¸€æ—¶é—´å†…æœåŠ¡Açš„è®¿é—®é‡æš´å¢ï¼Œè€ŒBå’ŒCçš„è®¿é—®é‡è¾ƒå°‘ï¼Œä¸ºäº†ç¼“è§£AæœåŠ¡çš„å‹åŠ›ï¼Œè¿™æ—¶å€™éœ€è¦Bå’ŒCæš‚æ—¶å…³é—­ä¸€äº›æœåŠ¡åŠŸèƒ½ï¼Œå»æ‰¿æ‹…Açš„éƒ¨åˆ†æœåŠ¡ï¼Œä»è€Œä¸ºAåˆ†æ‹…å‹åŠ›ï¼Œå«åšæœåŠ¡é™çº§</strong>ã€‚</p>
<h5 id="æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜"><a href="#æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜" class="headerlink" title="æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜"></a>æœåŠ¡é™çº§éœ€è¦è€ƒè™‘çš„é—®é¢˜</h5><ul>
<li>1ï¼‰é‚£äº›æœåŠ¡æ˜¯æ ¸å¿ƒæœåŠ¡ï¼Œå“ªäº›æœåŠ¡æ˜¯éæ ¸å¿ƒæœåŠ¡</li>
<li>2ï¼‰é‚£äº›æœåŠ¡å¯ä»¥æ”¯æŒé™çº§ï¼Œé‚£äº›æœåŠ¡ä¸èƒ½æ”¯æŒé™çº§ï¼Œé™çº§ç­–ç•¥æ˜¯ä»€ä¹ˆ</li>
<li>3ï¼‰é™¤æœåŠ¡é™çº§ä¹‹å¤–æ˜¯å¦å­˜åœ¨æ›´å¤æ‚çš„ä¸šåŠ¡æ”¾é€šåœºæ™¯ï¼Œç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p><strong>è‡ªåŠ¨é™çº§åˆ†ç±»</strong></p>
<p>1ï¼‰è¶…æ—¶é™çº§ï¼šä¸»è¦é…ç½®å¥½è¶…æ—¶æ—¶é—´å’Œè¶…æ—¶é‡è¯•æ¬¡æ•°å’Œæœºåˆ¶ï¼Œå¹¶ä½¿ç”¨å¼‚æ­¥æœºåˆ¶æ¢æµ‹å›å¤æƒ…å†µ<br>2ï¼‰å¤±è´¥æ¬¡æ•°é™çº§ï¼šä¸»è¦æ˜¯ä¸€äº›ä¸ç¨³å®šçš„apiï¼Œå½“å¤±è´¥è°ƒç”¨æ¬¡æ•°è¾¾åˆ°ä¸€å®šé˜€å€¼è‡ªåŠ¨é™çº§ï¼ŒåŒæ ·è¦ä½¿ç”¨å¼‚æ­¥æœºåˆ¶æ¢æµ‹å›å¤æƒ…å†µ<br>3ï¼‰æ•…éšœé™çº§ï¼šæ¯”å¦‚è¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡æŒ‚æ‰äº†ï¼ˆç½‘ç»œæ•…éšœã€DNSæ•…éšœã€httpæœåŠ¡è¿”å›é”™è¯¯çš„çŠ¶æ€ç ã€rpcæœåŠ¡æŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œåˆ™å¯ä»¥ç›´æ¥é™çº§ã€‚é™çº§åçš„å¤„ç†æ–¹æ¡ˆæœ‰ï¼šé»˜è®¤å€¼ï¼ˆæ¯”å¦‚åº“å­˜æœåŠ¡æŒ‚äº†ï¼Œè¿”å›é»˜è®¤ç°è´§ï¼‰ã€å…œåº•æ•°æ®ï¼ˆæ¯”å¦‚å¹¿å‘ŠæŒ‚äº†ï¼Œè¿”å›æå‰å‡†å¤‡å¥½çš„ä¸€äº›é™æ€é¡µé¢ï¼‰ã€ç¼“å­˜ï¼ˆä¹‹å‰æš‚å­˜çš„ä¸€äº›ç¼“å­˜æ•°æ®ï¼‰<br>4ï¼‰é™æµé™çº§ï¼šç§’æ€æˆ–è€…æŠ¢è´­ä¸€äº›é™è´­å•†å“æ—¶ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå› ä¸ºè®¿é—®é‡å¤ªå¤§è€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œæ­¤æ—¶ä¼šä½¿ç”¨é™æµæ¥è¿›è¡Œé™åˆ¶è®¿é—®é‡ï¼Œå½“è¾¾åˆ°é™æµé˜€å€¼ï¼Œåç»­è¯·æ±‚ä¼šè¢«é™çº§ï¼›é™çº§åçš„å¤„ç†æ–¹æ¡ˆå¯ä»¥æ˜¯ï¼šæ’é˜Ÿé¡µé¢ï¼ˆå°†ç”¨æˆ·å¯¼æµåˆ°æ’é˜Ÿé¡µé¢ç­‰ä¸€ä¼šé‡è¯•ï¼‰ã€æ— è´§ï¼ˆç›´æ¥å‘ŠçŸ¥ç”¨æˆ·æ²¡è´§äº†ï¼‰ã€é”™è¯¯é¡µï¼ˆå¦‚æ´»åŠ¨å¤ªç«çˆ†äº†ï¼Œç¨åé‡è¯•ï¼‰ã€‚</p>
<h5 id="å…¥é—¨æ¡ˆä¾‹-1"><a href="#å…¥é—¨æ¡ˆä¾‹-1" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h5><p>åœ¨springcloud-apiæ¨¡å—ä¸‹çš„serviceåŒ…ä¸­æ–°å»ºé™çº§é…ç½®ç±»DeptClientServiceFallBackFactory.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: HystrixæœåŠ¡é™çº§ ~</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptClientServiceFallBackFactory</span> <span class="keyword">implements</span> <span class="title class_">FallbackFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> DeptClientService <span class="title function_">create</span><span class="params">(Throwable cause)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DeptClientService</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Dept <span class="title function_">queryById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Dept</span>()</span><br><span class="line">                        .setDeptno(id)</span><br><span class="line">                        .setDname(<span class="string">&quot;id=&gt;&quot;</span> + id + <span class="string">&quot;æ²¡æœ‰å¯¹åº”çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯æä¾›äº†é™çº§çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæœåŠ¡ç°åœ¨å·²ç»è¢«å…³é—­&quot;</span>)</span><br><span class="line">                        .setDb_source(<span class="string">&quot;æ²¡æœ‰æ•°æ®~&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">queryAll</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Boolean <span class="title function_">addDept</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åœ¨DeptClientServiceä¸­æŒ‡å®šé™çº§é…ç½®ç±»DeptClientServiceFallBackFactory</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//æ³¨å†Œåˆ°springå®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment">//@FeignClient:å¾®æœåŠ¡å®¢æˆ·ç«¯æ³¨è§£,value:æŒ‡å®šå¾®æœåŠ¡çš„åå­—,è¿™æ ·å°±å¯ä»¥ä½¿Feignå®¢æˆ·ç«¯ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„å¾®æœåŠ¡</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;SPRINGCLOUD-PROVIDER-DEPT&quot;,fallbackFactory = DeptClientServiceFallBackFactory.class)</span><span class="comment">//fallbackFactoryæŒ‡å®šé™çº§é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptClientService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dept/get/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Dept <span class="title function_">queryById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dept/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/dept/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">addDept</span><span class="params">(Dept dept)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨<strong>springcloud-consumer-dept-feign</strong>æ¨¡å—ä¸­å¼€å¯é™çº§ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Eurekaé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span> <span class="comment"># ä¸å‘ Eurekaæ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">service-url:</span> <span class="comment"># ä»ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒä¸­éšæœºå–ä¸€ä¸ªå»è®¿é—®</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯é™çº§feign.hystrix</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">hystrix:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="8-6-æœåŠ¡ç†”æ–­å’Œé™çº§çš„åŒºåˆ«"><a href="#8-6-æœåŠ¡ç†”æ–­å’Œé™çº§çš„åŒºåˆ«" class="headerlink" title="8.6 æœåŠ¡ç†”æ–­å’Œé™çº§çš„åŒºåˆ«"></a>8.6 æœåŠ¡ç†”æ–­å’Œé™çº§çš„åŒºåˆ«</h2><ul>
<li><strong>æœåŠ¡ç†”æ–­â€”&gt;æœåŠ¡ç«¯ï¼š</strong>æŸä¸ªæœåŠ¡è¶…æ—¶æˆ–å¼‚å¸¸ï¼Œå¼•èµ·ç†”æ–­~ï¼Œç±»ä¼¼äºä¿é™©ä¸(è‡ªæˆ‘ç†”æ–­)</li>
<li><strong>æœåŠ¡é™çº§â€”&gt;å®¢æˆ·ç«¯</strong>ï¼šä»æ•´ä½“ç½‘ç«™è¯·æ±‚è´Ÿè½½è€ƒè™‘ï¼Œå½“æŸä¸ªæœåŠ¡ç†”æ–­æˆ–è€…å…³é—­ä¹‹åï¼ŒæœåŠ¡å°†ä¸å†è¢«è°ƒç”¨ï¼Œæ­¤æ—¶åœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥å‡†å¤‡ä¸€ä¸ª FallBackFactory ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„å€¼(ç¼ºçœå€¼)ã€‚ä¼šå¯¼è‡´æ•´ä½“çš„æœåŠ¡ä¸‹é™ï¼Œä½†æ˜¯å¥½æ­¹èƒ½ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰å¼ºã€‚</li>
<li>è§¦å‘åŸå› ä¸å¤ªä¸€æ ·ï¼ŒæœåŠ¡ç†”æ–­ä¸€èˆ¬æ˜¯æŸä¸ªæœåŠ¡ï¼ˆä¸‹æ¸¸æœåŠ¡ï¼‰æ•…éšœå¼•èµ·ï¼Œè€ŒæœåŠ¡é™çº§ä¸€èˆ¬æ˜¯ä»æ•´ä½“è´Ÿè·è€ƒè™‘ï¼›ç®¡ç†ç›®æ ‡çš„å±‚æ¬¡ä¸å¤ªä¸€æ ·ï¼Œç†”æ–­å…¶å®æ˜¯ä¸€ä¸ªæ¡†æ¶çº§çš„å¤„ç†ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ï¼ˆæ— å±‚çº§ä¹‹åˆ†ï¼‰ï¼Œè€Œé™çº§ä¸€èˆ¬éœ€è¦å¯¹ä¸šåŠ¡æœ‰å±‚çº§ä¹‹åˆ†ï¼ˆæ¯”å¦‚é™çº§ä¸€èˆ¬æ˜¯ä»æœ€å¤–å›´æœåŠ¡å¼€å§‹ï¼‰</li>
<li>å®ç°æ–¹å¼ä¸å¤ªä¸€æ ·ï¼ŒæœåŠ¡é™çº§å…·æœ‰ä»£ç ä¾µå…¥æ€§(ç”±æ§åˆ¶å™¨å®Œæˆ/æˆ–è‡ªåŠ¨é™çº§)ï¼Œç†”æ–­ä¸€èˆ¬ç§°ä¸º<strong>è‡ªæˆ‘ç†”æ–­ã€‚</strong></li>
</ul>
<p><strong>ç†”æ–­ï¼Œé™çº§ï¼Œé™æµ</strong>ï¼š</p>
<p>é™æµï¼šé™åˆ¶å¹¶å‘çš„è¯·æ±‚è®¿é—®é‡ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™æ‹’ç»ï¼›</p>
<p>é™çº§ï¼šæœåŠ¡åˆ†ä¼˜å…ˆçº§ï¼Œç‰ºç‰²éæ ¸å¿ƒæœåŠ¡ï¼ˆä¸å¯ç”¨ï¼‰ï¼Œä¿è¯æ ¸å¿ƒæœåŠ¡ç¨³å®šï¼›ä»æ•´ä½“è´Ÿè·è€ƒè™‘ï¼›</p>
<p>ç†”æ–­ï¼šä¾èµ–çš„ä¸‹æ¸¸æœåŠ¡æ•…éšœè§¦å‘ç†”æ–­ï¼Œé¿å…å¼•å‘æœ¬ç³»ç»Ÿå´©æºƒï¼›ç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œå’Œæ¢å¤</p>
<h2 id="8-7-Dashboard-æµç›‘æ§"><a href="#8-7-Dashboard-æµç›‘æ§" class="headerlink" title="8.7 Dashboard æµç›‘æ§"></a>8.7 Dashboard æµç›‘æ§</h2><p>æ–°å»ºspringcloud-consumer-hystrix-dashboardæ¨¡å—</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Hystrixä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--dashboardä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Ribbon--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Eureka--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å®ä½“ç±»+web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.haust<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--çƒ­éƒ¨ç½²--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸»å¯åŠ¨ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// å¼€å¯Dashboard</span></span><br><span class="line"><span class="meta">@EnableHystrixDashboard</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptConsumerDashboard_9001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DeptConsumerDashboard_9001.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç»™springcloud-provider-dept-hystrix-8001æ¨¡å—ä¸‹çš„ä¸»å¯åŠ¨ç±»æ·»åŠ å¦‚ä¸‹ä»£ç ,æ·»åŠ ç›‘æ§</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">//EnableEurekaClient å®¢æˆ·ç«¯çš„å¯åŠ¨ç±»ï¼Œåœ¨æœåŠ¡å¯åŠ¨åè‡ªåŠ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptProvider_8001</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DeptProvider_8001.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ä¸€ä¸ª Servlet</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ServletRegistrationBean <span class="title function_">hystrixMetricsStreamServlet</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ServletRegistrationBean</span> <span class="variable">registrationBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletRegistrationBean</span>(<span class="keyword">new</span> <span class="title class_">HystrixMetricsStreamServlet</span>());</span><br><span class="line">        <span class="comment">//è®¿é—®è¯¥é¡µé¢å°±æ˜¯ç›‘æ§é¡µé¢</span></span><br><span class="line">        registrationBean.addUrlMappings(<span class="string">&quot;/actuator/hystrix.stream&quot;</span>);</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">return</span> registrationBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¿é—®ï¼š<a href="http://localhost:9001/hystrix">http://localhost:9001/hystrix</a></p>
<p><img src="https://img-blog.csdnimg.cn/20201121161121357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>è¿›å…¥ç›‘æ§é¡µé¢ï¼š</strong><img src="https://img-blog.csdnimg.cn/20201121162143650.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><strong>æ•ˆæœå¦‚ä¸‹å›¾</strong>ï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201121162412970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="9-Zullè·¯ç”±ç½‘å…³"><a href="#9-Zullè·¯ç”±ç½‘å…³" class="headerlink" title="9. Zullè·¯ç”±ç½‘å…³"></a>9. Zullè·¯ç”±ç½‘å…³</h1><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><blockquote>
<p>ä»€ä¹ˆæ˜¯zuul?</p>
</blockquote>
<p>ZullåŒ…å«äº†å¯¹è¯·æ±‚çš„<strong>è·¯ç”±</strong>(ç”¨æ¥è·³è½¬çš„)å’Œ<strong>è¿‡æ»¤</strong>ä¸¤ä¸ªæœ€ä¸»è¦åŠŸèƒ½ï¼š<br>å…¶ä¸­è·¯ç”±åŠŸèƒ½è´Ÿè´£<strong>å°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°å…·ä½“çš„å¾®æœåŠ¡å®ä¾‹ä¸Šï¼Œæ˜¯å®ç°å¤–éƒ¨è®¿é—®ç»Ÿä¸€å…¥å£çš„åŸºç¡€</strong>ï¼Œè€Œè¿‡æ»¤å™¨åŠŸèƒ½åˆ™è´Ÿè´£å¯¹è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹è¿›è¡Œå¹²é¢„ï¼Œæ˜¯å®ç°è¯·æ±‚æ ¡éªŒï¼ŒæœåŠ¡èšåˆç­‰åŠŸèƒ½çš„åŸºç¡€ã€‚**Zuulå’ŒEurekaè¿›è¡Œæ•´åˆï¼Œå°†Zuulè‡ªèº«æ³¨å†Œä¸ºEurekaæœåŠ¡æ²»ç†ä¸‹çš„åº”ç”¨ï¼ŒåŒæ—¶ä»Eurekaä¸­è·å¾—å…¶ä»–æœåŠ¡çš„æ¶ˆæ¯ï¼Œä¹Ÿå³ä»¥åçš„è®¿é—®å¾®æœåŠ¡éƒ½æ˜¯é€šè¿‡Zuulè·³è½¬åè·å¾—ã€‚</p>
<p>æ³¨æ„ï¼šZuul æœåŠ¡æœ€ç»ˆè¿˜æ˜¯ä¼šæ³¨å†Œè¿› Eureka<br>æä¾›ï¼šä»£ç† + è·¯ç”± + è¿‡æ»¤ä¸‰å¤§åŠŸèƒ½ï¼</p>
<blockquote>
<p>Zuul èƒ½å¹²å˜›ï¼Ÿ</p>
</blockquote>
<ul>
<li>è·¯ç”±</li>
<li>è¿‡æ»¤</li>
</ul>
<h4 id="å…¥é—¨æ¡ˆä¾‹-2"><a href="#å…¥é—¨æ¡ˆä¾‹-2" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h4><p><strong>æ–°å»ºspringcloud-zuulæ¨¡å—ï¼Œå¹¶å¯¼å…¥ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¯¼å…¥zuulä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Hystrixä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--dashboardä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-hystrix-dashboar<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Ribbon--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Eureka--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å®ä½“ç±»+web--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.haust<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springcloud-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--çƒ­éƒ¨ç½²--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>application.yml</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9527</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">springcloud-zuul</span> <span class="comment">#å¾®æœåŠ¡åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># eureka æ³¨å†Œä¸­å¿ƒé…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://eureka7001.com:7001/eureka/,http://eureka7002.com:7002/eureka/,http://eureka7003.com:7003/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span> <span class="comment">#å®ä¾‹çš„id</span></span><br><span class="line">    <span class="attr">instance-id:</span> <span class="string">zuul9527.com</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment"># æ˜¾ç¤ºip</span></span><br><span class="line"></span><br><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">app.name:</span> <span class="string">haust.springcloud</span> <span class="comment"># é¡¹ç›®åç§°</span></span><br><span class="line">  <span class="attr">company.name:</span> <span class="string">é˜¿é‡Œå·´å·´</span> <span class="comment"># å…¬å¸åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># zull è·¯ç”±ç½‘å…³é…ç½®</span></span><br><span class="line"><span class="attr">zuul:</span></span><br><span class="line">  <span class="comment"># è·¯ç”±ç›¸å…³é…ç½®</span></span><br><span class="line">  <span class="comment"># åŸæ¥è®¿é—®è·¯ç”± eg:http://www.cspstudy.com:9527/springcloud-provider-dept/dept/get/1</span></span><br><span class="line">  <span class="comment"># zullè·¯ç”±é…ç½®åè®¿é—®è·¯ç”± eg:http://www.cspstudy.com:9527/haust/mydept/dept/get/1</span></span><br><span class="line">  <span class="attr">routes:</span></span><br><span class="line">    <span class="attr">mydept.serviceId:</span> <span class="string">springcloud-provider-dept</span> <span class="comment"># eurekaæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æä¾›æ–¹è·¯ç”±åç§°</span></span><br><span class="line">    <span class="attr">mydept.path:</span> <span class="string">/mydept/**</span> <span class="comment"># å°†eurekaæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡æä¾›æ–¹è·¯ç”±åç§° æ”¹ä¸ºè‡ªå®šä¹‰è·¯ç”±åç§°</span></span><br><span class="line">  <span class="comment"># ä¸èƒ½å†ä½¿ç”¨è¿™ä¸ªè·¯å¾„è®¿é—®äº†ï¼Œ*ï¼š å¿½ç•¥,éšè—å…¨éƒ¨çš„æœåŠ¡åç§°~</span></span><br><span class="line">  <span class="attr">ignored-services:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">  <span class="comment"># è®¾ç½®å…¬å…±çš„å‰ç¼€</span></span><br><span class="line">  <span class="attr">prefix:</span> <span class="string">/haust</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸»å¯åŠ¨ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Zullè·¯ç”±ç½‘å…³ä¸»å¯åŠ¨ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableZuulProxy</span> <span class="comment">// å¼€å¯Zuul</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZuulApplication_9527</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(ZuulApplication_9527.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•</strong>ï¼š****</p>
<p><img src="https://img-blog.csdnimg.cn/20201122104605641.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20201122104936500.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä¸Šå›¾æ˜¯æ²¡æœ‰ç»è¿‡Zullè·¯ç”±ç½‘å…³é…ç½®æ—¶ï¼ŒæœåŠ¡æ¥å£è®¿é—®çš„è·¯ç”±ï¼Œå¯ä»¥çœ‹å‡ºç›´æ¥ç”¨å¾®æœåŠ¡(æœåŠ¡æä¾›æ–¹)åç§°å»è®¿é—®ï¼Œè¿™æ ·ä¸å®‰å…¨ï¼Œä¸èƒ½å°†å¾®æœåŠ¡åç§°æš´éœ²ï¼</p>
<p>æ‰€ä»¥ç»è¿‡Zullè·¯ç”±ç½‘å…³é…ç½®åï¼Œè®¿é—®çš„è·¯ç”±ä¸ºï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201122111703260.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå¾®æœåŠ¡åç§°è¢«æ›¿æ¢å¹¶éšè—ï¼Œæ¢æˆäº†æˆ‘ä»¬è‡ªå®šä¹‰çš„å¾®æœåŠ¡åç§°mydeptï¼ŒåŒæ—¶åŠ ä¸Šäº†å‰ç¼€haustï¼Œè¿™æ ·å°±åšåˆ°äº†å¯¹è·¯ç”±fanè®¿é—®çš„åŠ å¯†å¤„ç†ï¼</p>
<p>è¯¦æƒ…å‚è€ƒspringcloudä¸­æ–‡ç¤¾åŒºzuulç»„ä»¶ : <a href="https://www.springcloud.cc/spring-cloud-greenwich.html#_router_and_filter_zuul">https://www.springcloud.cc/spring-cloud-greenwich.html#_router_and_filter_zuul</a></p>
<h1 id="10-Spring-Cloud-Config-åˆ†å¸ƒå¼é…ç½®"><a href="#10-Spring-Cloud-Config-åˆ†å¸ƒå¼é…ç½®" class="headerlink" title="10. Spring Cloud Config åˆ†å¸ƒå¼é…ç½®"></a>10. Spring Cloud Config åˆ†å¸ƒå¼é…ç½®</h1><p><strong>Dalston.RELEASE</strong></p>
<p>*<em>Spring Cloud Configä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨é…ç½®æä¾›æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ”¯æŒ</em>***ã€‚ä½¿ç”¨Config Serverï¼Œæ‚¨å¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ç®¡ç†åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å±æ€§ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šçš„æ¦‚å¿µæ˜ å°„ä¸Spring Environmentå’ŒPropertySourceæŠ½è±¡ç›¸åŒï¼Œå› æ­¤å®ƒä»¬ä¸Springåº”ç”¨ç¨‹åºéå¸¸å¥‘åˆï¼Œä½†å¯ä»¥ä¸ä»»ä½•ä»¥ä»»ä½•è¯­è¨€è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸€èµ·ä½¿ç”¨ã€‚éšç€åº”ç”¨ç¨‹åºé€šè¿‡ä»å¼€å‘äººå‘˜åˆ°æµ‹è¯•å’Œç”Ÿäº§çš„éƒ¨ç½²æµç¨‹ï¼Œæ‚¨å¯ä»¥ç®¡ç†è¿™äº›ç¯å¢ƒä¹‹é—´çš„é…ç½®ï¼Œå¹¶ç¡®å®šåº”ç”¨ç¨‹åºå…·æœ‰è¿ç§»æ—¶éœ€è¦è¿è¡Œçš„ä¸€åˆ‡ã€‚æœåŠ¡å™¨å­˜å‚¨åç«¯çš„é»˜è®¤å®ç°ä½¿ç”¨gitï¼Œå› æ­¤å®ƒè½»æ¾æ”¯æŒæ ‡ç­¾ç‰ˆæœ¬çš„é…ç½®ç¯å¢ƒï¼Œä»¥åŠå¯ä»¥è®¿é—®ç”¨äºç®¡ç†å†…å®¹çš„å„ç§å·¥å…·ã€‚å¾ˆå®¹æ˜“æ·»åŠ æ›¿ä»£å®ç°ï¼Œå¹¶ä½¿ç”¨Springé…ç½®å°†å…¶æ’å…¥ã€‚</p>
<h2 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h2><p><strong>åˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„â€“é…ç½®æ–‡ä»¶é—®é¢˜</strong><br>å¾®æœåŠ¡æ„å‘³ç€è¦å°†å•ä½“åº”ç”¨ä¸­çš„ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸ªå­æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡çš„ç²’åº¦ç›¸å¯¹è¾ƒå°ï¼Œå› æ­¤ç³»ç»Ÿä¸­ä¼šå‡ºç°å¤§é‡çš„æœåŠ¡ï¼Œç”±äºæ¯ä¸ªæœåŠ¡éƒ½éœ€è¦å¿…è¦çš„é…ç½®ä¿¡æ¯æ‰èƒ½è¿è¡Œï¼Œæ‰€ä»¥ä¸€å¥—é›†ä¸­å¼çš„ï¼ŒåŠ¨æ€çš„é…ç½®ç®¡ç†è®¾æ–½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚spring cloudæä¾›äº†configServeræ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªå¾®æœåŠ¡è‡ªå·±å¸¦ç€ä¸€ä¸ªapplication.ymlï¼Œé‚£ä¸Šç™¾ä¸ªçš„é…ç½®æ–‡ä»¶ä¿®æ”¹èµ·æ¥ï¼Œä»¤äººå¤´ç–¼ï¼</p>
<p><strong>ä»€ä¹ˆæ˜¯SpringCloud configåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Ÿ</strong></p>
<p><img src="https://img-blog.csdnimg.cn/202005211322530.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU5MTk4MA==,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p>
<p>spring cloud config ä¸ºå¾®æœåŠ¡æ¶æ„ä¸­çš„å¾®æœåŠ¡æä¾›é›†ä¸­åŒ–çš„å¤–éƒ¨æ”¯æŒï¼Œé…ç½®æœåŠ¡å™¨ä¸ºå„ä¸ªä¸åŒå¾®æœåŠ¡åº”ç”¨çš„æ‰€æœ‰ç¯èŠ‚æä¾›äº†ä¸€ä¸ª<strong>ä¸­å¿ƒåŒ–çš„å¤–éƒ¨é…ç½®ã€‚</strong></p>
<p>spring cloud config åˆ†ä¸º<strong>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯</strong>ä¸¤éƒ¨åˆ†ã€‚</p>
<p>æœåŠ¡ç«¯ä¹Ÿç§°ä¸º <strong>åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨ï¼Œç”¨æ¥è¿æ¥é…ç½®æœåŠ¡å™¨å¹¶ä¸ºå®¢æˆ·ç«¯æä¾›è·å–é…ç½®ä¿¡æ¯ï¼ŒåŠ å¯†ï¼Œè§£å¯†ä¿¡æ¯ç­‰è®¿é—®æ¥å£ã€‚</p>
<p>å®¢æˆ·ç«¯åˆ™æ˜¯<strong>é€šè¿‡æŒ‡å®šçš„é…ç½®ä¸­å¿ƒæ¥ç®¡ç†åº”ç”¨èµ„æºï¼Œä»¥åŠä¸ä¸šåŠ¡ç›¸å…³çš„é…ç½®å†…å®¹ï¼Œå¹¶åœ¨å¯åŠ¨çš„æ—¶å€™ä»é…ç½®ä¸­å¿ƒè·å–å’ŒåŠ è½½é…ç½®ä¿¡æ¯</strong>ã€‚é…ç½®æœåŠ¡å™¨é»˜è®¤<strong>é‡‡ç”¨git</strong>æ¥å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œè¿™æ ·å°±æœ‰åŠ©äºå¯¹ç¯å¢ƒé…ç½®è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚å¹¶ä¸”å¯ç”¨é€šè¿‡gitå®¢æˆ·ç«¯å·¥å…·æ¥æ–¹ä¾¿çš„ç®¡ç†å’Œè®¿é—®é…ç½®å†…å®¹ã€‚</p>
<p><strong>spring cloud config åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒèƒ½å¹²å˜›ï¼Ÿ</strong></p>
<ul>
<li>é›†ä¸­å¼ç®¡ç†é…ç½®æ–‡ä»¶</li>
<li>ä¸åŒç¯å¢ƒï¼Œä¸åŒé…ç½®ï¼ŒåŠ¨æ€åŒ–çš„é…ç½®æ›´æ–°ï¼Œåˆ†ç¯å¢ƒéƒ¨ç½²ï¼Œæ¯”å¦‚ /dev /test /prod /beta /release</li>
<li>è¿è¡ŒæœŸé—´åŠ¨æ€è°ƒæ•´é…ç½®ï¼Œä¸å†éœ€è¦åœ¨æ¯ä¸ªæœåŠ¡éƒ¨ç½²çš„æœºå™¨ä¸Šç¼–å†™é…ç½®æ–‡ä»¶ï¼ŒæœåŠ¡ä¼šå‘é…ç½®ä¸­å¿ƒç»Ÿä¸€æ‹‰å–é…ç½®è‡ªå·±çš„ä¿¡æ¯</li>
<li>å½“é…ç½®å‘ç”Ÿå˜åŠ¨æ—¶ï¼ŒæœåŠ¡ä¸éœ€è¦é‡å¯ï¼Œå³å¯æ„ŸçŸ¥åˆ°é…ç½®çš„å˜åŒ–ï¼Œå¹¶åº”ç”¨æ–°çš„é…ç½®</li>
<li>å°†é…ç½®ä¿¡æ¯ä»¥RESTæ¥å£çš„å½¢å¼æš´éœ²</li>
</ul>
<p><strong>spring cloud config åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒä¸GitHubæ•´åˆ</strong></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ç”±äºspring cloud <span class="built_in">config</span> é»˜è®¤ä½¿ç”¨gitæ¥å­˜å‚¨é…ç½®æ–‡ä»¶ (ä¹Ÿæœ‰å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚è‡ªæŒSVN å’Œæœ¬åœ°æ–‡ä»¶)ï¼Œä½†æ˜¯æœ€æ¨èçš„è¿˜æ˜¯git ï¼Œè€Œä¸”ä½¿ç”¨çš„æ˜¯ http / https è®¿é—®çš„å½¢å¼ã€‚å…¥é—¨æ¡ˆä¾‹</span><br></pre></td></tr></table></figure>

<h2 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a><strong>æœåŠ¡ç«¯</strong></h2><p>æ–°å»ºspringcloud-config-server-3344æ¨¡å—å¯¼å…¥pom.xmlä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--config--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--eureka--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>resourceä¸‹åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶ï¼ŒSpring Cloud ConfigæœåŠ¡å™¨ä»gitå­˜å‚¨åº“ï¼ˆå¿…é¡»æä¾›ï¼‰ä¸ºè¿œç¨‹å®¢æˆ·ç«¯æä¾›é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">3344</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">springcloud-config-server</span></span><br><span class="line">  <span class="comment"># è¿æ¥ç äº‘è¿œç¨‹ä»“åº“</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">git:</span></span><br><span class="line">          <span class="comment"># æ³¨æ„æ˜¯httpsçš„è€Œä¸æ˜¯ssh</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://gitee.com/cao_shi_peng/springcloud-config.git</span> </span><br><span class="line">            <span class="comment"># é€šè¿‡ config-serverå¯ä»¥è¿æ¥åˆ°gitï¼Œè®¿é—®å…¶ä¸­çš„èµ„æºä»¥åŠé…ç½®~</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸åŠ è¿™ä¸ªé…ç½®ä¼šæŠ¥Cannot execute request on any known server è¿™ä¸ªé”™ï¼šè¿æ¥EurekaæœåŠ¡ç«¯åœ°å€ä¸å¯¹</span></span><br><span class="line"><span class="comment"># æˆ–è€…ç›´æ¥æ³¨é‡Šæ‰eurekaä¾èµ– è¿™é‡Œæš‚æ—¶ç”¨ä¸åˆ°eureka</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>ä¸»å¯åŠ¨ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableConfigServer</span> <span class="comment">// å¼€å¯spring cloud config serveræœåŠ¡</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Config_server_3344</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Config_server_3344.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootå­¦ä¹ </title>
    <url>/2022/05/18/SpringBoot%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="SpringBootâ€“ä»ç†è§£è‡ªåŠ¨è£…é…åŸç†åˆ°ä¸Šæ‰‹é¡¹ç›®"><a href="#SpringBootâ€“ä»ç†è§£è‡ªåŠ¨è£…é…åŸç†åˆ°ä¸Šæ‰‹é¡¹ç›®" class="headerlink" title="SpringBootâ€“ä»ç†è§£è‡ªåŠ¨è£…é…åŸç†åˆ°ä¸Šæ‰‹é¡¹ç›®"></a>SpringBootâ€“ä»ç†è§£è‡ªåŠ¨è£…é…åŸç†åˆ°ä¸Šæ‰‹é¡¹ç›®</h1><h2 id="1ã€SpringBootç®€ä»‹"><a href="#1ã€SpringBootç®€ä»‹" class="headerlink" title="1ã€SpringBootç®€ä»‹"></a>1ã€SpringBootç®€ä»‹</h2><blockquote>
<p>å›é¡¾ä»€ä¹ˆæ˜¯Spring</p>
</blockquote>
<ul>
<li>Springæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œ2003 å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Java å¼€å‘æ¡†æ¶ï¼Œä½œè€…ï¼šRod Johnson ã€‚</li>
<li><strong>Springæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼Œç®€åŒ–å¼€å‘ã€‚</strong></li>
</ul>
<blockquote>
<p>Sringæ˜¯å¦‚ä½•ç®€åŒ–Javaå¼€å‘çš„</p>
</blockquote>
<p>ä¸ºäº†é™ä½Javaå¼€å‘çš„å¤æ‚æ€§ï¼ŒSpringé‡‡ç”¨äº†ä»¥ä¸‹4ç§å…³é”®ç­–ç•¥ï¼š</p>
<p>1ã€åŸºäºPOJOçš„è½»é‡çº§å’Œæœ€å°ä¾µå…¥æ€§ç¼–ç¨‹ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯beanï¼›</p>
<p>2ã€é€šè¿‡IOCï¼Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œé¢å‘æ¥å£å®ç°æ¾è€¦åˆï¼›</p>
<p>3ã€åŸºäºåˆ‡é¢ï¼ˆAOPï¼‰å’Œæƒ¯ä¾‹è¿›è¡Œå£°æ˜å¼ç¼–ç¨‹ï¼›</p>
<p>4ã€é€šè¿‡åˆ‡é¢å’Œæ¨¡ç‰ˆå‡å°‘æ ·å¼ä»£ç ï¼ŒRedisTemplateï¼ŒxxxTemplateï¼›</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯SpringBoot</p>
</blockquote>
<p>SpringBootï¼Œå°±æ˜¯ä¸€ä¸ªjavawebçš„å¼€å‘æ¡†æ¶ï¼Œå’ŒSpringMVCç±»ä¼¼ï¼Œå¯¹æ¯”å…¶ä»–javawebæ¡†æ¶çš„å¥½å¤„ï¼Œå®˜æ–¹è¯´æ˜¯ç®€åŒ–å¼€å‘ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œ you can â€œjust runâ€ï¼Œèƒ½è¿…é€Ÿçš„å¼€å‘webåº”ç”¨ï¼Œå‡ è¡Œä»£ç å¼€å‘ä¸€ä¸ªhttpæ¥å£ã€‚</p>
<p>æ‰€æœ‰çš„æŠ€æœ¯æ¡†æ¶çš„å‘å±•ä¼¼ä¹éƒ½éµå¾ªäº†ä¸€æ¡ä¸»çº¿è§„å¾‹ï¼šä»ä¸€ä¸ªå¤æ‚åº”ç”¨åœºæ™¯ è¡ç”Ÿ ä¸€ç§è§„èŒƒæ¡†æ¶ï¼Œäººä»¬åªéœ€è¦è¿›è¡Œå„ç§é…ç½®è€Œä¸éœ€è¦è‡ªå·±å»å®ç°å®ƒï¼Œè¿™æ—¶å€™å¼ºå¤§çš„é…ç½®åŠŸèƒ½æˆäº†ä¼˜ç‚¹ï¼›å‘å±•åˆ°ä¸€å®šç¨‹åº¦ä¹‹åï¼Œäººä»¬æ ¹æ®å®é™…ç”Ÿäº§åº”ç”¨æƒ…å†µï¼Œé€‰å–å…¶ä¸­å®ç”¨åŠŸèƒ½å’Œè®¾è®¡ç²¾åï¼Œé‡æ„å‡ºä¸€äº›è½»é‡çº§çš„æ¡†æ¶ï¼›ä¹‹åä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œå«Œå¼ƒåŸå…ˆçš„å„ç±»é…ç½®è¿‡äºéº»çƒ¦ï¼Œäºæ˜¯å¼€å§‹æå€¡â€œçº¦å®šå¤§äºé…ç½®â€ï¼Œè¿›è€Œè¡ç”Ÿå‡ºä¸€äº›ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ˜¯çš„è¿™å°±æ˜¯<code>Javaä¼ä¸šçº§åº”ç”¨-&gt;J2EE-&gt;spring-&gt;springboot</code>çš„è¿‡ç¨‹</p>
<p>éšç€ Spring ä¸æ–­çš„å‘å±•ï¼Œæ¶‰åŠçš„é¢†åŸŸè¶Šæ¥è¶Šå¤šï¼Œé¡¹ç›®æ•´åˆå¼€å‘éœ€è¦é…åˆå„ç§å„æ ·çš„æ–‡ä»¶ï¼Œæ…¢æ…¢å˜å¾—ä¸é‚£ä¹ˆæ˜“ç”¨ç®€å•ï¼Œè¿èƒŒäº†æœ€åˆçš„ç†å¿µï¼Œç”šè‡³äººç§°é…ç½®åœ°ç‹±ã€‚Spring Boot æ­£æ˜¯åœ¨è¿™æ ·çš„ä¸€ä¸ªèƒŒæ™¯ä¸‹è¢«æŠ½è±¡å‡ºæ¥çš„å¼€å‘æ¡†æ¶ï¼Œç›®çš„ä¸ºäº†è®©å¤§å®¶æ›´å®¹æ˜“çš„ä½¿ç”¨ Spring ã€æ›´å®¹æ˜“çš„é›†æˆå„ç§å¸¸ç”¨çš„ä¸­é—´ä»¶ã€å¼€æºè½¯ä»¶ï¼›</p>
<p>Spring Boot åŸºäº Spring å¼€å‘ï¼ŒSpirng Boot æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä»¥åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚Spring Boot ä»¥<strong>çº¦å®šå¤§äºé…ç½®çš„æ ¸å¿ƒæ€æƒ³</strong>ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° Spring Boot åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ˆä¾‹å¦‚ Redisã€MongoDBã€Jpaã€RabbitMQã€Quartz ç­‰ç­‰ï¼‰ï¼ŒSpring Boot åº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥é›¶é…ç½®çš„å¼€ç®±å³ç”¨ã€‚</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯SpringBootå…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒmavenæ•´åˆäº†æ‰€æœ‰çš„jaråŒ…ï¼Œspring bootæ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ ã€‚</p>
<p>Spring Boot å‡ºç”Ÿåé—¨ï¼Œä»ä¸€å¼€å§‹å°±ç«™åœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„èµ·ç‚¹ï¼Œåˆç»è¿‡è¿™å‡ å¹´çš„å‘å±•ï¼Œç”Ÿæ€è¶³å¤Ÿå®Œå–„ï¼ŒSpring Boot å·²ç»å½“ä¹‹æ— æ„§æˆä¸º Java é¢†åŸŸæœ€çƒ­é—¨çš„æŠ€æœ¯ã€‚</p>
<p><strong>Spring Bootçš„ä¸»è¦ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨</li>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½®</li>
<li>å†…åµŒå¼å®¹å™¨ç®€åŒ–Webé¡¹ç›®</li>
<li>æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚</li>
</ul>
<blockquote>
<p>å¾®æœåŠ¡æ¶æ„</p>
</blockquote>
<p>å¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œä»–è¦æ±‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªåº”ç”¨å¿…é¡»å»ºæˆä¸€ç³»åˆ—å°æœåŠ¡ç»„åˆï¼Œå¯ä»¥é€šè¿‡httpæ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</p>
<p>æ‰€è°“å¾®æœåŠ¡åŠ è´­ï¼Œå°±æ˜¯æ‰“ç ´ä¹‹å‰all in oneçš„æ¶æ„æ–¹å¼ï¼ŒæŠŠæ¯ä¸ªåŠŸèƒ½å…ƒç´ ç‹¬ç«‹å‡ºæ¥ï¼ŒæŠŠç‹¬ç«‹å‡ºæ¥çš„åŠŸèƒ½å…ƒç´ çš„åŠ¨æ€ç»„åˆï¼Œéœ€è¦çš„åŠŸèƒ½å…ƒç´ æ‰å»æ‹¿æ¥ç»„åˆï¼Œéœ€è¦å¤šä¸€äº›å¯ä»¥æ•´åˆå¤šä¸ªåŠŸèƒ½å…ƒç´ ï¼Œæ‰€ä»¥å¾®æœåŠ¡æ¶æ„æ˜¯å¯¹åŠŸèƒ½å…ƒç´ è¿›è¡Œèµ‹å€¼ï¼Œè€Œæ²¡æœ‰å¯¹æ•´ä¸ªåº”ç”¨è¿›è¡Œå¤åˆ¶ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>èŠ‚çœäº†è°ƒç”¨èµ„æº</li>
<li>æ¯ä¸ªåŠŸèƒ½å…ƒç´ çš„æœåŠ¡éƒ½æ˜¯ä¸€ä¸ªå¯æ›¿æ¢çš„ï¼Œå¯ç‹¬ç«‹å‡çº§çš„è½¯ä»¶ä»£ç </li>
<li>ç¨‹åºæ ¸å¿ƒï¼šé«˜å†…èšï¼ˆåœ¨åˆ’åˆ†æ¨¡å—æ—¶ï¼Œè¦æŠŠåŠŸèƒ½å…³ç³»ç´§å¯†çš„æ”¾åˆ°ä¸€ä¸ªæ¨¡å—ä¸­ï¼‰</li>
<li>ä½è€¦åˆï¼ˆæ¨¡å—ä¹‹é—´çš„è”ç³»è¶Šå°‘è¶Šå¥½ï¼Œæ¥å£è¶Šç®€å•è¶Šå¥½ï¼‰</li>
</ul>
<p><a href="https://martinfowler.com/articles/microservices.html#CharacteristicsOfAMicroserviceArchitecture">å¾®æœåŠ¡è®ºæ–‡</a></p>
<p>å•ä½“å’Œå¾®æœåŠ¡ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190349825-1362144904.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190349825-1362144904.png" alt="img"></a></p>
<ul>
<li>æ„å»ºä¸€ä¸ªä¸ªåŠŸèƒ½ç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨å•å…ƒï¼Œå¯ä»¥ä½¿ç”¨springbootï¼Œå¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿæ„å»ºä¸€ä¸ªåº”ç”¨</li>
<li>å¤§å‹åˆ†å¸ƒå¼ç½‘ç»œæœåŠ¡çš„è°ƒç”¨ï¼Œè¿™éƒ¨åˆ†springcloudæ¥å®Œæˆï¼Œå®ç°åˆ†å¸ƒå¼</li>
<li>åœ¨åˆ†å¸ƒå¼ä¸­é—´ï¼Œè¿›è¡Œæµå¼æ•°æ®è®¡ç®—ï¼Œæ‰¹å¤„ç†ï¼Œæˆ‘ä»¬æœ‰spring cloud data flow</li>
<li>springä¸ºæˆ‘ä»¬æƒ³æ¸…æ¥šäº†æ•´ä¸ªå¼€å§‹æ„å»ºåº”ç”¨åˆ°å¤§å‹åˆ†å¸ƒå¼åº”ç”¨å…¨æµç¨‹æ–¹æ¡ˆ</li>
</ul>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190408687-1675207097.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190408687-1675207097.png" alt="img"></a></p>
<h2 id="2ã€ç¬¬ä¸€ä¸ªSpringbootç¨‹åº"><a href="#2ã€ç¬¬ä¸€ä¸ªSpringbootç¨‹åº" class="headerlink" title="2ã€ç¬¬ä¸€ä¸ªSpringbootç¨‹åº"></a>2ã€ç¬¬ä¸€ä¸ªSpringbootç¨‹åº</h2><h3 id="2-1ã€ç¯å¢ƒé…ç½®"><a href="#2-1ã€ç¯å¢ƒé…ç½®" class="headerlink" title="2.1ã€ç¯å¢ƒé…ç½®"></a>2.1ã€ç¯å¢ƒé…ç½®</h3><p>æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¿«é€Ÿçš„åˆ›å»ºä¸€ä¸ªSpring Bootåº”ç”¨ï¼Œå¹¶ä¸”å®ç°ä¸€ä¸ªç®€å•çš„Httpè¯·æ±‚å¤„ç†ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­å¯¹Spring Bootæœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼Œå¹¶ä½“éªŒå…¶ç»“æ„ç®€å•ã€å¼€å‘å¿«é€Ÿçš„ç‰¹æ€§ã€‚</p>
<p>æˆ‘çš„ç¯å¢ƒå‡†å¤‡ï¼š</p>
<blockquote>
<p>java version â€œ1.8.0_331â€<br>Maven-3.5.2<br>SpringBoot 2.x æœ€æ–°ç‰ˆ</p>
</blockquote>
<p>å¼€å‘å·¥å…·ï¼š</p>
<ul>
<li>IDEA2020</li>
</ul>
<h3 id="2-2ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜"><a href="#2-2ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜" class="headerlink" title="2.2ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜"></a>2.2ã€åˆ›å»ºåŸºç¡€é¡¹ç›®è¯´æ˜</h3><p>Springå®˜æ–¹æä¾›äº†éå¸¸æ–¹ä¾¿çš„å·¥å…·è®©æˆ‘ä»¬å¿«é€Ÿæ„å»ºåº”ç”¨ï¼ŒIDEAä¹Ÿé›†æˆäº†è¿™ä¸ªç½‘ç«™</p>
<p>Spring Initializrï¼š<a href="https://start.spring.io/">https://start.spring.io/</a></p>
<h4 id="2-3-1ã€é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€"><a href="#2-3-1ã€é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€" class="headerlink" title="2.3.1ã€é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€"></a>2.3.1ã€é¡¹ç›®åˆ›å»ºæ–¹å¼ä¸€</h4><p>ä½¿ç”¨Spring Initializr çš„ Webé¡µé¢åˆ›å»ºé¡¹ç›®</p>
<p>â‘ æ‰“å¼€ <a href="https://start.spring.io/">https://start.spring.io/</a></p>
<p>â‘¡å¡«å†™é¡¹ç›®ä¿¡æ¯</p>
<p>â‘¢ç‚¹å‡»â€Generate Projectâ€œæŒ‰é’®ç”Ÿæˆé¡¹ç›®ï¼›ä¸‹è½½æ­¤é¡¹ç›®</p>
<p>â‘£è§£å‹é¡¹ç›®åŒ…ï¼Œå¹¶ç”¨IDEAä»¥Mavené¡¹ç›®å¯¼å…¥ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ï¼Œç›´åˆ°é¡¹ç›®å¯¼å…¥å®Œæ¯•ã€‚</p>
<p>â‘¤å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯èƒ½é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼ŒåŒ…æ¯”è¾ƒå¤šã€éœ€è¦è€å¿ƒç­‰å¾…ä¸€åˆ‡å°±ç»ªã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190542927-162475621.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190542927-162475621.png" alt="img"></a></p>
<h4 id="2-3-2ã€é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒ"><a href="#2-3-2ã€é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒ" class="headerlink" title="2.3.2ã€é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒ"></a>2.3.2ã€é¡¹ç›®åˆ›å»ºæ–¹å¼äºŒ</h4><p>ä½¿ç”¨ IDEA ç›´æ¥åˆ›å»ºé¡¹ç›®</p>
<p>â‘ åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</p>
<p>â‘¡é€‰æ‹©spring initalizr ï¼Œ å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯å»å®˜ç½‘çš„å¿«é€Ÿæ„å»ºå·¥å…·é‚£é‡Œå®ç°</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190600548-2079052425.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190600548-2079052425.png" alt="img"></a></p>
<p>â‘¢å¡«å†™é¡¹ç›®ä¿¡æ¯</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190611694-783558637.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190611694-783558637.png" alt="img"></a></p>
<p>â‘£é€‰æ‹©åˆå§‹åŒ–çš„ç»„ä»¶ï¼ˆåˆå­¦å‹¾é€‰ Web å³å¯ï¼‰</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190624500-1613726783.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190624500-1613726783.png" alt="img"></a></p>
<p>â‘¤å¡«å†™é¡¹ç›®è·¯å¾„</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190634603-2139840131.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190634603-2139840131.png" alt="img"></a></p>
<p>â‘¥ç­‰å¾…é¡¹ç›®æ„å»ºæˆåŠŸ</p>
<h4 id="2-3-3ã€é¡¹ç›®ç»“æ„åˆ†æï¼š"><a href="#2-3-3ã€é¡¹ç›®ç»“æ„åˆ†æï¼š" class="headerlink" title="2.3.3ã€é¡¹ç›®ç»“æ„åˆ†æï¼š"></a>2.3.3ã€é¡¹ç›®ç»“æ„åˆ†æï¼š</h4><p>é€šè¿‡ä¸Šé¢æ­¥éª¤å®Œæˆäº†åŸºç¡€é¡¹ç›®çš„åˆ›å»ºã€‚å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ã€‚</p>
<p>1ã€ç¨‹åºçš„ä¸»å¯åŠ¨ç±»ï¼ˆç¨‹åºçš„ä¸»å…¥å£ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¨‹åºçš„ä¸»å…¥å£</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot01HelloworldApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot01HelloworldApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ä¸€ä¸ª application.properties é…ç½®æ–‡ä»¶ï¼ˆSpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼‰</p>
<p>3ã€ä¸€ä¸ª æµ‹è¯•ç±»</p>
<p>4ã€ä¸€ä¸ª pom.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æœ‰ä¸€ä¸ªçˆ¶é¡¹ç›®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.qjd<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot-01-helloworld<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot-01-helloworld<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>qjd first springboot project<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--webä¾èµ–ï¼štomcat,dispatcherServlet,xml...    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ‰€æœ‰çš„springbootä¾èµ–éƒ½æ˜¯ç”¨ spring-boot-starterå¼€å¤´çš„      --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--å•å…ƒæµ‹è¯•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ‰“jaråŒ…æ’ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3ã€HelloWorld"><a href="#2-3ã€HelloWorld" class="headerlink" title="2.3ã€HelloWorld"></a>2.3ã€HelloWorld</h3><p>1ã€åœ¨ä¸»ç¨‹åºçš„åŒçº§ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªcontrolleråŒ…ï¼Œä¸€å®šè¦åœ¨åŒçº§ç›®å½•ä¸‹ï¼Œå¦åˆ™è¯†åˆ«ä¸åˆ°</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190706747-1783309274.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190706747-1783309274.png" alt="img"></a></p>
<p>2ã€åœ¨åŒ…ä¸­æ–°å»ºä¸€ä¸ªHelloControllerç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªåŠ¨è£…é…</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥å£ï¼šhttp://localhost:8080/hello/hello</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;HelloWorld&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™å®Œæ¯•åï¼Œä»ä¸»ç¨‹åºå¯åŠ¨é¡¹ç›®ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œçœ‹é¡µé¢è¿”å›ï¼›æ§åˆ¶å°è¾“å‡ºäº† Tomcat è®¿é—®çš„ç«¯å£å·ï¼</p>
<p>(1)è®¿é—®<a href="http://localhost:8080/hello/hello">http://localhost:8080/hello/hello</a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190727489-1645840361.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190727489-1645840361.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰æ§åˆ¶å°</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190744221-1625879852.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190744221-1625879852.png" alt="img"></a></p>
<p>åˆ°è¿™é‡Œå°±å®Œæˆäº†ç®€å•çš„webæ¥å£çš„å¼€å‘ï¼Œæ¯”ä½¿ç”¨ssmå¼€å‘æ›´ä¾¿æ·äº†</p>
<h3 id="2-4ã€springboot-banner"><a href="#2-4ã€springboot-banner" class="headerlink" title="2.4ã€springboot banner"></a>2.4ã€springboot banner</h3><blockquote>
<p>ä¿®æ”¹é»˜è®¤ç«¯å£å·</p>
</blockquote>
<p>ï¼ˆ1ï¼‰æˆ‘ä»¬åœ¨application.propertiesä¸­å¯ä»¥ä¿®æ”¹tomcatè®¿é—®çš„é»˜è®¤çš„ç«¯å£å·</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190800975-1982176606.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190800975-1982176606.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰è®¿é—®<a href="http://localhost:8082/hello/hello">http://localhost:8082/hello/hello</a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190810590-548048923.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190810590-548048923.png" alt="img"></a></p>
<blockquote>
<p>ä¿®æ”¹springboot banner</p>
</blockquote>
<p>æˆ‘ä»¬å¯åŠ¨ä¸»ç¨‹åºæ—¶springboot banneræ˜¾ç¤ºæ˜¯è¿™æ ·çš„</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190828528-1148826236.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190828528-1148826236.png" alt="img"></a></p>
<p>æˆ‘ä»¬é€šè¿‡<a href="https://www.bootschool.net/ascii/">Spring Bootè‡ªå®šä¹‰å¯åŠ¨Banneråœ¨çº¿ç”Ÿæˆå·¥å…·</a>å¯ä»¥å¯¹å®ƒè¿›è¡Œä¸ªæ€§åŒ–çš„ä¿®æ”¹</p>
<ol>
<li>åœ¨application.propertiesåŒçº§ç›®å½•ä¸­æ–°å»º<code>banner.txt</code></li>
<li>å°†å¤åˆ¶å·çš„æ–‡ä»¶ç²˜è´´è¿›å»</li>
<li>é‡å¯ä¸»ç¨‹åº</li>
</ol>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190840458-7708858.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190840458-7708858.png" alt="img"></a></p>
<p>å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©é€‚å½“çš„bannerç²˜è´´è¿›å…¥*.ã€‚</p>
<h2 id="3ã€Springbootè‡ªåŠ¨è£…é…åŸç†"><a href="#3ã€Springbootè‡ªåŠ¨è£…é…åŸç†" class="headerlink" title="3ã€Springbootè‡ªåŠ¨è£…é…åŸç†"></a>3ã€Springbootè‡ªåŠ¨è£…é…åŸç†</h2><h3 id="3-1ã€pom-xml"><a href="#3-1ã€pom-xml" class="headerlink" title="3.1ã€pom.xml"></a>3.1ã€pom.xml</h3><ul>
<li>Spring-boot-dependencies:<strong>æ ¸å¿ƒä¾èµ–åœ¨çˆ¶å·¥ç¨‹ä¸­</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç‚¹å‡»è¿›å…¥ä¹‹åè¿˜ä¼šå‘ç°ä¸€ä¸ªçˆ¶ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ‰æ˜¯çœŸæ­£ç®¡ç†SpringBootåº”ç”¨é‡Œé¢æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬çš„åœ°æ–¹ï¼ŒSpringBootçš„ç‰ˆæœ¬æ§åˆ¶ä¸­å¿ƒï¼›</p>
<p><strong>ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼›ä½†æ˜¯å¦‚æœå¯¼å…¥çš„åŒ…æ²¡æœ‰åœ¨ä¾èµ–ä¸­ç®¡ç†ç€å°±éœ€è¦æ‰‹åŠ¨é…ç½®ç‰ˆæœ¬äº†ï¼›</strong></p>
<ul>
<li>æˆ‘ä»¬åœ¨å†™æˆ–è€…å¼•å…¥springbootä¾èµ–çš„æ—¶å€™ï¼Œä¸éœ€è¦æŒ‡å®šç‰ˆæœ¬ï¼Œå› ä¸ºæœ‰è¿™äº›ç‰ˆæœ¬ä»“åº“å¯åŠ¨å™¨ï¼ˆæ–°ç‰ˆæœ¬å¯èƒ½ä¼šéšè—ï¼‰</li>
</ul>
<blockquote>
<p>å¯åŠ¨å™¨</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯åŠ¨å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯åŠ¨å™¨ï¼šè¯´ç™½äº†å°±æ˜¯Springbootçš„å¯åŠ¨åœºæ™¯</li>
<li>æ¯”å¦‚spring-boot-starter-webï¼Œä»–å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼å…¥webç¯å¢ƒæ‰€æœ‰çš„ä¾èµ–</li>
<li>springbootä¼šå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯ï¼Œéƒ½å˜æˆä¸€ä¸ªä¸ªçš„å¯åŠ¨å™¨</li>
<li>æˆ‘ä»¬è¦ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå°±å€¼éœ€è¦æ‰¾åˆ°å¯¹åº”çš„å¯åŠ¨å™¨starter</li>
</ul>
<h3 id="3-2ã€ä¸»ç¨‹åº"><a href="#3-2ã€ä¸»ç¨‹åº" class="headerlink" title="3.2ã€ä¸»ç¨‹åº"></a>3.2ã€ä¸»ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¨‹åºçš„ä¸»å…¥å£</span></span><br><span class="line"><span class="comment">//@SpringBootApplicationï¼šæ ‡æ³¨è¿™ä¸ªç±»æ˜¯springbootçš„åº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot01HelloworldApplication</span> &#123;</span><br><span class="line">    <span class="comment">//å°†springbootåº”ç”¨å¯åŠ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot01HelloworldApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨è§£</li>
</ul>
<p>ç‚¹å‡»@SpringBootApplicationæ³¨è§£è¿›å…¥æŸ¥çœ‹å…¶ä»–é‡ç‚¹çš„æ³¨è§£</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190908998-1342474924.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916190908998-1342474924.png" alt="img"></a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line">	<span class="meta">@SpringBootConfiguration</span>ï¼šspringbootçš„é…ç½®</span><br><span class="line">		<span class="meta">@Configuration</span>ï¼šspringçš„é…ç½®ç±»</span><br><span class="line">			<span class="meta">@Component</span>ï¼šè¯´æ˜è¿™ä¹Ÿæ˜¯ä¸€ä¸ªspringçš„ç»„ä»¶</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">    <span class="meta">@EnableAutoConfiguration</span>ï¼šè‡ªåŠ¨é…ç½®</span><br><span class="line">    	<span class="meta">@AutoConfigurationPackage</span>ï¼šè‡ªåŠ¨é…ç½®åŒ…</span><br><span class="line">    		<span class="meta">@Import(&#123;Registrar.class&#125;)</span>ï¼šå¯¼å…¥è‡ªåŠ¨é…ç½®`åŒ…æ³¨å†Œ`</span><br><span class="line">    	<span class="meta">@Import(&#123;AutoConfigurationImportSelector.class&#125;)</span>ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©</span><br><span class="line">    	</span><br><span class="line">    	</span><br><span class="line"><span class="comment">//è·å–æ‰€æœ‰çš„é…ç½®</span></span><br><span class="line">List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</span><br><span class="line">    	</span><br></pre></td></tr></table></figure>

<p>è·å–å€™é€‰çš„é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">  List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(),</span><br><span class="line">                                                                       getBeanClassLoader());</span><br><span class="line">  Assert.notEmpty(configurations, <span class="string">&quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span></span><br><span class="line">                  + <span class="string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±ä»¥ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™ä¸ªä¸»ç¨‹åºå¹¶ä¸ç®€å•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯¦ç»†çš„äº†è§£ä¸€ä¸‹é‡ç‚¹çš„æ³¨è§£ï¼š</p>
<h3 id="3-3ã€-SpringBootApplication"><a href="#3-3ã€-SpringBootApplication" class="headerlink" title="3.3ã€@SpringBootApplication"></a>3.3ã€@SpringBootApplication</h3><p>ä½œç”¨ï¼šæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±» ï¼Œ SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(</span></span><br><span class="line"><span class="meta">    excludeFilters = &#123;@Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = &#123;TypeExcludeFilter.class&#125;</span></span><br><span class="line"><span class="meta">), @Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span></span><br><span class="line"><span class="meta">)&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-1ã€-SpringBootConfiguration"><a href="#3-3-1ã€-SpringBootConfiguration" class="headerlink" title="3.3.1ã€@SpringBootConfiguration"></a>3.3.1ã€@SpringBootConfiguration</h4><p>ä½œç”¨ï¼šSpringBootçš„é…ç½®ç±» ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Š ï¼Œ è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpringBootçš„é…ç½®ç±»ï¼›</p>
<p>æˆ‘ä»¬ç»§ç»­è¿›å»è¿™ä¸ªæ³¨è§£æŸ¥çœ‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line">	 <span class="meta">@Component</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ @Configurationï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» ï¼Œé…ç½®ç±»å°±æ˜¯å¯¹åº”Springçš„xml é…ç½®æ–‡ä»¶ï¼›</p>
<p>é‡Œé¢çš„ @Component è¿™å°±è¯´æ˜ï¼Œå¯åŠ¨ç±»æœ¬èº«ä¹Ÿæ˜¯Springä¸­çš„ä¸€ä¸ªç»„ä»¶è€Œå·²ï¼Œè´Ÿè´£å¯åŠ¨åº”ç”¨ï¼</p>
<h4 id="3-3-2ã€-ComponentScan"><a href="#3-3-2ã€-ComponentScan" class="headerlink" title="3.3.2ã€@ComponentScan"></a>3.3.2ã€@ComponentScan</h4><p>è¿™ä¸ªæ³¨è§£åœ¨Springä¸­å¾ˆé‡è¦ ,å®ƒå¯¹åº”XMLé…ç½®ä¸­çš„å…ƒç´ ã€‚</p>
<p>ä½œç”¨ï¼šè‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶æˆ–è€…bean ï¼Œ å°†è¿™ä¸ªbeanå®šä¹‰åŠ è½½åˆ°IOCå®¹å™¨ä¸­</p>
<h4 id="3-3-3ã€-EnableAutoConfigurationï¼ˆé‡ç‚¹ï¼‰"><a href="#3-3-3ã€-EnableAutoConfigurationï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="3.3.3ã€@EnableAutoConfigurationï¼ˆé‡ç‚¹ï¼‰"></a>3.3.3ã€@EnableAutoConfigurationï¼ˆé‡ç‚¹ï¼‰</h4><p><strong>@EnableAutoConfiguration ï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½</strong></p>
<p>ä»¥å‰æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®çš„ä¸œè¥¿ï¼Œè€Œç°åœ¨SpringBootå¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½® ï¼›@EnableAutoConfigurationå‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import(&#123;AutoConfigurationImportSelector.class&#125;)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>@AutoConfigurationPackage</p>
</blockquote>
<p>è‡ªåŠ¨é…ç½®åŒ…</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;Registrar.class&#125;)</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨Registrarå¯¼å…¥ä¸€ç³»åˆ—ç»„ä»¶</span></span><br><span class="line"><span class="comment">//å°†æŒ‡å®šçš„ä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¯¼å…¥è¿›æ¥ï¼Ÿæ˜¯ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ä¸‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@import</strong> ï¼šSpringåº•å±‚æ³¨è§£@import ï¼Œ ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶</p>
<p>Registrar.class ä½œç”¨ï¼šå°†ä¸»å¯åŠ¨ç±»çš„æ‰€åœ¨åŒ…åŠåŒ…ä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨ ï¼›</p>
<p>è‡ªåŠ¨é…ç½®åŒ…åˆ†æå®Œæ¯•ï¼Œæˆ‘ä»¬å›åˆ°ä¸Šä¸€æ­¥æŸ¥çœ‹@Import({AutoConfigurationImportSelector.class})</p>
<blockquote>
<p>@Import({AutoConfigurationImportSelector.class})</p>
</blockquote>
<p>ç»™å®¹å™¨å¯¼å…¥ç»„ä»¶ ï¼›</p>
<p>è¿™ä¸ªæ³¨è§£æ˜¯ä¸€ä¸ªæ´¾ç”Ÿæ³¨è§£ï¼Œå…¶ä¸­çš„å…³é”®åŠŸèƒ½ç”±**@Import**æä¾›ï¼Œå…¶å¯¼å…¥çš„AutoConfigurationImportSelectorçš„selectImports()æ–¹æ³•é€šè¿‡SpringFactoriesLoader.loadFactoryNames()æ‰«ææ‰€æœ‰å…·æœ‰META-INF/spring.factoriesçš„jaråŒ…ã€‚spring-boot-autoconfigure-x.x.x.x.jaré‡Œå°±æœ‰ä¸€ä¸ªè¿™æ ·çš„spring.factoriesæ–‡ä»¶ã€‚</p>
<p>AutoConfigurationImportSelector ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨å‘¢ï¼Ÿæˆ‘ä»¬ç‚¹å‡»å»è¿™ä¸ªç±»çœ‹æºç ï¼š</p>
<p>1ã€è¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å¾—å€™é€‰çš„é…ç½®</span></span><br><span class="line"><span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œçš„getSpringFactoriesLoaderFactoryClassï¼ˆï¼‰æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//è¿”å›çš„å°±æ˜¯æˆ‘ä»¬æœ€å¼€å§‹çœ‹çš„å¯åŠ¨è‡ªåŠ¨å¯¼å…¥é…ç½®æ–‡ä»¶çš„æ³¨è§£ç±»ï¼›EnableAutoConfiguration</span></span><br><span class="line">    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(<span class="built_in">this</span>.getSpringFactoriesLoaderFactoryClass(), <span class="built_in">this</span>.getBeanClassLoader());</span><br><span class="line">    Assert.notEmpty(configurations, <span class="string">&quot;No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€è¿™ä¸ªæ–¹æ³•åˆè°ƒç”¨äº†SpringFactoriesLoader ç±»çš„é™æ€æ–¹æ³•ï¼æˆ‘ä»¬è¿›å…¥SpringFactoriesLoaderç±»loadFactoryNames() æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">loadFactoryNames</span><span class="params">(Class&lt;?&gt; factoryClass, <span class="meta">@Nullable</span> ClassLoader classLoader)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">factoryClassName</span> <span class="operator">=</span> factoryClass.getName();</span><br><span class="line">    <span class="comment">//è¿™é‡Œå®ƒåˆè°ƒç”¨äº† loadSpringFactories æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">return</span> (List)loadSpringFactories(classLoader).getOrDefault(factoryClassName, 						Collections.emptyList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æˆ‘ä»¬ç»§ç»­ç‚¹å‡»æŸ¥çœ‹ loadSpringFactories æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">loadSpringFactories</span><span class="params">(<span class="meta">@Nullable</span> ClassLoader classLoader)</span> &#123;</span><br><span class="line">    <span class="comment">//è·å¾—classLoader ï¼Œ æˆ‘ä»¬è¿”å›å¯ä»¥çœ‹åˆ°è¿™é‡Œå¾—åˆ°çš„å°±æ˜¯EnableAutoConfigurationæ ‡æ³¨çš„ç±»æœ¬èº«</span></span><br><span class="line">    MultiValueMap&lt;String, String&gt; result = (MultiValueMap)cache.get(classLoader);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å»è·å–ä¸€ä¸ªèµ„æº &quot;META-INF/spring.factories&quot;</span></span><br><span class="line">            Enumeration&lt;URL&gt; urls = classLoader != <span class="literal">null</span> ? classLoader.getResources(<span class="string">&quot;META-INF/spring.factories&quot;</span>) : ClassLoader.getSystemResources(<span class="string">&quot;META-INF/spring.factories&quot;</span>);</span><br><span class="line">            <span class="type">LinkedMultiValueMap</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedMultiValueMap</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å°†è¯»å–åˆ°çš„èµ„æºéå†ï¼Œå°è£…æˆä¸ºä¸€ä¸ªProperties</span></span><br><span class="line">            <span class="keyword">while</span>(urls.hasMoreElements()) &#123;</span><br><span class="line">                <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> (URL)urls.nextElement();</span><br><span class="line">                <span class="type">UrlResource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlResource</span>(url);</span><br><span class="line">                <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> PropertiesLoaderUtils.loadProperties(resource);</span><br><span class="line">                <span class="type">Iterator</span> <span class="variable">var6</span> <span class="operator">=</span> properties.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span>(var6.hasNext()) &#123;</span><br><span class="line">                    Entry&lt;?, ?&gt; entry = (Entry)var6.next();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">factoryClassName</span> <span class="operator">=</span> ((String)entry.getKey()).trim();</span><br><span class="line">                    String[] var9 = StringUtils.commaDelimitedListToStringArray((String)entry.getValue());</span><br><span class="line">                    <span class="type">int</span> <span class="variable">var10</span> <span class="operator">=</span> var9.length;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var11</span> <span class="operator">=</span> <span class="number">0</span>; var11 &lt; var10; ++var11) &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">factoryName</span> <span class="operator">=</span> var9[var11];</span><br><span class="line">                        result.add(factoryClassName, factoryName.trim());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            cache.put(classLoader, result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException var13) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Unable to load factories from location [META-INF/spring.factories]&quot;</span>, var13);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€å‘ç°ä¸€ä¸ªå¤šæ¬¡å‡ºç°çš„æ–‡ä»¶ï¼šspring.factoriesï¼ˆè‡ªåŠ¨é…ç½®çš„æ ¹æºï¼‰</p>
<p>è¿™ä¸ªspring.factoriesæ–‡ä»¶ä¹Ÿæ˜¯ä¸€ç»„ä¸€ç»„çš„key=valueçš„å½¢å¼ï¼Œå…¶ä¸­ä¸€ä¸ªkeyæ˜¯EnableAutoConfigurationç±»çš„å…¨ç±»åï¼Œè€Œå®ƒçš„valueæ˜¯ä¸€ä¸ªxxxxAutoConfigurationçš„ç±»åçš„åˆ—è¡¨ï¼Œè¿™äº›ç±»åä»¥é€—å·åˆ†éš”</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191013265-115889857.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191013265-115889857.png" alt="img"></a></p>
<p>è¿™ä¸ª@EnableAutoConfigurationæ³¨è§£é€šè¿‡@SpringBootApplicationè¢«é—´æ¥çš„æ ‡è®°åœ¨äº†Spring Bootçš„å¯åŠ¨ç±»ä¸Šã€‚åœ¨SpringApplication.run(â€¦)çš„å†…éƒ¨å°±ä¼šæ‰§è¡ŒselectImports()æ–¹æ³•ï¼Œæ‰¾åˆ°æ‰€æœ‰JavaConfigè‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šåå¯¹åº”çš„classï¼Œç„¶åå°†æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»åŠ è½½åˆ°Springå®¹å™¨ä¸­ã€‚</p>
<p><strong>WebMvcAutoConfiguration</strong></p>
<p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„è‡ªåŠ¨é…ç½®ç±»éšä¾¿æ‰¾ä¸€ä¸ªæ‰“å¼€çœ‹çœ‹ï¼Œæ¯”å¦‚ ï¼šWebMvcAutoConfiguration</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191036902-1627024125.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191036902-1627024125.png" alt="img"></a></p>
<p>å¯ä»¥çœ‹åˆ°è¿™äº›ä¸€ä¸ªä¸ªçš„éƒ½æ˜¯JavaConfigé…ç½®ç±»ï¼Œè€Œä¸”éƒ½æ³¨å…¥äº†ä¸€äº›Beanï¼Œå¯ä»¥æ‰¾ä¸€äº›è‡ªå·±è®¤è¯†çš„ç±»ï¼Œçœ‹ç€ç†Ÿæ‚‰ä¸€ä¸‹ï¼</p>
<p>æ‰€ä»¥ï¼Œè‡ªåŠ¨é…ç½®çœŸæ­£å®ç°æ˜¯ä»classpathä¸­æœå¯»æ‰€æœ‰çš„META-INF/spring.factoriesé…ç½®æ–‡ä»¶ ï¼Œå¹¶å°†å…¶ä¸­å¯¹åº”çš„ org.springframework.boot.autoconfigure. åŒ…ä¸‹çš„é…ç½®é¡¹ï¼Œé€šè¿‡åå°„å®ä¾‹åŒ–ä¸ºå¯¹åº”æ ‡æ³¨äº† @Configurationçš„JavaConfigå½¢å¼çš„IOCå®¹å™¨é…ç½®ç±» ï¼Œ ç„¶åå°†è¿™äº›éƒ½æ±‡æ€»æˆä¸ºä¸€ä¸ªå®ä¾‹å¹¶åŠ è½½åˆ°IOCå®¹å™¨ä¸­ã€‚</p>
<h4 id="3-4ã€è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ"><a href="#3-4ã€è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ" class="headerlink" title="3.4ã€è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ"></a>3.4ã€è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ</h4><p>æ¯ä¸€ä¸ªXxxxAutoConfigurationè‡ªåŠ¨é…ç½®ç±»éƒ½æ˜¯åœ¨æŸäº›æ¡ä»¶ä¹‹ä¸‹æ‰ä¼šç”Ÿæ•ˆçš„ï¼Œè¿™äº›æ¡ä»¶çš„é™åˆ¶åœ¨Spring Bootä¸­ä»¥æ³¨è§£çš„å½¢å¼ä½“ç°ï¼Œå¸¸è§çš„<strong>æ¡ä»¶æ³¨è§£</strong>æœ‰å¦‚ä¸‹å‡ é¡¹ï¼š</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@ConditionalOnBean</span>ï¼šå½“å®¹å™¨é‡Œæœ‰æŒ‡å®šçš„beançš„æ¡ä»¶ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable">@ConditionalOnMissingBean</span>ï¼šå½“å®¹å™¨é‡Œä¸å­˜åœ¨æŒ‡å®šbeançš„æ¡ä»¶ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable">@ConditionalOnClass</span>ï¼šå½“ç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šç±»çš„æ¡ä»¶ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable">@ConditionalOnMissingClass</span>ï¼šå½“ç±»è·¯å¾„ä¸‹ä¸å­˜åœ¨æŒ‡å®šç±»çš„æ¡ä»¶ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable">@ConditionalOnProperty</span>ï¼šæŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼ï¼Œæ¯”å¦‚<span class="variable">@ConditionalOnProperties</span>(prefix=â€xxx.xxxâ€, value=â€enableâ€, matchIfMissing=true)ï¼Œä»£è¡¨å½“xxx.xxxä¸ºenableæ—¶æ¡ä»¶çš„å¸ƒå°”å€¼ä¸ºtrueï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®çš„æƒ…å†µä¸‹ä¹Ÿä¸ºtrueã€‚</span><br></pre></td></tr></table></figure>

<h4 id="3-5ã€ç»“è®º"><a href="#3-5ã€ç»“è®º" class="headerlink" title="3.5ã€ç»“è®º"></a>3.5ã€ç»“è®º</h4><blockquote>
<p>è‡ªåŠ¨é…ç½®åŸç†åˆ†æ</p>
</blockquote>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191156423-334061193.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191156423-334061193.png" alt="img"></a></p>
<p>springbootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®éƒ½æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æå¹¶åŠ è½½ï¼Œæ‰«æäº†<code>META-INF/spring.factories</code>é…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»éƒ½åœ¨è¿™é‡Œé¢ï¼Œä½†æ˜¯ä¸å®šç”Ÿæ•ˆï¼Œå› ä¸ºè¦åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œåªè¦å¯¼å…¥äº†å¯¹åº”çš„<code>start</code>ï¼Œå°±æœ‰å¯¹åº”çš„å¯åŠ¨å™¨ï¼Œæœ‰äº†å¯åŠ¨å™¨æˆ‘ä»¬è‡ªåŠ¨è£…é…å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åå°±é…ç½®æˆåŠŸ</p>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>SpringBootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼</li>
<li>å°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥å®¹å™¨ ï¼Œ è‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆ ï¼Œ å¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›</li>
<li>ä»¥å‰éœ€è¦æˆ‘ä»¬é…ç½®çš„æ–‡ä»¶ï¼Œspringbootå¸®æˆ‘ä»¬é…ç½®äº†ï¼</li>
<li>æ•´ä¸ªJ2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨springboot-autoconfigureçš„jaråŒ…ä¸­ï¼›</li>
<li>æ•´ä¸ªJ2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨springboot-autoconfigureçš„jaråŒ…ä¸­ï¼›</li>
<li>å®ƒä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±» ï¼ˆxxxAutoConfigurationï¼‰@Bean, å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ ï¼Œ å¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ @Configurationï¼›</li>
<li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±» ï¼Œ å…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</li>
</ul>
<blockquote>
<p><strong>SpringApplication</strong></p>
</blockquote>
<p>æˆ‘ä»¬æœ€åˆä»¥ä¸ºå°±æ˜¯è¿è¡Œäº†ä¸€ä¸ªmainæ–¹æ³•ï¼Œæ²¡æƒ³åˆ°å´å¼€å¯äº†ä¸€ä¸ªæœåŠ¡ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¨‹åºçš„ä¸»å…¥å£</span></span><br><span class="line"><span class="comment">//@SpringBootApplicationï¼šæ ‡æ³¨è¿™ä¸ªç±»æ˜¯springbootçš„åº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot01HelloworldApplication</span> &#123;</span><br><span class="line">    <span class="comment">//å°†springbootåº”ç”¨å¯åŠ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot01HelloworldApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>springApplication.runåˆ†æ</p>
</blockquote>
<p>åˆ†æè¯¥æ–¹æ³•ä¸»è¦åˆ†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯SpringApplicationçš„å®ä¾‹åŒ–ï¼ŒäºŒæ˜¯runæ–¹æ³•çš„æ‰§è¡Œï¼›</p>
<p><strong>SpringApplication</strong></p>
<p>è¿™ä¸ªç±»ä¸»è¦åšäº†ä»¥ä¸‹å››ä»¶äº‹æƒ…ï¼š</p>
<p>1ã€æ¨æ–­åº”ç”¨çš„ç±»å‹æ˜¯æ™®é€šçš„é¡¹ç›®è¿˜æ˜¯Webé¡¹ç›®</p>
<p>2ã€æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨åˆå§‹åŒ–å™¨ ï¼Œ è®¾ç½®åˆ°initializerså±æ€§ä¸­</p>
<p>3ã€æ‰¾å‡ºæ‰€æœ‰çš„åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œè®¾ç½®åˆ°listenerså±æ€§ä¸­</p>
<p>4ã€æ¨æ–­å¹¶è®¾ç½®mainæ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±»</p>
<p>æŸ¥çœ‹æ„é€ å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">SpringApplication</span><span class="params">(ResourceLoader resourceLoader, Class... primarySources)</span> &#123;</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">    <span class="built_in">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();</span><br><span class="line">    <span class="built_in">this</span>.setInitializers(<span class="built_in">this</span>.getSpringFactoriesInstances();</span><br><span class="line">    <span class="built_in">this</span>.setListeners(<span class="built_in">this</span>.getSpringFactoriesInstances(ApplicationListener.class));</span><br><span class="line">    <span class="built_in">this</span>.mainApplicationClass = <span class="built_in">this</span>.deduceMainApplicationClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…³äºspringbootï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼š</p>
</blockquote>
<p>springbootçš„è‡ªåŠ¨è£…é…<br>run()ï¼š<br>â‘ åˆ¤æ–­å½“å‰é¡¹ç›®æ˜¯æ™®é€šé¡¹ç›®è¿˜æ˜¯webé¡¹ç›®<br>â‘¡æ¨æ–­å¹¶è®¾ç½®mainæ–¹æ³•çš„å®šä¹‰ç±»ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»ç±»<br>â‘¢runæ–¹æ³•é‡Œé¢æœ‰ä¸€äº›ç›‘å¬å™¨ï¼Œè¿™äº›ç›‘å¬å™¨æ˜¯å…¨å±€å­˜åœ¨çš„ï¼Œå®ƒçš„ä½œç”¨æ˜¯è·å–ä¸Šä¸‹æ–‡å¤„ç†ä¸€äº›beanï¼Œæ‰€æœ‰çš„beanæ— è®ºæ˜¯åŠ è½½è¿˜æ˜¯ç”Ÿäº§åˆå§‹åŒ–éƒ½å­˜åœ¨ã€‚<br><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191233353-1679682661.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191233353-1679682661.png" alt="img"></a></p>
<h2 id="4ã€Springbooté…ç½®æ–‡ä»¶"><a href="#4ã€Springbooté…ç½®æ–‡ä»¶" class="headerlink" title="4ã€Springbooté…ç½®æ–‡ä»¶"></a>4ã€Springbooté…ç½®æ–‡ä»¶</h2><h3 id="4-1ã€é…ç½®æ–‡ä»¶"><a href="#4-1ã€é…ç½®æ–‡ä»¶" class="headerlink" title="4.1ã€é…ç½®æ–‡ä»¶"></a>4.1ã€é…ç½®æ–‡ä»¶</h3><p>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ ï¼Œ é…ç½®æ–‡ä»¶åç§°æ˜¯å›ºå®šçš„</p>
<ul>
<li>application.propertiesï¼ˆspringbooté»˜è®¤ä½¿ç”¨ï¼Œä½†æ˜¯åªèƒ½ä¿å­˜é”®å€¼å¯¹ï¼‰<ul>
<li>è¯­æ³•ç»“æ„ ï¼škey=value</li>
</ul>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure>

<ul>
<li>application.yaml<ul>
<li>è¯­æ³•ç»“æ„ ï¼škey:ç©ºæ ¼value(æ³¨æ„ä¸è¦å¿˜è®°ç©ºæ ¼)</li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2ã€yamlæ¦‚è¿°"><a href="#4-2ã€yamlæ¦‚è¿°" class="headerlink" title="4.2ã€yamlæ¦‚è¿°"></a>4.2ã€yamlæ¦‚è¿°</h3><p>YAMLæ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ ï¼ˆYAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚</p>
<p>åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</p>
<p><strong>è¿™ç§è¯­è¨€ä»¥æ•°æ®ä½œä¸ºä¸­å¿ƒï¼Œè€Œä¸æ˜¯ä»¥æ ‡è®°è¯­è¨€ä¸ºé‡ç‚¹ï¼</strong></p>
<p>ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ä½¿ç”¨xmlæ¥é…ç½®ï¼›æ¯”å¦‚ä¸€ä¸ªç®€å•çš„ç«¯å£é…ç½®ï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹yamlå’Œxml</p>
<p>ä¼ ç»Ÿxmlé…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">port</span>&gt;</span>8081<span class="tag">&lt;<span class="name">port</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>yamlé…ç½®ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">serverï¼š</span></span><br><span class="line">  <span class="attr">prot:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>yamlåŸºç¡€è¯­æ³•</p>
</blockquote>
<p>è¯´æ˜ï¼šè¯­æ³•è¦æ±‚ä¸¥æ ¼ï¼</p>
<p>1ã€ç©ºæ ¼ä¸èƒ½çœç•¥</p>
<p>2ã€ä»¥ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦è¾¹å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„ã€‚</p>
<p>3ã€å±æ€§å’Œå€¼çš„å¤§å°å†™éƒ½æ˜¯ååˆ†æ•æ„Ÿçš„ã€‚</p>
<p>å­—é¢é‡ï¼šæ™®é€šçš„å€¼ [ æ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œå­—ç¬¦ä¸² ]</p>
<p>å­—é¢é‡ç›´æ¥å†™åœ¨åé¢å°±å¯ä»¥ ï¼Œ å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸ŠåŒå¼•å·æˆ–è€…å•å¼•å·ï¼›</p>
<p>æ³¨æ„ï¼š</p>
<p>â€œ â€ åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€ï¼›</p>
<p>æ¯”å¦‚ ï¼šname: â€œkuang \n shenâ€ è¾“å‡º ï¼škuang æ¢è¡Œ shen</p>
<p>â€˜â€™ å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ ï¼Œ ç‰¹æ®Šå­—ç¬¦æœ€ç»ˆä¼šå˜æˆå’Œæ™®é€šå­—ç¬¦ä¸€æ ·è¾“å‡º</p>
<p>æ¯”å¦‚ ï¼šname: â€˜kuang \n shenâ€™ è¾“å‡º ï¼škuang \n shen</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¯¹ç©ºæ ¼çš„è¦æ±‚æå…¶ä¸¥æ ¼</span></span><br><span class="line"><span class="comment">#yamlæ–‡ä»¶æ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºï¼Œä»–å¯ä»¥ç»™æˆ‘ä»¬çš„å®ä½“ç±»ç›´æ¥æ³¨å…¥åŒ¹é…å€¼ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ™®é€šçš„key-value</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">ikun</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¹è±¡(æ³¨æ„ç¼©è¿›)</span></span><br><span class="line"><span class="attr">student1:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ikun</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¡Œå†…å†™æ³•</span></span><br><span class="line"><span class="attr">student2:</span> &#123;<span class="attr">name:</span> <span class="string">ikun</span>,<span class="attr">age:</span> <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°ç»„</span></span><br><span class="line"><span class="attr">pets1:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pig</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">pets2:</span> [<span class="string">cat</span>,<span class="string">dog</span>,<span class="string">pig</span>]</span><br></pre></td></tr></table></figure>

<h3 id="4-3ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶"><a href="#4-3ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="4.3ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶"></a>4.3ã€yamlæ³¨å…¥é…ç½®æ–‡ä»¶</h3><h4 id="4-3-1ã€åŸå§‹çš„ç»™å®ä½“å¯¹è±¡èµ‹å€¼"><a href="#4-3-1ã€åŸå§‹çš„ç»™å®ä½“å¯¹è±¡èµ‹å€¼" class="headerlink" title="4.3.1ã€åŸå§‹çš„ç»™å®ä½“å¯¹è±¡èµ‹å€¼"></a>4.3.1ã€åŸå§‹çš„ç»™å®ä½“å¯¹è±¡èµ‹å€¼</h4><p>1ã€åœ¨springbooté¡¹ç›®ä¸­çš„resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ application.yml</p>
<p>2ã€ç¼–å†™ä¸€ä¸ªå®ä½“ç±» Personï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//...æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³• </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æ€è€ƒï¼Œæˆ‘ä»¬åŸæ¥æ˜¯å¦‚ä½•ç»™beanæ³¨å…¥å±æ€§å€¼çš„ï¼@Valueï¼Œç»™Personç±»æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;æ—ºè´¢&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;3&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line"> 	<span class="comment">//...æœ‰å‚æ— å‚æ„é€ ã€getã€setæ–¹æ³•ã€toString()æ–¹æ³• </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€åœ¨SpringBootçš„æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot02ConfigApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(dog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€ç»“æœ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191302054-1038128551.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191302054-1038128551.png" alt="img"></a></p>
<h4 id="4-3-2é€šè¿‡yamlæ–‡ä»¶èµ‹å€¼"><a href="#4-3-2é€šè¿‡yamlæ–‡ä»¶èµ‹å€¼" class="headerlink" title="4.3.2é€šè¿‡yamlæ–‡ä»¶èµ‹å€¼"></a>4.3.2é€šè¿‡yamlæ–‡ä»¶èµ‹å€¼</h4><p>1ã€æˆ‘ä»¬æ¥ä½¿ç”¨yamlé…ç½®çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼Œå¤§å®¶å†™çš„æ—¶å€™æ³¨æ„åŒºåˆ«å’Œä¼˜åŠ¿ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªyamlé…ç½®ï¼</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ikun</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">happy:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2000</span><span class="string">/01/01</span></span><br><span class="line">  <span class="attr">maps:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">  <span class="attr">lists:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">sing</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">skip</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rap</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">basketball</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">æ—ºè´¢</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>2ã€æˆ‘ä»¬åˆšæ‰å·²ç»æŠŠpersonè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å€¼éƒ½å†™å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨æ¥æ³¨å…¥åˆ°æˆ‘ä»¬çš„ç±»ä¸­ï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191328802-1090557004.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191328802-1090557004.png" alt="img"></a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@ConfigurationPropertiesä½œç”¨ï¼š</span></span><br><span class="line"><span class="comment">å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ï¼›</span></span><br><span class="line"><span class="comment">å‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="comment">å‚æ•° prefix = â€œpersonâ€ : å°†é…ç½®æ–‡ä»¶ä¸­çš„personä¸‹é¢çš„æ‰€æœ‰å±æ€§ä¸€ä¸€å¯¹åº”</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ³¨å†Œbean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€IDEA æç¤ºï¼Œspringbooté…ç½®æ³¨è§£å¤„ç†å™¨æ²¡æœ‰æ‰¾åˆ°ï¼Œè®©æˆ‘ä»¬çœ‹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¾èµ–ï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191342379-1044405639.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191342379-1044405639.png" alt="img"></a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤ºï¼Œéœ€è¦é‡å¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€ç¡®è®¤ä»¥ä¸Šé…ç½®éƒ½OKä¹‹åï¼Œæˆ‘ä»¬å»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Person person; <span class="comment">//å°†personè‡ªåŠ¨æ³¨å…¥è¿›æ¥</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(person); <span class="comment">//æ‰“å°personä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€ç»“æœ</p>
<p>æ‰€æœ‰å€¼éƒ½æ³¨å…¥æˆåŠŸ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191401257-1664511923.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191401257-1664511923.png" alt="img"></a></p>
<p>6ã€å‡ºç°çš„é—®é¢˜</p>
<p>åœ¨ç¬¬ä¸€æ¬¡æµ‹è¯•æ—¶ï¼Œæµ‹è¯•å¤±è´¥å‡ºç°äº†<code>input length = 1</code>çš„é—®é¢˜ï¼Œåˆ†æä¹‹åå‘ç°æ˜¯yamlæ–‡ä»¶ä¸­æœ‰ä¸­æ–‡å‡ºç°ç¼–ç é—®é¢˜</p>
<p>è§£å†³æ–¹æ³•ï¼šå°†æ–‡ä»¶ç¼–ç æ”¹ä¸ºutf-8</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191414299-622102706.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191414299-622102706.png" alt="img"></a></p>
<h4 id="4-3-3ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"><a href="#4-3-3ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶" class="headerlink" title="4.3.3ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"></a>4.3.3ã€åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</h4><p><strong>@PropertySource ï¼š</strong>åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼›<code>propertiesæ–‡ä»¶</code></p>
<p><strong>@configurationProperties</strong>ï¼šé»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼; <code>yamlæ–‡ä»¶</code></p>
<p>1ã€æˆ‘ä»¬å»åœ¨resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<strong>qjd.properties</strong>æ–‡ä»¶(name=ikun)</p>
<p>2ã€ç„¶ååœ¨æˆ‘ä»¬çš„ä»£ç ä¸­æŒ‡å®šåŠ è½½qjd.propertiesæ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">//yamlæ³¨å…¥å€¼</span></span><br><span class="line"><span class="comment">//@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="comment">//åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼ˆæ³¨å…¥å€¼çš„æ–¹æ³•åªèƒ½æ˜¯@Valueï¼Œä¸èƒ½å†™å…¥yamlæ³¨å…¥å€¼ï¼‰</span></span><br><span class="line"><span class="meta">@PropertySource(value = &quot;classpath:qjd.properties&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//elè¡¨è¾¾å¼å–å‡ºé…ç½®æ–‡ä»¶çš„å€¼</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191439743-525461889.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191439743-525461889.png" alt="img"></a></p>
<h4 id="4-3-4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"><a href="#4-3-4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦" class="headerlink" title="4.3.4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"></a>4.3.4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</h4><p>é…ç½®æ–‡ä»¶è¿˜å¯ä»¥ç¼–å†™å ä½ç¬¦ç”Ÿæˆéšæœºæ•°</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">qinjiang$&#123;random.uuid&#125;</span> <span class="comment"># éšæœºuuid</span></span><br><span class="line">    <span class="attr">age:</span> <span class="string">$&#123;random.int&#125;</span>  <span class="comment"># éšæœºint</span></span><br><span class="line">    <span class="attr">happy:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">birth:</span> <span class="number">2000</span><span class="string">/01/01</span></span><br><span class="line">    <span class="attr">maps:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">    <span class="attr">lists:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">code</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">girl</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">music</span></span><br><span class="line">    <span class="attr">dog:</span></span><br><span class="line">    <span class="comment">#$&#123;person.hello:other&#125;å¦‚æœæœ‰å‰é¢çš„å€¼å°±å–å‰é¢çš„ï¼Œæ²¡æœ‰å°±ä¼šå–åé¢çš„</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">$&#123;person.hello:other&#125;æ—ºè´¢</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191454633-264894259.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191454633-264894259.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191501852-875361584.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191501852-875361584.png" alt="img"></a></p>
<h4 id="4-3-5ã€å›é¡¾properties"><a href="#4-3-5ã€å›é¡¾properties" class="headerlink" title="4.3.5ã€å›é¡¾properties"></a>4.3.5ã€å›é¡¾properties</h4><p>æˆ‘ä»¬ä¸Šé¢é‡‡ç”¨çš„yamlæ–¹æ³•éƒ½æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ï¼›ä¹Ÿæ˜¯springbootæ‰€æ¨èçš„ï¼é‚£æˆ‘ä»¬æ¥å” å” å…¶ä»–çš„å®ç°æ–¹å¼ï¼Œé“ç†éƒ½æ˜¯ç›¸åŒçš„ï¼›å†™è¿˜æ˜¯é‚£æ ·å†™ï¼›é…ç½®æ–‡ä»¶é™¤äº†ymlè¿˜æœ‰æˆ‘ä»¬ä¹‹å‰å¸¸ç”¨çš„properties ï¼Œ æˆ‘ä»¬æ²¡æœ‰è®²ï¼Œæˆ‘ä»¬æ¥å” å” ï¼</p>
<p>ã€æ³¨æ„ã€‘propertiesé…ç½®æ–‡ä»¶åœ¨å†™ä¸­æ–‡çš„æ—¶å€™ï¼Œä¼šæœ‰ä¹±ç  ï¼Œ æˆ‘ä»¬éœ€è¦å»IDEAä¸­è®¾ç½®ç¼–ç æ ¼å¼ä¸ºUTF-8ï¼›</p>
<ul>
<li>settingsâ€“&gt;FileEncodings ä¸­é…ç½®</li>
</ul>
<h3 id="4-4ã€Propertieså’ŒYamlçš„å¯¹æ¯”å°ç»“"><a href="#4-4ã€Propertieså’ŒYamlçš„å¯¹æ¯”å°ç»“" class="headerlink" title="4.4ã€Propertieså’ŒYamlçš„å¯¹æ¯”å°ç»“"></a>4.4ã€Propertieså’ŒYamlçš„å¯¹æ¯”å°ç»“</h3><p>@Valueè¿™ä¸ªä½¿ç”¨èµ·æ¥å¹¶ä¸å‹å¥½ï¼æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªå±æ€§å•ç‹¬æ³¨è§£èµ‹å€¼ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼›æˆ‘ä»¬æ¥çœ‹ä¸ªåŠŸèƒ½å¯¹æ¯”å›¾</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191515615-1929293241.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191515615-1929293241.png" alt="img"></a></p>
<p>1ã€@ConfigurationPropertiesåªéœ€è¦å†™ä¸€æ¬¡å³å¯ ï¼Œ @Valueåˆ™éœ€è¦æ¯ä¸ªå­—æ®µéƒ½æ·»åŠ </p>
<p>2ã€æ¾æ•£ç»‘å®šï¼šè¿™ä¸ªä»€ä¹ˆæ„æ€å‘¢? æ¯”å¦‚æˆ‘çš„yamlä¸­å†™çš„last-Nameï¼Œè¿™ä¸ªå’ŒlastNameæ˜¯ä¸€æ ·çš„ï¼Œ - åé¢è·Ÿç€çš„å­—æ¯é»˜è®¤æ˜¯å¤§å†™çš„ã€‚è¿™å°±æ˜¯æ¾æ•£ç»‘å®šã€‚å¯ä»¥æµ‹è¯•ä¸€ä¸‹<code>last-Name</code>==<code>lastName</code></p>
<p>3ã€JSR303æ•°æ®æ ¡éªŒ ï¼Œ è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å­—æ®µæ˜¯å¢åŠ ä¸€å±‚è¿‡æ»¤å™¨éªŒè¯ ï¼Œ å¯ä»¥ä¿è¯æ•°æ®çš„åˆæ³•æ€§</p>
<p>4ã€å¤æ‚ç±»å‹å°è£…ï¼Œyamlä¸­å¯ä»¥å°è£…å¯¹è±¡ ï¼Œ ä½¿ç”¨valueå°±ä¸æ”¯æŒã€‚</p>
<p>ç»“è®º</p>
<ul>
<li>é…ç½®yamlå’Œé…ç½®propertieséƒ½å¯ä»¥è·å–åˆ°å€¼ ï¼Œ ä½†æ˜¯å¼ºçƒˆæ¨è yamlï¼›</li>
<li>å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä¸šåŠ¡ä¸­ï¼Œåªéœ€è¦è·å–é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ @valueï¼›</li>
<li>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œå°±ç›´æ¥@configurationPropertiesï¼Œä¸è¦çŠ¹è±«ï¼</li>
</ul>
<h2 id="5ã€JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢"><a href="#5ã€JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢" class="headerlink" title="5ã€JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢"></a>5ã€JSR303æ•°æ®æ ¡éªŒåŠå¤šç¯å¢ƒåˆ‡æ¢</h2><h3 id="5-1ã€JSR303"><a href="#5-1ã€JSR303" class="headerlink" title="5.1ã€JSR303"></a>5.1ã€JSR303</h3><p>JSR303æ•°æ®æ ¡éªŒæ˜¯ç”¨æ¥æ ¡éªŒè¾“å…¥å†…å®¹çš„</p>
<p>Springbootä¸­å¯ä»¥ç”¨@validatedæ¥æ ¡éªŒæ•°æ®ï¼Œå¦‚æœæ•°æ®å¼‚å¸¸åˆ™ä¼šç»Ÿä¸€æŠ›å‡ºå¼‚å¸¸ï¼Œæ–¹ä¾¿å¼‚å¸¸ä¸­å¿ƒç»Ÿä¸€å¤„ç†ã€‚æˆ‘ä»¬è¿™é‡Œæ¥å†™ä¸ªæ³¨è§£è®©æˆ‘ä»¬çš„nameåªèƒ½æ”¯æŒEmailæ ¼å¼ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">//yamlæ³¨å…¥å€¼</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="meta">@Validated</span>  <span class="comment">//æ•°æ®æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Email(message=&quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//è®¾ç½®nameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰@Emailæ³¨è§£ï¼Œéœ€è¦åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191540767-194759862.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191540767-194759862.png" alt="img"></a></p>
<p><strong>ä½¿ç”¨æ•°æ®æ ¡éªŒï¼Œå¯ä»¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§</strong>ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ ¡éªŒæ³¨è§£</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@NotNull</span>(message=<span class="string">&quot;åå­—ä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">private String userName;</span><br><span class="line"><span class="variable">@Max</span>(value=<span class="number">120</span>,message=<span class="string">&quot;å¹´é¾„æœ€å¤§ä¸èƒ½æŸ¥è¿‡120&quot;</span>)</span><br><span class="line">private int age;</span><br><span class="line"><span class="variable">@Email</span>(message=<span class="string">&quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;</span>)</span><br><span class="line">private String email;</span><br><span class="line"></span><br><span class="line">ç©ºæ£€æŸ¥</span><br><span class="line"><span class="variable">@Null</span>       éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ºnull</span><br><span class="line"><span class="variable">@NotNull</span>    éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º<span class="number">0</span>çš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="variable">@NotBlank</span>   æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº<span class="number">0</span>,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼.</span><br><span class="line"><span class="variable">@NotEmpty</span>   æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY.</span><br><span class="line">    </span><br><span class="line">Booelanæ£€æŸ¥</span><br><span class="line"><span class="variable">@AssertTrue</span>     éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º true  </span><br><span class="line"><span class="variable">@AssertFalse</span>    éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º false  </span><br><span class="line">    </span><br><span class="line">é•¿åº¦æ£€æŸ¥</span><br><span class="line"><span class="variable">@Size</span>(min=, max=) éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†…  </span><br><span class="line"><span class="variable">@Length</span>(min=, max=) string is between min <span class="keyword">and</span> max included.</span><br><span class="line"></span><br><span class="line">æ—¥æœŸæ£€æŸ¥</span><br><span class="line"><span class="variable">@Past</span>       éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰  </span><br><span class="line"><span class="variable">@Future</span>     éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å  </span><br><span class="line"><span class="variable">@Pattern</span>    éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</span><br><span class="line"></span><br><span class="line">.......ç­‰ç­‰</span><br><span class="line">é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ•°æ®æ ¡éªŒè§„åˆ™</span><br></pre></td></tr></table></figure>

<h3 id="5-2ã€å¤šç¯å¢ƒåˆ‡æ¢"><a href="#5-2ã€å¤šç¯å¢ƒåˆ‡æ¢" class="headerlink" title="5.2ã€å¤šç¯å¢ƒåˆ‡æ¢"></a>5.2ã€å¤šç¯å¢ƒåˆ‡æ¢</h3><p>profileæ˜¯Springå¯¹ä¸åŒç¯å¢ƒæä¾›ä¸åŒé…ç½®åŠŸèƒ½çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¿€æ´»ä¸åŒçš„ç¯å¢ƒç‰ˆæœ¬ï¼Œå®ç°å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒï¼›</p>
<blockquote>
<p>å¤šé…ç½®æ–‡ä»¶</p>
</blockquote>
<p>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯ application-{profile}.properties/yml , ç”¨æ¥æŒ‡å®šå¤šä¸ªç¯å¢ƒç‰ˆæœ¬ï¼›</p>
<p><strong>ä¾‹å¦‚ï¼š</strong></p>
<p>application-test.properties ä»£è¡¨æµ‹è¯•ç¯å¢ƒé…ç½®</p>
<p>application-dev.properties ä»£è¡¨å¼€å‘ç¯å¢ƒé…ç½®</p>
<p>ä½†æ˜¯Springbootå¹¶ä¸ä¼šç›´æ¥å¯åŠ¨è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå®ƒ<strong>é»˜è®¤ä½¿ç”¨application.propertiesä¸»é…ç½®æ–‡ä»¶</strong>ï¼›</p>
<p>æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®æ¥é€‰æ‹©éœ€è¦æ¿€æ´»çš„ç¯å¢ƒï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ¯”å¦‚åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨devç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„ç«¯å£å·è¿›è¡Œæµ‹è¯•ï¼›</span></span><br><span class="line"><span class="comment">#æˆ‘ä»¬å¯åŠ¨SpringBootï¼Œå°±å¯ä»¥çœ‹åˆ°å·²ç»åˆ‡æ¢åˆ°devä¸‹çš„é…ç½®äº†ï¼›</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>yamlçš„å¤šæ–‡æ¡£å—</p>
</blockquote>
<p>å’Œpropertiesé…ç½®æ–‡ä»¶ä¸­ä¸€æ ·ï¼Œä½†æ˜¯ä½¿ç”¨ymlå»å®ç°ä¸éœ€è¦åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ›´åŠ æ–¹ä¾¿äº† !</p>
<p>yamlç”¨<code>---</code>æ¥åˆ†å¼€ä¸åŒçš„ç¯å¢ƒ</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="comment">#é€‰æ‹©è¦æ¿€æ´»å“ªä¸ªé…ç½®æ–‡ä»¶ï¼Œé€‰æ‹©å·²ç»é…ç½®è¿‡çš„åç§°dev/prod</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span> <span class="comment">#é…ç½®ç¯å¢ƒçš„åç§°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">prod</span>  <span class="comment">#é…ç½®ç¯å¢ƒçš„åç§°</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šå¦‚æœymlå’ŒpropertiesåŒæ—¶éƒ½é…ç½®äº†ç«¯å£ï¼Œå¹¶ä¸”æ²¡æœ‰æ¿€æ´»å…¶ä»–ç¯å¢ƒ ï¼Œ é»˜è®¤ä¼šä½¿ç”¨propertiesé…ç½®æ–‡ä»¶çš„ï¼</strong></p>
<blockquote>
<p>é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</p>
</blockquote>
<p><strong>å¤–éƒ¨åŠ è½½é…ç½®æ–‡ä»¶çš„æ–¹å¼ååˆ†å¤šï¼Œæˆ‘ä»¬é€‰æ‹©æœ€å¸¸ç”¨çš„å³å¯ï¼Œåœ¨å¼€å‘çš„èµ„æºæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼</strong></p>
<p>å®˜æ–¹å¤–éƒ¨é…ç½®æ–‡ä»¶è¯´æ˜å‚è€ƒæ–‡æ¡£</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191608696-738540070.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191608696-738540070.png" alt="img"></a></p>
<p>springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ä¼˜å…ˆçº§<span class="number">1</span>ï¼šé¡¹ç›®è·¯å¾„ä¸‹çš„<span class="built_in">config</span>æ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶</span><br><span class="line">ä¼˜å…ˆçº§<span class="number">2</span>ï¼šé¡¹ç›®è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶</span><br><span class="line">ä¼˜å…ˆçº§<span class="number">3</span>ï¼šèµ„æºè·¯å¾„ä¸‹çš„<span class="built_in">config</span>æ–‡ä»¶å¤¹é…ç½®æ–‡ä»¶</span><br><span class="line">ä¼˜å…ˆçº§<span class="number">4</span>ï¼šèµ„æºè·¯å¾„ä¸‹é…ç½®æ–‡ä»¶(è¿™æ˜¯æˆ‘ä»¬ä¸æ–°å»ºæ–‡ä»¶ä¸‹çš„é»˜è®¤æƒ…å†µ)</span><br></pre></td></tr></table></figure>

<p>ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼›</p>
<p><strong>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›äº’è¡¥é…ç½®ï¼›</strong></p>
<p>æˆ‘ä»¬åœ¨æœ€ä½çº§çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªé¡¹ç›®è®¿é—®è·¯å¾„çš„é…ç½®æ¥æµ‹è¯•äº’è¡¥é—®é¢˜ï¼›</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é…ç½®é¡¹ç›®çš„è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=/qjd</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‹“å±•ï¼Œè¿ç»´å°æŠ€å·§</p>
</blockquote>
<p>æŒ‡å®šä½ç½®åŠ è½½é…ç½®æ–‡ä»¶</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®</p>
<p>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›è¿™ç§æƒ…å†µï¼Œä¸€èˆ¬æ˜¯åæœŸè¿ç»´åšçš„å¤šï¼Œç›¸åŒé…ç½®ï¼Œå¤–éƒ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æœ€é«˜</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">java -jar spring-boot-<span class="built_in">config</span>.jar <span class="comment">--spring.config.location=F:/application.properties</span></span><br></pre></td></tr></table></figure>

<h2 id="6ã€è‡ªåŠ¨é…ç½®åŸç†å†ç†è§£ï¼ˆé‡ç‚¹ï¼‰"><a href="#6ã€è‡ªåŠ¨é…ç½®åŸç†å†ç†è§£ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="6ã€è‡ªåŠ¨é…ç½®åŸç†å†ç†è§£ï¼ˆé‡ç‚¹ï¼‰"></a>6ã€è‡ªåŠ¨é…ç½®åŸç†å†ç†è§£ï¼ˆé‡ç‚¹ï¼‰</h2><p>é…ç½®æ–‡ä»¶åˆ°åº•èƒ½å†™ä»€ä¹ˆï¼Ÿæ€ä¹ˆå†™ï¼Ÿ</p>
<p>SpringBootå®˜æ–¹æ–‡æ¡£ä¸­æœ‰å¤§é‡çš„é…ç½®ï¼Œæˆ‘ä»¬æ— æ³•å…¨éƒ¨è®°ä½</p>
<h3 id="6-1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†"><a href="#6-1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="6.1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†"></a>6.1ã€åˆ†æè‡ªåŠ¨é…ç½®åŸç†</h3><p>æˆ‘ä»¬ä»¥<strong>HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰</strong>ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›</span></span><br><span class="line">  <span class="comment">//è¿›å…¥è¿™ä¸ªHttpPropertiesæŸ¥çœ‹ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼›</span></span><br><span class="line">  <span class="comment">//å¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;HttpProperties.class&#125;)</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//Springåº•å±‚@Conditionalæ³¨è§£</span></span><br><span class="line">  <span class="comment">//æ ¹æ®ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›</span></span><br><span class="line">  <span class="comment">//è¿™é‡Œçš„æ„æ€å°±æ˜¯åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;CharacterEncodingFilter.class&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®ï¼šspring.http.encoding.enabledï¼›</span></span><br><span class="line">  <span class="comment">//å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„</span></span><br><span class="line">  <span class="comment">//å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®spring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼›</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(</span></span><br><span class="line"><span class="meta">    prefix = &quot;spring.http.encoding&quot;,</span></span><br><span class="line"><span class="meta">    value = &#123;&quot;enabled&quot;&#125;,</span></span><br><span class="line"><span class="meta">    matchIfMissing = true</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpEncodingAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">//ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Encoding properties;</span><br><span class="line">    <span class="comment">//åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HttpEncodingAutoConfiguration</span><span class="params">(HttpProperties properties)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.properties = properties.getEncoding();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span> <span class="comment">//åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> CharacterEncodingFilter <span class="title function_">characterEncodingFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderedCharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="built_in">this</span>.properties.getCharset().name());</span><br><span class="line">        filter.setForceRequestEncoding(<span class="built_in">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST));</span><br><span class="line">        filter.setForceResponseEncoding(<span class="built_in">this</span>.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE));</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€å¥è¯æ€»ç»“ ï¼šæ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼</p>
<ul>
<li>ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›</li>
<li>è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼›</li>
<li>è¿™æ ·å°±å¯ä»¥å½¢æˆæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¯ä»¥åŠ¨æ€çš„ä¿®æ”¹springbootçš„å†…å®¹ã€‚</li>
<li>æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxProperties.javaç±»ä¸­å°è£…ç€ï¼›</li>
<li>é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</li>
</ul>
<p>é€šä¿—ç†è§£ï¼šæŠŠæˆ‘ä»¬åŸå…ˆéœ€è¦åœ¨beanä¸­æ‰‹æ‰“çš„å±æ€§ï¼ˆpropertyï¼‰å°è£…æˆäº†ä¸€ä¸ªç±»ï¼Œç„¶åé€šè¿‡yamlæ–‡ä»¶è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ï¼Œè€Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨application.yamlæ–‡ä»¶ä¸­å¯¹è¿™äº›propertyè¿›è¡Œèµ‹å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.http&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpProperties</span> &#123;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2ã€ç²¾é«“"><a href="#6-2ã€ç²¾é«“" class="headerlink" title="6.2ã€ç²¾é«“"></a>6.2ã€ç²¾é«“</h3><p>1ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</p>
<p>2ã€æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ï¼›</p>
<p>3ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶å­˜åœ¨åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ‰‹åŠ¨é…ç½®äº†ï¼‰</p>
<p>4ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯ï¼›</p>
<p><strong>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›</strong>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼ˆå‘å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶ï¼‰</p>
<p><strong>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</strong>ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼Œè£…é…é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰çš„ä¸€äº›å†…å®¹ï¼‰</p>
<h3 id="6-3ã€äº†è§£-Conditional"><a href="#6-3ã€äº†è§£-Conditional" class="headerlink" title="6.3ã€äº†è§£@Conditional"></a>6.3ã€äº†è§£@Conditional</h3><p>äº†è§£å®Œè‡ªåŠ¨è£…é…çš„åŸç†åï¼Œæˆ‘ä»¬æ¥å…³æ³¨ä¸€ä¸ªç»†èŠ‚é—®é¢˜ï¼Œ<strong>è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›</strong></p>
<p><strong>@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</strong></p>
<p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é…é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼›</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191707014-310388169.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916191707014-310388169.png" alt="img"></a></p>
<p><strong>é‚£ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åŠ è½½äº†è¿™ä¹ˆå¤šçš„é…ç½®ç±»ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç”Ÿæ•ˆäº†ã€‚</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼Ÿ</p>
<p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨ debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯springbootçš„è°ƒè¯•ç±»</span></span><br><span class="line"><span class="string">debug=true</span></span><br></pre></td></tr></table></figure>

<p><strong>Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼šæ­£åŒ¹é…ï¼‰</strong></p>
<p><strong>Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼šè´ŸåŒ¹é…ï¼‰</strong></p>
<p><strong>Unconditional classes: ï¼ˆæ²¡æœ‰æ¡ä»¶çš„ç±»ï¼‰</strong></p>
<h3 id="6-4ã€è‡ªå®šä¹‰Starterå¯åŠ¨å™¨"><a href="#6-4ã€è‡ªå®šä¹‰Starterå¯åŠ¨å™¨" class="headerlink" title="6.4ã€è‡ªå®šä¹‰Starterå¯åŠ¨å™¨"></a>6.4ã€è‡ªå®šä¹‰Starterå¯åŠ¨å™¨</h3><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&chksm=ce6107d4f9168ec28b99622befbde5c7ab51c320d979a96a21e9a870d1d4bbd1e0a2a3dde8eb&idx=1&mid=2247483767&scene=21&sn=4c23abf553259052f335086dba1ce80c#wechat_redirect">è‡ªå®šä¹‰Starterå¯åŠ¨å™¨</a>(äº†è§£å³å¯ï¼Œä¸åšè¯¦ç»†ä»‹ç»,ï¼Œè¯¦ç»†çš„å†…å®¹å¤§å®¶å¯ä»¥æŸ¥çœ‹ç‹‚ç¥è€å¸ˆå‘å¸ƒçš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« è‡ªå®šä¹‰Starter)</p>
<h2 id="7ã€Springboot-Webå¼€å‘"><a href="#7ã€Springboot-Webå¼€å‘" class="headerlink" title="7ã€Springboot Webå¼€å‘"></a>7ã€Springboot Webå¼€å‘</h2><p>åœ¨ä¹‹å‰æˆ‘ä»¬çš„é¡¹ç›®éƒ½æ˜¯ä»¥jaråŒ…ç»“å°¾çš„ï¼Œæ²¡æœ‰æ”¾webappçš„åœ°æ–¹ã€‚<br>springbootæœ€å¤§çš„ç‰¹ç‚¹ï¼šè‡ªåŠ¨è£…é…</p>
<p>1.åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹©æ¨¡å—å¯¼å…¥starterï¼Œåªéœ€è¦ä¸“æ³¨äºä¸šåŠ¡ä»£ç </p>
<p>springbootåˆ°åº•å¸®æˆ‘ä»¬é…ç½®äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ä¿®æ”¹ï¼Ÿèƒ½ä¿®æ”¹å“ªäº›ä¸œè¥¿ï¼Ÿèƒ½ä¸èƒ½æ‰©å±•</p>
<p>xxxAutoConfigurationï¼šå‘å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶<br>xxxPropertiesï¼šè‡ªåŠ¨é…ç½®ç±»ï¼Œè£…é…é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰çš„ä¸€äº›å†…å®¹</p>
<p>è¦è§£å†³çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¯¼å…¥é™æ€èµ„æº</li>
<li>é¦–é¡µ</li>
<li>jsp,æ¨¡æ¿å¼•æ“</li>
<li>è£…é…æ‰©å±•SpringMVC</li>
<li>å¢åˆ æ”¹æŸ¥</li>
<li>æ‹¦æˆªå™¨</li>
<li>å›½é™…åŒ–</li>
</ul>
<h3 id="7-1ã€å¤„ç†é™æ€èµ„æº"><a href="#7-1ã€å¤„ç†é™æ€èµ„æº" class="headerlink" title="7.1ã€å¤„ç†é™æ€èµ„æº"></a>7.1ã€å¤„ç†é™æ€èµ„æº</h3><blockquote>
<p>é™æ€èµ„æºæ˜ å°„è§„åˆ™</p>
</blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ­å»ºä¸€ä¸ªæ™®é€šçš„SpringBooté¡¹ç›®ï¼Œå›é¡¾ä¸€ä¸‹HelloWorldç¨‹åºï¼</p>
<p>å†™è¯·æ±‚éå¸¸ç®€å•ï¼Œé‚£æˆ‘ä»¬è¦å¼•å…¥æˆ‘ä»¬å‰ç«¯èµ„æºï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­æœ‰è®¸å¤šçš„é™æ€èµ„æºï¼Œæ¯”å¦‚cssï¼Œjsç­‰æ–‡ä»¶ï¼Œè¿™ä¸ªSpringBootæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<p>å¦‚æœæˆ‘ä»¬æ˜¯ä¸€ä¸ªwebåº”ç”¨ï¼Œæˆ‘ä»¬çš„mainä¸‹ä¼šæœ‰ä¸€ä¸ªwebappï¼Œæˆ‘ä»¬ä»¥å‰éƒ½æ˜¯å°†æ‰€æœ‰çš„é¡µé¢å¯¼åœ¨è¿™é‡Œé¢çš„ï¼Œå¯¹å§ï¼ä½†æ˜¯æˆ‘ä»¬ç°åœ¨çš„pomå‘¢ï¼Œæ‰“åŒ…æ–¹å¼æ˜¯ä¸ºjarçš„æ–¹å¼ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼SpringBootèƒ½ä¸èƒ½æ¥ç»™æˆ‘ä»¬å†™é¡µé¢å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯SpringBootå¯¹äºé™æ€èµ„æºæ”¾ç½®çš„ä½ç½®ï¼Œæ˜¯æœ‰è§„å®šçš„ï¼</p>
<p>æˆ‘ä»¬å…ˆæ¥èŠèŠè¿™ä¸ªé™æ€èµ„æºæ˜ å°„è§„åˆ™ï¼š</p>
<p>SpringBootä¸­ï¼ŒSpringMVCçš„webé…ç½®éƒ½åœ¨ WebMvcAutoConfiguration è¿™ä¸ªé…ç½®ç±»é‡Œé¢ï¼›</p>
<p>æˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹ WebMvcAutoConfigurationAdapter ä¸­æœ‰å¾ˆå¤šé…ç½®æ–¹æ³•ï¼›(åŒå‡»shiftå…¨å±€æœç´¢)</p>
<p>æœ‰ä¸€ä¸ªæ–¹æ³•ï¼šaddResourceHandlers æ·»åŠ èµ„æºå¤„ç†ï¼ˆctrl+fæœç´¢ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        <span class="comment">// å·²ç¦ç”¨é»˜è®¤èµ„æºå¤„ç†</span></span><br><span class="line">        logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç¼“å­˜æ§åˆ¶</span></span><br><span class="line">    <span class="type">Duration</span> <span class="variable">cachePeriod</span> <span class="operator">=</span> <span class="built_in">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line">    <span class="type">CacheControl</span> <span class="variable">cacheControl</span> <span class="operator">=</span> <span class="built_in">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br><span class="line">    <span class="comment">// webjars é…ç½®</span></span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>)</span><br><span class="line">                                             .addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>)</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é™æ€èµ„æºé…ç½®</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">staticPathPattern</span> <span class="operator">=</span> <span class="built_in">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)</span><br><span class="line">                                             .addResourceLocations(getResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations()))</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯»ä¸€ä¸‹æºä»£ç ï¼šæ¯”å¦‚æ‰€æœ‰çš„ /webjars/** ï¼Œ éƒ½éœ€è¦å» classpath:/META-INF/resources/webjars/ æ‰¾å¯¹åº”çš„èµ„æºï¼›</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯webjars å‘¢ï¼Ÿ</p>
</blockquote>
<p><strong>ç¬¬ä¸€ç§é™æ€èµ„æºæ˜ å°„è§„åˆ™</strong>ï¼šwebjarsï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</p>
<p>Webjarsæœ¬è´¨å°±æ˜¯ä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥æˆ‘ä»¬çš„é™æ€èµ„æº ï¼Œ æˆ‘ä»¬ä»¥å‰è¦å¯¼å…¥ä¸€ä¸ªé™æ€èµ„æºæ–‡ä»¶ï¼Œç›´æ¥å¯¼å…¥å³å¯ã€‚</p>
<p>ä½¿ç”¨SpringBootéœ€è¦ä½¿ç”¨Webjarsï¼Œæˆ‘ä»¬å¯ä»¥å»æœç´¢ä¸€ä¸‹ï¼š</p>
<p>ç½‘ç«™ï¼š<a href="https://www.webjars.org/">https://www.webjars.org</a></p>
<p>è¦ä½¿ç”¨jQueryï¼Œæˆ‘ä»¬åªè¦è¦å¼•å…¥jQueryå¯¹åº”ç‰ˆæœ¬çš„pomä¾èµ–å³å¯ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥å®Œæ¯•ï¼ŒæŸ¥çœ‹webjarsç›®å½•ç»“æ„ï¼Œå¹¶è®¿é—®Jquery.jsæ–‡ä»¶ï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192002833-899296809.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192002833-899296809.png" alt="img"></a></p>
<p>è®¿é—®ï¼šåªè¦æ˜¯é™æ€èµ„æºï¼ŒSpringBootå°±ä¼šå»å¯¹åº”çš„è·¯å¾„å¯»æ‰¾èµ„æºï¼Œæˆ‘ä»¬è¿™é‡Œè®¿é—®ï¼š<a href="http://localhost:8080/webjars/jquery/3.4.1/jquery.js">http://localhost:8080/webjars/jquery/3.4.1/jquery.js</a></p>
<blockquote>
<p><strong>ç¬¬äºŒç§é™æ€èµ„æºæ˜ å°„è§„åˆ™</strong>ï¼š</p>
</blockquote>
<p>é‚£æˆ‘ä»¬é¡¹ç›®ä¸­è¦æ˜¯ä½¿ç”¨è‡ªå·±çš„é™æ€èµ„æºè¯¥æ€ä¹ˆå¯¼å…¥å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸‹ä¸€è¡Œä»£ç ï¼›</p>
<p>æˆ‘ä»¬å»æ‰¾staticPathPatternå‘ç°ç¬¬äºŒç§æ˜ å°„è§„åˆ™ ï¼š/** , è®¿é—®å½“å‰çš„é¡¹ç›®ä»»æ„èµ„æºï¼Œå®ƒä¼šå»æ‰¾ resourceProperties è¿™ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹è¿›å»çœ‹ä¸€ä¸‹åˆ†æï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿›å…¥æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> String[] getStaticLocations() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.staticLocations;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°è·¯å¾„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; </span><br><span class="line">    <span class="string">&quot;classpath:/META-INF/resources/&quot;</span>,</span><br><span class="line">  <span class="string">&quot;classpath:/resources/&quot;</span>, </span><br><span class="line">    <span class="string">&quot;classpath:/static/&quot;</span>, </span><br><span class="line">    <span class="string">&quot;classpath:/public/&quot;</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ResourceProperties å¯ä»¥è®¾ç½®å’Œæˆ‘ä»¬é™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼›è¿™é‡Œé¢æŒ‡å‘äº†å®ƒä¼šå»å¯»æ‰¾èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œå³ä¸Šé¢æ•°ç»„çš„å†…å®¹ã€‚</p>
<p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œä»¥ä¸‹å››ä¸ªç›®å½•å­˜æ”¾çš„é™æ€èµ„æºå¯ä»¥è¢«æˆ‘ä»¬è¯†åˆ«ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;classpath:/META-INF/resources/&quot;</span>   <span class="comment">//webjars</span></span><br><span class="line"><span class="string">&quot;classpath:/resources/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/static/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/public/&quot;</span></span><br><span class="line"></span><br><span class="line">ä¼˜å…ˆçº§ï¼šresources&gt;<span class="keyword">static</span>(é»˜è®¤)&gt;<span class="keyword">public</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åœ¨resourcesæ ¹ç›®å½•ä¸‹æ–°å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œéƒ½å¯ä»¥å­˜æ”¾æˆ‘ä»¬çš„é™æ€æ–‡ä»¶ï¼›</p>
<p>æ¯”å¦‚æˆ‘ä»¬è®¿é—® <a href="http://localhost:8080/1.js">http://localhost:8080/1.js</a> , ä»–å°±ä¼šå»è¿™äº›æ–‡ä»¶å¤¹ä¸­å¯»æ‰¾å¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ï¼›</p>
<p>è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„(ååˆ†ä¸å»ºè®®ä½¿ç”¨)</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±é€šè¿‡é…ç½®æ–‡ä»¶æ¥æŒ‡å®šä¸€ä¸‹ï¼Œå“ªäº›æ–‡ä»¶å¤¹æ˜¯éœ€è¦æˆ‘ä»¬æ”¾é™æ€èµ„æºæ–‡ä»¶çš„ï¼Œåœ¨application.propertiesä¸­é…ç½®ï¼›</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">spring.<span class="property">resources</span>.<span class="property">static</span>-locations=<span class="attr">classpath</span>:<span class="regexp">/coding/</span>,<span class="attr">classpath</span>:<span class="regexp">/kuang/</span></span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦è‡ªå·±å®šä¹‰äº†é™æ€æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ŒåŸæ¥çš„è‡ªåŠ¨é…ç½®å°±éƒ½ä¼šå¤±æ•ˆäº†ï¼</p>
<h3 id="7-2ã€é¦–é¡µå’Œå›¾æ ‡å®šåˆ¶"><a href="#7-2ã€é¦–é¡µå’Œå›¾æ ‡å®šåˆ¶" class="headerlink" title="7.2ã€é¦–é¡µå’Œå›¾æ ‡å®šåˆ¶"></a>7.2ã€é¦–é¡µå’Œå›¾æ ‡å®šåˆ¶</h3><blockquote>
<p>é¦–é¡µ</p>
</blockquote>
<p>é™æ€èµ„æºæ–‡ä»¶å¤¹è¯´å®Œåï¼Œæˆ‘ä»¬ç»§ç»­å‘ä¸‹çœ‹æºç ï¼å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ¬¢è¿é¡µçš„æ˜ å°„ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é¦–é¡µï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">       <span class="keyword">public</span> WelcomePageHandlerMapping <span class="title function_">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext, FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> &#123;</span><br><span class="line">           <span class="type">WelcomePageHandlerMapping</span> <span class="variable">welcomePageHandlerMapping</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WelcomePageHandlerMapping</span>(<span class="keyword">new</span> <span class="title class_">TemplateAvailabilityProviders</span>(applicationContext), applicationContext, <span class="built_in">this</span>.getWelcomePage(), <span class="built_in">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">           welcomePageHandlerMapping.setInterceptors(<span class="built_in">this</span>.getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">           welcomePageHandlerMapping.setCorsConfigurations(<span class="built_in">this</span>.getCorsConfigurations());</span><br><span class="line">           <span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<p>ç‚¹è¿›å»ç»§ç»­çœ‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Optional&lt;Resource&gt; <span class="title function_">getWelcomePage</span><span class="params">()</span> &#123;</span><br><span class="line">    String[] locations = getResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">    <span class="comment">// ::æ˜¯java8 ä¸­æ–°å¼•å…¥çš„è¿ç®—ç¬¦</span></span><br><span class="line">    <span class="comment">// Class::functionçš„æ—¶å€™functionæ˜¯å±äºClassçš„ï¼Œåº”è¯¥æ˜¯é™æ€æ–¹æ³•ã€‚</span></span><br><span class="line">    <span class="comment">// this::functionçš„funtionæ˜¯å±äºè¿™ä¸ªå¯¹è±¡çš„ã€‚</span></span><br><span class="line">    <span class="comment">// ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ç§è¯­æ³•ç³–è€Œå·²ï¼Œæ˜¯ä¸€ç§ç®€å†™</span></span><br><span class="line">    <span class="keyword">return</span> Arrays.stream(locations).map(<span class="built_in">this</span>::getIndexHtml).filter(<span class="built_in">this</span>::isReadable).findFirst();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¬¢è¿é¡µå°±æ˜¯ä¸€ä¸ªlocationä¸‹çš„çš„ index.html è€Œå·²</span></span><br><span class="line"><span class="keyword">private</span> Resource <span class="title function_">getIndexHtml</span><span class="params">(String location)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.resourceLoader.getResource(location + <span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¬¢è¿é¡µï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ index.html é¡µé¢ï¼›è¢« /** æ˜ å°„ã€‚</p>
<p>æ¯”å¦‚æˆ‘è®¿é—® <a href="http://localhost:8080/">http://localhost:8080/</a> ï¼Œå°±ä¼šæ‰¾é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„ index.html</p>
<p>æ–°å»ºä¸€ä¸ª index.html ï¼Œåœ¨æˆ‘ä»¬ä¸Šé¢çš„3ä¸ªç›®å½•ä¸­ä»»æ„ä¸€ä¸ªï¼›ç„¶åè®¿é—®æµ‹è¯• <a href="http://localhost:8080/">http://localhost:8080/</a> çœ‹ç»“æœï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192059881-427879668.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192059881-427879668.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192108913-912109022.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192108913-912109022.png" alt="img"></a></p>
<blockquote>
<p><strong>å…³äºç½‘ç«™å›¾æ ‡è¯´æ˜</strong>ï¼š<br>æ³¨ï¼šå…³äºç½‘ç«™å›¾æ ‡çš„å®šåˆ¶çš„å†…å®¹ä¸åšè¯¦ç»†è¯´æ˜ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒç‹‚ç¥è€å¸ˆçš„æ–‡ç« ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
</blockquote>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192407506-566379380.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192407506-566379380.png" alt="img"></a></p>
<p>ä¸å…¶ä»–é™æ€èµ„æºä¸€æ ·ï¼ŒSpring Bootåœ¨é…ç½®çš„é™æ€å†…å®¹ä½ç½®ä¸­æŸ¥æ‰¾ favicon.icoã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„æ–‡ä»¶ï¼Œå®ƒå°†è‡ªåŠ¨ç”¨ä½œåº”ç”¨ç¨‹åºçš„faviconã€‚</p>
<p>1ã€å…³é—­SpringBooté»˜è®¤å›¾æ ‡</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å…³é—­é»˜è®¤å›¾æ ‡</span></span><br><span class="line"><span class="attr">spring.mvc.favicon.enabled</span>=<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>ã€è‡ªå·±æ”¾ä¸€ä¸ªå›¾æ ‡åœ¨é™æ€èµ„æºç›®å½•ä¸‹ï¼Œæˆ‘æ”¾åœ¨ public ç›®å½•ä¸‹</p>
<p>3ã€æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼åˆ·æ–°ç½‘é¡µï¼Œå‘ç°å›¾æ ‡å·²ç»å˜æˆè‡ªå·±çš„äº†ï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192423790-788337096.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192423790-788337096.png" alt="img"></a></p>
<h2 id="8ã€Thymeleafæ¨¡æ¿å¼•æ“"><a href="#8ã€Thymeleafæ¨¡æ¿å¼•æ“" class="headerlink" title="8ã€Thymeleafæ¨¡æ¿å¼•æ“"></a>8ã€Thymeleafæ¨¡æ¿å¼•æ“</h2><h3 id="8-1ã€æ¨¡æ¿å¼•æ“"><a href="#8-1ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="8.1ã€æ¨¡æ¿å¼•æ“"></a>8.1ã€æ¨¡æ¿å¼•æ“</h3><p>å‰ç«¯äº¤ç»™æˆ‘ä»¬çš„é¡µé¢ï¼Œæ˜¯htmlé¡µé¢ã€‚å¦‚æœæ˜¯æˆ‘ä»¬ä»¥å‰å¼€å‘ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä»–ä»¬è½¬æˆjspé¡µé¢ï¼Œjspå¥½å¤„å°±æ˜¯å½“æˆ‘ä»¬æŸ¥å‡ºä¸€äº›æ•°æ®è½¬å‘åˆ°JSPé¡µé¢ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨jspè½»æ¾å®ç°æ•°æ®çš„æ˜¾ç¤ºï¼ŒåŠäº¤äº’ç­‰ã€‚</p>
<p>jspæ”¯æŒéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬èƒ½å†™Javaä»£ç ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬ç°åœ¨çš„è¿™ç§æƒ…å†µï¼ŒSpringBootè¿™ä¸ªé¡¹ç›®é¦–å…ˆæ˜¯ä»¥jarçš„æ–¹å¼ï¼Œä¸æ˜¯warï¼Œåƒç¬¬äºŒï¼Œæˆ‘ä»¬ç”¨çš„è¿˜æ˜¯åµŒå…¥å¼çš„Tomcatï¼Œæ‰€ä»¥å‘¢ï¼Œ<strong>ä»–ç°åœ¨é»˜è®¤æ˜¯ä¸æ”¯æŒjspçš„</strong>ã€‚</p>
<p>é‚£ä¸æ”¯æŒjspï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨çº¯é™æ€é¡µé¢çš„æ–¹å¼ï¼Œé‚£ç»™æˆ‘ä»¬å¼€å‘ä¼šå¸¦æ¥éå¸¸å¤§çš„éº»çƒ¦ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p><strong>SpringBootæ¨èä½ å¯ä»¥æ¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼š</strong></p>
<p>æ¨¡æ¿å¼•æ“ï¼Œæˆ‘ä»¬å…¶å®å¤§å®¶å¬åˆ°å¾ˆå¤šï¼Œå…¶å®jspå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œè¿˜æœ‰ç”¨çš„æ¯”è¾ƒå¤šçš„freemarkerï¼ŒåŒ…æ‹¬SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafï¼Œæ¨¡æ¿å¼•æ“æœ‰éå¸¸å¤šï¼Œä½†å†å¤šçš„æ¨¡æ¿å¼•æ“ï¼Œä»–ä»¬çš„æ€æƒ³éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»€ä¹ˆæ ·ä¸€ä¸ªæ€æƒ³å‘¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192445234-1365762138.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192445234-1365762138.png" alt="img"></a></p>
<p>æ¨¡æ¿å¼•æ“çš„ä½œç”¨å°±æ˜¯æˆ‘ä»¬æ¥å†™ä¸€ä¸ªé¡µé¢æ¨¡æ¿ï¼Œæ¯”å¦‚æœ‰äº›å€¼å‘¢ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæˆ‘ä»¬å†™ä¸€äº›è¡¨è¾¾å¼ã€‚è€Œè¿™äº›å€¼ï¼Œä»å“ªæ¥å‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨åå°å°è£…ä¸€äº›æ•°æ®ã€‚ç„¶åæŠŠè¿™ä¸ªæ¨¡æ¿å’Œè¿™ä¸ªæ•°æ®äº¤ç»™æˆ‘ä»¬æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿å¼•æ“æŒ‰ç…§æˆ‘ä»¬è¿™ä¸ªæ•°æ®å¸®ä½ æŠŠè¿™è¡¨è¾¾å¼è§£æã€å¡«å……åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®æœ€ç»ˆç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬æƒ³è¦çš„å†…å®¹ç»™æˆ‘ä»¬å†™å‡ºå»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œä¸ç®¡æ˜¯jspè¿˜æ˜¯å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œéƒ½æ˜¯è¿™ä¸ªæ€æƒ³ã€‚åªä¸è¿‡å‘¢ï¼Œå°±æ˜¯è¯´ä¸åŒæ¨¡æ¿å¼•æ“ä¹‹é—´ï¼Œä»–ä»¬å¯èƒ½è¿™ä¸ªè¯­æ³•æœ‰ç‚¹ä¸ä¸€æ ·ã€‚å…¶ä»–çš„æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œæˆ‘ä¸»è¦æ¥ä»‹ç»ä¸€ä¸‹SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafæ¨¡æ¿å¼•æ“ï¼Œè¿™æ¨¡æ¿å¼•æ“å‘¢ï¼Œæ˜¯ä¸€ä¸ªé«˜çº§è¯­è¨€çš„æ¨¡æ¿å¼•æ“ï¼Œä»–çš„è¿™ä¸ªè¯­æ³•æ›´ç®€å•ã€‚è€Œä¸”å‘¢ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚</p>
<p>æˆ‘ä»¬å‘¢ï¼Œå°±æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œé‚£æ—¢ç„¶è¦çœ‹è¿™ä¸ªæ¨¡æ¿å¼•æ“ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹SpringBooté‡Œè¾¹æ€ä¹ˆç”¨ã€‚</p>
<h3 id="8-2ã€å¼•å…¥thymeleaf"><a href="#8-2ã€å¼•å…¥thymeleaf" class="headerlink" title="8.2ã€å¼•å…¥thymeleaf"></a>8.2ã€å¼•å…¥thymeleaf</h3><p>æ€ä¹ˆå¼•å…¥å‘¢ï¼Œå¯¹äºspringbootæ¥è¯´ï¼Œä»€ä¹ˆäº‹æƒ…ä¸éƒ½æ˜¯ä¸€ä¸ªstartçš„äº‹æƒ…å˜›ï¼Œæˆ‘ä»¬å»åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¸€ä¸‹ã€‚ç»™å¤§å®¶ä¸‰ä¸ªç½‘å€ï¼š</p>
<p>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></p>
<p>Thymeleaf åœ¨Github çš„ä¸»é¡µï¼š<a href="https://github.com/thymeleaf/thymeleaf">https://github.com/thymeleaf/thymeleaf</a></p>
<p>Springå®˜æ–¹æ–‡æ¡£ï¼šæ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„ç‰ˆæœ¬</p>
<p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></p>
<p>æ‰¾åˆ°å¯¹åº”çš„pomä¾èµ–ï¼šå¯ä»¥é€‚å½“ç‚¹è¿›æºç çœ‹ä¸‹æœ¬æ¥çš„åŒ…ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Mavenä¼šè‡ªåŠ¨ä¸‹è½½jaråŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å»çœ‹ä¸‹ä¸‹è½½çš„ä¸œè¥¿ï¼›</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192537589-635234354.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192537589-635234354.png" alt="img"></a></p>
<h3 id="8-3ã€Thymeleafåˆ†æ"><a href="#8-3ã€Thymeleafåˆ†æ" class="headerlink" title="8.3ã€Thymeleafåˆ†æ"></a>8.3ã€Thymeleafåˆ†æ</h3><p>æˆ‘ä»¬å·²ç»å¼•å…¥äº†Thymeleafï¼Œé‚£è¿™ä¸ªè¦æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬é¦–å…ˆå¾—æŒ‰ç…§SpringBootçš„è‡ªåŠ¨é…ç½®åŸç†çœ‹ä¸€ä¸‹æˆ‘ä»¬è¿™ä¸ªThymeleafçš„è‡ªåŠ¨é…ç½®è§„åˆ™ï¼Œåœ¨æŒ‰ç…§é‚£ä¸ªè§„åˆ™ï¼Œæˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬å»æ‰¾ä¸€ä¸‹Thymeleafçš„è‡ªåŠ¨é…ç½®ç±»ï¼šThymeleafProperties</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192547066-540947657.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192547066-540947657.png" alt="img"></a></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°é»˜è®¤çš„å‰ç¼€å’Œåç¼€ï¼</p>
<p>æˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬çš„htmlé¡µé¢æ”¾åœ¨ç±»è·¯å¾„ä¸‹çš„templatesä¸‹ï¼Œthymeleafå°±å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨æ¸²æŸ“äº†ã€‚</p>
<p>ä½¿ç”¨thymeleafä»€ä¹ˆéƒ½ä¸éœ€è¦é…ç½®ï¼Œåªéœ€è¦å°†ä»–æ”¾åœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹å³å¯ï¼</p>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<p>1ã€ç¼–å†™ä¸€ä¸ªTestController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//classpath:/templates/test.html</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™ä¸€ä¸ªæµ‹è¯•é¡µé¢ test.html æ”¾åœ¨ templates ç›®å½•ä¸‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€å¯åŠ¨é¡¹ç›®è¯·æ±‚æµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192602740-672405948.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192602740-672405948.png" alt="img"></a></p>
<h3 id="8-4ã€Thymeleaf-è¯­æ³•å­¦ä¹ "><a href="#8-4ã€Thymeleaf-è¯­æ³•å­¦ä¹ " class="headerlink" title="8.4ã€Thymeleaf è¯­æ³•å­¦ä¹ "></a>8.4ã€Thymeleaf è¯­æ³•å­¦ä¹ </h3><p>è¦å­¦ä¹ è¯­æ³•ï¼Œè¿˜æ˜¯å‚è€ƒå®˜ç½‘æ–‡æ¡£æœ€ä¸ºå‡†ç¡®ï¼Œæˆ‘ä»¬æ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬çœ‹ä¸€ä¸‹ï¼›</p>
<p>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a> ï¼Œ</p>
<blockquote>
<p>Thymeleaf è¯­æ³•</p>
</blockquote>
<p><strong>1ã€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„çš„ th:attr æ¥æ›¿æ¢Htmlä¸­åŸç”Ÿå±æ€§çš„å€¼</strong></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192618316-954666673.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192618316-954666673.png" alt="img"></a></p>
<p><strong>2ã€æˆ‘ä»¬èƒ½å†™å“ªäº›è¡¨è¾¾å¼å‘¢ï¼Ÿ</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">Simple</span> <span class="string">expressions:ï¼ˆè¡¨è¾¾å¼è¯­æ³•ï¼‰</span></span><br><span class="line"><span class="attr">Variable Expressions:</span> <span class="string">$&#123;...&#125;ï¼šè·å–å˜é‡å€¼ï¼›OGNLï¼›</span></span><br><span class="line">    <span class="number">1</span><span class="string">ï¼‰ã€è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">    <span class="number">2</span><span class="string">ï¼‰ã€ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡ï¼š#18</span></span><br><span class="line">         <span class="comment">#ctx : the context object.</span></span><br><span class="line">         <span class="comment">#vars: the context variables.</span></span><br><span class="line">         <span class="comment">#locale : the context locale.</span></span><br><span class="line">         <span class="comment">#request : (only in Web Contexts) the HttpServletRequest object.</span></span><br><span class="line">         <span class="comment">#response : (only in Web Contexts) the HttpServletResponse object.</span></span><br><span class="line">         <span class="comment">#session : (only in Web Contexts) the HttpSession object.</span></span><br><span class="line">         <span class="comment">#servletContext : (only in Web Contexts) the ServletContext object.</span></span><br><span class="line"></span><br><span class="line">    <span class="number">3</span><span class="string">ï¼‰ã€å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡ï¼š</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#execInfo : information about the template being processed.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#uris : methods for escaping parts of URLs/URIs</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#conversions : methods for executing the configured conversion service (if any).</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#dates : methods for java.util.Date objects: formatting, component extraction, etc.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#calendars : analogous to #dates , but for java.util.Calendar objects.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#numbers : methods for formatting numeric objects.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#objects : methods for objects in general.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#bools : methods for boolean evaluation.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#arrays : methods for arrays.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#lists : methods for lists.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#sets : methods for sets.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#maps : methods for maps.</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="comment">#aggregates : methods for creating aggregates on arrays or collections.</span></span><br><span class="line"><span class="string">==================================================================================</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">Selection Variable Expressions:</span> <span class="string">*&#123;...&#125;ï¼šé€‰æ‹©è¡¨è¾¾å¼ï¼šå’Œ$&#123;&#125;åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·ï¼›</span></span><br><span class="line">  <span class="attr">Message Expressions:</span> <span class="comment">#&#123;...&#125;ï¼šè·å–å›½é™…åŒ–å†…å®¹</span></span><br><span class="line">  <span class="attr">Link URL Expressions:</span> <span class="string">@&#123;...&#125;ï¼šå®šä¹‰URLï¼›</span></span><br><span class="line">  <span class="attr">Fragment Expressions:</span> <span class="string">~&#123;...&#125;ï¼šç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼</span></span><br><span class="line"></span><br><span class="line"><span class="string">Literalsï¼ˆå­—é¢é‡ï¼‰</span></span><br><span class="line">      <span class="attr">Text literals:</span> <span class="string">&#x27;one text&#x27;</span> <span class="string">,</span> <span class="string">&#x27;Another one!&#x27;</span> <span class="string">,â€¦</span></span><br><span class="line">      <span class="attr">Number literals:</span> <span class="number">0</span> <span class="string">,</span> <span class="number">34</span> <span class="string">,</span> <span class="number">3.0</span> <span class="string">,</span> <span class="number">12.3</span> <span class="string">,â€¦</span></span><br><span class="line">      <span class="attr">Boolean literals:</span> <span class="literal">true</span> <span class="string">,</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">Null literal:</span> <span class="literal">null</span></span><br><span class="line">      <span class="attr">Literal tokens:</span> <span class="string">one</span> <span class="string">,</span> <span class="string">sometext</span> <span class="string">,</span> <span class="string">main</span> <span class="string">,â€¦</span></span><br><span class="line">      </span><br><span class="line"><span class="string">Text</span> <span class="string">operations:ï¼ˆæ–‡æœ¬æ“ä½œï¼‰</span></span><br><span class="line">    <span class="attr">String concatenation:</span> <span class="string">+</span></span><br><span class="line">    <span class="attr">Literal substitutions:</span> <span class="string">|The</span> <span class="string">name</span> <span class="string">is</span> <span class="string">$&#123;name&#125;|</span></span><br><span class="line">    </span><br><span class="line"><span class="string">Arithmetic</span> <span class="string">operations:ï¼ˆæ•°å­¦è¿ç®—ï¼‰</span></span><br><span class="line">    <span class="attr">Binary operators:</span> <span class="string">+</span> <span class="string">,</span> <span class="bullet">-</span> <span class="string">,</span> <span class="string">*</span> <span class="string">,</span> <span class="string">/</span> <span class="string">,</span> <span class="string">%</span></span><br><span class="line">    <span class="string">Minus</span> <span class="string">sign</span> <span class="string">(unary</span> <span class="string">operator):</span> <span class="bullet">-</span></span><br><span class="line">    </span><br><span class="line"><span class="string">Boolean</span> <span class="string">operations:ï¼ˆå¸ƒå°”è¿ç®—ï¼‰</span></span><br><span class="line">    <span class="attr">Binary operators:</span> <span class="string">and</span> <span class="string">,</span> <span class="string">or</span></span><br><span class="line">    <span class="string">Boolean</span> <span class="string">negation</span> <span class="string">(unary</span> <span class="string">operator):</span> <span class="string">!</span> <span class="string">,</span> <span class="string">not</span></span><br><span class="line">    </span><br><span class="line"><span class="string">Comparisons</span> <span class="string">and</span> <span class="string">equality:ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰</span></span><br><span class="line">    <span class="attr">Comparators:</span> <span class="string">&gt;</span> <span class="string">,</span> <span class="string">&lt;</span> <span class="string">,</span> <span class="string">&gt;=</span> <span class="string">,</span> <span class="string">&lt;=</span> <span class="string">(</span> <span class="string">gt</span> <span class="string">,</span> <span class="string">lt</span> <span class="string">,</span> <span class="string">ge</span> <span class="string">,</span> <span class="string">le</span> <span class="string">)</span></span><br><span class="line">    <span class="attr">Equality operators:</span> <span class="string">==</span> <span class="string">,</span> <span class="type">!=</span> <span class="string">(</span> <span class="string">eq</span> <span class="string">,</span> <span class="string">ne</span> <span class="string">)</span></span><br><span class="line">    </span><br><span class="line"><span class="string">Conditional</span> <span class="string">operators:æ¡ä»¶è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰</span></span><br><span class="line">    <span class="attr">If-then:</span> <span class="string">(if)</span> <span class="string">?</span> <span class="string">(then)</span></span><br><span class="line">    <span class="attr">If-then-else:</span> <span class="string">(if)</span> <span class="string">?</span> <span class="string">(then)</span> <span class="string">:</span> <span class="string">(else)</span></span><br><span class="line">    <span class="attr">Default:</span> <span class="string">(value)</span> <span class="string">?:</span> <span class="string">(defaultvalue)</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">Special tokens:</span></span><br><span class="line">    <span class="attr">No-Operation:</span> <span class="string">_</span></span><br></pre></td></tr></table></figure>

<p>3ã€æˆ‘ä»¬è¦ä½¿ç”¨thymeleafï¼Œéœ€è¦åœ¨htmlæ–‡ä»¶ä¸­å¯¼å…¥å‘½åç©ºé—´çš„çº¦æŸ</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">xmlns:th=&quot;http://www.thymeleaf.org</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<p>controller:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(Model model)</span></span><br><span class="line">    &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&lt;h1&gt;hello,springboot&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;users&quot;</span>, Arrays.asList(<span class="string">&quot;sing&quot;</span>,<span class="string">&quot;skip&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>html:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--th:textå°±æ˜¯å°†divä¸­çš„å†…å®¹è®¾ç½®ä¸ºå®ƒæŒ‡å®šçš„å€¼ï¼Œå’Œä¹‹å‰å­¦ä¹ çš„Vueä¸€æ ·--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ‰€æœ‰çš„HTMLå…ƒç´ éƒ½å¯ä»¥è¢«thymeleafæ›¿æ¢æ¥ç®¡ï¼š  th:å…ƒç´ å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:utext</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">th:each</span>=<span class="string">&quot;user:$&#123;users&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192640840-212875403.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192640840-212875403.png" alt="img"></a></p>
<h2 id="9ã€SpringMVCè‡ªåŠ¨é…ç½®åŸç†"><a href="#9ã€SpringMVCè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="9ã€SpringMVCè‡ªåŠ¨é…ç½®åŸç†"></a>9ã€SpringMVCè‡ªåŠ¨é…ç½®åŸç†</h2><h3 id="9-1ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#9-1ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="9.1ã€è‡ªåŠ¨é…ç½®åŸç†"></a>9.1ã€è‡ªåŠ¨é…ç½®åŸç†</h3><p>åœ¨è¿›è¡Œé¡¹ç›®ç¼–å†™å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯SpringBootå¯¹æˆ‘ä»¬çš„SpringMVCè¿˜åšäº†å“ªäº›é…ç½®ï¼ŒåŒ…æ‹¬å¦‚ä½•æ‰©å±•ï¼Œå¦‚ä½•å®šåˆ¶ã€‚</p>
<p>åªæœ‰æŠŠè¿™äº›éƒ½ææ¸…æ¥šäº†ï¼Œæˆ‘ä»¬åœ¨ä¹‹åä½¿ç”¨æ‰ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p>
<ul>
<li>é€”å¾„ä¸€ï¼šæºç åˆ†æ</li>
<li>é€”å¾„äºŒï¼š<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration">å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Spring MVC Auto-configuration</span><br><span class="line"><span class="comment">// Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸€èµ·å·¥ä½œã€‚</span></span><br><span class="line">Spring Boot provides auto-configuration <span class="keyword">for</span> Spring MVC that works well with most applications.</span><br><span class="line"><span class="comment">// è‡ªåŠ¨é…ç½®åœ¨Springé»˜è®¤è®¾ç½®çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</span></span><br><span class="line">The auto-configuration adds the following features on top of Springâ€™s defaults:</span><br><span class="line"><span class="comment">// åŒ…å«è§†å›¾è§£æå™¨</span></span><br><span class="line">Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.</span><br><span class="line"><span class="comment">// æ”¯æŒé™æ€èµ„æºæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œä»¥åŠwebjars</span></span><br><span class="line">Support <span class="keyword">for</span> serving <span class="keyword">static</span> resources, including support <span class="keyword">for</span> WebJars </span><br><span class="line"><span class="comment">// è‡ªåŠ¨æ³¨å†Œäº†Converterï¼š</span></span><br><span class="line"><span class="comment">// è½¬æ¢å™¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç½‘é¡µæäº¤æ•°æ®åˆ°åå°è‡ªåŠ¨å°è£…æˆä¸ºå¯¹è±¡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æŠŠ&quot;1&quot;å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºintç±»å‹</span></span><br><span class="line"><span class="comment">// Formatterï¼šã€æ ¼å¼åŒ–å™¨ï¼Œæ¯”å¦‚é¡µé¢ç»™æˆ‘ä»¬äº†ä¸€ä¸ª2019-8-10ï¼Œå®ƒä¼šç»™æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºDateå¯¹è±¡ã€‘</span></span><br><span class="line">Automatic registration of Converter, GenericConverter, and Formatter beans.</span><br><span class="line"><span class="comment">// HttpMessageConverters</span></span><br><span class="line"><span class="comment">// SpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠä¸€ä¸ªUserå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥å»çœ‹å®˜ç½‘æ–‡æ¡£è§£é‡Šï¼›</span></span><br><span class="line">Support <span class="keyword">for</span> <span class="title function_">HttpMessageConverters</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"><span class="comment">// å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™çš„</span></span><br><span class="line">Automatic registration of <span class="title function_">MessageCodesResolver</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"><span class="comment">// é¦–é¡µå®šåˆ¶</span></span><br><span class="line">Static index.html support.</span><br><span class="line"><span class="comment">// å›¾æ ‡å®šåˆ¶</span></span><br><span class="line">Custom Favicon <span class="title function_">support</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–æ•°æ®ç»‘å®šå™¨ï¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸­ï¼</span></span><br><span class="line">Automatic use of a ConfigurableWebBindingInitializer <span class="title function_">bean</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å¦‚æœæ‚¨å¸Œæœ›ä¿ç•™Spring Boot MVCåŠŸèƒ½ï¼Œå¹¶ä¸”å¸Œæœ›æ·»åŠ å…¶ä»–MVCé…ç½®ï¼ˆæ‹¦æˆªå™¨ã€æ ¼å¼åŒ–ç¨‹åºã€è§†å›¾æ§åˆ¶å™¨å’Œå…¶ä»–åŠŸèƒ½ï¼‰ï¼Œåˆ™å¯ä»¥æ·»åŠ è‡ªå·±</span></span><br><span class="line"><span class="comment">çš„@configurationç±»ï¼Œç±»å‹ä¸ºwebmvcconfiguerï¼Œä½†ä¸æ·»åŠ @EnableWebMvcã€‚å¦‚æœå¸Œæœ›æä¾›</span></span><br><span class="line"><span class="comment">RequestMappingHandlerMappingã€RequestMappingHandlerAdapteræˆ–ExceptionHandlerExceptionResolverçš„è‡ªå®šä¹‰</span></span><br><span class="line"><span class="comment">å®ä¾‹ï¼Œåˆ™å¯ä»¥å£°æ˜WebMVCregistrationAdapterå®ä¾‹æ¥æä¾›æ­¤ç±»ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">If you want to keep Spring Boot MVC features and you want to add additional MVC <span class="title function_">configuration</span> </span><br><span class="line"><span class="params">(interceptors, formatters, view controllers, and other features)</span>, you can add your own </span><br><span class="line"><span class="meta">@Configuration</span> <span class="keyword">class</span> <span class="title class_">of</span> type WebMvcConfigurer but without <span class="meta">@EnableWebMvc</span>. If you wish to provide </span><br><span class="line">custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or </span><br><span class="line">ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ‚¨æƒ³å®Œå…¨æ§åˆ¶Spring MVCï¼Œå¯ä»¥æ·»åŠ è‡ªå·±çš„@Configurationï¼Œå¹¶ç”¨@EnableWebMvcè¿›è¡Œæ³¨é‡Šã€‚</span></span><br><span class="line">If you want to take complete control of Spring MVC, you can add your own <span class="meta">@Configuration</span> annotated with <span class="meta">@EnableWebMvc</span>.</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥ä»”ç»†å¯¹ç…§ï¼Œçœ‹ä¸€ä¸‹å®ƒæ€ä¹ˆå®ç°çš„ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬SpringBootå·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†SpringMVCï¼Œç„¶åè‡ªåŠ¨é…ç½®äº†å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ</p>
<blockquote>
<p>ContentNegotiatingViewResolver å†…å®¹åå•†è§†å›¾è§£æå™¨</p>
</blockquote>
<p>è‡ªåŠ¨é…ç½®äº†ViewResolverï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„SpringMVCçš„è§†å›¾è§£æå™¨ï¼›</p>
<p>å³æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å–å¾—è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œç„¶åç”±è§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Œé‡å®šå‘ï¼‰ã€‚</p>
<p>æˆ‘ä»¬å»çœ‹çœ‹è¿™é‡Œçš„æºç ï¼šæˆ‘ä»¬æ‰¾åˆ° WebMvcAutoConfiguration ï¼Œ ç„¶åæœç´¢ContentNegotiatingViewResolverã€‚æ‰¾åˆ°å¦‚ä¸‹æ–¹æ³•ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(ViewResolver.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;viewResolver&quot;, value = ContentNegotiatingViewResolver.class)</span></span><br><span class="line"><span class="keyword">public</span> ContentNegotiatingViewResolver <span class="title function_">viewResolver</span><span class="params">(BeanFactory beanFactory)</span> &#123;</span><br><span class="line">    <span class="type">ContentNegotiatingViewResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentNegotiatingViewResolver</span>();</span><br><span class="line">    resolver.setContentNegotiationManager(beanFactory.getBean(ContentNegotiationManager.class));</span><br><span class="line">    <span class="comment">// ContentNegotiatingViewResolverä½¿ç”¨æ‰€æœ‰å…¶ä»–è§†å›¾è§£æå™¨æ¥å®šä½è§†å›¾ï¼Œå› æ­¤å®ƒåº”è¯¥å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§</span></span><br><span class="line">    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);</span><br><span class="line">    <span class="keyword">return</span> resolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ç‚¹è¿›è¿™ç±»çœ‹çœ‹ï¼æ‰¾åˆ°å¯¹åº”çš„è§£æè§†å›¾çš„ä»£ç ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Nullable</span> <span class="comment">// æ³¨è§£è¯´æ˜ï¼š@Nullable å³å‚æ•°å¯ä¸ºnull</span></span><br><span class="line"><span class="keyword">public</span> View <span class="title function_">resolveViewName</span><span class="params">(String viewName, Locale locale)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">RequestAttributes</span> <span class="variable">attrs</span> <span class="operator">=</span> RequestContextHolder.getRequestAttributes();</span><br><span class="line">    Assert.state(attrs <span class="keyword">instanceof</span> ServletRequestAttributes, <span class="string">&quot;No current ServletRequestAttributes&quot;</span>);</span><br><span class="line">    List&lt;MediaType&gt; requestedMediaTypes = <span class="built_in">this</span>.getMediaTypes(((ServletRequestAttributes)attrs).getRequest());</span><br><span class="line">    <span class="keyword">if</span> (requestedMediaTypes != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// è·å–å€™é€‰çš„è§†å›¾å¯¹è±¡</span></span><br><span class="line">        List&lt;View&gt; candidateViews = <span class="built_in">this</span>.getCandidateViews(viewName, locale, requestedMediaTypes);</span><br><span class="line">        <span class="comment">// é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆçš„è§†å›¾å¯¹è±¡ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡è¿”å›</span></span><br><span class="line">        <span class="type">View</span> <span class="variable">bestView</span> <span class="operator">=</span> <span class="built_in">this</span>.getBestView(candidateViews, requestedMediaTypes, attrs);</span><br><span class="line">        <span class="keyword">if</span> (bestView != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> bestView;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// .....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç»§ç»­ç‚¹è¿›å»çœ‹ï¼Œä»–æ˜¯æ€ä¹ˆè·å¾—å€™é€‰çš„è§†å›¾çš„å‘¢ï¼Ÿ</p>
<p>getCandidateViewsä¸­çœ‹åˆ°ä»–æ˜¯æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ‹¿æ¥ï¼Œè¿›è¡Œwhileå¾ªç¯ï¼ŒæŒ¨ä¸ªè§£æï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Iterator</span> <span class="variable">var5</span> <span class="operator">=</span> <span class="built_in">this</span>.viewResolvers.iterator();</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼š<strong>ContentNegotiatingViewResolver è¿™ä¸ªè§†å›¾è§£æå™¨å°±æ˜¯ç”¨æ¥ç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„</strong></p>
<p>æˆ‘ä»¬å†å»ç ”ç©¶ä¸‹ä»–çš„ç»„åˆé€»è¾‘ï¼Œçœ‹åˆ°æœ‰ä¸ªå±æ€§viewResolversï¼Œçœ‹çœ‹å®ƒæ˜¯åœ¨å“ªé‡Œè¿›è¡Œèµ‹å€¼çš„ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">initServletContext</span><span class="params">(ServletContext servletContext)</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå®ƒæ˜¯ä»beanFactoryå·¥å…·ä¸­è·å–å®¹å™¨ä¸­çš„æ‰€æœ‰è§†å›¾è§£æå™¨</span></span><br><span class="line">    <span class="comment">// ViewRescolver.class æŠŠæ‰€æœ‰çš„è§†å›¾è§£æå™¨æ¥ç»„åˆçš„</span></span><br><span class="line">    Collection&lt;ViewResolver&gt; matchingBeans = BeanFactoryUtils.beansOfTypeIncludingAncestors(<span class="built_in">this</span>.obtainApplicationContext(), ViewResolver.class).values();</span><br><span class="line">    ViewResolver viewResolver;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.viewResolvers == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.viewResolvers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(matchingBeans.size());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...............</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶å®ƒæ˜¯åœ¨å®¹å™¨ä¸­å»æ‰¾è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥çŒœæƒ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»å®ç°ä¸€ä¸ªè§†å›¾è§£æå™¨äº†å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­å»æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è¿™ä¸ªç±»å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨çš„å°†å®ƒç»„åˆè¿›æ¥ï¼›<strong>æˆ‘ä»¬å»å®ç°ä¸€ä¸‹</strong></p>
<p>1ã€æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ä¸»ç¨‹åºä¸­å»å†™ä¸€ä¸ªè§†å›¾è§£æå™¨æ¥è¯•è¯•ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">//æ”¾åˆ°beanä¸­</span></span><br><span class="line"><span class="keyword">public</span> ViewResolver <span class="title function_">myViewResolver</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyViewResolver</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘ä»¬å†™ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œè§†å›¾è§£æå™¨å°±éœ€è¦å®ç°ViewResolveræ¥å£</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyViewResolver</span> <span class="keyword">implements</span> <span class="title class_">ViewResolver</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">resolveViewName</span><span class="params">(String s, Locale locale)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€æ€ä¹ˆçœ‹æˆ‘ä»¬è‡ªå·±å†™çš„è§†å›¾è§£æå™¨æœ‰æ²¡æœ‰èµ·ä½œç”¨å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ç»™ DispatcherServlet ä¸­çš„ doDispatchæ–¹æ³• åŠ ä¸ªæ–­ç‚¹è¿›è¡Œè°ƒè¯•ä¸€ä¸‹ï¼Œå› ä¸ºæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•ä¸­</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192726033-21488961.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192726033-21488961.png" alt="img"></a></p>
<p>3ã€æˆ‘ä»¬å¯åŠ¨æˆ‘ä»¬çš„é¡¹ç›®ï¼Œç„¶åéšä¾¿è®¿é—®ä¸€ä¸ªé¡µé¢ï¼Œçœ‹ä¸€ä¸‹Debugä¿¡æ¯ï¼›</p>
<p>æ‰¾åˆ°this</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192737061-1533467169.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192737061-1533467169.png" alt="img"></a></p>
<p>æ‰¾åˆ°è§†å›¾è§£æå™¨ï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å°±åœ¨è¿™é‡Œäº†</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192747687-125300374.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192747687-125300374.png" alt="img"></a></p>
<p>æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦ä½¿ç”¨è‡ªå·±å®šåˆ¶åŒ–çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å®¹å™¨ä¸­æ·»åŠ è¿™ä¸ªç»„ä»¶å°±å¥½äº†ï¼å‰©ä¸‹çš„äº‹æƒ…SpringBootå°±ä¼šå¸®æˆ‘ä»¬åšäº†ï¼</p>
<h3 id="9-2ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"><a href="#9-2ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨" class="headerlink" title="9.2ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨"></a>9.2ã€è½¬æ¢å™¨å’Œæ ¼å¼åŒ–å™¨</h3><p>æ‰¾åˆ°æ ¼å¼åŒ–è½¬æ¢å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> FormattingConversionService <span class="title function_">mvcConversionService</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// æ‹¿åˆ°é…ç½®æ–‡ä»¶ä¸­çš„æ ¼å¼åŒ–è§„åˆ™</span></span><br><span class="line">    <span class="type">WebConversionService</span> <span class="variable">conversionService</span> <span class="operator">=</span> </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">WebConversionService</span>(<span class="built_in">this</span>.mvcProperties.getDateFormat());</span><br><span class="line">    addFormatters(conversionService);</span><br><span class="line">    <span class="keyword">return</span> conversionService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç‚¹è¿›å»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getDateFormat</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.dateFormat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Date format to use. For instance, `dd/MM/yyyy`. é»˜è®¤çš„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String dateFormat;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬çš„Propertiesæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªåŠ¨é…ç½®å®ƒï¼</p>
<p>å¦‚æœé…ç½®äº†è‡ªå·±çš„æ ¼å¼åŒ–æ–¹å¼ï¼Œå°±ä¼šæ³¨å†Œåˆ°Beanä¸­ç”Ÿæ•ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192803361-1680155620.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192803361-1680155620.png" alt="img"></a></p>
<h3 id="9-3ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"><a href="#9-3ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®" class="headerlink" title="9.3ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"></a>9.3ã€ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®</h3><p>è¿™ä¹ˆå¤šçš„è‡ªåŠ¨é…ç½®ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡è¿™ä¸ªWebMVCçš„è‡ªåŠ¨é…ç½®åŸç†åˆ†æï¼Œæˆ‘ä»¬è¦å­¦ä¼šä¸€ç§å­¦ä¹ æ–¹å¼ï¼Œé€šè¿‡æºç æ¢ç©¶ï¼Œå¾—å‡ºç»“è®ºï¼›è¿™ä¸ªç»“è®ºä¸€å®šæ˜¯å±äºè‡ªå·±çš„ï¼Œè€Œä¸”ä¸€é€šç™¾é€šã€‚</p>
<p>SpringBootçš„åº•å±‚ï¼Œå¤§é‡ç”¨åˆ°äº†è¿™äº›è®¾è®¡ç»†èŠ‚æ€æƒ³ï¼Œæ‰€ä»¥ï¼Œæ²¡äº‹éœ€è¦å¤šé˜…è¯»æºç ï¼å¾—å‡ºç»“è®ºï¼›</p>
<p>SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆå¦‚æœç”¨æˆ·è‡ªå·±é…ç½®@beanï¼‰ï¼Œå¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰å°±ç”¨è‡ªåŠ¨é…ç½®çš„ï¼›</p>
<p>å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œæ¯”å¦‚æˆ‘ä»¬çš„è§†å›¾è§£æå™¨ï¼Œå°±å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼</p>
<p><strong>æ‰©å±•ä½¿ç”¨SpringMVC</strong> å®˜æ–¹æ–‡æ¡£å¦‚ä¸‹ï¼š</p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">If</span> you want to <span class="meta">keep</span> Spring Boot MVC features <span class="keyword">and</span> you want to <span class="keyword">add</span> additional MVC configuration (interceptors, formatters, view controllers, <span class="keyword">and</span> other features), you can <span class="keyword">add</span> your own <span class="comment">@Configuration class of type WebMvcConfigurer but without @EnableWebMvc. If you wish to provide custom instances of RequestMappingHandlerMapping, RequestMappingHandlerAdapter, or ExceptionHandlerExceptionResolver, you can declare a WebMvcRegistrationsAdapter instance to provide such components.</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç¼–å†™ä¸€ä¸ª@Configurationæ³¨è§£ç±»ï¼Œå¹¶ä¸”ç±»å‹è¦ä¸ºWebMvcConfigurerï¼Œè¿˜ä¸èƒ½æ ‡æ³¨@EnableWebMvcæ³¨è§£ï¼›æˆ‘ä»¬å»è‡ªå·±å†™ä¸€ä¸ªï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåŒ…å«configï¼Œå†™ä¸€ä¸ªç±»MyMvcConfigï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœæˆ‘ä»¬è¦æ‰©å±•springmvcå®˜æ–¹å»ºè®®æˆ‘ä»¬åƒä¸‹é¢è¿™æ ·åš</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åº”ä¸ºç±»å‹è¦æ±‚ä¸ºWebMvcConfigurerï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°å…¶æ¥å£</span></span><br><span class="line"><span class="comment">//å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»æ‰©å±•MVCçš„åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//è§†å›¾è·³è½¬</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// æµè§ˆå™¨å‘é€/qjd ï¼Œ å°±ä¼šè·³è½¬åˆ°testé¡µé¢ï¼›</span></span><br><span class="line">        registry.addViewController(<span class="string">&quot;/qjd&quot;</span>).setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å»æµè§ˆå™¨è®¿é—®ä¸€ä¸‹ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192827184-696902886.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192827184-696902886.png" alt="img"></a></p>
<p><strong>ç¡®å®ä¹Ÿè·³è½¬è¿‡æ¥äº†ï¼æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬è¦æ‰©å±•SpringMVCï¼Œå®˜æ–¹å°±æ¨èæˆ‘ä»¬è¿™ä¹ˆå»ä½¿ç”¨ï¼Œæ—¢ä¿SpringBootç•™æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼</strong></p>
<blockquote>
<p>åŸç†åˆ†æ</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥å»åˆ†æä¸€ä¸‹åŸç†ï¼š</p>
<p>1ã€WebMvcAutoConfiguration æ˜¯ SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç±»WebMvcAutoConfigurationAdapter</p>
<p>2ã€è¿™ä¸ªç±»ä¸Šæœ‰ä¸€ä¸ªæ³¨è§£ï¼Œåœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼š@Import(EnableWebMvcConfiguration.class)</p>
<p>3ã€æˆ‘ä»¬ç‚¹è¿›EnableWebMvcConfigurationè¿™ä¸ªç±»çœ‹ä¸€ä¸‹ï¼Œå®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±»ï¼šDelegatingWebMvcConfiguration</p>
<p>è¿™ä¸ªçˆ¶ç±»ä¸­æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">WebMvcConfigurerComposite</span> <span class="variable">configurers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurerComposite</span>();</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„webmvcConfigurer</span></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line">            <span class="built_in">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­å»å¯»æ‰¾ä¸€ä¸ªæˆ‘ä»¬åˆšæ‰è®¾ç½®çš„viewControllerå½“åšå‚è€ƒï¼Œå‘ç°å®ƒè°ƒç”¨äº†ä¸€ä¸ª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.configurers.addViewControllers(registry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æˆ‘ä»¬ç‚¹è¿›å»çœ‹ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var2</span> <span class="operator">=</span> <span class="built_in">this</span>.delegates.iterator();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®æ¥ä¸€èµ·è°ƒç”¨ï¼åŒ…æ‹¬æˆ‘ä»¬è‡ªå·±é…ç½®çš„å’ŒSpringç»™æˆ‘ä»¬é…ç½®çš„</span></span><br><span class="line">        <span class="type">WebMvcConfigurer</span> <span class="variable">delegate</span> <span class="operator">=</span> (WebMvcConfigurer)var2.next();</span><br><span class="line">        delegate.addViewControllers(registry);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å¾—å‡ºç»“è®ºï¼šæ‰€æœ‰çš„WebMvcConfigurationéƒ½ä¼šè¢«ä½œç”¨ï¼Œä¸æ­¢Springè‡ªå·±çš„é…ç½®ç±»ï¼Œæˆ‘ä»¬è‡ªå·±çš„é…ç½®ç±»å½“ç„¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</p>
<h3 id="9-4ã€å…¨é¢æ¥ç®¡SpringMVC"><a href="#9-4ã€å…¨é¢æ¥ç®¡SpringMVC" class="headerlink" title="9.4ã€å…¨é¢æ¥ç®¡SpringMVC"></a>9.4ã€å…¨é¢æ¥ç®¡SpringMVC</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">If you want <span class="keyword">to</span> take complete control <span class="keyword">of</span> Spring MVC</span><br><span class="line">you can <span class="keyword">add</span> your own <span class="variable">@Configuration</span> annotated <span class="keyword">with</span> <span class="variable">@EnableWebMvc</span>.</span><br></pre></td></tr></table></figure>

<p>å…¨é¢æ¥ç®¡å³ï¼šSpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å»é…ç½®ï¼</p>
<p>åªéœ€åœ¨æˆ‘ä»¬çš„é…ç½®ç±»ä¸­è¦åŠ ä¸€ä¸ª@EnableWebMvcã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸‹å¦‚æœæˆ‘ä»¬å…¨é¢æ¥ç®¡äº†SpringMVCäº†ï¼Œæˆ‘ä»¬ä¹‹å‰SpringBootç»™æˆ‘ä»¬é…ç½®çš„é™æ€èµ„æºæ˜ å°„ä¸€å®šä¼šæ— æ•ˆï¼Œæˆ‘ä»¬å¯ä»¥å»æµ‹è¯•ä¸€ä¸‹ï¼›</p>
<p>ä¸åŠ æ³¨è§£ä¹‹å‰ï¼Œè®¿é—®é¦–é¡µï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192852458-426544274.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192852458-426544274.png" alt="img"></a></p>
<p>ç»™é…ç½®ç±»åŠ ä¸Šæ³¨è§£ï¼š@EnableWebMvc</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192901267-1684264125.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916192901267-1684264125.png" alt="img"></a></p>
<p>æˆ‘ä»¬å‘ç°æ‰€æœ‰çš„SpringMVCè‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†ï¼å›å½’åˆ°äº†æœ€åˆçš„æ ·å­ï¼›</p>
<p><strong>å½“ç„¶ï¼Œæˆ‘ä»¬å¼€å‘ä¸­ï¼Œä¸æ¨èä½¿ç”¨å…¨é¢æ¥ç®¡SpringMVC</strong></p>
<p>æ€è€ƒé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆåŠ äº†ä¸€ä¸ªæ³¨è§£ï¼Œè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</p>
<p>1ã€è¿™é‡Œå‘ç°å®ƒæ˜¯å¯¼å…¥äº†ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­è¿›å»çœ‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;DelegatingWebMvcConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableWebMvc &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å®ƒç»§æ‰¿äº†ä¸€ä¸ªçˆ¶ç±» WebMvcConfigurationSupport</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">  <span class="comment">// ......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹Webmvcè‡ªåŠ¨é…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªæ³¨è§£çš„æ„æ€å°±æ˜¯ï¼šå®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">    ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ä¸€å¥è¯ï¼š@EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥äº†ï¼›</p>
<p>è€Œå¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼</p>
<p><strong>åœ¨SpringBootä¸­ä¼šæœ‰éå¸¸å¤šxxxxConfigurationçš„æ‰©å±•é…ç½®ï¼Œåªè¦çœ‹è§äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±åº”è¯¥å¤šç•™å¿ƒæ³¨æ„ï¼ï¼ï¼</strong></p>
<p>åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªå‘˜å·¥ç®¡ç†ç³»ç»Ÿçš„æ­å»ºï¼Œè¯¦ç»†å†…å®¹å¤§å®¶å¯ä»¥çœ‹è¿™ç¯‡åšå®¢<a href="https://blog.csdn.net/qq_45173404/article/details/108934414?ops_request_misc=%7B%22request_id%22:%22166216219016780357213825%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=166216219016780357213825&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-108934414-null-null.142%5Ev46%5Epc_rank_34_default_23&utm_term=springboot%E7%8B%82%E7%A5%9E&spm=1018.2226.3001.4187">ç‹‚ç¥Spring Boot å‘˜å·¥ç®¡ç†ç³»ç»Ÿ è¶…è¯¦ç»†å®Œæ•´å®ç°æ•™ç¨‹ï¼ˆå°ç™½è½»æ¾ä¸Šæ‰‹~ï¼‰</a></p>
<blockquote>
<p>èŠä¸€èŠæ€ä¹ˆå†™ä¸€ä¸ªç½‘é¡µ</p>
</blockquote>
<p>å‰ç«¯å¿…é¡»ä½¿ç”¨æ¨èæ¨¡æ¿ï¼šåˆ«äººå†™å¥½çš„ï¼Œæˆ‘ä»¬æ‹¿æ¥æ”¹æˆè‡ªå·±éœ€è¦çš„<br>æ¡†æ¶ï¼šç»„ä»¶ï¼šéœ€è¦è‡ªå·±æ‰‹åŠ¨ç»„åˆæ‹¼æ¥ layuiï¼Œelementui</p>
<ul>
<li>æ …æ ¼ç³»ç»Ÿ</li>
<li>å¯¼èˆªæ </li>
<li>ä¾§è¾¹æ </li>
</ul>
<p>1.å‰ç«¯æå®šï¼šé¡µé¢é•¿ä»€ä¹ˆæ ·å­ï¼šæ•°æ®</p>
<p>2.è®¾è®¡æ•°æ®åº“</p>
<p>3.å‰ç«¯è®©ä»–èƒ½å¤Ÿè‡ªåŠ¨è¿è¡Œï¼Œç‹¬ç«‹åŒ–å·¥ç¨‹</p>
<p>4.æ•°æ®æ¥å£å¦‚ä½•å¯¹æ¥ï¼Œjsonï¼Œå¯¹è±¡all in one</p>
<p>5.å‰åç«¯è”è°ƒæµ‹è¯•</p>
<p>åå°æ¡†æ¶ï¼šxadmin</p>
<p>å‰ç«¯ç•Œé¢ï¼šè‡³å°‘è‡ªå·±èƒ½å¤Ÿé€šè¿‡å‰ç«¯æ¡†æ¶ï¼Œç»„åˆå‡ºæ¥ä¸€ä¸ªç½‘ç«™é¡µé¢</p>
<p>æ³¨æ„èµ„æºå¯¼å‡ºé—®é¢˜ï¼š</p>
<p>åœ¨buildæ ‡ç­¾ä¸‹æ·»åŠ ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.*<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.*<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="10ã€Springbootæ•´åˆæ•°æ®åº“æ“ä½œ"><a href="#10ã€Springbootæ•´åˆæ•°æ®åº“æ“ä½œ" class="headerlink" title="10ã€Springbootæ•´åˆæ•°æ®åº“æ“ä½œ"></a>10ã€Springbootæ•´åˆæ•°æ®åº“æ“ä½œ</h2><h3 id="10-1ã€æ•´åˆJDBC"><a href="#10-1ã€æ•´åˆJDBC" class="headerlink" title="10.1ã€æ•´åˆJDBC"></a>10.1ã€æ•´åˆJDBC</h3><h4 id="10-1-1ã€SpringDataç®€ä»‹"><a href="#10-1-1ã€SpringDataç®€ä»‹" class="headerlink" title="10.1.1ã€SpringDataç®€ä»‹"></a>10.1.1ã€SpringDataç®€ä»‹</h4><ul>
<li>å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯ SQL(å…³ç³»å‹æ•°æ®åº“) è¿˜æ˜¯ NOSQL(éå…³ç³»å‹æ•°æ®åº“)ï¼ŒSpring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</li>
<li>Spring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†å„ç§æ•°æ®åº“ï¼ŒSpring Data ä¹Ÿæ˜¯ Spring ä¸­ä¸ Spring Bootã€Spring Cloud ç­‰é½åçš„çŸ¥åé¡¹ç›®ã€‚</li>
<li>Sping Data å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-data">https://spring.io/projects/spring-data</a></li>
<li>æ•°æ®åº“ç›¸å…³çš„å¯åŠ¨å™¨ ï¼šå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></li>
</ul>
<h4 id="10-1-2ã€æ•´åˆJDBC"><a href="#10-1-2ã€æ•´åˆJDBC" class="headerlink" title="10.1.2ã€æ•´åˆJDBC"></a>10.1.2ã€æ•´åˆJDBC</h4><p>åˆ›å»ºæµ‹è¯•é¡¹ç›®æµ‹è¯•æ•°æ®æº</p>
<p>1ã€æ–°å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•ï¼šspringbootâ€“04-data ; å¼•å…¥ç›¸åº”çš„æ¨¡å—ï¼<code>jdbc</code>å’Œ<code>mysqlé©±åŠ¨</code></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193034960-944585649.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193034960-944585649.png" alt="img"></a></p>
<p>2ã€é¡¹ç›®å»ºå¥½ä¹‹åï¼Œå‘ç°è‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥äº†å¦‚ä¸‹çš„å¯åŠ¨å™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--jdbc--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™yamlé…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“ï¼›</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">&quot;*********&quot;</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„è¿™é‡Œå¯†ç è¦ç”¨åŒå¼•å·ä¸ç„¶ä¼šæŠ¥é”™java.sql.SQLException: Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (using password: #YES)</p>
<p>å¦‚æœä½¿ç”¨propertiesæ–‡ä»¶å°±ä¸éœ€è¦åŠ åŒå¼•å·</p>
</blockquote>
<p>4ã€é…ç½®å®Œè¿™ä¸€äº›ä¸œè¥¿åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å»ä½¿ç”¨äº†ï¼Œå› ä¸ºSpringBootå·²ç»é»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†è‡ªåŠ¨é…ç½®ï¼›å»æµ‹è¯•ç±»æµ‹è¯•ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot04DataApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="comment">//æŸ¥çœ‹é»˜è®¤æ•°æ®æº</span></span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å¾—æ•°æ®åº“è¿æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line"></span><br><span class="line">        System.out.println(connection);</span><br><span class="line"></span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193123161-1206491353.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193123161-1206491353.png" alt="img"></a></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–é»˜è®¤ç»™æˆ‘ä»¬é…ç½®çš„æ•°æ®æºä¸º : class com.zaxxer.hikari.HikariDataSource ï¼Œ æˆ‘ä»¬å¹¶æ²¡æœ‰æ‰‹åŠ¨é…ç½®</p>
<p>æˆ‘ä»¬æ¥å…¨å±€æœç´¢ä¸€ä¸‹ï¼Œæ‰¾åˆ°æ•°æ®æºçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½åœ¨ ï¼šDataSourceAutoConfigurationæ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(</span></span><br><span class="line"><span class="meta">    &#123;Hikari.class, Tomcat.class, Dbcp2.class, Generic.class, DataSourceJmxConfiguration.class&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PooledDataSourceConfiguration</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">PooledDataSourceConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯¼å…¥çš„ç±»éƒ½åœ¨ DataSourceConfiguration é…ç½®ç±»ä¸‹ï¼Œå¯ä»¥çœ‹å‡º Spring Boot 2.2.5 é»˜è®¤ä½¿ç”¨HikariDataSource æ•°æ®æºï¼Œè€Œä»¥å‰ç‰ˆæœ¬ï¼Œå¦‚ Spring Boot 1.5 é»˜è®¤ä½¿ç”¨ org.apache.tomcat.jdbc.pool.DataSource ä½œä¸ºæ•°æ®æºï¼›</p>
<p>HikariDataSource å·ç§° Java WEB å½“å‰é€Ÿåº¦æœ€å¿«çš„æ•°æ®æºï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„ C3P0 ã€DBCPã€Tomcat jdbc ç­‰è¿æ¥æ± æ›´åŠ ä¼˜ç§€ï¼›</p>
<p>å¯ä»¥ä½¿ç”¨ spring.datasource.type æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼Œå€¼ä¸º è¦ä½¿ç”¨çš„è¿æ¥æ± å®ç°çš„å®Œå…¨é™å®šåã€‚</p>
<p>å…³äºæ•°æ®æºæˆ‘ä»¬å¹¶ä¸åšä»‹ç»ï¼Œæœ‰äº†æ•°æ®åº“è¿æ¥ï¼Œæ˜¾ç„¶å°±å¯ä»¥ CRUD æ“ä½œæ•°æ®åº“äº†ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸ªå¯¹è±¡ JdbcTemplate</p>
<h4 id="10-1-3ã€JDBCTemplate"><a href="#10-1-3ã€JDBCTemplate" class="headerlink" title="10.1.3ã€JDBCTemplate"></a>10.1.3ã€JDBCTemplate</h4><p>1ã€æœ‰äº†æ•°æ®æº(com.zaxxer.hikari.HikariDataSource)ï¼Œç„¶åå¯ä»¥æ‹¿åˆ°æ•°æ®åº“è¿æ¥(java.sql.Connection)ï¼Œæœ‰äº†è¿æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„ JDBC è¯­å¥æ¥æ“ä½œæ•°æ®åº“ï¼›</p>
<p>2ã€å³ä½¿ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¬¬æ•°æ®åº“æ“ä½œæ¡†æ¶ï¼Œå¦‚ MyBatisç­‰ï¼ŒSpring æœ¬èº«ä¹Ÿå¯¹åŸç”Ÿçš„JDBC åšäº†è½»é‡çº§çš„å°è£…ï¼Œå³JdbcTemplateã€‚</p>
<p>3ã€æ•°æ®åº“æ“ä½œçš„æ‰€æœ‰ CRUD æ–¹æ³•éƒ½åœ¨ JdbcTemplate ä¸­ã€‚</p>
<p>4ã€Spring Boot ä¸ä»…æä¾›äº†é»˜è®¤çš„æ•°æ®æºï¼ŒåŒæ—¶é»˜è®¤å·²ç»é…ç½®å¥½äº† JdbcTemplate æ”¾åœ¨äº†å®¹å™¨ä¸­ï¼Œç¨‹åºå‘˜åªéœ€è‡ªå·±æ³¨å…¥å³å¯ä½¿ç”¨</p>
<p>5ã€JdbcTemplate çš„è‡ªåŠ¨é…ç½®æ˜¯ä¾èµ– org.springframework.boot.autoconfigure.jdbc åŒ…ä¸‹çš„ JdbcTemplateConfiguration ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">    proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;DataSource.class, JdbcTemplate.class&#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnSingleCandidate(DataSource.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123;DataSourceAutoConfiguration.class&#125;)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;JdbcProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@Import(&#123;DatabaseInitializationDependencyConfigurer.class, JdbcTemplateConfiguration.class, NamedParameterJdbcTemplateConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcTemplateAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JdbcTemplateAutoConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>JdbcTemplateä¸»è¦æä¾›ä»¥ä¸‹å‡ ç±»æ–¹æ³•ï¼š</p>
</blockquote>
<ul>
<li>executeæ–¹æ³•ï¼šå¯ä»¥ç”¨äºæ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒDDLè¯­å¥ï¼›</li>
<li>updateæ–¹æ³•åŠbatchUpdateæ–¹æ³•ï¼šupdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰è¯­å¥ï¼›batchUpdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ‰¹å¤„ç†ç›¸å…³è¯­å¥ï¼›</li>
<li>queryæ–¹æ³•åŠqueryForXXXæ–¹æ³•ï¼šç”¨äºæ‰§è¡ŒæŸ¥è¯¢ç›¸å…³è¯­å¥ï¼›</li>
<li>callæ–¹æ³•ï¼šç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç›¸å…³è¯­å¥ã€‚</li>
</ul>
<h4 id="10-1-4ã€æµ‹è¯•"><a href="#10-1-4ã€æµ‹è¯•" class="headerlink" title="10.1.4ã€æµ‹è¯•"></a>10.1.4ã€æµ‹è¯•</h4><p>ç¼–å†™ä¸€ä¸ªControllerï¼Œæ³¨å…¥ jdbcTemplateï¼Œè¿è¡ŒSpringboot04DataApplication</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@RestControllerè®©æ‰€æœ‰çš„æ–¹æ³•è¿”å›æ˜¯å­—ç¬¦ä¸²çš„å½¢å¼</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ•°æ®åº“çš„æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//æ²¡æœ‰å®ä½“ç±»ï¼Œæ•°æ®åº“ä¸­çš„ä¸œè¥¿ï¼Œæ€ä¹ˆè·å–ï¼Ÿ   ä¸‡èƒ½çš„Map</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/userList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">userList</span><span class="params">()</span>&#123;</span><br><span class="line">        String sql=<span class="string">&quot;select * from mybatis.user&quot;</span>;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list_maps = jdbcTemplate.queryForList(sql);</span><br><span class="line">        <span class="keyword">return</span> list_maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/updateUser/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update mybatis.user set name=?,pwd=? where id=&quot;</span>+id;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…</span></span><br><span class="line">        Object[] objects = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">2</span>];</span><br><span class="line">        objects[<span class="number">0</span>] = <span class="string">&quot;å°æ˜2&quot;</span>;</span><br><span class="line">        objects[<span class="number">1</span>] = <span class="string">&quot;768402&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,objects);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;updateUser-ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/addUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into mybatis.user(id,name,pwd) values(12,&#x27;å°æ˜&#x27;,&#x27;123456&#x27;)&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;addUser-ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/deleteUser/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span><span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from mybatis.user where id=?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;deleteUser&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¿é—®<a href="http://localhost:8080/userList%E7%9C%8B%E5%88%B0%E5%8F%AF%E4%BB%A5%E5%8F%96%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE">http://localhost:8080/userListçœ‹åˆ°å¯ä»¥å–å‡ºæ•°æ®åº“ä¸­çš„æ•°æ®</a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193204448-1695910421.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193204448-1695910421.png" alt="img"></a></p>
<h3 id="10-2ã€æ•´åˆDruidæ•°æ®æº"><a href="#10-2ã€æ•´åˆDruidæ•°æ®æº" class="headerlink" title="10.2ã€æ•´åˆDruidæ•°æ®æº"></a>10.2ã€æ•´åˆDruidæ•°æ®æº</h3><h4 id="10-2-1ã€Druidç®€ä»‹"><a href="#10-2-1ã€Druidç®€ä»‹" class="headerlink" title="10.2.1ã€Druidç®€ä»‹"></a>10.2.1ã€Druidç®€ä»‹</h4><ul>
<li>Javaç¨‹åºå¾ˆå¤§ä¸€éƒ¨åˆ†è¦æ“ä½œæ•°æ®åº“ï¼Œä¸ºäº†æé«˜æ€§èƒ½æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œåˆä¸å¾—ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚</li>
<li>Druid æ˜¯é˜¿é‡Œå·´å·´å¼€æºå¹³å°ä¸Šä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± å®ç°ï¼Œç»“åˆäº† C3P0ã€DBCP ç­‰ DB æ± çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ã€‚</li>
<li>Druid å¯ä»¥å¾ˆå¥½çš„ç›‘æ§ DB æ± è¿æ¥å’Œ SQL çš„æ‰§è¡Œæƒ…å†µï¼Œå¤©ç”Ÿå°±æ˜¯é’ˆå¯¹ç›‘æ§è€Œç”Ÿçš„ DB è¿æ¥æ± ã€‚</li>
<li>Druidå·²ç»åœ¨é˜¿é‡Œå·´å·´éƒ¨ç½²äº†è¶…è¿‡600ä¸ªåº”ç”¨ï¼Œç»è¿‡ä¸€å¹´å¤šç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡éƒ¨ç½²çš„ä¸¥è‹›è€ƒéªŒã€‚</li>
</ul>
<p>Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ Hikari æ•°æ®æºï¼Œå¯ä»¥è¯´ Hikari ä¸ Driud éƒ½æ˜¯å½“å‰ Java Web ä¸Šæœ€ä¼˜ç§€çš„æ•°æ®æºï¼Œæˆ‘ä»¬æ¥é‡ç‚¹ä»‹ç» Spring Boot å¦‚ä½•é›†æˆ Druid æ•°æ®æºï¼Œå¦‚ä½•å®ç°æ•°æ®åº“ç›‘æ§ã€‚</p>
<p>Githubåœ°å€ï¼š<a href="https://github.com/alibaba/druid/">https://github.com/alibaba/druid/</a></p>
<p>com.alibaba.druid.pool.DruidDataSource åŸºæœ¬é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</p>
<h4 id="10-2-2ã€é…ç½®æ•°æ®æº"><a href="#10-2-2ã€é…ç½®æ•°æ®æº" class="headerlink" title="10.2.2ã€é…ç½®æ•°æ®æº"></a>10.2.2ã€é…ç½®æ•°æ®æº</h4><p>1ã€æ·»åŠ ä¸Š Druid æ•°æ®æºä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€åˆ‡æ¢æ•°æ®æºï¼›ä¹‹å‰å·²ç»è¯´è¿‡ Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ com.zaxxer.hikari.HikariDataSource æ•°æ®æºï¼Œä½†å¯ä»¥ é€šè¿‡ spring.datasource.type æŒ‡å®šæ•°æ®æºã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">&quot;qjd011212&quot;</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></table></figure>

<p>3ã€æ•°æ®æºåˆ‡æ¢ä¹‹åï¼Œåœ¨æµ‹è¯•ç±»ä¸­æ³¨å…¥ DataSourceï¼Œç„¶åè·å–åˆ°å®ƒï¼Œè¾“å‡ºä¸€çœ‹ä¾¿çŸ¥æ˜¯å¦æˆåŠŸåˆ‡æ¢ï¼›<br><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193228073-1893299686.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193228073-1893299686.png" alt="img"></a></p>
<p>4ã€åˆ‡æ¢æˆåŠŸï¼æ—¢ç„¶åˆ‡æ¢æˆåŠŸï¼Œå°±å¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•° ç­‰è®¾ç½®é¡¹ï¼›å¯ä»¥æŸ¥çœ‹æºç </p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span></span><br><span class="line">    <span class="comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span></span><br><span class="line">    <span class="comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span></span><br><span class="line">    <span class="comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>

<p>è¿™äº›é…ç½®æ˜¯æ ¸å¿ƒï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193243927-335561517.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193243927-335561517.png" alt="img"></a></p>
<p>5ã€çœ‹åˆ°éœ€è¦ç”¨åˆ°log4jï¼Œæ‰€ä»¥éœ€è¦åœ¨pomä¸­å¯¼å…¥log4jçš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>6ã€ç°åœ¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±ä¸º DruidDataSource ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œå†æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œè€Œä¸å†ä½¿ç”¨ Spring Boot çš„è‡ªåŠ¨ç”Ÿæˆäº†ï¼›æˆ‘ä»¬éœ€è¦ è‡ªå·±æ·»åŠ  DruidDataSource ç»„ä»¶åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ç»‘å®šå±æ€§ï¼ˆè‡ªå®šä¹‰é…ç½®ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       å°†è‡ªå®šä¹‰çš„ Druidæ•°æ®æºæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¸å†è®© Spring Boot è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment">       ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„ druid æ•°æ®æºå±æ€§åˆ° com.alibaba.druid.pool.DruidDataSourceä»è€Œè®©å®ƒä»¬ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">       @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)ï¼šä½œç”¨å°±æ˜¯å°† å…¨å±€é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment">       å‰ç¼€ä¸º spring.datasourceçš„å±æ€§å€¼æ³¨å…¥åˆ° com.alibaba.druid.pool.DruidDataSource çš„åŒåå‚æ•°ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">druidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7ã€å»æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ï¼›çœ‹æ˜¯å¦æˆåŠŸï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//DIæ³¨å…¥æ•°æ®æº</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">DataSource dataSource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="comment">//çœ‹ä¸€ä¸‹é»˜è®¤æ•°æ®æº</span></span><br><span class="line">    System.out.println(dataSource.getClass());</span><br><span class="line">    <span class="comment">//è·å¾—è¿æ¥</span></span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span>   dataSource.getConnection();</span><br><span class="line">    System.out.println(connection);</span><br><span class="line"></span><br><span class="line">    <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> (DruidDataSource) dataSource;</span><br><span class="line">    System.out.println(<span class="string">&quot;druidDataSource æ•°æ®æºæœ€å¤§è¿æ¥æ•°ï¼š&quot;</span> + druidDataSource.getMaxActive());</span><br><span class="line">    System.out.println(<span class="string">&quot;druidDataSource æ•°æ®æºåˆå§‹åŒ–è¿æ¥æ•°ï¼š&quot;</span> + druidDataSource.getInitialSize());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193258948-288448488.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193258948-288448488.png" alt="img"></a></p>
<h4 id="10-2-3ã€é…ç½®Druidæ•°æ®æºç›‘æ§"><a href="#10-2-3ã€é…ç½®Druidæ•°æ®æºç›‘æ§" class="headerlink" title="10.2.3ã€é…ç½®Druidæ•°æ®æºç›‘æ§"></a>10.2.3ã€é…ç½®Druidæ•°æ®æºç›‘æ§</h4><p>æ–°å»ºconfigåŒ…ï¼Œåœ¨configåŒ…ä¸‹æ–°å»ºDruidConfigç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       å°†è‡ªå®šä¹‰çš„ Druidæ•°æ®æºæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œä¸å†è®© Spring Boot è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment">       ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„ druid æ•°æ®æºå±æ€§åˆ° com.alibaba.druid.pool.DruidDataSourceä»è€Œè®©å®ƒä»¬ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">       @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)ï¼šä½œç”¨å°±æ˜¯å°† å…¨å±€é…ç½®æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment">       å‰ç¼€ä¸º spring.datasourceçš„å±æ€§å€¼æ³¨å…¥åˆ° com.alibaba.druid.pool.DruidDataSource çš„åŒåå‚æ•°ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><span class="comment">//ç»‘å®šymlæ–‡ä»¶</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">druidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½® Druid ç›‘æ§ç®¡ç†åå°çš„Servletï¼›</span></span><br><span class="line">    <span class="comment">//å†…ç½® Servlet å®¹å™¨æ—¶æ²¡æœ‰web.xmlæ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ Spring Boot çš„æ³¨å†Œ Servlet æ–¹å¼</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ServletRegistrationBean <span class="title function_">statViewServlet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ServletRegistrationBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletRegistrationBean</span>(<span class="keyword">new</span> <span class="title class_">StatViewServlet</span>(), <span class="string">&quot;/druid/*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿™äº›å‚æ•°å¯ä»¥åœ¨ com.alibaba.druid.support.http.StatViewServlet</span></span><br><span class="line">        <span class="comment">// çš„çˆ¶ç±» com.alibaba.druid.support.http.ResourceServlet ä¸­æ‰¾åˆ°</span></span><br><span class="line">        Map&lt;String, String&gt; initParams = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        initParams.put(<span class="string">&quot;loginUsername&quot;</span>, <span class="string">&quot;admin&quot;</span>); <span class="comment">//åå°ç®¡ç†ç•Œé¢çš„ç™»å½•è´¦å·</span></span><br><span class="line">        initParams.put(<span class="string">&quot;loginPassword&quot;</span>, <span class="string">&quot;123456&quot;</span>); <span class="comment">//åå°ç®¡ç†ç•Œé¢çš„ç™»å½•å¯†ç </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åå°å…è®¸è°å¯ä»¥è®¿é—®</span></span><br><span class="line">        <span class="comment">//initParams.put(&quot;allow&quot;, &quot;localhost&quot;)ï¼šè¡¨ç¤ºåªæœ‰æœ¬æœºå¯ä»¥è®¿é—®</span></span><br><span class="line">        <span class="comment">//initParams.put(&quot;allow&quot;, &quot;&quot;)ï¼šä¸ºç©ºæˆ–è€…ä¸ºnullæ—¶ï¼Œè¡¨ç¤ºå…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">        initParams.put(<span class="string">&quot;allow&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//denyï¼šDruid åå°æ‹’ç»è°è®¿é—®</span></span><br><span class="line">        <span class="comment">//initParams.put(&quot;kuangshen&quot;, &quot;192.168.1.20&quot;);è¡¨ç¤ºç¦æ­¢æ­¤ipè®¿é—®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        bean.setInitParameters(initParams);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨Springboot04DataApplicationè®¿é—®<a href="http://localhost:8080/druid/login.html">http://localhost:8080/druid/login.html</a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193314862-674990146.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193314862-674990146.png" alt="img"></a></p>
<p>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›å…¥DruidMonitor</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193322721-1579238383.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193322721-1579238383.png" alt="img"></a></p>
<p>åœ¨è®¿é—®<a href="http://localhost:8080/userList">http://localhost:8080/userList</a> åï¼š(è‡ªåŠ¨ç›‘æ§)</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193332844-295447855.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193332844-295447855.png" alt="img"></a></p>
<h4 id="10-2-4ã€é…ç½®-Druid-web-ç›‘æ§-filter-è¿‡æ»¤å™¨"><a href="#10-2-4ã€é…ç½®-Druid-web-ç›‘æ§-filter-è¿‡æ»¤å™¨" class="headerlink" title="10.2.4ã€é…ç½® Druid web ç›‘æ§ filter è¿‡æ»¤å™¨"></a>10.2.4ã€é…ç½® Druid web ç›‘æ§ filter è¿‡æ»¤å™¨</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½® Druid ç›‘æ§ ä¹‹  web ç›‘æ§çš„ filter</span></span><br><span class="line"><span class="comment">//WebStatFilterï¼šç”¨äºé…ç½®Webå’ŒDruidæ•°æ®æºä¹‹é—´çš„ç®¡ç†å…³è”ç›‘æ§ç»Ÿè®¡</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> FilterRegistrationBean <span class="title function_">webStatFilter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">FilterRegistrationBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterRegistrationBean</span>();</span><br><span class="line">    bean.setFilter(<span class="keyword">new</span> <span class="title class_">WebStatFilter</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//exclusionsï¼šè®¾ç½®å“ªäº›è¯·æ±‚è¿›è¡Œè¿‡æ»¤æ’é™¤æ‰ï¼Œä»è€Œä¸è¿›è¡Œç»Ÿè®¡</span></span><br><span class="line">    Map&lt;String, String&gt; initParams = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    initParams.put(<span class="string">&quot;exclusions&quot;</span>, <span class="string">&quot;*.js,*.css,/druid/*,/jdbc/*&quot;</span>);</span><br><span class="line">    bean.setInitParameters(initParams);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&quot;/*&quot; è¡¨ç¤ºè¿‡æ»¤æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">    bean.setUrlPatterns(Arrays.asList(<span class="string">&quot;/*&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ç‚¹ï¼šDruidConfigæ–‡ä»¶ä¸€å®šè¦æ·»åŠ é…ç½®æ³¨è§£ï¼Œåœ¨é‡Œé¢é…ç½®çš„ä¸€äº›servletå’Œfilteréƒ½è¦æ·»åŠ @Beanæ³¨è§£</p>
</blockquote>
<h2 id="11ã€Springbootæ•´åˆMybatis"><a href="#11ã€Springbootæ•´åˆMybatis" class="headerlink" title="11ã€Springbootæ•´åˆMybatis"></a>11ã€Springbootæ•´åˆMybatis</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></p>
<p>Mavenä»“åº“åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1">https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1</a></p>
<h3 id="11-1ã€å‡†å¤‡é˜¶æ®µ"><a href="#11-1ã€å‡†å¤‡é˜¶æ®µ" class="headerlink" title="11.1ã€å‡†å¤‡é˜¶æ®µ"></a>11.1ã€å‡†å¤‡é˜¶æ®µ</h3><p>1ã€æ–°å»ºspringboot-05-mybatisé¡¹ç›®ï¼Œé€‰æ‹©webä¾èµ–å’Œjdbcä¾èµ–ï¼ˆå®˜æ–¹ï¼‰ï¼Œå¯¼å…¥mybatisä¾èµ–ï¼ˆè‡ªå·±å¯¼å…¥ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®æ•°æ®åº“ä¿¡æ¯</p>
<blockquote>
<p>application.properties</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">qjd011212</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br></pre></td></tr></table></figure>

<p>3ã€è¿›å…¥æµ‹è¯•ç±»Springboot05MybatisApplicationTestsè¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot05MybatisApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼šæµ‹è¯•æˆåŠŸï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¼€å§‹æ•´åˆmybatis</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193353941-116334473.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193353941-116334473.png" alt="img"></a></p>
<h3 id="11-2ã€æ•´åˆmybatis"><a href="#11-2ã€æ•´åˆmybatis" class="headerlink" title="11.2ã€æ•´åˆmybatis"></a>11.2ã€æ•´åˆmybatis</h3><p>1ã€ç¼–å†™å®ä½“ç±»</p>
<p>ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬å¯¼å…¥lombok</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿æ¥æ•°æ®åº“å¹¶ç¼–å†™å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™mapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸ªæ³¨è§£è¡¨ç¤ºäº†è¿™æ˜¯ä¸€ä¸ªmybatisçš„mapperç±»ï¼›Dao</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">queryUserList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">queryUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€åœ¨resourceç›®å½•ä¸‹å»ºç«‹mybatis.mapperç›®å½•ç¼–å†™mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.qjd.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span> &gt;</span></span><br><span class="line">        select * from mybatis.user where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.user(id, name, pwd) VALUES (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        update mybatis.user set name = #&#123;name&#125;,pwd = #&#123;pwd&#125; where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from mybatis.user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€åœ¨application.propertiesä¸­æ•´åˆ</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">*********</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ•´åˆmybatis</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.qjd.pojo</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<p>5ã€ç¼–å†™controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/queryUserList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">queryUserList</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; userList = userMapper.queryUserList();</span><br><span class="line">        <span class="keyword">for</span> (User user:userList)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/deleteUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteUser</span><span class="params">()</span>&#123;</span><br><span class="line">        userMapper.deleteUser(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€è®¿é—®<a href="http://localhost:8080/queryUserList">http://localhost:8080/queryUserList</a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193425445-1188865350.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193425445-1188865350.png" alt="img"></a></p>
<h3 id="11-3ã€å°ç»“"><a href="#11-3ã€å°ç»“" class="headerlink" title="11.3ã€å°ç»“"></a>11.3ã€å°ç»“</h3><ol>
<li>å¯¼å…¥åŒ…</li>
<li>é…ç½®æ–‡ä»¶</li>
<li>mybatisé…ç½®</li>
<li>ç¼–å†™sql</li>
<li>ä¸šåŠ¡å±‚è°ƒç”¨daoå±‚</li>
<li>controllerå±‚è°ƒç”¨serviceå±‚</li>
</ol>
<blockquote>
<p>M V Cç†è§£ï¼š</p>
</blockquote>
<p>M:æ•°æ®å’Œä¸šåŠ¡</p>
<p>Vï¼šäº¤æ¥</p>
<p>Cï¼šhtml</p>
<h2 id="12ã€SpringSecurityï¼ˆå®‰å…¨ï¼‰"><a href="#12ã€SpringSecurityï¼ˆå®‰å…¨ï¼‰" class="headerlink" title="12ã€SpringSecurityï¼ˆå®‰å…¨ï¼‰"></a>12ã€SpringSecurityï¼ˆå®‰å…¨ï¼‰</h2><p>åœ¨webå¼€å‘ä¸­ï¼Œå®‰å…¨ç¬¬ä¸€ä½ï¼ï¼</p>
<p>ä¸€ä¸ªå®‰å…¨çš„æ¡†æ¶ï¼Œå…¶å®é€šè¿‡è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ä¹Ÿå¯ä»¥å®ç°ï¼Œè€Œä¸”ç”¨è¯¥åœ¨è®¾è®¡ä¹‹å¤„å°±è€ƒè™‘</p>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹å®ƒçš„å®˜ç½‘ä»‹ç»ï¼š</p>
<p>Spring Securityå®˜ç½‘åœ°å€</p>
<p>Spring Security is a powerful and highly customizable authentication and access-control framework. It is the de-facto standard for securing Spring-based applications.</p>
<p>Spring Security is a framework that focuses on providing both authentication and authorization to Java applications. Like all Spring projects, the real power of Spring Security is found in how easily it can be extended to meet custom requirements</p>
<p>Spring Securityæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¿æŠ¤åŸºäºspringçš„åº”ç”¨ç¨‹åºçš„æ ‡å‡†ã€‚</p>
<p>Spring Securityæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¾§é‡äºä¸ºJavaåº”ç”¨ç¨‹åºæä¾›èº«ä»½éªŒè¯å’Œæˆæƒã€‚ä¸æ‰€æœ‰Springé¡¹ç›®ä¸€æ ·ï¼ŒSpringå®‰å…¨æ€§çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥è½»æ¾åœ°æ‰©å±•ä»¥æ»¡è¶³å®šåˆ¶éœ€æ±‚</p>
<p>åœ¨ç”¨æˆ·è®¤è¯æ–¹é¢ï¼ŒSpring Security æ¡†æ¶æ”¯æŒä¸»æµçš„è®¤è¯æ–¹å¼ï¼ŒåŒ…æ‹¬ HTTP åŸºæœ¬è®¤è¯ã€HTTP è¡¨å•éªŒè¯ã€HTTP æ‘˜è¦è®¤è¯ã€OpenID å’Œ LDAP ç­‰ã€‚åœ¨ç”¨æˆ·æˆæƒæ–¹é¢ï¼ŒSpring Security æä¾›äº†åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶å’Œè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆAccess Control Listï¼ŒACLï¼‰ï¼Œå¯ä»¥å¯¹åº”ç”¨ä¸­çš„é¢†åŸŸå¯¹è±¡è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ã€‚</p>
<h3 id="12-1ã€è®¤è¯†SpringSecurity"><a href="#12-1ã€è®¤è¯†SpringSecurity" class="headerlink" title="12.1ã€è®¤è¯†SpringSecurity"></a>12.1ã€è®¤è¯†SpringSecurity</h3><p>Spring Security æ˜¯é’ˆå¯¹Springé¡¹ç›®çš„å®‰å…¨æ¡†æ¶ï¼Œä¹Ÿæ˜¯Spring Bootåº•å±‚å®‰å…¨æ¨¡å—é»˜è®¤çš„æŠ€æœ¯é€‰å‹ï¼Œä»–å¯ä»¥å®ç°å¼ºå¤§çš„Webå®‰å…¨æ§åˆ¶ï¼Œå¯¹äºå®‰å…¨æ§åˆ¶ï¼Œæˆ‘ä»¬ä»…éœ€è¦å¼•å…¥ spring-boot-starter-security æ¨¡å—ï¼Œè¿›è¡Œå°‘é‡çš„é…ç½®ï¼Œå³å¯å®ç°å¼ºå¤§çš„å®‰å…¨ç®¡ç†ï¼</p>
<p>è®°ä½å‡ ä¸ªç±»ï¼š</p>
<p><strong>WebSecurityConfigurerAdapterï¼šè‡ªå®šä¹‰Securityç­–ç•¥</strong><br><strong>AuthenticationManagerBuilderï¼šè‡ªå®šä¹‰è®¤è¯ç­–ç•¥</strong><br><strong>@EnableWebSecurityï¼šå¼€å¯WebSecurityæ¨¡å¼</strong><br><strong>Spring Securityçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯ â€œè®¤è¯â€ å’Œ â€œæˆæƒâ€ï¼ˆè®¿é—®æ§åˆ¶ï¼‰ã€‚</strong></p>
<ul>
<li>â€œè®¤è¯â€ï¼ˆAuthenticationï¼‰</li>
</ul>
<p>èº«ä»½éªŒè¯æ˜¯å…³äºéªŒè¯æ‚¨çš„å‡­æ®ï¼Œå¦‚ç”¨æˆ·å/ç”¨æˆ·IDå’Œå¯†ç ï¼Œä»¥éªŒè¯æ‚¨çš„èº«ä»½ã€‚</p>
<p>èº«ä»½éªŒè¯é€šå¸¸é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å®Œæˆï¼Œæœ‰æ—¶ä¸èº«ä»½éªŒè¯å› ç´ ç»“åˆä½¿ç”¨ã€‚</p>
<ul>
<li>â€œæˆæƒâ€ ï¼ˆAuthorizationï¼‰</li>
</ul>
<p>æˆæƒå‘ç”Ÿåœ¨ç³»ç»ŸæˆåŠŸéªŒè¯æ‚¨çš„èº«ä»½åï¼Œæœ€ç»ˆä¼šæˆäºˆæ‚¨è®¿é—®èµ„æºï¼ˆå¦‚ä¿¡æ¯ï¼Œæ–‡ä»¶ï¼Œæ•°æ®åº“ï¼Œèµ„é‡‘ï¼Œä½ç½®ï¼Œå‡ ä¹ä»»ä½•å†…å®¹ï¼‰çš„å®Œå…¨æƒé™ã€‚</p>
<p>è¿™ä¸ªæ¦‚å¿µæ˜¯é€šç”¨çš„ï¼Œè€Œä¸æ˜¯åªåœ¨Spring Security ä¸­å­˜åœ¨ã€‚</p>
<h3 id="12-2ã€ç¯å¢ƒæ­å»º"><a href="#12-2ã€ç¯å¢ƒæ­å»º" class="headerlink" title="12.2ã€ç¯å¢ƒæ­å»º"></a>12.2ã€ç¯å¢ƒæ­å»º</h3><p>æ–°å»ºspringboot-06-securityé¡¹ç›®ï¼Œé€‰æ‹©webä¾èµ–</p>
<p>1ã€å¯¼å…¥thmeleafæ¨¡æ¿å¼•æ“</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-java8time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€å¯¼å…¥é™æ€èµ„æº</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193502880-1004770432.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193502880-1004770432.png" alt="img"></a></p>
<p>3ã€ç¼–å†™controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RouterController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/&quot;,&quot;/index.html&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/level1/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">level1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span><span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/level1/&quot;</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/level2/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">level2</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span><span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/level2/&quot;</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/level3/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">level3</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span><span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/level3/&quot;</span>+id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€å¯åŠ¨æµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193525922-634316142.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193525922-634316142.png" alt="img"></a></p>
<p>5ã€ç¯å¢ƒæ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥å¯ä»¥å¼€å§‹ç”¨æˆ·è®¤è¯å’Œæˆæƒçš„ç¼–å†™</p>
<h3 id="12-3ã€ç”¨æˆ·è®¤è¯å’Œæˆæƒ"><a href="#12-3ã€ç”¨æˆ·è®¤è¯å’Œæˆæƒ" class="headerlink" title="12.3ã€ç”¨æˆ·è®¤è¯å’Œæˆæƒ"></a>12.3ã€ç”¨æˆ·è®¤è¯å’Œæˆæƒ</h3><p>1ã€å¯¼å…¥SpringSecurityä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringSecurity --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€æ–°å»ºconfigåŒ…ç¼–å†™SecurityConfig</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//AOP</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//é¦–é¡µæ‰€æœ‰äººå¯ä»¥è®¿é—®ï¼ŒåŠŸèƒ½é¡µåªæœ‰æœ‰æƒé™çš„äººæ‰èƒ½è®¿é—®</span></span><br><span class="line">        <span class="comment">//è¯·æ±‚æˆæƒçš„è§„åˆ™</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level1/**&quot;</span>).hasRole(<span class="string">&quot;vip1&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level2/**&quot;</span>).hasRole(<span class="string">&quot;vip2&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level3/**&quot;</span>).hasRole(<span class="string">&quot;vip3&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€å¯åŠ¨æµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193539948-1152959620.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193539948-1152959620.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193548593-907778376.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193548593-907778376.png" alt="img"></a></p>
<p>4ã€å®Œå–„SecurityConfig</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//é¦–é¡µæ‰€æœ‰äººå¯ä»¥è®¿é—®ï¼ŒåŠŸèƒ½é¡µåªæœ‰æœ‰æƒé™çš„äººæ‰èƒ½è®¿é—®</span></span><br><span class="line">        <span class="comment">//è¯·æ±‚æˆæƒçš„è§„åˆ™</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level1/**&quot;</span>).hasRole(<span class="string">&quot;vip1&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level2/**&quot;</span>).hasRole(<span class="string">&quot;vip2&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level3/**&quot;</span>).hasRole(<span class="string">&quot;vip3&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ²¡æœ‰æƒé™é»˜è®¤ä¼šåˆ°ç™»å½•é¡µé¢ï¼Œéœ€è¦å¼€å¯ç™»å½•çš„é¡µé¢</span></span><br><span class="line">        http.formLogin();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€ç°åœ¨æˆ‘ä»¬è®¿é—®æ²¡æœ‰æƒé™çš„é¡µé¢å°±ä¼šè·³è½¬åˆ°loginé¡µé¢</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193600134-1418233359.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193600134-1418233359.png" alt="img"></a></p>
<p>6ã€ç»§ç»­åœ¨é…ç½®ç±»ä¸­ç¼–å†™è®¤è¯åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¤è¯</span></span><br><span class="line"><span class="comment">//Spring security 5.0ä¸­æ–°å¢äº†å¤šç§åŠ å¯†æ–¹å¼ï¼Œä¹Ÿæ”¹å˜äº†å¯†ç çš„æ ¼å¼ã€‚</span></span><br><span class="line"><span class="comment">//è¦æƒ³æˆ‘ä»¬çš„é¡¹ç›®è¿˜èƒ½å¤Ÿæ­£å¸¸ç™»é™†ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹configureä¸­çš„ä»£ç ã€‚æˆ‘ä»¬è¦å°†å‰ç«¯ä¼ è¿‡æ¥çš„å¯†ç è¿›è¡ŒæŸç§æ–¹å¼åŠ å¯†</span></span><br><span class="line"><span class="comment">//spring security å®˜æ–¹æ¨èçš„æ˜¯ä½¿ç”¨bcryptåŠ å¯†æ–¹å¼ã€‚</span></span><br><span class="line"><span class="comment">//ä¸åŠ å¯†ä¼šä¿é”™</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//auth.jdbcAuthentication()å¯ä»¥ä»æ•°æ®åº“ä¸­è®¤è¯ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ²¡æœ‰è¿æ¥æ•°æ®åº“æ‰€ä»¥ä¸é‡‡ç”¨è¿™ç§æ–¹æ³•</span></span><br><span class="line">    auth.inMemoryAuthentication().passwordEncoder(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>())<span class="comment">//ä»å†…å­˜ä¸­è™šæ‹Ÿæ•°æ®å†è®¤è¯</span></span><br><span class="line">            .withUser(<span class="string">&quot;iKun&quot;</span>).password(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip2&quot;</span>,<span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">            .and()</span><br><span class="line">            .withUser(<span class="string">&quot;root&quot;</span>).password(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip1&quot;</span>,<span class="string">&quot;vip2&quot;</span>,<span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">            .and()</span><br><span class="line">            .withUser(<span class="string">&quot;guest&quot;</span>).password(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip1&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7ã€è®¿é—®æµ‹è¯•</p>
<p>iKunï¼šåªèƒ½è®¿é—®vip2å’Œvip3</p>
<p>rootï¼šå…¨éƒ¨èƒ½è®¿é—®</p>
<p>guestï¼šåªèƒ½è®¿é—®vip1</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193612141-1950030861.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193612141-1950030861.png" alt="img"></a></p>
<h3 id="12-4ã€æ³¨é”€å’Œæƒé™æ§åˆ¶"><a href="#12-4ã€æ³¨é”€å’Œæƒé™æ§åˆ¶" class="headerlink" title="12.4ã€æ³¨é”€å’Œæƒé™æ§åˆ¶"></a>12.4ã€æ³¨é”€å’Œæƒé™æ§åˆ¶</h3><blockquote>
<p>æ³¨é”€</p>
</blockquote>
<p>1ã€å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">// /logout æ³¨é”€è¯·æ±‚</span></span><br><span class="line">http.logout();</span><br></pre></td></tr></table></figure>

<p>2ã€æˆ‘ä»¬åœ¨å‰ç«¯ï¼Œå¢åŠ ä¸€ä¸ªæ³¨é”€çš„æŒ‰é’®ï¼Œindex.html å¯¼èˆªæ ä¸­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨é”€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/logout&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;sign-out icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ³¨é”€</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193640079-129289759.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193640079-129289759.png" alt="img"></a></p>
<p>3ã€æˆ‘ä»¬å¯ä»¥å»æµ‹è¯•ä¸€ä¸‹ï¼Œç™»å½•æˆåŠŸåç‚¹å‡»æ³¨é”€ï¼Œå‘ç°æ³¨é”€å®Œæ¯•ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193649776-1978660359.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193649776-1978660359.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193657514-1191941512.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193657514-1191941512.png" alt="img"></a></p>
<p>4ã€ä½†æ˜¯ï¼Œæˆ‘ä»¬æƒ³è®©ä»–æ³¨é”€æˆåŠŸåï¼Œä¾æ—§å¯ä»¥è·³è½¬åˆ°é¦–é¡µï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//æ³¨é”€ä¹‹åè·³åˆ°é¦–é¡µè¿˜å¯ä»¥http.logout().deleteCookies(<span class="string">&quot;remove&quot;</span>).invalidateHttpSession(<span class="literal">true</span>)</span><br><span class="line">// .logoutSuccessUrl(<span class="string">&quot;/&quot;</span>); æ³¨é”€æˆåŠŸæ¥åˆ°é¦–é¡µ</span><br><span class="line">http.logout().logoutSuccessUrl(<span class="string">&quot;/&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ï¼Œæ³¨é”€å®Œæ¯•åï¼Œå‘ç°è·³è½¬åˆ°é¦–é¡µOK</p>
<blockquote>
<p>æƒé™æ§åˆ¶</p>
</blockquote>
<p>æ€è€ƒä¸‹é¢çš„éœ€æ±‚ï¼š</p>
<p>ç”¨æˆ·æ²¡æœ‰ç™»å½•çš„æ—¶å€™ï¼Œå¯¼èˆªæ ä¸Šåªæ˜¾ç¤ºç™»å½•æŒ‰é’®ï¼Œç”¨æˆ·ç™»å½•ä¹‹åï¼Œå¯¼èˆªæ å¯ä»¥æ˜¾ç¤ºç™»å½•çš„ç”¨æˆ·ä¿¡æ¯åŠæ³¨é”€æŒ‰é’®ï¼</p>
<p>è¿˜æœ‰å°±æ˜¯ï¼Œæ¯”å¦‚iKunè¿™ä¸ªç”¨æˆ·ï¼Œå®ƒåªæœ‰ vip2ï¼Œvip3åŠŸèƒ½ï¼Œé‚£ä¹ˆç™»å½•åˆ™åªæ˜¾ç¤ºè¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œè€Œvip1çš„åŠŸèƒ½èœå•ä¸æ˜¾ç¤ºï¼è¿™ä¸ªå°±æ˜¯çœŸå®çš„ç½‘ç«™æƒ…å†µäº†ï¼è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p>
<p>1ã€æˆ‘ä»¬éœ€è¦ç»“åˆthymeleafä¸­çš„ä¸€äº›åŠŸèƒ½</p>
<p>secï¼šauthorize=â€œisAuthenticated()â€:æ˜¯å¦è®¤è¯ç™»å½•ï¼æ¥æ˜¾ç¤ºä¸åŒçš„é¡µé¢</p>
<p>å¯¼å…¥thymeleafå’Œsecurityç»“åˆçš„Mavenä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.thymeleaf.extras/thymeleaf-extras-springsecurity4 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-springsecurity5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€ä¿®æ”¹æˆ‘ä»¬çš„ å‰ç«¯é¡µé¢</p>
<p>å¯¼å…¥å‘½åç©ºé—´</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">xmlns:</span><span class="keyword">sec</span>=<span class="string">&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å¯¼èˆªæ ï¼Œå¢åŠ è®¤è¯åˆ¤æ–­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç™»å½•æ³¨é”€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right menu&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--å¦‚æœæœªç™»å½•--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;!isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/login&#125;&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç™»å½•</span><br><span class="line">       <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--å¦‚æœå·²ç™»å½•--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">&quot;principal.username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          è§’è‰²ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">&quot;principal.authorities&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/logout&#125;&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ³¨é”€</span><br><span class="line">       <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>èœå•æ ¹æ®ç”¨æˆ·çš„è§’è‰²åŠ¨æ€çš„å®ç° ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--èœå•æ ¹æ®ç”¨æˆ·çš„è§’è‰²åŠ¨æ€çš„å®ç° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;hasRole(&#x27;vip1&#x27;)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui raised segment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>Level 1<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level1/1&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-1-1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level1/2&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-1-2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level1/3&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-1-3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;hasRole(&#x27;vip2&#x27;)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui raised segment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span> &gt;</span>Level 2<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level2/1&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-2-1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level2/2&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-2-2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level2/3&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-2-3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;hasRole(&#x27;vip3&#x27;)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui raised segment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>Level 3<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level3/1&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-3-1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level3/2&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-3-2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/level3/3&#125;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;bullhorn icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> Level-3-3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€é‡å¯æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç™»å½•è¯•è¯•çœ‹ï¼Œç™»å½•æˆåŠŸåç¡®å®ï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬æƒ³è¦çš„é¡µé¢ï¼›</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193720041-1658878910.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193720041-1658878910.png" alt="img"></a></p>
<p>4ã€å¦‚æœæ³¨é”€404äº†ï¼Œå°±æ˜¯å› ä¸ºå®ƒé»˜è®¤é˜²æ­¢csrfè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œå› ä¸ºä¼šäº§ç”Ÿå®‰å…¨é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚æ”¹ä¸ºpostè¡¨å•æäº¤ï¼Œæˆ–è€…åœ¨spring securityä¸­å…³é—­csrfåŠŸèƒ½ï¼›æˆ‘ä»¬è¯•è¯•ï¼šåœ¨ é…ç½®ä¸­å¢åŠ  <code>http.csrf().disable();</code></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">http<span class="selector-class">.csrf</span>()<span class="selector-class">.disable</span>();<span class="comment">//å…³é—­csrfåŠŸèƒ½:è·¨ç«™è¯·æ±‚ä¼ªé€ ,é»˜è®¤åªèƒ½é€šè¿‡postæ–¹å¼æäº¤logoutè¯·æ±‚</span></span><br></pre></td></tr></table></figure>

<p>åˆ°ç›®å‰ä¸ºæ­¢å·²è¿‘å®ç°äº†æƒé™çš„è®¿é—®èµ„æºä¸åŒï¼Œæ¥ä¸‹æ¥è¿˜æƒ³å®ç°å¯¹ä¸åŒç”¨æˆ·çš„é¡µé¢æ˜¾ç¤ºå†…å®¹ä¸åŒï¼š</p>
<p>å…³é”®ä»£ç ï¼šsec:authorize=â€œhasRole()â€ //åˆ¤æ–­å½“å‰çš„æƒé™æ˜¯å¦æœ‰è¿™ä¸ªæƒé™ç›´æ¥åŠ åœ¨æƒ³è¦è®¾ç½®æƒé™çš„æ ‡ç­¾å†…å³å¯</p>
<h3 id="12-5ã€è®°ä½æˆ‘å’Œé¦–é¡µå®šåˆ¶"><a href="#12-5ã€è®°ä½æˆ‘å’Œé¦–é¡µå®šåˆ¶" class="headerlink" title="12.5ã€è®°ä½æˆ‘å’Œé¦–é¡µå®šåˆ¶"></a>12.5ã€è®°ä½æˆ‘å’Œé¦–é¡µå®šåˆ¶</h3><blockquote>
<p>è®°ä½æˆ‘</p>
</blockquote>
<p>ç°åœ¨çš„æƒ…å†µï¼Œæˆ‘ä»¬åªè¦ç™»å½•ä¹‹åï¼Œå…³é—­æµè§ˆå™¨ï¼Œå†ç™»å½•ï¼Œå°±ä¼šè®©æˆ‘ä»¬é‡æ–°ç™»å½•ï¼Œä½†æ˜¯å¾ˆå¤šç½‘ç«™çš„æƒ…å†µï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªè®°ä½å¯†ç çš„åŠŸèƒ½ï¼Œè¿™ä¸ªè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p>
<p>1ã€å¼€å¯è®°ä½æˆ‘åŠŸèƒ½ï¼ˆSecurityConfigï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®°ä½æˆ‘</span></span><br><span class="line">http.rememberMe();</span><br></pre></td></tr></table></figure>

<p>2ã€æˆ‘ä»¬å†æ¬¡å¯åŠ¨é¡¹ç›®æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°ç™»å½•é¡µå¤šäº†ä¸€ä¸ªè®°ä½æˆ‘åŠŸèƒ½ï¼Œæˆ‘ä»¬ç™»å½•ä¹‹åå…³é—­ æµè§ˆå™¨ï¼Œç„¶åé‡æ–°æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼Œå‘ç°ç”¨æˆ·ä¾æ—§å­˜åœ¨ï¼</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193737810-735557783.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193737810-735557783.png" alt="img"></a></p>
<p>æ€è€ƒï¼šå¦‚ä½•å®ç°çš„å‘¢ï¼Ÿå…¶å®éå¸¸ç®€å•</p>
<p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æµè§ˆå™¨çš„cookie</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193748399-1187035827.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193748399-1187035827.png" alt="img"></a></p>
<p>3ã€æˆ‘ä»¬ç‚¹å‡»æ³¨é”€çš„æ—¶å€™ï¼Œå¯ä»¥å‘ç°ï¼Œspring security å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ é™¤äº†è¿™ä¸ª cookie</p>
<p>4ã€ç»“è®ºï¼šç™»å½•æˆåŠŸåï¼Œå°†cookieå‘é€ç»™æµè§ˆå™¨ä¿å­˜ï¼Œä»¥åç™»å½•å¸¦ä¸Šè¿™ä¸ªcookieï¼Œåªè¦é€šè¿‡æ£€æŸ¥å°±å¯ä»¥å…ç™»å½•äº†ã€‚å¦‚æœç‚¹å‡»æ³¨é”€ï¼Œåˆ™ä¼šåˆ é™¤è¿™ä¸ªcookieï¼Œå…·ä½“çš„åŸç†æˆ‘ä»¬åœ¨JavaWebé˜¶æ®µéƒ½è®²è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸åœ¨å¤šè¯´äº†</p>
<blockquote>
<p>é¦–é¡µå®šåˆ¶</p>
</blockquote>
<p>ç°åœ¨è¿™ä¸ªç™»å½•é¡µé¢éƒ½æ˜¯spring security é»˜è®¤çš„ï¼Œæ€ä¹ˆæ ·å¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„Loginç•Œé¢å‘¢ï¼Ÿ</p>
<p>1ã€åœ¨åˆšæ‰çš„ç™»å½•é¡µé…ç½®åé¢æŒ‡å®š loginpage</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">http<span class="selector-class">.formLogin</span>()<span class="selector-class">.loginPage</span>(&quot;/toLogin&quot;);</span><br></pre></td></tr></table></figure>

<p>2ã€ç„¶åå‰ç«¯ä¹Ÿéœ€è¦æŒ‡å‘æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ loginè¯·æ±‚ï¼ˆindex.htmlï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç™»å½•</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€æˆ‘ä»¬ç™»å½•ï¼Œéœ€è¦å°†è¿™äº›ä¿¡æ¯å‘é€åˆ°å“ªé‡Œï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦é…ç½®ï¼Œlogin.html é…ç½®æäº¤è¯·æ±‚åŠæ–¹å¼ï¼Œæ–¹å¼å¿…é¡»ä¸ºpost:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">form</span> <span class="selector-tag">th</span>:action=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p>å›¾ç¤ºï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193804379-695891739.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193804379-695891739.png" alt="img"></a></p>
<p>4ã€è¿™ä¸ªè¯·æ±‚æäº¤ä¸Šæ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦éªŒè¯å¤„ç†ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹formLogin()æ–¹æ³•çš„æºç ï¼æˆ‘ä»¬é…ç½®æ¥æ”¶ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç çš„å‚æ•°ï¼</p>
<p>è¿™æ—¶å°±éœ€è¦å»configä¸­è®¾ç½®ä¸€ä¸‹ï¼Œå°†å¯¹åº”çš„å­—æ®µè¿›è¡Œè¿æ¥</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193813523-1983088234.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193813523-1983088234.png" alt="img"></a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">http.formLogin().usernameParameter(<span class="string">&quot;name&quot;</span>).passwordParameter(<span class="string">&quot;pwd&quot;</span>).loginPage(<span class="string">&quot;/toLogin&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>5ã€è®¿é—®æµ‹è¯•</p>
<p>æˆ‘ä»¬è®¿é—®åç™»å½•é¡µé¢æ˜¯è‡ªå·±å®šåˆ¶çš„ï¼Œç­‰å½•åä¹Ÿå¯ä»¥è·³è½¬åˆ°é¦–é¡µ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193855165-91244879.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193855165-91244879.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193911809-384398468.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193911809-384398468.png" alt="img"></a></p>
<p>6ã€åœ¨ç™»å½•é¡µå¢åŠ è®°ä½æˆ‘çš„é€‰æ‹©æ¡†</p>
<p>login.html</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;field&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember&quot;</span>&gt;</span> è®°ä½æˆ‘</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>SecurityConfig</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®°ä½æˆ‘ï¼Œè‡ªå®šä¹‰æ¥æ”¶å‰ç«¯çš„å‚æ•°</span></span><br><span class="line">http<span class="selector-class">.rememberMe</span>()<span class="selector-class">.rememberMeParameter</span>(&quot;remember&quot;);</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193925184-1110874044.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193925184-1110874044.png" alt="img"></a></p>
<h2 id="13ã€Shiro"><a href="#13ã€Shiro" class="headerlink" title="13ã€Shiro"></a>13ã€Shiro</h2><h3 id="13-1ã€Shiroæ¦‚è¿°"><a href="#13-1ã€Shiroæ¦‚è¿°" class="headerlink" title="13.1ã€Shiroæ¦‚è¿°"></a>13.1ã€Shiroæ¦‚è¿°</h3><h4 id="13-1-1ã€ç®€ä»‹"><a href="#13-1-1ã€ç®€ä»‹" class="headerlink" title="13.1.1ã€ç®€ä»‹"></a>13.1.1ã€ç®€ä»‹</h4><p>Apache Shiroæ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„Javaå®‰å…¨æ¡†æ¶</p>
<p>å¯ä»¥å®Œæˆèº«ä»½éªŒè¯ã€æˆæƒã€å¯†ç å’Œä¼šè¯ç®¡ç†</p>
<p>Shiro ä¸ä»…å¯ä»¥ç”¨åœ¨ JavaSE ç¯å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨ JavaEE ç¯å¢ƒä¸­</p>
<p>å®˜ç½‘ï¼š <a href="http://shiro.apache.org/">http://shiro.apache.org/</a></p>
<h4 id="13-1-2ã€åŠŸèƒ½"><a href="#13-1-2ã€åŠŸèƒ½" class="headerlink" title="13.1.2ã€åŠŸèƒ½"></a>13.1.2ã€åŠŸèƒ½</h4><p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193937475-1428409106.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193937475-1428409106.png" alt="img"></a></p>
<ul>
<li>Authenticationï¼šèº«ä»½è®¤è¯/ç™»å½•ï¼ŒéªŒè¯ç”¨æˆ·æ˜¯ä¸æ˜¯æ‹¥æœ‰ç›¸åº”çš„èº«ä»½ï¼›</li>
<li>Authorizationï¼šæˆæƒï¼Œå³æƒé™éªŒè¯ï¼ŒéªŒè¯æŸä¸ªå·²è®¤è¯çš„ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™ï¼›å³åˆ¤æ–­ç”¨æˆ·æ˜¯å¦èƒ½åšäº‹æƒ…ï¼Œå¸¸è§çš„å¦‚ï¼šéªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²ã€‚æˆ–è€…ç»†ç²’åº¦çš„éªŒè¯æŸä¸ªç”¨æˆ·å¯¹æŸä¸ªèµ„æºæ˜¯å¦å…·æœ‰æŸä¸ªæƒé™ï¼›</li>
<li>Session Managerï¼šä¼šè¯ç®¡ç†ï¼Œå³ç”¨æˆ·ç™»å½•åå°±æ˜¯ä¸€æ¬¡ä¼šè¯ï¼Œåœ¨æ²¡æœ‰é€€å‡ºä¹‹å‰ï¼Œå®ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ä¼šè¯ä¸­ï¼›ä¼šè¯å¯ä»¥æ˜¯æ™®é€šJavaSEç¯å¢ƒçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦‚Webç¯å¢ƒçš„ï¼›</li>
<li>Cryptographyï¼šåŠ å¯†ï¼Œä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¦‚å¯†ç åŠ å¯†å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œè€Œä¸æ˜¯æ˜æ–‡å­˜å‚¨ï¼›</li>
<li>Web Supportï¼šWebæ”¯æŒï¼Œå¯ä»¥éå¸¸å®¹æ˜“çš„é›†æˆåˆ°Webç¯å¢ƒï¼›</li>
<li>Cachingï¼šç¼“å­˜ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•åï¼Œå…¶ç”¨æˆ·ä¿¡æ¯ã€æ‹¥æœ‰çš„è§’è‰²/æƒé™ä¸å¿…æ¯æ¬¡å»æŸ¥ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ï¼›</li>
<li>Concurrencyï¼šshiroæ”¯æŒå¤šçº¿ç¨‹åº”ç”¨çš„å¹¶å‘éªŒè¯ï¼Œå³å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œèƒ½æŠŠæƒé™è‡ªåŠ¨ä¼ æ’­è¿‡å»ï¼›</li>
<li>Testingï¼šæä¾›æµ‹è¯•æ”¯æŒï¼›</li>
<li>Run Asï¼šå…è®¸ä¸€ä¸ªç”¨æˆ·å‡è£…ä¸ºå¦ä¸€ä¸ªç”¨æˆ·ï¼ˆå¦‚æœä»–ä»¬å…è®¸ï¼‰çš„èº«ä»½è¿›è¡Œè®¿é—®ï¼›</li>
<li>Remember Meï¼šè®°ä½æˆ‘ï¼Œè¿™ä¸ªæ˜¯éå¸¸å¸¸è§çš„åŠŸèƒ½ï¼Œå³ä¸€æ¬¡ç™»å½•åï¼Œä¸‹æ¬¡å†æ¥çš„è¯ä¸ç”¨ç™»å½•äº†ã€‚</li>
</ul>
<h4 id="13-1-3ã€ä»å¤–éƒ¨çœ‹"><a href="#13-1-3ã€ä»å¤–éƒ¨çœ‹" class="headerlink" title="13.1.3ã€ä»å¤–éƒ¨çœ‹"></a>13.1.3ã€ä»å¤–éƒ¨çœ‹</h4><p>ä»å¤–éƒ¨æ¥çœ‹Shiroï¼Œå³ä»åº”ç”¨ç¨‹åºè§’åº¦æ¥è§‚å¯Ÿå¦‚ä½•ä½¿ç”¨shiroå®Œæˆå·¥ä½œï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193950229-525305412.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916193950229-525305412.png" alt="img"></a></p>
<p>åº”ç”¨ä»£ç ç›´æ¥äº¤äº’çš„å¯¹è±¡æ˜¯Subjectï¼Œä¹Ÿå°±æ˜¯è¯´Shiroçš„å¯¹å¤–APIæ ¸å¿ƒå°±æ˜¯Subjectï¼›å…¶æ¯ä¸ªAPIçš„å«ä¹‰ï¼š</p>
<ul>
<li>Subjectï¼šä¸»ä½“ï¼Œä»£è¡¨äº†å½“å‰â€œç”¨æˆ·â€ï¼Œè¿™ä¸ªç”¨æˆ·ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå…·ä½“çš„äººï¼Œä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯Subjectï¼Œå¦‚ç½‘ç»œçˆ¬è™«ï¼Œæœºå™¨äººç­‰ï¼›å³ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼›æ‰€æœ‰Subjectéƒ½ç»‘å®šåˆ°SecurityManagerï¼Œä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManagerï¼›å¯ä»¥æŠŠSubjectè®¤ä¸ºæ˜¯ä¸€ä¸ªé—¨é¢ï¼›SecurityManageræ‰æ˜¯å®é™…çš„æ‰§è¡Œè€…ï¼›</li>
<li>SecurityManagerï¼šå®‰å…¨ç®¡ç†å™¨ï¼›å³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šä¸SecurityManageräº¤äº’ï¼›ä¸”å®ƒç®¡ç†ç€æ‰€æœ‰Subjectï¼›å¯ä»¥çœ‹å‡ºå®ƒæ˜¯Shiroçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ä¸åè¾¹ä»‹ç»çš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œå¦‚æœå­¦ä¹ è¿‡SpringMVCï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹æˆDispatcherServletå‰ç«¯æ§åˆ¶å™¨ï¼›</li>
<li>Realmï¼šåŸŸï¼ŒShiroä»ä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ï¼‰ï¼Œå°±æ˜¯è¯´SecurityManagerè¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé‚£ä¹ˆå®ƒéœ€è¦ä»Realmè·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²/æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œæ“ä½œï¼›å¯ä»¥æŠŠRealmçœ‹æˆDataSourceï¼Œå³å®‰å…¨æ•°æ®æºã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œæœ€ç®€å•çš„ä¸€ä¸ªShiroåº”ç”¨ï¼š</p>
<p>åº”ç”¨ä»£ç é€šè¿‡Subjectæ¥è¿›è¡Œè®¤è¯å’Œæˆæƒï¼Œè€ŒSubjectåˆå§”æ‰˜ç»™SecurityManagerï¼›<br>æˆ‘ä»¬éœ€è¦ç»™Shiroçš„SecurityManageræ³¨å…¥Realmï¼Œä»è€Œè®©SecurityManagerèƒ½å¾—åˆ°åˆæ³•çš„ç”¨æˆ·åŠå…¶æƒé™è¿›è¡Œåˆ¤æ–­ã€‚<br>ä»ä»¥ä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒShiroä¸æä¾›ç»´æŠ¤ç”¨æˆ·/æƒé™ï¼Œè€Œæ˜¯é€šè¿‡Realmè®©å¼€å‘äººå‘˜è‡ªå·±æ³¨å…¥</p>
<h4 id="13-1-4ã€Shiroæ¶æ„ï¼ˆå†…éƒ¨ï¼‰"><a href="#13-1-4ã€Shiroæ¶æ„ï¼ˆå†…éƒ¨ï¼‰" class="headerlink" title="13.1.4ã€Shiroæ¶æ„ï¼ˆå†…éƒ¨ï¼‰"></a>13.1.4ã€Shiroæ¶æ„ï¼ˆå†…éƒ¨ï¼‰</h4><p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194001639-1045171066.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194001639-1045171066.png" alt="img"></a></p>
<ul>
<li>Subjectï¼šä¸»ä½“ï¼Œå¯ä»¥çœ‹åˆ°ä¸»ä½“å¯ä»¥æ˜¯ä»»ä½•å¯ä»¥ä¸åº”ç”¨äº¤äº’çš„â€œç”¨æˆ·â€ï¼›</li>
<li>SecurityManagerï¼šç›¸å½“äºSpringMVCä¸­çš„DispatcherServletæˆ–è€…Struts2ä¸­çš„FilterDispatcherï¼›æ˜¯Shiroçš„å¿ƒè„ï¼›æ‰€æœ‰å…·ä½“çš„äº¤äº’éƒ½é€šè¿‡SecurityManagerè¿›è¡Œæ§åˆ¶ï¼›å®ƒç®¡ç†ç€æ‰€æœ‰Subjectã€ä¸”è´Ÿè´£è¿›è¡Œè®¤è¯å’Œæˆæƒã€åŠä¼šè¯ã€ç¼“å­˜çš„ç®¡ç†ã€‚</li>
<li>Authenticatorï¼šè®¤è¯å™¨ï¼Œè´Ÿè´£ä¸»ä½“è®¤è¯çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œå¦‚æœç”¨æˆ·è§‰å¾—Shiroé»˜è®¤çš„ä¸å¥½ï¼Œå¯ä»¥è‡ªå®šä¹‰å®ç°ï¼›å…¶éœ€è¦è®¤è¯ç­–ç•¥ï¼ˆAuthentication Strategyï¼‰ï¼Œå³ä»€ä¹ˆæƒ…å†µä¸‹ç®—ç”¨æˆ·è®¤è¯é€šè¿‡äº†ï¼›</li>
<li>Authrizerï¼šæˆæƒå™¨ï¼Œæˆ–è€…è®¿é—®æ§åˆ¶å™¨ï¼Œç”¨æ¥å†³å®šä¸»ä½“æ˜¯å¦æœ‰æƒé™è¿›è¡Œç›¸åº”çš„æ“ä½œï¼›å³æ§åˆ¶ç€ç”¨æˆ·èƒ½è®¿é—®åº”ç”¨ä¸­çš„å“ªäº›åŠŸèƒ½ï¼›</li>
<li>Realmï¼šå¯ä»¥æœ‰1ä¸ªæˆ–å¤šä¸ªRealmï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨å®ä½“æ•°æ®æºï¼Œå³ç”¨äºè·å–å®‰å…¨å®ä½“çš„ï¼›å¯ä»¥æ˜¯JDBCå®ç°ï¼Œä¹Ÿå¯ä»¥æ˜¯LDAPå®ç°ï¼Œæˆ–è€…å†…å­˜å®ç°ç­‰ç­‰ï¼›ç”±ç”¨æˆ·æä¾›ï¼›æ³¨æ„ï¼šShiroä¸çŸ¥é“ä½ çš„ç”¨æˆ·/æƒé™å­˜å‚¨åœ¨å“ªåŠä»¥ä½•ç§æ ¼å¼å­˜å‚¨ï¼›æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨åº”ç”¨ä¸­éƒ½éœ€è¦å®ç°è‡ªå·±çš„Realmï¼›</li>
<li>SessionManagerï¼šå¦‚æœå†™è¿‡Servletå°±åº”è¯¥çŸ¥é“Sessionçš„æ¦‚å¿µï¼ŒSessionå‘¢éœ€è¦æœ‰äººå»ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯SessionManagerï¼›è€ŒShiroå¹¶ä¸ä»…ä»…å¯ä»¥ç”¨åœ¨Webç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å¦‚æ™®é€šçš„JavaSEç¯å¢ƒã€EJBç­‰ç¯å¢ƒï¼›æ‰€æœ‰å‘¢ï¼ŒShiroå°±æŠ½è±¡äº†ä¸€ä¸ªè‡ªå·±çš„Sessionæ¥ç®¡ç†ä¸»ä½“ä¸åº”ç”¨ä¹‹é—´äº¤äº’çš„æ•°æ®ï¼›è¿™æ ·çš„è¯ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨Webç¯å¢ƒç”¨ï¼Œåˆšå¼€å§‹æ˜¯ä¸€å°WebæœåŠ¡å™¨ï¼›æ¥ç€åˆä¸Šäº†å°EJBæœåŠ¡å™¨ï¼›è¿™æ—¶æƒ³æŠŠä¸¤å°æœåŠ¡å™¨çš„ä¼šè¯æ•°æ®æ”¾åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å®ç°è‡ªå·±çš„åˆ†å¸ƒå¼ä¼šè¯ï¼ˆå¦‚æŠŠæ•°æ®æ”¾åˆ°MemcachedæœåŠ¡å™¨ï¼‰ï¼›</li>
<li>SessionDAOï¼šDAOå¤§å®¶éƒ½ç”¨è¿‡ï¼Œæ•°æ®è®¿é—®å¯¹è±¡ï¼Œç”¨äºä¼šè¯çš„CRUDï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠSessionä¿å­˜åˆ°æ•°æ®åº“ï¼Œé‚£ä¹ˆå¯ä»¥å®ç°è‡ªå·±çš„SessionDAOï¼Œé€šè¿‡å¦‚JDBCå†™åˆ°æ•°æ®åº“ï¼›æ¯”å¦‚æƒ³æŠŠSessionæ”¾åˆ°Memcachedä¸­ï¼Œå¯ä»¥å®ç°è‡ªå·±çš„Memcached SessionDAOï¼›å¦å¤–SessionDAOä¸­å¯ä»¥ä½¿ç”¨Cacheè¿›è¡Œç¼“å­˜ï¼Œä»¥æé«˜æ€§èƒ½ï¼›</li>
<li>CacheManagerï¼šç¼“å­˜æ§åˆ¶å™¨ï¼Œæ¥ç®¡ç†å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰çš„ç¼“å­˜çš„ï¼›å› ä¸ºè¿™äº›æ•°æ®åŸºæœ¬ä¸Šå¾ˆå°‘å»æ”¹å˜ï¼Œæ”¾åˆ°ç¼“å­˜ä¸­åå¯ä»¥æé«˜è®¿é—®çš„æ€§èƒ½</li>
<li>Cryptographyï¼šå¯†ç æ¨¡å—ï¼ŒShiroæé«˜äº†ä¸€äº›å¸¸è§çš„åŠ å¯†ç»„ä»¶ç”¨äºå¦‚å¯†ç åŠ å¯†/è§£å¯†çš„</li>
</ul>
<h4 id="13-1-5ã€è®¤è¯æµç¨‹"><a href="#13-1-5ã€è®¤è¯æµç¨‹" class="headerlink" title="13.1.5ã€è®¤è¯æµç¨‹"></a>13.1.5ã€è®¤è¯æµç¨‹</h4><p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194010295-1309213386.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194010295-1309213386.png" alt="img"></a></p>
<p><strong>ç”¨æˆ·</strong> æäº¤ <strong>èº«ä»½ä¿¡æ¯ã€å‡­è¯ä¿¡æ¯</strong> å°è£…æˆ <strong>ä»¤ç‰Œ</strong> äº¤ç”± <strong>å®‰å…¨ç®¡ç†å™¨</strong> è®¤è¯</p>
<h3 id="13-2ã€-å¿«é€Ÿå…¥é—¨"><a href="#13-2ã€-å¿«é€Ÿå…¥é—¨" class="headerlink" title="13.2ã€ å¿«é€Ÿå…¥é—¨"></a>13.2ã€ å¿«é€Ÿå…¥é—¨</h3><p>å°†æ¡ˆä¾‹æ‹·è´ï¼š</p>
<p>æŒ‰ç…§å®˜ç½‘æç¤ºæ‰¾åˆ° å¿«é€Ÿå…¥é—¨æ¡ˆä¾‹</p>
<p>GitHubåœ°å€ï¼šshiro/samples/quickstart/</p>
<p>ä»GitHub çš„æ–‡ä»¶ä¸­å¯ä»¥çœ‹å‡ºè¿™ä¸ªå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹æ˜¯ä¸€ä¸ª Maven é¡¹ç›®</p>
<p>1ã€æ–°å»ºä¸€ä¸ª Maven å·¥ç¨‹ï¼Œåˆ é™¤å…¶ src ç›®å½•ï¼Œå°†å…¶ä½œä¸ºçˆ¶å·¥ç¨‹</p>
<p>2ã€åœ¨çˆ¶å·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ª Maven æ¨¡å—</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194021629-868816539.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194021629-868816539.png" alt="img"></a></p>
<p>3ã€å¤åˆ¶å¿«é€Ÿå…¥é—¨æ¡ˆä¾‹ POM.xml æ–‡ä»¶ä¸­çš„ä¾èµ– ï¼ˆç‰ˆæœ¬å·è‡ªé€‰ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot-08-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hello-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- configure logging --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€æŠŠå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹ä¸­çš„ resource ä¸‹çš„<code>log4j.properties</code> å¤åˆ¶ä¸‹æ¥</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">INFO, stdout</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%d %p [%c] - %m %n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># General Apache libraries</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache</span>=<span class="string">WARN</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Spring</span></span><br><span class="line"><span class="attr">log4j.logger.org.springframework</span>=<span class="string">WARN</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Default Shiro logging</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache.shiro</span>=<span class="string">INFO</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Disable verbose logging</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache.shiro.util.ThreadContext</span>=<span class="string">WARN</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache.shiro.cache.ehcache.EhCache</span>=<span class="string">WARN</span></span><br></pre></td></tr></table></figure>

<p>5ã€å¤åˆ¶ä¸€ä¸‹ <code>shiro.ini</code> æ–‡ä»¶</p>
<p>éœ€è¦ä¸‹è½½iniæ’ä»¶ï¼Œå¦‚æœåœ¨settingä¸­æ— æ³•ä¸‹è½½ï¼Œå°±å»å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ç„¶åå¯¼å…¥</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">root</span> = secret, admin</span><br><span class="line"><span class="attr">guest</span> = guest, guest</span><br><span class="line"><span class="attr">presidentskroob</span> = <span class="number">12345</span>, president</span><br><span class="line"><span class="attr">darkhelmet</span> = ludicrousspeed, darklord, schwartz</span><br><span class="line"><span class="attr">lonestarr</span> = vespa, goodguy, schwartz</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Roles with assigned permissions</span></span><br><span class="line"><span class="comment"># roleName = perm1, perm2, ..., permN</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[roles]</span></span><br><span class="line"><span class="attr">admin</span> = *</span><br><span class="line"><span class="attr">schwartz</span> = lightsaber:*</span><br><span class="line"><span class="attr">goodguy</span> = winnebago:drive:eagle5</span><br></pre></td></tr></table></figure>

<p>6ã€å¯¼å…¥quickstart.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.DefaultSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.text.IniRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quickstart</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(Quickstart.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The easiest way to create a Shiro SecurityManager with configured</span></span><br><span class="line">        <span class="comment">// realms, users, roles and permissions is to use the simple INI config.</span></span><br><span class="line">        <span class="comment">// We&#x27;ll do that by using a factory that can ingest a .ini file and</span></span><br><span class="line">        <span class="comment">// return a SecurityManager instance:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use the shiro.ini file at the root of the classpath</span></span><br><span class="line">        <span class="comment">// (file: and url: prefixes load from files and urls respectively):</span></span><br><span class="line">        DefaultSecurityManager defaultSecurityManager=<span class="keyword">new</span> <span class="title class_">DefaultSecurityManager</span>();</span><br><span class="line">        IniRealm iniRealm=<span class="keyword">new</span> <span class="title class_">IniRealm</span>(<span class="string">&quot;classpath:shiro.ini&quot;</span>);</span><br><span class="line">        defaultSecurityManager.setRealm(iniRealm);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// for this simple example quickstart, make the SecurityManager</span></span><br><span class="line">        <span class="comment">// accessible as a JVM singleton.  Most applications wouldn&#x27;t do this</span></span><br><span class="line">        <span class="comment">// and instead rely on their container configuration or web.xml for</span></span><br><span class="line">        <span class="comment">// webapps.  That is outside the scope of this simple quickstart, so</span></span><br><span class="line">        <span class="comment">// we&#x27;ll just do the bare minimum so you can continue to get a feel</span></span><br><span class="line">        <span class="comment">// for things.</span></span><br><span class="line">        SecurityUtils.setSecurityManager(defaultSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Now that a simple Shiro environment is set up, let&#x27;s see what you can do:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">&quot;aValue&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Retrieved the correct value! [&quot;</span> + value + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// let&#x27;s login the current user so we can check against roles and permissions:</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) &#123;</span><br><span class="line">            <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(<span class="string">&quot;lonestarr&quot;</span>, <span class="string">&quot;vespa&quot;</span>);</span><br><span class="line">            token.setRememberMe(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentUser.login(token);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;There is no user with username of &quot;</span> + token.getPrincipal());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;Password for account &quot;</span> + token.getPrincipal() + <span class="string">&quot; was incorrect!&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (LockedAccountException lae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;The account for username &quot;</span> + token.getPrincipal() + <span class="string">&quot; is locked.  &quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Please contact your administrator to unlock it.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) &#123;</span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">&quot;User [&quot;</span> + currentUser.getPrincipal() + <span class="string">&quot;] logged in successfully.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;May the Schwartz be with you!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Hello, mere mortal.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You may use a lightsaber ring.  Use it wisely.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;winnebago:drive:eagle5&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Here are the keys - have fun!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7ã€æ‰§è¡Œmainæ–¹æ³•ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194045407-1575771362.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194045407-1575771362.png" alt="img"></a></p>
<blockquote>
<p>åˆ†æquickstart</p>
</blockquote>
<p>1.é€šè¿‡ SecurityUtils è·å–å½“å‰æ‰§è¡Œçš„ç”¨æˆ· Subject</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br></pre></td></tr></table></figure>

<p>2.é€šè¿‡ å½“å‰ç”¨æˆ·æ‹¿åˆ° Session,shiroçš„session</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br></pre></td></tr></table></figure>

<p>3.ç”¨ Session å­˜å€¼å–å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>4.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¢«è®¤è¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.isAuthenticated()</span><br></pre></td></tr></table></figure>

<p>5.æ‰§è¡Œç™»å½•æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.login(token);</span><br></pre></td></tr></table></figure>

<p>6.æ‰“å°å…¶æ ‡è¯†ä¸»ä½“</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.getPrincipal()</span><br></pre></td></tr></table></figure>

<p>7.æ³¨é”€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.logout();</span><br></pre></td></tr></table></figure>

<p>å…¨éƒ¨ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.DefaultSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.text.IniRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quickstart</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(Quickstart.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The easiest way to create a Shiro SecurityManager with configured</span></span><br><span class="line">        <span class="comment">// realms, users, roles and permissions is to use the simple INI config.</span></span><br><span class="line">        <span class="comment">// We&#x27;ll do that by using a factory that can ingest a .ini file and</span></span><br><span class="line">        <span class="comment">// return a SecurityManager instance:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use the shiro.ini file at the root of the classpath</span></span><br><span class="line">        <span class="comment">// (file: and url: prefixes load from files and urls respectively):</span></span><br><span class="line">        DefaultSecurityManager defaultSecurityManager=<span class="keyword">new</span> <span class="title class_">DefaultSecurityManager</span>();</span><br><span class="line">        IniRealm iniRealm=<span class="keyword">new</span> <span class="title class_">IniRealm</span>(<span class="string">&quot;classpath:shiro.ini&quot;</span>);</span><br><span class="line">        defaultSecurityManager.setRealm(iniRealm);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// for this simple example quickstart, make the SecurityManager</span></span><br><span class="line">        <span class="comment">// accessible as a JVM singleton.  Most applications wouldn&#x27;t do this</span></span><br><span class="line">        <span class="comment">// and instead rely on their container configuration or web.xml for</span></span><br><span class="line">        <span class="comment">// webapps.  That is outside the scope of this simple quickstart, so</span></span><br><span class="line">        <span class="comment">// we&#x27;ll just do the bare minimum so you can continue to get a feel</span></span><br><span class="line">        <span class="comment">// for things.</span></span><br><span class="line">        SecurityUtils.setSecurityManager(defaultSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Now that a simple Shiro environment is set up, let&#x27;s see what you can do:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        <span class="comment">//é€šè¿‡å½“å‰ç”¨æˆ·æ‹¿åˆ°session</span></span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">&quot;aValue&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Subject=&gt;session[&quot;</span> + value + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­å½“å‰çš„ç”¨æˆ·æ˜¯å¦è¢«è®¤è¯</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) &#123;</span><br><span class="line">            <span class="comment">//tokenï¼šä»¤ç‰Œï¼Œæ²¡æœ‰è·å–ï¼Œéšæœºè®¾ç½®</span></span><br><span class="line">            <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(<span class="string">&quot;lonestarr&quot;</span>, <span class="string">&quot;vespa&quot;</span>);</span><br><span class="line">            <span class="comment">//è®°ä½æˆ‘</span></span><br><span class="line">            token.setRememberMe(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentUser.login(token);<span class="comment">//æ‰§è¡Œäº†ç™»å½•æ“ä½œ</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;There is no user with username of &quot;</span> + token.getPrincipal());<span class="comment">//ç”¨æˆ·åé”™è¯¯</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;Password for account &quot;</span> + token.getPrincipal() + <span class="string">&quot; was incorrect!&quot;</span>);<span class="comment">//å¯†ç é”™è¯¯</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (LockedAccountException lae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;The account for username &quot;</span> + token.getPrincipal() + <span class="string">&quot; is locked.  &quot;</span> +<span class="comment">//ç”¨æˆ·é”å®š</span></span><br><span class="line">                        <span class="string">&quot;Please contact your administrator to unlock it.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) &#123;</span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">&quot;User [&quot;</span> + currentUser.getPrincipal() + <span class="string">&quot;] logged in successfully.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;May the Schwartz be with you!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Hello, mere mortal.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç²—ç²’åº¦</span></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You may use a lightsaber ring.  Use it wisely.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»†ç²’åº¦</span></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;winnebago:drive:eagle5&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Here are the keys - have fun!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();<span class="comment">//æ³¨é”€</span></span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-3ã€Springbootæ•´åˆShiro"><a href="#13-3ã€Springbootæ•´åˆShiro" class="headerlink" title="13.3ã€Springbootæ•´åˆShiro"></a>13.3ã€Springbootæ•´åˆShiro</h3><h4 id="13-3-1ã€ç¯å¢ƒæ­å»º"><a href="#13-3-1ã€ç¯å¢ƒæ­å»º" class="headerlink" title="13.3.1ã€ç¯å¢ƒæ­å»º"></a>13.3.1ã€ç¯å¢ƒæ­å»º</h4><ol>
<li><p>åœ¨åˆšåˆšçš„çˆ¶é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª springboot æ¨¡å—</p>
</li>
<li><p>å¯¼å…¥ thymeleafçš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.15.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-java8time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>3ã€ç¼–å†™é¦–é¡µ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€ç¼–å†™controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/&quot;,&quot;/index&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toIndex</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello,Shiro&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194123110-648731588.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194123110-648731588.png" alt="img"></a></p>
<h4 id="13-3-2ã€æ•´åˆShiro"><a href="#13-3-2ã€æ•´åˆShiro" class="headerlink" title="13.3.2ã€æ•´åˆShiro"></a>13.3.2ã€æ•´åˆShiro</h4><p>Shiro ä¸‰å¤§è¦ç´ </p>
<ul>
<li>subject -&gt; ShiroFilterFactoryBean â€”-å½“å‰ç”¨æˆ·</li>
<li>securityManager -&gt; DefaultWebSecurityManager â€”-ç®¡ç†æ‰€æœ‰ç”¨æˆ·</li>
<li>Realm â€”-è¿æ¥æ•°æ®</li>
</ul>
<p>å®é™…æ“ä½œä¸­å¯¹è±¡åˆ›å»ºçš„é¡ºåº ï¼š realm -&gt; securityManager -&gt; subject â€”-è¿æ¥æ•°æ®</p>
<p>1ã€å¯¼å…¥Spring å’Œ Shiro æ•´åˆåŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Spring å’Œ Shiro æ•´åˆåŒ…--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€åˆ›å»ºconfigæ–‡ä»¶ï¼Œç¼–å†™UserRealm.javaç»§æ‰¿AuthorizingRealmå¹¶å®ç°æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰çš„UserRealm</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span>  <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹æˆæƒdoGetAuthorizationInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹è®¤è¯doGetAuthenticationInf&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€åœ¨Configæ–‡ä»¶å¤¹ä¸‹ç¼–å†™ShiroConfig.javaæ–‡ä»¶ï¼Œå°†ä¸‰å¤§Beanæ³¨å…¥åˆ°springä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ShiroFilterFactoryBean:ç¬¬ä¸‰æ­¥</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;DefaultWebSecurityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DefaultWebSecurityManager:ç¬¬äºŒæ­¥</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;DefaultWebSecurityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">getDefaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span>&#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        <span class="comment">//å…³è”UserRealm</span></span><br><span class="line">        securityManager.setRealm(userRealm);</span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºrealmå¯¹è±¡:ç¬¬ä¸€æ­¥</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194146779-675222747.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194146779-675222747.png" alt="img"></a></p>
<p>4ã€ç¼–å†™ç®€å•çš„controllerå’Œå‰ç«¯é¡µé¢</p>
<p>ç›®å½•ç»“æ„</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194158409-753407224.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194158409-753407224.png" alt="img"></a></p>
<p>controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/&quot;,&quot;/index&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toIndex</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello,Shiro&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/update&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/add&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/update&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194210468-196896492.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194210468-196896492.png" alt="img"></a></p>
<p>Shiroæ•´åˆç¯å¢ƒå·²ç»æ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ç¯å¢ƒçš„åŸºç¡€ä¸Šå®ç°ç™»å½•æ‹¦æˆªå’Œç”¨æˆ·è®¤è¯ç­‰åŠŸèƒ½</p>
<h4 id="13-3-3ã€Shiroå®ç°ç™»å½•æ‹¦æˆª"><a href="#13-3-3ã€Shiroå®ç°ç™»å½•æ‹¦æˆª" class="headerlink" title="13.3.3ã€Shiroå®ç°ç™»å½•æ‹¦æˆª"></a>13.3.3ã€Shiroå®ç°ç™»å½•æ‹¦æˆª</h4><p>ShiroConfig.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ShiroFilterFactoryBean:ç¬¬ä¸‰æ­¥</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;DefaultWebSecurityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">    <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * anon:æ— éœ€è®¤è¯å°±å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">    * authc:å¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">    * userï¼šå¿…é¡»æ‹¥æœ‰   è®°ä½æˆ‘æ‰èƒ½ç”¨</span></span><br><span class="line"><span class="comment">    * permsï¼šæ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">    *  role:æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    Map&lt;String, String&gt; filterMap =<span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String,String&gt;();</span><br><span class="line"></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;anon&quot;</span>);<span class="comment">//è¡¨ç¤º/user/addè¿™ä¸ªè¯·æ±‚æ‰€æœ‰äººå¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/update&quot;</span>,<span class="string">&quot;authc&quot;</span>);<span class="comment">//è¡¨ç¤º/user/updateè¿™ä¸ªè¯·æ±‚åªæœ‰ç™»å½•åå¯ä»¥è®¿é—®</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å½“ç„¶åœ¨æ‹¦æˆªè¯·æ±‚ä¸­ä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼šå¦‚æ‹¦æˆªæŒ‡å®š/userä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼š/user/*</span></span><br><span class="line"></span><br><span class="line">    bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);<span class="comment">//æ²¡æœ‰æƒé™é»˜è®¤å›åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line"></span><br><span class="line">    bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>loginé¡µé¢ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>controllerï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/toLogin&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š<br><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194229559-636986083.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194229559-636986083.png" alt="img"></a></p>
<h4 id="13-3-4ã€å®ç°ç”¨æˆ·è®¤è¯"><a href="#13-3-4ã€å®ç°ç”¨æˆ·è®¤è¯" class="headerlink" title="13.3.4ã€å®ç°ç”¨æˆ·è®¤è¯"></a>13.3.4ã€å®ç°ç”¨æˆ·è®¤è¯</h4><p>å®ç°ç”¨æˆ·è®¤è¯éœ€è¦å»realmç±»çš„è®¤è¯æ–¹æ³•ä¸­å»é…ç½®</p>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆæŠŠç”¨æˆ·åå’Œå¯†ç å†™æ­»ï¼Œå®é™…ä¸­æ˜¯è¦å»æ•°æ®åº“ä¸­å»å–çš„</p>
<p>1ã€å»åˆ°UserRealm.javaä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¤è¯</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹è®¤è¯doGetAuthenticationInf&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨æˆ·åï¼Œå¯†ç ~  æ•°æ®åº“ä¸­å–</span></span><br><span class="line"></span><br><span class="line">    String name= <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    String password= <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) authenticationToken;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!userToken.getUsername().equals(name))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;<span class="comment">//æŠ›å‡ºå¼‚å¸¸ UnknownAccountException</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯†ç è®¤è¯ï¼Œshiroå¸®æˆ‘ä»¬åšå¥½äº†(ä¸è®©æˆ‘ä»¬æ¥è§¦å¯†ç æ›´åŠ å®‰å…¨)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(<span class="string">&quot;&quot;</span>,password,<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™Controllerä¸­çš„ç™»å½•æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(String username,String password,Model model)</span>&#123;</span><br><span class="line">    <span class="comment">//è·å–å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…ç”¨æˆ·çš„ç™»å½•æ•°æ®</span></span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(username, password);<span class="comment">//å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥ä»¤ç‰ŒåŠ å¯†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        subject.login(token);<span class="comment">//æ‰§è¡Œç™»å½•çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸å°±è¯´æ˜ç™»å½•æˆåŠŸï¼Œå¦‚æœæœ‰å¼‚å¸¸å°±æ˜¯quickstartä¸­çš„é‚£3ä¸ªä¸»è¦å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;<span class="comment">//ç™»å½•æˆåŠŸè¿”å›é¦–é¡µ</span></span><br><span class="line">    &#125;<span class="keyword">catch</span> (UnknownAccountException e)&#123;<span class="comment">//ç”¨æˆ·åä¸å­˜åœ¨</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (IncorrectCredentialsException e)&#123;<span class="comment">//å¯†ç é”™è¯¯</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€login</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/login&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€æµ‹è¯•ç»“æœ</p>
<p>ï¼ˆ1ï¼‰ç”¨æˆ·åè¾“å…¥é”™è¯¯</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194254288-1929868432.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194254288-1929868432.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰å¯†ç è¾“å…¥é”™è¯¯</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194301255-256167886.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194301255-256167886.png" alt="img"></a></p>
<p>ï¼ˆ3ï¼‰ç™»é™†æˆåŠŸ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194308950-239682184.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194308950-239682184.png" alt="img"></a></p>
<h3 id="13-4ã€Shiroæ•´åˆMybatis"><a href="#13-4ã€Shiroæ•´åˆMybatis" class="headerlink" title="13.4ã€Shiroæ•´åˆMybatis"></a>13.4ã€Shiroæ•´åˆMybatis</h3><h4 id="13-4-1ã€è®¤è¯åŠŸèƒ½å®ç°"><a href="#13-4-1ã€è®¤è¯åŠŸèƒ½å®ç°" class="headerlink" title="13.4.1ã€è®¤è¯åŠŸèƒ½å®ç°"></a>13.4.1ã€è®¤è¯åŠŸèƒ½å®ç°</h4><p>1ã€é¦–å…ˆå¯¼å…¥éœ€è¦çš„æ‰€æœ‰çš„mavemä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.29<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™é…ç½®æ–‡ä»¶application.propertiesæˆ–è€…application.yamlï¼ˆæ³¨æ„è¿™é‡Œymlæ–‡ä»¶æ‰€ç¼©è¿›ä¸€å®šä¸è¦å‡ºé”™ï¼‰</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">&quot;123456789&quot;</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?serverTimezone=Asia/Shanghai&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span></span><br><span class="line">    <span class="comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span></span><br><span class="line">    <span class="comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span></span><br><span class="line">    <span class="comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™qjdæ–‡ä»¶ä¸‹çš„pojoï¼Œcontrollerï¼Œserviceï¼Œmapperæ–‡ä»¶å¤¹å¯ä»¥å‚è€ƒå‰é¢çš„springbootæ•´åˆmybatisä»£ç </p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194328848-282199993.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194328848-282199993.png" alt="img"></a></p>
<p>4ã€åœ¨mapperä¸­æ·»åŠ äº†ä¸€ä¸ªqueryUserByNameçš„æ–¹æ³•ï¼š</p>
<p>æ•´åˆå®Œæ¯•åå…ˆå»æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShiroSpringbootApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(userService.queryUserByName(<span class="string">&quot;æå››&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ç»“æœ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194342323-1532411974.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194342323-1532411974.png" alt="img"></a></p>
<p>åˆ°ç›®å‰ä¸ºæ­¢æ•´åˆå®Œæ¯•ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œä¸šåŠ¡éƒ½æ˜¯æ­£å¸¸çš„æ¥ä¸‹æ¥å»ä¹‹å‰çš„ç”¨æˆ·è®¤è¯æŠŠä¹‹å‰å†™æ­»çš„ç”¨æˆ·æ”¹ä¸ºæ•°æ®åº“ä¸­çš„ç”¨æˆ·</p>
<p>6ã€UserRealm</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰çš„UserRealm</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span>  <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹æˆæƒdoGetAuthorizationInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹è®¤è¯doGetAuthenticationInf&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) authenticationToken;</span><br><span class="line">        <span class="comment">//è¿æ¥çœŸå®çš„æ•°æ®åº“</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(userToken.getUsername());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>)&#123;<span class="comment">//æ²¡æœ‰è¿™ä¸ªäºº</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯†ç è®¤è¯ï¼Œshiroå¸®æˆ‘ä»¬åšå¥½äº†(ä¸è®©æˆ‘ä»¬æ¥è§¦å¯†ç æ›´åŠ å®‰å…¨)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(<span class="string">&quot;&quot;</span>,user.getPwd(),<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7ã€å¯åŠ¨æµ‹è¯•</p>
<p>ï¼ˆ1ï¼‰æ•°æ®åº“ä¿¡æ¯</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194355791-1785696720.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194355791-1785696720.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰ç”¨æˆ·åå’Œå¯†ç é”™è¯¯</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194405431-21893124.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194405431-21893124.png" alt="img"></a></p>
<p>(3)å¯†ç é”™è¯¯ï¼ˆshiroè‡ªåŠ¨åŒ¹é…ï¼‰</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194417017-333466593.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194417017-333466593.png" alt="img"></a></p>
<p>ï¼ˆ4ï¼‰æˆåŠŸç™»å½•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194424647-1835479621.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194424647-1835479621.png" alt="img"></a></p>
<h4 id="13-4-2ã€æˆæƒåŠŸèƒ½å®ç°"><a href="#13-4-2ã€æˆæƒåŠŸèƒ½å®ç°" class="headerlink" title="13.4.2ã€æˆæƒåŠŸèƒ½å®ç°"></a>13.4.2ã€æˆæƒåŠŸèƒ½å®ç°</h4><p>1ã€è¦å®Œæˆæ•°æ®åº“æˆäºˆæƒé™ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹æ•°æ®åº“ï¼Œæ–°å¢æƒé™permså±æ€§ï¼Œå¹¶èµ‹äºˆç”¨æˆ·æƒé™</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194520009-2112241518.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194520009-2112241518.png" alt="img"></a></p>
<p>2ã€ä¿®æ”¹pojoç±»å¢åŠ perms</p>
<p>3ã€MyControllerç¼–å†™ä¸€ä¸ªæ²¡æœ‰æˆæƒæ— æ³•è®¿é—®çš„è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/noauth&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">unauthorized</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;æœªç»æˆæƒæ— æ³•è®¿é—®æ­¤é¡µé¢&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>4ã€ShiroConfig</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShiroConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ShiroFilterFactoryBean:ç¬¬ä¸‰æ­¥</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;DefaultWebSecurityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span>&#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line">        <span class="comment">//æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * anon:æ— éœ€è®¤è¯å°±å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">        * authc:å¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">        * userï¼šå¿…é¡»æ‹¥æœ‰   è®°ä½æˆ‘æ‰èƒ½ç”¨</span></span><br><span class="line"><span class="comment">        * permsï¼šæ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">        *  role:æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="comment">//æ‹¦æˆª</span></span><br><span class="line">        Map&lt;String, String&gt; filterMap =<span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String,String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æˆæƒ,æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æˆæƒä¼šè·³è½¬åˆ°æœªæˆæƒé¡µé¢</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;perms[user:add]&quot;</span>);</span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/update&quot;</span>,<span class="string">&quot;perms[user:update]&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//filterMap.put(&quot;/user/add&quot;,&quot;anon&quot;);//è¡¨ç¤º/user/addè¿™ä¸ªè¯·æ±‚æ‰€æœ‰äººå¯ä»¥è®¿é—®</span></span><br><span class="line">        <span class="comment">//filterMap.put(&quot;/user/update&quot;,&quot;authc&quot;);//è¡¨ç¤º/user/updateè¿™ä¸ªè¯·æ±‚åªæœ‰ç™»å½•åå¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ²¡æœ‰æƒé™é»˜è®¤å›åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">        bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœªæˆæƒé¡µé¢</span></span><br><span class="line">        bean.setUnauthorizedUrl(<span class="string">&quot;/noauth&quot;</span>);</span><br><span class="line">        bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DefaultWebSecurityManager:ç¬¬äºŒæ­¥</span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;DefaultWebSecurityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">getDefaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span>&#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        <span class="comment">//å…³è”UserRealm</span></span><br><span class="line">        securityManager.setRealm(userRealm);</span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºrealmå¯¹è±¡:ç¬¬ä¸€æ­¥</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€UserRealm</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰çš„UserRealm</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span>  <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹æˆæƒdoGetAuthorizationInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line">        info.addStringPermission(<span class="string">&quot;user:add&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‹¿åˆ°å½“å‰ç™»å½•çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span>   (User)subject.getPrincipal();<span class="comment">//æ‹¿åˆ°userå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//æ‹¿åˆ°ç”¨æˆ·å¯¹è±¡ä¹‹åå°±å¯ä»¥è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™ï¼ˆæƒé™æ˜¯ä»æ•°æ®åº“ä¸­è¯»å–å‡ºæ¥çš„ï¼‰</span></span><br><span class="line">        info.addStringPermission(currentUser.getPerms());</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†=ã€‹è®¤è¯doGetAuthenticationInfo&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken) authenticationToken;</span><br><span class="line">        <span class="comment">//è¿æ¥çœŸå®çš„æ•°æ®åº“</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(userToken.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>)&#123;<span class="comment">//æ²¡æœ‰è¿™ä¸ªäºº</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å¯†ç è®¤è¯ï¼Œshiroå¸®æˆ‘ä»¬åšå¥½äº†(ä¸è®©æˆ‘ä»¬æ¥è§¦å¯†ç æ›´åŠ å®‰å…¨)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(user,user.getPwd(),<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€è§£é‡Šè¯´æ˜</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194537533-1723645674.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194537533-1723645674.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194547399-834261421.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194547399-834261421.png" alt="img"></a></p>
<p>7ã€æµ‹è¯•</p>
<p>ç™»å½•rootç”¨æˆ·ï¼Œæ ¹æ®æ•°æ®åº“rootç”¨æˆ·åªæœ‰update æƒé™æ²¡æœ‰addæƒé™</p>
<p>ï¼ˆ1ï¼‰ç™»å½•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194710583-1747513924.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194710583-1747513924.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰è®¿é—®addï¼ˆæ— æ³•è®¿é—®ï¼‰</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194718480-1392046209.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194718480-1392046209.png" alt="img"></a></p>
<p>(3)è®¿é—®updateï¼ˆæˆåŠŸè®¿é—®ï¼‰</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194728910-1803639771.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194728910-1803639771.png" alt="img"></a></p>
<h3 id="13-5ã€Shiroæ•´åˆThymeleaf"><a href="#13-5ã€Shiroæ•´åˆThymeleaf" class="headerlink" title="13.5ã€Shiroæ•´åˆThymeleaf"></a>13.5ã€Shiroæ•´åˆThymeleaf</h3><p>1ã€é¦–å…ˆè¦å¯¼å…¥shrioå’Œthymeleafç»“åˆçš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€ShiroConfigé…ç½®Bean</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ•´åˆShiroDialect:ç”¨æ¥æ•´åˆshiro  thymeleaf</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroDialect <span class="title function_">getShiroDialect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ShiroDialect</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€index.html(è®°å¾—å¯¼å…¥å‘½åç©ºé—´)</p>
<p>ä¹‹å‰åœ¨securityä¸­ç”¨åˆ°çš„æ˜¯secï¼Œè¿™é‡Œç”¨çš„shiroï¼Œå½“ç„¶ä¹Ÿè¦å¯¼å…¥å‘½åç©ºé—´</p>
<p>ä¸‹é¢æ˜¯spring-securityçš„å‘½åç©ºé—´</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">xmlns:</span><span class="keyword">sec</span>=<span class="string">&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;</span></span><br></pre></td></tr></table></figure>

<p>shiroçš„ï¼š</p>
<figure class="highlight vbnet"><table><tr><td class="code"><pre><span class="line"><span class="symbol">xmlns:</span>shiro=<span class="string">&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span></span><br></pre></td></tr></table></figure>

<p>index.htmlä»£ç ï¼š</p>
<p>æ³¨æ„è¿™é‡Œåˆšè¿›å…¥é¦–é¡µæ²¡æœ‰æƒé™ï¼Œæ‰€ä»¥ä¸æ˜¾ç¤ºaddå’Œupdate,æˆ‘ä»¬ä¸èƒ½ç‚¹å‡»addå’Œupdateç™»å½•ï¼Œæ·»åŠ ä¸€ä¸ªç™»å½•çš„é“¾æ¥å³å¯</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span> <span class="attr">xmlns:shiro</span>=<span class="string">&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span> ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:add&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/add&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¦‚æœæœ‰updateæƒé™å°±æ˜¾ç¤ºupdate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:update&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/update&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€æµ‹è¯•</p>
<p>ï¼ˆ1ï¼‰é¦–é¡µ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194743750-1746654082.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194743750-1746654082.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰ç™»å½•rootç”¨æˆ·ï¼ˆæœ‰updateæƒé™ï¼‰</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194752277-977949576.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916194752277-977949576.png" alt="img"></a></p>
<p>æœ€åï¼Œå…³äºæ³¨é”€çš„åŠŸèƒ½å¯ä»¥å‚ç…§12.4ï¼Œè¿™é‡Œä¸è¿‡å¤šèµ˜è¿°</p>
<h2 id="14ã€Swagger"><a href="#14ã€Swagger" class="headerlink" title="14ã€Swagger"></a>14ã€Swagger</h2><p>å­¦ä¹ ç›®æ ‡ï¼š</p>
<ul>
<li>äº†è§£Swaggerçš„ä½œç”¨å’Œæ¦‚å¿µ</li>
<li>äº†è§£å‰åç«¯åˆ†ç¦»</li>
<li>åœ¨springbootä¸­é›†æˆSwagger</li>
</ul>
<h3 id="14-1ã€Swaggerç®€ä»‹"><a href="#14-1ã€Swaggerç®€ä»‹" class="headerlink" title="14.1ã€Swaggerç®€ä»‹"></a>14.1ã€Swaggerç®€ä»‹</h3><p>å‰åç«¯åˆ†ç¦»</p>
<ul>
<li>å‰ç«¯ -&gt; å‰ç«¯æ§åˆ¶å±‚ã€è§†å›¾å±‚</li>
<li>åç«¯ -&gt; åç«¯æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚</li>
<li>å‰åç«¯é€šè¿‡APIè¿›è¡Œäº¤äº’</li>
<li>å‰åç«¯ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸”æ¾è€¦åˆ</li>
</ul>
<p>äº§ç”Ÿçš„é—®é¢˜</p>
<ul>
<li>å‰åç«¯é›†æˆï¼Œå‰ç«¯æˆ–è€…åç«¯æ— æ³•åšåˆ°â€œåŠæ—¶åå•†ï¼Œå°½æ—©è§£å†³â€ï¼Œæœ€ç»ˆå¯¼è‡´é—®é¢˜é›†ä¸­çˆ†å‘</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>é¦–å…ˆå®šä¹‰schema [ è®¡åˆ’çš„æçº² ]ï¼Œå¹¶å®æ—¶è·Ÿè¸ªæœ€æ–°çš„APIï¼Œé™ä½é›†æˆé£é™©</li>
<li>æ—©äº›å¹´åˆ¶å®šwordè®¡åˆ’æ–‡æ¡£</li>
<li>å‰åç«¯åˆ†ç¦»ï¼šå‰ç«¯æµ‹è¯•åç«¯æ¥å£ï¼špostman</li>
<li>åç«¯æä¾›æ¥å£ï¼Œéœ€è¦å®æ—¶æ›´æ–°æœ€æ–°çš„æ¶ˆæ¯åŠæ”¹åŠ¨ï¼</li>
</ul>
<p>Swagger</p>
<ul>
<li>å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶</li>
<li>Restful Api æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆå™¨ =&gt; API æ–‡æ¡£ ä¸API å®šä¹‰åŒæ­¥æ›´æ–°</li>
<li>ç›´æ¥è¿è¡Œï¼Œåœ¨çº¿æµ‹è¯•APIæ¥å£ï¼ˆå…¶å®å°±æ˜¯controller requsetmappingï¼‰</li>
<li>æ”¯æŒå¤šç§è¯­è¨€ ï¼ˆå¦‚ï¼šJavaï¼ŒPHPç­‰ï¼‰</li>
<li>å®˜ç½‘ï¼š<a href="https://swagger.io/">https://swagger.io/</a></li>
</ul>
<h3 id="14-2ã€Springbooté›†æˆSwagger"><a href="#14-2ã€Springbooté›†æˆSwagger" class="headerlink" title="14.2ã€Springbooté›†æˆSwagger"></a>14.2ã€Springbooté›†æˆSwagger</h3><p>SpringBooté›†æˆSwagger =&gt; springfoxï¼Œä¸¤ä¸ªjaråŒ…</p>
<ul>
<li>Springfox-swagger2</li>
<li>swagger-springmvc</li>
</ul>
<h4 id="14-2-1ã€ç¯å¢ƒæ­å»º"><a href="#14-2-1ã€ç¯å¢ƒæ­å»º" class="headerlink" title="14.2.1ã€ç¯å¢ƒæ­å»º"></a>14.2.1ã€ç¯å¢ƒæ­å»º</h4><blockquote>
<p>ä½¿ç”¨Swagger</p>
</blockquote>
<p>è¦æ±‚ï¼šjdk 1.8 + å¦åˆ™swagger2æ— æ³•è¿è¡Œ</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ã€æ–°å»ºä¸€ä¸ªSpringBoot-webé¡¹ç›®</p>
<p>2ã€æ·»åŠ Mavenä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™ä¸€ä¸ªHelloå·¥ç¨‹ï¼ŒHelloController</p>
<p>ï¼ˆ1ï¼‰åŒ…ç»“æ„</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202410868-291883033.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202410868-291883033.png" alt="img"></a></p>
<p>ï¼ˆ2ï¼‰HelloController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  /erroræ˜¯é»˜è®¤è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰å¯åŠ¨SwaggerDemoApplicationæµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202423201-1313356305.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202423201-1313356305.png" alt="img"></a></p>
<p>4ã€è¦ä½¿ç”¨Swaggerï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªé…ç½®ç±»-SwaggerConfigæ¥é…ç½® Swagger</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">// å¼€å¯Swagger2çš„è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€è®¿é—®æµ‹è¯• ï¼š<a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a> ï¼Œå¯ä»¥çœ‹åˆ°swaggerçš„ç•Œé¢ï¼›</p>
<p>æ³¨ï¼šå¦‚æœè¿™é‡Œè®¿é—®ä¸äº†å¯ä»¥å°è¯•åœ¨pomé‡Œé™ä½springbootçš„ç‰ˆæœ¬</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202435415-2056896503.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202435415-2056896503.png" alt="img"></a></p>
<h4 id="14-2-2ã€é…ç½®Swagger"><a href="#14-2-2ã€é…ç½®Swagger" class="headerlink" title="14.2.2ã€é…ç½®Swagger"></a>14.2.2ã€é…ç½®Swagger</h4><ul>
<li>Swaggerå®ä¾‹Beanæ˜¯Docketï¼Œæ‰€ä»¥é€šè¿‡é…ç½®Docketå®ä¾‹æ¥é…ç½®Swagger,é€šè¿‡Docketå¯¹è±¡æ¥ç®¡äº†åŸæ¥é»˜è®¤çš„é…ç½®</li>
<li>å¯ä»¥é€šè¿‡apiInfo()å±æ€§é…ç½®æ–‡æ¡£ä¿¡æ¯</li>
<li>Docket å®ä¾‹å…³è”ä¸Š apiInfo()</li>
</ul>
<p>SwaggerConfig</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">// å¼€å¯Swagger2çš„è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®äº†Swaggerçš„Docketçš„Beanå®ä¾‹</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é…ç½®Swaggerä¿¡æ¯=apiInfo</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//ä½œè€…ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;qjd&quot;</span>, <span class="string">&quot;https://www.cnblogs.com/qjds/&quot;</span>, <span class="string">&quot;1503349647@qq.com&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfo</span>(</span><br><span class="line">                <span class="string">&quot;Swagger&quot;</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>, <span class="comment">// æè¿°</span></span><br><span class="line">                <span class="string">&quot;v1.0&quot;</span>, <span class="comment">// ç‰ˆæœ¬</span></span><br><span class="line">                <span class="string">&quot;https://www.cnblogs.com/qjds/&quot;</span>, <span class="comment">// ç»„ç»‡é“¾æ¥</span></span><br><span class="line">                contact, <span class="comment">// è”ç³»äººä¿¡æ¯</span></span><br><span class="line">                <span class="string">&quot;Apach 2.0 è®¸å¯&quot;</span>, <span class="comment">// è®¸å¯</span></span><br><span class="line">                <span class="string">&quot;è®¸å¯é“¾æ¥&quot;</span>, <span class="comment">// è®¸å¯è¿æ¥</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()<span class="comment">// æ‰©å±•</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="14-2-3ã€Swaggeré…ç½®æ‰«ææ¥å£"><a href="#14-2-3ã€Swaggeré…ç½®æ‰«ææ¥å£" class="headerlink" title="14.2.3ã€Swaggeré…ç½®æ‰«ææ¥å£"></a>14.2.3ã€Swaggeré…ç½®æ‰«ææ¥å£</h4><p>1ã€æ„å»ºDocketæ—¶é€šè¿‡select()æ–¹æ³•é…ç½®æ€ä¹ˆæ‰«ææ¥å£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(apiInfo())</span><br><span class="line">            .select()</span><br><span class="line">            <span class="comment">//RequestHandlerSelectorsï¼Œé…ç½®è¦æ‰«ææ¥å£çš„æ–¹å¼</span></span><br><span class="line">            <span class="comment">//basePackageï¼šæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br><span class="line">            <span class="comment">//any():æ‰«æå…¨éƒ¨</span></span><br><span class="line">            <span class="comment">//none():ä¸æ‰«æ</span></span><br><span class="line">            <span class="comment">//withClassAnnotationï¼šæ‰«æç±»ä¸Šçš„æ³¨è§£</span></span><br><span class="line">            <span class="comment">//withMethodAnnotationï¼šæ‰«ææ–¹æ³•ä¸Šçš„æ³¨è§£</span></span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.qjd.swagger.controller&quot;</span>))</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€é‡å¯é¡¹ç›®æµ‹è¯•ï¼Œç”±äºæˆ‘ä»¬é…ç½®æ ¹æ®åŒ…çš„è·¯å¾„æ‰«ææ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½çœ‹åˆ°ä¸€ä¸ªç±»</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202500638-454870095.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202500638-454870095.png" alt="img"></a></p>
<p>é™¤äº†é€šè¿‡åŒ…è·¯å¾„é…ç½®æ‰«ææ¥å£å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®å…¶ä»–æ–¹å¼æ‰«ææ¥å£ï¼Œè¿™é‡Œæ³¨é‡Šä¸€ä¸‹æ‰€æœ‰çš„é…ç½®æ–¹å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">any() <span class="comment">// æ‰«ææ‰€æœ‰ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ‰«æåˆ°</span></span><br><span class="line">none() <span class="comment">// ä¸æ‰«ææ¥å£</span></span><br><span class="line"><span class="comment">// é€šè¿‡æ–¹æ³•ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚withMethodAnnotation(GetMapping.class)åªæ‰«ægetè¯·æ±‚</span></span><br><span class="line">withMethodAnnotation(<span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; annotation)</span><br><span class="line"><span class="comment">// é€šè¿‡ç±»ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚.withClassAnnotation(Controller.class)åªæ‰«ææœ‰controlleræ³¨è§£çš„ç±»ä¸­çš„æ¥å£</span></span><br><span class="line">withClassAnnotation(<span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; annotation)</span><br><span class="line">basePackage(<span class="keyword">final</span> String basePackage) <span class="comment">// æ ¹æ®åŒ…è·¯å¾„æ‰«ææ¥å£</span></span><br><span class="line">paths(PathSelectors.ant(<span class="string">&quot;/qjd/**&quot;</span>))  <span class="comment">//è¿‡æ»¤ä»€ä¹ˆè·¯å¾„ï¼šè¿‡æ»¤/qjdä¸‹çš„æ‰€æœ‰è·¯å¾„</span></span><br></pre></td></tr></table></figure>

<p>3ã€é…ç½®æ¥å£æ‰«æè¿‡æ»¤</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">.paths(PathSelectors.ant(<span class="string">&quot;/qjd/**&quot;</span>))</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202517307-1043582008.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202517307-1043582008.png" alt="img"></a></p>
<p>PathSelectorsçš„å¯é€‰å€¼æœ‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">any() <span class="comment">// ä»»ä½•è¯·æ±‚éƒ½æ‰«æ</span></span><br><span class="line">none() <span class="comment">// ä»»ä½•è¯·æ±‚éƒ½ä¸æ‰«æ</span></span><br><span class="line">regex(<span class="keyword">final</span> String pathRegex) <span class="comment">// é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶</span></span><br><span class="line">ant(<span class="keyword">final</span> String antPattern) <span class="comment">// é€šè¿‡ant()æ§åˆ¶</span></span><br></pre></td></tr></table></figure>

<h4 id="14-2-4ã€é…ç½®æ˜¯å¦å¯åŠ¨Swagger"><a href="#14-2-4ã€é…ç½®æ˜¯å¦å¯åŠ¨Swagger" class="headerlink" title="14.2.4ã€é…ç½®æ˜¯å¦å¯åŠ¨Swagger"></a>14.2.4ã€é…ç½®æ˜¯å¦å¯åŠ¨Swagger</h4><p>1ã€é€šè¿‡enable()æ–¹æ³•é…ç½®æ˜¯å¦å¯ç”¨swaggerï¼Œå¦‚æœæ˜¯falseï¼Œswaggerå°†ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(apiInfo())</span><br><span class="line">            .enable(<span class="literal">false</span>)</span><br><span class="line">            .select()</span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.qjd.swagger.controller&quot;</span>))</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202533482-1631768307.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202533482-1631768307.png" alt="img"></a></p>
<blockquote>
<p>é—®é¢˜:å¦‚ä½•åšåˆ°Swaggeråœ¨ç”Ÿäº§ç¯å¢ƒ(dev)ä¸­ä½¿ç”¨ï¼Œåœ¨å‘å¸ƒ(pro)çš„æ—¶å€™ä¸ä½¿ç”¨ï¼Ÿ</p>
</blockquote>
<p>æ€è·¯ï¼š</p>
<ul>
<li>åˆ¤æ–­æ˜¯ä¸æ˜¯ç”Ÿäº§ç¯å¢ƒ(flag)</li>
<li>æ³¨å…¥enable(flag)</li>
</ul>
<p>1ã€é…ç½®æ˜¯ä»€ä¹ˆç¯å¢ƒ</p>
<p>å»ºç«‹3ä¸ªpropertiesæ–‡ä»¶</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202544525-1066372790.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916202544525-1066372790.png" alt="img"></a></p>
<p>application.propertiesä»£è¡¨é€‰æ‹©ä»€ä¹ˆç¯å¢ƒï¼ˆæ¿€æ´»ï¼‰</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure>

<p>application-dev.propertiesä»£è¡¨æ˜¯ç”Ÿäº§ç¯å¢ƒèµ°8081ç«¯å£</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure>

<p>application-pro.propertiesä»£è¡¨æ˜¯å‘å¸ƒç¯å¢ƒèµ°8082ç«¯å£</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8082</span></span><br></pre></td></tr></table></figure>

<p>2ã€SwaggerConfig</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®äº†Swaggerçš„Docketçš„Beanå®ä¾‹</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®è¦æ˜¾ç¤ºswaggerçš„ç¯å¢ƒï¼Œå¯ä»¥è®¾ç½®å¤šä¸ª</span></span><br><span class="line">    <span class="type">Profiles</span> <span class="variable">of</span> <span class="operator">=</span> Profiles.of(<span class="string">&quot;dev&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">    <span class="comment">//é€šè¿‡environment.acceptsProfilesåˆ¤æ–­æ˜¯å¦å¤„åœ¨è‡ªå·±è®¾å®šçš„ç¯å¢ƒå½“ä¸­</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> environment.acceptsProfiles(of);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(apiInfo())</span><br><span class="line">            .enable(flag)</span><br><span class="line">            .select()</span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.qjd.swagger.controller&quot;</span>))</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.æµ‹è¯•</p>
<p>ï¼ˆ1ï¼‰8081</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203232778-142711994.png">!(https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203232778-142711994.png)</a></p>
<p>ï¼ˆ2ï¼‰8082</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203242308-1058398399.png">!(https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203242308-1058398399.png)</a></p>
<h4 id="14-2-5ã€Swaggeré…ç½®APIåˆ†ç»„"><a href="#14-2-5ã€Swaggeré…ç½®APIåˆ†ç»„" class="headerlink" title="14.2.5ã€Swaggeré…ç½®APIåˆ†ç»„"></a>14.2.5ã€Swaggeré…ç½®APIåˆ†ç»„</h4><p>1ã€å¦‚æœæ²¡æœ‰é…ç½®åˆ†ç»„ï¼Œé»˜è®¤æ˜¯defaultã€‚é€šè¿‡groupName()æ–¹æ³•å³å¯é…ç½®åˆ†ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">        .apiInfo(apiInfo())</span><br><span class="line">        .groupName(<span class="string">&quot;iKun&quot;</span>)</span><br><span class="line">        .enable(flag)</span><br><span class="line">        .select()</span><br><span class="line">        .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.qjd.swagger.controller&quot;</span>))</span><br><span class="line">        .build();</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203253760-372737594.png">https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203253760-372737594.png</a>)</p>
<blockquote>
<p>å¦‚ä½•é…ç½®å¤šä¸ªåˆ†ç»„ï¼Ÿ</p>
</blockquote>
<p>é…ç½®å¤šä¸ªåˆ†ç»„åªéœ€è¦é…ç½®å¤šä¸ªdocketå³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">// å¼€å¯Swagger2çš„è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;group1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;group2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;group3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®äº†Swaggerçš„Docketçš„Beanå®ä¾‹</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®è¦æ˜¾ç¤ºswaggerçš„ç¯å¢ƒ</span></span><br><span class="line">        <span class="type">Profiles</span> <span class="variable">of</span> <span class="operator">=</span> Profiles.of(<span class="string">&quot;dev&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">        <span class="comment">//é€šè¿‡environment.acceptsProfilesåˆ¤æ–­æ˜¯å¦å¤„åœ¨è‡ªå·±è®¾å®šçš„ç¯å¢ƒå½“ä¸­</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> environment.acceptsProfiles(of);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .groupName(<span class="string">&quot;iKun&quot;</span>)</span><br><span class="line">                .enable(flag)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.qjd.swagger.controller&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é…ç½®Swaggerä¿¡æ¯=apiInfo</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//ä½œè€…ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;qjd&quot;</span>, <span class="string">&quot;https://www.cnblogs.com/qjds/&quot;</span>, <span class="string">&quot;5166764@qq.com&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfo</span>(</span><br><span class="line">                <span class="string">&quot;Swagger&quot;</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">                <span class="string">&quot;test&quot;</span>, <span class="comment">// æè¿°</span></span><br><span class="line">                <span class="string">&quot;v1.0&quot;</span>, <span class="comment">// ç‰ˆæœ¬</span></span><br><span class="line">                <span class="string">&quot;https://www.ccc.com&quot;</span>, <span class="comment">// ç»„ç»‡é“¾æ¥</span></span><br><span class="line">                contact, <span class="comment">// è”ç³»äººä¿¡æ¯</span></span><br><span class="line">                <span class="string">&quot;Apach 2.0 è®¸å¯&quot;</span>, <span class="comment">// è®¸å¯</span></span><br><span class="line">                <span class="string">&quot;è®¸å¯é“¾æ¥&quot;</span>, <span class="comment">// è®¸å¯è¿æ¥</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()<span class="comment">// æ‰©å±•</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203307744-1361549606.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203307744-1361549606.png" alt="img"></a></p>
<h4 id="14-2-6ã€å®ä½“ç±»é…ç½®"><a href="#14-2-6ã€å®ä½“ç±»é…ç½®" class="headerlink" title="14.2.6ã€å®ä½“ç±»é…ç½®"></a>14.2.6ã€å®ä½“ç±»é…ç½®</h4><p>1ã€æ–°å»ºä¸€ä¸ªå®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@Api(æ³¨é‡Š)</span></span><br><span class="line"><span class="meta">@ApiModel(&quot;ç”¨æˆ·å®ä½“&quot;)</span><span class="comment">//ç»™ç”Ÿæˆçš„æ–‡æ¡£åŠ æ³¨é‡Š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String username;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203318370-432678027.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203318370-432678027.png" alt="img"></a></p>
<p>2ã€HelloController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  /erroræ˜¯é»˜è®¤è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åªè¦æˆ‘ä»¬çš„æ¥å£ä¸­ï¼Œè¿”å›å€¼ä¸­å­˜åœ¨å®ä½“ç±»ï¼Œä»–å°±ä¼šè¢«æ‰«æåˆ°Swaggerä¸­</span></span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Operationæ¥å£ï¼Œä¸æ˜¯æ”¾åœ¨ç±»ä¸Šï¼Œæ˜¯æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;Helloæ§åˆ¶ç±»&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/hello2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@ApiParam(&quot;ç”¨æˆ·å&quot;)</span> String username)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>+username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203328617-1867861227.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203328617-1867861227.png" alt="img"></a></p>
<p>å¯ä»¥åˆ©ç”¨try it outè¿›è¡Œæµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203338168-1198178756.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203338168-1198178756.png" alt="img"></a></p>
<p>æ³¨ï¼šå¹¶ä¸æ˜¯å› ä¸º@ApiModelè¿™ä¸ªæ³¨è§£è®©å®ä½“æ˜¾ç¤ºåœ¨è¿™é‡Œäº†ï¼Œè€Œæ˜¯åªè¦å‡ºç°åœ¨æ¥å£æ–¹æ³•çš„è¿”å›å€¼ä¸Šçš„å®ä½“éƒ½ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œè€Œ@ApiModelå’Œ@ApiModelPropertyè¿™ä¸¤ä¸ªæ³¨è§£åªæ˜¯ä¸ºå®ä½“æ·»åŠ æ³¨é‡Šçš„ã€‚</p>
<ul>
<li>@ApiModelä¸ºç±»æ·»åŠ æ³¨é‡Š</li>
<li>@ApiModelPropertyä¸ºç±»å±æ€§æ·»åŠ æ³¨é‡Š</li>
</ul>
<h4 id="14-2-7ã€å¸¸ç”¨æ³¨è§£"><a href="#14-2-7ã€å¸¸ç”¨æ³¨è§£" class="headerlink" title="14.2.7ã€å¸¸ç”¨æ³¨è§£"></a>14.2.7ã€å¸¸ç”¨æ³¨è§£</h4><p>Swaggerçš„æ‰€æœ‰æ³¨è§£å®šä¹‰åœ¨io.swagger.annotationsåŒ…ä¸‹</p>
<p>ä¸‹é¢åˆ—ä¸€äº›ç»å¸¸ç”¨åˆ°çš„ï¼Œæœªåˆ—ä¸¾å‡ºæ¥çš„å¯ä»¥å¦è¡ŒæŸ¥é˜…è¯´æ˜ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203401133-766816097.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203401133-766816097.png" alt="img"></a></p>
<p>ç›¸è¾ƒäºä¼ ç»Ÿçš„Postmanæˆ–Curlæ–¹å¼æµ‹è¯•æ¥å£ï¼Œä½¿ç”¨swaggerä¸éœ€è¦é¢å¤–è¯´æ˜æ–‡æ¡£è€Œä¸”æ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œåªéœ€è¦å½•å…¥æ•°æ®ç„¶åç‚¹å‡»Executeï¼Œå¦‚æœå†é…åˆè‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œå¯ä»¥è¯´åŸºæœ¬å°±ä¸éœ€è¦äººä¸ºæ“ä½œäº†ã€‚</p>
<h3 id="14-3ã€å°ç»“"><a href="#14-3ã€å°ç»“" class="headerlink" title="14.3ã€å°ç»“"></a>14.3ã€å°ç»“</h3><p>Swaggeræ˜¯ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œç°åœ¨å›½å†…å·²ç»æœ‰å¾ˆå¤šçš„ä¸­å°å‹äº’è”ç½‘å…¬å¸éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„è¦å…ˆå‡ºWordæ¥å£æ–‡æ¡£å†æµ‹è¯•çš„æ–¹å¼ï¼Œæ˜¾ç„¶è¿™æ ·ä¹Ÿæ›´ç¬¦åˆç°åœ¨çš„å¿«é€Ÿè¿­ä»£å¼€å‘è¡Œæƒ…ã€‚</p>
<p>å½“ç„¶äº†ï¼Œæé†’ä¸‹å¤§å®¶åœ¨æ­£å¼ç¯å¢ƒè¦è®°å¾—å…³é—­Swaggerï¼Œä¸€æ¥å‡ºäºå®‰å…¨è€ƒè™‘äºŒæ¥ä¹Ÿå¯ä»¥èŠ‚çœè¿è¡Œæ—¶å†…å­˜ã€‚</p>
<p>Swaggerçš„å‡ ä¸ªé‡ç‚¹å†…å®¹ï¼š</p>
<ul>
<li>å°†<a href="http://localhost:8080/swagger-ui.html%E7%9A%84%E9%A6%96%E9%A1%B5%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9%E4%B8%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BF%A1%E6%81%AF">http://localhost:8080/swagger-ui.htmlçš„é¦–é¡µä¿¡æ¯ä¿®æ”¹ä¸ºè‡ªå·±çš„ä¿¡æ¯</a></li>
<li>é€šè¿‡Swaggerç»™ä¸€äº›æ¯”è¾ƒéš¾ç†è§£çš„å±æ€§æˆ–è€…æ¥å£ï¼Œå¢åŠ æ³¨é‡Šä¿¡æ¯</li>
<li>æ¥å£æ–‡æ¡£å®æ—¶æ›´æ–°</li>
<li>å¯ä»¥åœ¨çº¿æµ‹è¯•</li>
</ul>
<h2 id="15ã€ä»»åŠ¡"><a href="#15ã€ä»»åŠ¡" class="headerlink" title="15ã€ä»»åŠ¡"></a>15ã€ä»»åŠ¡</h2><h3 id="15-1ã€å¼‚æ­¥ä»»åŠ¡"><a href="#15-1ã€å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="15.1ã€å¼‚æ­¥ä»»åŠ¡"></a>15.1ã€å¼‚æ­¥ä»»åŠ¡</h3><p>æ‰€è°“å¼‚æ­¥ï¼Œåœ¨æŸäº›åŠŸèƒ½å®ç°æ—¶å¯èƒ½è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´ï¼Œä½†æ˜¯ä¸ºäº†ä¸å½±å“å®¢æˆ·ç«¯çš„ä½“éªŒï¼Œé€‰æ‹©å¼‚æ­¥æ‰§è¡Œ</p>
<p>1ã€é¦–å…ˆåˆ›å»ºä¸€ä¸ªservice</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°æ®æ­£åœ¨å¤„ç†...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AsyncService asyncService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        asyncService.hello();<span class="comment">//åœæ­¢3ç§’,è½¬åœˆ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åœ¨æ‰§è¡Œ/helloè¯·æ±‚æ—¶ï¼Œç½‘ç«™ä¼šå»¶æ—¶ä¸‰ç§’å†æ˜¾ç¤ºokï¼Œåå°æ•°æ®ä¹Ÿä¼šä¸‰ç§’åæ˜¾ç¤ºæ•°æ®æ­£åœ¨ä¼ è¾“</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203421702-1871167182.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203421702-1871167182.png" alt="img"></a></p>
<blockquote>
<p>ç°åœ¨æƒ³è¦åšåˆ°å‰ç«¯å¿«é€Ÿå“åº”æˆ‘ä»¬çš„é¡µé¢ï¼Œåå°å»æ…¢æ…¢çš„ä¼ è¾“æ•°æ®ï¼Œå°±è¦ç”¨åˆ°springbootè‡ªå¸¦çš„åŠŸèƒ½</p>
</blockquote>
<p>1ã€å‘Šè¯‰springæˆ‘ä»¬çš„å¼‚æ­¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å‘Šè¯‰springè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°æ®æ­£åœ¨å¤„ç†...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å»springbootä¸»ç¨‹åºä¸­å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableAsync</span> <span class="comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot09TaskApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot09TaskApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€é‡å¯æµ‹è¯•å‘ç°å‰ç«¯é¡µé¢ç«‹å³è¿”å›okï¼Œæˆ‘ä»¬åç«¯çš„æ§åˆ¶å°ç»è¿‡3sæ‰è¿”å›æ•°æ®æ­£åœ¨å¤„ç†â€¦</p>
<h3 id="15-2ã€é‚®ä»¶ä»»åŠ¡"><a href="#15-2ã€é‚®ä»¶ä»»åŠ¡" class="headerlink" title="15.2ã€é‚®ä»¶ä»»åŠ¡"></a>15.2ã€é‚®ä»¶ä»»åŠ¡</h3><p>é‚®ä»¶å‘é€ï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¹Ÿéå¸¸çš„å¤šï¼ŒSpringbootä¹Ÿå¸®æˆ‘ä»¬åšäº†æ”¯æŒ</p>
<ul>
<li>é‚®ä»¶å‘é€éœ€è¦å¼•å…¥spring-boot-start-mail</li>
<li>SpringBoot è‡ªåŠ¨é…ç½®MailSenderAutoConfiguration</li>
<li>å®šä¹‰MailPropertieså†…å®¹ï¼Œé…ç½®åœ¨application.ymlä¸­</li>
<li>è‡ªåŠ¨è£…é…JavaMailSender</li>
<li>æµ‹è¯•é‚®ä»¶å‘é€</li>
</ul>
<p>å…·ä½“å®ç°ï¼š</p>
<p>1ã€å¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--javax.mail:é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç‚¹å‡»è¿›å…¥çœ‹å®ƒå¼•å…¥çš„ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ° jakarta.mail</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€æŸ¥çœ‹è‡ªåŠ¨é…ç½®ç±»ï¼šMailSenderAutoConfiguration</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203454286-308134699.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203454286-308134699.png" alt="img"></a></p>
<p>3ã€é…ç½®æ–‡ä»¶</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.mail.username</span>=<span class="string">ä½ çš„é‚®ç®±</span></span><br><span class="line"><span class="attr">spring.mail.password</span>=<span class="string">ä½ çš„é‚®ç®±æˆæƒç </span></span><br><span class="line"><span class="attr">spring.mail.host</span>=<span class="string">smtp.163.com</span></span><br><span class="line"><span class="comment"># qqéœ€è¦é…ç½®sslï¼Œå…¶ä»–é‚®ç®±ä¸éœ€è¦</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.ssl.enable</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>4ã€Springboot09TaskApplicationTestsæµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot09TaskApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é‚®ä»¶è®¾ç½®1ï¼šä¸€ä¸ªç®€å•çš„é‚®ä»¶</span></span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        message.setSubject(<span class="string">&quot;æ ‡é¢˜--SpringBootå­¦ä¹ &quot;</span>);</span><br><span class="line">        message.setText(<span class="string">&quot;å†…å®¹--é‚®ä»¶ä»»åŠ¡&quot;</span>);</span><br><span class="line"></span><br><span class="line">        message.setTo(<span class="string">&quot;5166764@qq.com&quot;</span>);</span><br><span class="line">        message.setFrom(<span class="string">&quot;5166764@qq.com&quot;</span>);</span><br><span class="line">        mailSender.send(message);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‘é€ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„é‚®ä»¶ï¼š</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads2</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="comment">//é‚®ä»¶è®¾ç½®2ï¼šä¸€ä¸ªå¤æ‚çš„é‚®ä»¶</span></span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">    <span class="comment">//ç»„è£…</span></span><br><span class="line">    <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­£æ–‡</span></span><br><span class="line">    helper.setSubject(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    helper.setText(<span class="string">&quot;&lt;p style=&#x27;color:red&#x27;&gt;testtext&lt;/p&gt;&quot;</span>,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€é™„ä»¶</span></span><br><span class="line">    helper.addAttachment(<span class="string">&quot;1.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\å›¾ç‰‡\\bac.jpg&quot;</span>));<span class="comment">//è¿™é‡Œå¯ä»¥å†™ç»å¯¹è·¯å¾„</span></span><br><span class="line">    helper.addAttachment(<span class="string">&quot;2.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\\å›¾ç‰‡\\bac.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">    helper.setTo(<span class="string">&quot;5166764@qq.com&quot;</span>);</span><br><span class="line">    helper.setFrom(<span class="string">&quot;5166764@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    mailSender.send(mimeMessage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†é‚®ä»¶å‘é€å°è£…æˆæ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> html      æ˜¯å¦æ”¯æŒå¤šæ–‡æœ¬ä¸Šä¼ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> subject   ä¸»é¢˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> text      å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> emailFrom é‚®ä»¶å‘é€åœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> emailTo   é‚®ä»¶æ¥æ”¶åœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filename  é™„ä»¶åå­—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> address   å‘é€æ–¹é™„ä»¶åœ¨æœ¬æœºçš„åœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> MessagingException æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>          qjd</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">(Boolean html,String subject,String text,String emailFrom,String emailTo,String filename,String address)</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">    <span class="comment">//é‚®ä»¶è®¾ç½®2ï¼šä¸€ä¸ªå¤æ‚çš„é‚®ä»¶</span></span><br><span class="line">    <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">    <span class="comment">//ç»„è£…</span></span><br><span class="line">    <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage, html);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­£æ–‡</span></span><br><span class="line">    helper.setSubject(subject);</span><br><span class="line">    helper.setText(text,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€é™„ä»¶</span></span><br><span class="line">    helper.addAttachment(filename,<span class="keyword">new</span> <span class="title class_">File</span>(address));</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    helper.setTo(emailTo);</span><br><span class="line">    helper.setFrom(emailFrom);</span><br><span class="line"></span><br><span class="line">    mailSender.send(mimeMessage);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15-3ã€å®šæ—¶ä»»åŠ¡"><a href="#15-3ã€å®šæ—¶ä»»åŠ¡" class="headerlink" title="15.3ã€å®šæ—¶ä»»åŠ¡"></a>15.3ã€å®šæ—¶ä»»åŠ¡</h3><p>é¡¹ç›®å¼€å‘ä¸­ç»å¸¸éœ€è¦æ‰§è¡Œä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨çš„æ—¶å€™ï¼Œåˆ†æä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ï¼ŒSpringä¸ºæˆ‘ä»¬æä¾›äº†å¼‚æ­¥æ‰§è¡Œä»»åŠ¡è°ƒåº¦çš„æ–¹å¼ï¼Œæä¾›äº†ä¸¤ä¸ªæ¥å£ã€‚</p>
<ul>
<li>TaskExecutoræ¥å£â€”&gt;ä»»åŠ¡æ‰§è¡Œè€…</li>
<li>TaskScheduleræ¥å£â€”&gt;ä»»åŠ¡è°ƒåº¦è€…</li>
</ul>
<p>ä¸¤ä¸ªæ³¨è§£ï¼š</p>
<ul>
<li>@EnableScheduling â€”&gt;å¼€å¯å®šæ—¶åŠŸèƒ½çš„æ³¨è§£</li>
<li>@Scheduledâ€”&gt;ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ</li>
</ul>
<p><strong>cronè¡¨è¾¾å¼ï¼š</strong></p>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>Seconds (ç§’) ï¼šå¯ä»¥ç”¨æ•°å­—0ï¼59 è¡¨ç¤ºï¼Œ</li>
<li>Minutes(åˆ†) ï¼šå¯ä»¥ç”¨æ•°å­—0ï¼59 è¡¨ç¤ºï¼Œ</li>
<li>Hours(æ—¶) ï¼šå¯ä»¥ç”¨æ•°å­—0-23è¡¨ç¤º,</li>
<li>Day-of-Month(å¤©) ï¼šå¯ä»¥ç”¨æ•°å­—1-31 ä¸­çš„ä»»ä¸€ä¸€ä¸ªå€¼ï¼Œä½†è¦æ³¨æ„ä¸€äº›ç‰¹åˆ«çš„æœˆä»½</li>
<li>Month(æœˆ) ï¼šå¯ä»¥ç”¨0-11 æˆ–ç”¨å­—ç¬¦ä¸² â€œJAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV and DECâ€ è¡¨ç¤º</li>
<li>Day-of-Week(æ¯å‘¨)ï¼šå¯ä»¥ç”¨æ•°å­—1-7è¡¨ç¤ºï¼ˆ1 ï¼ æ˜ŸæœŸæ—¥ï¼‰æˆ–ç”¨å­—ç¬¦å£ä¸²â€œSUN, MON, TUE, WED, THU, FRI and SATâ€è¡¨ç¤º</li>
<li>â€œ/â€ï¼šä¸ºç‰¹åˆ«å•ä½ï¼Œè¡¨ç¤ºä¸ºâ€œæ¯â€å¦‚â€œ0/15â€è¡¨ç¤ºæ¯éš”15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡,â€œ0â€è¡¨ç¤ºä¸ºä»â€œ0â€åˆ†å¼€å§‹, â€œ3/20â€è¡¨ç¤ºè¡¨ç¤ºæ¯éš”20åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œâ€œ3â€è¡¨ç¤ºä»ç¬¬3åˆ†é’Ÿå¼€å§‹æ‰§è¡Œ</li>
<li>â€œ?â€ï¼šè¡¨ç¤ºæ¯æœˆçš„æŸä¸€å¤©ï¼Œæˆ–ç¬¬å‘¨çš„æŸä¸€å¤©</li>
<li>â€œLâ€ï¼šç”¨äºæ¯æœˆï¼Œæˆ–æ¯å‘¨ï¼Œè¡¨ç¤ºä¸ºæ¯æœˆçš„æœ€åä¸€å¤©ï¼Œæˆ–æ¯ä¸ªæœˆçš„æœ€åæ˜ŸæœŸå‡ å¦‚â€œ6Lâ€è¡¨ç¤ºâ€œæ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”â€</li>
<li>â€œWâ€ï¼šè¡¨ç¤ºä¸ºæœ€è¿‘å·¥ä½œæ—¥ï¼Œå¦‚â€œ15Wâ€æ”¾åœ¨æ¯æœˆï¼ˆday-of-monthï¼‰å­—æ®µä¸Šè¡¨ç¤ºä¸ºâ€œåˆ°æœ¬æœˆ15æ—¥æœ€è¿‘çš„å·¥ä½œæ—¥â€</li>
<li>â€œâ€œ#â€ï¼šæ˜¯ç”¨æ¥æŒ‡å®šâ€œçš„â€æ¯æœˆç¬¬nä¸ªå·¥ä½œæ—¥,ä¾‹ åœ¨æ¯å‘¨ï¼ˆday-of-weekï¼‰è¿™ä¸ªå­—æ®µä¸­å†…å®¹ä¸ºâ€6#3â€ or â€œFRI#3â€ åˆ™è¡¨ç¤ºâ€œæ¯æœˆç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”â€</li>
</ul>
<p>è¿™é‡Œæ¨èä¸€ä¸ªåœ¨çº¿cornè¡¨è¾¾å¼ç”Ÿæˆå™¨ï¼š<a href="https://cron.qqe2.com/">åœ¨çº¿Cronè¡¨è¾¾å¼ç”Ÿæˆå™¨</a></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">å¸¸ç”¨cronè¡¨è¾¾å¼ä¾‹å­</span><br><span class="line">â€ƒâ€ƒï¼ˆ1ï¼‰0/2 <span class="emphasis">* *</span> <span class="emphasis">* *</span> ?   è¡¨ç¤ºæ¯2ç§’ æ‰§è¡Œä»»åŠ¡</span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ1ï¼‰0 0/2 <span class="emphasis">* *</span> <span class="emphasis">* ?    è¡¨ç¤ºæ¯2åˆ†é’Ÿ æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ1ï¼‰0 0 2 1 *</span> ?   è¡¨ç¤ºåœ¨æ¯æœˆçš„1æ—¥çš„å‡Œæ™¨2ç‚¹è°ƒæ•´ä»»åŠ¡</span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ2ï¼‰0 15 10 ? <span class="emphasis">* MON-FRI   è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆ10:15æ‰§è¡Œä½œä¸š</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ3ï¼‰0 15 10 ? 6L 2002-2006   è¡¨ç¤º2002-2006å¹´çš„æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15æ‰§è¡Œä½œ</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ4ï¼‰0 0 10,14,16 *</span> <span class="emphasis">* ?   æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ5ï¼‰0 0/30 9-17 *</span> <span class="emphasis">* ?   æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ6ï¼‰0 0 12 ? *</span> WED    è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ12ç‚¹ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ7ï¼‰0 0 12 <span class="emphasis">* *</span> ?   æ¯å¤©ä¸­åˆ12ç‚¹è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ8ï¼‰0 15 10 ? <span class="emphasis">* *</span>    æ¯å¤©ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ9ï¼‰0 15 10 <span class="emphasis">* *</span> ?     æ¯å¤©ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ10ï¼‰0 15 10 <span class="emphasis">* *</span> ?    æ¯å¤©ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ11ï¼‰0 15 10 <span class="emphasis">* *</span> ? 2005    2005å¹´çš„æ¯å¤©ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ12ï¼‰0 <span class="emphasis">* 14 *</span> <span class="emphasis">* ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:59æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ13ï¼‰0 0/5 14 *</span> <span class="emphasis">* ?    åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ14ï¼‰0 0/5 14,18 *</span> <span class="emphasis">* ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°2:55æœŸé—´å’Œä¸‹åˆ6ç‚¹åˆ°6:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ15ï¼‰0 0-5 14 *</span> <span class="emphasis">* ?    åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:05æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ16ï¼‰0 10,44 14 ? 3 WED    æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ2:10å’Œ2:44è§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ17ï¼‰0 15 10 ? *</span> MON-FRI    å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ18ï¼‰0 15 10 15 <span class="emphasis">* ?    æ¯æœˆ15æ—¥ä¸Šåˆ10:15è§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ19ï¼‰0 15 10 L *</span> ?    æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ20ï¼‰0 15 10 ? <span class="emphasis">* 6L    æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘ </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">â€ƒâ€ƒï¼ˆ21ï¼‰0 15 10 ? *</span> 6L 2002-2005   2002å¹´è‡³2005å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘ </span><br><span class="line"></span><br><span class="line">â€ƒâ€ƒï¼ˆ22ï¼‰0 15 10 ? <span class="emphasis">* 6#3   æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•å®ç°ï¼š</p>
<p>1ã€åˆ›å»ºä¸€ä¸ªScheduledService</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduledService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´æ‰§è¡Œè¿™ä¸ªæ–¹æ³•~Timer</span></span><br><span class="line">    <span class="comment">//cronè¡¨è¾¾å¼  ç§’   åˆ†   æ—¶     æ—¥   æœˆ   å‘¨å‡ </span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0/2 * * * * ?&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello,ä½ è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å†™å®Œå®šæ—¶ä»»åŠ¡ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»ç¨‹åºä¸Šå¢åŠ @EnableScheduling å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableAsync</span> <span class="comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">//å¼€å¯åŸºäºæ³¨è§£çš„å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot09TaskApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot09TaskApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="16ã€Dubboå’ŒZookeeperé›†æˆ"><a href="#16ã€Dubboå’ŒZookeeperé›†æˆ" class="headerlink" title="16ã€Dubboå’ŒZookeeperé›†æˆ"></a>16ã€Dubboå’ŒZookeeperé›†æˆ</h2><h3 id="16-1ã€åˆ†å¸ƒå¼ç†è®º"><a href="#16-1ã€åˆ†å¸ƒå¼ç†è®º" class="headerlink" title="16.1ã€åˆ†å¸ƒå¼ç†è®º"></a>16.1ã€åˆ†å¸ƒå¼ç†è®º</h3><p>åœ¨ã€Šåˆ†å¸ƒå¼ç³»ç»ŸåŸç†ä¸èŒƒå‹ã€‹ä¸€ä¹¦ä¸­æœ‰å¦‚ä¸‹å®šä¹‰ï¼šâ€œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œè¿™äº›è®¡ç®—æœºå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒå•ä¸ªç›¸å…³ç³»ç»Ÿâ€ï¼›</p>
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±ä¸€ç»„é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€ä¸ºäº†å®Œæˆå…±åŒçš„ä»»åŠ¡è€Œåè°ƒå·¥ä½œçš„è®¡ç®—æœºèŠ‚ç‚¹ç»„æˆçš„ç³»ç»Ÿã€‚</li>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‡ºç°æ˜¯ä¸ºäº†ç”¨å»‰ä»·çš„ã€æ™®é€šçš„æœºå™¨å®Œæˆå•ä¸ªè®¡ç®—æœºæ— æ³•å®Œæˆçš„è®¡ç®—ã€å­˜å‚¨ä»»åŠ¡ã€‚</li>
<li>å…¶ç›®çš„æ˜¯åˆ©ç”¨æ›´å¤šçš„æœºå™¨ï¼Œå¤„ç†æ›´å¤šçš„æ•°æ®</li>
</ul>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆdistributed systemï¼‰æ˜¯å»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿã€‚</p>
<p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œ<strong>åªæœ‰å½“å•ä¸ªèŠ‚ç‚¹çš„å¤„ç†èƒ½åŠ›æ— æ³•æ»¡è¶³æ—¥ç›Šå¢é•¿çš„è®¡ç®—ã€å­˜å‚¨ä»»åŠ¡çš„æ—¶å€™</strong>ï¼Œä¸”ç¡¬ä»¶çš„æå‡ï¼ˆåŠ å†…å­˜ã€åŠ ç£ç›˜ã€ä½¿ç”¨æ›´å¥½çš„CPUï¼‰é«˜æ˜‚åˆ°å¾—ä¸å¿å¤±çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºä¹Ÿä¸èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ—¶å€™ï¼Œ<strong>æˆ‘ä»¬æ‰éœ€è¦è€ƒè™‘åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ã€‚ï¼ˆæ‰€ä»¥åˆ†å¸ƒå¼ä¸åº”è¯¥åœ¨ä¸€å¼€å§‹è®¾è®¡ç³»ç»Ÿæ—¶å°±è€ƒè™‘åˆ°ï¼‰å› ä¸ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿè¦è§£å†³çš„é—®é¢˜æœ¬èº«å°±æ˜¯å’Œå•æœºç³»ç»Ÿä¸€æ ·çš„ï¼Œè€Œç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿå¤šèŠ‚ç‚¹ã€é€šè¿‡ç½‘ç»œé€šä¿¡çš„æ‹“æ‰‘ç»“æ„ï¼Œä¼šå¼•å…¥å¾ˆå¤šå•æœºç³»ç»Ÿæ²¡æœ‰çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜åˆä¼šå¼•å…¥æ›´å¤šçš„æœºåˆ¶ã€åè®®ï¼Œå¸¦æ¥æ›´å¤šçš„é—®é¢˜ã€‚ã€‚ã€‚<br><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203717134-818531218.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203717134-818531218.png" alt="img"></a></p>
<h4 id="Dubboæ–‡æ¡£"><a href="#Dubboæ–‡æ¡£" class="headerlink" title="Dubboæ–‡æ¡£"></a>Dubboæ–‡æ¡£</h4><p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå¸¸è§„çš„å‚ç›´åº”ç”¨æ¶æ„å·²æ— æ³•åº”å¯¹ï¼Œåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ä»¥åŠæµåŠ¨è®¡ç®—æ¶æ„åŠ¿åœ¨å¿…è¡Œï¼Œæ€¥éœ€<strong>ä¸€ä¸ªæ²»ç†ç³»ç»Ÿ</strong>ç¡®ä¿æ¶æ„æœ‰æ¡ä¸ç´Šçš„æ¼”è¿›ã€‚</p>
<p>Dubboå®˜ç½‘ï¼š<a href="https://dubbo.apache.org/zh/docs/v2.7/">https://dubbo.apache.org/zh/docs/v2.7/</a></p>
<p>åœ¨Dubboçš„å®˜ç½‘æ–‡æ¡£æœ‰è¿™æ ·ä¸€å¼ å›¾</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203741132-1119429258.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203741132-1119429258.png" alt="img"></a></p>
<blockquote>
<p>å•ä¸€åº”ç”¨æ¶æ„</p>
</blockquote>
<p>å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚æ­¤æ—¶ï¼Œç”¨äºç®€åŒ–å¢åˆ æ”¹æŸ¥å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æ¶(ORM)æ˜¯å…³é”®ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203751705-471097358.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916203751705-471097358.png" alt="img"></a></p>
<p>é€‚ç”¨äºå°å‹ç½‘ç«™ï¼Œå°å‹ç®¡ç†ç³»ç»Ÿï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€ä¸ªåŠŸèƒ½é‡Œï¼Œç®€å•æ˜“ç”¨ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>1ã€æ€§èƒ½æ‰©å±•æ¯”è¾ƒéš¾</p>
<p>2ã€ååŒå¼€å‘é—®é¢˜</p>
<p>3ã€ä¸åˆ©äºå‡çº§ç»´æŠ¤</p>
<blockquote>
<p>å‚ç›´åº”ç”¨æ¶æ„</p>
</blockquote>
<p>å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æ¶(MVC)æ˜¯å…³é”®ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204543977-1659442699.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204543977-1659442699.png" alt="img"></a></p>
<p>é€šè¿‡åˆ‡åˆ†ä¸šåŠ¡æ¥å®ç°å„ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼Œé™ä½äº†ç»´æŠ¤å’Œéƒ¨ç½²çš„éš¾åº¦ï¼Œå›¢é˜Ÿå„å¸å…¶èŒæ›´æ˜“ç®¡ç†ï¼Œæ€§èƒ½æ‰©å±•ä¹Ÿæ›´æ–¹ä¾¿ï¼Œæ›´æœ‰é’ˆå¯¹æ€§ã€‚</p>
<p>ç¼ºç‚¹ï¼šå…¬ç”¨æ¨¡å—æ— æ³•é‡å¤åˆ©ç”¨ï¼Œå¼€å‘æ€§çš„æµªè´¹</p>
<blockquote>
<p>åˆ†å¸ƒå¼æ¶æ„</p>
</blockquote>
<p>å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„**åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶(RPC)**æ˜¯å…³é”®ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204553791-793084943.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204553791-793084943.png" alt="img"></a></p>
<blockquote>
<p>æµåŠ¨è®¡ç®—æ¶æ„</p>
</blockquote>
<p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äº<strong>æé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ</strong>(SOA)[ Service Oriented Architecture]æ˜¯å…³é”®ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204603601-1380432466.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204603601-1380432466.png" alt="img"></a></p>
<h3 id="16-3ã€RPC"><a href="#16-3ã€RPC" class="headerlink" title="16.3ã€RPC"></a>16.3ã€RPC</h3><p>æˆ‘ä»¬é€šä¿¡æœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§æ˜¯http,ä¸€ç§æ˜¯RPC</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204612927-705529795.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204612927-705529795.png" alt="img"></a></p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯RPC</p>
</blockquote>
<p>RPCã€Remote Procedure Callã€‘æ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œä»–æ˜¯ä¸€ç§æŠ€æœ¯çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯è§„èŒƒã€‚å®ƒå…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯å…±äº«ç½‘ç»œçš„å¦ä¸€å°æœºå™¨ä¸Šï¼‰çš„è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œè€Œä¸ç”¨ç¨‹åºå‘˜æ˜¾å¼ç¼–ç è¿™ä¸ªè¿œç¨‹è°ƒç”¨çš„ç»†èŠ‚ã€‚å³ç¨‹åºå‘˜æ— è®ºæ˜¯è°ƒç”¨æœ¬åœ°çš„è¿˜æ˜¯è¿œç¨‹çš„å‡½æ•°ï¼Œæœ¬è´¨ä¸Šç¼–å†™çš„è°ƒç”¨ä»£ç åŸºæœ¬ç›¸åŒã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸¤å°æœåŠ¡å™¨Aï¼ŒBï¼Œä¸€ä¸ªåº”ç”¨éƒ¨ç½²åœ¨AæœåŠ¡å™¨ä¸Šï¼Œæƒ³è¦è°ƒç”¨BæœåŠ¡å™¨ä¸Šåº”ç”¨æä¾›çš„å‡½æ•°/æ–¹æ³•ï¼Œç”±äºä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚ä¸ºä»€ä¹ˆè¦ç”¨RPCå‘¢ï¼Ÿå°±æ˜¯æ— æ³•åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼Œç”šè‡³ä¸€ä¸ªè®¡ç®—æœºå†…é€šè¿‡æœ¬åœ°è°ƒç”¨çš„æ–¹å¼å®Œæˆçš„éœ€æ±‚ï¼Œæ¯”å¦‚ä¸åŒçš„ç³»ç»Ÿé—´çš„é€šè®¯ï¼Œç”šè‡³ä¸åŒçš„ç»„ç»‡é—´çš„é€šè®¯ï¼Œç”±äºè®¡ç®—èƒ½åŠ›éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œéœ€è¦åœ¨å¤šå°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šéƒ¨ç½²åº”ç”¨ã€‚RPCå°±æ˜¯è¦åƒè°ƒç”¨æœ¬åœ°çš„å‡½æ•°ä¸€æ ·å»è°ƒè¿œç¨‹å‡½æ•°ï¼›</p>
<p>æ¨èé˜…è¯»æ–‡ç« ï¼š<a href="https://www.jianshu.com/p/2accc2840a1b">https://www.jianshu.com/p/2accc2840a1b</a></p>
<p><strong>RPCåŸºæœ¬åŸç†</strong></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204627931-2102434400.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204627931-2102434400.png" alt="img"></a></p>
<p>æ­¥éª¤åˆ†æ:</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204637842-1561921348.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204637842-1561921348.png" alt="img"></a></p>
<p>RPCä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šé€šè®¯ï¼Œåºåˆ—åŒ–</p>
<h3 id="16-4ã€Dubboæ¦‚å¿µ"><a href="#16-4ã€Dubboæ¦‚å¿µ" class="headerlink" title="16.4ã€Dubboæ¦‚å¿µ"></a>16.4ã€Dubboæ¦‚å¿µ</h3><p>Apache Dubbo |ËˆdÊŒbÉ™ÊŠ| æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š<strong>é¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚</strong></p>
<p>dubboå®˜ç½‘ <a href="http://dubbo.apache.org/zh-cn/index.html">http://dubbo.apache.org/zh-cn/index.html</a></p>
<p>1.äº†è§£Dubboçš„ç‰¹æ€§</p>
<p>2.æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p>
<p><strong>dubboåŸºæœ¬æ¦‚å¿µ</strong></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204649606-2104306354.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204649606-2104306354.png" alt="img"></a></p>
<p><strong>æœåŠ¡æä¾›è€…</strong>ï¼ˆProviderï¼‰ï¼šæš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p>
<p><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼ˆConsumerï¼‰ï¼šè°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</p>
<p><strong>æ³¨å†Œä¸­å¿ƒ</strong>ï¼ˆRegistryï¼‰ï¼šæ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…</p>
<p><strong>ç›‘æ§ä¸­å¿ƒ</strong>ï¼ˆMonitorï¼‰ï¼šæœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ</p>
<p><strong>è°ƒç”¨å…³ç³»è¯´æ˜</strong></p>
<ul>
<li>æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚</li>
<li>æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚</li>
<li>æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</li>
<li>æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒã€‚</li>
</ul>
<h3 id="16-5ã€Dubboç¯å¢ƒæ­å»º"><a href="#16-5ã€Dubboç¯å¢ƒæ­å»º" class="headerlink" title="16.5ã€Dubboç¯å¢ƒæ­å»º"></a>16.5ã€Dubboç¯å¢ƒæ­å»º</h3><p>ç‚¹è¿›dubboå®˜æ–¹æ–‡æ¡£ï¼Œæ¨èæˆ‘ä»¬ä½¿ç”¨Zookeeper æ³¨å†Œä¸­å¿ƒ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204703362-1009140019.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204703362-1009140019.png" alt="img"></a></p>
<p>ä»€ä¹ˆæ˜¯zookeeperå‘¢ï¼Ÿå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p>
<h4 id="16-5-1ã€Zookeeperä»‹ç»"><a href="#16-5-1ã€Zookeeperä»‹ç»" class="headerlink" title="16.5.1ã€Zookeeperä»‹ç»"></a>16.5.1ã€Zookeeperä»‹ç»</h4><p>Zoookeeperæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ZooKeeper æ˜¯ä¸€ä¸ªé›†ä¸­å¼æœåŠ¡ï¼Œç”¨äºç»´æŠ¤é…ç½®ä¿¡æ¯ã€å‘½åã€æä¾›åˆ†å¸ƒå¼åŒæ­¥å’Œæä¾›ç»„æœåŠ¡ã€‚æ‰€æœ‰è¿™äº›ç±»å‹çš„æœåŠ¡éƒ½ä»¥æŸç§å½¢å¼è¢«åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚æ¯æ¬¡å®æ–½å®ƒä»¬æ—¶ï¼Œéƒ½ä¼šè¿›è¡Œå¤§é‡å·¥ä½œæ¥ä¿®å¤ä¸å¯é¿å…çš„é”™è¯¯å’Œç«äº‰æ¡ä»¶ã€‚ç”±äºå®ç°è¿™äº›æœåŠ¡çš„éš¾åº¦ï¼Œåº”ç”¨ç¨‹åºæœ€åˆé€šå¸¸ä¼šå¿½ç•¥å®ƒä»¬ï¼Œè¿™ä½¿å¾—å®ƒä»¬åœ¨å‘ç”Ÿå˜åŒ–æ—¶å˜å¾—è„†å¼±å¹¶ä¸”éš¾ä»¥ç®¡ç†ã€‚å³ä½¿æ­£ç¡®å®Œæˆï¼Œè¿™äº›æœåŠ¡çš„ä¸åŒå®ç°ä¹Ÿä¼šåœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶å¯¼è‡´ç®¡ç†å¤æ‚æ€§ã€‚</p>
<p>ä¸Šé¢çš„è§£é‡Šæœ‰ç‚¹æŠ½è±¡ï¼Œç®€å•æ¥è¯´<strong>zookeeper=æ–‡ä»¶ç³»ç»Ÿ+ç›‘å¬é€šçŸ¥æœºåˆ¶</strong>ã€‚<br>1ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆZooKeeper çš„åˆ†å±‚å‘½åç©ºé—´ï¼‰<br>Zookeeperç»´æŠ¤ä¸€ä¸ªç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204808880-937254903.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204808880-937254903.png" alt="img"></a></p>
<p>æ¯ä¸ªå­ç›®å½•é¡¹å¦‚ NameService éƒ½è¢«ç§°ä½œä¸º znode(ç›®å½•èŠ‚ç‚¹)ï¼Œå’Œæ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªç”±çš„å¢åŠ ã€åˆ é™¤znodeï¼Œåœ¨ä¸€ä¸ªznodeä¸‹å¢åŠ ã€åˆ é™¤å­znodeï¼Œå”¯ä¸€çš„ä¸åŒåœ¨äºznodeæ˜¯å¯ä»¥å­˜å‚¨æ•°æ®çš„ã€‚<br>æœ‰å››ç§ç±»å‹çš„znodeï¼š</p>
<ul>
<li><p>PERSISTENT-æŒä¹…åŒ–ç›®å½•èŠ‚ç‚¹</p>
<p>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨</p>
</li>
<li><p>PERSISTENT_SEQUENTIAL-æŒä¹…åŒ–é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹</p>
<p>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨ï¼Œåªæ˜¯Zookeeperç»™è¯¥èŠ‚ç‚¹åç§°è¿›è¡Œé¡ºåºç¼–å·</p>
</li>
<li><p>EPHEMERAL-ä¸´æ—¶ç›®å½•èŠ‚ç‚¹</p>
<p>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤</p>
</li>
<li><p>EPHEMERAL_SEQUENTIAL-ä¸´æ—¶é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹</p>
<p>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œåªæ˜¯Zookeeperç»™è¯¥èŠ‚ç‚¹åç§°è¿›è¡Œé¡ºåºç¼–å·</p>
</li>
</ul>
<p>2ã€ ç›‘å¬é€šçŸ¥æœºåˆ¶<br>å®¢æˆ·ç«¯æ³¨å†Œç›‘å¬å®ƒå…³å¿ƒçš„ç›®å½•èŠ‚ç‚¹ï¼Œå½“ç›®å½•èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ï¼ˆæ•°æ®æ”¹å˜ã€è¢«åˆ é™¤ã€å­ç›®å½•èŠ‚ç‚¹å¢åŠ åˆ é™¤ï¼‰æ—¶ï¼Œzookeeperä¼šé€šçŸ¥å®¢æˆ·ç«¯ã€‚</p>
<p>å°±è¿™ä¹ˆç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹Zookeeperèƒ½åšç‚¹ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>zookeeperåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å®ç°è¯¸å¦‚åˆ†å¸ƒå¼åº”ç”¨é…ç½®ç®¡ç†ã€ç»Ÿä¸€å‘½åæœåŠ¡ã€çŠ¶æ€åŒæ­¥æœåŠ¡ã€é›†ç¾¤ç®¡ç†ç­‰åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿™é‡Œæ‹¿æ¯”è¾ƒç®€å•çš„åˆ†å¸ƒå¼åº”ç”¨é…ç½®ç®¡ç†ä¸ºä¾‹æ¥è¯´æ˜ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬çš„ç¨‹åºæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²åœ¨å¤šå°æœºå™¨ä¸Šï¼Œå¦‚æœæˆ‘ä»¬è¦æ”¹å˜ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦é€å°æœºå™¨å»ä¿®æ”¹ï¼Œéå¸¸éº»çƒ¦ï¼Œç°åœ¨æŠŠè¿™äº›é…ç½®å…¨éƒ¨æ”¾åˆ°zookeeperä¸Šå»ï¼Œä¿å­˜åœ¨ zookeeper çš„æŸä¸ªç›®å½•èŠ‚ç‚¹ä¸­ï¼Œç„¶åæ‰€æœ‰ç›¸å…³åº”ç”¨ç¨‹åºå¯¹è¿™ä¸ªç›®å½•èŠ‚ç‚¹è¿›è¡Œç›‘å¬ï¼Œä¸€æ—¦é…ç½®ä¿¡æ¯å‘ç”Ÿå˜åŒ–ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºå°±ä¼šæ”¶åˆ° zookeeper çš„é€šçŸ¥ï¼Œç„¶åä» zookeeper è·å–æ–°çš„é…ç½®ä¿¡æ¯åº”ç”¨åˆ°ç³»ç»Ÿä¸­ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204843298-955968498.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204843298-955968498.png" alt="img"></a></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹zookeeperçš„å®‰è£…åŠä½¿ç”¨</p>
<h4 id="16-5-2ã€Windowä¸‹å®‰è£…zookeeper"><a href="#16-5-2ã€Windowä¸‹å®‰è£…zookeeper" class="headerlink" title="16.5.2ã€Windowä¸‹å®‰è£…zookeeper"></a>16.5.2ã€Windowä¸‹å®‰è£…zookeeper</h4><p>1ã€ä¸‹è½½zookeeper ï¼šåœ°å€ï¼š<a href="http://archive.apache.org/dist/zookeeper/zookeeper-3.4.14/%EF%BC%8C">http://archive.apache.org/dist/zookeeper/zookeeper-3.4.14/ï¼Œ</a> æˆ‘ä»¬ä¸‹è½½3.4.14 ï¼Œ è§£å‹zookeeper</p>
<p>2ã€è¿è¡Œ/bin/zkServer.cmd ï¼Œåˆæ¬¡è¿è¡Œä¼šæŠ¥é”™ï¼Œæ²¡æœ‰zoo.cfgé…ç½®æ–‡ä»¶ï¼›</p>
<p>å¯èƒ½é‡åˆ°é—®é¢˜ï¼šé—ªé€€ !</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç¼–è¾‘zkServer.cmdæ–‡ä»¶æœ«å°¾æ·»åŠ pause ã€‚è¿™æ ·è¿è¡Œå‡ºé”™å°±ä¸ä¼šé€€å‡ºï¼Œä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿æ‰¾åˆ°åŸå› ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204901745-936747942.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204901745-936747942.png" alt="img"></a></p>
<p>é‡æ–°ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨zkServer.cmdï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204909893-1235691673.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204909893-1235691673.png" alt="img"></a></p>
<p>3ã€ä¿®æ”¹zoo.cfgé…ç½®æ–‡ä»¶</p>
<p>å°†confæ–‡ä»¶å¤¹ä¸‹é¢çš„zoo_sample.cfgå¤åˆ¶ä¸€ä»½æ”¹åä¸ºzoo.cfgå³å¯ã€‚</p>
<p>æ³¨æ„å‡ ä¸ªé‡è¦ä½ç½®ï¼š</p>
<p><strong>dataDir=./ ä¸´æ—¶æ•°æ®å­˜å‚¨çš„ç›®å½•ï¼ˆå¯å†™ç›¸å¯¹è·¯å¾„ï¼‰</strong></p>
<p><strong>clientPort=2181 zookeeperçš„ç«¯å£å·</strong></p>
<p>ä¿®æ”¹å®Œæˆåå†æ¬¡ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨zkServer.cmdï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204928195-1247658754.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204928195-1247658754.png" alt="img"></a></p>
<p>4ã€ä½¿ç”¨zkCli.cmdæµ‹è¯•</p>
<p>åˆ†åˆ«ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨zkServer.cmdå’ŒzkCli.cmdï¼š</p>
<ul>
<li>ls /ï¼šåˆ—å‡ºzookeeperæ ¹ä¸‹ä¿å­˜çš„æ‰€æœ‰èŠ‚ç‚¹</li>
<li>create â€“e /qjd 123ï¼šåˆ›å»ºä¸€ä¸ªqjdèŠ‚ç‚¹ï¼Œå€¼ä¸º123</li>
<li>get /qjdï¼šè·å–/qjdèŠ‚ç‚¹çš„å€¼</li>
</ul>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204939282-995406224.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204939282-995406224.png" alt="img"></a></p>
<h4 id="16-5-3ã€windowsä¸‹å®‰è£…dubbo-admin"><a href="#16-5-3ã€windowsä¸‹å®‰è£…dubbo-admin" class="headerlink" title="16.5.3ã€windowsä¸‹å®‰è£…dubbo-admin"></a>16.5.3ã€windowsä¸‹å®‰è£…dubbo-admin</h4><p>dubboæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæœåŠ¡è½¯ä»¶ã€‚å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªjaråŒ…ï¼Œèƒ½å¤Ÿå¸®ä½ çš„javaç¨‹åºè¿æ¥åˆ°zookeeperï¼Œå¹¶åˆ©ç”¨zookeeperæ¶ˆè´¹ã€æä¾›æœåŠ¡ã€‚</p>
<p>ä½†æ˜¯ä¸ºäº†è®©ç”¨æˆ·æ›´å¥½çš„ç®¡ç†ç›‘æ§ä¼—å¤šçš„dubboæœåŠ¡ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–çš„ç›‘æ§ç¨‹åºdubbo-adminï¼Œä¸è¿‡è¿™ä¸ªç›‘æ§å³ä½¿ä¸è£…ä¹Ÿä¸å½±å“ä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œæ¥å®‰è£…ä¸€ä¸‹ï¼šè¿™é‡Œè§†é¢‘è®²è§£çš„æ˜¯2.0ç‰ˆæœ¬ï¼Œä½†æ˜¯ç°åœ¨å·²ç»æ›´æ–°åˆ°3.0 ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥3.0ç‰ˆæœ¬éœ€è¦æˆ‘ä»¬è‡ªå·±å»å®˜ç½‘å­¦ä¹ ï¼Œè¿™é‡Œè®°å½•çš„çš„æ˜¯2.0ç‰ˆæœ¬ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æ‰¾2.0ç‰ˆæœ¬çš„ä¸‹è½½èµ„æº</p>
<p><strong>1ã€ä¸‹è½½dubbo-admin</strong></p>
<p>åœ°å€ ï¼š<a href="https://github.com/apache/dubbo-admin/tree/master">https://github.com/apache/dubbo-admin/tree/master</a></p>
<p><strong>2ã€è§£å‹è¿›å…¥ç›®å½•</strong></p>
<p>ä¿®æ”¹ dubbo-admin\src\main\resources \application.properties æŒ‡å®šzookeeperåœ°å€(å¦‚æœzookeeperæ²¡æœ‰ä¿®æ”¹è¿‡å°±ä¸ç”¨åŠ¨)</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">7001</span></span><br><span class="line"><span class="attr">spring.velocity.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.velocity.charset</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="attr">spring.velocity.layout-url</span>=<span class="string">/templates/default.vm</span></span><br><span class="line"><span class="attr">spring.messages.fallback-to-system-locale</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">i18n/message</span></span><br><span class="line"><span class="attr">spring.root.password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.guest.password</span>=<span class="string">guest</span></span><br><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒçš„åœ°å€</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br></pre></td></tr></table></figure>

<p><strong>3ã€åœ¨é¡¹ç›®ç›®å½•ä¸‹</strong>æ‰“åŒ…dubbo-admin</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">mvn clean <span class="keyword">package</span> -Dmaven.test.skip=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„è¿‡ç¨‹æœ‰ç‚¹æ…¢ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ï¼ç›´åˆ°æˆåŠŸï¼</strong></p>
<p>4ã€æ‰§è¡Œ dubbo-admin\target ä¸‹çš„dubbo-admin-0.0.1-SNAPSHOT.jar</p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">java </span>-<span class="keyword">jar </span>dubbo-admin<span class="number">-0</span>.<span class="number">0</span>.<span class="number">1</span>-SNAPSHOT.<span class="keyword">jar</span></span><br></pre></td></tr></table></figure>

<p>ã€æ³¨æ„ï¼šzookeeperçš„æœåŠ¡ä¸€å®šè¦æ‰“å¼€ï¼ã€‘</p>
<p>æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬å»è®¿é—®ä¸€ä¸‹ <a href="http://localhost:7001/">http://localhost:7001/</a> ï¼Œ è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦è¾“å…¥ç™»å½•è´¦æˆ·å’Œå¯†ç ï¼Œæˆ‘ä»¬éƒ½æ˜¯é»˜è®¤çš„root-rootï¼›</p>
<p>ç™»å½•æˆåŠŸåï¼ŒæŸ¥çœ‹ç•Œé¢</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204953773-893509397.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916204953773-893509397.png" alt="img"></a></p>
<p>å®‰è£…å®Œæˆï¼</p>
<p>3.0ç‰ˆæœ¬çš„ç®€è¦è®¾ç½®ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916205003213-1784514430.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916205003213-1784514430.png" alt="img"></a></p>
<h3 id="16-6ã€SpringBoot-Dubbo-zookeeper"><a href="#16-6ã€SpringBoot-Dubbo-zookeeper" class="headerlink" title="16.6ã€SpringBoot + Dubbo + zookeeper"></a>16.6ã€SpringBoot + Dubbo + zookeeper</h3><p><strong>1. å¯åŠ¨zookeeper ï¼</strong></p>
<p><strong>2. IDEAåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼›</strong></p>
<p><strong>3.åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œå®ç°æœåŠ¡æä¾›è€…ï¼šprovider-server ï¼Œ é€‰æ‹©webä¾èµ–å³å¯</strong></p>
<p><strong>4.é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚å–ç¥¨çš„æœåŠ¡ï¼›</strong></p>
<p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TicketService</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//zookeeperæœåŠ¡æ³¨å†Œä¸å‘ç°</span></span><br><span class="line"><span class="meta">@DubboService</span> <span class="comment">//å°†æœåŠ¡å‘å¸ƒå‡ºå»</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ”¾åœ¨å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TicketServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TicketService</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ã€Šç‹‚ç¥è¯´Javaã€‹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5.åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œå®ç°æœåŠ¡æ¶ˆè´¹è€…ï¼šconsumer-server ï¼Œ é€‰æ‹©webä¾èµ–å³å¯</strong></p>
<p><strong>6.é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·çš„æœåŠ¡ï¼›</strong></p>
<p>ç¼–å†™service</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆ‘ä»¬éœ€è¦å»æ‹¿å»æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡</span></span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>éœ€æ±‚ï¼šç°åœ¨æˆ‘ä»¬çš„ç”¨æˆ·æƒ³ä½¿ç”¨ä¹°ç¥¨çš„æœåŠ¡ï¼Œè¿™è¦æ€ä¹ˆå¼„å‘¢ ï¼Ÿ</strong></p>
<blockquote>
<p>æœåŠ¡æä¾›è€…</p>
</blockquote>
<p><strong>1ã€å°†æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘ä»¬éœ€è¦æ•´åˆDubboå’Œzookeeperï¼Œæ‰€ä»¥éœ€è¦å¯¼åŒ…</strong></p>
<p><strong>æˆ‘ä»¬ä»dubboå®˜ç½‘è¿›å…¥githubï¼Œçœ‹ä¸‹æ–¹çš„å¸®åŠ©æ–‡æ¡£ï¼Œæ‰¾åˆ°dubbo-springbootï¼Œæ‰¾åˆ°ä¾èµ–åŒ…</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<p><strong>zookeeperçš„åŒ…æˆ‘ä»¬å»mavenä»“åº“ä¸‹è½½ï¼Œzkclientï¼›</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sgroschupf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šã€æ–°ç‰ˆçš„å‘ã€‘zookeeperåŠå…¶ä¾èµ–åŒ…ï¼Œè§£å†³æ—¥å¿—å†²çªï¼Œè¿˜éœ€è¦å‰”é™¤æ—¥å¿—ä¾èµ–ï¼›</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥zookeeper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--æ’é™¤è¿™ä¸ªslf4j-log4j12--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€<strong>åœ¨springbooté…ç½®æ–‡ä»¶ä¸­é…ç½®dubboç›¸å…³å±æ€§ï¼</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#å½“å‰æœåŠ¡åº”ç”¨åå­—</span></span><br><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">provider-server</span></span><br><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br><span class="line"><span class="comment">#æ‰«ææŒ‡å®šåŒ…ä¸‹æœåŠ¡</span></span><br><span class="line"><span class="attr">dubbo.scan.base-packages</span>=<span class="string">com.qjd.service</span></span><br></pre></td></tr></table></figure>

<p><strong>3ã€åœ¨serviceçš„å®ç°ç±»ä¸­é…ç½®æœåŠ¡æ³¨è§£ï¼Œå‘å¸ƒæœåŠ¡ï¼æ³¨æ„å¯¼åŒ…é—®é¢˜</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">//å°†æœåŠ¡å‘å¸ƒå‡ºå»</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ”¾åœ¨å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TicketServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TicketService</span> &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;ã€Šç‹‚ç¥è¯´Javaã€‹&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€»è¾‘ç†è§£ ï¼šåº”ç”¨å¯åŠ¨èµ·æ¥ï¼Œdubboå°±ä¼šæ‰«ææŒ‡å®šçš„åŒ…ä¸‹å¸¦æœ‰@componentæ³¨è§£çš„æœåŠ¡ï¼Œå°†å®ƒå‘å¸ƒåœ¨æŒ‡å®šçš„æ³¨å†Œä¸­å¿ƒä¸­ï¼</strong></p>
<blockquote>
<p>æœåŠ¡æ¶ˆè´¹è€…</p>
</blockquote>
<p><strong>1ã€å¯¼å…¥ä¾èµ–ï¼Œå’Œä¹‹å‰çš„ä¾èµ–ä¸€æ ·ï¼›</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--dubbo--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--zookeeper--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sgroschupf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥zookeeper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--æ’é™¤è¿™ä¸ªslf4j-log4j12--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€<strong>é…ç½®å‚æ•°</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8002</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#å½“å‰åº”ç”¨åå­—</span></span><br><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">consumer-server</span></span><br><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br></pre></td></tr></table></figure>

<p><strong>3. æœ¬æ¥æ­£å¸¸æ­¥éª¤æ˜¯éœ€è¦å°†æœåŠ¡æä¾›è€…çš„æ¥å£æ‰“åŒ…ï¼Œç„¶åç”¨pomæ–‡ä»¶å¯¼å…¥ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥å°†æœåŠ¡çš„æ¥å£æ‹¿è¿‡æ¥ï¼Œè·¯å¾„å¿…é¡»ä¿è¯æ­£ç¡®ï¼Œå³å’ŒæœåŠ¡æä¾›è€…ç›¸åŒï¼›</strong><br><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916210852870-2081946825.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916210852870-2081946825.png" alt="img"></a></p>
<p><strong>4. å®Œå–„æ¶ˆè´¹è€…çš„æœåŠ¡ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span> <span class="comment">//æ³¨å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Reference</span> <span class="comment">//è¿œç¨‹å¼•ç”¨æŒ‡å®šçš„æœåŠ¡ï¼Œä»–ä¼šæŒ‰ç…§å…¨ç±»åè¿›è¡ŒåŒ¹é…ï¼Œçœ‹è°ç»™æ³¨å†Œä¸­å¿ƒæ³¨å†Œäº†è¿™ä¸ªå…¨ç±»å</span></span><br><span class="line">   TicketService ticketService;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bugTicket</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">ticket</span> <span class="operator">=</span> ticketService.getTicket();</span><br><span class="line">       System.out.println(<span class="string">&quot;åœ¨æ³¨å†Œä¸­å¿ƒä¹°åˆ°&quot;</span>+ticket);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5. æµ‹è¯•ç±»ç¼–å†™</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerServerApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   UserService userService;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">       userService.bugTicket();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯åŠ¨æµ‹è¯•</p>
</blockquote>
<p><strong>1. å¼€å¯zookeeper</strong></p>
<p><strong>2. æ‰“å¼€dubbo-adminå®ç°ç›‘æ§ã€å¯ä»¥ä¸ç”¨åšã€‘</strong></p>
<p><strong>3. å¼€å¯æœåŠ¡è€…</strong></p>
<p><strong>4. æ¶ˆè´¹è€…æ¶ˆè´¹æµ‹è¯•ï¼Œç»“æœï¼š</strong></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916210910423-82991503.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220916210910423-82991503.png" alt="img"></a></p>
<p><strong>ç›‘æ§ä¸­å¿ƒå¯ä»¥æŸ¥çœ‹å…·ä½“ä¿¡æ¯</strong></p>
<p><strong>è¿™å°±æ˜¯SpingBoot + dubbo + zookeeperå®ç°åˆ†å¸ƒå¼å¼€å‘çš„åº”ç”¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæœåŠ¡æ‹†åˆ†çš„æ€æƒ³ï¼›</strong></p>
<h2 id="17ã€å¾®æœåŠ¡æ¶æ„é—®é¢˜ï¼š"><a href="#17ã€å¾®æœåŠ¡æ¶æ„é—®é¢˜ï¼š" class="headerlink" title="17ã€å¾®æœåŠ¡æ¶æ„é—®é¢˜ï¼š"></a>17ã€å¾®æœåŠ¡æ¶æ„é—®é¢˜ï¼š</h2><p>åˆ†å¸ƒå¼æ¶æ„ä¼šé‡åˆ°çš„å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>
<p>1.è¿™ä¹ˆå¤šçš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯è¯¥å¦‚ä½•å»è®¿é—®ï¼Ÿ<br>2.è¿™ä¹ˆå¤šçš„æœåŠ¡ï¼ŒæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿ<br>3.è¿™ä¹ˆå¤šçš„æœåŠ¡ï¼Œè¯¥å¦‚ä½•ç®¡ç†å’Œæ²»ç†ï¼Ÿ<br>4.æœåŠ¡æŒ‚äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>SpringCloudï¼Œæ˜¯ä¸€å¥—ç”Ÿæ€ï¼Œå°±æ˜¯æ¥è§£å†³ä»¥ä¸Šåˆ†å¸ƒå¼æ¶æ„çš„å››ä¸ªé—®é¢˜</p>
<p>æƒ³ä½¿ç”¨SpringCloudï¼Œå¿…é¡»è¦æŒæ¡Springbootï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºSpirngBootçš„</p>
<p>1.SpringCloud NetFlixï¼Œå‡ºäº†ä¸€å¥—è§£å†³æ–¹æ¡ˆ</p>
<p>2.Apcahe Dubbo zookeeper ç¬¬äºŒå¥—è§£å†³æ–¹æ¡ˆ</p>
<p>APIï¼šæ²¡æœ‰ï¼Œè¦ä¹ˆæ‰¾ç¬¬ä¸‰æ–¹ï¼Œè¦ä¹ˆè‡ªå·±å®ç°</p>
<p>Dubboæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åŸºäºjavaå®ç°çš„RPCé€šä¿¡æ¡†æ¶</p>
<p>æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œzookeeperï¼Œæ²¡æœ‰ç†”æ–­æœºåˆ¶ï¼Œæ¥ä½äº†Hystrix</p>
<p>3.SpringCloud Alibaba ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC</title>
    <url>/2021/09/23/SpringMVC/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>SpringMVCæ¡†æ¶æ˜¯SSMæ¡†æ¶ä¸­ç»§Springå¦ä¸€ä¸ªé‡è¦çš„æ¡†æ¶ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯SpringMVC,å¦‚ä½•ç”¨SpringMVCæ¥æ•´åˆSSMæ¡†æ¶å‘¢ï¼Ÿ</p>
<h3 id="1-1ã€ä»€ä¹ˆæ˜¯MVC"><a href="#1-1ã€ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯MVC"></a>1.1ã€ä»€ä¹ˆæ˜¯MVC</h3><ul>
<li>MVCæ˜¯æ¨¡å‹(Model)ã€è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚æ˜¯å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚</li>
<li>MVCä¸»è¦ä½œç”¨æ˜¯é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘å¶åˆã€‚</li>
<li>MVCä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼ŒMVCæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ã€‚å½“ç„¶ä¸åŒçš„MVCå­˜åœ¨å·®å¼‚ã€‚</li>
</ul>
<p><strong>Modelï¼ˆæ¨¡å‹ï¼‰ï¼š</strong>æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®Daoï¼‰ å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚</p>
<p><strong>Viewï¼ˆè§†å›¾ï¼‰ï¼š</strong>è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p>
<p><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š</strong>æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚</p>
<p>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚</p>
<p><img src="https://img2020.cnblogs.com/blog/1363376/202104/1363376-20210411095802430-517647417.png" alt="img"></p>
<p>åœ¨webæ—©æœŸçš„å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨çš„éƒ½æ˜¯Model1ã€‚<br>Model1ä¸­ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼Œè§†å›¾å±‚å’Œæ¨¡å‹å±‚ã€‚<br><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911174252153-1705380416.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911174252153-1705380416.png" alt="img"></a></p>
<p>Model1ä¼˜ç‚¹ï¼šæ¶æ„ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆå°å‹é¡¹ç›®å¼€å‘ï¼›</p>
<p>Model1ç¼ºç‚¹ï¼šJSPèŒè´£ä¸å•ä¸€ï¼ŒèŒè´£è¿‡é‡ï¼Œä¸ä¾¿äºç»´æŠ¤ï¼›</p>
<h3 id="1-3ã€Model2æ—¶ä»£"><a href="#1-3ã€Model2æ—¶ä»£" class="headerlink" title="1.3ã€Model2æ—¶ä»£"></a>1.3ã€Model2æ—¶ä»£</h3><p>Model2æŠŠä¸€ä¸ªé¡¹ç›®åˆ†æˆä¸‰éƒ¨åˆ†ï¼ŒåŒ…æ‹¬è§†å›¾ã€æ§åˆ¶ã€æ¨¡å‹ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911174303825-2015402902.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911174303825-2015402902.png" alt="img"></a></p>
<ol>
<li>ç”¨æˆ·å‘è¯·æ±‚</li>
<li>Servletæ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li>
<li>ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™servlet</li>
<li>servletè½¬å‘åˆ°JSPï¼Œç”±JSPæ¥æ¸²æŸ“é¡µé¢</li>
<li>å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢</li>
</ol>
<p>èŒè´£åˆ†æï¼š</p>
<p><strong>Controllerï¼šæ§åˆ¶å™¨</strong></p>
<ul>
<li>å–å¾—è¡¨å•æ•°æ®</li>
<li>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</li>
<li>è½¬å‘æŒ‡å®šçš„é¡µé¢</li>
</ul>
<p><strong>Modelï¼šæ¨¡å‹</strong></p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘</li>
<li>ä¿å­˜æ•°æ®çš„çŠ¶æ€</li>
</ul>
<p><strong>Viewï¼šè§†å›¾</strong></p>
<ul>
<li>æ˜¾ç¤ºé¡µé¢</li>
</ul>
<p>Model2è¿™æ ·ä¸ä»…æé«˜çš„ä»£ç çš„å¤ç”¨ç‡ä¸é¡¹ç›®çš„æ‰©å±•æ€§ï¼Œä¸”å¤§å¤§é™ä½äº†é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚Model 1æ¨¡å¼çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘å°è§„æ¨¡é¡¹ç›®ï¼ŒModel1ä¸­JSPé¡µé¢èº«å…¼Viewå’ŒControllerä¸¤ç§è§’è‰²ï¼Œå°†æ§åˆ¶é€»è¾‘å’Œè¡¨ç°é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œä»è€Œå¯¼è‡´ä»£ç çš„é‡ç”¨æ€§éå¸¸ä½ï¼Œå¢åŠ äº†åº”ç”¨çš„æ‰©å±•æ€§å’Œç»´æŠ¤çš„éš¾åº¦ã€‚Model2æ¶ˆé™¤äº†Model1çš„ç¼ºç‚¹ã€‚</p>
<h3 id="1-4ã€å›é¡¾Servlet"><a href="#1-4ã€å›é¡¾Servlet" class="headerlink" title="1.4ã€å›é¡¾Servlet"></a>1.4ã€å›é¡¾Servlet</h3><p>1.æ–°å»ºä¸€ä¸ªMavenå·¥ç¨‹å½“åšçˆ¶å·¥ç¨‹ï¼pomä¾èµ–ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥ç›¸åº”çš„ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.å»ºç«‹ä¸€ä¸ªMoudleï¼šspringmvc-01-servlet ï¼Œ æ·»åŠ Web appçš„æ”¯æŒï¼</p>
<p>3.å¯¼å…¥servlet å’Œ jsp çš„ jar ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.ç¼–å†™ä¸€ä¸ªServletç±»ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–å‰ç«¯å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;method&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (method.equals(<span class="string">&quot;add&quot;</span>))&#123;</span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†addæ–¹æ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (method.equals(<span class="string">&quot;delete&quot;</span>))&#123;</span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†deleteæ–¹æ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è°ƒç”¨ä¸šåŠ¡å±‚</span></span><br><span class="line">        <span class="comment">//3.è§†å›¾è½¬å‘æˆ–è€…é‡å®šå‘</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/test.jsp&quot;</span>).forward(req,resp);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.ç¼–å†™Hello.jspï¼Œåœ¨WEB-INFç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªjspçš„æ–‡ä»¶å¤¹ï¼Œæ–°å»ºhello.jsp</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>6.åœ¨web.xmlä¸­æ³¨å†ŒServlet</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.qjd.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>7.é…ç½®Tomcatï¼Œå¹¶å¯åŠ¨æµ‹è¯•</p>
<p>localhost:8080/user?method=add</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911171826626-567214986.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911171826626-567214986.png" alt="img"></a></p>
<p>localhost:8080/user?method=delete</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911171834300-218937350.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911171834300-218937350.png" alt="img"></a></p>
<p>MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</p>
<ul>
<li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³• .</li>
<li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ® .</li>
<li>å¤„ç†è¯·æ±‚â€“è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†â€“å°è£…å“åº”æ•°æ® .</li>
<li>å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp / html ç­‰è¡¨ç¤ºå±‚æ•°æ® .</li>
</ul>
<p>è¯´æ˜ï¼š</p>
<p>å¸¸è§çš„æœåŠ¡å™¨ç«¯MVCæ¡†æ¶æœ‰ï¼šStrutsã€Spring MVCã€ASP.NET MVCã€Zend Frameworkã€JSFï¼›å¸¸è§å‰ç«¯MVCæ¡†æ¶ï¼švueã€angularjsã€reactã€backboneï¼›ç”±MVCæ¼”åŒ–å‡ºäº†å¦å¤–ä¸€äº›æ¨¡å¼å¦‚ï¼šMVPã€MVVM ç­‰ç­‰â€¦</p>
<h2 id="2ã€ä»€ä¹ˆæ˜¯SpringMVC"><a href="#2ã€ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯SpringMVC"></a>2ã€ä»€ä¹ˆæ˜¯SpringMVC</h2><h3 id="2-1ã€æ¦‚è¿°"><a href="#2-1ã€æ¦‚è¿°" class="headerlink" title="2.1ã€æ¦‚è¿°"></a>2.1ã€æ¦‚è¿°</h3><p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911171845568-1010061138.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911171845568-1010061138.png" alt="img"></a></p>
<p>Spring MVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚</p>
<p>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring/docs/5.2.0.RELEASE/spring-framework-reference/web.html#spring-web">https://docs.spring.io/spring/docs/5.2.0.RELEASE/spring-framework-reference/web.html#spring-web</a></p>
<p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ SpringMVCå‘¢?</p>
<p>Spring:å¤§æ‚çƒ©ï¼Œæˆ‘ä»¬å¯ä»¥å°†SpringMVCä¸­æ‰€æœ‰è¦ç”¨åˆ°çš„beanæ³¨å†Œåˆ°Springä¸­</p>
<p>Spring MVCçš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>è½»é‡çº§ï¼Œç®€å•æ˜“å­¦</li>
<li>é«˜æ•ˆ , åŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶</li>
<li>ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ</li>
<li>çº¦å®šä¼˜äºé…ç½®</li>
<li>åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰</li>
<li>ç®€æ´çµæ´»</li>
</ol>
<p>Springçš„webæ¡†æ¶å›´ç»•DispatcherServlet [ è°ƒåº¦Servlet ] è®¾è®¡ã€‚</p>
<p>DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£å½¢å¼è¿›è¡Œå¼€å‘ï¼Œååˆ†ç®€æ´ï¼›</p>
<p>æ­£å› ä¸ºSpringMVCå¥½ , ç®€å• , ä¾¿æ· , æ˜“å­¦ , å¤©ç”Ÿå’ŒSpringæ— ç¼é›†æˆ(ä½¿ç”¨SpringIoCå’ŒAop) , ä½¿ç”¨çº¦å®šä¼˜äºé…ç½® . èƒ½å¤Ÿè¿›è¡Œç®€å•çš„junitæµ‹è¯• . æ”¯æŒRestfulé£æ ¼ .å¼‚å¸¸å¤„ç† , æœ¬åœ°åŒ– , å›½é™…åŒ– , æ•°æ®éªŒè¯ , ç±»å‹è½¬æ¢ , æ‹¦æˆªå™¨ ç­‰ç­‰â€¦æ‰€ä»¥æˆ‘ä»¬è¦å­¦ä¹  .</p>
<p>æœ€é‡è¦çš„ä¸€ç‚¹è¿˜æ˜¯ç”¨çš„äººå¤š , ä½¿ç”¨çš„å…¬å¸å¤š .</p>
<h3 id="2-2ã€ä¸­å¿ƒæ§åˆ¶å™¨"><a href="#2-2ã€ä¸­å¿ƒæ§åˆ¶å™¨" class="headerlink" title="2.2ã€ä¸­å¿ƒæ§åˆ¶å™¨"></a>2.2ã€ä¸­å¿ƒæ§åˆ¶å™¨</h3><p>Springçš„webæ¡†æ¶å›´ç»•DispatcherServletè®¾è®¡ã€‚</p>
<p>DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚</p>
<p>ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„controllerå£°æ˜æ–¹å¼ã€‚</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172004460-541385700.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172004460-541385700.png" alt="img"></a></p>
<p>Spring MVCæ¡†æ¶åƒè®¸å¤šå…¶ä»–MVCæ¡†æ¶ä¸€æ ·, <strong>ä»¥è¯·æ±‚ä¸ºé©±åŠ¨</strong> , <strong>å›´ç»•ä¸€ä¸ªä¸­å¿ƒServletåˆ†æ´¾è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½</strong>ï¼Œ**DispatcherServletæ˜¯ä¸€ä¸ªå®é™…çš„Servlet (å®ƒç»§æ‰¿è‡ªHttpServlet åŸºç±»)**ã€‚</p>
<p>ï¼ˆDispatcherServletæœ¬è´¨ä¸Šè¿˜æ˜¯Servletï¼‰</p>
<p>SpringMVCçš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>å½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…</p>
<p>åŸå›¾ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172054625-2064238868.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172054625-2064238868.png" alt="img"></a></p>
<p>ä¸­æ–‡å›¾ï¼š</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172102309-1513130858.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172102309-1513130858.png" alt="img"></a></p>
<h3 id="2-3ã€SpringMVCæ‰§è¡ŒåŸç†"><a href="#2-3ã€SpringMVCæ‰§è¡ŒåŸç†" class="headerlink" title="2.3ã€SpringMVCæ‰§è¡ŒåŸç†"></a>2.3ã€SpringMVCæ‰§è¡ŒåŸç†</h3><p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172133823-665676535.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172133823-665676535.png" alt="img"></a></p>
<p>å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p>
<p><strong>DispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒ</strong></p>
<p>ç®€è¦åˆ†ææ‰§è¡Œæµç¨‹</p>
<p>234ï¼šé€‚é…æ”¶åˆ°çš„è¯·æ±‚åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ï¼ˆæ ¹æ®helloæ‰¾åˆ°å¤„ç†å™¨Handlerï¼‰</p>
<p>5678ï¼šè¿™ä¸ªè¯·æ±‚å…·ä½“åšä»€ä¹ˆ(æ‰¾HelloControlleræ‰§è¡Œ)</p>
<p>91011ï¼šè§†å›¾è§£æ</p>
<p>1ã€DispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒã€‚ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServletæ¥æ”¶è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚</p>
<ol>
<li> æˆ‘ä»¬å‡è®¾è¯·æ±‚çš„urlä¸º : <a href="http://localhost:8080/SpringMVC/hello">http://localhost:8080/SpringMVC/hello</a></li>
<li> å¦‚ä¸Šurlæ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼š</li>
<li> <a href="http://localhost:8080/">http://localhost:8080</a> â€”â€”&gt; æœåŠ¡å™¨åŸŸå</li>
<li> SpringMVC â€”â€”&gt; éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„webç«™ç‚¹</li>
<li> hello â€”â€”&gt; è¡¨ç¤ºæ§åˆ¶å™¨</li>
<li> é€šè¿‡åˆ†æï¼Œå¦‚ä¸Šurlè¡¨ç¤ºä¸ºï¼šè¯·æ±‚ä½äºæœåŠ¡å™¨localhost:8080ä¸Šçš„SpringMVCç«™ç‚¹çš„helloæ§åˆ¶å™¨ã€‚</li>
</ol>
<p>2ã€HandlerMappingä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServletè°ƒç”¨HandlerMapping,HandlerMappingæ ¹æ®è¯·æ±‚urlæŸ¥æ‰¾Handlerã€‚</p>
<p>3ã€HandlerExecutionè¡¨ç¤ºå…·ä½“çš„Handler,å…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®urlæŸ¥æ‰¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šurlè¢«æŸ¥æ‰¾æ§åˆ¶å™¨ä¸ºï¼šhelloã€‚</p>
<p>4ã€HandlerExecutionå°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™DispatcherServlet,å¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚</p>
<p>5ã€HandlerAdapterè¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡ŒHandlerã€‚</p>
<p>6ã€Handlerè®©å…·ä½“çš„Controlleræ‰§è¡Œã€‚</p>
<p>7ã€Controllerå°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™HandlerAdapter,å¦‚ModelAndViewã€‚</p>
<p>8ã€HandlerAdapterå°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™DispatcherServletã€‚</p>
<p>9ã€DispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨(ViewResolver)æ¥è§£æHandlerAdapterä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚</p>
<p>10ã€è§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™DispatcherServletã€‚</p>
<p>11ã€DispatcherServletæ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚</p>
<p>12ã€æœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
<h2 id="3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº"><a href="#3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº" class="headerlink" title="3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº"></a>3ã€ç¬¬ä¸€ä¸ªMVCç¨‹åº</h2><h3 id="3-1ã€é…ç½®ç‰ˆ"><a href="#3-1ã€é…ç½®ç‰ˆ" class="headerlink" title="3.1ã€é…ç½®ç‰ˆ"></a>3.1ã€é…ç½®ç‰ˆ</h3><ol>
<li>æ–°å»ºä¸€ä¸ªMoudle ï¼Œ springmvc-02-hello ï¼Œ æ·»åŠ webçš„æ”¯æŒï¼</li>
<li>ç¡®å®šå¯¼å…¥äº†SpringMVC çš„ä¾èµ–ï¼</li>
<li>é…ç½®web.xml ï¼Œ æ³¨å†ŒDispatcherServlet</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.æ³¨å†ŒDispatcherServlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å…³è”ä¸€ä¸ªspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 4.ç¼–å†™SpringMVC çš„ é…ç½®æ–‡ä»¶ï¼åç§°ï¼šspringmvc-servlet.xml : [servletname]-servlet.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ  å¤„ç†æ˜ å°„å™¨ï¼ˆå¯çœç•¥ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  å¤„ç†å™¨é€‚é…å™¨ï¼ˆå¯çœç•¥ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView</span></span><br><span class="line"><span class="comment">      1.è·å–äº†ModelAndViewæ•°æ®</span></span><br><span class="line"><span class="comment">      2.è§£æModelAndViewçš„è§†å›¾åå­—</span></span><br><span class="line"><span class="comment">      3.æ‹¼æ¥è§†å›¾åå­—ï¼Œæ‰¾åˆ°å¯¹åº”çš„è§†å›¾</span></span><br><span class="line"><span class="comment">      4.å°†æ•°æ®æ¸²æŸ“åˆ°è¿™ä¸ªè§†å›¾ä¸Š</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Handler--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.qjd.controller.HelloController&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5.ç¼–å†™æˆ‘ä»¬è¦æ“ä½œä¸šåŠ¡Controller ï¼Œè¦ä¹ˆå®ç°Controlleræ¥å£ï¼Œè¦ä¹ˆå¢åŠ æ³¨è§£ï¼›éœ€è¦è¿”å›ä¸€ä¸ªModelAndViewï¼Œè£…æ•°æ®ï¼Œå°è§†å›¾ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å…ˆå¯¼å…¥Controlleræ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//ModelAndView æ¨¡å‹å’Œè§†å›¾</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…å¯¹è±¡ï¼Œæ”¾åœ¨ModelAndViewä¸­ã€‚Model</span></span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;HelloSpringMVC!&quot;</span>);</span><br><span class="line">        <span class="comment">//å°è£…è¦è·³è½¬çš„è§†å›¾ï¼Œæ”¾åœ¨ModelAndViewä¸­</span></span><br><span class="line">        mv.setViewName(<span class="string">&quot;hello&quot;</span>); <span class="comment">//: /WEB-INF/jsp/hello.jsp</span></span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.å°†è‡ªå·±çš„ç±»äº¤ç»™SpringIOCå®¹å™¨ï¼Œæ³¨å†Œbean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Handler--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.qjd.controller.HelloController&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>7.å†™è¦è·³è½¬çš„jspé¡µé¢ï¼Œæ˜¾ç¤ºModelandViewå­˜æ”¾çš„æ•°æ®ï¼Œä»¥åŠæˆ‘ä»¬çš„æ­£å¸¸é¡µé¢ï¼›</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>8.é…ç½®Tomcat å¯åŠ¨æµ‹è¯•ï¼</p>
<p>9.æµ‹è¯•ç»“æœ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172154526-898978337.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172154526-898978337.png" alt="img"></a></p>
<p><strong>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šè®¿é—®å‡ºç°404ï¼Œæ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯ç¼ºå°‘äº†ä»€ä¹ˆjaråŒ…ã€‚</li>
<li>å¦‚æœjaråŒ…å­˜åœ¨ï¼Œæ˜¾ç¤ºæ— æ³•è¾“å‡ºï¼Œå°±åœ¨IDEAçš„é¡¹ç›®å‘å¸ƒä¸­ï¼Œæ·»åŠ libä¾èµ–ï¼</li>
<li>é‡å¯Tomcat å³å¯è§£å†³ï¼</li>
</ol>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172206227-915746704.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172206227-915746704.png" alt="img"></a></p>
<h3 id="3-2ã€æ³¨è§£ç‰ˆ"><a href="#3-2ã€æ³¨è§£ç‰ˆ" class="headerlink" title="3.2ã€æ³¨è§£ç‰ˆ"></a>3.2ã€æ³¨è§£ç‰ˆ</h3><ol>
<li><p><strong>æ–°å»ºä¸€ä¸ªMoudleï¼Œspringmvc-03-hello-annotation ã€‚æ·»åŠ webæ”¯æŒï¼</strong></p>
</li>
<li><p>ç”±äºMavenå¯èƒ½å­˜åœ¨èµ„æºè¿‡æ»¤çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†é…ç½®å®Œå–„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨pom.xmlæ–‡ä»¶å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼šä¸»è¦æœ‰Springæ¡†æ¶æ ¸å¿ƒåº“ã€Spring MVCã€servlet , JSTLç­‰ã€‚æˆ‘ä»¬åœ¨çˆ¶ä¾èµ–ä¸­å·²ç»å¼•å…¥äº†ï¼</p>
</li>
<li><p><strong>é…ç½®web.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--1.æ³¨å†Œservlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œè¿›è¡Œå…³è”--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯åŠ¨é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œå¯åŠ¨è¶Šæ—© --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«springmvcæ‹¦æˆª --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>/ å’Œ /* çš„åŒºåˆ«ï¼š</p>
<ul>
<li>&lt; url-pattern &gt; / &lt;/ url-pattern &gt; ä¸ä¼šåŒ¹é…åˆ°.jspï¼Œ åªé’ˆå¯¹æˆ‘ä»¬ç¼–å†™çš„è¯·æ±‚ï¼›å³ï¼š.jsp ä¸ä¼šè¿›å…¥springçš„ DispatcherServletç±» ã€‚</li>
<li>&lt; url-pattern &gt; /* &lt;/ url-pattern &gt; ä¼šåŒ¹é… *.jspï¼Œä¼šå‡ºç°è¿”å› jspè§†å›¾ æ—¶å†æ¬¡è¿›å…¥springçš„DispatcherServlet ç±»ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å¯¹åº”çš„controlleræ‰€ä»¥æŠ¥404é”™ã€‚</li>
</ul>
</li>
<li><p><strong>æ·»åŠ Spring MVCé…ç½®æ–‡ä»¶</strong></p>
<p>åœ¨resourceç›®å½•ä¸‹æ·»åŠ springmvc-servlet.xmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®çš„å½¢å¼ä¸Springå®¹å™¨é…ç½®åŸºæœ¬ç±»ä¼¼ï¼Œä¸ºäº†æ”¯æŒåŸºäºæ³¨è§£çš„IOCï¼Œè®¾ç½®äº†è‡ªåŠ¨æ‰«æåŒ…çš„åŠŸèƒ½ï¼Œå…·ä½“é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.qjd.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº     .css  .js .html ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨è§†å›¾è§£æå™¨ä¸­æˆ‘ä»¬æŠŠæ‰€æœ‰çš„è§†å›¾éƒ½å­˜æ”¾åœ¨/WEB-INF/ç›®å½•ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è§†å›¾å®‰å…¨ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥è®¿é—®ã€‚</p>
<ul>
<li>è®©IOCçš„æ³¨è§£ç”Ÿæ•ˆ</li>
<li>é™æ€èµ„æºè¿‡æ»¤ ï¼šHTML . JS . CSS . å›¾ç‰‡ ï¼Œ è§†é¢‘ â€¦<ul>
<li>MVCçš„æ³¨è§£é©±åŠ¨</li>
<li>é…ç½®è§†å›¾è§£æå™¨</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>åˆ›å»ºController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qjd.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/HelloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//çœŸå®è®¿é—®åœ°å€ : é¡¹ç›®å/HelloController/hello</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…æ•°æ®,å‘æ¨¡å‹ä¸­æ·»åŠ å±æ€§msgä¸å€¼ï¼Œå¯ä»¥åœ¨JSPé¡µé¢ä¸­å–å‡ºå¹¶æ¸²æŸ“</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello,springmvc annotation!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¼šè¢«è§†å›¾è§£æå™¨å¤„ç†,web-inf/jsp/hello.jsp</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Controlleræ˜¯ä¸ºäº†è®©Spring IOCå®¹å™¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ‰«æåˆ°ï¼›</li>
<li>@RequestMappingæ˜¯ä¸ºäº†æ˜ å°„è¯·æ±‚è·¯å¾„ï¼Œè¿™é‡Œå› ä¸ºç±»ä¸æ–¹æ³•ä¸Šéƒ½æœ‰æ˜ å°„æ‰€ä»¥è®¿é—®æ—¶åº”è¯¥æ˜¯/HelloController/helloï¼›</li>
<li>æ–¹æ³•ä¸­å£°æ˜Modelç±»å‹çš„å‚æ•°æ˜¯ä¸ºäº†æŠŠActionä¸­çš„æ•°æ®å¸¦åˆ°è§†å›¾ä¸­ï¼›</li>
<li>æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯è§†å›¾çš„åç§°helloï¼ŒåŠ ä¸Šé…ç½®æ–‡ä»¶ä¸­çš„å‰åç¼€å˜æˆWEB-INF/jsp/hello.jsp</li>
</ul>
</li>
<li><p><strong>åˆ›å»ºè§†å›¾å±‚</strong></p>
<p>åœ¨WEB-INF/ jspç›®å½•ä¸­åˆ›å»ºhello.jsp ï¼Œ è§†å›¾å¯ä»¥ç›´æ¥å–å‡ºå¹¶å±•ç¤ºä»Controllerå¸¦å›çš„ä¿¡æ¯ï¼›</p>
<p>å¯ä»¥é€šè¿‡ELè¡¨ç¤ºå–å‡ºModelä¸­å­˜æ”¾çš„å€¼ï¼Œæˆ–è€…å¯¹è±¡ï¼›</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>é…ç½®Tomcatè¿è¡Œ</strong></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172237901-1290051726.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172237901-1290051726.png" alt="img"></a></p>
</li>
</ol>
<p>å°ç»“:</p>
<p>å®ç°æ­¥éª¤å…¶å®éå¸¸çš„ç®€å•ï¼š</p>
<ul>
<li>æ–°å»ºä¸€ä¸ªwebé¡¹ç›®</li>
<li>å¯¼å…¥ç›¸å…³jaråŒ…</li>
<li>ç¼–å†™web.xml , æ³¨å†ŒDispatcherServlet</li>
<li>ç¼–å†™springmvcé…ç½®æ–‡ä»¶</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯å»åˆ›å»ºå¯¹åº”çš„æ§åˆ¶ç±» , controller</li>
<li>æœ€åå®Œå–„å‰ç«¯è§†å›¾å’Œcontrollerä¹‹é—´çš„å¯¹åº”</li>
<li>æµ‹è¯•è¿è¡Œè°ƒè¯•.</li>
</ul>
<p>ä½¿ç”¨springMVCå¿…é¡»é…ç½®çš„ä¸‰å¤§ä»¶:</p>
<p>å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨</p>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰‹åŠ¨é…ç½®è§†å›¾è§£æå™¨ï¼Œè€Œå¤„ç†å™¨æ˜ å°„å™¨å’Œå¤„ç†å™¨é€‚é…å™¨åªéœ€è¦å¼€å¯æ³¨è§£é©±åŠ¨å³å¯ï¼Œè€Œçœå»äº†å¤§æ®µçš„xmlé…ç½®</p>
<h2 id="4ã€Controllerå’ŒRestFul"><a href="#4ã€Controllerå’ŒRestFul" class="headerlink" title="4ã€Controllerå’ŒRestFul"></a>4ã€Controllerå’ŒRestFul</h2><h3 id="4-1ã€æ§åˆ¶å™¨Controller"><a href="#4-1ã€æ§åˆ¶å™¨Controller" class="headerlink" title="4.1ã€æ§åˆ¶å™¨Controller"></a>4.1ã€æ§åˆ¶å™¨Controller</h3><ul>
<li>æ§åˆ¶å™¨å¤æ‚æä¾›è®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œé€šå¸¸é€šè¿‡æ¥å£å®šä¹‰æˆ–æ³¨è§£å®šä¹‰ä¸¤ç§æ–¹æ³•å®ç°ã€‚</li>
<li>æ§åˆ¶å™¨è´Ÿè´£è§£æç”¨æˆ·çš„è¯·æ±‚å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ¨¡å‹ã€‚</li>
<li>åœ¨Spring MVCä¸­ä¸€ä¸ªæ§åˆ¶å™¨ç±»å¯ä»¥åŒ…å«å¤šä¸ªæ–¹æ³•</li>
<li>åœ¨Spring MVCä¸­ï¼Œå¯¹äºControllerçš„é…ç½®æ–¹å¼æœ‰å¾ˆå¤šç§</li>
</ul>
<h3 id="4-2ã€å®ç°Controlleræ¥å£"><a href="#4-2ã€å®ç°Controlleræ¥å£" class="headerlink" title="4.2ã€å®ç°Controlleræ¥å£"></a>4.2ã€å®ç°Controlleræ¥å£</h3><p>Controlleræ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨org.springframework.web.servlet.mvcåŒ…ä¸‹ï¼Œæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®ç°è¯¥æ¥å£çš„ç±»è·å¾—æ§åˆ¶å™¨åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">   <span class="comment">//å¤„ç†è¯·æ±‚ä¸”è¿”å›ä¸€ä¸ªæ¨¡å‹ä¸è§†å›¾å¯¹è±¡</span></span><br><span class="line">   ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest var1, HttpServletResponse var2)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•</strong></p>
<ol>
<li><p>æ–°å»ºä¸€ä¸ªMoudleï¼Œspringmvc-04-controllerï¼</p>
</li>
<li><p>springmvc-02-hellomvcä¸­mvcçš„é…ç½®æ–‡ä»¶åªç•™ä¸‹ è§†å›¾è§£æå™¨ï¼</p>
</li>
<li><p>ç¼–å†™ä¸€ä¸ªControllerç±»ï¼ŒControllerTest1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åªè¦æ˜¯å®ç°äº†Controlleræ¥å£çš„ç±»ï¼Œå°±è¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨äº†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest1</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ControllerTest01&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;test&quot;</span>);<span class="comment">//è·³è½¬åˆ°test.jsp</span></span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™å®Œæ¯•åï¼Œå»Springé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œè¯·æ±‚çš„beanï¼›nameå¯¹åº”è¯·æ±‚è·¯å¾„ï¼Œclasså¯¹åº”å¤„ç†è¯·æ±‚çš„ç±»</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.qjd.controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº     .css  .js .html ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">       åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">       è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">       å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">       å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">       è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">       è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä»¥ä¸Šå¯ä»¥çœç•¥ï¼Œæ˜¯é»˜è®¤é…ç½®   --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView</span></span><br><span class="line"><span class="comment">      1.è·å–äº†ModelAndViewæ•°æ®</span></span><br><span class="line"><span class="comment">      2.è§£æModelAndViewçš„è§†å›¾åå­—</span></span><br><span class="line"><span class="comment">      3.æ‹¼æ¥è§†å›¾åå­—ï¼Œæ‰¾åˆ°å¯¹åº”çš„è§†å›¾</span></span><br><span class="line"><span class="comment">      4.å°†æ•°æ®æ¸²æŸ“åˆ°è¿™ä¸ªè§†å›¾ä¸Š</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;/t1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.qjd.controller.ControllerTest1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>å†™å‰ç«¯test.jspï¼Œæ³¨æ„åœ¨WEB-INF/jspç›®å½•ä¸‹ç¼–å†™ï¼Œå¯¹åº”æˆ‘ä»¬çš„è§†å›¾è§£æå™¨</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  $END$</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®Tomcatè¿è¡Œæµ‹è¯•</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172256454-999447810.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172256454-999447810.png" alt="img"></a></p>
</li>
</ol>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>å®ç°æ¥å£Controllerå®šä¹‰æ§åˆ¶å™¨æ˜¯è¾ƒè€çš„åŠæ³•</li>
<li>ç¼ºç‚¹æ˜¯ï¼šä¸€ä¸ªæ§åˆ¶å™¨ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚æœè¦å¤šä¸ªæ–¹æ³•åˆ™éœ€è¦å®šä¹‰å¤šä¸ªControllerï¼›å®šä¹‰çš„æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼›</li>
</ul>
<h3 id="4-3ã€ä½¿ç”¨æ³¨è§£-Controller"><a href="#4-3ã€ä½¿ç”¨æ³¨è§£-Controller" class="headerlink" title="4.3ã€ä½¿ç”¨æ³¨è§£@Controller"></a>4.3ã€ä½¿ç”¨æ³¨è§£@Controller</h3><p><strong>ä¸éœ€è¦åœ¨springmvc-servlet.xmlä¸­æ³¨å†Œbean</strong></p>
<ul>
<li><p>@Controlleræ³¨è§£ç±»å‹ç”¨äºå£°æ˜Springç±»çš„å®ä¾‹æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆåœ¨è®²IOCæ—¶è¿˜æåˆ°äº†å¦å¤–3ä¸ªæ³¨è§£ï¼‰ï¼›</p>
</li>
<li><p>Springå¯ä»¥ä½¿ç”¨æ‰«ææœºåˆ¶æ¥æ‰¾åˆ°åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰åŸºäºæ³¨è§£çš„æ§åˆ¶å™¨ç±»ï¼Œä¸ºäº†ä¿è¯Springèƒ½æ‰¾åˆ°ä½ çš„æ§åˆ¶å™¨ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ç»„ä»¶æ‰«æã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.qjd.controller&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>å¢åŠ ä¸€ä¸ªControllerTest2ç±»ï¼Œä½¿ç”¨æ³¨è§£å®ç°ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">//ä»£è¡¨è¿™ä¸ªç±»ä¼šè¢«Springæ¥ç®¡,è‡ªåŠ¨æ³¨å†Œï¼Œè¢«è¿™ä¸ªæ³¨è§£çš„ç±»ä¸­çš„æ‰€æœ‰çš„æ–¹æ³•ï¼Œå¦‚æœè¿”å›å€¼æ˜¯String,å¹¶ä¸”æœ‰å…·ä½“é¡µé¢å¯ä»¥è·³è½¬ï¼Œé‚£ä¹ˆå°±ä¼šè¢«è§†å›¾è§£æå™¨è§£æ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest2</span> &#123;</span><br><span class="line">    <span class="comment">//æ˜ å°„è®¿é—®è·¯å¾„</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ControllerTest2&quot;</span>);</span><br><span class="line">        <span class="comment">//è¿”å›è§†å›¾ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index2</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//Spring MVCä¼šè‡ªåŠ¨å®ä¾‹åŒ–ä¸€ä¸ªModelå¯¹è±¡ç”¨äºå‘è§†å›¾ä¸­ä¼ å€¼</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ControllerTest3&quot;</span>);</span><br><span class="line">        <span class="comment">//è¿”å›è§†å›¾ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿è¡Œtomcatæµ‹è¯•</p>
</li>
</ul>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172310523-600400505.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172310523-600400505.png" alt="img"></a></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172319148-1590334181.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172319148-1590334181.png" alt="img"></a></p>
<p><strong>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬çš„ä¸¤ä¸ªè¯·æ±‚éƒ½å¯ä»¥æŒ‡å‘ä¸€ä¸ªè§†å›¾(test)ï¼Œä½†æ˜¯é¡µé¢ç»“æœçš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œä»è¿™é‡Œå¯ä»¥çœ‹å‡ºè§†å›¾æ˜¯è¢«å¤ç”¨çš„ï¼Œè€Œæ§åˆ¶å™¨ä¸è§†å›¾ä¹‹é—´æ˜¯å¼±å¶åˆå…³ç³»ã€‚</strong></p>
<p><strong>æ³¨è§£æ–¹å¼æ˜¯å¹³æ—¶ä½¿ç”¨çš„æœ€å¤šçš„æ–¹å¼ï¼</strong></p>
<h3 id="4-4ã€RequestMapping"><a href="#4-4ã€RequestMapping" class="headerlink" title="4.4ã€RequestMapping"></a>4.4ã€RequestMapping</h3><blockquote>
<p>@RequestMapping</p>
</blockquote>
<p>@RequestMappingæ³¨è§£ç”¨äºæ˜ å°„urlåˆ°æ§åˆ¶å™¨ç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„å¤„ç†ç¨‹åºæ–¹æ³•ã€‚å¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/c3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest3</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//http://localhost:8080/c3/t1</span></span><br><span class="line"><span class="comment">//ç­‰ä»·ä¸ºç±»ä¸Šçš„@RequestMappingä¸å†™ï¼Œæ–¹æ³•ä¸Šçš„@RequestMappingä¸º @RequestMapping(&quot;/c3/t1&quot;)</span></span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172335504-923570148.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172335504-923570148.png" alt="img"></a></p>
<h3 id="4-5ã€RestFul-é£æ ¼"><a href="#4-5ã€RestFul-é£æ ¼" class="headerlink" title="4.5ã€RestFul é£æ ¼"></a>4.5ã€RestFul é£æ ¼</h3><p>æ¦‚å¿µï¼š</p>
<p>Restfulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p>
<p>ç‰¹ç‚¹ï¼šç®€æ´ã€é«˜æ•ˆã€å®‰å…¨</p>
<p>åŠŸèƒ½</p>
<p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº</p>
<p>èµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚</p>
<p>åˆ†åˆ«å¯¹åº” æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚</p>
<p>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº ï¼šé€šè¿‡ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼æ–¹æ³•å•ä¸€ï¼Œpost å’Œ get</p>
<ul>
<li><a href="http://127.0.0.1/item/queryItem.action?id=1">http://127.0.0.1/item/queryItem.action?id=1</a> æŸ¥è¯¢,GET</li>
<li><a href="http://127.0.0.1/item/saveItem.action">http://127.0.0.1/item/saveItem.action</a> æ–°å¢,POST</li>
<li><a href="http://127.0.0.1/item/updateItem.action">http://127.0.0.1/item/updateItem.action</a> æ›´æ–°,POST</li>
<li><a href="http://127.0.0.1/item/deleteItem.action?id=1">http://127.0.0.1/item/deleteItem.action?id=1</a> åˆ é™¤,GETæˆ–POST</li>
</ul>
<p>ä½¿ç”¨RESTfulæ“ä½œèµ„æº ï¼šå¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒï¼</p>
<ul>
<li><a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> æŸ¥è¯¢,GET</li>
<li><a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ–°å¢,POST</li>
<li><a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ›´æ–°,PUT</li>
<li><a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> åˆ é™¤,DELETE</li>
</ul>
<p><strong>å­¦ä¹ æµ‹è¯•</strong></p>
<ol>
<li><p>åœ¨æ–°å»ºä¸€ä¸ªç±» RestFulController</p>
</li>
<li><p>åœ¨Spring MVCä¸­å¯ä»¥ä½¿ç”¨ @PathVariable æ³¨è§£ï¼Œè®©æ–¹æ³•å‚æ•°çš„å€¼å¯¹åº”ç»‘å®šåˆ°ä¸€ä¸ªURIæ¨¡æ¿å˜é‡ä¸Šã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestFulController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŸæ¥ï¼šhttp://localhost:8080/add?a=1&amp;b=2</span></span><br><span class="line">    <span class="comment">//RestFulï¼šhttp://localhost:8080/add/a/b</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(name = &quot;/add/&#123;a&#125;/&#123;b&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> a, <span class="meta">@PathVariable</span> <span class="type">int</span> b, Model model)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> a + b;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç»“æœ1ä¸º&quot;</span>+res);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> a, <span class="meta">@PathVariable</span> <span class="type">int</span> b, Model model)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> a + b;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç»“æœ2ä¸º&quot;</span>+res);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172356227-1698353205.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172356227-1698353205.png" alt="img"></a></p>
<ol>
<li>æ€è€ƒï¼šä½¿ç”¨è·¯å¾„å˜é‡çš„å¥½å¤„ï¼Ÿ<ul>
<li>ä½¿è·¯å¾„å˜å¾—æ›´åŠ ç®€æ´ï¼›</li>
<li>è·å¾—å‚æ•°æ›´åŠ æ–¹ä¾¿ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li>
<li>é€šè¿‡è·¯å¾„å˜é‡çš„ç±»å‹å¯ä»¥çº¦æŸè®¿é—®å‚æ•°ï¼Œå¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ™è®¿é—®ä¸åˆ°å¯¹åº”çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚è¿™é‡Œè®¿é—®æ˜¯çš„è·¯å¾„æ˜¯/add/1/aï¼Œåˆ™è·¯å¾„ä¸æ–¹æ³•ä¸åŒ¹é…ï¼Œè€Œä¸ä¼šæ˜¯å‚æ•°è½¬æ¢å¤±è´¥ã€‚</li>
<li><strong>å®‰å…¨ï¼Œä¸ä¼šæš´éœ²å‚æ•°</strong></li>
</ul>
</li>
<li><strong>ä½¿ç”¨methodå±æ€§æŒ‡å®šè¯·æ±‚ç±»å‹</strong><ul>
<li>ç”¨äºçº¦æŸè¯·æ±‚çš„ç±»å‹ï¼Œå¯ä»¥æ”¶çª„è¯·æ±‚èŒƒå›´ã€‚æŒ‡å®šè¯·æ±‚è°“è¯çš„ç±»å‹å¦‚GET, POST, HEAD, OPTIONS, PUT, PATCH, DELETE, TRACEç­‰</li>
<li>æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨åœ°å€æ è¿›è¡Œè®¿é—®é»˜è®¤æ˜¯Getè¯·æ±‚ï¼Œä¼šæŠ¥é”™405ï¼š</li>
</ul>
</li>
</ol>
<p><strong>å°ç»“ï¼š</strong></p>
<p>Spring MVC çš„ @RequestMapping æ³¨è§£èƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚çš„æ–¹æ³•, æ¯”å¦‚ GET, PUT, POST, DELETE ä»¥åŠ PATCHã€‚</p>
<p><strong>æ‰€æœ‰çš„åœ°å€æ è¯·æ±‚é»˜è®¤éƒ½ä¼šæ˜¯ HTTP GET ç±»å‹çš„ã€‚</strong></p>
<p>æ–¹æ³•çº§åˆ«çš„æ³¨è§£å˜ä½“æœ‰å¦‚ä¸‹å‡ ä¸ªï¼šç»„åˆæ³¨è§£</p>
<ul>
<li>@GetMapping</li>
<li>@PostMapping</li>
<li>@PutMapping</li>
<li>@DeleteMapping</li>
<li>@PatchMapping</li>
</ul>
<p>@GetMapping æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå¹³æ—¶ä½¿ç”¨çš„ä¼šæ¯”è¾ƒå¤šï¼</p>
<p>å®ƒæ‰€æ‰®æ¼”çš„æ˜¯ @RequestMapping(method =RequestMethod.GET) çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚</p>
<h2 id="5ã€ç»“æœè·³è½¬æ–¹å¼"><a href="#5ã€ç»“æœè·³è½¬æ–¹å¼" class="headerlink" title="5ã€ç»“æœè·³è½¬æ–¹å¼"></a>5ã€ç»“æœè·³è½¬æ–¹å¼</h2><h3 id="5-1ã€ModelAndView"><a href="#5-1ã€ModelAndView" class="headerlink" title="5.1ã€ModelAndView"></a>5.1ã€ModelAndView</h3><p>è®¾ç½®ModelAndViewå¯¹è±¡ , æ ¹æ®viewçš„åç§° , å’Œè§†å›¾è§£æå™¨è·³åˆ°æŒ‡å®šçš„é¡µé¢ .</p>
<p>é¡µé¢ : {è§†å›¾è§£æå™¨å‰ç¼€} + viewName +{è§†å›¾è§£æå™¨åç¼€}</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView</span></span><br><span class="line"><span class="comment">  1.è·å–äº†ModelAndViewæ•°æ®</span></span><br><span class="line"><span class="comment">  2.è§£æModelAndViewçš„è§†å›¾åå­—</span></span><br><span class="line"><span class="comment">  3.æ‹¼æ¥è§†å›¾åå­—ï¼Œæ‰¾åˆ°å¯¹åº”çš„è§†å›¾</span></span><br><span class="line"><span class="comment">  4.å°†æ•°æ®æ¸²æŸ“åˆ°è¿™ä¸ªè§†å›¾ä¸Š</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„controllerç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest1</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        </span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ControllerTest01&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;test&quot;</span>);<span class="comment">//è·³è½¬åˆ°test.jsp</span></span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2ã€ServletAPIï¼ˆäº†è§£ï¼‰"><a href="#5-2ã€ServletAPIï¼ˆäº†è§£ï¼‰" class="headerlink" title="5.2ã€ServletAPIï¼ˆäº†è§£ï¼‰"></a>5.2ã€ServletAPIï¼ˆäº†è§£ï¼‰</h3><p>ServletAPI</p>
<p>é€šè¿‡è®¾ç½®ServletAPI , ä¸éœ€è¦è§†å›¾è§£æå™¨ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼Œäº†è§£å³å¯ï¼‰ .</p>
<ol>
<li>é€šè¿‡HttpServletResponseè¿›è¡Œè¾“å‡º</li>
<li>é€šè¿‡HttpServletResponseå®ç°é‡å®šå‘</li>
<li>é€šè¿‡HttpServletResponseå®ç°è½¬å‘</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultGo</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/result/t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       rsp.getWriter().println(<span class="string">&quot;Hello,Spring BY servlet API&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/result/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       rsp.sendRedirect(<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/result/t3&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//è½¬å‘</span></span><br><span class="line">       req.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;/result/t3&quot;</span>);</span><br><span class="line">       req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/test.jsp&quot;</span>).forward(req,rsp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3ã€SpringMVC-äº†è§£"><a href="#5-3ã€SpringMVC-äº†è§£" class="headerlink" title="5.3ã€SpringMVC(äº†è§£)"></a>5.3ã€SpringMVC(äº†è§£)</h3><p>ï¼ˆ1ï¼‰<strong>é€šè¿‡SpringMVCæ¥å®ç°è½¬å‘å’Œé‡å®šå‘ - æ— éœ€è§†å›¾è§£æå™¨ï¼›</strong></p>
<p>æµ‹è¯•å‰ï¼Œéœ€è¦å°†è§†å›¾è§£æå™¨æ³¨é‡Šæ‰</p>
<ul>
<li><p>é»˜è®¤ä¸ºforwardè½¬å‘ï¼ˆä¹Ÿå¯ä»¥åŠ ä¸Šï¼‰</p>
</li>
<li><p>redirectè½¬å‘éœ€ç‰¹åˆ«åŠ </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultSpringMVC</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm/t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//è½¬å‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//è½¬å‘äºŒ</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;forward:/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm/t3&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//é‡å®šå‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>(2)<strong>é€šè¿‡SpringMVCæ¥å®ç°è½¬å‘å’Œé‡å®šå‘ - æœ‰è§†å›¾è§£æå™¨ï¼›</strong></p>
<p>é‡å®šå‘ , ä¸éœ€è¦è§†å›¾è§£æå™¨ , æœ¬è´¨å°±æ˜¯é‡æ–°è¯·æ±‚ä¸€ä¸ªæ–°åœ°æ–¹å˜› , æ‰€ä»¥æ³¨æ„è·¯å¾„é—®é¢˜.</p>
<p>å¯ä»¥é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªè¯·æ±‚å®ç° .</p>
<ul>
<li>é»˜è®¤ä¸ºforwardè½¬å‘ï¼ˆä¸å¯ä»¥åŠ ä¸Šï¼‰</li>
<li>redirectè½¬å‘éœ€ç‰¹åˆ«åŠ </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultSpringMVC2</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm2/t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//è½¬å‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/rsm2/t2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">//é‡å®šå‘</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">       <span class="comment">//return &quot;redirect:hello.do&quot;; //hello.doä¸ºå¦ä¸€ä¸ªè¯·æ±‚/</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6ã€æ•°æ®å¤„ç†"><a href="#6ã€æ•°æ®å¤„ç†" class="headerlink" title="6ã€æ•°æ®å¤„ç†"></a>6ã€æ•°æ®å¤„ç†</h2><h3 id="6-1ã€å¤„ç†æäº¤æ•°æ®"><a href="#6-1ã€å¤„ç†æäº¤æ•°æ®" class="headerlink" title="6.1ã€å¤„ç†æäº¤æ•°æ®"></a>6.1ã€å¤„ç†æäº¤æ•°æ®</h3><p><strong>1ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(String name, Model model)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.æ¥æ”¶å‰ç«¯å‚æ•°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°å‰ç«¯çš„å‚æ•°ä¸º&quot;</span>+name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å°†è¿”å›çš„ç»“æœä¼ é€’ç»™å‰ç«¯,Model</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è§†å›¾è·³è½¬</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172444388-1504355745.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172444388-1504355745.png" alt="img"></a></p>
<p><strong>2ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´</strong></p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172455518-622443175.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172455518-622443175.png" alt="img"></a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name, Model model)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.æ¥æ”¶å‰ç«¯å‚æ•°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°å‰ç«¯çš„å‚æ•°ä¸º&quot;</span>+name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å°†è¿”å›çš„ç»“æœä¼ é€’ç»™å‰ç«¯,Model</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è§†å›¾è·³è½¬</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172509543-1141783853.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172509543-1141783853.png" alt="img"></a></p>
<p><strong>3ã€æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</strong></p>
<p>è¦æ±‚æäº¤çš„è¡¨å•åŸŸå’Œå¯¹è±¡çš„å±æ€§åä¸€è‡´ , å‚æ•°ä½¿ç”¨å¯¹è±¡å³å¯</p>
<p>å®ä½“ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserControllerï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‰ç«¯æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¯¹è±¡  :  id,name,age</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/t2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">(User user,Model model)</span>&#123;</span><br><span class="line"></span><br><span class="line">    System.out.println(user);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,user);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172523110-1071683498.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172523110-1071683498.png" alt="img"></a></p>
<p>è¯´æ˜ï¼šå¦‚æœä½¿ç”¨å¯¹è±¡çš„è¯ï¼Œå‰ç«¯ä¼ é€’çš„å‚æ•°åå’Œå¯¹è±¡åå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™å°±æ˜¯nullã€‚</p>
<h3 id="6-2ã€æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"><a href="#6-2ã€æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯" class="headerlink" title="6.2ã€æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"></a>6.2ã€æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯</h3><p><strong>ç¬¬ä¸€ç§ : é€šè¿‡ModelAndView</strong></p>
<p>æˆ‘ä»¬ä¹‹å‰ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ï¼Œè¿™é‡Œå°±ä¸å†è¿‡å¤šèµ˜è¿°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerTest1</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span></span><br><span class="line">       <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">       mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ControllerTest1&quot;</span>);</span><br><span class="line">       mv.setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> mv;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬äºŒç§ : é€šè¿‡ModelMap</strong></p>
<p>ModelMap</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name, ModelMap modelMap)</span>&#123;</span><br><span class="line">   <span class="comment">//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">   <span class="comment">//ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span></span><br><span class="line">   modelMap.addAttribute(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">   System.out.println(name);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸‰ç§ : é€šè¿‡Model</strong></p>
<p>Model</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/ct2/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name, Model model)</span>&#123;</span><br><span class="line">   <span class="comment">//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">   <span class="comment">//ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span></span><br><span class="line">   model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line">   System.out.println(name);</span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3ã€å¯¹æ¯”"><a href="#6-3ã€å¯¹æ¯”" class="headerlink" title="6.3ã€å¯¹æ¯”"></a>6.3ã€å¯¹æ¯”</h3><p>å°±å¯¹äºæ–°æ‰‹è€Œè¨€ç®€å•æ¥è¯´ä½¿ç”¨åŒºåˆ«å°±æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Model åªæœ‰å¯¥å¯¥å‡ ä¸ªæ–¹æ³•åªé€‚åˆç”¨äºå‚¨å­˜æ•°æ®ï¼Œç®€åŒ–äº†æ–°æ‰‹å¯¹äºModelå¯¹è±¡çš„æ“ä½œå’Œç†è§£ï¼›</span><br><span class="line">ModelMap ç»§æ‰¿äº† LinkedMap ï¼Œé™¤äº†å®ç°äº†è‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ ·çš„ç»§æ‰¿ LinkedMap çš„æ–¹æ³•å’Œç‰¹æ€§ï¼›</span><br><span class="line">ModelAndView å¯ä»¥åœ¨å‚¨å­˜æ•°æ®çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œè®¾ç½®è¿”å›çš„é€»è¾‘è§†å›¾ï¼Œè¿›è¡Œæ§åˆ¶å±•ç¤ºå±‚çš„è·³è½¬ã€‚</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ›´å¤šçš„æ—¶å€™éƒ½æ˜¯ä½¿ç”¨Model</p>
<h2 id="7ã€ä¹±ç é—®é¢˜"><a href="#7ã€ä¹±ç é—®é¢˜" class="headerlink" title="7ã€ä¹±ç é—®é¢˜"></a>7ã€ä¹±ç é—®é¢˜</h2><p>æµ‹è¯•æ­¥éª¤ï¼š</p>
<ol>
<li><p>æˆ‘ä»¬å¯ä»¥åœ¨é¦–é¡µç¼–å†™ä¸€ä¸ªæäº¤çš„è¡¨å•</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;/e/t1&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>åå°ç¼–å†™å¯¹åº”çš„å¤„ç†ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingController</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/e/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(String name, Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è¾“å…¥ä¸­æ–‡æµ‹è¯•ä¼šå‘ç°ä¹±ç </p>
</li>
</ol>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172541422-616955256.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172541422-616955256.png" alt="img"></a></p>
<ol>
<li><p>ä»¥å‰ä¹±ç é—®é¢˜é€šè¿‡è¿‡æ»¤å™¨è§£å†³ , è€ŒSpringMVCç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè¿‡æ»¤å™¨ , å¯ä»¥åœ¨web.xmlä¸­é…ç½® .</p>
<p>ä¿®æ”¹äº†xmlæ–‡ä»¶éœ€è¦é‡å¯æœåŠ¡å™¨ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šè¿™é‡Œå†™/*ï¼Œå†™/çš„è¯è¿‡æ»¤ä¸äº†jspé¡µé¢ï¼Œä¸èƒ½è§£å†³ä¹±ç </p>
<p>ä½†æ˜¯æˆ‘ä»¬å‘ç° , æœ‰äº›æç«¯æƒ…å†µä¸‹.è¿™ä¸ªè¿‡æ»¤å™¨å¯¹getçš„æ”¯æŒä¸å¥½ .</p>
<p>å¤„ç†æ–¹æ³• :</p>
<ol>
<li><p>ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶ ï¼šè®¾ç½®ç¼–ç ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">URIEncoding</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆä¸‡èƒ½è§£å†³ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequestWrapper;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è§£å†³getå’Œpostè¯·æ±‚ å…¨éƒ¨ä¹±ç çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericEncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">       <span class="comment">//å¤„ç†responseçš„å­—ç¬¦ç¼–ç </span></span><br><span class="line">       HttpServletResponse myResponse=(HttpServletResponse) response;</span><br><span class="line">       myResponse.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// è½¬å‹ä¸ºä¸åè®®ç›¸å…³å¯¹è±¡</span></span><br><span class="line">       <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">       <span class="comment">// å¯¹requeståŒ…è£…å¢å¼º</span></span><br><span class="line">       <span class="type">HttpServletRequest</span> <span class="variable">myrequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRequest</span>(httpServletRequest);</span><br><span class="line">       chain.doFilter(myrequest, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰requestå¯¹è±¡ï¼ŒHttpServletRequestçš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRequest</span> <span class="keyword">extends</span> <span class="title class_">HttpServletRequestWrapper</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">   <span class="comment">//æ˜¯å¦ç¼–ç çš„æ ‡è®°</span></span><br><span class="line">   <span class="keyword">private</span> <span class="type">boolean</span> hasEncode;</span><br><span class="line">   <span class="comment">//å®šä¹‰ä¸€ä¸ªå¯ä»¥ä¼ å…¥HttpServletRequestå¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œè£…é¥°</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">MyRequest</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>(request);<span class="comment">// superå¿…é¡»å†™</span></span><br><span class="line">       <span class="built_in">this</span>.request = request;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å¯¹éœ€è¦å¢å¼ºæ–¹æ³• è¿›è¡Œè¦†ç›–</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Map <span class="title function_">getParameterMap</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">// å…ˆè·å¾—è¯·æ±‚æ–¹å¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">       <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;post&quot;</span>)) &#123;</span><br><span class="line">           <span class="comment">// postè¯·æ±‚</span></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="comment">// å¤„ç†postä¹±ç </span></span><br><span class="line">               request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">               <span class="keyword">return</span> request.getParameterMap();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;get&quot;</span>)) &#123;</span><br><span class="line">           <span class="comment">// getè¯·æ±‚</span></span><br><span class="line">           Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">           <span class="keyword">if</span> (!hasEncode) &#123; <span class="comment">// ç¡®ä¿getæ‰‹åŠ¨ç¼–ç é€»è¾‘åªè¿è¡Œä¸€æ¬¡</span></span><br><span class="line">               <span class="keyword">for</span> (String parameterName : parameterMap.keySet()) &#123;</span><br><span class="line">                   String[] values = parameterMap.get(parameterName);</span><br><span class="line">                   <span class="keyword">if</span> (values != <span class="literal">null</span>) &#123;</span><br><span class="line">                       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">                           <span class="keyword">try</span> &#123;</span><br><span class="line">                               <span class="comment">// å¤„ç†getä¹±ç </span></span><br><span class="line">                               values[i] = <span class="keyword">new</span> <span class="title class_">String</span>(values[i]</span><br><span class="line">                                      .getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                          &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                               e.printStackTrace();</span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">               hasEncode = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">           <span class="keyword">return</span> parameterMap;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">super</span>.getParameterMap();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//å–ä¸€ä¸ªå€¼</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getParameter</span><span class="params">(String name)</span> &#123;</span><br><span class="line">       Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">       String[] values = parameterMap.get(name);</span><br><span class="line">       <span class="keyword">if</span> (values == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">return</span> values[<span class="number">0</span>]; <span class="comment">// å–å›å‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//å–æ‰€æœ‰å€¼</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String[] getParameterValues(String name) &#123;</span><br><span class="line">       Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">       String[] values = parameterMap.get(name);</span><br><span class="line">       <span class="keyword">return</span> values;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringMVCé»˜è®¤çš„ä¹±ç å¤„ç†å°±å·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³äº†ï¼</p>
<p><strong>ç„¶ååœ¨web.xmlä¸­é…ç½®è¿™ä¸ªè¿‡æ»¤å™¨å³å¯ï¼</strong></p>
<p>ä¹±ç é—®é¢˜ï¼Œéœ€è¦å¹³æ—¶å¤šæ³¨æ„ï¼Œåœ¨å°½å¯èƒ½èƒ½è®¾ç½®ç¼–ç çš„åœ°æ–¹ï¼Œéƒ½è®¾ç½®ä¸ºç»Ÿä¸€ç¼–ç  UTF-8ï¼</p>
</li>
</ol>
</li>
</ol>
<h2 id="8ã€Jsonäº¤äº’å¤„ç†"><a href="#8ã€Jsonäº¤äº’å¤„ç†" class="headerlink" title="8ã€Jsonäº¤äº’å¤„ç†"></a>8ã€Jsonäº¤äº’å¤„ç†</h2><h3 id="8-1ã€ä»€ä¹ˆæ˜¯JSONï¼Ÿ"><a href="#8-1ã€ä»€ä¹ˆæ˜¯JSONï¼Ÿ" class="headerlink" title="8.1ã€ä»€ä¹ˆæ˜¯JSONï¼Ÿ"></a>8.1ã€ä»€ä¹ˆæ˜¯JSONï¼Ÿ</h3><ul>
<li>JSON(JavaScript Object Notation, JS å¯¹è±¡æ ‡è®°) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç›®å‰ä½¿ç”¨ç‰¹åˆ«å¹¿æ³›ã€‚</li>
<li>é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„æ–‡æœ¬æ ¼å¼æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚</li>
<li>ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚</li>
<li>æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li>
</ul>
<p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œä»»ä½•JavaScript æ”¯æŒçš„ç±»å‹éƒ½å¯ä»¥é€šè¿‡ JSON æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰ã€‚çœ‹çœ‹ä»–çš„è¦æ±‚å’Œè¯­æ³•æ ¼å¼ï¼š</p>
<ul>
<li><p>å¯¹è±¡è¡¨ç¤ºä¸ºé”®å€¼å¯¹ï¼Œæ•°æ®ç”±é€—å·åˆ†éš”</p>
</li>
<li><p>èŠ±æ‹¬å·ä¿å­˜å¯¹è±¡</p>
</li>
<li><p>æ–¹æ‹¬å·ä¿å­˜æ•°ç»„</p>
</li>
<li><p>JSON é”®å€¼å¯¹æ˜¯ç”¨æ¥ä¿å­˜ JavaScript å¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œå’Œ JavaScript å¯¹è±¡çš„å†™æ³•ä¹Ÿå¤§åŒå°å¼‚ï¼Œé”®/å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å· â€œâ€ åŒ…è£¹ï¼Œä½¿ç”¨å†’å· : åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;QinJiang&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç”·&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¾ˆå¤šäººæä¸æ¸…æ¥š JSON å’Œ JavaScript å¯¹è±¡çš„å…³ç³»ï¼Œç”šè‡³è¿è°æ˜¯è°éƒ½ä¸æ¸…æ¥šã€‚å…¶å®ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p>
<p>JSON æ˜¯ JavaScript å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ï¼Œå®ƒä½¿ç”¨æ–‡æœ¬è¡¨ç¤ºä¸€ä¸ª JS å¯¹è±¡çš„ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;a: <span class="number">&#x27;He</span>llo&#x27;, b: &#x27;World&#x27;&#125;;        <span class="comment">//è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„é”®åä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¼•å·åŒ…è£¹çš„</span></span><br><span class="line"><span class="keyword">var</span> json = &#x27;&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;b&quot;</span>: <span class="string">&quot;World&quot;</span>&#125;&#x27;; <span class="comment">//è¿™æ˜¯ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-2ã€JSON-å’Œ-JavaScript-å¯¹è±¡äº’è½¬"><a href="#8-2ã€JSON-å’Œ-JavaScript-å¯¹è±¡äº’è½¬" class="headerlink" title="8.2ã€JSON å’Œ JavaScript å¯¹è±¡äº’è½¬"></a>8.2ã€<strong>JSON å’Œ JavaScript å¯¹è±¡äº’è½¬</strong></h3><ul>
<li>è¦å®ç°ä»JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaScript å¯¹è±¡ï¼Œä½¿ç”¨ JSON.parse() æ–¹æ³•ï¼š</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj <span class="operator">=</span> <span class="type">JSON</span>.parse(&#x27;&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;b&quot;</span>: <span class="string">&quot;World&quot;</span>&#125;&#x27;);</span><br><span class="line"><span class="comment">//ç»“æœæ˜¯ &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è¦å®ç°ä»JavaScript å¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ JSON.stringify() æ–¹æ³•ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;);</span><br><span class="line"><span class="comment">//ç»“æœæ˜¯ &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä»£ç æµ‹è¯•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ç¼–å†™ä¸€ä¸ªJavaScriptå¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> user = &#123;</span></span><br><span class="line"><span class="language-javascript">            name : <span class="string">&#x27;å¤å¤&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            age : <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">            sex : <span class="string">&#x27;ç”·&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//å°†jså¯¹è±¡è½¬æ¢ä¸ºjsonå¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//å°†jsonå¯¹è±¡è½¬æ¢ä¸ºjså¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//console.log(user);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(json);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172608622-1823591832.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172608622-1823591832.png" alt="img"></a></p>
<h3 id="8-3ã€Controllerè¿”å›JSONæ•°æ®"><a href="#8-3ã€Controllerè¿”å›JSONæ•°æ®" class="headerlink" title="8.3ã€Controllerè¿”å›JSONæ•°æ®"></a>8.3ã€Controllerè¿”å›JSONæ•°æ®</h3><ul>
<li><p>Jacksonåº”è¯¥æ˜¯ç›®å‰æ¯”è¾ƒå¥½çš„jsonè§£æå·¥å…·äº†</p>
</li>
<li><p>å½“ç„¶å·¥å…·ä¸æ­¢è¿™ä¸€ä¸ªï¼Œæ¯”å¦‚è¿˜æœ‰é˜¿é‡Œå·´å·´çš„ fastjson ç­‰ç­‰ã€‚</p>
</li>
<li><p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Jacksonï¼Œä½¿ç”¨å®ƒéœ€è¦å¯¼å…¥å®ƒçš„jaråŒ…ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>é…ç½®SpringMVCéœ€è¦çš„é…ç½®</p>
<ul>
<li><p>ï¼ˆweb.xmlï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--1.æ³¨å†ŒDispatcherServlet:è¿™ä¸ªæ˜¯springmvcçš„æ ¸å¿ƒï¼›è¯·æ±‚åˆ†å‘å™¨ï¼Œå‰ç«¯æ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®SpringMVCçš„ä¹±ç è¿‡æ»¤ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>springmvc-servlet.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.qjd.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº     .css  .js .html ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æˆ‘ä»¬éšä¾¿ç¼–å†™ä¸€ä¸ªUserçš„å®ä½“ç±»ï¼Œç„¶åæˆ‘ä»¬å»ç¼–å†™æˆ‘ä»¬çš„æµ‹è¯•Controllerï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éœ€è¦å¯¼å…¥lombok</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ–°ä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯@ResponseBodyï¼Œä¸€ä¸ªæ˜¯ObjectMapperå¯¹è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸‹å…·ä½“çš„ç”¨æ³•</p>
<p>ç¼–å†™ä¸€ä¸ªControllerï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/j1&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span><span class="comment">//producesè§£å†³ä¹±ç </span></span><br><span class="line">    <span class="meta">@ResponseBody</span>   <span class="comment">//åŠ ä¸Šè¿™ä¸ªæ³¨è§£å°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//jackson ObjectMapper</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;å¤å¤&quot;</span>,<span class="number">18</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®Tomcat ï¼Œ å¯åŠ¨æµ‹è¯•ä¸€ä¸‹ï¼</p>
</li>
</ul>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172629698-350054065.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172629698-350054065.png" alt="img"></a></p>
<h3 id="8-4ã€ä»£ç ä¼˜åŒ–"><a href="#8-4ã€ä»£ç ä¼˜åŒ–" class="headerlink" title="8.4ã€ä»£ç ä¼˜åŒ–"></a>8.4ã€ä»£ç ä¼˜åŒ–</h3><p><strong>ä¹±ç ç»Ÿä¸€è§£å†³</strong></p>
<p>ä¸Šä¸€ç§æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰è®¸å¤šè¯·æ±‚åˆ™æ¯ä¸€ä¸ªéƒ½è¦æ·»åŠ ï¼Œå¯ä»¥é€šè¿‡Springé…ç½®ç»Ÿä¸€æŒ‡å®šï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½å»å¤„ç†äº†ï¼</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸Šæ·»åŠ ä¸€æ®µæ¶ˆæ¯StringHttpMessageConverterè½¬æ¢é…ç½®ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœ</p>
<p><a href="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172645450-449656055.png"><img src="https://img2022.cnblogs.com/blog/2930166/202209/2930166-20220911172645450-449656055.png" alt="img"></a></p>
<p><strong>è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³</strong></p>
<ul>
<li><p>@ResponseBodyè§£å†³ï¼ˆæ¯ä¸ªæ–¹æ³•éƒ½å¾—åŠ ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping( &quot;/j1&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span>   <span class="comment">//åŠ ä¸Šè¿™ä¸ªæ³¨è§£å°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//jackson ObjectMapper</span></span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>,<span class="string">&quot;å¤å¤&quot;</span>,<span class="number">18</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>@RestController</strong>ï¼ˆç›´æ¥åŠ åˆ°ç±»ä¸Šå³å¯ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/j1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">       <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">       <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;ç§¦ç–†ä¸€å·&quot;</span>, <span class="number">12</span>);</span><br><span class="line">       <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">       <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-5-æµ‹è¯•é›†åˆè¾“å‡º"><a href="#8-5-æµ‹è¯•é›†åˆè¾“å‡º" class="headerlink" title="8.5 æµ‹è¯•é›†åˆè¾“å‡º"></a>8.5 æµ‹è¯•é›†åˆè¾“å‡º</h2><p>å¢åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/json2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json2</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">   <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">   <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">   <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†1å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†2å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†3å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†4å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">   List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">   list.add(user1);</span><br><span class="line">   list.add(user2);</span><br><span class="line">   list.add(user3);</span><br><span class="line">   list.add(user4);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(list);</span><br><span class="line">   <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ : ååˆ†å®Œç¾ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼</p>
<p><a href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7Kr2Q3b19mdVPRfiaSSR0OQ28xBricP4KKliaicvQJJlG989xjEUftuqcibuRPWGHjOZfEA3HiaVTq4GDRw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7Kr2Q3b19mdVPRfiaSSR0OQ28xBricP4KKliaicvQJJlG989xjEUftuqcibuRPWGHjOZfEA3HiaVTq4GDRw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></a></p>
<h2 id="8-6-è¾“å‡ºæ—¶é—´å¯¹è±¡"><a href="#8-6-è¾“å‡ºæ—¶é—´å¯¹è±¡" class="headerlink" title="8.6 è¾“å‡ºæ—¶é—´å¯¹è±¡"></a>8.6 è¾“å‡ºæ—¶é—´å¯¹è±¡</h2><p>å¢åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/json3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åˆ›å»ºæ—¶é—´ä¸€ä¸ªå¯¹è±¡ï¼Œjava.util.Date</span></span><br><span class="line">   <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(date);</span><br><span class="line">   <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ :</p>
<p><a href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7Kr2Q3b19mdVPRfiaSSR0OQ2wC0G9p8rYjxUNdyVK8oCUicN5LJ9XVsLJddll3tYr28kVaXoUfO0LaQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7Kr2Q3b19mdVPRfiaSSR0OQ2wC0G9p8rYjxUNdyVK8oCUicN5LJ9XVsLJddll3tYr28kVaXoUfO0LaQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></a></p>
<ul>
<li>é»˜è®¤æ—¥æœŸæ ¼å¼ä¼šå˜æˆä¸€ä¸ªæ•°å­—ï¼Œæ˜¯1970å¹´1æœˆ1æ—¥åˆ°å½“å‰æ—¥æœŸçš„æ¯«ç§’æ•°ï¼</li>
<li>Jackson é»˜è®¤æ˜¯ä¼šæŠŠæ—¶é—´è½¬æˆtimestampså½¢å¼</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šå–æ¶ˆtimestampså½¢å¼ ï¼Œ è‡ªå®šä¹‰æ—¶é—´æ ¼å¼</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/json4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json4</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼</span></span><br><span class="line">   mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="literal">false</span>);</span><br><span class="line">   <span class="comment">//è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼å¯¹è±¡</span></span><br><span class="line">   <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">   <span class="comment">//æŒ‡å®šæ—¥æœŸæ ¼å¼</span></span><br><span class="line">   mapper.setDateFormat(sdf);</span><br><span class="line"></span><br><span class="line">   <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(date);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ : æˆåŠŸçš„è¾“å‡ºäº†æ—¶é—´ï¼</p>
<p><a href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7Kr2Q3b19mdVPRfiaSSR0OQ2AVT1icKIk8UDdWlERvmsWdgcOPvsEUr3s0lIRVzPd6IhrjiaPCDSibt2Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7Kr2Q3b19mdVPRfiaSSR0OQ2AVT1icKIk8UDdWlERvmsWdgcOPvsEUr3s0lIRVzPd6IhrjiaPCDSibt2Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></a></p>
<h2 id="8-7-æŠ½å–ä¸ºå·¥å…·ç±»"><a href="#8-7-æŠ½å–ä¸ºå·¥å…·ç±»" class="headerlink" title="8.7 æŠ½å–ä¸ºå·¥å…·ç±»"></a>8.7 æŠ½å–ä¸ºå·¥å…·ç±»</h2><p><strong>å¦‚æœè¦ç»å¸¸ä½¿ç”¨çš„è¯ï¼Œè¿™æ ·æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä»£ç å°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼›æˆ‘ä»¬å»ç¼–å†™ä¸‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonUtils</span> &#123;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> getJson(object,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object,String dateFormat)</span> &#123;</span><br><span class="line">       <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">       <span class="comment">//ä¸ä½¿ç”¨æ—¶é—´å·®çš„æ–¹å¼</span></span><br><span class="line">       mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="literal">false</span>);</span><br><span class="line">       <span class="comment">//è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼å¯¹è±¡</span></span><br><span class="line">       <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(dateFormat);</span><br><span class="line">       <span class="comment">//æŒ‡å®šæ—¥æœŸæ ¼å¼</span></span><br><span class="line">       mapper.setDateFormat(sdf);</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> mapper.writeValueAsString(object);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨å·¥å…·ç±»ï¼Œä»£ç å°±æ›´åŠ ç®€æ´äº†ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/json5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json5</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">   <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">   <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JsonUtils.getJson(date);</span><br><span class="line">   <span class="keyword">return</span> json;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤§åŠŸå‘Šæˆï¼å®Œç¾ï¼</p>
<h2 id="8-8-FastJsonï¼ˆæ¯”è¾ƒå¥½ï¼‰"><a href="#8-8-FastJsonï¼ˆæ¯”è¾ƒå¥½ï¼‰" class="headerlink" title="8.8 FastJsonï¼ˆæ¯”è¾ƒå¥½ï¼‰"></a>8.8 FastJsonï¼ˆæ¯”è¾ƒå¥½ï¼‰</h2><p>fastjson.jaræ˜¯é˜¿é‡Œå¼€å‘çš„ä¸€æ¬¾ä¸“é—¨ç”¨äºJavaå¼€å‘çš„åŒ…ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°jsonå¯¹è±¡ä¸JavaBeanå¯¹è±¡çš„è½¬æ¢ï¼Œå®ç°JavaBeanå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå®ç°jsonå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ã€‚å®ç°jsonçš„è½¬æ¢æ–¹æ³•å¾ˆå¤šï¼Œæœ€åçš„å®ç°ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>fastjson çš„ pomä¾èµ–ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.60<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>fastjson ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼š</p>
<p><strong>JSONObject ä»£è¡¨ json å¯¹è±¡</strong></p>
<ul>
<li>JSONObjectå®ç°äº†Mapæ¥å£, çŒœæƒ³ JSONObjectåº•å±‚æ“ä½œæ˜¯ç”±Mapå®ç°çš„ã€‚</li>
<li>JSONObjectå¯¹åº”jsonå¯¹è±¡ï¼Œé€šè¿‡å„ç§å½¢å¼çš„get()æ–¹æ³•å¯ä»¥è·å–jsonå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œä¹Ÿå¯åˆ©ç”¨è¯¸å¦‚size()ï¼ŒisEmpty()ç­‰æ–¹æ³•è·å–â€é”®ï¼šå€¼â€å¯¹çš„ä¸ªæ•°å’Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡å®ç°Mapæ¥å£å¹¶è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•å®Œæˆçš„ã€‚</li>
</ul>
<p><strong>JSONArray ä»£è¡¨ json å¯¹è±¡æ•°ç»„</strong></p>
<ul>
<li>å†…éƒ¨æ˜¯æœ‰Listæ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ã€‚</li>
</ul>
<p><strong>JSONä»£è¡¨ JSONObjectå’ŒJSONArrayçš„è½¬åŒ–</strong></p>
<ul>
<li>JSONç±»æºç åˆ†æä¸ä½¿ç”¨</li>
<li>ä»”ç»†è§‚å¯Ÿè¿™äº›æ–¹æ³•ï¼Œä¸»è¦æ˜¯å®ç°jsonå¯¹è±¡ï¼Œjsonå¯¹è±¡æ•°ç»„ï¼Œjavabeanå¯¹è±¡ï¼Œjsonå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸äº’è½¬åŒ–ã€‚</li>
</ul>
<p><strong>ä»£ç æµ‹è¯•ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªFastJsonDemo ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.th.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastJsonDemo</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">       <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†1å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†2å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†3å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†4å·&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">       list.add(user1);</span><br><span class="line">       list.add(user2);</span><br><span class="line">       list.add(user3);</span><br><span class="line">       list.add(user4);</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">&quot;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦ä¸²*******&quot;</span>);</span><br><span class="line">       <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> JSON.toJSONString(list);</span><br><span class="line">       System.out.println(<span class="string">&quot;JSON.toJSONString(list)==&gt;&quot;</span>+str1);</span><br><span class="line">       <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> JSON.toJSONString(user1);</span><br><span class="line">       System.out.println(<span class="string">&quot;JSON.toJSONString(user1)==&gt;&quot;</span>+str2);</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">&quot;\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******&quot;</span>);</span><br><span class="line">       User jp_user1=JSON.parseObject(str2,User.class);</span><br><span class="line">       System.out.println(<span class="string">&quot;JSON.parseObject(str2,User.class)==&gt;&quot;</span>+jp_user1);</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">&quot;\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡ ******&quot;</span>);</span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> (JSONObject) JSON.toJSON(user2);</span><br><span class="line">       System.out.println(<span class="string">&quot;(JSONObject) JSON.toJSON(user2)==&gt;&quot;</span>+jsonObject1.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line">       System.out.println(<span class="string">&quot;\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡ ******&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">to_java_user</span> <span class="operator">=</span> JSON.toJavaObject(jsonObject1, User.class);</span><br><span class="line">       System.out.println(<span class="string">&quot;JSON.toJavaObject(jsonObject1, User.class)==&gt;&quot;</span>+to_java_user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å·¥å…·ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ä½¿ç”¨å°±å¥½äº†ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™åœ¨æ ¹æ®å…·ä½“çš„ä¸šåŠ¡å»æ‰¾å¯¹åº”çš„å®ç°ã€‚å’Œä»¥å‰çš„commons-ioé‚£ç§å·¥å…·åŒ…ä¸€æ ·ï¼Œæ‹¿æ¥ç”¨å°±å¥½äº†ï¼</p>
<p>Jsonåœ¨æˆ‘ä»¬æ•°æ®ä¼ è¾“ä¸­ååˆ†é‡è¦ï¼Œä¸€å®šè¦å­¦ä¼šä½¿ç”¨ï¼</p>
<h1 id="9ã€Ajaxç ”ç©¶"><a href="#9ã€Ajaxç ”ç©¶" class="headerlink" title="9ã€Ajaxç ”ç©¶"></a>9ã€Ajaxç ”ç©¶</h1><h2 id="9-1ã€ç®€ä»‹"><a href="#9-1ã€ç®€ä»‹" class="headerlink" title="9.1ã€ç®€ä»‹"></a>9.1ã€ç®€ä»‹</h2><ul>
<li><strong>AJAX = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚</strong></li>
<li>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</li>
<li><strong>Ajax ä¸æ˜¯ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºæ›´å¥½æ›´å¿«ä»¥åŠäº¤äº’æ€§æ›´å¼ºçš„Webåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚</strong></li>
<li>åœ¨ 2005 å¹´ï¼ŒGoogle é€šè¿‡å…¶ Google Suggest ä½¿ AJAX å˜å¾—æµè¡Œèµ·æ¥ã€‚Google Suggestèƒ½å¤Ÿè‡ªåŠ¨å¸®ä½ å®Œæˆæœç´¢å•è¯ã€‚</li>
<li>Google Suggest ä½¿ç”¨ AJAX åˆ›é€ å‡ºåŠ¨æ€æ€§æå¼ºçš„ web ç•Œé¢ï¼šå½“æ‚¨åœ¨è°·æ­Œçš„æœç´¢æ¡†è¾“å…¥å…³é”®å­—æ—¶ï¼ŒJavaScript ä¼šæŠŠè¿™äº›å­—ç¬¦å‘é€åˆ°æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæœç´¢å»ºè®®çš„åˆ—è¡¨ã€‚</li>
<li>å°±å’Œå›½å†…ç™¾åº¦çš„æœç´¢æ¡†ä¸€æ ·!</li>
<li>ä¼ ç»Ÿçš„ç½‘é¡µ(å³ä¸ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µ)ï¼Œæƒ³è¦æ›´æ–°å†…å®¹æˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œéƒ½éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µã€‚</li>
<li>ä½¿ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µï¼Œé€šè¿‡åœ¨åå°æœåŠ¡å™¨è¿›è¡Œå°‘é‡çš„æ•°æ®äº¤æ¢ï¼Œå°±å¯ä»¥å®ç°å¼‚æ­¥å±€éƒ¨æ›´æ–°ã€‚</li>
<li>ä½¿ç”¨Ajaxï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºæ¥è¿‘æœ¬åœ°æ¡Œé¢åº”ç”¨çš„ç›´æ¥ã€é«˜å¯ç”¨ã€æ›´ä¸°å¯Œã€æ›´åŠ¨æ€çš„Webç”¨æˆ·ç•Œé¢ã€‚</li>
</ul>
<h2 id="9-2ã€ä¼ªé€ Ajax"><a href="#9-2ã€ä¼ªé€ Ajax" class="headerlink" title="9.2ã€ä¼ªé€ Ajax"></a>9.2ã€ä¼ªé€ Ajax</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç«¯çš„ä¸€ä¸ªæ ‡ç­¾æ¥ä¼ªé€ ä¸€ä¸ªajaxçš„æ ·å­ã€‚iframeæ ‡ç­¾</p>
<p>1ã€æ–°å»ºä¸€ä¸ªmodule ï¼šsspringmvc-06-ajax ï¼Œ å¯¼å…¥webæ”¯æŒï¼</p>
<p>2ã€ç¼–å†™ä¸€ä¸ª ajax-frame.html ä½¿ç”¨ iframe æµ‹è¯•ï¼Œæ„Ÿå—ä¸‹æ•ˆæœ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>thshen<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;currentTime&#x27;</span>).<span class="property">innerText</span> = myDate.<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span> <span class="title function_">LoadPage</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> targetUrl =  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;url&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(targetUrl);</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;iframePosition&quot;</span>).<span class="property">src</span> = targetUrl;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¯·è¾“å…¥è¦åŠ è½½çš„åœ°å€ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;currentTime&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;url&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;https://www.baidu.com/&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;LoadPage()&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>åŠ è½½é¡µé¢ä½ç½®ï¼š<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframePosition&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height: 500px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€ä½¿ç”¨IDEAå¼€æµè§ˆå™¨æµ‹è¯•ä¸€ä¸‹ï¼</p>
<p><strong>åˆ©ç”¨AJAXå¯ä»¥åšï¼š</strong></p>
<ul>
<li>æ³¨å†Œæ—¶ï¼Œè¾“å…¥ç”¨æˆ·åè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</li>
<li>ç™»é™†æ—¶ï¼Œæç¤ºç”¨æˆ·åå¯†ç é”™è¯¯</li>
<li>åˆ é™¤æ•°æ®è¡Œæ—¶ï¼Œå°†è¡ŒIDå‘é€åˆ°åå°ï¼Œåå°åœ¨æ•°æ®åº“ä¸­åˆ é™¤ï¼Œæ•°æ®åº“åˆ é™¤æˆåŠŸåï¼Œåœ¨é¡µé¢DOMä¸­å°†æ•°æ®è¡Œä¹Ÿåˆ é™¤ã€‚</li>
<li>â€¦.ç­‰ç­‰</li>
</ul>
<h2 id="9-3-jQuery-ajax"><a href="#9-3-jQuery-ajax" class="headerlink" title="9.3 jQuery.ajax"></a>9.3 jQuery.ajax</h2><p>çº¯JSåŸç”Ÿå®ç°Ajaxæˆ‘ä»¬ä¸å»è®²è§£è¿™é‡Œï¼Œç›´æ¥ä½¿ç”¨jqueryæä¾›çš„ï¼Œæ–¹ä¾¿å­¦ä¹ å’Œä½¿ç”¨ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»äº†è§£ä¸‹JSåŸç”ŸXMLHttpRequest ï¼</p>
<p>Ajaxçš„æ ¸å¿ƒæ˜¯XMLHttpRequestå¯¹è±¡(XHR)ã€‚XHRä¸ºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚å’Œè§£ææœåŠ¡å™¨å“åº”æä¾›äº†æ¥å£ã€‚èƒ½å¤Ÿä»¥å¼‚æ­¥æ–¹å¼ä»æœåŠ¡å™¨è·å–æ–°æ•°æ®ã€‚</p>
<p>jQuery æä¾›å¤šä¸ªä¸ AJAX æœ‰å…³çš„æ–¹æ³•ã€‚</p>
<p>é€šè¿‡ jQuery AJAX æ–¹æ³•ï¼Œæ‚¨èƒ½å¤Ÿä½¿ç”¨ HTTP Get å’Œ HTTP Post ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šè¯·æ±‚æ–‡æœ¬ã€HTMLã€XML æˆ– JSON â€“ åŒæ—¶æ‚¨èƒ½å¤ŸæŠŠè¿™äº›å¤–éƒ¨æ•°æ®ç›´æ¥è½½å…¥ç½‘é¡µçš„è¢«é€‰å…ƒç´ ä¸­ã€‚</p>
<p>jQuery ä¸æ˜¯ç”Ÿäº§è€…ï¼Œè€Œæ˜¯å¤§è‡ªç„¶æ¬è¿å·¥ã€‚</p>
<p>jQuery Ajaxæœ¬è´¨å°±æ˜¯ XMLHttpRequestï¼Œå¯¹ä»–è¿›è¡Œäº†å°è£…ï¼Œæ–¹ä¾¿è°ƒç”¨ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">jQuery.ajax(...)</span><br><span class="line">      éƒ¨åˆ†å‚æ•°ï¼š</span><br><span class="line">            urlï¼šè¯·æ±‚åœ°å€</span><br><span class="line">            typeï¼šè¯·æ±‚æ–¹å¼ï¼ŒGETã€POSTï¼ˆ<span class="number">1.9</span><span class="number">.0</span>ä¹‹åç”¨methodï¼‰</span><br><span class="line">        headersï¼šè¯·æ±‚å¤´</span><br><span class="line">            dataï¼šè¦å‘é€çš„æ•°æ®</span><br><span class="line">    contentTypeï¼šå³å°†å‘é€ä¿¡æ¯è‡³æœåŠ¡å™¨çš„å†…å®¹ç¼–ç ç±»å‹(é»˜è®¤: <span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>)</span><br><span class="line">          asyncï¼šæ˜¯å¦å¼‚æ­¥</span><br><span class="line">        timeoutï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line">      beforeSendï¼šå‘é€è¯·æ±‚å‰æ‰§è¡Œçš„å‡½æ•°(å…¨å±€)</span><br><span class="line">        completeï¼šå®Œæˆä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">        successï¼šæˆåŠŸä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">          errorï¼šå¤±è´¥ä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">        acceptsï¼šé€šè¿‡è¯·æ±‚å¤´å‘é€ç»™æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨å½“å‰å®¢æˆ·ç«¯å¯æ¥å—çš„æ•°æ®ç±»å‹</span><br><span class="line">        dataTypeï¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®è½¬æ¢æˆæŒ‡å®šç±»å‹</span><br><span class="line">          <span class="string">&quot;xml&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆxmlæ ¼å¼</span><br><span class="line">          <span class="string">&quot;text&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼</span><br><span class="line">          <span class="string">&quot;html&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼ï¼Œåœ¨æ’å…¥DOMä¸­æ—¶ï¼Œå¦‚æœåŒ…å«JavaScriptæ ‡ç­¾ï¼Œåˆ™ä¼šå°è¯•å»æ‰§è¡Œã€‚</span><br><span class="line">        <span class="string">&quot;script&quot;</span>: å°è¯•å°†è¿”å›å€¼å½“ä½œJavaScriptå»æ‰§è¡Œï¼Œç„¶åå†å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼</span><br><span class="line">          <span class="string">&quot;json&quot;</span>: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆç›¸åº”çš„JavaScriptå¯¹è±¡</span><br><span class="line">        <span class="string">&quot;jsonp&quot;</span>: JSONP æ ¼å¼ä½¿ç”¨ JSONP å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ <span class="string">&quot;myurl?callback=?&quot;</span> jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°</span><br></pre></td></tr></table></figure>

<p><strong>æˆ‘ä»¬æ¥ä¸ªç®€å•çš„æµ‹è¯•ï¼Œä½¿ç”¨æœ€åŸå§‹çš„HttpServletResponseå¤„ç† , .æœ€ç®€å• , æœ€é€šç”¨</strong></p>
<p>1ã€é…ç½®web.xml å’Œ springmvcçš„é…ç½®æ–‡ä»¶ï¼Œå¤åˆ¶ä¸Šé¢æ¡ˆä¾‹çš„å³å¯ ã€è®°å¾—é™æ€èµ„æºè¿‡æ»¤å’Œæ³¨è§£é©±åŠ¨é…ç½®ä¸Šã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œä¸‹é¢æ‰€æœ‰æ³¨è§£ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç† --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.th.controller&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™ä¸€ä¸ªAjaxController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/a1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ajax1</span><span class="params">(String name , HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name))&#123;</span><br><span class="line">           response.getWriter().print(<span class="string">&quot;true&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           response.getWriter().print(<span class="string">&quot;false&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€å¯¼å…¥jquery ï¼Œ å¯ä»¥ä½¿ç”¨åœ¨çº¿çš„CDN ï¼Œ ä¹Ÿå¯ä»¥ä¸‹è½½å¯¼å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>4ã€ç¼–å†™index.jspæµ‹è¯•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  &lt;%--<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>--%&gt;</span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;name&#x27;</span>:$(<span class="string">&quot;#txtName&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data,status</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="title function_">alert</span>(data);</span></span><br><span class="line"><span class="language-javascript">                   <span class="title function_">alert</span>(status);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;%--onblurï¼šå¤±å»ç„¦ç‚¹è§¦å‘äº‹ä»¶--%&gt;</span><br><span class="line">ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;txtName&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a1()&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5ã€å¯åŠ¨tomcatæµ‹è¯•ï¼æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œå½“æˆ‘ä»¬é¼ æ ‡ç¦»å¼€è¾“å…¥æ¡†çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°å‘å‡ºäº†ä¸€ä¸ªajaxçš„è¯·æ±‚ï¼æ˜¯åå°è¿”å›ç»™æˆ‘ä»¬çš„ç»“æœï¼æµ‹è¯•æˆåŠŸï¼</p>
<h2 id="9-4-Springmvcå®ç°"><a href="#9-4-Springmvcå®ç°" class="headerlink" title="9.4 Springmvcå®ç°"></a>9.4 <strong>Springmvcå®ç°</strong></h2><p>å®ä½“ç±»user</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">   <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥è·å–ä¸€ä¸ªé›†åˆå¯¹è±¡ï¼Œå±•ç¤ºåˆ°å‰ç«¯é¡µé¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">ajax2</span><span class="params">()</span>&#123;</span><br><span class="line">   List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†1å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†2å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç§¦ç–†3å·&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   <span class="keyword">return</span> list; <span class="comment">//ç”±äº@RestControlleræ³¨è§£ï¼Œå°†listè½¬æˆjsonæ ¼å¼è¿”å›</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‰ç«¯é¡µé¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/static/js/jquery-3.4.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// console.log(&#x27;ç‚¹å‡»äº‹ä»¶æˆåŠŸ&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// $.post(url,param,[å¯ä»¥çœç•¥],success)</span></span></span><br><span class="line"><span class="language-javascript">                $.<span class="title function_">post</span>(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a2&quot;</span>,<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>].<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> html =  <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        html += <span class="string">`&lt;tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].name&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].age&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].sex&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                &lt;/tr&gt;`</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">html</span>(html)</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(html)</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŠ è½½æ•°æ®&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        &lt;%--æ•°æ®ï¼šåå°--%&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æˆåŠŸå®ç°äº†æ•°æ®å›æ˜¾ï¼å¯ä»¥ä½“ä¼šä¸€ä¸‹Ajaxçš„å¥½å¤„ï¼</strong></p>
<h2 id="9-5-æ³¨å†Œæç¤ºæ•ˆæœ"><a href="#9-5-æ³¨å†Œæç¤ºæ•ˆæœ" class="headerlink" title="9.5 æ³¨å†Œæç¤ºæ•ˆæœ"></a>9.5 æ³¨å†Œæç¤ºæ•ˆæœ</h2><p>æˆ‘ä»¬å†æµ‹è¯•ä¸€ä¸ªå°Demoï¼Œæ€è€ƒä¸€ä¸‹æˆ‘ä»¬å¹³æ—¶æ³¨å†Œæ—¶å€™ï¼Œè¾“å…¥æ¡†åé¢çš„å®æ—¶æç¤ºæ€ä¹ˆåšåˆ°çš„ï¼›å¦‚ä½•ä¼˜åŒ–</p>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">ajax3</span><span class="params">(String name,String pwd)</span>&#123;</span><br><span class="line">   <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">   <span class="comment">//æ¨¡æ‹Ÿæ•°æ®åº“ä¸­å­˜åœ¨æ•°æ®</span></span><br><span class="line">   <span class="keyword">if</span> (name!=<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name))&#123;</span><br><span class="line">           msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           msg = <span class="string">&quot;ç”¨æˆ·åè¾“å…¥é”™è¯¯&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">if</span> (pwd!=<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;123456&quot;</span>.equals(pwd))&#123;</span><br><span class="line">           msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           msg = <span class="string">&quot;å¯†ç è¾“å…¥æœ‰è¯¯&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">return</span> msg; <span class="comment">//ç”±äº@RestControlleræ³¨è§£ï¼Œå°†msgè½¬æˆjsonæ ¼å¼è¿”å›</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‰ç«¯é¡µé¢ login.jsp</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;name&#x27;</span>:$(<span class="string">&quot;#name&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">if</span> (data.<span class="title function_">toString</span>()==<span class="string">&#x27;OK&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;green&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                   $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">html</span>(data);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a2</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;pwd&#x27;</span>:$(<span class="string">&quot;#pwd&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">if</span> (data.<span class="title function_">toString</span>()==<span class="string">&#x27;OK&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;green&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                   $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">html</span>(data);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a1()&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  å¯†ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a2()&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;pwdInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ã€è®°å¾—å¤„ç†jsonä¹±ç é—®é¢˜ã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--JSONä¹±ç é—®é¢˜é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼ŒåŠ¨æ€è¯·æ±‚å“åº”ï¼Œå±€éƒ¨åˆ·æ–°ï¼Œå°±æ˜¯å¦‚æ­¤ï¼</p>
<p><a href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KZibKx8mbpgp9uicB6eJRNyNtU7ek8sJ1kpbFia5e5IoMRtGFwBiaylw7iakYBws0icEAqyH22l6Y7FMzQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KZibKx8mbpgp9uicB6eJRNyNtU7ek8sJ1kpbFia5e5IoMRtGFwBiaylw7iakYBws0icEAqyH22l6Y7FMzQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></a></p>
<h2 id="9-6ã€è·å–baiduæ¥å£Demo"><a href="#9-6ã€è·å–baiduæ¥å£Demo" class="headerlink" title="9.6ã€è·å–baiduæ¥å£Demo"></a>9.6ã€è·å–baiduæ¥å£Demo</h2><p>JSONP.html</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSONPç™¾åº¦æœç´¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#q</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">width</span>: <span class="number">520px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin-top</span>: -<span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">background-color</span>: <span class="number">#f60</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">   </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 2.æ­¥éª¤äºŒ</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// å®šä¹‰demoå‡½æ•° (åˆ†ææ¥å£ã€æ•°æ®)</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> <span class="title class_">Ul</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> html = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// å¦‚æœæœç´¢æ•°æ®å­˜åœ¨ æŠŠå†…å®¹æ·»åŠ è¿›å»</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">if</span> (data.<span class="property">s</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// éšè—æ‰çš„ulæ˜¾ç¤ºå‡ºæ¥</span></span></span><br><span class="line"><span class="language-javascript">               <span class="title class_">Ul</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// æœç´¢åˆ°çš„æ•°æ®å¾ªç¯è¿½åŠ åˆ°lié‡Œ</span></span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;data.<span class="property">s</span>.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                   html += <span class="string">&#x27;&lt;li&gt;&#x27;</span>+data.<span class="property">s</span>[i]+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// å¾ªç¯çš„liå†™å…¥ul</span></span></span><br><span class="line"><span class="language-javascript">               <span class="title class_">Ul</span>.<span class="property">innerHTML</span> = html;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 1.æ­¥éª¤ä¸€</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// è·å–è¾“å…¥æ¡†å’Œul</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> Q = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;q&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> <span class="title class_">Ul</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// äº‹ä»¶é¼ æ ‡æŠ¬èµ·æ—¶å€™</span></span></span><br><span class="line"><span class="language-javascript">           Q.<span class="property">onkeyup</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// å¦‚æœè¾“å…¥æ¡†ä¸ç­‰äºç©º</span></span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span> != <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†JSONPzé‡ç‚¹â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// åˆ›å»ºæ ‡ç­¾</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//ç»™å®šè¦è·¨åŸŸçš„åœ°å€ èµ‹å€¼ç»™src</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//è¿™é‡Œæ˜¯è¦è¯·æ±‚çš„è·¨åŸŸçš„åœ°å€ æˆ‘å†™çš„æ˜¯ç™¾åº¦æœç´¢çš„è·¨åŸŸåœ°å€</span></span></span><br><span class="line"><span class="language-javascript">                   script.<span class="property">src</span> = <span class="string">&#x27;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">value</span>+<span class="string">&#x27;&amp;cb=demo&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// å°†ç»„åˆå¥½çš„å¸¦srcçš„scriptæ ‡ç­¾è¿½åŠ åˆ°bodyé‡Œ</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;q&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<p><img src="https://img-blog.csdnimg.cn/20200719144651938.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDYzNTE5OA==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>Ajaxåœ¨æˆ‘ä»¬å¼€å‘ä¸­ååˆ†é‡è¦ï¼Œä¸€å®šè¦å­¦ä¼šä½¿ç”¨ï¼</p>
<h1 id="10ã€æ‹¦æˆªå™¨"><a href="#10ã€æ‹¦æˆªå™¨" class="headerlink" title="10ã€æ‹¦æˆªå™¨"></a>10ã€æ‹¦æˆªå™¨</h1><h2 id="10-1ã€æ¦‚è¿°"><a href="#10-1ã€æ¦‚è¿°" class="headerlink" title="10.1ã€æ¦‚è¿°"></a>10.1ã€æ¦‚è¿°</h2><p>SpringMVCçš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äºServletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨Filter,ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å¼€å‘è€…å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</p>
<p><strong>è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«ï¼š</strong>æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ã€‚</p>
<p><strong>è¿‡æ»¤å™¨</strong></p>
<ul>
<li>servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•java webå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨</li>
<li>åœ¨url-patternä¸­é…ç½®äº†/*ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºè¿›è¡Œæ‹¦æˆª</li>
</ul>
<p><strong>æ‹¦æˆªå™¨</strong></p>
<ul>
<li>æ‹¦æˆªå™¨æ˜¯SpringMVCæ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº†SpringMVCæ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ä½¿ç”¨</li>
<li>æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œ å¦‚æœè®¿é—®çš„æ˜¯jsp/html/css/image/jsæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</li>
</ul>
<h2 id="10-2è‡ªå®šä¹‰æ‹¦æˆªå™¨"><a href="#10-2è‡ªå®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="10.2è‡ªå®šä¹‰æ‹¦æˆªå™¨"></a>10.2è‡ªå®šä¹‰æ‹¦æˆªå™¨</h2><p>é‚£å¦‚ä½•å®ç°æ‹¦æˆªå™¨å‘¢ï¼Ÿ</p>
<p>æƒ³è¦è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œå¿…é¡»å®ç° HandlerInterceptor æ¥å£ã€‚</p>
<p>1ã€æ–°å»ºä¸€ä¸ªMoudule ï¼Œ springmvc-07-Interceptor ï¼Œ æ·»åŠ webæ”¯æŒ</p>
<p>2ã€é…ç½®web.xml å’Œ springmvc-servlet.xml æ–‡ä»¶</p>
<p>3ã€ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åœ¨è¯·æ±‚å¤„ç†çš„æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">   <span class="comment">//å¦‚æœè¿”å›trueæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span></span><br><span class="line">   <span class="comment">//å¦‚æœè¿”å›falseå°±ä¸æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;------------å¤„ç†å‰------------&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åœ¨è¯·æ±‚å¤„ç†æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;------------å¤„ç†å------------&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//åœ¨dispatcherServletå¤„ç†åæ‰§è¡Œ,åšæ¸…ç†å·¥ä½œ.</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;------------æ¸…ç†------------&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å…³äºæ‹¦æˆªå™¨çš„é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--/** åŒ…æ‹¬è·¯å¾„åŠå…¶å­è·¯å¾„--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--/admin/* æ‹¦æˆªçš„æ˜¯/admin/addç­‰ç­‰è¿™ç§ , /admin/add/userä¸ä¼šè¢«æ‹¦æˆª--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--/admin/** æ‹¦æˆªçš„æ˜¯/admin/ä¸‹çš„æ‰€æœ‰--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--beané…ç½®çš„å°±æ˜¯æ‹¦æˆªå™¨--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.th.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5ã€ç¼–å†™ä¸€ä¸ªControllerï¼Œæ¥æ”¶è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•æ‹¦æˆªå™¨çš„æ§åˆ¶å™¨</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/interceptor&quot;)</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">testFunction</span><span class="params">()</span> &#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€å‰ç«¯ index.jsp</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/interceptor&quot;</span>&gt;</span>æ‹¦æˆªå™¨æµ‹è¯•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>7ã€å¯åŠ¨tomcat æµ‹è¯•ä¸€ä¸‹ï¼</p>
<p><a href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KshicHhIPa51icXVueiaMfB0HtJH2NsHDlcibyEJuibgomZzDNpHiammcSRt2V87uPMYGC7h0gt5KS2Dcw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KshicHhIPa51icXVueiaMfB0HtJH2NsHDlcibyEJuibgomZzDNpHiammcSRt2V87uPMYGC7h0gt5KS2Dcw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="img"></a></p>
<h2 id="10-3-éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•-è®¤è¯ç”¨æˆ·"><a href="#10-3-éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•-è®¤è¯ç”¨æˆ·" class="headerlink" title="10.3 éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• (è®¤è¯ç”¨æˆ·)"></a>10.3 éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• (è®¤è¯ç”¨æˆ·)</h2><p><strong>å®ç°æ€è·¯</strong></p>
<p>1ã€æœ‰ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œéœ€è¦å†™ä¸€ä¸ªcontrollerè®¿é—®é¡µé¢ã€‚</p>
<p>2ã€ç™»é™†é¡µé¢æœ‰ä¸€æäº¤è¡¨å•çš„åŠ¨ä½œã€‚éœ€è¦åœ¨controllerä¸­å¤„ç†ã€‚åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ­£ç¡®ï¼Œå‘sessionä¸­å†™å…¥ç”¨æˆ·ä¿¡æ¯ã€‚<em>è¿”å›ç™»é™†æˆåŠŸã€‚</em></p>
<p>3ã€æ‹¦æˆªç”¨æˆ·è¯·æ±‚ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†ã€‚å¦‚æœç”¨æˆ·å·²ç»ç™»é™†ã€‚æ”¾è¡Œï¼Œ å¦‚æœç”¨æˆ·æœªç™»é™†ï¼Œè·³è½¬åˆ°ç™»é™†é¡µé¢</p>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<p>1ã€ç¼–å†™ä¸€ä¸ªç™»é™†é¡µé¢ login.jsp</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/login&quot;</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™ä¸€ä¸ªControllerå¤„ç†è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//è·³è½¬åˆ°ç™»é™†é¡µé¢</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/jumplogin&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">jumpLogin</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//è·³è½¬åˆ°æˆåŠŸé¡µé¢</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/jumpSuccess&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">jumpSuccess</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ç™»é™†æäº¤</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(HttpSession session, String username, String pwd)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">// å‘sessionè®°å½•ç”¨æˆ·èº«ä»½ä¿¡æ¯</span></span><br><span class="line">       System.out.println(<span class="string">&quot;æ¥æ”¶å‰ç«¯===&quot;</span>+username);</span><br><span class="line">       session.setAttribute(<span class="string">&quot;user&quot;</span>, username);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é€€å‡ºç™»é™†</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;logout&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">logout</span><span class="params">(HttpSession session)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="comment">// session è¿‡æœŸ</span></span><br><span class="line">       session.invalidate();</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™ä¸€ä¸ªç™»é™†æˆåŠŸçš„é¡µé¢ success.jsp</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•æˆåŠŸé¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">$&#123;user&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/logout&quot;</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€åœ¨ index é¡µé¢ä¸Šæµ‹è¯•è·³è½¬ï¼å¯åŠ¨Tomcat æµ‹è¯•ï¼Œæœªç™»å½•ä¹Ÿå¯ä»¥è¿›å…¥ä¸»é¡µï¼</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">h1</span>&gt;</span>index<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&lt;%--ç™»å½•--%&gt;</span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/jumplogin&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/jumpSuccess&quot;</span>&gt;</span>æˆåŠŸé¡µé¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5ã€ç¼–å†™ç”¨æˆ·ç™»å½•æ‹¦æˆªå™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">// å¦‚æœæ˜¯ç™»é™†é¡µé¢åˆ™æ”¾è¡Œ</span></span><br><span class="line">       System.out.println(<span class="string">&quot;uri: &quot;</span> + request.getRequestURI());</span><br><span class="line">       <span class="keyword">if</span> (request.getRequestURI().contains(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">       <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// å¦‚æœç”¨æˆ·å·²ç™»é™†ä¹Ÿæ”¾è¡Œ</span></span><br><span class="line">       <span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;user&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// ç”¨æˆ·æ²¡æœ‰ç™»é™†è·³è½¬åˆ°ç™»é™†é¡µé¢</span></span><br><span class="line">       request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/login.jsp&quot;</span>).forward(request, response);</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€åœ¨Springmvcçš„é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ‹¦æˆªå™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å…³äºæ‹¦æˆªå™¨çš„é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;loginInterceptor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.th.interceptor.LoginInterceptor&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>7ã€å†æ¬¡é‡å¯Tomcatæµ‹è¯•ï¼</p>
<p><strong>OKï¼Œæµ‹è¯•ç™»å½•æ‹¦æˆªåŠŸèƒ½æ— è¯¯.</strong></p>
<p><strong>OKï¼Œæµ‹è¯•ç™»å½•æ‹¦æˆªåŠŸèƒ½æ— è¯¯.</strong></p>
<h1 id="11-æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#11-æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="11.æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>11.æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h1><h2 id="11-1-å‡†å¤‡å·¥ä½œ"><a href="#11-1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="11.1 å‡†å¤‡å·¥ä½œ"></a>11.1 å‡†å¤‡å·¥ä½œ</h2><p>æ–‡ä»¶ä¸Šä¼ æ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§çš„åŠŸèƒ½ä¹‹ä¸€ ,springMVC å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯SpringMVCä¸Šä¸‹æ–‡ä¸­é»˜è®¤æ²¡æœ‰è£…é…MultipartResolverï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å…¶ä¸èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ å·¥ä½œã€‚å¦‚æœæƒ³ä½¿ç”¨Springçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®MultipartResolverã€‚</p>
<p><em><strong>å‰ç«¯è¡¨å•è¦æ±‚ï¼šä¸ºäº†èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œå¿…é¡»å°†è¡¨å•çš„methodè®¾ç½®ä¸ºPOSTï¼Œå¹¶å°†enctypeè®¾ç½®ä¸ºmultipart/form-dataã€‚</strong></em>åªæœ‰åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼›</p>
<p><strong>å¯¹è¡¨å•ä¸­çš„ enctype å±æ€§åšä¸ªè¯¦ç»†çš„è¯´æ˜ï¼š</strong></p>
<ul>
<li>application/x-www=form-urlencodedï¼šé»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•åŸŸä¸­çš„ value å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆ URL ç¼–ç æ–¹å¼ã€‚</li>
<li>multipart/form-dataï¼šè¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šæŠŠæ–‡ä»¶åŸŸæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä¹Ÿå°è£…åˆ°è¯·æ±‚å‚æ•°ä¸­ï¼Œä¸ä¼šå¯¹å­—ç¬¦ç¼–ç ã€‚</li>
<li>text/plainï¼šé™¤äº†æŠŠç©ºæ ¼è½¬æ¢ä¸º â€œ+â€ å·å¤–ï¼Œå…¶ä»–å­—ç¬¦éƒ½ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨ç›´æ¥é€šè¿‡è¡¨å•å‘é€é‚®ä»¶ã€‚</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦è®¾ç½®äº†enctypeä¸ºmultipart/form-dataï¼Œæµè§ˆå™¨å³ä¼šé‡‡ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè€Œå¯¹äºæ–‡ä»¶ä¸Šä¼ çš„å¤„ç†åˆ™æ¶‰åŠåœ¨æœåŠ¡å™¨ç«¯è§£æåŸå§‹çš„HTTPå“åº”ã€‚åœ¨2003å¹´ï¼ŒApache Software Foundationå‘å¸ƒäº†å¼€æºçš„Commons FileUploadç»„ä»¶ï¼Œå…¶å¾ˆå¿«æˆä¸ºServlet/JSPç¨‹åºå‘˜ä¸Šä¼ æ–‡ä»¶çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<ul>
<li>Servlet3.0è§„èŒƒå·²ç»æä¾›æ–¹æ³•æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œä½†è¿™ç§ä¸Šä¼ éœ€è¦åœ¨Servletä¸­å®Œæˆã€‚</li>
<li>è€ŒSpring MVCåˆ™æä¾›äº†æ›´ç®€å•çš„å°è£…ã€‚</li>
<li>Spring MVCä¸ºæ–‡ä»¶ä¸Šä¼ æä¾›äº†ç›´æ¥çš„æ”¯æŒï¼Œè¿™ç§æ”¯æŒæ˜¯ç”¨å³æ’å³ç”¨çš„MultipartResolverå®ç°çš„ã€‚</li>
<li>Spring MVCä½¿ç”¨Apache Commons FileUploadæŠ€æœ¯å®ç°äº†ä¸€ä¸ªMultipartResolverå®ç°ç±»ï¼š</li>
<li>CommonsMultipartResolverã€‚å› æ­¤ï¼ŒSpringMVCçš„æ–‡ä»¶ä¸Šä¼ è¿˜éœ€è¦ä¾èµ–Apache Commons FileUploadçš„ç»„ä»¶ã€‚</li>
</ul>
<h2 id="11-2-æ–‡ä»¶ä¸Šä¼ "><a href="#11-2-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="11.2 æ–‡ä»¶ä¸Šä¼ "></a>11.2 æ–‡ä»¶ä¸Šä¼ </h2><p>1ã€å¯¼å…¥æ–‡ä»¶ä¸Šä¼ çš„jaråŒ…ï¼Œcommons-fileupload ï¼Œ Mavenä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥ä»–çš„ä¾èµ–åŒ… commons-ioåŒ…ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--servlet-apiå¯¼å…¥é«˜ç‰ˆæœ¬çš„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®beanï¼šmultipartResolver</p>
<p>ã€<strong>æ³¨æ„ï¼ï¼ï¼è¿™ä¸ªbenaçš„idå¿…é¡»ä¸ºï¼šmultipartResolver ï¼Œ å¦åˆ™ä¸Šä¼ æ–‡ä»¶ä¼šæŠ¥400çš„é”™è¯¯ï¼åœ¨è¿™é‡Œæ ½è¿‡å‘,æ•™è®­ï¼</strong>ã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10485760&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>CommonsMultipartFile çš„ å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><strong>String getOriginalFilename()ï¼šè·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå</strong></li>
<li><strong>InputStream getInputStream()ï¼šè·å–æ–‡ä»¶æµ</strong></li>
<li><strong>void transferTo(File dest)ï¼šå°†ä¸Šä¼ æ–‡ä»¶ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•æ–‡ä»¶ä¸­</strong></li>
</ul>
<p>æˆ‘ä»¬å»å®é™…æµ‹è¯•ä¸€ä¸‹</p>
<p>3ã€ç¼–å†™å‰ç«¯é¡µé¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;upload&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4ã€<strong>Controller</strong></p>
<h3 id="æ³•ä¸€"><a href="#æ³•ä¸€" class="headerlink" title="æ³•ä¸€"></a>æ³•ä¸€</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.th.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileController</span> &#123;</span><br><span class="line">   <span class="comment">//@RequestParam(&quot;file&quot;) å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFile å¯¹è±¡</span></span><br><span class="line">   <span class="comment">//æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">fileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file , HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//è·å–æ–‡ä»¶å : file.getOriginalFilename();</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">uploadFileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼</span></span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.equals(uploadFileName))&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">       System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶å : &quot;</span>+uploadFileName);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">       <span class="comment">//å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">       <span class="type">File</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">       <span class="keyword">if</span> (!realPath.exists())&#123;</span><br><span class="line">           realPath.mkdir();</span><br><span class="line">      &#125;</span><br><span class="line">       System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&quot;</span>+realPath);</span><br><span class="line"></span><br><span class="line">       <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> file.getInputStream(); <span class="comment">//æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">       <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(realPath,uploadFileName)); <span class="comment">//æ–‡ä»¶è¾“å‡ºæµ</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//è¯»å–å†™å‡º</span></span><br><span class="line">       <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">       <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">       <span class="keyword">while</span> ((len=is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">           os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">           os.flush();</span><br><span class="line">      &#125;</span><br><span class="line">       os.close();</span><br><span class="line">       is.close();</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æµ‹è¯•ä¸Šä¼ æ–‡ä»¶ï¼ŒOKï¼</p>
<p><strong>é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</strong></p>
<p>1ã€ç¼–å†™Controller</p>
<h3 id="æ³•äºŒ"><a href="#æ³•äºŒ" class="headerlink" title="æ³•äºŒ"></a>æ³•äºŒ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/upload2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String  <span class="title function_">fileUpload2</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">   <span class="type">File</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">   <span class="keyword">if</span> (!realPath.exists())&#123;</span><br><span class="line">       realPath.mkdir();</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//ä¸Šä¼ æ–‡ä»¶åœ°å€</span></span><br><span class="line">   System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&quot;</span>+realPath);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span></span><br><span class="line">   file.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(realPath +<span class="string">&quot;/&quot;</span>+ file.getOriginalFilename()));</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å‰ç«¯è¡¨å•æäº¤åœ°å€ä¿®æ”¹</p>
<p>3ã€è®¿é—®æäº¤æµ‹è¯•ï¼ŒOKï¼</p>
<h2 id="11-3-æ–‡ä»¶ä¸‹è½½"><a href="#11-3-æ–‡ä»¶ä¸‹è½½" class="headerlink" title="11.3 æ–‡ä»¶ä¸‹è½½"></a>11.3 æ–‡ä»¶ä¸‹è½½</h2><p><strong>æ–‡ä»¶ä¸‹è½½æ­¥éª¤ï¼š</strong></p>
<p>1ã€è®¾ç½® response å“åº”å¤´</p>
<p>2ã€è¯»å–æ–‡ä»¶ â€“ InputStream</p>
<p>3ã€å†™å‡ºæ–‡ä»¶ â€“ OutputStream</p>
<p>4ã€æ‰§è¡Œæ“ä½œ</p>
<p>5ã€å…³é—­æµ ï¼ˆå…ˆå¼€åå…³ï¼‰</p>
<p><strong>ä»£ç å®ç°ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">downloads</span><span class="params">(HttpServletResponse response ,HttpServletRequest request)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">   <span class="comment">//è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line">   <span class="type">String</span>  <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">   <span class="type">String</span>  <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;åŸºç¡€è¯­æ³•.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//1ã€è®¾ç½®response å“åº”å¤´</span></span><br><span class="line">   response.reset(); <span class="comment">//è®¾ç½®é¡µé¢ä¸ç¼“å­˜,æ¸…ç©ºbuffer</span></span><br><span class="line">   response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>); <span class="comment">//å­—ç¬¦ç¼–ç </span></span><br><span class="line">   response.setContentType(<span class="string">&quot;multipart/form-data&quot;</span>); <span class="comment">//äºŒè¿›åˆ¶ä¼ è¾“æ•°æ®</span></span><br><span class="line">   <span class="comment">//è®¾ç½®å“åº”å¤´</span></span><br><span class="line">   response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,</span><br><span class="line">           <span class="string">&quot;attachment;fileName=&quot;</span>+URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path,fileName);</span><br><span class="line">   <span class="comment">//2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span></span><br><span class="line">   InputStream input=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">   <span class="comment">//3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span></span><br><span class="line">   <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line"></span><br><span class="line">   <span class="type">byte</span>[] buff =<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">   <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">//4ã€æ‰§è¡Œ å†™å‡ºæ“ä½œ</span></span><br><span class="line">   <span class="keyword">while</span>((index= input.read(buff))!= -<span class="number">1</span>)&#123;</span><br><span class="line">       out.write(buff, <span class="number">0</span>, index);</span><br><span class="line">       out.flush();</span><br><span class="line">  &#125;</span><br><span class="line">   out.close();</span><br><span class="line">   input.close();</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‰ç«¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;/download&quot;</span>&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œæ–‡ä»¶ä¸‹è½½OKï¼Œå¤§å®¶å¯ä»¥å’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„JavaWebåŸç”Ÿçš„æ–¹å¼å¯¹æ¯”ä¸€ä¸‹ï¼Œå°±å¯ä»¥çŸ¥é“è¿™ä¸ªä¾¿æ·å¤šäº†!</p>
<p>æ‹¦æˆªå™¨åŠæ–‡ä»¶æ“ä½œåœ¨æˆ‘ä»¬å¼€å‘ä¸­ååˆ†é‡è¦ï¼Œä¸€å®šè¦å­¦ä¼šä½¿ç”¨ï¼</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis</title>
    <url>/2021/07/23/Mybatis/</url>
    <content><![CDATA[<h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul>
<li>JDK1.8</li>
<li>Mysql5.7</li>
<li>maven 3.6.3</li>
<li>IDEA</li>
</ul>
<h2 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h2><ul>
<li>JDBC</li>
<li>Mysql</li>
<li>JavaåŸºç¡€</li>
<li>Maven</li>
<li>Junit</li>
</ul>
<h2 id="SSMæ¡†æ¶ï¼šé…ç½®æ–‡ä»¶çš„æœ€å¥½çš„æ–¹å¼ï¼šçœ‹å®˜ç½‘æ–‡æ¡£"><a href="#SSMæ¡†æ¶ï¼šé…ç½®æ–‡ä»¶çš„æœ€å¥½çš„æ–¹å¼ï¼šçœ‹å®˜ç½‘æ–‡æ¡£" class="headerlink" title="SSMæ¡†æ¶ï¼šé…ç½®æ–‡ä»¶çš„æœ€å¥½çš„æ–¹å¼ï¼šçœ‹å®˜ç½‘æ–‡æ¡£"></a>SSMæ¡†æ¶ï¼šé…ç½®æ–‡ä»¶çš„æœ€å¥½çš„æ–¹å¼ï¼šçœ‹å®˜ç½‘æ–‡æ¡£</h2><h1 id="2-Mybatis"><a href="#2-Mybatis" class="headerlink" title="2 Mybatis"></a>2 Mybatis</h1><h2 id="1ã€Mybatisç®€ä»‹ï¼ˆ2020-10-21ï¼‰"><a href="#1ã€Mybatisç®€ä»‹ï¼ˆ2020-10-21ï¼‰" class="headerlink" title="1ã€Mybatisç®€ä»‹ï¼ˆ2020-10-21ï¼‰"></a>1ã€Mybatisç®€ä»‹ï¼ˆ2020-10-21ï¼‰</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯Mybatis"><a href="#1-1-ä»€ä¹ˆæ˜¯Mybatis" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯Mybatis"></a>1.1 ä»€ä¹ˆæ˜¯Mybatis</h3><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</p>
<p>MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†çš„è¿‡ç¨‹</p>
<p>MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ å®ä½“ç±» ã€Plain Old Java Objects,æ™®é€šçš„ Javaå¯¹è±¡ã€‘æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<p>MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ibatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚</p>
<p>2013å¹´11æœˆè¿ç§»åˆ°Github .</p>
<p>Mybatiså®˜æ–¹æ–‡æ¡£ : <a href="http://www.mybatis.org/mybatis-3/zh/index.html">http://www.mybatis.org/mybatis-3/zh/index.html</a></p>
<p>GitHub : <a href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></p>
<p>å¦‚ä½•è·å¾—Mybatis</p>
<ul>
<li><p>mavenä»“åº“ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p>
</li>
<li><p>Github:<a href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></p>
</li>
</ul>
<h3 id="1-2-æŒä¹…åŒ–"><a href="#1-2-æŒä¹…åŒ–" class="headerlink" title="1.2 æŒä¹…åŒ–"></a>1.2 æŒä¹…åŒ–</h3><p>æ•°æ®æŒä¹…åŒ–</p>
<ul>
<li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹</li>
<li>å†…å­˜ï¼š<strong>æ–­ç”µå³å¤±</strong></li>
<li>æ•°æ®åº“ï¼ˆJDBCï¼‰,ioæ–‡ä»¶æŒä¹…åŒ–</li>
<li>ç”Ÿæ´»æ–¹é¢çš„ä¾‹å­ï¼šå†·è—ï¼Œç½å¤´</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–</strong></p>
<ul>
<li>ä¸æƒ³ä¸¢æ‰ä¸€äº›å¯¹è±¡</li>
<li>å†…å­˜å¤ªè´µ</li>
</ul>
<h3 id="1-3-æŒä¹…å±‚"><a href="#1-3-æŒä¹…å±‚" class="headerlink" title="1.3 æŒä¹…å±‚"></a>1.3 æŒä¹…å±‚</h3><p>Daoå±‚ï¼ŒServiceå±‚ï¼ŒControllerå±‚</p>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li>
<li>å±‚ç•Œé™ååˆ†æ˜æ˜¾</li>
</ul>
<h3 id="1-4-ä¸ºä»€ä¹ˆéœ€è¦Mybatis"><a href="#1-4-ä¸ºä»€ä¹ˆéœ€è¦Mybatis" class="headerlink" title="1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatis"></a>1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatis</h3><ul>
<li>å¸®åŠ©ç¨‹åºå‘˜å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­</li>
<li>æ–¹ä¾¿</li>
<li>ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚ï¼Œç®€åŒ–-&gt;æ¡†æ¶-&gt;è‡ªåŠ¨åŒ–</li>
<li>ä¸ç”¨Mybatisä¹Ÿå¯ä»¥ã€‚æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚<strong>æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†</strong></li>
<li>ä¼˜ç‚¹ï¼š<ul>
<li>ç®€å•æ˜“å­¦ï¼šæœ¬èº«å°±å¾ˆå°ä¸”ç®€å•ã€‚æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œæœ€ç®€å•å®‰è£…åªè¦ä¸¤ä¸ªjaræ–‡ä»¶+é…ç½®å‡ ä¸ªsqlæ˜ å°„æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œæ˜“äºå­¦ä¹ ï¼Œæ˜“äºä½¿ç”¨ï¼Œé€šè¿‡æ–‡æ¡£å’Œæºä»£ç ï¼Œå¯ä»¥æ¯”è¾ƒå®Œå…¨çš„æŒæ¡å®ƒçš„è®¾è®¡æ€è·¯å’Œå®ç°ã€‚</li>
<li>çµæ´»ï¼šmybatisä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡å¼ºåŠ ä»»ä½•å½±å“ã€‚sqlå†™åœ¨xmlé‡Œï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚é€šè¿‡sqlè¯­å¥å¯ä»¥æ»¡è¶³æ“ä½œæ•°æ®åº“çš„æ‰€æœ‰éœ€æ±‚ã€‚</li>
<li>è§£é™¤sqlä¸ç¨‹åºä»£ç çš„è€¦åˆï¼šé€šè¿‡æä¾›DAOå±‚ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç³»ç»Ÿçš„è®¾è®¡æ›´æ¸…æ™°ï¼Œæ›´æ˜“ç»´æŠ¤ï¼Œæ›´æ˜“å•å…ƒæµ‹è¯•ã€‚sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li>
<li>æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚</li>
<li>â€¦â€¦</li>
<li>æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œä½¿ç”¨çš„äººå¤šï¼å…¬å¸éœ€è¦ï¼</li>
</ul>
</li>
</ul>
<h2 id="2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº"><a href="#2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº" class="headerlink" title="2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº"></a>2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº</h2><p>æ€è·¯æµç¨‹ï¼šæ­å»ºç¯å¢ƒâ€“&gt;å¯¼å…¥Mybatisâ€”&gt;ç¼–å†™ä»£ç â€”&gt;æµ‹è¯•</p>
<h3 id="2-1-æ­å»ºç¯å¢ƒ"><a href="#2-1-æ­å»ºç¯å¢ƒ" class="headerlink" title="2.1 æ­å»ºç¯å¢ƒ"></a>2.1 æ­å»ºç¯å¢ƒ</h3><p>æ­å»ºæ•°æ®åº“</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE `mybatis`;</span><br><span class="line"></span><br><span class="line">USE `mybatis`;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS `user`;</span><br><span class="line"></span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">`id` <span class="type">int</span>(<span class="number">20</span>) NOT NULL,</span><br><span class="line">`name` varchar(<span class="number">30</span>) DEFAULT NULL,</span><br><span class="line">`pwd` varchar(<span class="number">30</span>) DEFAULT NULL,</span><br><span class="line">PRIMARY <span class="title function_">KEY</span> <span class="params">(`id`)</span></span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">insert  into `user`(`id`,`name`,`pwd`) values (<span class="number">1</span>,<span class="string">&#x27;ç‹‚ç¥&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;abcdef&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;987654&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºé¡¹ç›®</p>
<ul>
<li>æ–°å»ºä¸€ä¸ªæ™®é€šmavené¡¹ç›®</li>
<li>åˆ é™¤srcç›®å½•</li>
<li>å¯¼å…¥mavenä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--import dependencies--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysql driver--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#2-2-åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>2.2 åˆ›å»ºä¸€ä¸ªæ¨¡å—</h2><p>ç¼–å†™MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<p>æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/kuang/dao/userMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¼–å†™mybatiså·¥å…·ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SqlSessionFactory --&gt;SqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨Mybatiesç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚</span></span><br><span class="line">    <span class="comment">// SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//        SqlSession sqlSession =  sqlSessionFactory.openSession();</span></span><br><span class="line"><span class="comment">//        return sqlSession;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-ç¼–å†™ä»£ç "><a href="#2-3-ç¼–å†™ä»£ç " class="headerlink" title="2.3 ç¼–å†™ä»£ç "></a>2.3 ç¼–å†™ä»£ç </h2><ul>
<li>å®ä½“ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String name, String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPwd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPwd</span><span class="params">(String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Daoæ¥å£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»ç”±åŸæ¥çš„UserDaoImplè½¬å˜æˆä¸€ä¸ªMapperé…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace=ç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperçª—å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--selectæŸ¥è¯¢è¯­å¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">  		select * from user</span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-æ³¨æ„ç‚¹ï¼š"><a href="#2-4-æ³¨æ„ç‚¹ï¼š" class="headerlink" title="2.4 æ³¨æ„ç‚¹ï¼š"></a>2.4 æ³¨æ„ç‚¹ï¼š</h2><ul>
<li>org.apache.ibatis.binding.BindingException: Type interface com.kuang.dao.UserDao is not known to the MapperRegistry.</li>
</ul>
<p><strong>MapperRegistryæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œmappers</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ¯ä¸€ä¸ªMapper.xmlæ–‡ä»¶éƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/kuang/dao/userMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>junitæµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€æ­¥ï¼šè·å¾—SqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸€ï¼šgetMapper</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line">        List&lt;User&gt; userList = userDao.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­SqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p>
<ol>
<li>é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œï¼›</li>
<li>ç»‘å®šæ¥å£é”™è¯¯ï¼›</li>
<li>æ–¹æ³•åä¸å¯¹ï¼›</li>
<li>è¿”å›ç±»å‹ä¸å¯¹ï¼›</li>
<li>Mavenå¯¼å‡ºèµ„æºé—®é¢˜ã€‚</li>
</ol>
<h2 id="é—®é¢˜è¯´æ˜"><a href="#é—®é¢˜è¯´æ˜" class="headerlink" title="é—®é¢˜è¯´æ˜"></a>é—®é¢˜è¯´æ˜</h2><p>å¯èƒ½å‡ºç°é—®é¢˜è¯´æ˜ï¼šMavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="3ã€CRUDä»¥åŠé…ç½®è§£æ"><a href="#3ã€CRUDä»¥åŠé…ç½®è§£æ" class="headerlink" title="3ã€CRUDä»¥åŠé…ç½®è§£æ"></a>3ã€CRUDä»¥åŠé…ç½®è§£æ</h1><h3 id="3-1-namespace"><a href="#3-1-namespace" class="headerlink" title="3.1 namespace"></a>3.1 namespace</h3><p>namespaceä¸­çš„åŒ…åè¦å’ŒDao/Mapperæ¥å£çš„åŒ…åä¸€è‡´ï¼</p>
<h3 id="3-2-select"><a href="#3-2-select" class="headerlink" title="3.2 select"></a>3.2 select</h3><p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥ï¼›</p>
<ul>
<li>id:å°±æ˜¯å¯¹åº”çš„namespaceä¸­çš„æ–¹æ³•åï¼›</li>
<li>resultType:Sqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼ï¼</li>
<li>parameterType:å‚æ•°ç±»å‹ï¼</li>
</ul>
<p>1ã€ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™å¯¹åº”mapperä¸­çš„sqlè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">       select * from mybatis.user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­SqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-insert"><a href="#3-3-insert" class="headerlink" title="3.3 insert"></a>3.3 insert</h3><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨insertæ ‡ç­¾è¿›è¡Œæ’å…¥æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼</p>
<p>éœ€æ±‚ï¼šç»™æ•°æ®åº“å¢åŠ ä¸€ä¸ªç”¨æˆ·</p>
<p>1ã€åœ¨UserMapperæ¥å£ä¸­æ·»åŠ å¯¹åº”çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€åœ¨UserMapper.xmlä¸­æ·»åŠ insertè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    insert into user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAddUser</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">5</span>,<span class="string">&quot;ç‹äº”&quot;</span>,<span class="string">&quot;zxcvbn&quot;</span>);</span><br><span class="line">   <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.addUser(user);</span><br><span class="line">   System.out.println(i);</span><br><span class="line">   session.commit(); <span class="comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼š<strong>å¢ã€åˆ ã€æ”¹æ“ä½œéœ€è¦æäº¤äº‹åŠ¡ï¼</strong></p>
<h3 id="3-4-upadte"><a href="#3-4-upadte" class="headerlink" title="3.4 upadte"></a>3.4 upadte</h3><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨updateæ ‡ç­¾è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼</p>
<p>éœ€æ±‚ï¼šä¿®æ”¹ç”¨æˆ·çš„ä¿¡æ¯</p>
<p>1ã€åŒç†ï¼Œç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶SQL</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">  update user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateUser</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.selectUserById(<span class="number">1</span>);</span><br><span class="line">   user.setPwd(<span class="string">&quot;asdfgh&quot;</span>);</span><br><span class="line">   <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.updateUser(user);</span><br><span class="line">   System.out.println(i);</span><br><span class="line">   session.commit(); <span class="comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-delete"><a href="#3-5-delete" class="headerlink" title="3.5 delete"></a>3.5 delete</h3><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨deleteæ ‡ç­¾è¿›è¡Œåˆ é™¤æ“ä½œï¼Œå®ƒçš„é…ç½®å’Œselectæ ‡ç­¾å·®ä¸å¤šï¼</p>
<p>éœ€æ±‚ï¼šæ ¹æ®idåˆ é™¤ä¸€ä¸ªç”¨æˆ·</p>
<p>1ã€åŒç†ï¼Œç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶SQL</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">  delete from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteUser</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">   <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.deleteUser(<span class="number">5</span>);</span><br><span class="line">   System.out.println(i);</span><br><span class="line">   session.commit(); <span class="comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><ul>
<li>æ‰€æœ‰çš„å¢åˆ æ”¹æ“ä½œéƒ½éœ€è¦æäº¤äº‹åŠ¡ï¼</li>
<li>æ¥å£æ‰€æœ‰çš„æ™®é€šå‚æ•°ï¼Œå°½é‡éƒ½å†™ä¸Š@Paramå‚æ•°ï¼Œå°¤å…¶æ˜¯å¤šä¸ªå‚æ•°æ—¶ï¼Œå¿…é¡»å†™ä¸Šï¼</li>
<li>æœ‰æ—¶å€™æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨mapä¼ é€’å‚æ•°ï¼</li>
<li>ä¸ºäº†è§„èŒƒæ“ä½œï¼Œåœ¨SQLçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°½é‡å°†Parameterå‚æ•°å’ŒresultTypeéƒ½å†™ä¸Šï¼</li>
</ul>
<h3 id="3-6-åˆ†æé”™è¯¯"><a href="#3-6-åˆ†æé”™è¯¯" class="headerlink" title="3.6 åˆ†æé”™è¯¯"></a>3.6 åˆ†æé”™è¯¯</h3><ol>
<li>xmlæ–‡ä»¶ä¸­æ³¨é‡Šä¸èƒ½å‡ºç°ä¸­æ–‡æŠ¥é”™ï¼ŒæŸ¥çœ‹è‡ªå·±çš„æ˜¯UTF-8è¿˜æ˜¯GBKç¼–ç ï¼Œæ”¹æˆä¸ºç›¸åº”çš„å°±è¡Œã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span> ?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å³å¯æˆåŠŸæµ‹è¯•ã€‚</p>
<ol>
<li>æ ‡ç­¾ä¸è¦åŒ¹é…é”™ï¼</li>
<li>resourceç»‘å®šmapperï¼Œéœ€è¦ä½¿ç”¨è·¯å¾„ï¼</li>
<li>ç¨‹åºé…ç½®æ–‡ä»¶å¿…é¡»ç¬¦åˆè§„èŒƒï¼</li>
<li>NullPointerExceptionï¼Œæ²¡æœ‰æ³¨å†Œåˆ°èµ„æºï¼</li>
<li>mavenèµ„æºæ²¡æœ‰å¯¼å‡ºé—®é¢˜ï¼</li>
</ol>
<h3 id="3-7-ä¸‡èƒ½Map"><a href="#3-7-ä¸‡èƒ½Map" class="headerlink" title="3.7 ä¸‡èƒ½Map"></a>3.7 ä¸‡èƒ½Map</h3><p>å‡è®¾ï¼Œæˆ‘ä»¬çš„å®ä½“ç±»ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå­—æ®µæˆ–è€…å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘ä½¿ç”¨Mapï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸‡èƒ½çš„Map</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addUser2</span><span class="params">(Map&lt;String,Object&gt; map)</span>;</span><br><span class="line">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥  ä¼ é€’mapçš„key--&gt;</span><br><span class="line">    &lt;insert id=<span class="string">&quot;addUser2&quot;</span> parameterType=<span class="string">&quot;map&quot;</span>&gt;</span><br><span class="line">        insert into mybatis.user (id,pwd) values (#&#123;userid&#125;,#&#123;password&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser2</span><span class="params">()</span>&#123;</span><br><span class="line">         <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">         <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">         Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">         map.put(<span class="string">&quot;userid&quot;</span>,<span class="number">4</span>);</span><br><span class="line">         map.put(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123321&quot;</span>);</span><br><span class="line"></span><br><span class="line">         mapper.addUser2(map);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">         sqlSession.commit();</span><br><span class="line">         sqlSession.close();</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>Mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºkeyå³å¯ï¼ã€parameterType=â€œmapâ€ã€‘<br>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å¯¹è±¡çš„å±æ€§å³å¯ï¼ã€parameterType=â€œObjectâ€ã€‘<br>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°ï¼<br>å¤šä¸ªå‚æ•°ç”¨Mapï¼Œ<strong>æˆ–è€…æ³¨è§£ï¼</strong></p>
<h3 id="3-8-æ€è€ƒé¢˜"><a href="#3-8-æ€è€ƒé¢˜" class="headerlink" title="3.8 æ€è€ƒé¢˜"></a>3.8 æ€è€ƒé¢˜</h3><blockquote>
<p>æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™?</p>
</blockquote>
<p>ç¬¬1ç§ï¼šåœ¨Javaä»£ç ä¸­æ·»åŠ sqlé€šé…ç¬¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">string</span> <span class="variable">wildcardname</span> <span class="operator">=</span> â€œ%smi%â€;</span><br><span class="line">list&lt;name&gt; names = mapper.selectlike(wildcardname);</span><br><span class="line"></span><br><span class="line">&lt;select id=â€selectlikeâ€&gt;</span><br><span class="line">select * from foo where bar like #&#123;value&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>ç¬¬2ç§ï¼šåœ¨sqlè¯­å¥ä¸­æ‹¼æ¥é€šé…ç¬¦ï¼Œä¼šå¼•èµ·sqlæ³¨å…¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">string</span> <span class="variable">wildcardname</span> <span class="operator">=</span> â€œsmiâ€;</span><br><span class="line">list&lt;name&gt; names = mapper.selectlike(wildcardname);</span><br><span class="line"></span><br><span class="line">&lt;select id=â€selectlikeâ€&gt;</span><br><span class="line">    select * from foo where bar like <span class="string">&quot;%&quot;</span>#&#123;value&#125;<span class="string">&quot;%&quot;</span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h1 id="4-é…ç½®è§£æ"><a href="#4-é…ç½®è§£æ" class="headerlink" title="4 é…ç½®è§£æ"></a>4 é…ç½®è§£æ</h1><h3 id="1-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#1-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="1. æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>1. æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><ul>
<li>mybatis-config.xml</li>
<li>Mybatisçš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“MyBatisè¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">    propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">    settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">    typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">    typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">    objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">    pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">        environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">            environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">            transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">    dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">    databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">    mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br></pre></td></tr></table></figure>

<h3 id="2-ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"><a href="#2-ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰" class="headerlink" title="2. ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"></a>2. ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰</h3><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ</p>
<p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p>
<p>Mybatis é»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯JDBCï¼Œè¿æ¥æ± ï¼šPOOLED</p>
<h3 id="3-å±æ€§"><a href="#3-å±æ€§" class="headerlink" title="3. å±æ€§"></a>3. å±æ€§</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡propertieså±æ€§æ¥å¼•ç”¨é…ç½®æ–‡ä»¶</p>
<p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚ ï¼ˆdb.propertiesï¼‰</p>
<p>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">driver = com.mysql.jdbc.<span class="type">Driver</span></span><br><span class="line"><span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf8&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">username = root </span></span><br><span class="line"><span class="string">password = root</span></span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥</p>
<p>mybatis-config.xml (åŒæ—¶æœ‰çš„è¯ï¼Œä¼˜å…ˆèµ°å¤–é¢properties)</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;properties resource=&quot;db.properties&quot;&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.xmlæ–‡ä»¶éƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/kuang/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶</li>
<li>å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½®</li>
<li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰åŒä¸€ä¸ªå­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶çš„</li>
</ol>
<h3 id="4-ç±»å‹åˆ«å-typeAliases"><a href="#4-ç±»å‹åˆ«å-typeAliases" class="headerlink" title="4. ç±»å‹åˆ«å typeAliases"></a>4. ç±»å‹åˆ«å typeAliases</h3><ul>
<li>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®.</li>
<li>æ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span><br><span class="line">&lt;typeAliases&gt;</span><br><span class="line">    &lt;typeAlias type=<span class="string">&quot;com.kuang.pojo.User&quot;</span> alias=<span class="string">&quot;User&quot;</span>/&gt;</span><br><span class="line">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…ï¼Œæ¯ä¸€ä¸ªåœ¨åŒ… <code>domain.blog</code> ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ æ¯”å¦‚ <code>domain.blog.Author</code> çš„åˆ«åä¸º <code>author</code>,ï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">    &lt;<span class="keyword">package</span> name=<span class="string">&quot;com.kuang.pojo&quot;</span>/&gt;</span><br><span class="line">&lt;/typeAliases&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p>
<p>å¦‚æœå®ä½“ç±»ååˆ†å¤šï¼Œå»ºè®®ç”¨ç¬¬äºŒç§æ‰«æåŒ…çš„æ–¹å¼ã€‚</p>
<p>ç¬¬ä¸€ç§å¯ä»¥DIYåˆ«åï¼Œç¬¬äºŒç§ä¸è¡Œï¼Œå¦‚æœéè¦æ”¹ï¼Œéœ€è¦åœ¨å®ä½“ä¸Šå¢åŠ æ³¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Author</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-è®¾ç½®"><a href="#5-è®¾ç½®" class="headerlink" title="5.è®¾ç½®"></a>5.è®¾ç½®</h3><table>
<thead>
<tr>
<th align="left">è®¾ç½®å</th>
<th align="left">æè¿°</th>
<th align="left">æœ‰æ•ˆå€¼</th>
<th align="left">é»˜è®¤</th>
</tr>
</thead>
<tbody><tr>
<td align="left">cacheEnabled</td>
<td align="left">å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚</td>
<td align="left">true | false</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">lazyLoadingEnabled</td>
<td align="left">å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® <code>fetchType</code> å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td>
<td align="left">true | false</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">logImpl</td>
<td align="left">æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td>
<td align="left">SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</td>
<td align="left">æœªè®¾ç½®</td>
</tr>
</tbody></table>
<h3 id="6-å…¶ä»–"><a href="#6-å…¶ä»–" class="headerlink" title="6. å…¶ä»–"></a>6. å…¶ä»–</h3><ul>
<li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li>
<li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li>
<li>pluginsï¼ˆæ’ä»¶ï¼‰<ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>é€šç”¨mapper</li>
</ul>
</li>
</ul>
<h3 id="7-æ˜ å°„å™¨-mappers"><a href="#7-æ˜ å°„å™¨-mappers" class="headerlink" title="7. æ˜ å°„å™¨ mappers"></a>7. æ˜ å°„å™¨ mappers</h3><p>MapperRegistryï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶ï¼›</p>
<p>æ–¹å¼ä¸€: [æ¨èä½¿ç”¨]</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/hou/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.hou.dao.UserMapper&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å’Œå®ƒçš„Mapperå¿…é¡»åŒå</li>
<li>æ¥å£å’Œä»–çš„Mapperå¿…é¡»åœ¨åŒä¸€åŒ…ä¸‹</li>
</ul>
<p>æ–¹å¼ä¸‰ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;mapper resource=&quot;com/hou/dao/UserMapper.xml&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;mapper class=&quot;com.hou.dao.UserMapper&quot; /&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.hou.dao&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å’Œå®ƒçš„Mapperå¿…é¡»åŒå</li>
<li>æ¥å£å’Œä»–çš„Mapperå¿…é¡»åœ¨åŒä¸€åŒ…ä¸‹</li>
</ul>
<h3 id="8-ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"><a href="#8-ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8. ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"></a>8. ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://img-blog.csdnimg.cn/20200623164809990.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜</p>
<p><strong>SqlSessionFactoryBuilder:</strong></p>
<ul>
<li>ä¸€æ—¦åˆ›å»ºäº†SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†</li>
<li>å±€éƒ¨å˜é‡</li>
</ul>
<p><strong>SqlSessionFactory:</strong></p>
<ul>
<li>å°±æ˜¯æ•°æ®åº“è¿æ¥æ± ã€‚</li>
<li>ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ ï¼Œ<strong>æ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ ã€‚</strong> å¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚</li>
<li>å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚</li>
<li>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</li>
</ul>
<p><strong>SqlSession</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚</li>
<li>è¿æ¥åˆ°è¿æ¥æ± çš„è¯·æ±‚ï¼</li>
<li>SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚</li>
<li>ç”¨å®Œä¹‹åèµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨ã€‚</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200623164833872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªMapperå°±ä»£è¡¨æ¯ä¸€ä¸ªå…·ä½“ä¸šåŠ¡ï¼</p>
<h1 id="5-è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"><a href="#5-è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜" class="headerlink" title="5 è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜"></a>5 è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</h1><h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1 é—®é¢˜"></a>1 é—®é¢˜</h3><p>æ•°æ®åº“ä¸­çš„å­—æ®µ</p>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰ï¼Œæµ‹è¯•å®ä½“å­—æ®µä¸ä¸€è‡´çš„æƒ…å†µ</p>
<p>User</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hou.pogo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼š</p>
<p>User{id=2, name=â€™wangâ€™, password=â€™nullâ€™}</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<ul>
<li>èµ·åˆ«å</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select id,name,pwd as password from mybatis.user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>resultMap ç»“æœé›†æ˜ å°„</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„mapperæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.hou.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ç»“æœé›†æ˜ å°„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--colunm æ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ä¸­çš„å±æ€§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--colunm æ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ä¸­çš„å±æ€§--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;result column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/result&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;result column=&quot;name&quot; property=&quot;name&quot;&gt;&lt;/result&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>resultMap å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</li>
<li>ResultMap çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚</li>
<li>å¦‚æœè¿™ä¸ªä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚</li>
</ul>
<h1 id="6-æ—¥å¿—"><a href="#6-æ—¥å¿—" class="headerlink" title="6. æ—¥å¿—"></a>6. æ—¥å¿—</h1><h3 id="1-æ—¥å¿—å·¥å‚"><a href="#1-æ—¥å¿—å·¥å‚" class="headerlink" title="1. æ—¥å¿—å·¥å‚"></a>1. æ—¥å¿—å·¥å‚</h3><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ã€‚æ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ã€‚</p>
<p>æ›¾ç»ï¼šsoutï¼Œdebug</p>
<p>ç°åœ¨ï¼šæ—¥å¿—å·¥å‚</p>
<p><img src="https://img-blog.csdnimg.cn/20200623164920502.png" alt="img"></p>
<ul>
<li>SLF4J</li>
<li>LOG4J [æŒæ¡]</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING [æŒæ¡]</li>
<li>NO_LOGGING</li>
</ul>
<p>å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªï¼Œåœ¨è®¾ç½®ä¸­è®¾å®š</p>
<p>STDOUT_LOGGING æ ‡å¿—æ—¥å¿—è¾“å‡º</p>
<p>mybatis-confiä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/2020062316493391.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="2-Log4j"><a href="#2-Log4j" class="headerlink" title="2. Log4j"></a>2. Log4j</h3><ol>
<li><p>å…ˆå¯¼åŒ…</p>
<p>pom.xmlä¸‹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ–°å»ºlog4j.propertiesæ–‡ä»¶</p>
</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">### set log levels ###</span></span><br><span class="line"><span class="attr">log4j.rootLogger</span> = <span class="string">DEBUG,console,file</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ§åˆ¶å° ###</span></span><br><span class="line"><span class="attr">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="attr">log4j.appender.console.Threshold</span> = <span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout.ConversionPattern</span> = <span class="string">[%c]-%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ ###</span></span><br><span class="line"><span class="attr">log4j.appender.file</span>=<span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.file.File</span>=<span class="string">./log/hou.log</span></span><br><span class="line"><span class="attr">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb </span></span><br><span class="line"><span class="attr">log4j.appender.file.Threshold</span>=<span class="string">DEBUG </span></span><br><span class="line"><span class="attr">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æ—¥å¿—è¾“å‡ºçº§åˆ«</span></span><br><span class="line"><span class="attr">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®å®ç°</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>Log4jä½¿ç”¨</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hou.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hou.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hou.utils.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getLogger(UserDaoTest.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlsessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.æ‰§è¡Œ getmapper</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            logger.info(<span class="string">&quot;æµ‹è¯•&quot;</span>);</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.getUserById(<span class="number">2</span>);</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//å…³é—­</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLog4j</span><span class="params">()</span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;info:è¿›å…¥äº†testlog4j&quot;</span>);</span><br><span class="line">        logger.debug(<span class="string">&quot;debug:è¿›å…¥äº†testlog4j&quot;</span>);</span><br><span class="line">        logger.error(<span class="string">&quot;error:è¿›å…¥äº†testlog4j&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Log4jç®€å•ä½¿ç”¨</strong></p>
<ol>
<li>åœ¨è¦ä½¿ç”¨Log4jçš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ… import org.apache.log4j.Logger;</li>
<li>æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„classå¯¹è±¡</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getLogger(UserDaoTest.class);</span><br></pre></td></tr></table></figure>

<ol>
<li>æ—¥å¿—çº§åˆ«</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">logger.info(<span class="string">&quot;info: æµ‹è¯•log4j&quot;</span>);</span><br><span class="line">logger.debug(<span class="string">&quot;debug: æµ‹è¯•log4j&quot;</span>);</span><br><span class="line">logger.error(<span class="string">&quot;error:æµ‹è¯•log4j&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>info</li>
<li>debug</li>
<li>error</li>
</ol>
<h1 id="7-åˆ†é¡µ"><a href="#7-åˆ†é¡µ" class="headerlink" title="7 åˆ†é¡µ"></a>7 åˆ†é¡µ</h1><p><strong>æ€è€ƒï¼šä¸ºä»€ä¹ˆåˆ†é¡µ?</strong></p>
<ul>
<li>å‡å°‘æ•°æ®çš„å¤„ç†é‡</li>
</ul>
<h3 id="7-1-ä½¿ç”¨Limitåˆ†é¡µ"><a href="#7-1-ä½¿ç”¨Limitåˆ†é¡µ" class="headerlink" title="7.1 ä½¿ç”¨Limitåˆ†é¡µ"></a>7.1 ä½¿ç”¨Limitåˆ†é¡µ</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> LIMIT startIndex,pageSize </span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨MyBatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒSQL</strong></p>
<ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†é¡µ</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserByLimit</span><span class="params">(Map&lt;String,Integer&gt; map)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ†é¡µæŸ¥è¯¢--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLimit&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserByLimit</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">   </span><br><span class="line">    Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Integer&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;startIndex&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pageSize&quot;</span>, <span class="number">2</span>);</span><br><span class="line">    List&lt;User&gt; userList = mapper.getUserByLimit(map);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span>(User user:userList)&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-2-ä½¿ç”¨RowBoundsåˆ†é¡µ"><a href="#7-2-ä½¿ç”¨RowBoundsåˆ†é¡µ" class="headerlink" title="7.2 ä½¿ç”¨RowBoundsåˆ†é¡µ"></a>7.2 ä½¿ç”¨RowBoundsåˆ†é¡µ</h3><p>ä¸å†ä½¿ç”¨SQLå®ç°åˆ†é¡µ</p>
<ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†é¡µ2</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserByRowBounds</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ†é¡µæŸ¥è¯¢2--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByRowBounds&quot;</span>&gt;</span></span><br><span class="line">    select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserByRow</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//RowBoundså®ç°</span></span><br><span class="line">    <span class="type">RowBounds</span> <span class="variable">rowBounds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RowBounds</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡javaä»£ç å±‚é¢</span></span><br><span class="line">    List&lt;User&gt; userList = sqlSession.selectList</span><br><span class="line">        (<span class="string">&quot;com.hou.dao.UserMapper.getUserByRowBounds&quot;</span>,</span><br><span class="line">         <span class="literal">null</span>,rowBounds);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-3-åˆ†é¡µæ’ä»¶"><a href="#7-3-åˆ†é¡µæ’ä»¶" class="headerlink" title="7.3 åˆ†é¡µæ’ä»¶"></a>7.3 åˆ†é¡µæ’ä»¶</h3><p><img src="https://img-blog.csdnimg.cn/20200623164958936.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="8-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8 ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8 ä½¿ç”¨æ³¨è§£å¼€å‘</h1><h3 id="8-1-é¢å‘æ¥å£å¼€å‘"><a href="#8-1-é¢å‘æ¥å£å¼€å‘" class="headerlink" title="8.1 é¢å‘æ¥å£å¼€å‘"></a>8.1 é¢å‘æ¥å£å¼€å‘</h3><p><strong>ä¸‰ä¸ªé¢å‘åŒºåˆ«</strong></p>
<ul>
<li>é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§å’Œæ–¹æ³•</li>
<li>é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç°ï¼›</li>
<li>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„ï¼›</li>
</ul>
<h3 id="8-2-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8-2-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8.2 ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8.2 ä½¿ç”¨æ³¨è§£å¼€å‘</h3><ol>
<li><p>åˆ é™¤ UserMapper.xml</p>
</li>
<li><p>UserMapper</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hou.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hou.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æ ¸å¿ƒé…ç½® mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.hou.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ç»‘å®šæ¥å£--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.hou.dao.UserMapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æœ¬è´¨ï¼šåå°„æœºåˆ¶</p>
<p>åº•å±‚ï¼šåŠ¨æ€ä»£ç†</p>
</li>
</ol>
<h3 id="Mybatisè¯¦ç»†æ‰§è¡Œæµç¨‹ï¼š"><a href="#Mybatisè¯¦ç»†æ‰§è¡Œæµç¨‹ï¼š" class="headerlink" title="Mybatisè¯¦ç»†æ‰§è¡Œæµç¨‹ï¼š"></a>Mybatisè¯¦ç»†æ‰§è¡Œæµç¨‹ï¼š</h3><ol>
<li>Resourceè·å–å…¨å±€é…ç½®æ–‡ä»¶</li>
<li>å®ä¾‹åŒ–SqlsessionFactoryBuilder</li>
<li>è§£æé…ç½®æ–‡ä»¶æµXMLCondigBuilder</li>
<li>Configrationæ‰€æœ‰çš„é…ç½®ä¿¡æ¯</li>
<li>SqlSessionFactoryå®ä¾‹åŒ–</li>
<li>trasactionaläº‹åŠ¡ç®¡ç†</li>
<li>åˆ›å»ºexecutoræ‰§è¡Œå™¨</li>
<li>åˆ›å»ºSqlSession</li>
<li>å®ç°CRUD</li>
<li>æŸ¥çœ‹æ˜¯å¦æ‰§è¡ŒæˆåŠŸ</li>
<li>æäº¤äº‹åŠ¡</li>
<li>å…³é—­</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200623165014965.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20200623165030775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="8-3-æ³¨è§£CRUD"><a href="#8-3-æ³¨è§£CRUD" class="headerlink" title="8.3 æ³¨è§£CRUD"></a>8.3 æ³¨è§£CRUD</h3><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hou.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å¿…é¡»åŠ @Param</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user (id, name, pwd) values&quot; +</span></span><br><span class="line"><span class="meta">            &quot;(#&#123;id&#125;,#&#123;name&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update user set name=#&#123;name&#125;, pwd=#&#123;password&#125; &quot; +</span></span><br><span class="line"><span class="meta">            &quot;where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>MybatisUtile</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">//sqlSessionFactory --&gt; sqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨mybatisç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Test</p>
<p>ã€æ³¨æ„ï¼šæˆ‘ä»¬å¿…é¡»è¦å°†æ¥å£æ³¨å†Œç»‘å®šåˆ°æˆ‘ä»¬çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ã€‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hou.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hou.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hou.utils.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlsessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.æ‰§è¡Œ getmapper</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            List&lt;User&gt; userList = userDao.getUsers();</span><br><span class="line">            <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">                System.out.println(user);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//å…³é—­</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getuserById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlsessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.æ‰§è¡Œ getmapper</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.getUserById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//å…³é—­</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlsessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.æ‰§è¡Œ getmapper</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            userDao.addUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">6</span>, <span class="string">&quot;kun&quot;</span>,<span class="string">&quot;123&quot;</span>));</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//å…³é—­</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlsessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.æ‰§è¡Œ getmapper</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            userDao.updateUser(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">6</span>, <span class="string">&quot;fang&quot;</span>,<span class="string">&quot;123&quot;</span>));</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//å…³é—­</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlsessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// 1.æ‰§è¡Œ getmapper</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            userDao.deleteUser(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//å…³é—­</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å…³äº@Param( )æ³¨è§£</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Š</li>
<li>å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ </li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„è¯ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®å¤§å®¶éƒ½åŠ ä¸Š</li>
<li>æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„@Param()ä¸­è®¾å®šçš„å±æ€§å</li>
</ul>
<p><strong>#{} å’Œ ${}</strong></p>
<h1 id="9-Lombok"><a href="#9-Lombok" class="headerlink" title="9 Lombok"></a>9 Lombok</h1><p>Lomboké¡¹ç›®æ˜¯ä¸€ä¸ªJavaåº“ï¼Œå®ƒä¼šè‡ªåŠ¨æ’å…¥ç¼–è¾‘å™¨å’Œæ„å»ºå·¥å…·ä¸­ï¼ŒLombokæä¾›äº†ä¸€ç»„æœ‰ç”¨çš„æ³¨é‡Šï¼Œç”¨æ¥æ¶ˆé™¤Javaç±»ä¸­çš„å¤§é‡æ ·æ¿ä»£ç ã€‚ä»…äº”ä¸ªå­—ç¬¦(@Data)å°±å¯ä»¥æ›¿æ¢æ•°ç™¾è¡Œä»£ç ä»è€Œäº§ç”Ÿå¹²å‡€ï¼Œç®€æ´ä¸”æ˜“äºç»´æŠ¤çš„Javaç±»ã€‚</p>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li><p>åœ¨IDEAä¸­å®‰è£…Lombokæ’ä»¶</p>
</li>
<li><p>åœ¨é¡¹ç›®ä¸­å¯¼å…¥Lombokçš„jaråŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨ç¨‹åºä¸ŠåŠ æ³¨è§£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">@Getter and @Setter</span><br><span class="line">@FieldNameConstants</span><br><span class="line">@ToString</span><br><span class="line">@EqualsAndHashCode</span><br><span class="line">@AllArgsConstructor, @RequiredArgsConstructor and @NoArgsConstructor</span><br><span class="line">@Log, @Log4j, @Log4j2, @Slf4j, @XSlf4j, @CommonsLog, @JBossLog, @Flogger, @CustomLog</span><br><span class="line">@Data</span><br><span class="line">@Builder</span><br><span class="line">@SuperBuilder</span><br><span class="line">@Singular</span><br><span class="line">@Delegate</span><br><span class="line">@Value</span><br><span class="line">@Accessors</span><br><span class="line">@Wither</span><br><span class="line">@With</span><br><span class="line">@SneakyThrows</span><br></pre></td></tr></table></figure>

<p>@Dataï¼šæ— å‚æ„é€ ï¼Œgetï¼Œsetï¼ŒtoStringï¼ŒhashCode</p>
<p>åœ¨å®ä½“ç±»ä¸ŠåŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200623165052167.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h1 id="10-å¤šå¯¹ä¸€å¤„ç†"><a href="#10-å¤šå¯¹ä¸€å¤„ç†" class="headerlink" title="10 å¤šå¯¹ä¸€å¤„ç†"></a>10 å¤šå¯¹ä¸€å¤„ç†</h1><p>å¤šå¯¹ä¸€ï¼š</p>
<ul>
<li>å¤šä¸ªå­¦ç”Ÿï¼Œå¯¹åº”ä¸€ä¸ªè€å¸ˆ</li>
<li>å¯¹äºå­¦ç”Ÿè€Œè¨€ï¼Œ<strong>å…³è”</strong>â€“å¤šä¸ªå­¦ç”Ÿï¼Œå…³è”ä¸€ä¸ªè€å¸ˆã€å¤šå¯¹ä¸€ã€‘</li>
<li>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œ<strong>é›†åˆ</strong>â€“ä¸€ä¸ªè€å¸ˆï¼Œæœ‰å¾ˆå¤šä¸ªå­¦ç”Ÿã€ä¸€å¯¹å¤šã€‘</li>
</ul>
<p>SQLè¯­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `teacher` (</span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">)ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher(`id`,`name`) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">&#x27;ç§¦è€å¸ˆ&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`tid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">	KEY `fktid`(`tid`),</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> `fktid` <span class="keyword">FOREIGN</span> KEY (`tid`) <span class="keyword">REFERENCES</span> `teacher` (`id`)</span><br><span class="line">)ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student`(`id`,`name`,`tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;å°æ˜&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student`(`id`,`name`,`tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;å°çº¢&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student`(`id`,`name`,`tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;å°å¼ &#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student`(`id`,`name`,`tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;å°æ&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student`(`id`,`name`,`tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;å°ç‹&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="æ­å»ºæµ‹è¯•ç¯å¢ƒ"><a href="#æ­å»ºæµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ­å»ºæµ‹è¯•ç¯å¢ƒ"></a>æ­å»ºæµ‹è¯•ç¯å¢ƒ</h3><ol>
<li><p>IDEAå®‰è£…Lombokæ’ä»¶</p>
</li>
<li><p>å¼•å…¥Mavenä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ–°å»ºå®ä½“ç±»Teacher,Student</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span> <span class="comment">//GET,SET,ToStringï¼Œæœ‰å‚ï¼Œæ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="comment">//å¤šä¸ªå­¦ç”Ÿå¯ä»¥æ˜¯åŒä¸€ä¸ªè€å¸ˆï¼Œå³å¤šå¯¹ä¸€</span></span><br><span class="line">   <span class="keyword">private</span> Teacher teacher;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™å®ä½“ç±»å¯¹åº”çš„Mapperæ¥å£ ã€ä¸¤ä¸ªã€‘</p>
<p>æ— è®ºæœ‰æ²¡æœ‰éœ€è¦ï¼Œéƒ½åº”è¯¥å†™ä¸Šï¼Œä»¥å¤‡åæ¥åªéœ€ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TeacherMapper</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™Mapperæ¥å£å¯¹åº”çš„ mapper.xmlé…ç½®æ–‡ä»¶ ã€ä¸¤ä¸ªã€‘</p>
<p>æ— è®ºæœ‰æ²¡æœ‰éœ€æ±‚ï¼Œéƒ½åº”è¯¥å†™ä¸Šï¼Œä»¥å¤‡åæ¥ä¹‹éœ€ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.StudentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.TeacherMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†Œæˆ‘ä»¬çš„Mapperæ¥å£æˆ–è€…æ–‡ä»¶ï¼ã€æ–¹æ³•å¾ˆå¤šï¼Œéšå¿ƒé€‰ã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç»‘å®šæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.dao.TeacherMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæˆåŠŸï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!--TeaacherMapper--&gt;</span><br><span class="line"><span class="meta">@Select(&quot;select * from teacher where id = #&#123;tid&#125;&quot;)</span></span><br><span class="line">Teacher <span class="title function_">getTeacher</span><span class="params">(<span class="meta">@Param(&quot;tid&quot;)</span> <span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!--MyTest--&gt;</span><br><span class="line"><span class="keyword">package</span> com.kuang.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.kuang.pojo.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.kuang.utils.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">TeacherMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(TeacherMapper.class);</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> mapper.getTeacher(<span class="number">1</span>);</span><br><span class="line">        System.out.println(teacher);</span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3><ol>
<li><p>ç»™StudentMapperæ¥å£å¢åŠ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–æ‰€æœ‰å­¦ç”ŸåŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudents</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™å¯¹åº”æ‰“çš„Mapperæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.StudentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    éœ€æ±‚ï¼šè·å–æ‰€æœ‰å­¦ç”ŸåŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">        1. è·å–æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2. æ ¹æ®è·å–çš„å­¦ç”Ÿä¿¡æ¯çš„è€å¸ˆID-&gt;è·å–è¯¥è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        3. æ€è€ƒé—®é¢˜ï¼Œè¿™æ ·å­¦ç”Ÿçš„ç»“æœé›†ä¸­åº”è¯¥åŒ…å«è€å¸ˆï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œæ•°æ®åº“ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">            1. åšä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼šStudentTeacher</span></span><br><span class="line"><span class="comment">            2. StudentTeacherç»“æœé›†çš„ç±»å‹ä¸º Student</span></span><br><span class="line"><span class="comment">            3. å­¦ç”Ÿä¸­è€å¸ˆçš„å±æ€§ä¸ºteacherï¼Œå¯¹åº”æ•°æ®åº“ä¸­ä¸ºtidã€‚</span></span><br><span class="line"><span class="comment">               å¤šä¸ª [1,...ï¼‰å­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆ=&gt; ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š</span></span><br><span class="line"><span class="comment">            4. æŸ¥çœ‹å®˜ç½‘æ‰¾åˆ°ï¼šassociation â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›ä½¿ç”¨å®ƒæ¥å¤„ç†å…³è”æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--associationå…³è”å±æ€§ propertyå±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span>  <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼</span></span><br><span class="line"><span class="comment">    associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">        column=&quot;&#123;key=value,key=value&#125;&quot;</span></span><br><span class="line"><span class="comment">        å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">      select * from teacher where id = #&#123;id&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™å®Œæ¯•å»Mybatisé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†ŒMapper!</p>
</li>
<li><p>æ³¨æ„ç‚¹è¯´æ˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--associationå…³è”å±æ€§ propertyå±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span>  <span class="attr">column</span>=<span class="string">&quot;&#123;id=tid,name=tid&#125;&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼</span></span><br><span class="line"><span class="comment">associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š</span></span><br><span class="line"><span class="comment">   column=&quot;&#123;key=value,key=value&#125;&quot;</span></span><br><span class="line"><span class="comment">   å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">  select * from teacher where id = #&#123;id&#125; and name = #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetStudents</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(StudentMapper.class);</span><br><span class="line"></span><br><span class="line">   List&lt;Student&gt; students = mapper.getStudents();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (Student student : students)&#123;</span><br><span class="line">       System.out.println(</span><br><span class="line">               <span class="string">&quot;å­¦ç”Ÿå:&quot;</span>+ student.getName()</span><br><span class="line">                       +<span class="string">&quot;\tè€å¸ˆ:&quot;</span>+student.getTeacher().getName());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a>æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h3><p>é™¤äº†ä¸Šé¢è¿™ç§æ–¹å¼ï¼Œè¿˜æœ‰å…¶ä»–æ€è·¯å—ï¼Ÿ</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æŒ‰ç…§ç»“æœè¿›è¡ŒåµŒå¥—å¤„ç†ï¼›</p>
<ol>
<li><p>æ¥å£æ–¹æ³•ç¼–å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudents2</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™å¯¹åº”çš„mapperæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æŒ‰æŸ¥è¯¢ç»“æœåµŒå¥—å¤„ç†</span></span><br><span class="line"><span class="comment">æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">   1. ç›´æ¥æŸ¥è¯¢å‡ºç»“æœï¼Œè¿›è¡Œç»“æœé›†çš„æ˜ å°„</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher2&quot;</span> &gt;</span></span><br><span class="line">  select s.id sid, s.name sname , t.name tname</span><br><span class="line">  from student s,teacher t</span><br><span class="line">  where s.tid = t.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--å…³è”å¯¹è±¡property å…³è”å¯¹è±¡åœ¨Studentå®ä½“ç±»ä¸­çš„å±æ€§--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>å»mybatis-configæ–‡ä»¶ä¸­æ³¨å…¥ã€æ­¤å¤„åº”è¯¥å¤„ç†è¿‡äº†ã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.dao.StudentMapper&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetStudents2</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(StudentMapper.class);</span><br><span class="line"></span><br><span class="line">   List&lt;Student&gt; students = mapper.getStudents2();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (Student student : students)&#123;</span><br><span class="line">       System.out.println(</span><br><span class="line">               <span class="string">&quot;å­¦ç”Ÿå:&quot;</span>+ student.getName()</span><br><span class="line">                       +<span class="string">&quot;\tè€å¸ˆ:&quot;</span>+student.getTeacher().getName());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>å°ç»“</p>
<ul>
<li>æŒ‰ç…§æŸ¥è¯¢è¿›è¡ŒåµŒå¥—å¤„ç†å°±åƒSQLä¸­çš„å­æŸ¥è¯¢</li>
<li>æŒ‰ç…§ç»“æœè¿›è¡ŒåµŒå¥—å¤„ç†å°±åƒSQLä¸­çš„è”è¡¨æŸ¥è¯¢</li>
</ul>
<p>å›é¡¾Mysqlå¤šå¯¹ä¸€æŸ¥è¯¢æ–¹å¼ï¼š</p>
<ul>
<li>å­æŸ¥è¯¢</li>
<li>è”è¡¨æŸ¥è¯¢</li>
</ul>
<h1 id="11-ä¸€å¯¹å¤šå¤„ç†"><a href="#11-ä¸€å¯¹å¤šå¤„ç†" class="headerlink" title="11 ä¸€å¯¹å¤šå¤„ç†"></a>11 ä¸€å¯¹å¤šå¤„ç†</h1><p>æ¯”å¦‚ï¼šä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼<br>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œå°±æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼</p>
<h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><ol>
<li><p>ç¯å¢ƒæ­å»ºï¼Œå’Œåˆšæ‰ä¸€æ ·<br><strong>å®ä½“ç±»ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tid;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€¦.. å’Œä¹‹å‰ä¸€æ ·ï¼Œæ­å»ºæµ‹è¯•çš„ç¯å¢ƒï¼</p>
</li>
</ol>
<h3 id="æŒ‰ç»“æœåµŒå¥—å¤„ç†"><a href="#æŒ‰ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç»“æœåµŒå¥—å¤„ç†"></a>æŒ‰ç»“æœåµŒå¥—å¤„ç†</h3><ol>
<li><p>TeacherMapperæ¥å£ç¼–å†™æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–æŒ‡å®šè€å¸ˆï¼ŒåŠè€å¸ˆä¸‹çš„æ‰€æœ‰å­¦ç”Ÿ</span></span><br><span class="line"><span class="keyword">public</span> Teacher <span class="title function_">getTeacher</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™æ¥å£å¯¹åº”çš„Mapperé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.mapper.TeacherMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   æ€è·¯:</span></span><br><span class="line"><span class="comment">       1. ä»å­¦ç”Ÿè¡¨å’Œè€å¸ˆè¡¨ä¸­æŸ¥å‡ºå­¦ç”Ÿidï¼Œå­¦ç”Ÿå§“åï¼Œè€å¸ˆå§“å</span></span><br><span class="line"><span class="comment">       2. å¯¹æŸ¥è¯¢å‡ºæ¥çš„æ“ä½œåšç»“æœé›†æ˜ å°„</span></span><br><span class="line"><span class="comment">           1. é›†åˆçš„è¯ï¼Œä½¿ç”¨collectionï¼</span></span><br><span class="line"><span class="comment">               JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„</span></span><br><span class="line"><span class="comment">               JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹</span></span><br><span class="line"><span class="comment">               ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent&quot;</span>&gt;</span></span><br><span class="line">      select s.id sid, s.name sname , t.name tname, t.id tid</span><br><span class="line">      from student s,teacher t</span><br><span class="line">      where s.tid = t.id and t.id=#&#123;id&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span>  <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>å°†Mapperæ–‡ä»¶æ³¨å†Œåˆ°MyBatis-configæ–‡ä»¶ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/TeacherMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetTeacher</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">TeacherMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(TeacherMapper.class);</span><br><span class="line">   <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> mapper.getTeacher(<span class="number">1</span>);</span><br><span class="line">   System.out.println(teacher.getName());</span><br><span class="line">   System.out.println(teacher.getStudents());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†</h3><ol>
<li><p>TeacherMapperæ¥å£ç¼–å†™æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Teacher <span class="title function_">getTeacher2</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™æ¥å£å¯¹åº”çš„Mapperé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent2&quot;</span>&gt;</span></span><br><span class="line">select * from teacher where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--columnæ˜¯ä¸€å¯¹å¤šçš„å¤–é”® , å†™çš„æ˜¯ä¸€çš„ä¸»é”®çš„åˆ—å--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getStudentByTeacherId&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentByTeacherId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">  select * from student where tid = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>å°†Mapperæ–‡ä»¶æ³¨å†Œåˆ°MyBatis-configæ–‡ä»¶ä¸­</p>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetTeacher2</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">TeacherMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(TeacherMapper.class);</span><br><span class="line">   <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> mapper.getTeacher2(<span class="number">1</span>);</span><br><span class="line">   System.out.println(teacher.getName());</span><br><span class="line">   System.out.println(teacher.getStudents());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>å°ç»“</strong></p>
<ol>
<li>å…³è”-association</li>
<li>é›†åˆ-collection</li>
<li>æ‰€ä»¥associationæ˜¯ç”¨äºä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€ï¼Œè€Œcollectionæ˜¯ç”¨äºä¸€å¯¹å¤šçš„å…³ç³»</li>
<li>javaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„<ul>
<li>JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹</li>
<li>ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ³¨æ„è¯´æ˜ï¼š</strong></p>
<ol>
<li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡é€šä¿—æ˜“æ‡‚</li>
<li>æ ¹æ®å®é™…è¦æ±‚ï¼Œå°½é‡ç¼–å†™æ€§èƒ½æ›´é«˜çš„SQLè¯­å¥</li>
<li>æ³¨æ„å±æ€§åå’Œå­—æ®µä¸ä¸€è‡´çš„é—®é¢˜</li>
<li>æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ ä¸­ï¼šå­—æ®µå’Œå±æ€§å¯¹åº”çš„é—®é¢˜</li>
<li>å°½é‡ä½¿ç”¨Log4jï¼Œé€šè¿‡æ—¥å¿—æ¥æŸ¥çœ‹è‡ªå·±çš„é”™è¯¯</li>
</ol>
<h1 id="12-åŠ¨æ€SQL"><a href="#12-åŠ¨æ€SQL" class="headerlink" title="12 åŠ¨æ€SQL"></a>12 åŠ¨æ€SQL</h1><p>ä»‹ç»</p>
<p>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼šåŠ¨æ€SQLæŒ‡çš„æ˜¯æ ¹æ®ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ , ç”Ÿæˆä¸åŒçš„Sqlè¯­å¥.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">å®˜ç½‘æè¿°ï¼š</span><br><span class="line">MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ä¾¿æ˜¯å®ƒçš„åŠ¨æ€ SQLã€‚å¦‚æœä½ æœ‰ä½¿ç”¨ JDBC æˆ–å…¶å®ƒç±»ä¼¼æ¡†æ¶çš„ç»éªŒï¼Œä½ å°±èƒ½ä½“ä¼šåˆ°æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥çš„ç—›è‹¦ã€‚ä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQL è¿™ä¸€ç‰¹æ€§å¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</span><br><span class="line">è™½ç„¶åœ¨ä»¥å‰ä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†æ­£æ˜¯ MyBatis æä¾›äº†å¯ä»¥è¢«ç”¨åœ¨ä»»æ„ SQL æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€å¾—ä»¥æ”¹è¿›è¿™ç§æƒ…å½¢ã€‚</span><br><span class="line">åŠ¨æ€ SQL å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis <span class="number">3</span> å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">  -------------------------------</span><br><span class="line">  - <span class="keyword">if</span></span><br><span class="line">  - choose (when, otherwise)</span><br><span class="line">  - trim (where, set)</span><br><span class="line">  - foreach</span><br><span class="line">  -------------------------------</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹‹å‰å†™çš„ SQL è¯­å¥éƒ½æ¯”è¾ƒç®€å•ï¼Œå¦‚æœæœ‰æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å†™å¤æ‚çš„ SQL è¯­å¥ï¼Œå¾€å¾€éœ€è¦æ‹¼æ¥ï¼Œè€Œæ‹¼æ¥ SQL ï¼Œç¨å¾®ä¸æ³¨æ„ï¼Œç”±äºå¼•å·ï¼Œç©ºæ ¼ç­‰ç¼ºå¤±å¯èƒ½éƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™å°±è¦ä½¿ç”¨ mybatis åŠ¨æ€SQLï¼Œé€šè¿‡ <code>if, choose, when, otherwise, trim, where, set, foreach</code>ç­‰æ ‡ç­¾ï¼Œå¯ç»„åˆæˆéå¸¸çµæ´»çš„SQLè¯­å¥ï¼Œä»è€Œåœ¨æé«˜ SQL è¯­å¥çš„å‡†ç¡®æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¤§å¤§æé«˜äº†å¼€å‘äººå‘˜çš„æ•ˆç‡ã€‚</p>
<h3 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h3><p>æ–°å»ºä¸€ä¸ªæ•°æ®åº“è¡¨ï¼šblog</p>
<p>å­—æ®µï¼šidï¼Œtitleï¼Œauthorï¼Œcreate_timeï¼Œviews</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `blog` (</span><br><span class="line">`id` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢id&#x27;</span>,</span><br><span class="line">`title` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢æ ‡é¢˜&#x27;</span>,</span><br><span class="line">`author` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢ä½œè€…&#x27;</span>,</span><br><span class="line">`create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">`views` <span class="type">int</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æµè§ˆé‡&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹</p>
<ol>
<li>åˆ›å»ºMybatisåŸºç¡€å·¥ç¨‹</li>
<li>IDutilå·¥å…·ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IDUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">genId</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>å®ä½“ç±»ç¼–å†™ ã€æ³¨æ„setæ–¹æ³•ä½œç”¨ã€‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Blog</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line">   <span class="keyword">private</span> String title;</span><br><span class="line">   <span class="keyword">private</span> String author;</span><br><span class="line">   <span class="keyword">private</span> Date createTime;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> views;</span><br><span class="line">   <span class="comment">//setï¼Œget....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™Mapperæ¥å£åŠxmlæ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BlogMapper</span> &#123;  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">       PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.kuang.mapper.BlogMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œä¸‹åˆ’çº¿é©¼å³°è‡ªåŠ¨è½¬æ¢</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å†ŒMapper.xml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ’å…¥åˆå§‹æ•°æ®</p>
<p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ–°å¢ä¸€ä¸ªåšå®¢</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addBlog</span><span class="params">(Blog blog)</span>;</span><br><span class="line">sqlé…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">&lt;insert id=<span class="string">&quot;addBlog&quot;</span> parameterType=<span class="string">&quot;blog&quot;</span>&gt;</span><br><span class="line">  insert into <span class="title function_">blog</span> <span class="params">(id, title, author, create_time, views)</span></span><br><span class="line">  values (#&#123;id&#125;,#&#123;title&#125;,#&#123;author&#125;,#&#123;createTime&#125;,#&#123;views&#125;);</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–åšå®¢æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInitBlog</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">Blog</span> <span class="variable">blog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Blog</span>();</span><br><span class="line">   blog.setId(IDUtil.genId());</span><br><span class="line">   blog.setTitle(<span class="string">&quot;Mybatiså¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">   blog.setAuthor(<span class="string">&quot;ç‹‚ç¥è¯´&quot;</span>);</span><br><span class="line">   blog.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">   blog.setViews(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">   mapper.addBlog(blog);</span><br><span class="line"></span><br><span class="line">   blog.setId(IDUtil.genId());</span><br><span class="line">   blog.setTitle(<span class="string">&quot;Javaå¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">   mapper.addBlog(blog);</span><br><span class="line"></span><br><span class="line">   blog.setId(IDUtil.genId());</span><br><span class="line">   blog.setTitle(<span class="string">&quot;Springå¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">   mapper.addBlog(blog);</span><br><span class="line"></span><br><span class="line">   blog.setId(IDUtil.genId());</span><br><span class="line">   blog.setTitle(<span class="string">&quot;å¾®æœåŠ¡å¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">   mapper.addBlog(blog);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–æ•°æ®å®Œæ¯•ï¼</p>
</li>
</ol>
<h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>éœ€æ±‚ï¼šæ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</p>
<ol>
<li><p>ç¼–å†™æ¥å£ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éœ€æ±‚1</span></span><br><span class="line">List&lt;Blog&gt; <span class="title function_">queryBlogIf</span><span class="params">(Map map)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™SQLè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€æ±‚1ï¼š</span></span><br><span class="line"><span class="comment">æ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼</span></span><br><span class="line"><span class="comment">å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">select * from blog where title = #&#123;title&#125; and author = #&#123;author&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog where</span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      title = #&#123;title&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">      and author = #&#123;author&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryBlogIf</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">   HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">   map.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;Mybatiså¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;ç‹‚ç¥è¯´&quot;</span>);</span><br><span class="line">   List&lt;Blog&gt; blogs = mapper.queryBlogIf(map);</span><br><span class="line"></span><br><span class="line">   System.out.println(blogs);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>è¿™æ ·å†™æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœ author ç­‰äº nullï¼Œé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where title=#{title},<strong>ä½†æ˜¯å¦‚æœtitleä¸ºç©ºå‘¢</strong>ï¼Ÿé‚£ä¹ˆæŸ¥è¯¢è¯­å¥ä¸º select * from user where and author=#{author}ï¼Œè¿™æ˜¯é”™è¯¯çš„ SQL è¯­å¥ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ where è¯­å¥ï¼</p>
<h3 id="Where"><a href="#Where" class="headerlink" title="Where"></a>Where</h3><p>ä¿®æ”¹ä¸Šé¢çš„SQLè¯­å¥ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">          title = #&#123;title&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">          and author = #&#123;author&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªâ€œwhereâ€æ ‡ç­¾ä¼šçŸ¥é“å¦‚æœå®ƒåŒ…å«çš„æ ‡ç­¾ä¸­æœ‰è¿”å›å€¼çš„è¯ï¼Œå®ƒå°±æ’å…¥ä¸€ä¸ªâ€˜whereâ€™ã€‚æ­¤å¤–ï¼Œå¦‚æœæ ‡ç­¾è¿”å›çš„å†…å®¹æ˜¯ä»¥AND æˆ–OR å¼€å¤´çš„ï¼Œåˆ™å®ƒä¼šå‰”é™¤æ‰ã€‚</p>
<h3 id="chooseè¯­å¥"><a href="#chooseè¯­å¥" class="headerlink" title="chooseè¯­å¥"></a>chooseè¯­å¥</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ç”¨åˆ°æ‰€æœ‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œåªæƒ³é€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªï¼ŒæŸ¥è¯¢æ¡ä»¶æœ‰ä¸€ä¸ªæ»¡è¶³å³å¯ï¼Œä½¿ç”¨ choose æ ‡ç­¾å¯ä»¥è§£å†³æ­¤ç±»é—®é¢˜ï¼Œç±»ä¼¼äº Java çš„ switch è¯­å¥</p>
<ol>
<li><p>ç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Blog&gt; <span class="title function_">queryBlogChoose</span><span class="params">(Map map)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>sqlé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">                title = #&#123;title&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">              and author = #&#123;author&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">              and views = #&#123;views&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryBlogChoose</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">   HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">   map.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;Javaå¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;ç‹‚ç¥è¯´&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;views&quot;</span>,<span class="number">9999</span>);</span><br><span class="line">   List&lt;Blog&gt; blogs = mapper.queryBlogChoose(map);</span><br><span class="line"></span><br><span class="line">   System.out.println(blogs);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>è¡¥å……</p>
</blockquote>
<p>MyBatis æä¾›äº† choose å…ƒç´ ã€‚ifæ ‡ç­¾æ˜¯ä¸(and)çš„å…³ç³»ï¼Œè€Œ choose æ˜¯æˆ–(or)çš„å…³ç³»ã€‚</p>
<p>chooseæ ‡ç­¾æ˜¯æŒ‰é¡ºåºåˆ¤æ–­å…¶å†…éƒ¨whenæ ‡ç­¾ä¸­çš„testæ¡ä»¶å‡ºå¦æˆç«‹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ choose ç»“æŸã€‚å½“ choose ä¸­æ‰€æœ‰ when çš„æ¡ä»¶éƒ½ä¸æ»¡åˆ™æ—¶ï¼Œåˆ™æ‰§è¡Œ otherwise ä¸­çš„sqlã€‚ç±»ä¼¼äºJava çš„ switch è¯­å¥ï¼Œchoose ä¸º switchï¼Œwhen ä¸º caseï¼Œotherwise åˆ™ä¸º defaultã€‚</p>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>åŒç†ï¼Œä¸Šé¢çš„å¯¹äºæŸ¥è¯¢ SQL è¯­å¥åŒ…å« where å…³é”®å­—ï¼Œå¦‚æœåœ¨è¿›è¡Œæ›´æ–°æ“ä½œçš„æ—¶å€™ï¼Œå«æœ‰ set å…³é”®è¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<ol>
<li><p>ç¼–å†™æ¥å£æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateBlog</span><span class="params">(Map map)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>sqlé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨æ„setæ˜¯ç”¨çš„é€—å·éš”å¼€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  update blog</span><br><span class="line">     <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">            title = #&#123;title&#125;,</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">            author = #&#123;author&#125;</span><br><span class="line">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateBlog</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">   HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">   map.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;åŠ¨æ€SQL&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;ç§¦ç–†&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;9d6a763f5e1347cebda43e2a32687a77&quot;</span>);</span><br><span class="line"></span><br><span class="line">   mapper.updateBlog(map);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p><strong>æ‰€è°“çš„åŠ¨æ€SQLï¼Œæœ¬è´¨è¿˜æ˜¯SQLè¯­å¥ï¼Œåªæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨SQLå±‚é¢ï¼Œå»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç </strong></p>
</blockquote>
<h3 id="SQLç‰‡æ®µ"><a href="#SQLç‰‡æ®µ" class="headerlink" title="SQLç‰‡æ®µ"></a>SQLç‰‡æ®µ</h3><p>æœ‰æ—¶å€™å¯èƒ½æŸä¸ª sql è¯­å¥æˆ‘ä»¬ç”¨çš„ç‰¹åˆ«å¤šï¼Œä¸ºäº†å¢åŠ ä»£ç çš„é‡ç”¨æ€§ï¼Œç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä»£ç æŠ½å–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨ã€‚</p>
<p>æå–SQLç‰‡æ®µï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      title = #&#123;title&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">      and author = #&#123;author&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¼•ç”¨SQLç‰‡æ®µï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- å¼•ç”¨ sql ç‰‡æ®µï¼Œå¦‚æœrefid æŒ‡å®šçš„ä¸åœ¨æœ¬æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‰é¢åŠ ä¸Š namespace --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- åœ¨è¿™é‡Œè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–çš„ sql ç‰‡æ®µ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<p>â‘ ã€æœ€å¥½åŸºäº å•è¡¨æ¥å®šä¹‰ sql ç‰‡æ®µï¼Œæé«˜ç‰‡æ®µçš„å¯é‡ç”¨æ€§<br>â‘¡ã€åœ¨ sql ç‰‡æ®µä¸­ä¸è¦åŒ…æ‹¬ where</p>
<h3 id="Foreach"><a href="#Foreach" class="headerlink" title="Foreach"></a>Foreach</h3><ul>
<li>åŠ¨æ€ SQL çš„å¦ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ˆå°¤å…¶æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼‰ã€‚</li>
<li>foreach å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå…ƒç´ ä¹Ÿä¸ä¼šé”™è¯¯åœ°æ·»åŠ å¤šä½™çš„åˆ†éš”ç¬¦ï¼Œçœ‹å®ƒå¤šæ™ºèƒ½ï¼</li>
<li>æç¤ºä½ å¯ä»¥å°†ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚ Listã€Set ç­‰ï¼‰ã€Map å¯¹è±¡æˆ–è€…æ•°ç»„å¯¹è±¡ä½œä¸ºé›†åˆå‚æ•°ä¼ é€’ç»™ foreachã€‚å½“ä½¿ç”¨å¯è¿­ä»£å¯¹è±¡æˆ–è€…æ•°ç»„æ—¶ï¼Œindex æ˜¯å½“å‰è¿­ä»£çš„åºå·ï¼Œitem çš„å€¼æ˜¯æœ¬æ¬¡è¿­ä»£è·å–åˆ°çš„å…ƒç´ ã€‚å½“ä½¿ç”¨ Map å¯¹è±¡ï¼ˆæˆ–è€… Map.Entry å¯¹è±¡çš„é›†åˆï¼‰æ—¶ï¼Œindex æ˜¯é”®ï¼Œitem æ˜¯å€¼ã€‚</li>
</ul>
<blockquote>
<p>å°†æ•°æ®åº“ä¸­å‰ä¸‰ä¸ªæ•°æ®çš„idä¿®æ”¹ä¸º1,2,3ï¼›</p>
<p>éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦æŸ¥è¯¢ blog è¡¨ä¸­ id åˆ†åˆ«ä¸º1,2,3çš„åšå®¢ä¿¡æ¯</p>
</blockquote>
<ol>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Blog&gt; <span class="title function_">queryBlogForeach</span><span class="params">(Map map)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™SQLè¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±æ€§</span></span><br><span class="line"><span class="comment">       item:æ¯æ¬¡éå†ç”Ÿæˆçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">       open:å¼€å§‹éå†æ—¶çš„æ‹¼æ¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       close:ç»“æŸæ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       separator:éå†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">       select * from blog where 1=1 and (id=1 or id=2 or id=3)</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span>  <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">          id=#&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryBlogForeach</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">HashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">   List&lt;Integer&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">   ids.add(<span class="number">1</span>);</span><br><span class="line">   ids.add(<span class="number">2</span>);</span><br><span class="line">   ids.add(<span class="number">3</span>);</span><br><span class="line">   map.put(<span class="string">&quot;ids&quot;</span>,ids);</span><br><span class="line"></span><br><span class="line">   List&lt;Blog&gt; blogs = mapper.queryBlogForeach(map);</span><br><span class="line"></span><br><span class="line">   System.out.println(blogs);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>å…¶å®åŠ¨æ€ sql è¯­å¥çš„ç¼–å†™å¾€å¾€å°±æ˜¯ä¸€ä¸ªæ‹¼æ¥çš„é—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ‹¼æ¥å‡†ç¡®ï¼Œæˆ‘ä»¬æœ€å¥½é¦–å…ˆè¦å†™åŸç”Ÿçš„ sql è¯­å¥å‡ºæ¥ï¼Œç„¶ååœ¨é€šè¿‡ mybatis åŠ¨æ€sql å¯¹ç…§ç€æ”¹ï¼Œé˜²æ­¢å‡ºé”™ã€‚å¤šåœ¨å®è·µä¸­ä½¿ç”¨æ‰æ˜¯ç†Ÿç»ƒæŒæ¡å®ƒçš„æŠ€å·§ã€‚</p>
<h1 id="13-ç¼“å­˜"><a href="#13-ç¼“å­˜" class="headerlink" title="13 ç¼“å­˜"></a>13 ç¼“å­˜</h1><h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜</h3><ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Šï¼ˆå…³ç³»å‹æ•°æ®åº“æŸ¥è¯¢æ–‡ä»¶ï¼‰æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜</h3><ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜"><a href="#ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜" class="headerlink" title="ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜"></a>ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜</h3><ul>
<li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚ã€å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‘</li>
</ul>
<h3 id="Mybatisç¼“å­˜"><a href="#Mybatisç¼“å­˜" class="headerlink" title="Mybatisç¼“å­˜"></a>Mybatisç¼“å­˜</h3><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</p>
<p>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</p>
<p>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</p>
<h4 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h4><p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š</p>
<p>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</p>
<p>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</p>
<p>æµ‹è¯•</p>
<ol>
<li>åœ¨mybatisä¸­åŠ å…¥æ—¥å¿—ï¼Œæ–¹ä¾¿æµ‹è¯•ç»“æœ</li>
<li>ç¼–å†™æ¥å£æ–¹æ³•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">User <span class="title function_">queryUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>æ¥å£å¯¹åº”çš„Mapperæ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">  select * from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUserById</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç»“æœåˆ†æ</li>
</ol>
<p><img src="https://images.cnblogs.com/cnblogs_com/kylinxxx/1675669/o_2101060823391609921408(1).jpg" alt="img"></p>
<blockquote>
<p>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ</p>
</blockquote>
<p>ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯ä¸€ç›´å¼€å¯çš„ï¼Œæˆ‘ä»¬å…³é—­ä¸äº†å®ƒï¼›</p>
<p>ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µï¼šæ²¡æœ‰ä½¿ç”¨åˆ°å½“å‰çš„ä¸€çº§ç¼“å­˜ï¼Œæ•ˆæœå°±æ˜¯ï¼Œè¿˜éœ€è¦å†å‘æ•°æ®åº“ä¸­å‘èµ·ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼</p>
<ol>
<li>sqlSessionä¸åŒ</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUserById</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session2</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> session2.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> mapper2.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">   session2.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿç»“æœï¼šå‘ç°å‘é€äº†ä¸¤æ¡SQLè¯­å¥ï¼</p>
<p>ç»“è®ºï¼š<strong>æ¯ä¸ªsqlSessionä¸­çš„ç¼“å­˜ç›¸äº’ç‹¬ç«‹</strong></p>
<ol>
<li>sqlSessionç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åŒ</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUserById</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> mapper2.queryUserById(<span class="number">2</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿç»“æœï¼šå‘ç°å‘é€äº†ä¸¤æ¡SQLè¯­å¥ï¼å¾ˆæ­£å¸¸çš„ç†è§£</p>
<p>ç»“è®ºï¼š<strong>å½“å‰ç¼“å­˜ä¸­ï¼Œä¸å­˜åœ¨è¿™ä¸ªæ•°æ®</strong></p>
<ol>
<li>sqlSessionç›¸åŒï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œï¼</li>
</ol>
<p>å¢åŠ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¿®æ”¹ç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(Map map)</span>;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™SQL</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  update user set name = #&#123;name&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUserById</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line"></span><br><span class="line">   <span class="type">HashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">   map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;kuangshen&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;id&quot;</span>,<span class="number">4</span>);</span><br><span class="line">   mapper.updateUser(map);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line"></span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿç»“æœï¼šæŸ¥è¯¢åœ¨ä¸­é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œåï¼Œé‡æ–°æ‰§è¡Œäº†</p>
<p>ç»“è®ºï¼š<strong>å› ä¸ºå¢åˆ æ”¹æ“ä½œå¯èƒ½ä¼šå¯¹å½“å‰æ•°æ®äº§ç”Ÿå½±å“</strong></p>
<p>4ã€sqlSessionç›¸åŒï¼Œæ‰‹åŠ¨æ¸…é™¤ä¸€çº§ç¼“å­˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUserById</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line"></span><br><span class="line">   session.clearCache();<span class="comment">//æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line"></span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªmap</p>
<h3 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h3><p>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</p>
<p><strong>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜</strong>ï¼›</p>
<blockquote>
<p>å·¥ä½œæœºåˆ¶</p>
</blockquote>
<p>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</p>
<p>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</p>
<p>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</p>
<p>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</p>
<blockquote>
<p>ä½¿ç”¨æ­¥éª¤</p>
</blockquote>
<ol>
<li>å¼€å¯å…¨å±€ç¼“å­˜ ã€mybatis-config.xmlã€‘</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å»æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªé…ç½®éå¸¸ç®€å•ï¼›ã€xxxMapper.xmlã€‘</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">å®˜æ–¹ç¤ºä¾‹=====&gt;æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag"> <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">size</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚</span><br></pre></td></tr></table></figure>

<ol>
<li>ä»£ç æµ‹è¯•</li>
</ol>
<p>æ‰€æœ‰çš„å®ä½“ç±»å…ˆå®ç°åºåˆ—åŒ–æ¥å£</p>
<p>æµ‹è¯•ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryUserById</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">session2</span> <span class="operator">=</span> MybatisUtils.getSession();</span><br><span class="line"></span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(UserMapper.class);</span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> session2.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   session.close();</span><br><span class="line"></span><br><span class="line">   <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> mapper2.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session2.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“è®º</p>
<p>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨åŒä¸€ä¸ªMapperä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®</p>
<p>æŸ¥å‡ºçš„æ•°æ®éƒ½ä¼šè¢«é»˜è®¤å…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</p>
<p>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬åˆ°äºŒçº§ç¼“å­˜ä¸­</p>
<h3 id="ç¼“å­˜åŸç†å›¾"><a href="#ç¼“å­˜åŸç†å›¾" class="headerlink" title="ç¼“å­˜åŸç†å›¾"></a>ç¼“å­˜åŸç†å›¾</h3><p><img src="https://images.cnblogs.com/cnblogs_com/kylinxxx/1675669/o_2101060827301609921635(1).jpg" alt="img"></p>
<h3 id="è‡ªå®šä¹‰ç¼“å­˜-ehcacheï¼ˆå¯ä»¥äº†è§£ï¼‰"><a href="#è‡ªå®šä¹‰ç¼“å­˜-ehcacheï¼ˆå¯ä»¥äº†è§£ï¼‰" class="headerlink" title="è‡ªå®šä¹‰ç¼“å­˜-ehcacheï¼ˆå¯ä»¥äº†è§£ï¼‰"></a>è‡ªå®šä¹‰ç¼“å­˜-ehcacheï¼ˆå¯ä»¥äº†è§£ï¼‰</h3><p>Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ï¼Œä¸»è¦é¢å‘é€šç”¨ç¼“å­˜ã€‚</p>
<p>è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨ehcacheï¼Œå…ˆè¦å¯¼åŒ…ï¼</p>
<p>åœ¨mapperä¸­æŒ‡å®šä½¿ç”¨æˆ‘ä»¬çš„ehcacheç¼“å­˜å®ç°ï¼</p>
<p><strong>ç›®å‰ï¼šRedisæ•°æ®åº“æ¥åšç¼“å­˜ï¼K-V</strong></p>
]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Springå­¦ä¹ </title>
    <url>/2021/06/11/Spring%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="1ã€Spring-2021-7-12"><a href="#1ã€Spring-2021-7-12" class="headerlink" title="1ã€Spring(2021-7-12)"></a>1ã€Spring(2021-7-12)</h2><h3 id="1-1-ç®€ä»‹"><a href="#1-1-ç®€ä»‹" class="headerlink" title="1.1 ç®€ä»‹"></a>1.1 ç®€ä»‹</h3><ul>
<li>Springï¼šæ˜¥å¤©â€”â€”&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ï¼</li>
<li>2002ï¼Œé¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶çš„é›å½¢ï¼šinterface21æ¡†æ¶ï¼</li>
<li>Springæ¡†æ¶å³ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº2004å¹´3æœˆ24æ—¥å‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚</li>
<li><strong>Rod Johnson</strong>ï¼ŒSpring Frameworkåˆ›å§‹äººï¼Œè‘—åä½œè€…ã€‚å¾ˆéš¾æƒ³è±¡Rod Johnsonçš„å­¦å†ï¼ŒçœŸçš„è®©å¥½å¤šäººå¤§åƒä¸€æƒŠï¼Œä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚</li>
<li>Springç†å¿µï¼šä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶ï¼</li>
<li>SSHï¼šStruct2 + Spring + Hibernate!</li>
<li>SSMï¼šSpringMVC + Spring + Mybatis!</li>
</ul>
<p>å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-framework#overview">https://spring.io/projects/spring-framework#overview</a></p>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://repo.spring.io/release/org/springframework/spring/">https://repo.spring.io/release/org/springframework/spring/</a></p>
<p>GitHubï¼š<a href="https://github.com/spring-projects/spring-framework">https://github.com/spring-projects/spring-framework</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-ä¼˜ç‚¹"><a href="#1-2-ä¼˜ç‚¹" class="headerlink" title="1.2 ä¼˜ç‚¹"></a>1.2 ä¼˜ç‚¹</h3><ul>
<li>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li>
<li>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼</li>
<li>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼</li>
<li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼</li>
</ul>
<p>æ€»ç»“ä¸€å¥è¯ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼</p>
<h3 id="1-3-ç»„æˆ"><a href="#1-3-ç»„æˆ" class="headerlink" title="1.3 ç»„æˆ"></a>1.3 ç»„æˆ</h3><p><img src="https://img-blog.csdnimg.cn/20201109101410173.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="1-4-æ‹“å±•"><a href="#1-4-æ‹“å±•" class="headerlink" title="1.4 æ‹“å±•"></a>1.4 æ‹“å±•</h3><p>ç°ä»£åŒ–çš„Javaå¼€å‘ï¼è¯´ç™½äº†å°±æ˜¯åŸºäºSpringçš„å¼€å‘ï¼</p>
<ul>
<li>Spring Boot<ul>
<li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶</li>
<li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡</li>
<li>çº¦å®šå¤§äºé…ç½®</li>
</ul>
</li>
<li>Spring Cloud<ul>
<li>SpringCloudæ˜¯åŸºäºSpringBootå®ç°çš„</li>
</ul>
</li>
</ul>
<p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡Springä»¥åŠSpringMVCï¼<strong>æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼</strong></p>
<p><strong>å¼Šç«¯ï¼šå‘å±•äº†å¤ªä¹…ä¹‹åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼é…ç½®ååˆ†ç¹çï¼Œäººç§°ï¼šâ€œé…ç½®åœ°ç‹±â€</strong></p>
<h2 id="2ã€IOCç†è®ºæ¨å¯¼"><a href="#2ã€IOCç†è®ºæ¨å¯¼" class="headerlink" title="2ã€IOCç†è®ºæ¨å¯¼"></a>2ã€IOCç†è®ºæ¨å¯¼</h2><ol>
<li><p>UserDao æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>UserDaoImpl å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤è·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>UserService ä¸šåŠ¡æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>UserServiceImpl ä¸šåŠ¡å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        userDao.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä»–ä»¬ä¸éœ€è¦æ¥è§¦ï¼</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        userService.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹åŸä»£ç ï¼å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µï¼</p>
<p><img src="https://img-blog.csdnimg.cn/20201109112133683.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªSetæ¥å£å®ç°ï¼Œå·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼æ§åˆ¶æƒåœ¨ç¨‹åºå‘˜æ‰‹ä¸Šï¼</li>
<li>ä½¿ç”¨äº†setæ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ï¼</li>
</ul>
<p>è¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ç¨‹åºçŒ¿ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ã€‚ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½~ï¼Œå¯ä»¥æ›´åŠ ä¸“æ³¨çš„åœ¨ä¸šåŠ¡çš„å®ç°ä¸Šï¼è¿™æ˜¯IOCçš„åŸå‹ï¼</p>
<p><img src="https://img-blog.csdnimg.cn/20201109112157443.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="IOCæœ¬è´¨"><a href="#IOCæœ¬è´¨" class="headerlink" title="IOCæœ¬è´¨"></a>IOCæœ¬è´¨</h3><p><strong>æ§åˆ¶åè½¬IoCï¼ˆInversion of Controlï¼‰ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•ï¼Œ</strong>ä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚</p>
<p>é‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚<br><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰ã€‚</strong></p>
<h2 id="3ã€HelloSpring"><a href="#3ã€HelloSpring" class="headerlink" title="3ã€HelloSpring"></a>3ã€HelloSpring</h2><ol>
<li>æ–°å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œç¼–å†™å®ä½“ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStr</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;str=&#x27;&quot;</span> + str + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™xmlé…ç½®æ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨Springæ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Springè¿™äº›éƒ½ç§°ä¸ºBean</span></span><br><span class="line"><span class="comment">    ç±»å‹ å˜é‡å = new ç±»å‹();</span></span><br><span class="line"><span class="comment">    Hello hello = new Hello();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    id = å˜é‡å</span></span><br><span class="line"><span class="comment">    class = newçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">    property ç›¸å½“äºç»™å¯¹è±¡ä¸­çš„å±æ€§è®¾ç½®ä¸€ä¸ªå€¼ï¼</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬çš„å¯¹è±¡ç°åœ¨éƒ½åœ¨Springä¸­çš„ç®¡ç†äº†ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ï¼Œç›´æ¥å»é‡Œé¢å–å‡ºæ¥å°±å¯ä»¥ï¼</span></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">hello</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(hello.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ€è€ƒé—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>Helloå¯¹è±¡æ˜¯è°åˆ›å»ºçš„ï¼Ÿ<br>Helloå¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„ã€‚</li>
<li>Helloå¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ<br>Helloå¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„ã€‚</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬ï¼š</p>
<p><strong>æ§åˆ¶</strong>ï¼šè°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ï¼Œä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„ã€‚</p>
<p><strong>åè½¬</strong>ï¼šç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ã€‚</p>
<p><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šå°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„ã€‚</p>
<p>IOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚</p>
<p>å¯ä»¥é€šè¿‡new ClassPathXmlApplicationContextå»æµè§ˆä¸€ä¸‹åº•å±‚æºç ã€‚</p>
<p><strong>OKï¼Œåˆ°äº†ç°åœ¨ï¼Œæˆ‘ä»¬å½»åº•ä¸ç”¨åœ¨ç¨‹åºä¸­å»æ”¹åŠ¨äº†ï¼Œè¦å®ç°ä¸åŒçš„æ“ä½œï¼Œåªéœ€è¦åœ¨xmlé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œæ‰€è°“çš„IOCï¼Œä¸€å¥è¯æå®šï¼šå¯¹è±¡ç”±Springæ¥åˆ›å»ºï¼Œç®¡ç†ï¼Œè£…é…ï¼</strong></p>
<h2 id="4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼ˆ2020-11-10ï¼‰"><a href="#4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼ˆ2020-11-10ï¼‰" class="headerlink" title="4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼ˆ2020-11-10ï¼‰"></a>4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼ˆ2020-11-10ï¼‰</h2><ol>
<li><p>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤ï¼</p>
</li>
<li><p>å‡è®¾æˆ‘ä»¬è¦ä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡ã€‚</p>
<ol>
<li>ä¸‹æ ‡èµ‹å€¼</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬ä¸€ç§æ–¹å¼ï¼šä¸‹æ ‡èµ‹å€¼    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç‹‚ç¥è¯´Java&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç±»å‹</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡ç±»å‹çš„åˆ›å»ºï¼Œä¸å»ºè®®ä½¿ç”¨    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lifa&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å‚æ•°å</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬ä¸‰ç§æ–¹å¼ï¼šç›´æ¥é€šè¿‡å‚æ•°åæ¥è®¾ç½®    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æå‘&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå®¹å™¨ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†ï¼</p>
<h2 id="5ã€Springé…ç½®"><a href="#5ã€Springé…ç½®" class="headerlink" title="5ã€Springé…ç½®"></a>5ã€Springé…ç½®</h2><h3 id="5-1-åˆ«å"><a href="#5-1-åˆ«å" class="headerlink" title="5.1 åˆ«å"></a>5.1 åˆ«å</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ«åï¼Œå¦‚æœæ·»åŠ äº†åˆ«åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åè·å–åˆ°è¿™ä¸ªå¯¹è±¡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;userNew&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-Beané…ç½®"><a href="#5-2-Beané…ç½®" class="headerlink" title="5.2 Beané…ç½®"></a>5.2 Beané…ç½®</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬å­¦çš„å¯¹è±¡å</span></span><br><span class="line"><span class="comment">classï¼šbeanå¯¹è±¡æ‰€å¯¹åº”çš„å…¨é™å®šåï¼šåŒ…å+ç±»å</span></span><br><span class="line"><span class="comment">nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶å–å¤šä¸ªåˆ«å</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.UserT&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user2 u2,u3;u4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»‘å¿ƒç™½è²&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-import"><a href="#5-3-import" class="headerlink" title="5.3 import"></a>5.3 import</h3><p>è¿™ä¸ªimportã€‚ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ªã€‚<br>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººè´Ÿè´£ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨importå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ï¼</p>
<ul>
<li><p>å¼ ä¸‰</p>
</li>
<li><p>æå››</p>
</li>
<li><p>ç‹äº”</p>
</li>
<li><p>applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean2.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean3.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®å°±å¯ä»¥äº†ã€‚</p>
<h2 id="6ã€ä¾èµ–æ³¨å…¥"><a href="#6ã€ä¾èµ–æ³¨å…¥" class="headerlink" title="6ã€ä¾èµ–æ³¨å…¥"></a>6ã€ä¾èµ–æ³¨å…¥</h2><h3 id="6-1-æ„é€ å™¨æ³¨å…¥"><a href="#6-1-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="6.1 æ„é€ å™¨æ³¨å…¥"></a>6.1 æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢å·²ç»ä»‹ç»è¿‡ï¼Œå‚è€ƒ<strong>4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</strong></p>
<h3 id="6-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"><a href="#6-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘" class="headerlink" title="6.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"></a>6.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</h3><ul>
<li>ä¾èµ–æ³¨å…¥ï¼šSetæ³¨å…¥<ul>
<li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ï¼</li>
<li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥ï¼</li>
</ul>
</li>
</ul>
<p>ã€ç¯å¢ƒæ­å»ºã€‘</p>
<ol>
<li>å¤æ‚ç±»å‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>çœŸå®æµ‹è¯•å¯¹è±¡</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>beans.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬ä¸€ç§ï¼šæ™®é€šå€¼æ³¨å…¥ï¼Œvalue        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»‘å¿ƒç™½è²&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">        System.out.println(student.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®Œå–„æ³¨å…¥ä¿¡æ¯</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Address&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è¥¿å®‰&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç¬¬ä¸€ç§ï¼šæ™®é€šå€¼æ³¨å…¥ï¼Œvalue        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»‘å¿ƒç™½è²&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ç¬¬äºŒç§ï¼š        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ•°ç»„        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’ä¼ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--List        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ‰“ç¯®çƒ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>çœ‹ç”µå½±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ•²ä»£ç <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Map        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;èº«ä»½è¯&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456789987456321&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;é“¶è¡Œå¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;359419496419481649&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Set        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;games&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>COC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>BOB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--NULL        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Properties        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;driver&quot;</span>&gt;</span>20191029<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;url&quot;</span>&gt;</span>102.0913.524.4585<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;user&quot;</span>&gt;</span>é»‘å¿ƒç™½è²<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;password&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#6-3-æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="6.3 æ‹“å±•æ–¹å¼æ³¨å…¥"></a>6.3 æ‹“å±•æ–¹å¼æ³¨å…¥</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´è¿›è¡Œæ³¨å…¥</p>
<p>å®˜æ–¹è§£é‡Šï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201110193916911.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:c</span>=<span class="string">&quot;http://www.springframework.org/schema/c&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--på‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§çš„å€¼ï¼šproperty--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;é»‘å¿ƒç™½è²&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--cå‘½åç©ºé—´æ³¨å…¥ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼šconstructor-args--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;ç‹‚ç¥&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;22&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;userbeans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>,User.class);</span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user2&quot;</span>,User.class);</span><br><span class="line">    System.out.println(user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼špå‘½åç©ºé—´å’Œcå‘½åç©ºé—´ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å¯¼å…¥xmlçº¦æŸ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-beançš„ä½œç”¨åŸŸ"><a href="#6-4-beançš„ä½œç”¨åŸŸ" class="headerlink" title="6.4 beançš„ä½œç”¨åŸŸ"></a>6.4 beançš„ä½œç”¨åŸŸ</h3><p><img src="https://img-blog.csdnimg.cn/20201111101635200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ol>
<li>å•ä¾‹æ¨¡å¼ï¼ˆSpringé»˜è®¤æœºåˆ¶ï¼‰</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;ç‹‚ç¥&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;22&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡ï¼</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;ç‹‚ç¥&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;22&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å…¶ä½™çš„requestã€sessionã€applicationã€è¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ç”¨åˆ°ï¼</li>
</ol>
<h2 id="7ã€Beançš„è‡ªåŠ¨è£…é…"><a href="#7ã€Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="7ã€Beançš„è‡ªåŠ¨è£…é…"></a>7ã€Beançš„è‡ªåŠ¨è£…é…</h2><ul>
<li>è‡ªåŠ¨è£…é…æ˜¯Springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼</li>
<li>Springä¼šåœ¨ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§</li>
</ul>
<p>åœ¨Springä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼ï¼š</p>
<ol>
<li>åœ¨xmlä¸­æ˜¾å¼çš„é…ç½®ï¼›</li>
<li>åœ¨javaä¸­æ˜¾å¼é…ç½®ï¼›</li>
<li>éšå¼çš„è‡ªåŠ¨è£…é…beanã€é‡è¦ã€‘</li>
</ol>
<h3 id="7-1-æµ‹è¯•"><a href="#7-1-æµ‹è¯•" class="headerlink" title="7.1 æµ‹è¯•"></a>7.1 æµ‹è¯•</h3><p>ç¯å¢ƒæ­å»ºï¼šåˆ›å»ºé¡¹ç›®ï¼Œä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.People&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°ç™½è²&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;cat&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-ByNameè‡ªåŠ¨è£…é…"><a href="#7-2-ByNameè‡ªåŠ¨è£…é…" class="headerlink" title="7.2 ByNameè‡ªåŠ¨è£…é…"></a>7.2 ByNameè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">byNameï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„bean idï¼</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°ç™½è²&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-ByTypeè‡ªåŠ¨è£…é…"><a href="#7-3-ByTypeè‡ªåŠ¨è£…é…" class="headerlink" title="7.3 ByTypeè‡ªåŠ¨è£…é…"></a>7.3 ByTypeè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">byTypeï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„beanï¼</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°ç™½è²&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š</p>
<ul>
<li>ByNameçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´ï¼</li>
<li>ByTypeçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´ï¼</li>
</ul>
<h3 id="7-4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"><a href="#7-4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…" class="headerlink" title="7.4 ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"></a>7.4 ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h3><p>jdk1.5æ”¯æŒçš„æ³¨è§£ï¼ŒSpring2.5å°±æ”¯æŒæ³¨è§£äº†ï¼</p>
<p>è¦ä½¿ç”¨æ³¨è§£é¡»çŸ¥ï¼š</p>
<ol>
<li><p>å¯¼å…¥çº¦æŸ</p>
</li>
<li><p>é…ç½®æ³¨è§£çš„æ”¯æŒ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">	        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>@Autowired</strong></p>
<p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨å³å¯ï¼ä¹Ÿå¯ä»¥åœ¨setæ–¹æ³•ä¸Šä½¿ç”¨ï¼</p>
<p>ä½¿ç”¨Autowriedæˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•äº†ï¼Œå‰ææ˜¯ä½ è¿™ä¸ªè‡ªåŠ¨é…ç½®çš„å±æ€§åœ¨IOC(Spring)å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆåå­—ByNameï¼</p>
<p><strong>ç§‘æ™®ï¼š</strong></p>
<blockquote>
<p>@Nullable å­—æ®µæ ‡è®°äº†äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Autowired &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¾å¼å®šä¹‰äº†Autowiredçš„requiredå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©º</span></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ@Autowiredè‡ªåŠ¨è£…é…çš„ç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨è§£ã€@Autowiredã€‘å®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Qualifier(value = â€œxxxâ€)å»é…ç½®@Autowiredçš„ä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;cat111&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;dog222&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Resource</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š</p>
<p>@Resourceå’Œ@Autowiredçš„åŒºåˆ«ï¼š</p>
<ul>
<li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</li>
<li>@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ï¼ã€å¸¸ç”¨ã€‘</li>
<li>@Resourceé»˜è®¤é€šè¿‡byNameçš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeå®ç°ï¼å¦‚æœä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œå°±æŠ¥é”™ï¼ã€å¸¸ç”¨ã€‘</li>
<li>æ‰§è¡Œé¡ºåºä¸åŒï¼š@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ã€‚</li>
</ul>
<h2 id="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>åœ¨Spring4ä¹‹åï¼Œè¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»è¦ä¿è¯aopçš„åŒ…å¯¼å…¥äº†</p>
<p><img src="https://img-blog.csdnimg.cn/20201111134932372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥çº¦æŸï¼Œé…ç½®æ³¨è§£çš„æ”¯æŒï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">	        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Beançš„å®ç°</p>
</blockquote>
<p>æˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨ bean çš„æ ‡ç­¾è¿›è¡Œbeanæ³¨å…¥ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ³¨è§£ï¼</p>
<ol>
<li>é…ç½®æ‰«æé‚£äº›åŒ…ä¸‹çš„æ³¨è§£</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‡å®šæ³¨è§£æ‰«æåŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.kuang.pojo&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨æŒ‡å®šåŒ…ä¸‹ç¼–å†™ç±»ï¼Œå¢åŠ æ³¨é‡Š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;bean id=&quot;user&quot; class=&quot;å½“å‰æ³¨è§£çš„ç±»&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;ç§¦ç–†&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span></span><br><span class="line">       <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">   <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) applicationContext.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">   System.out.println(user.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å±æ€§æ³¨å…¥</p>
</blockquote>
<p>ä½¿ç”¨æ³¨è§£æ³¨å…¥å±æ€§</p>
<ol>
<li><p>å¯ä»¥ä¸ç”¨æä¾›setæ–¹æ³•ï¼Œç›´æ¥åœ¨ç›´æ¥åä¸Šæ·»åŠ @value(â€œå€¼â€)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;bean id=&quot;user&quot; class=&quot;å½“å‰æ³¨è§£çš„ç±»&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">   <span class="meta">@Value(&quot;ç§¦ç–†&quot;)</span></span><br><span class="line">   <span class="comment">// ç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­ &lt;property name=&quot;name&quot; value=&quot;ç§¦ç–†&quot;/&gt;</span></span><br><span class="line">   <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å¦‚æœæä¾›äº†setæ–¹æ³•ï¼Œåœ¨setæ–¹æ³•ä¸Šæ·»åŠ @value(â€œå€¼â€)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Value(&quot;ç§¦ç–†&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>è¡ç”Ÿæ³¨è§£</p>
</blockquote>
<p>æˆ‘ä»¬è¿™äº›æ³¨è§£ï¼Œå°±æ˜¯æ›¿ä»£äº†åœ¨é…ç½®æ–‡ä»¶å½“ä¸­é…ç½®æ­¥éª¤è€Œå·²ï¼æ›´åŠ çš„æ–¹ä¾¿å¿«æ·ï¼</p>
<p><strong>@Componentä¸‰ä¸ªè¡ç”Ÿæ³¨è§£</strong></p>
<p>ä¸ºäº†æ›´å¥½çš„è¿›è¡Œåˆ†å±‚ï¼ŒSpringå¯ä»¥ä½¿ç”¨å…¶å®ƒä¸‰ä¸ªæ³¨è§£ï¼ŒåŠŸèƒ½ä¸€æ ·ï¼Œç›®å‰ä½¿ç”¨å“ªä¸€ä¸ªåŠŸèƒ½éƒ½ä¸€æ ·ã€‚</p>
<ul>
<li>@Controllerï¼š webå±‚</li>
<li>@Serviceï¼šserviceå±‚</li>
<li>@Repositoryï¼šdaoå±‚</li>
</ul>
<p>å†™ä¸Šè¿™äº›æ³¨é‡Šï¼Œå°±ç›¸å½“äºå°†è¿™ä¸ªç±»äº¤ç»™Springç®¡ç†è£…é…äº†ï¼</p>
<blockquote>
<p>è‡ªåŠ¨è£…é…æ³¨è§£</p>
</blockquote>
<p>åœ¨Beançš„è‡ªåŠ¨è£…é…å·²ç»è®²è¿‡äº†ï¼Œå¯ä»¥å›é¡¾ï¼</p>
<ul>
<li>@Autowiredï¼šè‡ªåŠ¨è£…é…é€šè¿‡ç±»å‹ï¼Œåå­—ã€‚å¦‚æœAutowiredä¸èƒ½å”¯ä¸€è‡ªåŠ¨è£…é…ä¸Šå±æ€§ï¼Œåˆ™éœ€è¦é€šè¿‡@Qualifier(value = â€œxxxâ€)å»é…ç½®ã€‚</li>
<li>@Nullable å­—æ®µæ ‡è®°äº†äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull;</li>
<li>@Resourceï¼šè‡ªåŠ¨è£…é…é€šè¿‡åå­—ï¼Œç±»å‹ã€‚</li>
</ul>
<p>ä½œç”¨åŸŸ</p>
<p>@scope</p>
<ul>
<li>singletonï¼šé»˜è®¤çš„ï¼ŒSpringä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ã€‚å…³é—­å·¥å‚ ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šé”€æ¯ã€‚</li>
<li>prototypeï¼šå¤šä¾‹æ¨¡å¼ã€‚å…³é—­å·¥å‚ ï¼Œæ‰€æœ‰çš„å¯¹è±¡ä¸ä¼šé”€æ¯ã€‚å†…éƒ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå›æ”¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;singleton&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸å½“äº  &lt;property name=&quot;name&quot; value=&quot;ç™½è²&quot;/&gt;</span></span><br><span class="line">    <span class="meta">@Value(&quot;ç™½è²&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å°ç»“</strong></p>
<p><strong>xmlä¸æ³¨è§£ï¼š</strong></p>
<ul>
<li>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼ç»´æŠ¤ç®€å•æ–¹ä¾¿</li>
<li>æ³¨è§£ä¸æ˜¯è‡ªå·±ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤ç›¸é˜Ÿå¤æ‚ï¼</li>
</ul>
<p><strong>xmlä¸æ³¨è§£æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>xmlç”¨æ¥ç®¡ç†beanï¼›</li>
<li>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥ï¼›</li>
<li>æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå¿…é¡»è®©æ³¨è§£ç”Ÿæ•ˆï¼Œå°±éœ€è¦å¼€å¯æ³¨è§£çš„æ”¯æŒ</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.kuang&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½œç”¨ï¼š</p>
<ul>
<li>è¿›è¡Œæ³¨è§£é©±åŠ¨æ³¨å†Œï¼Œä»è€Œä½¿æ³¨è§£ç”Ÿæ•ˆ</li>
<li>ç”¨äºæ¿€æ´»é‚£äº›å·²ç»åœ¨springå®¹å™¨é‡Œæ³¨å†Œè¿‡çš„beanä¸Šé¢çš„æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºçš„å‘Springæ³¨å†Œ</li>
<li>å¦‚æœä¸æ‰«æåŒ…ï¼Œå°±éœ€è¦æ‰‹åŠ¨é…ç½®bean</li>
<li>å¦‚æœä¸åŠ æ³¨è§£é©±åŠ¨ï¼Œåˆ™æ³¨å…¥çš„å€¼ä¸ºnullï¼</li>
</ul>
<h2 id="9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring"><a href="#9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring" class="headerlink" title="9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring"></a>9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring</h2><p>JavaConfig åŸæ¥æ˜¯ Spring çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒé€šè¿‡ Java ç±»çš„æ–¹å¼æä¾› Bean çš„å®šä¹‰ä¿¡æ¯ï¼Œåœ¨ Spring4 çš„ç‰ˆæœ¬ï¼Œ JavaConfig å·²æ­£å¼æˆä¸º Spring4 çš„æ ¸å¿ƒåŠŸèƒ½ ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20201111151604718.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œè¿™ä¸ªæ³¨è§£çš„æ„æ€ï¼Œå°±æ˜¯è¯´æ˜è¿™ä¸ªç±»è¢«Springæ¥ç®¡äº†ï¼Œæ³¨å†Œåˆ°äº†å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;é»‘å¿ƒç™½è²&quot;)</span> <span class="comment">//å±æ€§æ³¨å…¥å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªä¹Ÿä¼šSpringå®¹å™¨æ‰˜ç®¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±æ˜¯ä¸€ä¸ª@Component</span></span><br><span class="line"><span class="comment">// @Configurationä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå°±å’Œæˆ‘ä»¬ä¹‹å‰çœ‹çš„beans.xml</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.kuang.pojo&quot;)</span></span><br><span class="line"><span class="meta">@Import(KuangConfig2.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KuangConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å†Œä¸€ä¸ªbeanï¼Œå°±ç›¸å½“äºæˆ‘ä»¬ä¹‹å‰å†™çš„ä¸€ä¸ªbeanæ ‡ç­¾</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ–¹æ³•çš„åå­—ï¼Œå°±ç›¸å½“äºbeanæ ‡ç­¾ä¸­idå±æ€§</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼Œå°±ç›¸å½“äºbeanæ ‡ç­¾ä¸­çš„classå±æ€§</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(); <span class="comment">// å°±æ˜¯è¿”å›è¦æ³¨å…¥åˆ°beançš„å¯¹è±¡ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»æ–¹å¼å»åšï¼Œæˆ‘ä»¬å°±åªèƒ½é€šè¿‡ AnnotationConfig ä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨ï¼Œé€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½ï¼</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(KuangConfig.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§çº¯Javaçš„é…ç½®æ–¹å¼ï¼Œåœ¨SpringBootä¸­éšå¤„å¯è§ï¼</p>
<h2 id="10ã€ä»£ç†æ¨¡å¼"><a href="#10ã€ä»£ç†æ¨¡å¼" class="headerlink" title="10ã€ä»£ç†æ¨¡å¼"></a>10ã€ä»£ç†æ¨¡å¼</h2><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ ä»£ç†æ¨¡å¼ï¼Ÿå› ä¸ºè¿™å°±æ˜¯SpringAOPçš„åº•å±‚ï¼ã€SpringAOPå’ŒSpringMVCã€‘</p>
<p>ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼š</p>
<ul>
<li>é™æ€ä»£ç†</li>
<li>åŠ¨æ€ä»£ç†</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20201112093129742.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="10-1-é™æ€ä»£ç†"><a href="#10-1-é™æ€ä»£ç†" class="headerlink" title="10.1 é™æ€ä»£ç†"></a>10.1 é™æ€ä»£ç†</h3><p>è§’è‰²åˆ†æï¼š</p>
<ul>
<li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³</li>
<li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²</li>
<li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</li>
<li>å®¢æˆ·ï¼šè®¿é—®ä»£ç†å¯¹è±¡çš„äººï¼</li>
</ul>
<p>ä»£ç æ­¥éª¤ï¼š</p>
<ol>
<li>æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>çœŸå®è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æˆ¿ä¸œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span> <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œå‡ºç§Ÿæˆ¿å­ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ä»£ç†è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Host host;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">(Host host)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.host = host;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        host.rent();</span><br><span class="line">        seeHouse();</span><br><span class="line">        sign();</span><br><span class="line">        fee();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹å¸¦ç€çœ‹æˆ¿å­ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç­¾åˆåŒ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sign</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å’Œä¸­ä»‹ç­¾ç½²ç§ŸèµåˆåŒï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ”¶è´¹ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fee</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹æ”¶å–è´¹ç”¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line"><span class="comment">//        host.rent();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»£ç†ï¼Œä¸­ä»‹å¸®æˆ¿ä¸œå‡ºç§Ÿæˆ¿å­ï¼Œå¹¶ä¸”ä»£ç†è§’è‰²ä¸€èˆ¬ä¼šæœ‰ä¸€äº›é™„å±æ“ä½œï¼</span></span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(host);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸ç”¨é¢å¯¹æˆ¿ä¸œï¼Œç›´æ¥æ‰¾ä¸­ä»‹ç§Ÿæˆ¿å³å¯ï¼</span></span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</p>
<ul>
<li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li>
<li>å…¬å…±è§’è‰²å°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ï¼</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½~</li>
</ul>
<h3 id="10-2-åŠ æ·±ç†è§£"><a href="#10-2-åŠ æ·±ç†è§£" class="headerlink" title="10.2 åŠ æ·±ç†è§£"></a>10.2 åŠ æ·±ç†è§£</h3><p>ä»£ç æ­¥éª¤ï¼š</p>
<ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceProxy</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserServiceImpl userService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">        userService.update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">        userService.query();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Debug] ä½¿ç”¨äº†ä¸€ä¸ª&quot;</span>+msg+<span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserServiceProxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceProxy</span>();</span><br><span class="line">        proxy.setUserService(userService);</span><br><span class="line"></span><br><span class="line">        proxy.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>èŠèŠAOP</p>
<p><img src="https://img-blog.csdnimg.cn/20201112101554344.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="10-3-åŠ¨æ€ä»£ç†"><a href="#10-3-åŠ¨æ€ä»£ç†" class="headerlink" title="10.3 åŠ¨æ€ä»£ç†"></a>10.3 åŠ¨æ€ä»£ç†</h3><ul>
<li>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</li>
<li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„ï¼</li>
<li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†<ul>
<li>åŸºäºæ¥å£ â€” JDKåŠ¨æ€ä»£ç†ã€æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ã€‘</li>
<li>åŸºäºç±»ï¼šcglib</li>
<li>javaå­—èŠ‚ç å®ç°ï¼šjavassist</li>
</ul>
</li>
</ul>
<p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼šProxyï¼šä»£ç†ï¼›InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åºã€‚</p>
<p>ä»£ç æ­¥éª¤ï¼š</p>
<ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>çœŸå®è§’è‰²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span> <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ProxyInvocationHandlerç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æˆ‘ä»¬ä¼šç”¨è¿™ä¸ªç±»ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Rent rent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRent</span><span class="params">(Rent rent)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rent = rent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),</span><br><span class="line">                rent.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°ï¼</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(rent, args);</span><br><span class="line">        seeHose();</span><br><span class="line">        fee();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHose</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹å¸¦ç€çœ‹æˆ¿å­ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fee</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹æ”¶å–è´¹ç”¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²ï¼šç°åœ¨æ²¡æœ‰</span></span><br><span class="line">        <span class="type">ProxyInvocationHandler</span> <span class="variable">pih</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyInvocationHandler</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡è°ƒç”¨ç¨‹åºå¤„ç†è§’è‰²æ¥å¤„ç†æˆ‘ä»¬è¦è°ƒç”¨çš„æ¥å£å¯¹è±¡ï¼</span></span><br><span class="line">        pih.setRent(host);</span><br><span class="line">        <span class="type">Rent</span> <span class="variable">proxy</span> <span class="operator">=</span> (Rent) pih.getProxy(); <span class="comment">//è¿™é‡Œçš„proxyå°±æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å†™</span></span><br><span class="line">        proxy.rent();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>åœ¨æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æç‚¼å‡ºProxyInvocationHandlerä½œä¸ºå·¥å…·ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç”¨è¿™ä¸ªç±»è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTarget</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),</span><br><span class="line">                target.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log(method.getName());</span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Debug] ä½¿ç”¨äº†ä¸€ä¸ª&quot;</span>+msg+<span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€ä»£ç†çš„å¥½å¤„ï¼š</p>
<ul>
<li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li>
<li>å…¬å…±è§’è‰²å°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ï¼</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬å°±æ˜¯å¯¹åº”çš„ä¸€ç±»ä¸šåŠ¡</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œåªè¦æ˜¯å®ç°äº†åŒä¸€ä¸ªæ¥å£å³å¯ï¼</li>
</ul>
<h2 id="11ã€AOP"><a href="#11ã€AOP" class="headerlink" title="11ã€AOP"></a>11ã€AOP</h2><h3 id="11-1-ä»€ä¹ˆæ˜¯AOP"><a href="#11-1-ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="11.1 ä»€ä¹ˆæ˜¯AOP"></a>11.1 ä»€ä¹ˆæ˜¯AOP</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20201112130947442.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="11-2-AOPåœ¨Springä¸­çš„ä½œç”¨"><a href="#11-2-AOPåœ¨Springä¸­çš„ä½œç”¨" class="headerlink" title="11.2 AOPåœ¨Springä¸­çš„ä½œç”¨"></a>11.2 AOPåœ¨Springä¸­çš„ä½œç”¨</h3><p>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p>
<ul>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ç­‰ç­‰â€¦</li>
<li>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li>
<li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚</li>
<li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20201112131307360.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Adviceï¼š</p>
<p><img src="https://img-blog.csdnimg.cn/20201120104439637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p><img src="https://img-blog.csdnimg.cn/20201120104454887.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>å³AOPåœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</p>
<h3 id="11-3-ä½¿ç”¨Springå®ç°AOP"><a href="#11-3-ä½¿ç”¨Springå®ç°AOP" class="headerlink" title="11.3 ä½¿ç”¨Springå®ç°AOP"></a>11.3 ä½¿ç”¨Springå®ç°AOP</h3><p>ã€é‡ç‚¹ã€‘ä½¿ç”¨AOPç»‡å…¥ï¼Œéœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ–¹å¼ä¸€ï¼š</strong> ä½¿ç”¨Springçš„APIæ¥å£ã€ä¸»è¦æ˜¯SpringAPIæ¥å£å®ç°ã€‘</p>
<ol>
<li>åœ¨serviceåŒ…ä¸‹ï¼Œå®šä¹‰UserServiceä¸šåŠ¡æ¥å£å’ŒUserServiceImplå®ç°ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨logåŒ…ä¸‹ï¼Œå®šä¹‰æˆ‘ä»¬çš„å¢å¼ºç±»ï¼Œä¸€ä¸ªLogå‰ç½®å¢å¼ºå’Œä¸€ä¸ªAfterLogåç½®å¢å¼ºç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//method: è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//argsï¼šå‚æ•°</span></span><br><span class="line">    <span class="comment">//targetï¼šç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] agrs, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(target.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AfterLog</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//returnValueï¼š è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+method.getName()+<span class="string">&quot;æ–¹æ³•ï¼Œè¿”å›ç»“æœä¸ºï¼š&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æœ€åå»springçš„æ–‡ä»¶ä¸­æ³¨å†Œ , å¹¶å®ç°aopåˆ‡å…¥å®ç° , æ³¨æ„å¯¼å…¥çº¦æŸï¼Œé…ç½®applicationContext.xmlæ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.log.Log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ–¹å¼ä¸€ï¼šä½¿ç”¨åŸç”ŸSpring APIæ¥å£--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®aop:éœ€è¦å¯¼å…¥aopçš„çº¦æŸ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ‡å…¥ç‚¹ï¼šexpressionï¼šè¡¨è¾¾å¼ï¼Œexecution(è¦æ‰§è¡Œçš„ä½ç½®ï¼* * * * *)--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--æ‰§è¡Œç¯ç»•å¢åŠ ï¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;log&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£ï¼šæ³¨æ„ç‚¹</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line"></span><br><span class="line">        userService.add();</span><br><span class="line"><span class="comment">//        userService.select();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ–¹å¼äºŒï¼š</strong> è‡ªå®šä¹‰ç±»æ¥å®ç°AOPã€ä¸»è¦æ˜¯åˆ‡é¢å®šä¹‰ã€‘</p>
<ol>
<li>åœ¨diyåŒ…ä¸‹å®šä¹‰è‡ªå·±çš„DiyPointCutåˆ‡å…¥ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiyPointCut</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå‰======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å»springä¸­é…ç½®æ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–¹å¼äºŒï¼šè‡ªå®šä¹‰ç±»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.diy.DiyPointCut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è‡ªå®šä¹‰åˆ‡é¢ï¼Œref è¦å¼•ç”¨çš„ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é€šçŸ¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<p><strong>æ–¹å¼ä¸‰ï¼š</strong> ä½¿ç”¨æ³¨è§£å®ç°ï¼</p>
<ol>
<li>åœ¨diyåŒ…ä¸‹å®šä¹‰æ³¨è§£å®ç°çš„AnnotationPointCutå¢å¼ºç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜å¼äº‹åŠ¡ï¼</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationPointCut</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;====æ–¹æ³•æ‰§è¡Œå‰====&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;====æ–¹æ³•æ‰§è¡Œå====&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦è·å–å¤„ç†åˆ‡å…¥çš„ç‚¹ï¼›</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å‰&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> jp.getSignature();<span class="comment">// è·å¾—ç­¾å</span></span><br><span class="line">        System.out.println(<span class="string">&quot;signature:&quot;</span>+signature);</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> jp.proceed(); <span class="comment">//æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(proceed);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œbeanï¼Œå¹¶å¢åŠ æ”¯æŒæ³¨è§£çš„é…ç½®ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ³¨è§£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPointCut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.diy.AnnotationPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼€å¯æ³¨è§£æ”¯æŒï¼ JDK(é»˜è®¤æ˜¯ proxy-target-class=&quot;false&quot;)  cglibï¼ˆproxy-target-class=&quot;true&quot;ï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<h2 id="12ã€æ•´åˆMybatis"><a href="#12ã€æ•´åˆMybatis" class="headerlink" title="12ã€æ•´åˆMybatis"></a>12ã€æ•´åˆMybatis</h2><p>æ­¥éª¤ï¼š</p>
<ol>
<li>å¯¼å…¥ç›¸å…³jaråŒ…<ul>
<li>junit</li>
<li>mybatis</li>
<li>mysqlæ•°æ®åº“</li>
<li>springç›¸å…³</li>
<li>aopç»‡å…¥å™¨</li>
<li>mybatis-springæ•´åˆåŒ…ã€é‡ç‚¹ã€‘åœ¨æ­¤è¿˜å¯¼å…¥äº†lombokåŒ…ã€‚</li>
<li>é…ç½®Mavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜ï¼</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Springæ“ä½œæ•°æ®åº“çš„è¯ï¼Œè¿˜éœ€è¦ä¸€ä¸ªspring-jdbc</span></span><br><span class="line"><span class="comment">           --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
<li>æµ‹è¯•</li>
</ol>
<h3 id="12-1-å›å¿†mybatis"><a href="#12-1-å›å¿†mybatis" class="headerlink" title="12.1 å›å¿†mybatis"></a>12.1 å›å¿†mybatis</h3><ol>
<li><p>ç¼–å†™pojoå®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™å®ç°mybatisçš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.kuang.pojo&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.kuang.dao&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™UserMapperæ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™UserMapper.xmlæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectUser</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">   <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">   <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">   <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">   <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   List&lt;User&gt; userList = mapper.selectUser();</span><br><span class="line">   <span class="keyword">for</span> (User user: userList)&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="12-2-Mybatis-Spring"><a href="#12-2-Mybatis-Spring" class="headerlink" title="12.2 Mybatis-Spring"></a>12.2 Mybatis-Spring</h3><p>ä»€ä¹ˆæ˜¯MyBatis-Springï¼Ÿ</p>
<p>MyBatis-Spring ä¼šå¸®åŠ©ä½ å°† MyBatis ä»£ç æ— ç¼åœ°æ•´åˆåˆ° Spring ä¸­ã€‚</p>
<p>æ–‡æ¡£é“¾æ¥ï¼š<a href="http://mybatis.org/spring/zh/index.html">http://mybatis.org/spring/zh/index.html</a></p>
<p>å¦‚æœä½¿ç”¨ Maven ä½œä¸ºæ„å»ºå·¥å…·ï¼Œä»…éœ€è¦åœ¨ pom.xml ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ•´åˆå®ç°ä¸€ï¼š</strong></p>
<ol>
<li>å¼•å…¥Springé…ç½®æ–‡ä»¶spring-dao.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag"></span></span></span><br><span class="line"><span class="string"><span class="tag">&lt;/beans&gt;</span></span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®æ•°æ®æºæ›¿æ¢mybaitsçš„æ•°æ®æº</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--DataSource:ä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢Mybatisçš„é…ç½® c3p0 dbcp druid</span></span><br><span class="line"><span class="comment">æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Springæä¾›çš„JDBCï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®SqlSessionFactoryï¼Œå…³è”MyBatis</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--sqlSessionFactory--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å…³è”mybatisé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/kuang/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æ³¨å†ŒsqlSessionTemplateï¼Œå…³è”sqlSessionFactory</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--SqlSessionTemplate:å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„sqlSession--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>éœ€è¦UserMapperæ¥å£çš„UserMapperImpl å®ç°ç±»ï¼Œç§æœ‰åŒ–sqlSessionTemplate</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆ‘ä»¬çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼Œåœ¨åŸæ¥ï¼Œç°åœ¨éƒ½ä½¿ç”¨SqlsessionTemplate</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlSession</span><span class="params">(SqlSessionTemplate sqlSession)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSession = sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å°†è‡ªå·±å†™çš„å®ç°ç±»ï¼Œæ³¨å…¥åˆ°Springé…ç½®æ–‡ä»¶ä¸­ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•ä½¿ç”¨å³å¯ï¼</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span> <span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-dao.xml&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line">    <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœæˆåŠŸè¾“å‡ºï¼ç°åœ¨æˆ‘ä»¬çš„Mybatisé…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼å‘ç°éƒ½å¯ä»¥è¢«Springæ•´åˆï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">ç»“æœæˆåŠŸè¾“å‡ºï¼ç°åœ¨æˆ‘ä»¬çš„Mybatisé…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼å‘ç°éƒ½å¯ä»¥è¢«Springæ•´åˆï¼</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configuration core file--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.kuang.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ•´åˆå®ç°äºŒï¼š</strong></p>
<p>mybatis-spring1.2.3ç‰ˆä»¥ä¸Šçš„æ‰æœ‰è¿™ä¸ªï¼Œå®˜æ–¹æ–‡æ¡£æˆªå›¾ï¼š</p>
<p>daoç»§æ‰¿Supportç±» , ç›´æ¥åˆ©ç”¨ getSqlSession() è·å¾— , ç„¶åç›´æ¥æ³¨å…¥SqlSessionFactory . æ¯”èµ·æ•´åˆæ–¹å¼ä¸€ , ä¸éœ€è¦ç®¡ç†SqlSessionTemplate , è€Œä¸”å¯¹äº‹åŠ¡çš„æ”¯æŒæ›´åŠ å‹å¥½ . å¯è·Ÿè¸ªæºç æŸ¥çœ‹ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20201122213331963.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpNjQzOTM3NTc5,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æµ‹è¯•ï¼š</p>
<ol>
<li>å°†æˆ‘ä»¬ä¸Šé¢å†™çš„UserMapperImplä¿®æ”¹ä¸€ä¸‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æ³¨å…¥åˆ°Springé…ç½®æ–‡ä»¶ä¸­ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span> <span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-dao.xml&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line">    <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13ã€å£°æ˜å¼äº‹åŠ¡"><a href="#13ã€å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="13ã€å£°æ˜å¼äº‹åŠ¡"></a>13ã€å£°æ˜å¼äº‹åŠ¡</h2><h3 id="13-1-å›é¡¾äº‹åŠ¡"><a href="#13-1-å›é¡¾äº‹åŠ¡" class="headerlink" title="13.1 å›é¡¾äº‹åŠ¡"></a>13.1 å›é¡¾äº‹åŠ¡</h3><ul>
<li>æŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼›è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼</li>
<li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œååˆ†çš„é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸èƒ½é©¬è™ï¼</li>
<li>ç¡®ä¿å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</li>
</ul>
<p><strong>äº‹åŠ¡ACIDåŸåˆ™ï¼š</strong></p>
<ul>
<li>åŸå­æ€§ï¼ˆatomicityï¼‰<ul>
<li>äº‹åŠ¡æ˜¯åŸå­æ€§æ“ä½œï¼Œç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆï¼Œäº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ã€‚</li>
</ul>
</li>
<li>ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰<ul>
<li>ä¸€æ—¦æ‰€æœ‰äº‹åŠ¡åŠ¨ä½œå®Œæˆï¼Œäº‹åŠ¡å°±è¦è¢«æäº¤ã€‚æ•°æ®å’Œèµ„æºå¤„äºä¸€ç§æ»¡è¶³ä¸šåŠ¡è§„åˆ™çš„ä¸€è‡´æ€§çŠ¶æ€ä¸­ã€‚</li>
</ul>
</li>
<li>éš”ç¦»æ€§ï¼ˆisolationï¼‰<ul>
<li>å¯èƒ½å¤šä¸ªäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸåã€‚</li>
</ul>
</li>
<li>æŒä¹…æ€§ï¼ˆdurabilityï¼‰<ul>
<li>äº‹åŠ¡ä¸€æ—¦å®Œæˆï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé”™è¯¯ï¼Œç»“æœéƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<p>å°†ä¸Šé¢çš„ä»£ç æ‹·è´åˆ°ä¸€ä¸ªæ–°é¡¹ç›®ä¸­<br>åœ¨ä¹‹å‰çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»™userMapperæ¥å£æ–°å¢ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ é™¤å’Œå¢åŠ ç”¨æˆ·ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p>UserMapperæ–‡ä»¶ï¼Œæˆ‘ä»¬æ•…æ„æŠŠ deletes å†™é”™ï¼Œæµ‹è¯•ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">insert into user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">deletes from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¼–å†™æ¥å£çš„UserMapperImplå®ç°ç±»ï¼Œåœ¨å®ç°ç±»ä¸­ï¼Œæˆ‘ä»¬å»æ“ä½œä¸€æ³¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ä¸€äº›æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">5</span>, <span class="string">&quot;å°ç‹&quot;</span>, <span class="string">&quot;185161&quot;</span>);</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> getSqlSession().getMapper(UserMapper.class);</span><br><span class="line">        mapper.addUser(user);</span><br><span class="line">        mapper.deleteUser(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ–°å¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).deleteUser(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™ï¼šsqlå¼‚å¸¸ï¼Œdeleteå†™é”™äº†</p>
<p>ç»“æœ ï¼šæ•°æ®åº“ç»“æœæ˜¾ç¤ºæ’å…¥æˆåŠŸï¼</p>
<p>æ²¡æœ‰è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼›æˆ‘ä»¬æƒ³è®©ä»–ä»¬éƒ½æˆåŠŸæ‰æˆåŠŸï¼Œæœ‰ä¸€ä¸ªå¤±è´¥ï¼Œå°±éƒ½å¤±è´¥ï¼Œæˆ‘ä»¬å°±åº”è¯¥éœ€è¦äº‹åŠ¡ï¼</p>
<p>ä»¥å‰æˆ‘ä»¬éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡ï¼Œååˆ†éº»çƒ¦ï¼</p>
<p>ä½†æ˜¯Springç»™æˆ‘ä»¬æä¾›äº†äº‹åŠ¡ç®¡ç†ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®å³å¯ï¼›</p>
<h3 id="13-2-Springä¸­çš„äº‹åŠ¡ç®¡ç†"><a href="#13-2-Springä¸­çš„äº‹åŠ¡ç®¡ç†" class="headerlink" title="13.2 Springä¸­çš„äº‹åŠ¡ç®¡ç†"></a>13.2 Springä¸­çš„äº‹åŠ¡ç®¡ç†</h3><p>Springåœ¨ä¸åŒçš„äº‹åŠ¡ç®¡ç†APIä¹‹ä¸Šå®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œä½¿å¾—å¼€å‘äººå‘˜ä¸å¿…äº†è§£åº•å±‚çš„äº‹åŠ¡ç®¡ç†APIå°±å¯ä»¥ä½¿ç”¨Springçš„äº‹åŠ¡ç®¡ç†æœºåˆ¶ã€‚Springæ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼çš„äº‹åŠ¡ç®¡ç†ã€‚</p>
<p><strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</strong></p>
<ul>
<li>å°†äº‹åŠ¡ç®¡ç†ä»£ç åµŒåˆ°ä¸šåŠ¡æ–¹æ³•ä¸­æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»š</li>
<li>ç¼ºç‚¹ï¼šå¿…é¡»åœ¨æ¯ä¸ªäº‹åŠ¡æ“ä½œä¸šåŠ¡é€»è¾‘ä¸­åŒ…å«é¢å¤–çš„äº‹åŠ¡ç®¡ç†ä»£ç </li>
</ul>
<p><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong></p>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹æ¯”ç¼–ç¨‹å¼äº‹åŠ¡å¥½ç”¨ã€‚</li>
<li>å°†äº‹åŠ¡ç®¡ç†ä»£ç ä»ä¸šåŠ¡æ–¹æ³•ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥å£°æ˜çš„æ–¹å¼æ¥å®ç°äº‹åŠ¡ç®¡ç†ã€‚</li>
<li>å°†äº‹åŠ¡ç®¡ç†ä½œä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œé€šè¿‡aopæ–¹æ³•æ¨¡å—åŒ–ã€‚Springä¸­é€šè¿‡Spring AOPæ¡†æ¶æ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</li>
</ul>
<p><strong>1. ä½¿ç”¨Springç®¡ç†äº‹åŠ¡ï¼Œæ³¨æ„å¤´æ–‡ä»¶çš„çº¦æŸå¯¼å…¥ : tx</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/tx</span><br><span class="line">http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2. JDBCäº‹åŠ¡</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3. é…ç½®å¥½äº‹åŠ¡ç®¡ç†å™¨åæˆ‘ä»¬éœ€è¦å»é…ç½®äº‹åŠ¡çš„é€šçŸ¥</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç»™é‚£äº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ï¼š new --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>springäº‹åŠ¡ä¼ æ’­ç‰¹æ€§ï¼š</strong><br>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå°±æ˜¯å¤šä¸ªäº‹åŠ¡æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼Œäº‹åŠ¡å¦‚ä½•åœ¨è¿™äº›æ–¹æ³•é—´ä¼ æ’­ã€‚springæ”¯æŒ7ç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</p>
<ul>
<li>propagation_requierdï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚</li>
<li>propagation_supportsï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œã€‚</li>
<li>propagation_mandatoryï¼šä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>propagation_required_newï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li>propagation_not_supportedï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·</li>
<li>propagation_neverï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>propagation_nestedï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸propagation_requiredç±»ä¼¼çš„æ“ä½œã€‚</li>
</ul>
<p>Spring é»˜è®¤çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæ˜¯ PROPAGATION_REQUIREDï¼Œå®ƒé€‚åˆäºç»å¤§å¤šæ•°çš„æƒ…å†µã€‚</p>
<p>å°±å¥½æ¯”ï¼Œæˆ‘ä»¬åˆšæ‰çš„å‡ ä¸ªæ–¹æ³•å­˜åœ¨è°ƒç”¨ï¼Œæ‰€ä»¥ä¼šè¢«æ”¾åœ¨ä¸€ç»„äº‹åŠ¡å½“ä¸­ï¼</p>
<p><strong>4. é…ç½®AOPï¼Œå¯¼å…¥aopçš„å¤´æ–‡ä»¶</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.kuang.mapper.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>5. åˆ æ‰åˆšæ‰æ’å…¥çš„æ•°æ®ï¼Œå†æ¬¡æµ‹è¯•ï¼</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ€è€ƒï¼š</strong></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ</p>
<ul>
<li>å¦‚æœä¸é…ç½®äº‹åŠ¡ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´çš„æƒ…å†µï¼›</li>
<li>å¦‚æœæˆ‘ä»¬ä¸åœ¨Springä¸­å»é…ç½®å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡ï¼</li>
<li>äº‹åŠ¡åœ¨é¡¹ç›®çš„å¼€å‘ä¸­ååˆ†é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§é—®é¢˜ï¼Œä¸å®¹é©¬è™ï¼</li>
</ul>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAç½‘ç»œç¼–ç¨‹</title>
    <url>/2021/05/22/JAVA%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="1-ç½‘ç»œæ¦‚è¿°"><a href="#1-ç½‘ç»œæ¦‚è¿°" class="headerlink" title="1. ç½‘ç»œæ¦‚è¿°"></a>1. ç½‘ç»œæ¦‚è¿°</h1><ul>
<li><p>ä»€ä¹ˆæ˜¯ç½‘ç»œï¼Ÿ</p>
<p><strong>ç”±ç‚¹å’Œçº¿æ„æˆ</strong>ï¼Œ<strong>è¡¨ç¤ºè¯¸å¤šå¯¹è±¡é—´çš„äº’ç›¸è”ç³»</strong>ã€‚åœ¨ç”Ÿæ´»å½“ä¸­ï¼Œäººé™…å…³ç³»æ˜¯ä¸€ç§ç½‘ç»œï¼Œè¶³çƒç½‘æ˜¯ä¸€ç§ç½‘ç»œï¼Œèœ˜è››ç½‘ä¹Ÿæ˜¯ä¸€ç§ç½‘ç»œã€‚</p>
</li>
</ul>
<h2 id="1-1-è®¡ç®—æœºç½‘ç»œ"><a href="#1-1-è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="1.1 è®¡ç®—æœºç½‘ç»œ"></a>1.1 è®¡ç®—æœºç½‘ç»œ</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯è®¡ç®—æœºç½‘ç»œï¼Ÿ</p>
<p>ä¸ºå®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’ï¼Œé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥èµ·æ¥çš„è‹¥å¹²ä¸»æœºï¼ˆHostï¼‰ã€‚æ¯”å¦‚å¤šä¸ªç‹¬ç«‹çš„ä¸»æœº/ç”µè„‘é€šè¿‡åŒç»çº¿æˆ–è€…å…‰çº¤è¿æ¥èµ·æ¥å°±å½¢æˆäº†è®¡ç®—æœºç½‘ç»œã€‚</p>
</li>
</ul>
<ul>
<li><p>æŒ‰ç…§åœ°ç†èŒƒå›´ç½‘ç»œåˆ†ä¸ºï¼š</p>
<ul>
<li><p>å±€åŸŸç½‘ã€‚</p>
<p>èŒƒå›´æ¯”è¾ƒå°ï¼Œå¯èƒ½æ˜¯ä¸€é—´æ•™å®¤ï¼Œä¸€æ ‹å¤§æ¥¼æˆ–è€…ä¸€ä¸ªæ ¡åŒºã€‚</p>
</li>
<li><p>åœ°åŸŸç½‘ã€‚</p>
<p>å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªåŸå¸‚å½¢æˆçš„ç½‘ç»œã€‚</p>
</li>
<li><p>å¹¿åŸŸç½‘ã€‚</p>
<p>æœ€å¤§çš„ç½‘ç»œï¼Œåˆå¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>äº’è”ç½‘ï¼šï¼ˆInternetï¼‰ç‚¹ä¸ç‚¹ç›¸è¿ã€‚</li>
<li>ä¸‡ç»´ç½‘ï¼šï¼ˆWWW - World Wide Webï¼‰ç«¯ä¸ç«¯ç›¸è¿ã€‚</li>
<li>ç‰©è”ç½‘ï¼šï¼ˆIoT - Internet of thingsï¼‰ç‰©ä¸ç‰©ç›¸è¿ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ç½‘ç»œç¼–ç¨‹ï¼š</p>
<p>è®©è®¡ç®—æœºä¸è®¡ç®—æœºä¹‹é—´<strong>å»ºç«‹è¿æ¥</strong>ã€<strong>è¿›è¡Œé€šä¿¡</strong>ã€‚</p>
</li>
</ul>
<h1 id="2-ç½‘ç»œæ¨¡å‹"><a href="#2-ç½‘ç»œæ¨¡å‹" class="headerlink" title="2. ç½‘ç»œæ¨¡å‹"></a>2. ç½‘ç»œæ¨¡å‹</h1><h2 id="2-1-OSIå‚è€ƒæ¨¡å‹"><a href="#2-1-OSIå‚è€ƒæ¨¡å‹" class="headerlink" title="2.1 OSIå‚è€ƒæ¨¡å‹"></a>2.1 OSIå‚è€ƒæ¨¡å‹</h2><ul>
<li>OSIï¼ˆOpen System Interconnectionï¼‰å¼€æ”¾å¼ç³»ç»Ÿäº’è”ã€‚</li>
</ul>
<p><img src="https://pic.downk.cc/item/5fa928291cd1bbb86b822e85.png" alt="img"></p>
<p>è¿™ä¸ªæ¨¡å‹æŠŠæ•´ä¸ªç½‘ç»œçš„å»ºè®¾åˆ†æˆäº†ä¸ƒå±‚ï¼Œä¸‹å±‚ä¸ºä¸Šå±‚æœåŠ¡ï¼š</p>
<ul>
<li>ç¬¬ä¸ƒå±‚ï¼š<strong>åº”ç”¨å±‚</strong>è´Ÿè´£æ–‡ä»¶è®¿é—®å’Œç®¡ç†ã€å¯é è¿è¾“æœåŠ¡ã€è¿œç¨‹æ“ä½œæœåŠ¡ã€‚ï¼ˆHTTPã€FTPã€SMTPï¼‰</li>
<li>ç¬¬å…­å±‚ï¼š<strong>è¡¨ç¤ºå±‚</strong>è´Ÿè´£å®šä¹‰è½¬æ¢æ•°æ®æ ¼å¼åŠåŠ å¯†ï¼Œå…è®¸é€‰æ‹©ä»¥äºŒè¿›åˆ¶æˆ–ASCIIæ ¼å¼ä¼ è¾“ã€‚</li>
<li>ç¬¬äº”å±‚ï¼š<strong>ä¼šè¯å±‚</strong>è´Ÿè´£ä½¿åº”ç”¨å»ºç«‹å’Œç»´æŒä¼šè¯ï¼Œä½¿é€šä¿¡åœ¨å¤±æ•ˆæ—¶ç»§ç»­æ¢å¤é€šä¿¡ã€‚ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰</li>
<li>ç¬¬å››å±‚ï¼š<strong>ä¼ è¾“å±‚</strong>è´Ÿè´£æ˜¯å¦é€‰æ‹©å·®é”™æ¢å¤åè®®ã€æ•°æ®æµé‡ç”¨ã€é”™è¯¯é¡ºåºé‡æ’ã€‚ï¼ˆTCPã€UDPï¼‰</li>
<li>ç¬¬ä¸‰å±‚ï¼š<strong>ç½‘ç»œå±‚</strong>è´Ÿè´£å®šä¹‰äº†èƒ½å¤Ÿæ ‡è¯†æ‰€æœ‰ç½‘ç»œç»“ç‚¹çš„é€»è¾‘åœ°å€ã€‚ï¼ˆIPåœ°å€ï¼‰</li>
<li>ç¬¬äºŒå±‚ï¼š<strong>é“¾è·¯å±‚</strong>åœ¨ç‰©ç†å±‚ä¸Šï¼Œé€šè¿‡è§„ç¨‹æˆ–è€…åè®®ï¼ˆå·®é”™æ§åˆ¶ï¼‰æ¥æ§åˆ¶ä¼ è¾“æ•°æ®çš„æ­£ç¡®æ€§ã€‚ï¼ˆMACï¼‰</li>
<li>ç¬¬ä¸€å±‚ï¼š<strong>ç‰©ç†å±‚</strong>ä¸ºè®¾å¤‡ä¹‹é—´çš„æ•°æ®é€šä¿¡æä¾›ä¿¡å·å’Œç‰©ç†ä»‹è´¨ã€‚ï¼ˆåŒç»çº¿ã€å…‰å¯¼çº¤ç»´ï¼‰</li>
</ul>
<p>ä¸¾ä¸ªå®é™…ä¾‹å­ï¼Œå‡è®¾æˆ‘åœ¨QQä¸Šç»™æˆ‘çš„å­¦å¦¹å‘äº†æ¡â€œæˆ‘å–œæ¬¢ä½ â€ï¼Œè¿™æ¡ä¿¡æ¯ä¼šä»åº”ç”¨å±‚å‘ä¸‹åˆ°ç‰©ç†å±‚è¿›è¡Œä¼ é€’ï¼Œæ¯ä¸‹ä¸€å±‚éƒ½ä¼šåŒ…è£¹æŸç§åè®®ï¼Œæœ€ååœ¨ç‰©ç†å±‚è½¬æ¢ä¸ºæ•°å­—ä¿¡å·æˆ–è€…å…‰ä¿¡å·ç­‰é€šè¿‡ç½‘å¡æˆ–è€…è·¯ç”±å™¨ç­‰ä¼ é€’åˆ°å­¦å¦¹ç«¯çš„ç‰©ç†å±‚ï¼Œè¿™ç§ä¿¡å·åˆä»ç‰©ç†å±‚å¾€ä¸Šåˆ°åº”ç”¨å±‚ï¼Œå­¦å¦¹å°±èƒ½çœ‹è§æˆ‘å‘äº†æ¡ä¿¡æ¯ï¼Œå­¦å¦¹ä¹Ÿèƒ½ä»¥è¿™æ ·çš„æ–¹å¼ç»™æˆ‘å›å¤æ¶ˆæ¯ï¼Œæœ‰å¯èƒ½æ˜¯â€œä½ æ˜¯ä¸ªå¥½äººâ€ç­‰å…¶ä»–ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒå‘çš„ä¼ é€’ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°å„å±‚çš„åè®®ï¼Œåè®®å®é™…å°±æ˜¯çº¦å®šæ•°æ®ä¼ è¾“çš„æ ¼å¼ï¼Œæˆ‘å‘é€äº†ä¸­æ–‡ï¼Œåˆ«äººä¹Ÿä¸€å®šçœ‹åˆ°çš„æ˜¯åŒæ ·çš„å†…å®¹ã€‚</p>
<h2 id="2-2-TCP-IPæ¨¡å‹"><a href="#2-2-TCP-IPæ¨¡å‹" class="headerlink" title="2.2 TCP/IPæ¨¡å‹"></a>2.2 TCP/IPæ¨¡å‹</h2><ul>
<li>ä¸€ç»„ç”¨äºå®ç°ç½‘ç»œäº’è¿çš„é€šä¿¡åè®®ï¼Œå°†åè®®åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ã€‚</li>
</ul>
<p><img src="https://pic.downk.cc/item/5fa930371cd1bbb86b83cbf7.png" alt="img"></p>
<p>ç”±äºOSIå‚è€ƒæ¨¡å‹é‡‡ç”¨çš„æ˜¯ä¸ƒå±‚çš„å»ºè®¾æ¨¡å‹ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥åœ¨ç½‘ç»œå»ºè®¾ä¸­ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯TCP/IPæ¨¡å‹ã€‚å®é™…ä¸ŠTCP/IPæ¨¡å‹çš„å››å±‚ä¹Ÿå¯¹åº”è¿™OSIæ¨¡å‹çš„ä¸ƒå±‚ï¼Œå®ƒå°†OSIçš„äº”åˆ°ä¸ƒå±‚åˆæˆäº†åº”ç”¨å±‚ï¼ŒæŠŠä¸€äºŒå±‚åˆæˆäº†ç½‘ç»œæ¥å£å±‚ã€‚</p>
<ul>
<li>ç¬¬å››å±‚ï¼š<strong>åº”ç”¨å±‚</strong>è´Ÿè´£ä¼ é€å„ç§<strong>æœ€ç»ˆå½¢æ€çš„æ•°æ®</strong>ï¼Œæ˜¯ç›´æ¥ä¸ç”¨æˆ·æ‰“äº¤é“çš„å±‚ï¼Œå…¸å‹åè®®æ˜¯HTTPã€FTPç­‰ã€‚</li>
<li>ç¬¬ä¸‰å±‚ï¼š<strong>ä¼ è¾“å±‚</strong>è´Ÿè´£ä¼ é€<strong>æ–‡æœ¬æ•°æ®</strong>ï¼Œä¸»è¦åè®®æ˜¯TCPã€UDPåè®®ã€‚</li>
<li>ç¬¬äºŒå±‚ï¼š<strong>ç½‘ç»œå±‚</strong>è´Ÿè´£åˆ†é…åœ°å€å’Œä¼ é€<strong>äºŒè¿›åˆ¶æ•°æ®</strong>ï¼Œä¸»è¦åè®®æ˜¯IPåè®®ã€‚</li>
<li>ç¬¬ä¸€å±‚ï¼š<strong>æ¥å£å±‚</strong>è´Ÿè´£<strong>ç”µè·¯è¿æ¥</strong>ï¼Œæ˜¯æ•´ä¸ªç½‘ç»œçš„ç‰©ç†åŸºç¡€ï¼Œå…¸å‹çš„åè®®åŒ…æ‹¬ä»¥å¤ªç½‘ã€ADSLç­‰ç­‰ã€‚</li>
</ul>
<h1 id="3-é€šä¿¡åè®®"><a href="#3-é€šä¿¡åè®®" class="headerlink" title="3. é€šä¿¡åè®®"></a>3. é€šä¿¡åè®®</h1><h2 id="3-1-TCPåè®®"><a href="#3-1-TCPåè®®" class="headerlink" title="3.1 TCPåè®®"></a>3.1 TCPåè®®</h2><ul>
<li>TCPåè®®ï¼šTransmission Control Protocol ä¼ è¾“æ§åˆ¶åè®®</li>
<li>æ˜¯ä¸€ç§<strong>é¢å‘è¿æ¥çš„</strong>ã€<strong>å¯é çš„</strong>ã€<strong>é¢å‘å­—èŠ‚æµ</strong>çš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚<strong>æ•°æ®å¤§å°æ— é™åˆ¶</strong>ã€‚å»ºç«‹è¿æ¥çš„è¿‡ç¨‹éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ–­å¼€è¿æ¥çš„è¿‡ç¨‹éœ€è¦å››æ¬¡æŒ¥æ‰‹ã€‚</li>
<li>é¢å‘è¿æ¥çš„æ„æ€å°±æ˜¯ä¸¤å°è®¡ç®—æœºï¼ˆåº”ç”¨ç¨‹åºï¼‰åœ¨é€šä¿¡ä¹‹å‰ï¼Œå¿…é¡»å…ˆå»ºç«‹è¿æ¥ã€‚</li>
<li>TCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œæˆ–è€…è¯´ä¸‰æŠ¥æ–‡æ¡æ‰‹ï¼Œæ˜¯TCPå»ºç«‹è¿æ¥è¿‡ç¨‹çš„æœºåˆ¶ã€‚ä¸»åŠ¨å‘èµ·TCPè¿æ¥çš„åº”ç”¨è¿›ç¨‹å«åšå®¢æˆ·ï¼Œè€Œè¢«åŠ¨ç­‰å¾…è¿æ¥å»ºç«‹çš„åº”ç”¨ç¨‹åºå«åšæœåŠ¡å™¨ã€‚å®¢æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚åï¼ŒæœåŠ¡å™¨è¦ç¡®è®¤å®¢æˆ·çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå®¢æˆ·è¦å¯¹æœåŠ¡å™¨çš„ç¡®è®¤è¿›è¡Œç¡®è®¤ã€‚</li>
<li>TCPçš„å››æ¬¡æŒ¥æ‰‹ï¼Œæˆ–è€…è¯´å››æŠ¥æ–‡æ¡æ‰‹ï¼Œæ˜¯TCPé‡Šæ”¾è¿æ¥è¿‡ç¨‹çš„æœºåˆ¶ã€‚ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹æ–¹ç¡®è®¤åå°±è¿›å…¥äº†åŠå…³é—­çŠ¶æ€ã€‚å½“å¦ä¸€æ–¹ä¹Ÿæ²¡æœ‰æ•°æ®å†å‘é€æ—¶ï¼Œåˆ™å‘é€è¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åå°±å®Œå…¨å…³é—­äº†TCPè¿æ¥ã€‚</li>
<li>â€œé¢å‘å­—èŠ‚æµâ€çš„å«ä¹‰æ˜¯ï¼šè™½ç„¶åº”ç”¨ç¨‹åºå’ŒTCPçš„äº¤äº’è¯•ä¸€æ¬¡ä¸€ä¸ªæ•°æ®å—ï¼ˆå¤§å°ä¸ç­‰ï¼‰ï¼Œä½†TCPæŠŠåº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æ•°æ®ä»…ä»…çœ‹æˆæ˜¯ä¸€è¿ä¸²çš„<strong>æ— ç»“æ„çš„å­—èŠ‚æµ</strong>ã€‚TCPå¹¶ä¸çŸ¥é“æ‰€ä¼ é€çš„å­—èŠ‚æµçš„å«ä¹‰ã€‚TCPä¸ä¿è¯æ¥æ”¶æ–¹åº”ç”¨ç¨‹åºæ‰€æ”¶åˆ°çš„æ•°æ®å—å’Œå‘é€æ–¹åº”ç”¨ç¨‹åºæ‰€å‘å‡ºçš„æ•°æ®å—å…·æœ‰å¯¹åº”å¤§å°çš„å…³ç³»ï¼ˆä¾‹å¦‚ï¼Œå‘é€æ–¹åº”ç”¨ç¨‹åºäº¤ç»™å‘é€æ–¹çš„TCPå…±10ä¸ªæ•°æ®å—ï¼Œä½†æ¥æ”¶æ–¹çš„TCPå¯èƒ½åªç”¨äº†4ä¸ªæ•°æ®å—å°±æŠŠæ”¶åˆ°çš„å­—èŠ‚æµäº¤ä»˜ç»™ä¸Šå±‚çš„åº”ç”¨ç¨‹åºï¼‰ã€‚ä½†æ¥æ”¶æ–¹çš„åº”ç”¨ç¨‹åºæ”¶åˆ°çš„å­—èŠ‚æµå¿…é¡»å’Œå‘é€æ–¹åº”ç”¨ç¨‹åºå‘å‡ºçš„å­—èŠ‚æµå®Œå…¨ä¸€æ ·ã€‚</li>
</ul>
<h2 id="3-2-UDPåè®®"><a href="#3-2-UDPåè®®" class="headerlink" title="3.2 UDPåè®®"></a>3.2 UDPåè®®</h2><ul>
<li>UDPåè®®ï¼šUser Datagram Protocolç”¨æˆ·æ•°æ®æŠ¥åè®®</li>
<li>æ˜¯ä¸€ç§<strong>æ— è¿æ¥</strong>çš„ä¼ è¾“å±‚åè®®ï¼Œæä¾›<strong>é¢å‘æŠ¥æ–‡</strong>çš„ç®€å•<strong>ä¸å¯é </strong>ä¿¡æ¯ä¼ é€æœåŠ¡ï¼Œæ¯ä¸ªåŒ…çš„å¤§å°æ˜¯64KBã€‚</li>
<li>æ— è¿æ¥æ˜¯æŒ‡UDPåœ¨ä¼ é€æ•°æ®ä¹‹å‰<strong>ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥</strong>ã€‚è¿œåœ°ä¸»æœºçš„è¿è¾“å±‚åœ¨æ”¶åˆ°UDPæŠ¥æ–‡åï¼Œä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ã€‚è™½ç„¶UDPä¸æä¾›å¯é äº¤ä»˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹UDPå´æ˜¯ä¸€ç§æœ€æœ‰æ•ˆçš„å·¥ä½œæ–¹å¼ã€‚</li>
<li>â€œé¢å‘æŠ¥æ–‡â€ç®€å•è¯´å°±æ˜¯åº”ç”¨å±‚äº¤ç»™UDPå¤šé•¿çš„æŠ¥æ–‡ï¼ŒUDPå°±ç…§æ ·å‘é€ï¼Œå³ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUDPä¸€æ¬¡äº¤ä»˜ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ã€‚</li>
</ul>
<h2 id="3-3-IPåè®®"><a href="#3-3-IPåè®®" class="headerlink" title="3.3 IPåè®®"></a>3.3 IPåè®®</h2><p>IPåè®®ï¼šInternet Protocol äº’è”ç½‘åè®®/ç½‘é™…åè®®</p>
<ul>
<li>è´Ÿè´£æ•°æ®ä»ä¸€å°æœºå™¨å‘é€åˆ°å¦ä¸€å°æœºå™¨ã€‚</li>
<li>ç»™äº’è”ç½‘æ¯å°è®¾å¤‡åˆ†é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼ˆIPåœ°å€ï¼‰ã€‚</li>
</ul>
<p>IPåœ°å€åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li><p>IPV4ï¼š4å­—èŠ‚32ä½æ•´æ•°ï¼Œå¹¶åˆ†æˆ4æ®µ8ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œæ¯8ä½ä¹‹é—´ç”¨åœ†ç‚¹éš”å¼€ï¼Œæ¯8ä½æ•´æ•°å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ª0~255çš„åè¿›åˆ¶æ•´æ•°ã€‚</p>
<p>æ ¼å¼ï¼šD.D.D.D ä¾‹å¦‚ï¼š255.255.255.255</p>
<p>IPV4æ˜¯ä¸Šä¸ªä¸–çºª70å¹´ä»£å‡ºç°çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåˆ°ç°åœ¨å·®ä¸å¤šäº”åå¹´ï¼Œæ‰€ä»¥é¢ä¸´ç€ä¸€ä¸ªèµ„æºè€—å°½çš„é—®é¢˜ã€‚åœ¨ä¸Šä¸ªä¸–çºª90å¹´ä»£å‡ºç°äº†IPçš„ç¬¬6ä¸ªç‰ˆæœ¬ï¼Œæ®è¯´IPV6å¯ä»¥ç»™åœ°çƒçš„æ¯ä¸€ä¸ªæ²™å­åˆ†é…ä¸€ä¸ªIPã€‚</p>
</li>
<li><p>IPV6ï¼š16å­—èŠ‚128ä½æ•´æ•°ï¼Œå¹¶åˆ†æˆ8æ®µåå…­è¿›åˆ¶æ•°ï¼Œæ¯16ä½ä¹‹é—´ç”¨åœ†ç‚¹éš”å¼€ï¼Œæ¯16ä½æ•´æ•°å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ª0~65535çš„åè¿›åˆ¶æ•°ã€‚</p>
<p>æ ¼å¼ï¼šX.X.X.X.X.X.X.X ä¾‹å¦‚ï¼šFFFF.FFFF.FFFF.FFFF.FFFF.FFFF.FFFF.FFFF</p>
<p>è¿™é‡Œçš„4å’Œ6æ˜¯IPçš„ç¬¬4ä¸ªå’Œç¬¬6ä¸ªç‰ˆæœ¬ï¼Œç‰ˆæœ¬1~3å’Œç‰ˆæœ¬5éƒ½æœªæ›¾ä½¿ç”¨è¿‡ã€‚</p>
</li>
</ul>
<p>IPV4çš„åº”ç”¨åˆ†ç±»ï¼š</p>
<ul>
<li><p>Aç±»ï¼šæ”¿åºœæœºæ„ï¼Œ<strong>1</strong>.0.0.1~<strong>126</strong>.255.255.254</p>
</li>
<li><p>Bç±»ï¼šä¸­å‹ä¼ä¸šï¼Œ<strong>128</strong>.0.0.1~<strong>191</strong>.255.255.254</p>
</li>
<li><p>Cç±»ï¼šä¸ªäººç”¨æˆ·ï¼Œ<strong>192</strong>.0.0.1~<strong>223</strong>.255.255.254</p>
</li>
<li><p>Dç±»ï¼šç”¨äºç»„æ’­ï¼Œ224.0.0.1~239.255.255.254</p>
</li>
<li><p>Eç±»ï¼šç”¨äºå®éªŒï¼Œ240.0.0.1~255.255.255.254</p>
</li>
<li><p>å›ç¯åœ°å€ï¼š127.0.0.1ï¼ŒæŒ‡æœ¬æœºï¼Œä¸€èˆ¬ç”¨äºæµ‹è¯•ä½¿ç”¨ã€‚</p>
</li>
<li><p>æµ‹è¯•IPå‘½ä»¤ï¼šping D.D.D.D</p>
<p>æ¯”å¦‚ä½ å¯ä»¥æ‰“å¼€cmdï¼Œè¾“å…¥<code>ping www.baidu.com</code></p>
</li>
<li><p>æŸ¥çœ‹IPå‘½ä»¤ï¼šipconfig</p>
</li>
</ul>
<h2 id="3-4-Portç«¯å£"><a href="#3-4-Portç«¯å£" class="headerlink" title="3.4 Portç«¯å£"></a>3.4 Portç«¯å£</h2><ul>
<li><p>ç«¯å£å·ï¼šåœ¨é€šä¿¡å®ä½“ä¸Šè¿›è¡Œç½‘ç»œé€šè®¯ç¨‹åºçš„å”¯ä¸€æ ‡è¯†ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ç”¨IPåœ°å€ä¸º192.168.0.1çš„ç”µè„‘ä¸Šçš„QQç¨‹åºï¼Œç»™å­¦å¦¹çš„IPåœ°å€ä¸º192.168.0.2çš„ç”µè„‘ä¸Šçš„QQå‘é€ä¸€æ¡ä¿¡æ¯â€œæˆ‘å–œæ¬¢ä½ â€ï¼Œè€Œä¸”æˆ‘è¿˜ç”¨ç”µè„‘ä¸Šçš„å¾®ä¿¡å‘é€äº†ç›¸åŒçš„ä¿¡æ¯ç»™å­¦å¦¹ç”µè„‘ä¸Šçš„å¾®ä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤æ¡ä¿¡æ¯å‘é€çš„IPåœ°å€éƒ½æ˜¯å­¦å¦¹çš„ç”µè„‘192.168.0.2ï¼Œå¦‚ä½•ä¿è¯QQçš„æ¶ˆæ¯ä¸ä¼šå‘é€åˆ°å¾®ä¿¡ä¸Šï¼Œä¸è‡³äºå‡ºç°æ··ä¹±ï¼Ÿæ‰€ä»¥ï¼Œç¨‹åºåœ¨å‘é€ä¿¡æ¯çš„æ—¶å€™ï¼Œä¸ä»…è¦çŸ¥é“å¯¹æ–¹çš„IPåœ°å€ï¼Œè¿˜è¦çŸ¥é“ç¨‹åºçš„ç«¯å£å·ã€‚</p>
</li>
<li><p>ç«¯å£åˆ†ç±»ï¼ˆä¸€èˆ¬æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼‰ï¼š</p>
<ul>
<li><p>å…¬è®¤ç«¯å£ï¼š0~1023</p>
<p>åƒè¿™æ ·çš„ç«¯å£å·æ˜¯è¢«å ç”¨çš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ã€‚</p>
</li>
<li><p>æ³¨å†Œç«¯å£ï¼š1024~49151</p>
</li>
<li><p>åŠ¨æ€æˆ–ç§æœ‰ç«¯å£ï¼š49152~65535</p>
<p>åƒè¿™æ ·çš„ç«¯å£å·æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œè€Œä¸”ä¸¤ä¸ªç½‘ç»œç¨‹åºä¸å¯èƒ½å‡ºç°ç«¯å£å·ç›¸åŒçš„æƒ…å†µï¼Œä½†æ˜¯å¯¹äºTCP/UDPåè®®ï¼Œä»–ä»¬æ˜¯ä¸¤å¥—ç«¯å£å·ï¼Œå®ƒä»¬ç«¯å£å·ç›¸åŒæ˜¯ä¸å†²çªçš„ï¼Œæ¯ä¸ªåè®®éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p>
</li>
</ul>
</li>
<li><p>å¸¸ç”¨ç«¯å£ï¼š</p>
<ul>
<li>MySql:3306</li>
<li>Oracle:1521</li>
<li>Tomcat:8080</li>
<li>SMTP:25</li>
<li>WebæœåŠ¡å™¨:80</li>
<li>FTPæœåŠ¡å™¨:21</li>
</ul>
</li>
</ul>
<hr>
<h1 id="4-ç½‘ç»œç¼–ç¨‹"><a href="#4-ç½‘ç»œç¼–ç¨‹" class="headerlink" title="4. ç½‘ç»œç¼–ç¨‹"></a>4. ç½‘ç»œç¼–ç¨‹</h1><h2 id="4-1-InetAddressç±»"><a href="#4-1-InetAddressç±»" class="headerlink" title="4.1 InetAddressç±»"></a>4.1 InetAddressç±»</h2><ul>
<li><p>æ¦‚å¿µï¼šè¡¨ç¤ºäº’è”ç½‘åè®®ï¼ˆIPï¼‰åœ°å€å¯¹è±¡ï¼Œ<strong>å°è£…</strong>äº†ä¸è¯¥IPåœ°å€ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¹¶æä¾›è·å–ä¿¡æ¯çš„å¸¸ç”¨æ–¹æ³•ã€‚</p>
</li>
<li><p>æ–¹æ³•ï¼š</p>
<ul>
<li><p><code>public static InetAddress getLocalHost()</code></p>
<p>è·å¾—æœ¬åœ°ä¸»æœºåœ°å€å¯¹è±¡ã€‚</p>
</li>
<li><p><code>public static InetAddress getByName(String host)</code></p>
<p>æ ¹æ®ä¸»æœºåç§°è·å¾—åœ°å€ã€‚</p>
</li>
<li><p><code>public static InetAddress[] getAllByName(String host)</code></p>
<p>è·å¾—æ‰€æœ‰ç›¸å…³åœ°å€å¯¹è±¡ã€‚</p>
</li>
<li><p><code>public String getHostAddress()</code></p>
<p>è·å–IPåœ°å€å­—ç¬¦ä¸²</p>
</li>
<li><p><code>public String getHostName()</code></p>
<p>è·å¾—IPåœ°å€ä¸»æœºåã€‚</p>
</li>
</ul>
</li>
</ul>
<p>æ¼”ç¤ºInetAddressç±»çš„ä½¿ç”¨ï¼š</p>
<ol>
<li>åˆ›å»ºæœ¬æœºIPåœ°å€å¯¹è±¡ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. getLocalhost()æ–¹æ³•</span></span><br><span class="line">InetAddress ia1=InetAddress.getLocalHost();</span><br><span class="line">System.out.println(<span class="string">&quot;ipåœ°å€ï¼š&quot;</span>+ia1.getHostAddress()+<span class="string">&quot; ä¸»æœºåï¼š&quot;</span>+ia1.getHostName());</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œè¿™æ˜¯æˆ‘çš„IPåœ°å€å’Œç”µè„‘ä¸»æœºåï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ipåœ°å€ï¼š172.16.0.133 ä¸»æœºåï¼šLAPTOP-BDJQBB64</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰å…¶ä»–æ–¹å¼ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ç»å¸¸ä½¿ç”¨çš„æ˜¯ä¸Šé¢ä¸€ç§å’Œç¬¬äºŒç§æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2. getByName(&quot;ipåœ°å€&quot;)</span></span><br><span class="line">InetAddress ia2=InetAddress.getByName(<span class="string">&quot;LAPTOP-BDJQBB64&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;ipåœ°å€ï¼š&quot;</span>+ia2.getHostAddress()+<span class="string">&quot; ä¸»æœºåï¼š&quot;</span>+ia2.getHostName());</span><br><span class="line"><span class="comment">//3. getByName(&quot;127.0.0.1&quot;)</span></span><br><span class="line">InetAddress ia3=InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;ipåœ°å€ï¼š&quot;</span>+ia3.getHostAddress()+<span class="string">&quot; ä¸»æœºåï¼š&quot;</span>+ia3.getHostName());</span><br><span class="line"><span class="comment">//4. getByName(&quot;localhost&quot;)</span></span><br><span class="line">InetAddress ia4=InetAddress.getByName(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;ipåœ°å€ï¼š&quot;</span>+ia4.getHostAddress()+<span class="string">&quot; ä¸»æœºåï¼š&quot;</span>+ia4.getHostName());</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ipåœ°å€ï¼š172.16.0.133 ä¸»æœºåï¼šLAPTOP-BDJQBB64</span><br><span class="line">ipåœ°å€ï¼š127.0.0.1 ä¸»æœºåï¼šservserv.generals.ea.com</span><br><span class="line">ipåœ°å€ï¼š127.0.0.1 ä¸»æœºåï¼šlocalhost</span><br></pre></td></tr></table></figure>

<p>2.åˆ›å»ºå±€åŸŸç½‘IPåœ°å€å¯¹è±¡</p>
<p>ä¹Ÿå°±æ˜¯æŸ¥æ‰¾è¯´å’Œæˆ‘è¿™å°ç”µè„‘ä½äºåŒä¸€ä¸ªç½‘ç»œä¸­çš„ç”µè„‘ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InetAddress ia5=InetAddress.getByName(&quot;192.168.1.0&quot;);</span><br><span class="line">//åˆ¤æ–­æŒ‡å®šçš„ç”µè„‘/IPåœ¨æŒ‡å®šæ—¶é—´é‡Œèƒ½å¦å¯è¾¾,å‚æ•°ä¸ºæ¯«ç§’æ•°</span><br><span class="line">//trueè¡¨ç¤ºå¯è¾¾ï¼Œfalseè¡¨ç¤ºä¸å¯è¾¾</span><br><span class="line">System.out.println(ia5.isReachable(2000));</span><br><span class="line">System.out.println(&quot;ipåœ°å€ï¼š&quot;+ia5.getHostAddress()+&quot; ä¸»æœºåï¼š&quot;+ia5.getHostName());</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªIPåœ°å€æ˜¯æˆ‘ç¼–çš„ï¼Œæ˜¯ä¸å¯è¾¾çš„ï¼Œæ‰€ä»¥ç»“æœçš„IPåœ°å€å’Œä¸»æœºåéƒ½è¿”å›äº†æˆ‘è¾“å…¥çš„åœ°å€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">false</span><br><span class="line">ipåœ°å€ï¼š192.168.1.0 ä¸»æœºåï¼š192.168.1.0</span><br></pre></td></tr></table></figure>

<p>3.åˆ›å»ºå¤–ç½‘IPåœ°å€å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InetAddress ia6=InetAddress.getByName(&quot;www.baidu.com&quot;);</span><br><span class="line">System.out.println(&quot;ipåœ°å€ï¼š&quot;+ia6.getHostAddress()+&quot; ä¸»æœºåï¼š&quot;+ia6.getHostName());</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ipåœ°å€ï¼š39.156.66.18 ä¸»æœºåï¼šwww.baidu.com</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥è·å–ç™¾åº¦åŸŸåä¸‹çš„IPåœ°å€æ‰€ç»„æˆçš„æ•°ç»„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InetAddress[] ia=InetAddress.getAllByName(&quot;www.baidu.com&quot;);</span><br><span class="line">for (InetAddress inetAddress : ia) &#123;</span><br><span class="line">    System.out.println(inetAddress.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">www.baidu.com/39.156.66.14</span><br><span class="line">www.baidu.com/39.156.66.18</span><br></pre></td></tr></table></figure>

<h2 id="4-2-åŸºäºTCPåè®®çš„Socketç½‘ç»œç¼–ç¨‹"><a href="#4-2-åŸºäºTCPåè®®çš„Socketç½‘ç»œç¼–ç¨‹" class="headerlink" title="4.2 åŸºäºTCPåè®®çš„Socketç½‘ç»œç¼–ç¨‹"></a>4.2 åŸºäºTCPåè®®çš„Socketç½‘ç»œç¼–ç¨‹</h2><p>Socketç¼–ç¨‹ï¼š</p>
<ul>
<li><p>Socketï¼ˆå¥—æ¥å­—ï¼‰æ˜¯ç½‘ç»œä¸­çš„ä¸€ä¸ªé€šä¿¡ç»“ç‚¹ã€‚</p>
<blockquote>
<p>æ¯ä¸€æ¡TCPè¿æ¥æœ‰ä¸¤ä¸ªç«¯ç‚¹ï¼ŒTCPçš„ç«¯ç‚¹å«åšå¥—æ¥å­—ï¼ˆsocketï¼‰æˆ–æ’å£ã€‚æ ¹æ®RFC 793çš„å®šä¹‰ï¼šç«¯å£å·<strong>æ‹¼æ¥åˆ°</strong>ï¼ˆConcatenated withï¼‰IPåœ°å€æ„æˆäº†å¥—æ¥å­—ã€‚å› æ­¤ï¼Œå¥—æ¥å­—çš„è¡¨ç¤ºæ–¹æ³•æ˜¯åœ¨ç‚¹åˆ†ä¹‹è¿›åˆ¶çš„IPåœ°å€åé¢å†™ä¸Šç«¯å£å·ï¼Œä¸­é—´ç”¨å†’å·æˆ–è€…é€—å·éš”å¼€ã€‚ä¾‹å¦‚ï¼Œè‹¥IPåœ°å€æ˜¯192.3.4.5è€Œç«¯å£å·æ˜¯80ï¼Œé‚£ä¹ˆå¾—åˆ°çš„å¥—æ¥å­—å°±æ˜¯(192.3.4.5:80)ã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬æœ‰</p>
<blockquote>
<p>å¥—æ¥å­—socket = ( IPåœ°å€ : ç«¯å£å· )</p>
</blockquote>
</blockquote>
</li>
<li><p>åˆ†ä¸ºå®¢æˆ·ç«¯Socketå’ŒæœåŠ¡å™¨ServerSocketã€‚</p>
</li>
<li><p>é€šä¿¡è¦æ±‚ï¼šIPåœ°å€+ç«¯å£å·ã€‚</p>
</li>
</ul>
<h3 id="4-2-1-å¼€å‘æ­¥éª¤"><a href="#4-2-1-å¼€å‘æ­¥éª¤" class="headerlink" title="4.2.1 å¼€å‘æ­¥éª¤"></a>4.2.1 å¼€å‘æ­¥éª¤</h3><p>æœåŠ¡å™¨ç«¯æ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºServerSocketï¼ŒæŒ‡å®šç«¯å£å·ã€‚</li>
<li>è°ƒç”¨acceptç­‰å¾…å®¢æˆ·ç«¯æ¥å…¥ã€‚</li>
<li>ä½¿ç”¨<strong>è¾“å…¥æµ</strong>ï¼Œ<strong>æ¥å—è¯·æ±‚</strong>æ•°æ®åˆ°æœåŠ¡å™¨ï¼ˆç­‰å¾…ï¼‰ã€‚</li>
<li>ä½¿ç”¨<strong>è¾“å‡ºæµ</strong>ï¼Œ<strong>å‘é€å“åº”</strong>æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>é‡Šæ”¾èµ„æºã€‚</li>
</ul>
<p>å®¢æˆ·ç«¯æ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºSocketï¼ŒæŒ‡å®šæœåŠ¡å™¨IP + ç«¯å£å·ã€‚</li>
<li>ä½¿ç”¨<strong>è¾“å‡ºæµ</strong>ï¼Œ<strong>å‘é€è¯·æ±‚</strong>æ•°æ®åˆ°æœåŠ¡å™¨ã€‚</li>
<li>ä½¿ç”¨<strong>è¾“å…¥æµ</strong>ï¼Œ<strong>æ¥å—å“åº”</strong>æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼ˆç­‰å¾…ï¼‰ã€‚</li>
<li>é‡Šæ”¾èµ„æºã€‚</li>
</ul>
<h3 id="4-2-2-TCPç¼–ç¨‹æ¡ˆä¾‹ä¸€"><a href="#4-2-2-TCPç¼–ç¨‹æ¡ˆä¾‹ä¸€" class="headerlink" title="4.2.2 TCPç¼–ç¨‹æ¡ˆä¾‹ä¸€"></a>4.2.2 TCPç¼–ç¨‹æ¡ˆä¾‹ä¸€</h3><ul>
<li>TCPç¼–ç¨‹å®ç°å®¢æˆ·ç«¯å‘é€æ•°æ®ç»™æœåŠ¡å™¨ç«¯ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TCPæœåŠ¡å™¨ç«¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpServer</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//		1. åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—ServerSocketï¼Œç»‘å®šç«¯å£å·ã€‚</span></span><br><span class="line">		ServerSocket listener=<span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">6666</span>);</span><br><span class="line"><span class="comment">//		2. è°ƒç”¨acceptï¼Œä¾¦å¬å¹¶æ¥å—è¿æ¥åˆ°æ­¤æœåŠ¡å™¨å¥—æ¥å­—çš„è¯·æ±‚</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡å™¨å·²å¯åŠ¨...&quot;</span>);</span><br><span class="line">		Socket socket=listener.accept();        </span><br><span class="line"><span class="comment">//		3. ä½¿ç”¨è¾“å…¥æµï¼Œæ¥å—è¯·æ±‚æ•°æ®åˆ°æœåŠ¡å™¨ï¼ˆç­‰å¾…ï¼‰ã€‚</span></span><br><span class="line">		InputStream is=socket.getInputStream();</span><br><span class="line">		<span class="comment">//ä½¿ç”¨è½¬æ¢æµï¼Œä»¥æ¥æ”¶ä¸­æ–‡æ•°æ®</span></span><br><span class="line">		BufferedReader br=<span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;å®¢æˆ·å‘é€ï¼š&quot;</span>+br.readLine());</span><br><span class="line"><span class="comment">//		4. ä½¿ç”¨è¾“å‡ºæµï¼Œå‘é€å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚ã€å¯é€‰ã€‘</span></span><br><span class="line"><span class="comment">//		5. é‡Šæ”¾èµ„æºã€‚</span></span><br><span class="line">		br.close();</span><br><span class="line">		socket.close();</span><br><span class="line">		listener.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—æ—¶å¯ä»¥ç»‘å®šä¸€ä¸ªç«¯å£ï¼Œå¦‚ä¸Šè¿°ä»£ç å—ä¸­çš„6666ï¼Œç«¯å£å·èŒƒå›´å¯ä»¥æ˜¯0~65535ä¹‹é—´çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™æœ€å¥½ä½¿ç”¨1024ä¹‹åçš„ï¼Œå› ä¸ºä¹‹å‰éƒ½æ˜¯è¢«å ç”¨çš„å…¬è®¤ç«¯å£ï¼Œå‚æ•°0è¡¨ç¤ºå¯ä»¥åœ¨ä»»ä½•ç©ºé—²ç«¯å£ä¸Šåˆ›å»ºå¥—æ¥å­—ï¼›acceptæ–¹æ³•ä¾¦å¬å¹¶æ¥å—åˆ°æ­¤å¥—æ¥å­—çš„è¿æ¥ï¼Œè¿”å›ä¸€ä¸ªæ–°å¥—æ¥å­—ï¼ˆå®¢æˆ·ç«¯å¥—æ¥å­—ï¼‰ï¼Œè¯¥æ–¹æ³•åœ¨æ¥æ”¶åˆ°ä¼ å…¥è¿æ¥ä¹‹å‰ä¼šä¸€ç›´<strong>é˜»å¡</strong>ã€‚<code>getInputStream()</code>æ–¹æ³•è¿”å›å¥—æ¥å­—çš„è¾“å…¥æµï¼Œè¿˜æœ‰å¯¹åº”çš„<code>getOutputStream()</code>æ–¹æ³•ï¼Œè¿”å›å¥—æ¥å­—çš„è¾“å‡ºæµã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * TCPå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpClient</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException, IOException &#123;</span><br><span class="line"><span class="comment">//		1. åˆ›å»ºSocketï¼ŒæŒ‡å®šæœåŠ¡å™¨IP + ç«¯å£å·ã€‚</span></span><br><span class="line">		Socket socket=<span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;172.16.0.133&quot;</span>, <span class="number">6666</span>);</span><br><span class="line"><span class="comment">//		2. ä½¿ç”¨è¾“å‡ºæµï¼Œå‘é€è¯·æ±‚æ•°æ®åˆ°æœåŠ¡å™¨ã€‚</span></span><br><span class="line">		OutputStream os=socket.getOutputStream();</span><br><span class="line">        <span class="comment">//ä½¿ç”¨è½¬æ¢æµï¼Œå†™å…¥ä¸­æ–‡</span></span><br><span class="line">		BufferedWriter bw=<span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(os, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">		bw.write(<span class="string">&quot;æˆ‘å–œæ¬¢ä½ &quot;</span>);</span><br><span class="line"><span class="comment">//		3. ä½¿ç”¨è¾“å…¥æµï¼Œè¯»å–æœåŠ¡å™¨å›å¤çš„æ•°æ®ã€‚ã€å¯é€‰ã€‘</span></span><br><span class="line"><span class="comment">//		4. é‡Šæ”¾èµ„æºã€‚</span></span><br><span class="line">		bw.close();</span><br><span class="line">		socket.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ­¥ä¸­ï¼Œç«¯å£å·è¦å’ŒæœåŠ¡å™¨å¥—æ¥å­—çš„ç«¯å£ä¸€è‡´ï¼Œå®¢æˆ·ç«¯å¥—æ¥å­—ä¸€æ—¦åˆ›å»ºä¹‹åï¼Œå°±å’ŒæœåŠ¡å™¨å»ºç«‹äº†è¿æ¥ã€‚</p>
<p>å¯åŠ¨ç¨‹åºæ—¶ï¼Œåº”è¯¥å…ˆè¿è¡ŒæœåŠ¡å™¨ç«¯ä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼ˆç¨‹åºå¤„äºé˜»å¡çŠ¶æ€ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²å¯åŠ¨...</span><br></pre></td></tr></table></figure>

<p>å†è¿è¡Œå®¢æˆ·ç«¯ä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²å¯åŠ¨...</span><br><span class="line">å®¢æˆ·å‘é€ï¼šæˆ‘å–œæ¬¢ä½ </span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-æ¡ˆä¾‹ä¸€åˆ†æ"><a href="#4-2-3-æ¡ˆä¾‹ä¸€åˆ†æ" class="headerlink" title="4.2.3 æ¡ˆä¾‹ä¸€åˆ†æ"></a>4.2.3 æ¡ˆä¾‹ä¸€åˆ†æ</h3><p>é¦–å…ˆåˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—ServerSocketå¹¶ç»‘å®šç«¯å£ï¼Œç„¶ååˆ›å»ºå®¢æˆ·ç«¯å¥—æ¥å­—Socketä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼›</p>
<p>æœåŠ¡å™¨å¥—æ¥å­—ServerSocketè°ƒç”¨<code>accept()</code>ä¾¦å¬è¿æ¥è¯·æ±‚ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¥—æ¥å­—æ¥æ”¶å­—èŠ‚æµï¼›</p>
<p>å®¢æˆ·ç«¯å¥—æ¥å­—å¯ä»¥é€šè¿‡æµå‘é€ä¿¡æ¯ç»™æœåŠ¡å™¨çš„Socketå¥—æ¥å­—ï¼ŒæœåŠ¡å™¨çš„Socketå¥—æ¥å­—ä¹Ÿå¯ä»¥é€šè¿‡æµå“åº”å®¢æˆ·ç«¯å¥—æ¥å­—ã€‚</p>
<p><img src="https://pic.downk.cc/item/5faa57de1cd1bbb86bb68d09.png" alt="img"></p>
<h3 id="4-2-4-TCPç¼–ç¨‹æ¡ˆä¾‹äºŒ"><a href="#4-2-4-TCPç¼–ç¨‹æ¡ˆä¾‹äºŒ" class="headerlink" title="4.2.4 TCPç¼–ç¨‹æ¡ˆä¾‹äºŒ"></a>4.2.4 TCPç¼–ç¨‹æ¡ˆä¾‹äºŒ</h3><ul>
<li>TCPç¼–ç¨‹å®ç°å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶ç»™æœåŠ¡å™¨ç«¯ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TCPæœåŠ¡ç«¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpFileServer</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		<span class="comment">//1. åˆ›å»ºServerSocketï¼Œç»‘å®šç«¯å£</span></span><br><span class="line">		ServerSocket listener=<span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">		<span class="comment">//2. ä¾¦å¬å¹¶æ¥å—åˆ°æ­¤å¥—æ¥å­—çš„è¿æ¥</span></span><br><span class="line">		System.out.println(<span class="string">&quot;æœåŠ¡å™¨å·²å¯åŠ¨...&quot;</span>);</span><br><span class="line">		Socket socket=listener.accept();</span><br><span class="line">		<span class="comment">//3. è·å–è¾“å…¥æµ</span></span><br><span class="line">		InputStream is=socket.getInputStream();</span><br><span class="line">		<span class="comment">//4. è¾¹è¯»å–ï¼Œè¾¹ä¿å­˜</span></span><br><span class="line">		FileOutputStream fos=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\MrG2.jpg&quot;</span>);</span><br><span class="line">		<span class="comment">//åˆ›å»ºç¼“å†²åŒº</span></span><br><span class="line">		<span class="type">byte</span>[] buf=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">4</span>];</span><br><span class="line">		<span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>((count=is.read(buf))!=-<span class="number">1</span>) &#123;</span><br><span class="line">			fos.write(buf,<span class="number">0</span>,count);</span><br><span class="line">		&#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡å™¨æ¥æ”¶å®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">		<span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">		fos.close();</span><br><span class="line">		is.close();</span><br><span class="line">		socket.close();</span><br><span class="line">		listener.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¥éª¤å’Œæ¡ˆä¾‹ä¸€å·®ä¸å¤šï¼Œåªæ˜¯æ¢æˆäº†æ–‡ä»¶çš„è¯»å†™ã€‚æœåŠ¡å™¨ç«¯ä»è¾“å…¥æµä¸­è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºï¼Œåˆä»ç¼“å†²åŒºå†™å…¥åˆ°è¾“å‡ºæµåˆ°<code>d:\\MrG2.jpg</code>ä¸­ï¼Œåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä¼ é€’çš„æ˜¯ä¸€å¼ å›¾ç‰‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TCPå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpFileClient</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		<span class="comment">//1. åˆ›å»ºSocketï¼Œå¹¶åˆ¶å®šIPåœ°å€å’Œç«¯å£</span></span><br><span class="line">		Socket socket=<span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;172.16.0.133&quot;</span>,<span class="number">9999</span>);</span><br><span class="line">		<span class="comment">//2. ä½¿ç”¨è¾“å‡ºæµ</span></span><br><span class="line">		OutputStream os=socket.getOutputStream();</span><br><span class="line">		<span class="comment">//3. è¯»å–æ–‡ä»¶</span></span><br><span class="line">		FileInputStream fis=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\MrG1.jpg&quot;</span>);</span><br><span class="line">		<span class="comment">//åˆ›å»ºç¼“å†²åŒº</span></span><br><span class="line">		<span class="type">byte</span>[] buf=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">4</span>];</span><br><span class="line">		<span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">		<span class="comment">//è¾¹è¯»å–ï¼Œå˜å†™å…¥æµ</span></span><br><span class="line">		<span class="keyword">while</span>((count=fis.read(buf))!=-<span class="number">1</span>) &#123;</span><br><span class="line">			os.write(buf,<span class="number">0</span>,count);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ–‡ä»¶å·²å‘é€ã€‚&quot;</span>);</span><br><span class="line">		<span class="comment">//4. å…³é—­èµ„æº</span></span><br><span class="line">		fis.close();</span><br><span class="line">		os.close();</span><br><span class="line">		socket.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯ä»æœ¬åœ°è¯»å–æ–‡ä»¶æ•°æ®åˆ°æµä¸­ï¼Œç„¶åå°†æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­ã€‚</p>
<p>é¦–å…ˆå¯åŠ¨æœåŠ¡å™¨ï¼ˆç¨‹åºå µå¡ä¸­ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²å¯åŠ¨...</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯åŠ¨å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ–‡ä»¶å·²å‘é€ã€‚</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨ç«¯æ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²å¯åŠ¨...</span><br><span class="line">æœåŠ¡å™¨æ¥æ”¶å®Œæ¯•ã€‚</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€Dç›˜ä¸‹çš„æ–‡ä»¶å‘ç°å¤šäº†ä¸€ä¸ª<code>MrG2.jpg</code>ï¼Œè¯´æ˜ç¨‹åºè¿è¡ŒæˆåŠŸã€‚</p>
<h3 id="2-5-TCPç¼–ç¨‹æ¡ˆä¾‹ä¸‰"><a href="#2-5-TCPç¼–ç¨‹æ¡ˆä¾‹ä¸‰" class="headerlink" title=".2.5 TCPç¼–ç¨‹æ¡ˆä¾‹ä¸‰"></a>.2.5 TCPç¼–ç¨‹æ¡ˆä¾‹ä¸‰</h3><ul>
<li>TCPå®ç°å¤šä¸ªå®¢æˆ·ç«¯å‘é€æ•°æ®ç»™æœåŠ¡å™¨ç«¯ã€‚</li>
</ul>
<p>æœåŠ¡å™¨ç«¯è¦æ¥æ”¶å¤šä¸ªå®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼ŒæœåŠ¡å™¨ç«¯å°±éœ€è¦åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½¿æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹å¤„ç†æ¯ä¸ªå®¢æˆ·ç«¯çš„ä»»åŠ¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//TCPæœåŠ¡å™¨ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpChatServer</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—</span></span><br><span class="line">		ServerSocket listener=<span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">10086</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;æœåŠ¡å™¨å·²è¿æ¥...&quot;</span>);</span><br><span class="line">		<span class="comment">//æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line">		<span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">			<span class="comment">//æ­»å¾ªç¯ï¼Œæ¥ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚æ¥æ”¶ä¸€ä¸ª</span></span><br><span class="line">			Socket socket=listener.accept();</span><br><span class="line">			System.out.println(socket.getInetAddress()+<span class="string">&quot;è¿›æ¥äº†ã€‚&quot;</span>);</span><br><span class="line">			<span class="comment">//åˆ›å»ºå­çº¿ç¨‹æ¥å¤„ç†å®¢æˆ·ç«¯å‘é€çš„æ•°æ®</span></span><br><span class="line">			<span class="keyword">new</span> <span class="title class_">SocketThreads</span>(socket).start();</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çº¿ç¨‹ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketThreads</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Socket socket;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">SocketThreads</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.socket=socket;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;	</span><br><span class="line">		<span class="keyword">if</span>(socket!=<span class="literal">null</span>) &#123;</span><br><span class="line">			BufferedReader br=<span class="literal">null</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="comment">//åˆ›å»ºè¾“å…¥æµ</span></span><br><span class="line">				InputStream is=socket.getInputStream();</span><br><span class="line">				<span class="comment">//ä½¿ç”¨è½¬æ¢æµä»¥æ¥æ”¶ä¸­æ–‡</span></span><br><span class="line">				br=<span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">				<span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">					String data=br.readLine();</span><br><span class="line">					<span class="comment">//å®¢æˆ·ç«¯å·²å…³é—­</span></span><br><span class="line">					<span class="keyword">if</span> (data==<span class="literal">null</span>) &#123;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span> (data.equals(<span class="string">&quot;quit&quot;</span>)||data.equals(<span class="string">&quot;é€€å‡º&quot;</span>)) &#123;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					System.out.println(socket.getInetAddress()+<span class="string">&quot;è¯´ï¼š&quot;</span>+data);</span><br><span class="line">				&#125;		</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;			</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					br.close();</span><br><span class="line">					socket.close();</span><br><span class="line">					System.out.println(socket.getInetAddress()+<span class="string">&quot;é€€å‡ºäº†ã€‚&quot;</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;			</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//TCPå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpChatClient</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºå®¢æˆ·ç«¯å¥—æ¥å­—</span></span><br><span class="line">		Socket socket=<span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;172.16.0.133&quot;</span>,<span class="number">10086</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;å®¢æˆ·ç«¯å·²å»ºç«‹è¿æ¥...&quot;</span>);</span><br><span class="line">		<span class="comment">//è·å–è¾“å‡ºæµ</span></span><br><span class="line">		OutputStream os=socket.getOutputStream();</span><br><span class="line">		BufferedWriter bw=<span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(os,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">		<span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">			Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">			String data=in.nextLine();</span><br><span class="line">			bw.write(data);</span><br><span class="line">			<span class="comment">//è¾“å…¥æ¢è¡Œç¬¦ï¼Œå¦åˆ™çº¿ç¨‹ç±»ä¸­readLine()ä¸ä¼šè¿”å›</span></span><br><span class="line">			bw.newLine();</span><br><span class="line">			bw.flush();</span><br><span class="line">			<span class="keyword">if</span> (data.equals(<span class="string">&quot;quit&quot;</span>)||data.equals(<span class="string">&quot;é€€å‡º&quot;</span>)) &#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		bw.close();</span><br><span class="line">		socket.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†æ–°å»ºä¸€ä¸ªå®¢æˆ·ç«¯ç±»ï¼Œä»£ç åŒä¸Šï¼Œä¿®æ”¹ä¸€ä¸‹IPåœ°å€ï¼ˆå½“ç„¶IPåœ°å€å¿…é¡»æ˜¯å­˜åœ¨çš„ï¼‰ã€‚</p>
<ol>
<li>é¦–å…ˆå¯åŠ¨æœåŠ¡å™¨æŸ¥çœ‹æœåŠ¡å™¨ç«¯ä»£ç çš„æ§åˆ¶å°ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²è¿æ¥...</span><br></pre></td></tr></table></figure>

<ol>
<li>ç„¶åå¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº1ï¼Œå®¢æˆ·ç«¯1ä»£ç æ§åˆ¶å°ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®¢æˆ·ç«¯å·²å»ºç«‹è¿æ¥...</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨ä»£ç æ§åˆ¶å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²è¿æ¥...</span><br><span class="line">/172.16.0.133è¿›æ¥äº†ã€‚</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨å®¢æˆ·ç«¯ä»£ç çš„æ§åˆ¶å°ä¸­è¾“å…¥ä¿¡æ¯åå›è½¦ï¼ŒæœåŠ¡å™¨ç«¯ä»£ç æ§åˆ¶å°ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²è¿æ¥...</span><br><span class="line">/172.16.0.133è¿›æ¥äº†ã€‚</span><br><span class="line">/172.16.0.133è¯´ï¼šæœ‰äººå—ï¼Ÿ</span><br></pre></td></tr></table></figure>

<ol>
<li>å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº2ï¼ŒæœåŠ¡å™¨ä»£ç æ§åˆ¶å°æ˜¾ç¤ºï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²è¿æ¥...</span><br><span class="line">/172.16.0.133è¿›æ¥äº†ã€‚</span><br><span class="line">/172.16.0.133è¯´ï¼šæœ‰äººå—ï¼Ÿ</span><br><span class="line">/10.2.51.23è¿›æ¥äº†ã€‚</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨å®¢æˆ·ç«¯2æ§åˆ¶å°è¾“å…¥ä¿¡æ¯åå›è½¦ï¼ŒæœåŠ¡å™¨ä»£ç æ§åˆ¶å°æ˜¾ç¤ºï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨å·²è¿æ¥...</span><br><span class="line">/172.16.0.133è¿›æ¥äº†ã€‚</span><br><span class="line">/172.16.0.133è¯´ï¼šæœ‰äººå—ï¼Ÿ</span><br><span class="line">/10.2.51.23è¿›æ¥äº†ã€‚</span><br><span class="line">/10.2.51.23è¯´ï¼šæœ‰ï¼Œä½ æ˜¯GGè¿˜æ˜¯MMï¼Ÿ</span><br></pre></td></tr></table></figure>

<ol>
<li>ç„¶åå®¢æˆ·ç«¯ç¨‹åºè¾“å‡ºâ€quitâ€æˆ–è€…â€œé€€å‡ºâ€ï¼ŒæœåŠ¡å™¨æ§åˆ¶å°æ˜¾ç¤ºï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/172.16.0.133è¿›æ¥äº†ã€‚</span><br><span class="line">/172.16.0.133è¯´ï¼šæœ‰äººå—ï¼Ÿ</span><br><span class="line">/10.2.51.23è¿›æ¥äº†ã€‚</span><br><span class="line">/10.2.51.23è¯´ï¼šæœ‰ï¼Œä½ æ˜¯GGè¿˜æ˜¯MMï¼Ÿ</span><br><span class="line">/172.16.0.133é€€å‡ºäº†ã€‚</span><br><span class="line">/10.2.51.23é€€å‡ºäº†ã€‚</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤„æ¨¡æ‹Ÿäº†ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œæ³¨æ„å®¢æˆ·ç«¯ä¸­çš„IPåœ°å€å¿…é¡»æ˜¯å¯è¾¾çš„ã€‚</p>
]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAå¤šçº¿ç¨‹</title>
    <url>/2021/05/22/JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="1-çº¿ç¨‹æ¦‚è¿°"><a href="#1-çº¿ç¨‹æ¦‚è¿°" class="headerlink" title="1. çº¿ç¨‹æ¦‚è¿°"></a>1. çº¿ç¨‹æ¦‚è¿°</h1><blockquote>
<p>å…³äºè¿›ç¨‹å’Œçº¿ç¨‹çš„çŸ¥è¯†éƒ½æ˜¯æ“ä½œç³»ç»Ÿé‡Œå­¦è¿‡çš„å†…å®¹ï¼Œæ­¤å¤„ä½œä¸ºJAVAå¤šçº¿ç¨‹çš„å‰ç½®çŸ¥è¯†è¿›è¡Œå¤ä¹ å›é¡¾ï¼Œè¡¥å……çš„å†…å®¹å¯çœ‹å¯ä¸çœ‹ã€‚</p>
</blockquote>
<h2 id="1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹"><a href="#1-1-ä»€ä¹ˆæ˜¯è¿›ç¨‹" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯è¿›ç¨‹"></a>1.1 ä»€ä¹ˆæ˜¯è¿›ç¨‹</h2><p><strong>è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½</strong>ï¼Œ<strong>ä¹Ÿæ˜¯ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½</strong>ã€‚å¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œèƒ½åœ¨ä¸€æ®µæ—¶é—´å†…åŒæ—¶è¿è¡Œï¼Œåœ¨windowsæ“ä½œä¸­ï¼Œå¯ä»¥æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨çœ‹åˆ°å„ç§å„æ ·çš„è¿›ç¨‹å’Œå¯¹åº”çš„PIDï¼Œå¹¶ä¸”éƒ½å ç”¨äº†ä¸€å®šçš„ç³»ç»Ÿèµ„æºã€‚å•æ ¸CPUåœ¨åŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªèƒ½è¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚æ‰€è°“åŒæ—¶è¿è¡Œæ˜¯å®è§‚ä¸Šçš„æ¦‚å¿µï¼Œå¾®è§‚ä¸Šè¿›ç¨‹ä¹‹é—´æ˜¯åœ¨ä¸åœåœ°å¿«é€Ÿåˆ‡æ¢ã€‚</p>
<blockquote>
<p>è¡¥å……ï¼š</p>
<p>è¿›ç¨‹å…·æœ‰å‡ ä¸ªåŸºæœ¬ç‰¹æ€§ï¼š</p>
<ul>
<li>åŠ¨æ€æ€§ã€‚è¿›ç¨‹æ˜¯ç¨‹åºåœ¨å¤„ç†å™¨ä¸Šçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œå®ƒå› åˆ›å»ºè€Œäº§ç”Ÿï¼Œç”±è°ƒåº¦è€Œæ‰§è¡Œï¼Œå› å¾—ä¸åˆ°èµ„æºè€Œæš‚åœï¼Œæœ€åå› æ’¤é”€è€Œæ¶ˆäº¡ã€‚</li>
<li>å¹¶å‘æ€§ï¼šå¦‚æ¦‚è¿°é‡Œæ‰€è¯´ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œèƒ½åœ¨ä¸€æ®µæ—¶é—´å†…åŒæ—¶è¿è¡Œã€‚è¿›ç¨‹çš„ç›®çš„æ˜¯ä½¿ç¨‹åºèƒ½ä¸å…¶ä»–ç¨‹åºå¹¶è¡Œï¼Œä»¥æé«˜èµ„æºåˆ©ç”¨ç‡ã€‚</li>
<li>ç‹¬ç«‹æ€§ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½ã€‚</li>
<li>å¼‚æ­¥æ€§ï¼šè¿›ç¨‹ä»¥å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ã€‚</li>
<li><strong>ç»“æ„ç‰¹å¾</strong>ï¼šä¸ºäº†æè¿°å’Œè®°å½•è¿›ç¨‹çš„è¿åŠ¨å˜åŒ–è¿‡ç¨‹ï¼Œå¹¶ä½¿ä¹‹èƒ½æ­£ç¡®è¿è¡Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ç”±ç¨‹åºæ®µã€æ•°æ®æ®µå’Œä¸€ä¸ªè¿›ç¨‹æ§åˆ¶å—ï¼ˆProcess Control Block,PCBï¼‰ç»„æˆã€‚</li>
</ul>
<p>ç³»ç»Ÿæ ¹æ®PCBæ„ŸçŸ¥è¿›ç¨‹çš„å­˜åœ¨ã€‚PCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚</p>
</blockquote>
<h2 id="1-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹"><a href="#1-2-ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="headerlink" title="1.2 ä»€ä¹ˆæ˜¯çº¿ç¨‹"></a>1.2 ä»€ä¹ˆæ˜¯çº¿ç¨‹</h2><p>çº¿ç¨‹åˆç§°<strong>è½»é‡çº§è¿›ç¨‹</strong>ï¼ˆLight Weight Processï¼‰,å®ƒæ˜¯è¿›ç¨‹å†…ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ã€å¯è°ƒåº¦çš„æ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯CPUçš„åŸºæœ¬è°ƒåº¦å•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œå½¼æ­¤é—´å®Œæˆä¸åŒçš„å·¥ä½œï¼ŒåŒæ—¶æ‰§è¡Œï¼Œç§°ä¸ºå¤šçº¿ç¨‹ï¼Œæ­¤å¤„çš„åŒæ—¶æ‰§è¡Œä¹Ÿæ˜¯å®è§‚ä¸Šçš„ã€‚åœ¨windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°æ€§èƒ½åˆ†é¡µä¸‹çš„èµ„æºç®¡ç†å™¨ï¼Œå¯ä»¥æŸ¥çœ‹æ¯ä¸ªè¿›ç¨‹æ‰€æ‹¥æœ‰çš„çº¿ç¨‹æ•°ã€‚</p>
<p>JAVAè™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå½“ä¸­é»˜è®¤åŒ…å«ä¸»çº¿ç¨‹ï¼ˆmainï¼‰ï¼Œå¯é€šè¿‡ä»£ç åˆ›å»ºå¤šä¸ªç‹¬ç«‹çº¿ç¨‹ï¼Œä¸mainå¹¶å‘æ‰§è¡Œã€‚</p>
<blockquote>
<p>è¡¥å……ï¼š</p>
<ul>
<li><p><strong>çº¿ç¨‹çš„å¼•å…¥</strong></p>
<p>åœ¨æ“ä½œç³»ç»Ÿä¸­å¼•å…¥çº¿ç¨‹ï¼Œæ˜¯ä¸ºäº†å‡å°‘ç¨‹åºå¹¶å‘æ‰§è¡Œæ—¶æ‰€ä»˜å‡ºçš„æ—¶ç©ºå¼€é”€ï¼Œä½¿æ“ä½œç³»ç»Ÿå…·æœ‰æ›´å¥½çš„å¹¶å‘æ€§ï¼Œä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œå…ˆæ¥å›é¡¾ä¸€ä¸‹è¿›ç¨‹çš„ä¸¤ä¸ªåŸºæœ¬å±æ€§ï¼š</p>
<ol>
<li>è¿›ç¨‹æ˜¯ä¸€ä¸ªæ‹¥æœ‰èµ„æºçš„ç‹¬ç«‹å•ä½ã€‚</li>
<li>è¿›ç¨‹åŒæ—¶åˆæ˜¯ä¸€ä¸ªå¯ä»¥è¢«å¤„ç†å™¨ç‹¬ç«‹è°ƒåº¦å’Œåˆ†é…çš„å•å…ƒã€‚</li>
</ol>
<p>ä¸Šè¿°ä¸¤ä¸ªå±æ€§æ„æˆäº†ç¨‹åºå¹¶å‘æ‰§è¡Œçš„åŸºç¡€ã€‚ç„¶è€Œï¼Œä¸ºäº†ä½¿è¿›ç¨‹èƒ½å¹¶å‘æ‰§è¡Œï¼Œæ“ä½œç³»ç»Ÿè¿˜å¿…é¡»è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¦‚è¿›ç¨‹çš„åˆ›å»ºã€æ’¤é”€è¿›ç¨‹å’Œè¿›ç¨‹åˆ‡æ¢ã€‚åœ¨è¿›è¡Œè¿™äº›æ“ä½œæ—¶ï¼Œæ“ä½œç³»ç»Ÿè¦ä¸ºè¿›ç¨‹åˆ†é…èµ„æºåŠå›æ”¶èµ„æºï¼Œä¸ºè¿è¡Œè¿›ç¨‹ä¿å­˜ç°åœºä¿¡æ¯ï¼Œè¿™äº›å·¥ä½œéƒ½éœ€è¦ä»˜å‡ºè¾ƒå¤šçš„æ—¶ç©ºå¼€é”€ã€‚ä¸ºäº†ä½¿å¤šä¸ªç¨‹åºæ›´å¥½åœ°å¹¶å‘æ‰§è¡Œï¼Œå¹¶å°½é‡å‡å°‘æ“ä½œç³»ç»Ÿçš„å¼€é”€ï¼Œæ“ä½œç³»ç»Ÿè®¾è®¡è€…è€ƒè™‘å°†è¿›ç¨‹çš„ä¸¤ä¸ªå±æ€§åˆ†ç¦»å¼€æ¥ï¼Œè®©çº¿ç¨‹å»å®Œæˆç¬¬äºŒä¸ªåŸºæœ¬å±æ€§çš„ä»»åŠ¡ï¼Œè€Œè¿›ç¨‹åªå®Œæˆç¬¬ä¸€ä¸ªåŸºæœ¬å±æ€§çš„ä»»åŠ¡ã€‚</p>
</li>
<li><p><strong>çº¿ç¨‹çš„å®šä¹‰</strong></p>
<p>çº¿ç¨‹çš„å®šä¹‰å­˜åœ¨å¤šç§ä¸åŒçš„ææ³•ï¼Œå‰æ–‡æ¦‚è¿°ä¸­å·²é˜è¿°ä¸€äºŒï¼Œæ­¤å¤„è¿›è¡Œè¡¥å……è¯´æ˜ã€‚çº¿ç¨‹æœ¬èº«ä¸èƒ½å•ç‹¬è¿è¡Œï¼Œåªèƒ½åŒ…å«åœ¨è¿›ç¨‹ä¸­ï¼Œåªèƒ½åœ¨è¿›ç¨‹ä¸­æ‰§è¡Œã€‚çº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰èµ„æºï¼Œåªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œæ—¶å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†å®ƒå¯ä»¥ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶ä»–çº¿ç¨‹<strong>å…±äº«</strong>è¯¥è¿›ç¨‹èµ„æºã€‚å¤šçº¿ç¨‹æ˜¯æŒ‡ä¸€ä¸ªè¿›ç¨‹ä¸­æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹èµ„æºã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†ä¸€ä¸ªæ•°æ®é¡¹ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥äº†è§£å’Œä½¿ç”¨æ­¤ç»“æœæ•°æ®ã€‚ä¸€ä¸ªçº¿ç¨‹æ‰“å¼€å¹¶è¯»ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒåŒä¸€è¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹ä¹Ÿå¯ä»¥åŒæ—¶è¯»æ­¤æ–‡ä»¶ã€‚</p>
</li>
</ul>
</blockquote>
<h2 id="1-3-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><a href="#1-3-è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="1.3 è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"></a>1.3 è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h2><ol>
<li>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯CPUçš„åŸºæœ¬è°ƒåº¦å•ä½ã€‚</li>
<li>ä¸€ä¸ªç¨‹åºè¿è¡Œåä¹‹åæœ‰ä¸€ä¸ªè¿›ç¨‹ã€‚</li>
<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è‡³å°‘éœ€è¦æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦åˆ™è¿™ä¸ªçº¿ç¨‹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</li>
<li>è¿›ç¨‹é—´ä¸èƒ½å…±äº«æ•°æ®æ®µåœ°å€ï¼Œä½†åŒè¿›ç¨‹çš„çº¿ç¨‹ä¹‹é—´å¯ä»¥ã€‚</li>
</ol>
<h2 id="1-4-çº¿ç¨‹çš„ç»„æˆ"><a href="#1-4-çº¿ç¨‹çš„ç»„æˆ" class="headerlink" title="1.4 çº¿ç¨‹çš„ç»„æˆ"></a>1.4 çº¿ç¨‹çš„ç»„æˆ</h2><ul>
<li>ä»»ä½•ä¸€ä¸ªçº¿ç¨‹éƒ½å…·æœ‰åŸºæœ¬çš„ç»„æˆéƒ¨åˆ†ï¼š<ul>
<li>CPUæ—¶é—´ç‰‡ï¼šæ“ä½œç³»ç»Ÿä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ‰§è¡Œæ—¶é—´ã€‚</li>
<li>è¿è¡Œæ•°æ®ï¼š<ul>
<li>å †ç©ºé—´ï¼šå­˜å‚¨çº¿ç¨‹éœ€è¦ä½¿ç”¨çš„å¯¹è±¡ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«å †ä¸­çš„å¯¹è±¡ã€‚</li>
<li>æ ˆç©ºé—´ï¼šå­˜å‚¨çº¿ç¨‹éœ€è¦ä½¿ç”¨çš„å±€éƒ¨å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„æ ˆã€‚</li>
</ul>
</li>
<li>çº¿ç¨‹çš„é€»è¾‘ä»£ç </li>
</ul>
</li>
</ul>
<h2 id="1-5-çº¿ç¨‹çš„ç‰¹ç‚¹"><a href="#1-5-çº¿ç¨‹çš„ç‰¹ç‚¹" class="headerlink" title="1.5 çº¿ç¨‹çš„ç‰¹ç‚¹"></a>1.5 çº¿ç¨‹çš„ç‰¹ç‚¹</h2><ul>
<li>çº¿ç¨‹æŠ¢å å¼æ‰§è¡Œã€‚<ul>
<li>æ•ˆç‡é«˜ã€‚</li>
<li>å¯é˜²æ­¢å•ä¸€çº¿ç¨‹é•¿æ—¶é—´ç‹¬å CPUã€‚</li>
</ul>
</li>
<li>åœ¨å•æ ¸CPUä¸­ï¼Œå®è§‚ä¸ŠåŒæ—¶æ‰§è¡Œï¼Œå¾®è§‚ä¸Šé¡ºåºæ‰§è¡Œã€‚</li>
</ul>
<hr>
<h1 id="2-çº¿ç¨‹çš„åˆ›å»º"><a href="#2-çº¿ç¨‹çš„åˆ›å»º" class="headerlink" title="2. çº¿ç¨‹çš„åˆ›å»º"></a>2. çº¿ç¨‹çš„åˆ›å»º</h1><ul>
<li>åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼ï¼š<ol>
<li>ç»§æ‰¿Threadç±»ï¼Œé‡å†™runæ–¹æ³•ã€‚</li>
<li>å®ç°Runnableæ¥å£ã€‚</li>
<li>å®ç°Callableæ¥å£ã€‚ï¼ˆ6.4èŠ‚æ¼”ç¤ºï¼‰</li>
</ol>
</li>
</ul>
<h2 id="2-1-åˆ›å»ºçº¿ç¨‹ï¼ˆä¸€ï¼‰"><a href="#2-1-åˆ›å»ºçº¿ç¨‹ï¼ˆä¸€ï¼‰" class="headerlink" title="2.1 åˆ›å»ºçº¿ç¨‹ï¼ˆä¸€ï¼‰"></a>2.1 åˆ›å»ºçº¿ç¨‹ï¼ˆä¸€ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testMyThread</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">		MyThread myThread=<span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">		<span class="comment">//å¯åŠ¨å­çº¿ç¨‹</span></span><br><span class="line">		myThread.start();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;----&quot;</span>+i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">----<span class="number">0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line">----<span class="number">1</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line">----<span class="number">2</span></span><br><span class="line">----<span class="number">3</span></span><br><span class="line">----<span class="number">4</span></span><br><span class="line">----<span class="number">5</span></span><br><span class="line">----<span class="number">6</span></span><br><span class="line">----<span class="number">7</span></span><br><span class="line">----<span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line">----<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡è¿è¡Œåå¾—åˆ°çš„ç»“æœéƒ½ä¸ä¸€æ ·ï¼Œè€Œä¸”ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹éƒ½æ˜¯äº¤æ›¿æ‰§è¡Œçš„ï¼Œå¹¶ä¸”æ˜¯æŠ¢å å¼æ‰§è¡Œã€‚</p>
<p>éœ€è¦<strong>æ³¨æ„</strong>çš„æ˜¯ï¼Œåœ¨mainæ–¹æ³•ä¸­éœ€è¦è°ƒç”¨çº¿ç¨‹ç±»çš„startæ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼Œå¦‚æœè°ƒç”¨runæ–¹æ³•å°±ç›¸å½“äºè°ƒç”¨äº†ä¸€ä¸ªæ™®é€šç±»ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿˜æ˜¯ç”±ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</p>
<h2 id="2-2-è·å–å’Œä¿®æ”¹çº¿ç¨‹åç§°"><a href="#2-2-è·å–å’Œä¿®æ”¹çº¿ç¨‹åç§°" class="headerlink" title="2.2 è·å–å’Œä¿®æ”¹çº¿ç¨‹åç§°"></a>2.2 è·å–å’Œä¿®æ”¹çº¿ç¨‹åç§°</h2><ul>
<li><strong>è·å–çº¿ç¨‹IDå’Œçº¿ç¨‹åç§°</strong><ol>
<li>åœ¨Threadçš„å­ç±»ä¸­è°ƒç”¨<code>this.getId()</code>æˆ–<code>this.getName()</code>ã€‚</li>
<li>ä½¿ç”¨<code>Thread.currentThread().getId()</code>å’Œ<code>Thread.currentTread().getName()</code></li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹ç±»</span></span><br><span class="line"><span class="comment"> * è·å–çº¿ç¨‹åæ–¹æ³•æ¼”ç¤º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			<span class="comment">//ç¬¬ä¸€ç§æ–¹æ³•</span></span><br><span class="line">			System.out.println(<span class="string">&quot;çº¿ç¨‹IDï¼š&quot;</span>+<span class="built_in">this</span>.getId()+<span class="string">&quot; &quot;</span>+<span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span>+<span class="built_in">this</span>.getName()+<span class="string">&quot; &quot;</span>+i);</span><br><span class="line">			<span class="comment">//ç¬¬äºŒç§æ–¹æ³•</span></span><br><span class="line">			<span class="comment">//System.out.println(&quot;çº¿ç¨‹IDï¼š&quot;+Thread.currentThread().getId()+&quot; &quot;+&quot;çº¿ç¨‹åï¼š&quot;+Thread.currentThread().getName());</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•çš„çº¿ç¨‹ç±»å¿…é¡»ç»§æ‰¿Threadçˆ¶ç±»ï¼Œå¦åˆ™ä¸èƒ½ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ³•è°ƒç”¨çš„é™æ€æ–¹æ³•currentThreadè¡¨ç¤ºè·å–å½“å‰çº¿ç¨‹ï¼Œå“ªä¸ªçº¿ç¨‹æ‰§è¡Œçš„å½“å‰ä»£ç å°±è·å–è°ã€‚</p>
<p>åœ¨<code>testMyThread</code>ç±»ä¸­<strong>å†æ–°åˆ›å»º</strong>ä¸€ä¸ªçº¿ç¨‹ç±»å¯¹è±¡å¹¶å¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">0</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">0</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">0</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">1</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">1</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">2</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">1</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">2</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">3</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">4</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">5</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">6</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">7</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">8</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šThread-<span class="number">0</span> <span class="number">9</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">3</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">4</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">5</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">6</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">7</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">8</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šThread-<span class="number">1</span> <span class="number">9</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">2</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">3</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">4</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">5</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">6</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">7</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">8</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¿®æ”¹çº¿ç¨‹åç§°</strong></p>
<ol>
<li>è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„<code>setName()</code>æ–¹æ³•ã€‚</li>
<li>ä½¿ç”¨çº¿ç¨‹å­ç±»çš„æ„é€ æ–¹æ³•èµ‹å€¼ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨setNameæ–¹æ³•</span></span><br><span class="line">myThread.setName(<span class="string">&quot;å­çº¿ç¨‹1&quot;</span>);</span><br><span class="line">myThread.start();</span><br><span class="line">myThread2.setName(<span class="string">&quot;å­çº¿ç¨‹2&quot;</span>);</span><br><span class="line">myThread2.start();</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦æ³¨æ„å¿…é¡»åœ¨çº¿ç¨‹å¯åŠ¨ä¹‹å‰ä¿®æ”¹çº¿ç¨‹åï¼Œå¦åˆ™å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//ç•¥</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹ç±»çš„å¸¦å‚æ„é€ æ–¹æ³•è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æŠŠnameèµ‹ç»™çº¿ç¨‹åã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">MyThread myThread=<span class="keyword">new</span> <span class="title class_">MyThread</span>(<span class="string">&quot;å­çº¿ç¨‹1&quot;</span>);</span><br><span class="line">MyThread myThread2=<span class="keyword">new</span> <span class="title class_">MyThread</span>(<span class="string">&quot;å­çº¿ç¨‹2&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨åˆ›å»ºçº¿ç¨‹å¯¹è±¡æ—¶å¯ä»¥ç›´æ¥é€šè¿‡æ„é€ æ–¹æ³•ä¸ºçº¿ç¨‹ä¿®æ”¹åå­—ï¼Œè¿è¡Œåç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">0</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">0</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">1</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">2</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">3</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">4</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">5</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">0</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">6</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">1</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">7</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">1</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">8</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">2</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">11</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">2</span> <span class="number">9</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">2</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">3</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">4</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">5</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">3</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">4</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">5</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">6</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">6</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">7</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">8</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">7</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">9</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">8</span></span><br><span class="line">çº¿ç¨‹IDï¼š<span class="number">10</span> çº¿ç¨‹åï¼šå­çº¿ç¨‹<span class="number">1</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-ä¸€ä¸ªçº¿ç¨‹å°æ¡ˆä¾‹"><a href="#2-3-ä¸€ä¸ªçº¿ç¨‹å°æ¡ˆä¾‹" class="headerlink" title="2.3 ä¸€ä¸ªçº¿ç¨‹å°æ¡ˆä¾‹"></a>2.3 ä¸€ä¸ªçº¿ç¨‹å°æ¡ˆä¾‹</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ç»§æ‰¿Threadç±»å®ç°4ä¸ªçª—å£å„å–100å¼ ç¥¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TicketWin</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> ticket=<span class="number">100</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">TicketWin</span><span class="params">()</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">TicketWin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span>(ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">					ticket--;</span><br><span class="line">					System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©&quot;</span>+ticket+<span class="string">&quot;å¼ ã€‚&quot;</span>);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testTickets</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//å››ä¸ªçª—å£</span></span><br><span class="line">		TicketWin ticketWin1=<span class="keyword">new</span> <span class="title class_">TicketWin</span>(<span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">		TicketWin ticketWin2=<span class="keyword">new</span> <span class="title class_">TicketWin</span>(<span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line">		TicketWin ticketWin3=<span class="keyword">new</span> <span class="title class_">TicketWin</span>(<span class="string">&quot;çª—å£3&quot;</span>);</span><br><span class="line">		TicketWin ticketWin4=<span class="keyword">new</span> <span class="title class_">TicketWin</span>(<span class="string">&quot;çª—å£4&quot;</span>);</span><br><span class="line">		ticketWin1.start();</span><br><span class="line">		ticketWin2.start();</span><br><span class="line">		ticketWin3.start();</span><br><span class="line">		ticketWin4.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä»£ç åç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">99</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">99</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">98</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">2</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">99</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">97</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">96</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">95</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">98</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">94</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">99</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">2</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">98</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">98</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">93</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">97</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">92</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">97</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">2</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">97</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">96</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">91</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">96</span>å¼ ã€‚</span><br><span class="line"><span class="comment">//ç•¥</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-åˆ›å»ºçº¿ç¨‹ï¼ˆäºŒï¼‰"><a href="#2-4-åˆ›å»ºçº¿ç¨‹ï¼ˆäºŒï¼‰" class="headerlink" title="2.4 åˆ›å»ºçº¿ç¨‹ï¼ˆäºŒï¼‰"></a>2.4 åˆ›å»ºçº¿ç¨‹ï¼ˆäºŒï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°Runnableæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ï¼š&quot;</span>+i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testRunnable</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºMyThreadå¯¹è±¡ï¼Œå®ç°runåŠŸèƒ½</span></span><br><span class="line">        MyRunnable myRunnable=<span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹ç±»</span></span><br><span class="line">        Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable, <span class="string">&quot;å­çº¿ç¨‹&quot;</span>);</span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">0</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">0</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">1</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">1</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">2</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">2</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">3</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">3</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">4</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">4</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">5</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">6</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">7</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">8</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">9</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">5</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">6</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">7</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">8</span></span><br><span class="line">ä¸»çº¿ç¨‹ï¼š<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç æ®µä¸­ä½¿ç”¨çš„æ„é€ æ–¹æ³•æ˜¯<code>Thread((Runnable target, String name)</code>ï¼ŒRunnableæ˜¯ä¸€ä¸ªæ¥å£ç±»ï¼Œæ–¹æ³•ä½“åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•runã€‚æ—¢ç„¶å‚æ•°ä¼ è¿›æ¥çš„æ˜¯æ¥å£ç±»ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼ˆå¦‚æœçº¿ç¨‹åªä½¿ç”¨ä¸€æ¬¡ï¼‰:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testRunnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¯è¿è¡Œå¯¹è±¡</span></span><br><span class="line">        Runnable runnable=<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;	</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ï¼š&quot;</span>+i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(runnable, <span class="string">&quot;å­çº¿ç¨‹&quot;</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹ï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-5-Runnableå°æ¡ˆä¾‹"><a href="#2-5-Runnableå°æ¡ˆä¾‹" class="headerlink" title="2.5 Runnableå°æ¡ˆä¾‹"></a>2.5 Runnableå°æ¡ˆä¾‹</h2><ol>
<li><strong>å®ç°å››ä¸ªçª—å£å…±å–100å¼ ç¥¨</strong>ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¥¨ç±»ï¼Œå®ç°ä¹°ç¥¨åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	<span class="type">int</span> ticket=<span class="number">100</span>;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">while</span>(ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©&quot;</span>+(--ticket)+<span class="string">&quot;å¼ ã€‚&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testTicket</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºç¥¨å¯¹è±¡</span></span><br><span class="line">		Ticket ticket=<span class="keyword">new</span> <span class="title class_">Ticket</span>();</span><br><span class="line">		<span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">		Thread w1=<span class="keyword">new</span> <span class="title class_">Thread</span>(ticket,<span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">		Thread w2=<span class="keyword">new</span> <span class="title class_">Thread</span>(ticket,<span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line">		Thread w3=<span class="keyword">new</span> <span class="title class_">Thread</span>(ticket,<span class="string">&quot;çª—å£3&quot;</span>);</span><br><span class="line">		Thread w4=<span class="keyword">new</span> <span class="title class_">Thread</span>(ticket,<span class="string">&quot;çª—å£4&quot;</span>);</span><br><span class="line">		w1.start();</span><br><span class="line">		w2.start();</span><br><span class="line">		w3.start();</span><br><span class="line">		w4.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥è¿™æ ·çš„é€»è¾‘å†™ä»£ç æ˜¯æ²¡æœ‰é”™çš„ï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å¤§å®¶ä¼šå‘ç°æ§åˆ¶å°æ‰“å°çš„ä¼¼ä¹å¹¶æ²¡æœ‰å®ç°â€œå…±äº«â€ï¼Œä½†æœ€ç»ˆéƒ½ä¼šæœ‰æŸä¸€ä¸ªçª—å£å–å®Œç¥¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">99</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">96</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">97</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">2</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">98</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">93</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">94</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">95</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">1</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">89</span>å¼ ã€‚</span><br><span class="line">    ......</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">2</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">1</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">4</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">0</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">3</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">16</span>å¼ ã€‚</span><br><span class="line">çª—å£<span class="number">2</span>å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©<span class="number">17</span>å¼ ã€‚</span><br></pre></td></tr></table></figure>

<ol>
<li>è¿™æ˜¯å› ä¸ºçº¿ç¨‹æ˜¯æŠ¢å¤ºå¼å ç”¨CPUï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä»¥å„è‡ªçš„ä¸å¯é¢„çŸ¥çš„è¿›åº¦æ‰§è¡Œã€‚ç­‰åé¢è®²å®Œçº¿ç¨‹çš„åŒæ­¥ä¹‹åä½ å¯ä»¥å†æ¥ç†è§£è¿™ä¸ªæ¡ˆä¾‹ã€‚</li>
<li><strong>ä»Šå¤©æ˜¯æœˆåˆ</strong>ï¼Œ<strong>ä½ çˆ¸å¾€ä½ é“¶è¡Œå¡å­˜é’±</strong>ï¼Œ<strong>åŒæ—¶ä½ ä»å¡é‡Œå–é’±</strong>ï¼Œ<strong>ä½¿ç”¨ç¨‹åºæ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹</strong>ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é“¶è¡Œå¡ï¼ˆæ™®é€šç±»ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BandCard</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> Money;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMoney</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> Money;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMoney</span><span class="params">(<span class="type">int</span> money)</span> &#123;</span><br><span class="line">		Money = money;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­˜é’±åŠŸèƒ½ï¼ˆåŠŸèƒ½ç±»ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddMoney</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	BandCard card;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">AddMoney</span><span class="params">(BandCard bandCard)</span> &#123;</span><br><span class="line">		card=bandCard;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//å­˜10æ¬¡</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			<span class="comment">//å¾€å¡é‡Œå­˜200</span></span><br><span class="line">			card.setMoney(card.getMoney()+<span class="number">200</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å­˜äº†200å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š&quot;</span>+(card.getMoney()));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–é’±åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubMoney</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	BandCard card;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">SubMoney</span><span class="params">(BandCard bandCard)</span> &#123;</span><br><span class="line">		card=bandCard;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(card.getMoney()&gt;=<span class="number">200</span>) &#123;</span><br><span class="line">				<span class="comment">//å¾€å¡é‡Œå–200</span></span><br><span class="line">				card.setMoney(card.getMoney()-<span class="number">200</span>);</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–äº†200å…ƒï¼Œå¡é‡Œè¿˜å‰©&quot;</span>+card.getMoney());</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="comment">//ä½™é¢ä¸è¶³ï¼Œå›é€€è¿™æ¬¡å–é’±è¿‡ç¨‹ï¼Œå¦åˆ™æœ‰æ•ˆçš„å–é’±æ¬¡æ•°å¯èƒ½ä¸åˆ°10æ¬¡</span></span><br><span class="line">				i--;</span><br><span class="line">				System.out.println(<span class="string">&quot;ä½™é¢ä¸è¶³&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testBankCard</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºé“¶è¡Œå¡å¯¹è±¡</span></span><br><span class="line">		BandCard bandCard=<span class="keyword">new</span> <span class="title class_">BandCard</span>();</span><br><span class="line">		<span class="comment">//åˆ›å»ºåŠŸèƒ½å¯¹è±¡</span></span><br><span class="line">		AddMoney addMoney=<span class="keyword">new</span> <span class="title class_">AddMoney</span>(bandCard);</span><br><span class="line">		SubMoney subMoney=<span class="keyword">new</span> <span class="title class_">SubMoney</span>(bandCard);</span><br><span class="line">		<span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶å¯åŠ¨</span></span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(addMoney,<span class="string">&quot;çˆ¸çˆ¸&quot;</span>).start();</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(subMoney,<span class="string">&quot;æˆ‘&quot;</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä»£ç ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">200</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0</span></span><br><span class="line">ä½™é¢ä¸è¶³</span><br><span class="line">ä½™é¢ä¸è¶³</span><br><span class="line">ä½™é¢ä¸è¶³</span><br><span class="line">ä½™é¢ä¸è¶³</span><br><span class="line">ä½™é¢ä¸è¶³</span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">200</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">400</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">600</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">800</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">1000</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">1000</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">1200</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">1400</span></span><br><span class="line">çˆ¸çˆ¸å­˜äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š<span class="number">1600</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">800</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">1400</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">1200</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">1000</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">800</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">600</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">400</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200</span></span><br><span class="line">æˆ‘å–äº†<span class="number">200</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å½“ç„¶æ¯æ¬¡è¿è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œä¸”å¯ä»¥æ³¨æ„åˆ°æ§åˆ¶å°æ‰“å°çš„æ•°æ®ä¼¼ä¹å¹¶ä¸â€œæ­£ç¡®â€ï¼ŒåŸå› åŒä¸Šä¸€ä¸ªæ¡ˆä¾‹ï¼Œä¸è¿‡æœ€ç»ˆçš„ç»“æœå¡é‡Œè¿˜æ˜¯0å…ƒã€‚è¿™ä¸ªæ¡ˆä¾‹ä¹Ÿå¯ä»¥å†™æˆåŒ¿åå†…éƒ¨ç±»ä»¥å‡å°‘ä»£ç é‡ï¼Œç¼ºç‚¹æ˜¯å¯è¯»æ€§å·®ï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºã€‚</li>
</ol>
<hr>
<h1 id="3-çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€"><a href="#3-çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€" class="headerlink" title="3. çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€"></a>3. çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€</h1><p>çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€å¯ä»¥åˆ†ä¸ºï¼š</p>
<ol>
<li><p><strong>åˆå§‹çŠ¶æ€</strong></p>
<p>å½“çº¿ç¨‹å¯¹è±¡è¢«åˆ›å»ºï¼ˆnewï¼‰ä¹‹åå³ä¸ºåˆå§‹çŠ¶æ€ã€‚</p>
</li>
<li><p><strong>å°±ç»ªçŠ¶æ€</strong></p>
<p>çº¿ç¨‹å¯¹è±¡è°ƒç”¨startæ–¹æ³•ä¹‹åè¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œæ­¤æ—¶åªè¦è·å¾—äº†å¤„ç†å™¨ä¾¿å¯ä»¥ç«‹å³æ‰§è¡Œã€‚</p>
</li>
<li><p><strong>è¿è¡ŒçŠ¶æ€</strong></p>
<p>è·å¾—å¤„ç†å™¨ä¹‹åï¼Œåˆ™è¿›å…¥è¿è¡ŒçŠ¶æ€ï¼Œç›´åˆ°æ‰€åˆ†é…çš„æ—¶é—´ç‰‡ç»“æŸï¼Œç„¶åç»§ç»­è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚</p>
</li>
<li><p><strong>ç­‰å¾…çŠ¶æ€</strong></p>
<p>å› ä¸ºå‘ç”ŸæŸç§äº‹æƒ…è€Œæ— æ³•ç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œä¾‹å¦‚è°ƒç”¨sleepæ–¹æ³•æ—¶çº¿ç¨‹è¿›å…¥é™æœŸç­‰å¾…ï¼Œå› æŸçº¿ç¨‹è°ƒç”¨joinä½¿å½“å‰çº¿ç¨‹è¿›å…¥æ— é™æœŸç­‰å¾…ã€‚ä¸‹ä¸€èŠ‚ä¼šæåˆ°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
</li>
<li><p><strong>ç»ˆæ­¢çŠ¶æ€</strong></p>
<p>ä¸»çº¿ç¨‹ï¼ˆmainï¼‰ç»“æŸæˆ–è€…è¯¥çº¿ç¨‹çš„runæ–¹æ³•ç»“æŸåˆ™è¿›å…¥ç»ˆæ­¢çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾CPUã€‚</p>
</li>
</ol>
<p><img src="https://pic.downk.cc/item/5fa3eef61cd1bbb86b6abe53.png" alt="img"></p>
<h1 id="4-çº¿ç¨‹å¸¸ç”¨æ–¹æ³•"><a href="#4-çº¿ç¨‹å¸¸ç”¨æ–¹æ³•" class="headerlink" title="4. çº¿ç¨‹å¸¸ç”¨æ–¹æ³•"></a>4. çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</h1><ul>
<li><p><code>public static void sleep(long millis)</code></p>
<p>å½“å‰çº¿ç¨‹ä¸»åŠ¨ä¼‘çœ millisæ¯«ç§’ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºsleepçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(i);</span><br><span class="line">			<span class="comment">//ï¼ˆä¸»çº¿ç¨‹ï¼‰æ¯éš”ä¸€ç§’æ‰“å°ä¸€æ¬¡</span></span><br><span class="line">			Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static void yield()</span><br></pre></td></tr></table></figure>

<p>å½“å‰çº¿ç¨‹ä¸»åŠ¨æ”¾å¼ƒæ—¶é—´ç‰‡ï¼Œå›åˆ°å°±ç»ªçŠ¶æ€ï¼Œç«äº‰ä¸‹ä¸€æ¬¡æ—¶é—´ç‰‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºyieldçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ï¼š&quot;</span>+i);</span><br><span class="line">			<span class="comment">//æ‰“å°ä¸€æ¬¡åä¸»åŠ¨æ”¾å¼ƒæ—¶é—´ç‰‡ï¼Œé‡Šæ”¾CPU</span></span><br><span class="line">			Thread.yield();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>åœ¨æµ‹è¯•ç±»é‡Œåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œæ‰€å¾—åˆ°çš„æ‰“å°ç»“æœä¼šæ›´æ¥è¿‘äºäº¤æ›¿æ‰“å°ã€‚</p>
</li>
<li><p><code>public final void join()</code></p>
<p>å…è®¸å…¶ä»–çº¿ç¨‹åŠ å…¥åˆ°å½“å‰çº¿ç¨‹ä¸­ã€‚å½“æŸçº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼ŒåŠ å…¥å¹¶é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°åŠ å…¥çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå½“å‰çº¿ç¨‹æ‰ç»§ç»­æ‰§è¡Œã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºjoinçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ï¼š&quot;</span>+i);			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">		MyRunnable myRunnable=<span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">		Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable,<span class="string">&quot;å­çº¿ç¨‹&quot;</span>);</span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="comment">//åŠ å…¥åˆ°å½“å‰çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹mainï¼‰ï¼Œå¹¶é˜»å¡å½“å‰çº¿ç¨‹</span></span><br><span class="line">		<span class="comment">//å¿…é¡»è¦åœ¨çº¿ç¨‹å¯åŠ¨ä¹‹åè°ƒç”¨</span></span><br><span class="line">		thread.join();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨é‡Šæ‰joinè¿™è¡Œä»£ç ï¼Œå°±å’Œä¹‹å‰è¿è¡Œçš„ç»“æœä¸€æ ·ï¼Œä¸¤ä¸ªçº¿ç¨‹æŠ¢å æ‰§è¡Œï¼›è°ƒç”¨joinä¹‹åç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">å­çº¿ç¨‹ï¼š<span class="number">0</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">1</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">2</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">3</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">4</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">5</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">6</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">7</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">8</span></span><br><span class="line">å­çº¿ç¨‹ï¼š<span class="number">9</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>å­çº¿ç¨‹åŠ å…¥åˆ°ä¸»çº¿ç¨‹å¹¶é˜»å¡äº†ä¸»çº¿ç¨‹ï¼Œå­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰æ¢å¤ä¸»çº¿ç¨‹çš„è¿è¡Œã€‚</p>
</li>
<li><p><code>pubic final void setPriority(int newPriority)</code></p>
<p>æ”¹å˜è¯¥çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œçº¿ç¨‹ä¼˜å…ˆçº§ä¸º1-10ï¼Œé»˜è®¤ä¸º5ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¡¨ç¤ºè·å–CPUæœºä¼šè¶Šå¤šã€‚</p>
<p>æŠŠå‰é¢<code>MyRunnable</code>ç±»ä¸­çš„å¾ªç¯æ¬¡æ•°å†™å¤šä¸€ç‚¹ï¼Œæ¯”å¦‚æ”¹æˆ50æ¬¡ï¼Œç„¶ååœ¨æµ‹è¯•ç±»é‡Œè®¾ç½®ä¼˜å…ˆçº§ï¼š</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testPriority</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		MyRunnable myRunnable=<span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">		Thread t1=<span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable,<span class="string">&quot;å­çº¿ç¨‹1&quot;</span>);</span><br><span class="line">		Thread t2=<span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable,<span class="string">&quot;å­çº¿ç¨‹2&quot;</span>);</span><br><span class="line">		Thread t3=<span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable,<span class="string">&quot;å­çº¿ç¨‹3&quot;</span>);</span><br><span class="line">		t1.setPriority(<span class="number">1</span>);</span><br><span class="line">		t3.setPriority(<span class="number">10</span>);</span><br><span class="line">		t1.start();</span><br><span class="line">		t2.start();</span><br><span class="line">		t3.start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>è¿è¡Œä¹‹åä¼šå‘ç°æ¯æ¬¡è¿è¡Œçš„ç»“æœéƒ½æ˜¯å­çº¿ç¨‹1æœ€åæ‰§è¡Œå®Œï¼Œè¯´æ˜ä¼˜å…ˆçº§è®¾ç½®æˆåŠŸäº†ã€‚</p>
</li>
<li><p><code>public final void setDaemon(boolean on)</code></p>
<p>å¦‚æœå‚æ•°ä¸ºtrueï¼Œåˆ™æ ‡è®°è¯¥çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</p>
<p>åœ¨JAVAä¸­çº¿ç¨‹æœ‰ä¸¤ç±»ï¼š<strong>ç”¨æˆ·çº¿ç¨‹</strong>ï¼ˆå‰å°çº¿ç¨‹ï¼‰ã€<strong>å®ˆæŠ¤çº¿ç¨‹</strong>ï¼ˆåå°çº¿ç¨‹ï¼‰ã€‚å®ˆæŠ¤å¯ä»¥ç†è§£ä¸ºå®ˆæŠ¤ç”¨æˆ·çº¿ç¨‹ã€‚å¦‚æœç¨‹åºä¸­æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•äº†ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šè‡ªåŠ¨ç»“æŸã€‚<strong>åƒåœ¾å›æ”¶çº¿ç¨‹å±äºå®ˆæŠ¤çº¿ç¨‹</strong>ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">50</span>;i++) &#123;</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ï¼š&quot;</span>+i);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">500</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException&#123;</span><br><span class="line">		MyThread thread=<span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="comment">//å¿…é¡»åœ¨startä¹‹å‰è®¾ç½®</span></span><br><span class="line">		thread.setDaemon(<span class="literal">true</span>);</span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			System.out.println(i);</span><br><span class="line">			Thread.sleep(<span class="number">200</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çŸ¥é“çº¿ç¨‹äº‰å¤ºçš„æƒ…å†µï¼Œä½†å½“æŸä¸ªçº¿ç¨‹è¢«è®¾ç½®æˆå®ˆæŠ¤çº¿ç¨‹æ—¶ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line">Thread-<span class="number">0</span>ï¼š<span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">Thread-<span class="number">0</span>ï¼š<span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">Thread-<span class="number">0</span>ï¼š<span class="number">2</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line">Thread-<span class="number">0</span>ï¼š<span class="number">3</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line">Thread-<span class="number">0</span>ï¼š<span class="number">4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å½“ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œå­çº¿ç¨‹åªæ‰“å°äº†4æ¬¡ï¼Œä½†å› ä¸ºå‰è€…çš„ç»“æŸè€Œç»“æŸã€‚</li>
</ul>
<hr>
<h1 id="5-çº¿ç¨‹å®‰å…¨"><a href="#5-çº¿ç¨‹å®‰å…¨" class="headerlink" title="5. çº¿ç¨‹å®‰å…¨"></a>5. çº¿ç¨‹å®‰å…¨</h1><p>è¿™é‡Œæœ‰ä¸€ä¸ªçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå‡è®¾æœ‰Aã€Bä¸¤ä¸ªçº¿ç¨‹ï¼Œä»–ä»¬éƒ½å¾€ä¸€ä¸ªæ•°ç»„ä¸­çš„indexä½ç½®å­˜å…¥ä¸€ä¸ªæ•°æ®å¹¶ä¸”æ‰§è¡Œindex+1ã€‚</p>
<p>Açº¿ç¨‹å­˜å…¥<code>&quot;hello&quot;</code>ï¼Œç„¶åä½¿<code>index++</code>ï¼›Bçº¿ç¨‹å­˜å…¥<code>&quot;world&quot;</code>ï¼Œç„¶åä½¿<code>index++</code>ã€‚å½“è¿™ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œæ—¶ï¼Œæ•°ç»„ä¸­å­˜å…¥çš„ç»“æœä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadSafe</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">		String[] strings=<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">5</span>];</span><br><span class="line">		<span class="comment">//å­˜å…¥hello</span></span><br><span class="line">		Runnable runnableA=<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;		</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">				strings[index]=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">				index++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">//å­˜å…¥world</span></span><br><span class="line">		Runnable runnableB=<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;		</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">				strings[index]=<span class="string">&quot;world&quot;</span>;</span><br><span class="line">				index++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		Thread A=<span class="keyword">new</span> <span class="title class_">Thread</span>(runnableA);</span><br><span class="line">		Thread B=<span class="keyword">new</span> <span class="title class_">Thread</span>(runnableB);</span><br><span class="line">		A.start();</span><br><span class="line">		B.start();</span><br><span class="line">		<span class="comment">//åŠ å…¥ä¸»çº¿ç¨‹ï¼Œç”¨æ¥é˜»å¡ä¸»çº¿ç¨‹ä½¿æœ€åçš„è¾“å‡ºè¯­å¥æœ€åæ‰§è¡Œ</span></span><br><span class="line">		A.join();</span><br><span class="line">		B.join();		</span><br><span class="line">		System.out.println(Arrays.toString(strings));</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤šæ¬¡æ‰§è¡Œä»£ç ï¼Œå‘ç°å¾—åˆ°çš„ç»“æœå¹¶ä¸ä¸€è‡´ï¼Œæœ‰å¯èƒ½å‡ºç°<code>[hello, world, null, null, null]</code>ï¼Œä¹Ÿæœ‰å¯èƒ½å‡ºç°<code>[world, null, null, null, null]</code>ï¼›ä»¥ç¬¬äºŒä¸ªç»“æœä¸ºä¾‹ï¼Œå½“çº¿ç¨‹Aå­˜å…¥helloä¹‹åï¼ŒCPUé©¬ä¸Šå°±è¢«çº¿ç¨‹Bæ‰€æŠ¢å¤ºï¼ŒBå­˜å…¥äº†worldè¦†ç›–äº†Aå­˜å…¥çš„helloï¼Œè¿™ä¹‹åæ‰æ‰§è¡Œäº†å„è‡ªçš„<code>index++</code>ã€‚</p>
<p><strong>å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼š</p>
<ul>
<li><p>å½“å¤šçº¿ç¨‹å¹¶å‘è®¿é—®</p>
<p>ä¸´ç•Œèµ„æº</p>
<p>æ—¶ï¼Œå¦‚æœç ´åäº†</p>
<p>åŸå­æ“ä½œ</p>
<p>ï¼Œå¯èƒ½ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚</p>
<ul>
<li>ä¸´ç•Œèµ„æºï¼šå…±äº«èµ„æºï¼ˆå¯¹äºåŒä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œæ‰å¯ä»¥ä¿è¯å…¶æ­£ç¡®æ€§ã€‚</li>
<li>åŸå­æ“ä½œï¼šä¸å¯åˆ†å‰²çš„å¤šæ­¥æ“ä½œï¼Œè¢«è§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå…¶é¡ºåºå’Œæ­¥éª¤ä¸å¯æ‰“ä¹±æˆ–ç¼ºçœï¼Œæ¯”å¦‚ä¸Šä¸€æ®µä»£ç çš„å­˜helloå’Œå­˜worldåº”å½“è¢«çœ‹æˆä¸¤ä¸ªåŸå­æ“ä½œã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>è¡¥å……ï¼š</p>
<p><strong>ä¸´ç•Œèµ„æºå’Œä¸´ç•ŒåŒº</strong>ï¼ˆé’ˆå¯¹çº¿ç¨‹è€Œè¨€ï¼‰ï¼š</p>
<p>çº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šä¸åŒä¸€è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹å…±äº«èµ„æºï¼ŒæŠŠåŒæ—¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨çš„èµ„æºç§°ä¸ºä¸´ç•Œèµ„æºã€‚ä¸ºäº†ä¿è¯ä¸´ç•Œèµ„æºçš„æ­£ç¡®ä½¿ç”¨ï¼Œå¯ä»¥æŠŠä¸´ç•Œèµ„æºçš„è®¿é—®åˆ†æˆä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>è¿›å…¥åŒº</strong>ã€‚ä¸ºäº†è¿›å…¥ä¸´ç•ŒåŒºä½¿ç”¨ä¸´ç•Œèµ„æºï¼Œåœ¨è¿›å…¥åŒºè¦æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼›å¦‚æœå¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œé€šå¸¸è®¾ç½®ç›¸åº”çš„â€œæ­£åœ¨è®¿é—®ä¸´ç•ŒåŒºâ€æ ‡å¿—ï¼Œä»¥é˜»æ­¢å…¶ä»–çº¿ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºã€‚</li>
<li><strong>ä¸´ç•ŒåŒº</strong>ã€‚<strong>çº¿ç¨‹ç”¨äºè®¿é—®ä¸´ç•Œèµ„æºçš„ä»£ç </strong>ï¼Œ<strong>åˆç§°ä¸´ç•Œæ®µ</strong>ã€‚</li>
<li><strong>é€€å‡ºåŒº</strong>ã€‚ä¸´ç•ŒåŒºåç”¨äºå°†â€œæ­£åœ¨è®¿é—®ä¸´ç•ŒåŒºâ€æ ‡å¿—æ¸…é™¤éƒ¨åˆ†ã€‚</li>
<li>å‰©ä½™åŒºã€‚çº¿ç¨‹ä¸­é™¤ä¸Šè¿°3éƒ¨åˆ†ä»¥å¤–çš„å…¶ä»–éƒ¨åˆ†ã€‚</li>
</ol>
<p>ç®€å•æ¥è¯´ï¼Œä¸´ç•Œèµ„æºæ˜¯ä¸€ç§ç³»ç»Ÿèµ„æºï¼Œéœ€è¦ä¸åŒçš„çº¿ç¨‹äº’æ–¥è®¿é—®ï¼Œä¾‹å¦‚å‰æ–‡ä»£ç ä¸­çš„æ•°ç»„ï¼›è€Œä¸´ç•ŒåŒºåˆ™æ˜¯æ¯ä¸ªçº¿ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„ä¸€æ®µä»£ç ï¼Œæ˜¯å±äºå¯¹åº”çº¿ç¨‹çš„ï¼Œå‰æ–‡ä»£ç ä¸­çš„å­˜helloå’Œå­˜worldå°±å¯ä»¥çœ‹æˆæ˜¯ä¸¤ä¸ªä¸´ç•ŒåŒºï¼Œä¸´ç•ŒåŒºå‰åéœ€è¦è®¾ç½®è¿›å…¥åŒºå’Œé€€å‡ºåŒºä»¥è¿›è¡Œæ£€æŸ¥å’Œæ¢å¤ã€‚</p>
</blockquote>
<p>JAVAä¸­ï¼Œåœ¨ç¨‹åºåº”ç”¨é‡Œè¦ä¿è¯çº¿ç¨‹çš„å®‰å…¨æ€§å°±éœ€è¦ç”¨åˆ°<strong>åŒæ­¥ä»£ç å—</strong>ã€‚</p>
<h2 id="5-1-åŒæ­¥æ–¹å¼ï¼ˆ1ï¼‰"><a href="#5-1-åŒæ­¥æ–¹å¼ï¼ˆ1ï¼‰" class="headerlink" title="5.1 åŒæ­¥æ–¹å¼ï¼ˆ1ï¼‰"></a>5.1 åŒæ­¥æ–¹å¼ï¼ˆ1ï¼‰</h2><ul>
<li>åŒæ­¥ä»£ç å—ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹ä¸´ç•Œèµ„æºå¯¹è±¡åŠ é”</span></span><br><span class="line"><span class="keyword">synchronized</span>(ä¸´ç•Œèµ„æºå¯¹è±¡)&#123;</span><br><span class="line">    <span class="comment">//ä»£ç ï¼ˆåŸå­æ“ä½œï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠŠä¸Šæ–‡å­˜helloå’Œå­˜worldä¸¤ä¸ªä¸´ç•ŒåŒºæ”¾è¿›åŒæ­¥ä»£ç å—ä¸­å°±å¯ä»¥ä¿è¯è¾“å‡ºç»“æœä¸ä¼šå‡ºç°è¦†ç›–çš„æƒ…å†µï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (strings) &#123;</span><br><span class="line">    strings[index]=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    index++;</span><br><span class="line">&#125;			</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (strings) &#123;</span><br><span class="line">    strings[index]=<span class="string">&quot;world&quot;</span>;</span><br><span class="line">    index++;</span><br><span class="line">&#125;			</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å°±èƒ½è§£å†³ä¹‹å‰çš„å–ç¥¨å°æ¡ˆä¾‹ï¼Œä½ å¯ä»¥ä»ç›®å½•è·³è½¬åˆ°Runnableå°æ¡ˆä¾‹ï¼Œå¹¶ä½¿ç”¨åŒæ­¥ä»£ç å—æ¥å®ç°äº’æ–¥è®¿é—®ç¥¨è¿™ä¸ªä¸´ç•Œèµ„æºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨ï¼šè¿™ä¸ªé”å¯ä»¥æ˜¯ä»»æ„ä¸€ç§å¯¹è±¡ï¼Œä½†ä¸èƒ½ç›´æ¥åœ¨é‡Œé¢new</span></span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(ticket&gt;<span class="number">0</span>) &#123;			</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©&quot;</span>+(--ticket)+<span class="string">&quot;å¼ ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡è¿è¡Œä½ å°±èƒ½çœ‹åˆ°æœŸæœ›çš„ç»“æœï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºã€‚</p>
<blockquote>
<p>æ³¨ï¼š</p>
<p><strong>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªäº’æ–¥é”æ ‡è®°</strong>ï¼Œ<strong>ç”¨æ¥åˆ†é…ç»™çº¿ç¨‹çš„</strong>ã€‚</p>
<p>åªæœ‰æ‹¥æœ‰å¯¹è±¡äº’æ–¥é”æ ‡è®°çš„çº¿ç¨‹ï¼Œæ‰èƒ½è¿›å…¥å¯¹è¯¥å¯¹è±¡åŠ é”çš„åŒæ­¥ä»£ç å—ã€‚</p>
<p>çº¿ç¨‹é€€å‡ºåŒæ­¥ä»£ç å—æ—¶ï¼Œä¼šé‡Šæ”¾ç›¸åº”çš„äº’æ–¥é”æ ‡è®°ã€‚</p>
</blockquote>
<p>å‰æ–‡çš„é“¶è¡Œå¡å­˜å–æ¡ˆä¾‹åŒæ ·ä¹Ÿèƒ½è§£å†³äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å–é’±</span></span><br><span class="line"><span class="keyword">synchronized</span> (card) &#123;</span><br><span class="line">    <span class="keyword">if</span>(card.getMoney()&gt;=<span class="number">200</span>) &#123;</span><br><span class="line">        card.setMoney(card.getMoney()-<span class="number">200</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–äº†200å…ƒï¼Œå¡é‡Œè¿˜å‰©&quot;</span>+card.getMoney());</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        i--;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½™é¢ä¸è¶³&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;			</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å­˜é’±</span></span><br><span class="line"><span class="keyword">synchronized</span> (card) &#123;</span><br><span class="line">    card.setMoney(card.getMoney()+<span class="number">200</span>);</span><br><span class="line">    System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å­˜äº†200å…ƒï¼Œå¡é‡Œä½™é¢ä¸ºï¼š&quot;</span>+(card.getMoney()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>è¿è¡Œä¸€ä¸‹ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p>
</li>
<li><p><strong>çº¿ç¨‹çš„çŠ¶æ€</strong>ï¼ˆ<strong>é˜»å¡</strong>ï¼‰</p>
<p><img src="https://pic.downk.cc/item/5fa412151cd1bbb86b73a644.png" alt="img"></p>
<p>å½“çº¿ç¨‹è®¿é—®ä¸´ç•ŒåŒºï¼ˆåŒæ­¥å—ä»£ç ï¼‰æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ‹¿åˆ°è®¿é—®é”ï¼Œä¾¿è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</p>
</li>
</ul>
<h2 id="5-2-çº¿ç¨‹åŸºæœ¬çŠ¶æ€ï¼ˆæºç è¡¥å……ï¼‰"><a href="#5-2-çº¿ç¨‹åŸºæœ¬çŠ¶æ€ï¼ˆæºç è¡¥å……ï¼‰" class="headerlink" title="5.2 çº¿ç¨‹åŸºæœ¬çŠ¶æ€ï¼ˆæºç è¡¥å……ï¼‰"></a>5.2 çº¿ç¨‹åŸºæœ¬çŠ¶æ€ï¼ˆæºç è¡¥å……ï¼‰</h2><p>åœ¨JDK1.5ä¹‹åï¼ŒæŠŠå°±ç»ªçŠ¶æ€å’Œè¿è¡ŒçŠ¶æ€åˆæˆäº†ä¸€ä¸ªRunnableçŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡<code>public Thread.State getState()</code>æ–¹æ³•è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æºç æ¥æŸ¥çœ‹ä¸€ä¸‹è¿™å‡ ä¸ªçŠ¶æ€ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    NEW,</span><br><span class="line">    RUNNABLE,</span><br><span class="line">    BLOCKED,</span><br><span class="line">    WAITING,</span><br><span class="line">    TIMED_WAITING,</span><br><span class="line">    TERMINATED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªStateè¿”å›ç±»å‹å®é™…ä¸Šä¸€ä¸ªæšä¸¾ç±»ã€‚</p>
<ul>
<li><p><strong>NEW</strong> åˆå§‹çŠ¶æ€</p>
<p>çº¿ç¨‹è¿˜æ²¡æœ‰å¯åŠ¨æ—¶çš„çŠ¶æ€ã€‚</p>
</li>
<li><p><strong>RUNNABLE</strong> å°±ç»ªçŠ¶æ€å’Œæ‰§è¡ŒçŠ¶æ€</p>
<p>çº¿ç¨‹å¯åŠ¨æ—¶çš„çŠ¶æ€ã€‚çº¿ç¨‹è¢«JVMæ‰€æ‰§è¡Œä½†å®ƒè¿˜å¯èƒ½éœ€è¦ä¸€äº›æ¥è‡ªæ“ä½œç³»ç»Ÿçš„å…¶ä»–èµ„æºæ‰èƒ½æ‰§è¡Œã€‚</p>
</li>
<li><p><strong>BLOCKED</strong> é˜»å¡çŠ¶æ€</p>
<p>çº¿ç¨‹è¢«ä¸€ä¸ªç›‘å¬é”æ‰€é˜»å¡æ—¶çš„çŠ¶æ€ã€‚</p>
</li>
<li><p><strong>WAITING</strong> ï¼ˆæ— æœŸé™ï¼‰ç­‰å¾…çŠ¶æ€</p>
<p>çº¿ç¨‹æ­£åœ¨ç­‰å¾…æ—¶çš„çŠ¶æ€ã€‚çº¿ç¨‹è¢«ä»¥ä¸‹æ–¹æ³•æ‰€è°ƒç”¨å°±ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼š</p>
<ul>
<li><code>Object.wait</code>æ— å‚æ–¹æ³•</li>
<li><code>Thread.join</code>æ— å‚æ–¹æ³•</li>
<li><code>LockSupport.park</code></li>
</ul>
<p>waitæ–¹æ³•å¯ä»¥è®©å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œéœ€è¦å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤çº¿ç¨‹å¯¹è±¡çš„notifyæ–¹æ³•æˆ–è€…notifyAllæ–¹æ³•æ¥å”¤é†’æ­¤çº¿ç¨‹ï¼›è°ƒç”¨joinæ–¹æ³•çš„çº¿ç¨‹éœ€è¦ç­‰åˆ°è¢«è°ƒç”¨çº¿ç¨‹ç»ˆæ­¢æ‰èƒ½ç»“æŸç­‰å¾…çŠ¶æ€ã€‚</p>
</li>
<li><p><strong>TIMED_WAITING</strong> æœ‰é™ç­‰å¾…çŠ¶æ€</p>
<p>çº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´åæ‰èƒ½ç»“æŸç­‰å¾…çš„ä¸€ç§ç­‰å¾…çŠ¶æ€ã€‚æ˜¯ç”±äºè°ƒç”¨äº†ä»¥ä¸‹æ–¹æ³•æ‰€å¼•èµ·çš„ä¸€ç§çŠ¶æ€ï¼š</p>
<ul>
<li><code>Thread.sleep</code></li>
<li><code>Object.wait</code>å¸¦å‚æ–¹æ³•</li>
<li><code>Thread.join</code>å¸¦å‚æ–¹æ³•</li>
<li><code>LockSupport.parkNanos</code></li>
<li><code>LockSupport.parkUntil</code></li>
</ul>
</li>
<li><p><strong>TERMINATED</strong> ç»ˆæ­¢çŠ¶æ€</p>
<p>çº¿ç¨‹ç»ˆæ­¢æ—¶çš„çŠ¶æ€ã€‚è¯¥çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</p>
</li>
</ul>
<h2 id="5-3-åŒæ­¥æ–¹å¼ï¼ˆ2ï¼‰"><a href="#5-3-åŒæ­¥æ–¹å¼ï¼ˆ2ï¼‰" class="headerlink" title="5.3 åŒæ­¥æ–¹å¼ï¼ˆ2ï¼‰"></a>5.3 åŒæ­¥æ–¹å¼ï¼ˆ2ï¼‰</h2><ul>
<li><strong>åŒæ­¥æ–¹æ³•</strong>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹å½“å‰å¯¹è±¡ï¼ˆthisï¼‰åŠ é”</span></span><br><span class="line"><span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•åç§°ï¼ˆå½¢å‚åˆ—è¡¨ï¼‰&#123;</span><br><span class="line">    <span class="comment">//ä»£ç ï¼ˆåŸå­æ“ä½œï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨è¿™ç§åŒæ­¥æ–¹å¼æ”¹å†™2.5èŠ‚ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ˆä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span>(ticket&gt;<span class="number">0</span>) &#123;			</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–å‡ºäº†ä¸€å¼ ç¥¨ï¼Œè¿˜å‰©&quot;</span>+(--ticket)+<span class="string">&quot;å¼ ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å¾—åˆ°çš„ä¹Ÿæ˜¯ä¸€æ ·çš„æ­£ç¡®ç»“æœã€‚åœ¨è¿™ä¸ªåŒæ­¥æ–¹æ³•ä¸­ï¼Œé”å°±æ˜¯<code>this</code>å½“å‰å¯¹è±¡ï¼›å¦‚æœæ˜¯é™æ€ç±»ï¼Œé‚£ä¹ˆé”å°±æ˜¯ç±»å¯¹è±¡ï¼Œå°±ç›¸å½“äºåœ¨åŒæ­¥ä»£ç å—çš„æ‹¬å·é‡Œå†™<code>XXX.class</code>ï¼ŒXXXä»£è¡¨å½“å‰çš„ç±»ã€‚</p>
<blockquote>
<p>æ³¨ï¼š</p>
<p>åªæœ‰æ‹¥æœ‰å¯¹è±¡äº’æ–¥é”æ ‡è®°çš„çº¿ç¨‹ï¼Œæ‰èƒ½è¿›å…¥è¯¥å¯¹è±¡åŠ é”çš„åŒæ­¥æ–¹æ³•ä¸­ã€‚çº¿ç¨‹é€€å‡ºåŒæ­¥æ–¹æ³•æ—¶ï¼Œä¼šé‡Šæ”¾ç›¸åº”çš„äº’æ–¥é”æ ‡è®°ã€‚</p>
</blockquote>
</li>
<li><p><strong>åŒæ­¥è§„åˆ™</strong></p>
<ul>
<li><p>åªæœ‰åœ¨è°ƒç”¨åŒ…å«åŒæ­¥ä»£ç å—çš„æ–¹æ³•ï¼Œæˆ–è€…åŒæ­¥æ–¹æ³•æ—¶ï¼Œæ‰éœ€è¦å¯¹è±¡çš„é”æ ‡è®°ã€‚</p>
<p>ä¸´ç•ŒåŒºï¼ˆäº’æ–¥æ‰§è¡Œï¼‰æ‰éœ€è¦åŠ é”ã€‚</p>
</li>
<li><p>å¦‚è°ƒç”¨ä¸åŒ…å«åŒæ­¥ä»£ç å—çš„æ–¹æ³•ï¼Œæˆ–æ™®é€šæ–¹æ³•æ—¶ï¼Œåˆ™ä¸éœ€è¦é”æ ‡è®°ï¼Œå¯ç›´æ¥è°ƒç”¨ã€‚</p>
</li>
<li><p>å·²çŸ¥JDKä¸­çº¿ç¨‹å®‰å…¨çš„ç±»ï¼š</p>
<ul>
<li>StringBuffer</li>
<li>Vector</li>
<li>Hashtable</li>
<li>ä»¥ä¸Šç±»ä¸­çš„å…¬å¼€æ–¹æ³•ï¼Œå‡ä¸ºsynchronizedä¿®é¥°çš„åŒæ­¥æ–¹æ³•ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-4-ç»å…¸é—®é¢˜ï¼ˆæ­»é”ï¼‰"><a href="#5-4-ç»å…¸é—®é¢˜ï¼ˆæ­»é”ï¼‰" class="headerlink" title="5.4 ç»å…¸é—®é¢˜ï¼ˆæ­»é”ï¼‰"></a>5.4 ç»å…¸é—®é¢˜ï¼ˆæ­»é”ï¼‰</h2><p><strong>æ­»é”</strong>ï¼š</p>
<ul>
<li>å½“ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰Aå¯¹è±¡é”æ ‡è®°ï¼Œå¹¶ç­‰å¾…Bå¯¹è±¡é”æ ‡è®°ï¼ŒåŒæ—¶ç¬¬äºŒä¸ªçº¿ç¨‹æ‹¥æœ‰Bå¯¹è±¡é”æ ‡è®°ï¼Œå¹¶ç­‰å¾…Aå¯¹è±¡é”æ ‡è®°æ—¶ï¼Œäº§ç”Ÿæ­»é”ã€‚</li>
<li>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªå¯¹è±¡çš„é”æ ‡è®°ï¼Œå½“çº¿ç¨‹é˜»å¡æ—¶ï¼Œä¸ä¼šé‡Šæ”¾å·²ç»æ‹¥æœ‰çš„é”æ ‡è®°ï¼Œç”±æ­¤å¯èƒ½é€ æˆæ­»é”ã€‚</li>
</ul>
<blockquote>
<p>è¡¥å……ï¼š</p>
<p><strong>æ­»é”çš„æ¦‚å¿µ</strong>ï¼ˆå¯¹äºçº¿ç¨‹ï¼‰ï¼š</p>
<p>å½“å¤šä¸ªçº¿ç¨‹å› ç«äº‰ç³»ç»Ÿèµ„æºæˆ–äº’ç›¸é€šä¿¡è€Œå¤„äºåŠæ°¸ä¹…é˜»å¡çŠ¶æ€æ—¶ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œè¿™äº›çº¿ç¨‹éƒ½å°†æ— æ³•å‘å‰æ¨è¿›ã€‚è¿™äº›çº¿ç¨‹ä¸­çš„æ¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå‡æ— é™æœŸåœ°ç­‰å¾…æ­¤ç»„çº¿ç¨‹ä¸­æŸä¸ªå…¶ä»–çº¿ç¨‹å ç”¨çš„ã€è‡ªå·±æ°¸è¿œæ— æ³•å¾—åˆ°çš„èµ„æºï¼Œè¿™ç§ç°è±¡ç§°ä¸ºæ­»é”ã€‚</p>
<p><strong>èµ„æºåˆ†ç±»</strong>ï¼š</p>
<p>ç°ä»£æ“ä½œç³»ç»Ÿæ‰€ç®¡ç†çš„èµ„æºç±»å‹ååˆ†ä¸°å¯Œï¼Œå¹¶ä¸”å¯ä»¥ä»ä¸åŒè§’åº¦å‡ºå‘å¯¹å…¶è¿›è¡Œåˆ†ç±»ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥æŠŠèµ„æºåˆ†ä¸ºå¯å‰¥å¤ºèµ„æºå’Œä¸å¯å‰¥å¤ºèµ„æºã€‚</p>
<ul>
<li><strong>å¯å‰¥å¤ºèµ„æº</strong>æ˜¯æŒ‡è™½ç„¶èµ„æºå æœ‰è€…çº¿ç¨‹éœ€è¦ä½¿ç”¨è¯¥èµ„æºï¼Œä½†å¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¼ºè¡ŒæŠŠè¯¥èµ„æºä»å æœ‰è€…çº¿ç¨‹å¤„å‰¥å¤ºè¿‡æ¥è‡ªå·±ä½¿ç”¨ã€‚</li>
<li><strong>ä¸å¯å‰¥å¤ºèµ„æº</strong>æ˜¯æŒ‡<strong>é™¤é</strong>å æœ‰è€…çº¿ç¨‹ä¸å†éœ€è¦ä½¿ç”¨è¯¥èµ„æºè€Œä¸»åŠ¨é‡Šæ”¾èµ„æºï¼Œå¦åˆ™å…¶ä»–çº¿ç¨‹ä¸å¾—åœ¨å æœ‰è€…çº¿ç¨‹ä½¿ç”¨èµ„æºè¿‡ç¨‹ä¸­å¼ºè¡Œå‰¥å¤ºã€‚</li>
</ul>
<p>æ­»é”äº§ç”Ÿçš„åŸå› æ˜¯<strong>ç«äº‰èµ„æº</strong>ã€‚å¯å‰¥å¤ºèµ„æºçš„ç«äº‰ä¸ä¼šå¼•èµ·æ­»é”ã€‚æ›´è¿›ä¸€æ­¥çœ‹ï¼Œæ­»é”äº§ç”Ÿçš„åŸå› æ˜¯<strong>ç³»ç»Ÿèµ„æºä¸è¶³</strong>å’Œçº¿ç¨‹<strong>æ¨è¿›é¡ºåºä¸å½“</strong>ï¼›åè€…æ˜¯é‡è¦åŸå› è€Œå‰è€…æ˜¯æ ¹æœ¬åŸå› ã€‚</p>
</blockquote>
<p>é€šè¿‡ä¸€ä¸ªå°æ¡ˆä¾‹æ¥æ¼”ç¤ºæ­»é”çš„äº§ç”Ÿï¼Œå‡å¦‚ä¸¤ä¸ªäººAå’ŒBåœ¨æ¡Œå­ä¸ŠåŒæ—¶åƒé¥­ï¼Œæ¡Œä¸Šåªæœ‰ä¸€åŒç­·å­ï¼Œå½“ä¸€ä¸ªäººæ‹¥æœ‰ä¸¤æ ¹ç­·å­çš„æ—¶å€™æ‰èƒ½åƒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é”å¯¹è±¡ï¼ˆç­·å­ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Chopsticks</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testChopsticks</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºä¸¤ä¸ªé”å¯¹è±¡ï¼ˆä¸¤æ ¹ç­·å­ï¼‰</span></span><br><span class="line">		Chopsticks chopsticks1=<span class="keyword">new</span> <span class="title class_">Chopsticks</span>();</span><br><span class="line">		Chopsticks chopsticks2=<span class="keyword">new</span> <span class="title class_">Chopsticks</span>();</span><br><span class="line">		</span><br><span class="line">		Runnable A=<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;		</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">				<span class="comment">//æŒæœ‰ç¬¬ä¸€æ ¹ç­·å­</span></span><br><span class="line">				<span class="keyword">synchronized</span> (chopsticks1) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;Aæ‹¿åˆ°äº†ä¸€æ ¹ç­·å­ã€‚&quot;</span>);</span><br><span class="line">					<span class="comment">//æŒæœ‰ç¬¬äºŒæ ¹ç­·å­</span></span><br><span class="line">					<span class="keyword">synchronized</span> (chopsticks2) &#123;</span><br><span class="line">						System.out.println(<span class="string">&quot;Aæ‹¿åˆ°äº†ä¸¤æ ¹ç­·å­ï¼Œå¼€å§‹æ°é¥­ã€‚&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		</span><br><span class="line">		Runnable B=<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;		</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">				<span class="comment">//æŒæœ‰ç¬¬ä¸€æ ¹ç­·å­</span></span><br><span class="line">				<span class="keyword">synchronized</span> (chopsticks2) &#123;</span><br><span class="line">					System.out.println(<span class="string">&quot;Bæ‹¿åˆ°äº†ä¸€æ ¹ç­·å­ã€‚&quot;</span>);</span><br><span class="line">					<span class="comment">//æŒæœ‰ç¬¬äºŒæ ¹ç­·å­</span></span><br><span class="line">					<span class="keyword">synchronized</span> (chopsticks1) &#123;</span><br><span class="line">						System.out.println(<span class="string">&quot;Bæ‹¿åˆ°äº†ä¸¤æ ¹ç­·å­ï¼Œå¼€å§‹æ°é¥­ã€‚&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(A).start();</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(B).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä¹‹åç¨‹åºè¿›å…¥æ­»é”çŠ¶æ€ï¼Œå¹¶ä¸”æ— é™æœŸåœ°ç­‰å¾…ä¸‹å»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ§åˆ¶å°æ‰“å°ï¼ˆç¨‹åºæœªç»“æŸï¼‰</span></span><br><span class="line">Bæ‹¿åˆ°äº†ä¸€æ ¹ç­·å­ã€‚</span><br><span class="line">Aæ‹¿åˆ°äº†ä¸€æ ¹ç­·å­ã€‚</span><br></pre></td></tr></table></figure>

<p>Aå’ŒBå„æŒæœ‰ä¸€æ ¹ç­·å­ï¼Œå¹¶ä¸”éƒ½åœ¨ç­‰å¾…å¯¹æ–¹çš„ä¸€æ ¹ç­·å­ï¼Œå¯¼è‡´ä¸¤ä¸ªäººéƒ½åƒä¸äº†é¥­ã€‚å¯ä»¥é€šè¿‡sleepæ–¹å¼ä½¿å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ä¼‘çœ ä¸€å°ä¼šï¼ŒAï¼ˆBï¼‰åƒå®ŒBï¼ˆAï¼‰å†åƒï¼›æˆ–è€…æŠŠAï¼ˆBï¼‰åŒæ­¥ä»£ç å—ä¸­çš„é”æ¢ä¸€ä¸‹ä½ç½®ï¼Œä¸€å¼€å§‹ä¸¤ä¸ªäººéƒ½æŠ¢åŒä¸€æ ¹ç­·å­ï¼Œæ²¡æŠ¢åˆ°çš„å°±ç­‰å¦ä¸€ä¸ªåƒå®Œé¥­ã€‚</p>
<h2 id="5-5-çº¿ç¨‹é€šä¿¡"><a href="#5-5-çº¿ç¨‹é€šä¿¡" class="headerlink" title="5.5 çº¿ç¨‹é€šä¿¡"></a>5.5 çº¿ç¨‹é€šä¿¡</h2><p>åœ¨2.5èŠ‚ä¸­çš„ç¬¬äºŒä¸ªæ¡ˆä¾‹é“¶è¡Œå¡å­˜å–ä¸­ï¼Œæ‰“å°å‡ºäº†å¾ˆå¤šä½™é¢ä¸è¶³ï¼Œå–é’±çº¿ç¨‹åœ¨é“¶è¡Œå¡é‡Œæ²¡é’±æ—¶ä¹Ÿåœ¨ä¸åœåœ°å–é’±ï¼Œä¸ºäº†è®©å–é’±çº¿ç¨‹åªåœ¨é“¶è¡Œå¡é‡Œæœ‰é’±æ—¶å†å–ï¼Œå°±éœ€è¦å®ç°çº¿ç¨‹é—´é€šä¿¡ã€‚</p>
<ul>
<li><p>ç­‰å¾…</p>
<p>ï¼š</p>
<ul>
<li><code>public final void wait()</code></li>
<li><code>public final void wait(long timeout)</code></li>
<li>å¿…é¡»åœ¨å¯¹objåŠ é”çš„åŒæ­¥ä»£ç å—ä¸­è°ƒç”¨ã€‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œè°ƒç”¨<code>obj.wait()</code>æ—¶ï¼Œæ­¤çº¿ç¨‹ä¼šé‡Šæ”¾å…¶æ‹¥æœ‰çš„æ‰€æœ‰é”æ ‡è®°ã€‚åŒæ—¶æ­¤çº¿ç¨‹é˜»å¡åœ¨objçš„ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯é‡Šæ”¾é”ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚</li>
</ul>
</li>
<li><p>é€šçŸ¥</p>
<p>ï¼š</p>
<ul>
<li><code>public final void notify()</code></li>
<li><code>public final void notifyAll()</code></li>
<li>è¿›å…¥ç­‰å¾…çš„çº¿ç¨‹éœ€è¦å…¶ä»–çº¿ç¨‹è°ƒç”¨è¯¥çº¿ç¨‹çš„é€šçŸ¥æ–¹æ³•æ¥å°†å…¶å”¤é†’ã€‚</li>
</ul>
</li>
</ul>
<p>è¿˜æ˜¯é“¶è¡Œå¡å­˜å–æ¡ˆä¾‹ï¼Œæ­¤å¤„åº”ç”¨çº¿ç¨‹é€šä¿¡å†æ¥æ¼”ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é“¶è¡Œå¡ï¼ˆæ™®é€šç±»ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BandCard</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> Money;</span><br><span class="line">    <span class="comment">//æ ‡å¿—ï¼Œtrueè¡¨ç¤ºå¡é‡Œæœ‰é’±-å¯å–ï¼Œfalseè¡¨ç¤ºæ— é’±-å¯å­˜</span></span><br><span class="line">    <span class="type">boolean</span> flag=<span class="literal">false</span>;	</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">double</span> money)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">//æœ‰é’±ä¸ç”¨å­˜</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="comment">//è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼ˆé”.waitï¼‰ï¼ŒåŒæ—¶é‡Šæ”¾é”å’ŒCPU</span></span><br><span class="line">            <span class="built_in">this</span>.wait();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.Money+=money;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ çˆ¸å­˜äº†&quot;</span>+money+<span class="string">&quot;å…ƒï¼Œå¡é‡Œè¿˜å‰©&quot;</span>+<span class="built_in">this</span>.Money+<span class="string">&quot;å…ƒã€‚&quot;</span>);</span><br><span class="line">        <span class="comment">//å­˜å®Œä¹‹åå¡é‡Œæœ‰é’±</span></span><br><span class="line">        flag=<span class="literal">true</span>;</span><br><span class="line">        <span class="comment">//å”¤é†’å–é’±çº¿ç¨‹</span></span><br><span class="line">        <span class="built_in">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">take</span><span class="params">(<span class="type">double</span> money)</span> <span class="keyword">throws</span> InterruptedException &#123;	</span><br><span class="line">        <span class="comment">//æ²¡é’±ä¸èƒ½å–</span></span><br><span class="line">        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">            <span class="built_in">this</span>.wait();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.Money-=money;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å–äº†&quot;</span>+money+<span class="string">&quot;å…ƒï¼Œå¡é‡Œè¿˜å‰©&quot;</span>+<span class="built_in">this</span>.Money+<span class="string">&quot;å…ƒã€‚&quot;</span>);</span><br><span class="line">        flag=<span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//å”¤é†’å­˜é’±çº¿ç¨‹</span></span><br><span class="line">        <span class="built_in">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­˜é’±åŠŸèƒ½ï¼ˆåŠŸèƒ½ç±»ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddMoney</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    BandCard card;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AddMoney</span><span class="params">(BandCard bandCard)</span> &#123;</span><br><span class="line">        card=bandCard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å­˜10æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                card.put(<span class="number">200</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–é’±åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubMoney</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    BandCard card;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SubMoney</span><span class="params">(BandCard bandCard)</span> &#123;</span><br><span class="line">        card=bandCard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å–10æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                card.take(<span class="number">200</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testBankCard</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé“¶è¡Œå¡å¯¹è±¡</span></span><br><span class="line">        BandCard bandCard=<span class="keyword">new</span> <span class="title class_">BandCard</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ“ä½œ</span></span><br><span class="line">        AddMoney addMoney=<span class="keyword">new</span> <span class="title class_">AddMoney</span>(bandCard);</span><br><span class="line">        SubMoney subMoney=<span class="keyword">new</span> <span class="title class_">SubMoney</span>(bandCard);</span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶å¯åŠ¨</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(addMoney).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(subMoney).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œåå¾—åˆ°å¦‚ä¸‹æ­£ç¡®äº¤æ›¿ç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br></pre></td></tr></table></figure>

<p><strong>å¤šå­˜å¤šå–é—®é¢˜ï¼š</strong></p>
<p>ä½†æ˜¯å¦‚æœå¾€ä»£ç ä¸­å†åŠ å…¥ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚ä½ å¦ˆæ‹…å¿ƒä½ é’±ä¸å¤Ÿç”¨ï¼Œä¹Ÿç»™ä½ å­˜é’±ï¼›ä½ å¦¹å¦¹æ¥æ‰¾ä½ ç©ï¼Œå¾€ä½ å¡é‡Œå–é’±ã€‚è¿™æ—¶å€™å°±å‡ºç°é—®é¢˜äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å¦¹å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ å¦ˆå­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">ä½ å¦¹å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©<span class="number">0.0</span>å…ƒã€‚</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©-<span class="number">200.0</span>å…ƒã€‚</span><br><span class="line">......</span><br><span class="line">ä½ å–äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©-<span class="number">2000.0</span>å…ƒã€‚</span><br><span class="line">ä½ å¦ˆå­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©-<span class="number">1800.0</span>å…ƒã€‚</span><br><span class="line">ä½ çˆ¸å­˜äº†<span class="number">200.0</span>å…ƒï¼Œå¡é‡Œè¿˜å‰©-<span class="number">1600.0</span>å…ƒã€‚</span><br></pre></td></tr></table></figure>

<p>ä¸ä»…ä½™é¢è´Ÿæ•°ï¼Œç¨‹åºä¹Ÿå¹¶æ²¡æœ‰ç»“æŸè€Œè¿›å…¥æ°¸ä¹…ç­‰å¾…çš„çŠ¶æ€ã€‚</p>
<p>å‡ºç°ä½™é¢è´Ÿæ•°çš„åŸå› æ˜¯å½“â€œä½ â€ï¼Œâ€œä½ å¦¹â€ä¸¤ä¸ªå–é’±çº¿ç¨‹éƒ½å› ä¸ºflagä¸ºfalseè€Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—æ—¶ï¼Œç„¶åâ€œä½ å¦¹â€è¢«å­˜é’±çº¿ç¨‹æ‰€å”¤é†’ï¼Œæ­¤æ—¶ä½™é¢ä¸º200ï¼Œè¢«å”¤é†’çš„â€œä½ å¦¹â€ç»§ç»­å–é’±ï¼Œæ­¤æ—¶ä½™é¢ä¸º0ï¼Œç„¶åå”¤é†’â€œä½ â€ï¼Œ<strong>æ³¨æ„</strong>ï¼Œâ€œä½ â€è¢«å”¤é†’åæ¥ç€ä»waitè¯­å¥ä¹‹åå¾€ä¸‹æ‰§è¡Œå–é’±æ“ä½œï¼Œæ­¤æ—¶ä½™é¢ä¸º-200ã€‚é—®é¢˜å°±å‡ºåœ¨â€œä½ â€è¿™é‡Œï¼Œâ€œä½ â€è¢«å”¤é†’åæ˜¯ç»§ç»­å¾€ä¸‹æ‰§è¡Œçš„ï¼Œå¹¶æ²¡æœ‰é‡æ–°åˆ¤æ–­flagï¼Œè§£å†³åŠæ³•å¾ˆç®€å•ï¼Œå°†ifæ”¹ä¸ºwhileå°±å¯ä»¥äº†ï¼Œå¦‚æœflagä¸ºfalseè¢«å”¤é†’çš„ä½ å°±ä¼šæ¥ç€ç­‰å¾…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½ çˆ¸å­˜äº†200.0å…ƒï¼Œå¡é‡Œè¿˜å‰©200.0å…ƒã€‚</span><br><span class="line">ä½ å–äº†200.0å…ƒï¼Œå¡é‡Œè¿˜å‰©0.0å…ƒã€‚</span><br><span class="line">ä½ å¦ˆå­˜äº†200.0å…ƒï¼Œå¡é‡Œè¿˜å‰©200.0å…ƒã€‚</span><br><span class="line">ä½ å–äº†200.0å…ƒï¼Œå¡é‡Œè¿˜å‰©0.0å…ƒã€‚</span><br></pre></td></tr></table></figure>

<p>ä½™é¢è´Ÿæ•°çš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯ç¨‹åºé™·å…¥æ°¸ä¹…ç­‰å¾…çš„é—®é¢˜è¿˜æ²¡è§£å†³ï¼Œåˆ†æä¸‹åŸå› ï¼š</p>
<ol>
<li><strong>ä½ çˆ¸å­˜é’±æˆåŠŸ</strong>ï¼Œflagä¸ºtrueï¼Œ<strong>ä½™é¢200</strong>ï¼›</li>
<li>ä½ å¦ˆå­˜é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ å¦ˆï¼‰</li>
<li>ä½ çˆ¸å­˜é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ å¦ˆï¼Œä½ çˆ¸ï¼‰</li>
<li><strong>ä½ å–é’±æˆåŠŸ</strong>ï¼Œflagä¸ºfalseï¼Œå”¤é†’ä½ å¦ˆï¼Œ<strong>ä½™é¢ä¸º0</strong>ï¼›ï¼ˆä½ çˆ¸ï¼‰</li>
<li>ä½ å¦¹å–é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦¹ï¼‰</li>
<li>ä½ å–é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦¹ï¼Œä½ ï¼‰</li>
<li><strong>ä½ å¦ˆå­˜é’±æˆåŠŸ</strong>ï¼Œflagä¸ºtrueï¼Œå”¤é†’ä½ ï¼Œ<strong>ä½™é¢ä¸º200</strong>ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦¹ï¼‰</li>
<li>ä½ å¦ˆå­˜é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦¹ï¼Œä½ å¦ˆï¼‰</li>
<li><strong>ä½ å–é’±æˆåŠŸ</strong>ï¼Œflagä¸ºfalseï¼Œå”¤é†’ä½ å¦¹ï¼Œ<strong>ä½™é¢ä¸º0</strong>ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦ˆï¼‰</li>
<li>ä½ å¦¹å–é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦ˆï¼Œä½ å¦¹ï¼‰</li>
<li>ä½ å–é’±å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼›ï¼ˆä½ çˆ¸ï¼Œä½ å¦ˆï¼Œä½ å¦¹ï¼Œä½ ï¼‰</li>
</ol>
<p>è‡³æ­¤å››ä¸ªçº¿ç¨‹å…¨éƒ¨è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œåœ¨æ²¡æœ‰åˆ«çš„çº¿ç¨‹å°†å…¶å”¤é†’çš„æƒ…å†µä¸‹å°†é™·å…¥æ— é™æœŸç­‰å¾…ã€‚åŸå› å‡ºåœ¨ç¬¬9æ­¥ï¼Œå¦‚æœå–é’±çº¿ç¨‹â€œä½ â€å”¤é†’çš„æ˜¯å­˜é’±çº¿ç¨‹ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šæ­£å¸¸æ‰§è¡Œã€‚ä¿®æ”¹æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå°†ä»£ç ä¸­notifyæ–¹æ³•æ”¹æˆnotifyAllå°±å¯ä»¥äº†ï¼Œä¸€æ¬¡å”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚ç»“æœæ­£å¸¸è¿è¡Œä¸å†æ¼”ç¤ºï¼Œè¿™é‡Œè¯´è¿™ä¹ˆå¤šä¸»è¦æ˜¯ä½“ä¼šçº¿ç¨‹åŒæ­¥çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚</p>
<h2 id="5-6-ç»å…¸é—®é¢˜ï¼ˆç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼‰"><a href="#5-6-ç»å…¸é—®é¢˜ï¼ˆç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼‰" class="headerlink" title="5.6 ç»å…¸é—®é¢˜ï¼ˆç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼‰"></a>5.6 ç»å…¸é—®é¢˜ï¼ˆç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼‰</h2><p>è‹¥å¹²ä¸ªç”Ÿäº§è€…åœ¨ç”Ÿäº§äº§å“ï¼Œè¿™äº›äº§å“å°†æä¾›ç»™è‹¥å¹²ä¸ªæ¶ˆè´¹è€…å»æ¶ˆè´¹ï¼Œä¸ºäº†ä½¿ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…èƒ½å¹¶å‘æ‰§è¡Œï¼Œåœ¨ä¸¤è€…ä¹‹é—´è®¾ç½®ä¸€ä¸ªèƒ½å­˜å‚¨å¤šä¸ªäº§å“çš„ç¼“å†²åŒºï¼Œç”Ÿäº§è€…å°†ç”Ÿäº§çš„äº§å“æ”¾å…¥ç¼“å†²åŒºä¸­ï¼Œæ¶ˆè´¹è€…ä»ç¼“å†²åŒºå–èµ°äº§å“è¿›è¡Œæ¶ˆè´¹ï¼Œæ˜¾ç„¶ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´å¿…é¡»ä¿æŒ<strong>åŒæ­¥</strong>ï¼Œå³ä¸å…è®¸æ¶ˆè´¹è€…åˆ°ä¸€ä¸ªç©ºçš„ç¼“å†²åŒºä¸­å–äº§å“ï¼Œä¹Ÿä¸å…è®¸ç”Ÿäº§è€…å‘ä¸€ä¸ªæ»¡çš„ç¼“å†²åŒºä¸­æ”¾å…¥äº§å“ã€‚</p>
<p>è¿™ä¸ªä¾‹å­å’Œä¸Šä¸€èŠ‚çš„æ¡ˆä¾‹å·®ä¸å¤šï¼Œç†è§£äº†ä¸Šä¸€èŠ‚çš„æ¡ˆä¾‹è¿™ä¸ªé—®é¢˜å°±èƒ½è§£å†³ï¼Œä»¥ä¸‹æ˜¯æ¼”ç¤ºä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductBuf</span> &#123;</span><br><span class="line">    <span class="comment">//äº§å“ä»“åº“ï¼ˆç¼“å†²åŒºï¼‰</span></span><br><span class="line">    String[] products=<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">6</span>];</span><br><span class="line">    <span class="comment">//ä¸‹æ ‡ä»-1å¼€å§‹ï¼Œå¾€0åˆ°5ä½ç½®æ”¾äº§å“</span></span><br><span class="line">    <span class="type">int</span> index=-<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//ç”Ÿäº§è€…ç”Ÿäº§</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">Productor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(index&gt;=<span class="number">5</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//ä»“åº“å·²æ»¡ï¼Œç­‰å¾…</span></span><br><span class="line">                <span class="built_in">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ”¾å…¥äº§å“</span></span><br><span class="line">        products[++index]=<span class="string">&quot;product&quot;</span>;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š&quot;</span>+(index+<span class="number">1</span>));</span><br><span class="line">        System.out.println(Arrays.toString(products));</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ¶ˆè´¹è€…æ¶ˆè´¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">Consumer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (index&lt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//ä»“åº“å·²ç©ºï¼Œç­‰å¾…</span></span><br><span class="line">                <span class="built_in">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å–å‡ºäº§å“</span></span><br><span class="line">        products[index--]=<span class="literal">null</span>;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š&quot;</span>+(index+<span class="number">1</span>));</span><br><span class="line">        System.out.println(Arrays.toString(products));</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Productor</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    ProductBuf productBuf=<span class="keyword">new</span> <span class="title class_">ProductBuf</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Productor</span><span class="params">()</span> &#123;		</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Productor</span><span class="params">(ProductBuf productBuf)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.productBuf=productBuf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//ç”Ÿäº§30ä¸ªäº§å“</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++) &#123;</span><br><span class="line">            productBuf.Productor();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">	ProductBuf productBuf=<span class="keyword">new</span> <span class="title class_">ProductBuf</span>();</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Consumer</span><span class="params">()</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Consumer</span><span class="params">(ProductBuf productBuf)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.productBuf=productBuf;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//æ¶ˆè´¹30ä¸ªäº§å“</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++) &#123;</span><br><span class="line">			productBuf.Consumer();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testProduct</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		ProductBuf productBuf=<span class="keyword">new</span> <span class="title class_">ProductBuf</span>();</span><br><span class="line">		Productor productor=<span class="keyword">new</span> <span class="title class_">Productor</span>(productBuf);</span><br><span class="line">		Consumer consumer=<span class="keyword">new</span> <span class="title class_">Consumer</span>(productBuf);</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(productor,<span class="string">&quot;ç”Ÿäº§è€…1å·&quot;</span>).start();</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(productor,<span class="string">&quot;ç”Ÿäº§è€…2å·&quot;</span>).start();</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(consumer,<span class="string">&quot;æ¶ˆè´¹è€…1å·&quot;</span>).start();</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(consumer,<span class="string">&quot;æ¶ˆè´¹è€…2å·&quot;</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œæ²¡æœ‰é—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ç”Ÿäº§è€…<span class="number">1</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">1</span></span><br><span class="line">[product, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">æ¶ˆè´¹è€…<span class="number">1</span>å·æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">0</span></span><br><span class="line">[<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">1</span></span><br><span class="line">[product, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">2</span></span><br><span class="line">[product, product, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">3</span></span><br><span class="line">[product, product, product, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">4</span></span><br><span class="line">[product, product, product, product, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">5</span></span><br><span class="line">[product, product, product, product, product, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">6</span></span><br><span class="line">[product, product, product, product, product, product]</span><br><span class="line">æ¶ˆè´¹è€…<span class="number">2</span>å·æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">5</span></span><br><span class="line">[product, product, product, product, product, <span class="literal">null</span>]</span><br><span class="line">......</span><br><span class="line">æ¶ˆè´¹è€…<span class="number">2</span>å·æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">1</span></span><br><span class="line">[product, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">æ¶ˆè´¹è€…<span class="number">2</span>å·æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">0</span></span><br><span class="line">[<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">ç”Ÿäº§è€…<span class="number">2</span>å·ç”Ÿäº§äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">1</span></span><br><span class="line">[product, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line">æ¶ˆè´¹è€…<span class="number">2</span>å·æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œäº§å“æ•°é‡ï¼š<span class="number">0</span></span><br><span class="line">[<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br></pre></td></tr></table></figure>

<h1 id="6-çº¿ç¨‹æ± "><a href="#6-çº¿ç¨‹æ± " class="headerlink" title="6. çº¿ç¨‹æ± "></a>6. çº¿ç¨‹æ± </h1><h2 id="6-1-çº¿ç¨‹æ± æ¦‚å¿µ"><a href="#6-1-çº¿ç¨‹æ± æ¦‚å¿µ" class="headerlink" title="6.1 çº¿ç¨‹æ± æ¦‚å¿µ"></a>6.1 çº¿ç¨‹æ± æ¦‚å¿µ</h2><p>é¦–å…ˆæœ‰å…³çº¿ç¨‹çš„ä½¿ç”¨ä¼šå‡ºç°ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>çº¿ç¨‹æ˜¯å®è´µçš„å†…å­˜èµ„æºã€å•ä¸ªçº¿ç¨‹çº¦å 1MBç©ºé—´ï¼Œè¿‡å¤šåˆ†é…æ˜“é€ æˆå†…å­˜æº¢å‡ºã€‚</li>
<li>é¢‘ç¹çš„åˆ›å»ºåŠé”€æ¯çº¿ç¨‹ä¼šå¢åŠ è™šæ‹Ÿæœºå›æ”¶é¢‘ç‡ã€èµ„æºå¼€é”€ï¼Œé€ æˆæ€§èƒ½ä¸‹é™ã€‚</li>
</ol>
<p>åŸºäºå¦‚ä¸Šçš„é—®é¢˜ï¼Œå‡ºç°äº†çº¿ç¨‹æ± ï¼š</p>
<ul>
<li><strong>çº¿ç¨‹å®¹å™¨</strong>ï¼Œ<strong>å¯è®¾å®šçº¿ç¨‹åˆ†é…çš„æ•°é‡</strong>ã€‚</li>
<li><strong>å°†é¢„å…ˆåˆ›å»ºçš„çº¿ç¨‹å¯¹è±¡å­˜å…¥æ± ä¸­</strong>ï¼Œ<strong>å¹¶é‡ç”¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¯¹è±¡</strong>ã€‚</li>
<li><strong>é¿å…é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯</strong>ã€‚</li>
</ul>
<h2 id="6-2-çº¿ç¨‹æ± åŸç†"><a href="#6-2-çº¿ç¨‹æ± åŸç†" class="headerlink" title="6.2 çº¿ç¨‹æ± åŸç†"></a>6.2 çº¿ç¨‹æ± åŸç†</h2><p>å‡å¦‚çº¿ç¨‹æ± é‡Œå›ºå®šæœ‰ä¸‰ä¸ªçº¿ç¨‹ï¼Œæœ‰å››ä¸ªä»»åŠ¡ã€‚çº¿ç¨‹æ± ä¸­çš„ä¸‰ä¸ªçº¿ç¨‹åˆ†åˆ«å®Œæˆä¸‰ä¸ªä»»åŠ¡ï¼Œç¬¬å››ä¸ªä»»åŠ¡åˆ™è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹æ‰§è¡Œå®Œå‰ä¸‰ä¸ªä»»åŠ¡åç»§ç»­æ‰§è¡Œç¬¬å››ä¸ªä»»åŠ¡ã€‚</p>
<p><img src="https://pic.downk.cc/item/5fa5382b1cd1bbb86bb07912.png" alt="img"></p>
<ul>
<li>å°†ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± ï¼Œç”±çº¿ç¨‹æ± åˆ†é…çº¿ç¨‹ã€è¿è¡Œä»»åŠ¡ï¼Œå¹¶åœ¨å½“å‰ä»»åŠ¡ç»“æŸåå¤ç”¨çº¿ç¨‹ã€‚</li>
</ul>
<h2 id="6-3-åˆ›å»ºçº¿ç¨‹æ± "><a href="#6-3-åˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="6.3 åˆ›å»ºçº¿ç¨‹æ± "></a>6.3 åˆ›å»ºçº¿ç¨‹æ± </h2><ul>
<li><p>å¸¸ç”¨çš„çº¿ç¨‹æ± æ¥å£çš„ç±»ï¼ˆæ‰€åœ¨åŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java.util.concurrent</span><br></pre></td></tr></table></figure>

<p>ï¼‰</p>
<ul>
<li><p><strong>Executor</strong>ï¼šçº¿ç¨‹æ± çš„é¡¶çº§æ¥å£ã€‚</p>
</li>
<li><p><strong>ExecutorService</strong>ï¼šçº¿ç¨‹æ± æ¥å£ï¼Œå¯é€šè¿‡<code>submit(Runnable task)</code>æäº¤ä»»åŠ¡ä»£ç ã€‚</p>
</li>
<li><p>Executors</p>
<p>å·¥å‚ç±»ï¼šåˆ›å»ºçº¿ç¨‹æ± çš„å·¥å…·ç±»ã€‚</p>
<ol>
<li>åˆ›å»ºå›ºå®šçº¿ç¨‹ä¸ªæ•°çš„çº¿ç¨‹æ± ã€‚</li>
<li>åˆ›å»ºç¼“å­˜çº¿ç¨‹æ± ï¼Œç”±ä»»åŠ¡çš„å¤šå°‘å†³å®šã€‚</li>
<li>åˆ›å»ºå•çº¿ç¨‹æ± ã€‚</li>
<li>åˆ›å»ºè°ƒåº¦çº¿ç¨‹æ± ã€‚è°ƒåº¦ï¼šå‘¨æœŸã€å®šæ—¶æ‰§è¡Œã€‚</li>
</ol>
</li>
<li><p>é€šè¿‡<code>newFixedThreadPool(int nThreads)</code>è·å¾—å›ºå®šæ•°é‡çš„çº¿ç¨‹æ± ã€‚å‚æ•°ï¼šæŒ‡å®šçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡ã€‚</p>
</li>
<li><p>é€šè¿‡<code>newCachedThreadPool()</code>è·å¾—åŠ¨æ€æ•°é‡çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸å¤Ÿåˆ™åˆ›å»ºæ–°çš„ï¼Œæ²¡æœ‰ä¸Šé™ã€‚</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºçº¿ç¨‹æ± çš„åˆ›å»ºï¼ˆç»“æœåŒé“¶è¡Œå¡æ¡ˆä¾‹ï¼Œä¸å†æ¼”ç¤ºï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;	</span><br><span class="line">        <span class="comment">//é“¶è¡Œå¡æ¡ˆä¾‹</span></span><br><span class="line">		BandCard bandCard=<span class="keyword">new</span> <span class="title class_">BandCard</span>();</span><br><span class="line">		AddMoney addMoney=<span class="keyword">new</span> <span class="title class_">AddMoney</span>(bandCard);</span><br><span class="line">		SubMoney subMoney=<span class="keyword">new</span> <span class="title class_">SubMoney</span>(bandCard);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//1.1åˆ›å»ºå›ºå®šçº¿ç¨‹ä¸ªæ•°çš„çº¿ç¨‹æ± </span></span><br><span class="line">		<span class="comment">//ExecutorService executorService=Executors.newFixedThreadPool(4);</span></span><br><span class="line">		<span class="comment">//1.2åˆ›å»ºç¼“å­˜çº¿ç¨‹æ± ï¼Œçº¿ç¨‹ä¸ªæ•°ç”±ä»»åŠ¡ä¸ªæ•°å†³å®š</span></span><br><span class="line">		ExecutorService executorService=Executors.newCachedThreadPool();</span><br><span class="line">		<span class="comment">//1.3åˆ›å»ºå•çº¿ç¨‹çº¿ç¨‹æ± </span></span><br><span class="line">		<span class="comment">//Executors.newSingleThreadExecutor();</span></span><br><span class="line">		<span class="comment">//1.4åˆ›å»ºè°ƒåº¦çº¿ç¨‹æ± </span></span><br><span class="line">		<span class="comment">//Executors.newScheduledThreadPool(corePoolSize);</span></span><br><span class="line">		<span class="comment">//2.æäº¤ä»»åŠ¡</span></span><br><span class="line">		executorService.submit(addMoney);</span><br><span class="line">		executorService.submit(subMoney);</span><br><span class="line">		executorService.submit(addMoney);</span><br><span class="line">		executorService.submit(subMoney);</span><br><span class="line">		<span class="comment">//ç­‰å¾…æ‰€æœ‰å·²æ‰§è¡Œçš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åå…³é—­çº¿ç¨‹æ± ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡</span></span><br><span class="line">		executorService.shutdown();</span><br><span class="line">		<span class="comment">//ä¼šè¯•å›¾åœæ­¢æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">		<span class="comment">//executorService.shutdownNow();</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-Callableæ¥å£"><a href="#6-4-Callableæ¥å£" class="headerlink" title="6.4 Callableæ¥å£"></a>6.4 Callableæ¥å£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Callable</span>&lt;V&gt;&#123;</span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>JDK1.5åŠ å…¥ï¼Œä¸Runnableæ¥å£ç±»ä¼¼ï¼Œå®ç°ä¹‹åä»£è¡¨ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ã€‚</li>
<li>Callableå…·æœ‰æ³›å‹è¿”å›å€¼ã€å¯ä»¥å£°æ˜å¼‚å¸¸ã€‚</li>
</ul>
<p><strong>ä¸Runnableæ¥å£çš„åŒºåˆ«</strong>ï¼š</p>
<ol>
<li>Callableæ¥å£ä¸­callæ–¹æ³•æœ‰è¿”å›å€¼ï¼ŒRunnableæ¥å£ä¸­runæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</li>
<li>Callableæ¥å£ä¸­callæ–¹æ³•æœ‰å£°æ˜å¼‚å¸¸ï¼ŒRunnableæ¥å£ä¸­runæ–¹æ³•æ²¡æœ‰å¼‚å¸¸ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºCallableæ¥å£çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * åŠŸèƒ½éœ€æ±‚ï¼šä½¿ç”¨Callableå®ç°1-100çš„å’Œã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">		<span class="comment">//1.åˆ›å»ºCallableå¯¹è±¡</span></span><br><span class="line">		Callable&lt;Integer&gt; callable=<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;() &#123;</span><br><span class="line">			<span class="keyword">private</span> <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++) &#123;</span><br><span class="line">					sum+=i;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> sum;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">//2.Threadçš„æ„é€ æ–¹æ³•ä¸­æ²¡æœ‰å¸¦Callableçš„æ„é€ æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//éœ€è¦æŠŠCallableå¯¹è±¡è½¬æˆå¯æ‰§è¡Œä»»åŠ¡ï¼ŒFutureTaskè¡¨ç¤ºå°†è¦æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">		<span class="comment">//è¯¥ç±»å®ç°äº†RunnableFuture&lt;V&gt;æ¥å£ï¼Œè€Œè¯¥æ¥å£åˆç»§æ‰¿äº†Runnableç±»</span></span><br><span class="line">		FutureTask&lt;Integer&gt; task=<span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;Integer&gt;(callable);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//3.åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">		Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(task);</span><br><span class="line">		<span class="comment">//4.å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">		thread.start();</span><br><span class="line">		<span class="comment">//5.è·å–ç»“æœï¼ˆç­‰å¾…callæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šè¿”å›ï¼‰</span></span><br><span class="line">		Integer sum=task.get();</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœæ˜¯&quot;</span>+sum);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-Callableç»“åˆçº¿ç¨‹æ± ä½¿ç”¨"><a href="#6-5-Callableç»“åˆçº¿ç¨‹æ± ä½¿ç”¨" class="headerlink" title="6.5 Callableç»“åˆçº¿ç¨‹æ± ä½¿ç”¨"></a>6.5 Callableç»“åˆçº¿ç¨‹æ± ä½¿ç”¨</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨çº¿ç¨‹æ± è®¡ç®—1-100çš„å’Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">		<span class="comment">//1.åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line">		ExecutorService executorService=Executors.newFixedThreadPool(<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//2.æäº¤ä»»åŠ¡,Futureè¡¨ç¤ºå°†è¦æ‰§è¡Œä»»åŠ¡çš„ç»“æœï¼›</span></span><br><span class="line">        <span class="comment">//submitå¯ä»¥ä¼ å…¥ä¸€ä¸ªCallable&lt;T&gt;å¯¹è±¡</span></span><br><span class="line">		Future&lt;Integer&gt; future=executorService.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;() &#123;</span><br><span class="line">			<span class="keyword">private</span> <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å¼€å§‹è®¡ç®—ã€‚ã€‚&quot;</span>);</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++) &#123;</span><br><span class="line">					sum+=i;</span><br><span class="line">					Thread.sleep(<span class="number">10</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> sum;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		<span class="comment">//3.è·å–ä»»åŠ¡çš„ç»“æœï¼ˆç­‰å¾…ä»»åŠ¡å®Œæˆæ‰ä¼šè¿”å›ï¼‰</span></span><br><span class="line">		System.out.println(future.get());</span><br><span class="line">        <span class="comment">//4.å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">		executorService.shutdown();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-6-Futureæ¥å£"><a href="#6-6-Futureæ¥å£" class="headerlink" title="6.6 Futureæ¥å£"></a>6.6 Futureæ¥å£</h2><ul>
<li><strong>Future</strong>ï¼š<strong>è¡¨ç¤ºå°†è¦å®Œæˆä»»åŠ¡çš„ç»“æœ</strong>ã€‚</li>
</ul>
<p>æ¼”ç¤ºä¸€ä¸ªæ¡ˆä¾‹ï¼šä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œå¹¶å‘è®¡ç®—1-50ã€51-100çš„å’Œï¼Œå†è¿›è¡Œæ±‡æ€»è®¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºFutureæ¥å£çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">		<span class="comment">//1.åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line">		ExecutorService executorService=Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">		<span class="comment">//2.æäº¤ä»»åŠ¡</span></span><br><span class="line">		Future&lt;Integer&gt; future1=executorService.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;() &#123;</span><br><span class="line">			<span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="comment">//è®¡ç®—1-50çš„å’Œ</span></span><br><span class="line">			<span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">50</span>;i++) &#123;</span><br><span class="line">					sum+=i;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">&quot;1-50çš„å’Œè®¡ç®—å®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span> sum;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		Future&lt;Integer&gt; future2=executorService.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;() &#123;</span><br><span class="line">			<span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="comment">//è®¡ç®—51-100çš„å’Œ</span></span><br><span class="line">			<span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">51</span>;i&lt;=<span class="number">100</span>;i++) &#123;</span><br><span class="line">					sum+=i;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">&quot;51-100çš„å’Œè®¡ç®—å®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span> sum;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		<span class="comment">//3.è·å–ç»“æœ</span></span><br><span class="line">		System.out.println(future1.get()+future2.get());</span><br><span class="line">		<span class="comment">//4.å…³ç³»çº¿ç¨‹æ± </span></span><br><span class="line">		executorService.shutdown();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ç¤º</strong><code>ExecutorService.submit()</code><strong>æ‰€è¿”å›çš„çŠ¶æ€ç»“æœ</strong>ï¼Œ<strong>å°±æ˜¯callçš„è¿”å›å€¼</strong>ã€‚</li>
<li><strong>æ–¹æ³•</strong><code>V get()</code><strong>ä»¥é˜»å¡å½¢å¼ç­‰å¾…Futureä¸­çš„å¼‚æ­¥å¤„ç†ç»“æœ</strong>ï¼ˆ<strong>callçš„è¿”å›å€¼</strong>ï¼‰ã€‚</li>
</ul>
<h2 id="6-7-çº¿ç¨‹çš„åŒæ­¥ä¸å¼‚æ­¥"><a href="#6-7-çº¿ç¨‹çš„åŒæ­¥ä¸å¼‚æ­¥" class="headerlink" title="6.7 çº¿ç¨‹çš„åŒæ­¥ä¸å¼‚æ­¥"></a>6.7 çº¿ç¨‹çš„åŒæ­¥ä¸å¼‚æ­¥</h2><ul>
<li><p><strong>åŒæ­¥</strong></p>
<p>å½¢å®¹ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ï¼ŒåŒæ­¥ä¸€æ—¦å¼€å§‹ï¼Œè°ƒç”¨è€…å¿…é¡»ç­‰å¾…è¯¥æ–¹æ³•è¿”å›ï¼Œæ‰èƒ½ç»§ç»­ã€‚</p>
<p>å½“ä¸»çº¿ç¨‹è°ƒç”¨å­çº¿ç¨‹æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¿…é¡»ç­‰åˆ°å­çº¿ç¨‹è¿”å›ç»“æœåæ‰èƒ½ç»§ç»­ã€‚</p>
</li>
<li><p><strong>å¼‚æ­¥</strong></p>
<p>å½¢å®¹ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ï¼Œå¼‚æ­¥ä¸€æ—¦å¼€å§‹å°±åƒæ˜¯ä¸€æ¬¡æ¶ˆæ¯ä¼ é€’ï¼Œè°ƒç”¨è€…å‘ŠçŸ¥ä¹‹åç«‹åˆ»è¿”å›ã€‚äºŒè€…ç«äº‰æ—¶é—´ç‰‡ï¼Œå¹¶å‘æ‰§è¡Œã€‚<strong>å¼‚æ­¥æœ‰å¤šæ¡æ‰§è¡Œè·¯å¾„</strong>ã€‚</p>
</li>
</ul>
<p><img src="https://pic.downk.cc/item/5fa610c41cd1bbb86bd6d0d9.png" alt="img"></p>
]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVA IOæ¡†æ¶</title>
    <url>/2021/05/22/JAVA-IO%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<h1 id="æµçš„æ¦‚å¿µ"><a href="#æµçš„æ¦‚å¿µ" class="headerlink" title="æµçš„æ¦‚å¿µ"></a><strong>æµçš„æ¦‚å¿µ</strong></h1><ul>
<li><p><strong>æ¦‚å¿µ</strong>ï¼šå†…å­˜ä¸å­˜å‚¨è®¾å¤‡ä¹‹é—´ä¼ è¾“æ•°æ®çš„é€šé“ã€‚</p>
<p><img src="https://pic.downk.cc/item/5f9ce4341cd1bbb86b8a1dfa.png" alt="img"></p>
</li>
<li><p>æ°´å€ŸåŠ©ç®¡é“ä¼ è¾“ï¼›æ•°æ®å€ŸåŠ©æµä¼ è¾“ã€‚</p>
</li>
</ul>
<h1 id="æµçš„åˆ†ç±»"><a href="#æµçš„åˆ†ç±»" class="headerlink" title="æµçš„åˆ†ç±»"></a><strong>æµçš„åˆ†ç±»</strong></h1><h2 id="æŒ‰æ–¹å‘ã€é‡ç‚¹ã€‘"><a href="#æŒ‰æ–¹å‘ã€é‡ç‚¹ã€‘" class="headerlink" title="æŒ‰æ–¹å‘ã€é‡ç‚¹ã€‘"></a><strong>æŒ‰æ–¹å‘ã€é‡ç‚¹ã€‘</strong></h2><ul>
<li><strong>è¾“å…¥æµ</strong>ï¼šå°†&lt;å­˜å‚¨è®¾å¤‡&gt;ä¸­çš„å†…å®¹è¯»å…¥åˆ°&lt;å†…å­˜&gt;ä¸­ã€‚</li>
<li><strong>è¾“å‡ºæµ</strong>ï¼šå°†&lt;å†…å­˜&gt;ä¸­çš„å†…å®¹å†™å…¥åˆ°&lt;å­˜å‚¨è®¾å¤‡&gt;ä¸­ã€‚</li>
</ul>
<p><img src="https://pic.downk.cc/item/5f9cea1b1cd1bbb86b8b4f67.png" alt="img"></p>
<h2 id="æŒ‰å•ä½"><a href="#æŒ‰å•ä½" class="headerlink" title="æŒ‰å•ä½"></a><strong>æŒ‰å•ä½</strong></h2><ul>
<li><strong>å­—èŠ‚æµ</strong>ï¼šä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå¯ä»¥è¯»å†™æ‰€æœ‰æ•°æ®ã€‚</li>
<li><strong>å­—ç¬¦æµ</strong>ï¼šä»¥å­—ç¬¦ä¸ºå•ä½ï¼Œåªèƒ½è¯»å†™æ–‡æœ¬æ•°æ®ã€‚</li>
</ul>
<h2 id="æŒ‰åŠŸèƒ½"><a href="#æŒ‰åŠŸèƒ½" class="headerlink" title="æŒ‰åŠŸèƒ½"></a><strong>æŒ‰åŠŸèƒ½</strong></h2><ul>
<li><strong>å­—èŠ‚æµ</strong>ï¼šå…·æœ‰å®é™…ä¼ è¾“æ•°æ®çš„è¯»å†™åŠŸèƒ½ã€‚</li>
<li><strong>è¿‡æ»¤æµ</strong>ï¼šåœ¨èŠ‚ç‚¹æµçš„åŸºç¡€ä¹‹ä¸Šå¢å¼ºåŠŸèƒ½ã€‚</li>
</ul>
<h1 id="å­—èŠ‚æµ"><a href="#å­—èŠ‚æµ" class="headerlink" title="å­—èŠ‚æµ"></a><strong>å­—èŠ‚æµ</strong></h1><p><img src="https://pic.downk.cc/item/5f9d7ecb1cd1bbb86bce7018.png" alt="img"></p>
<h2 id="å­—èŠ‚æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰"><a href="#å­—èŠ‚æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰" class="headerlink" title="å­—èŠ‚æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰"></a><strong>å­—èŠ‚æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰</strong></h2><ul>
<li><p>InputStream</p>
<p>å­—èŠ‚è¾“å…¥æµ</p>
<ul>
<li><code>public int read()&#123;&#125;</code></li>
<li><code>public int read(byte[] b)&#123;&#125;</code></li>
<li><code>public int read(byte[] b,int off,int len)&#123;&#125;</code></li>
</ul>
</li>
<li><p>OutputStream</p>
<p>å­—èŠ‚è¾“å‡ºæµ</p>
<ul>
<li><code>public void write(int n)&#123;&#125;</code></li>
<li><code>public void write(byte[] b)&#123;&#125;</code></li>
<li><code>public void write(byte[] b,int off,int len)&#123;&#125;</code></li>
</ul>
</li>
</ul>
<h2 id="å­—èŠ‚æµçš„å­ç±»"><a href="#å­—èŠ‚æµçš„å­ç±»" class="headerlink" title="å­—èŠ‚æµçš„å­ç±»"></a><strong>å­—èŠ‚æµçš„å­ç±»</strong></h2><h3 id="æ–‡ä»¶å­—èŠ‚æµ"><a href="#æ–‡ä»¶å­—èŠ‚æµ" class="headerlink" title="æ–‡ä»¶å­—èŠ‚æµ"></a><strong>æ–‡ä»¶å­—èŠ‚æµ</strong></h3><ul>
<li><strong>FileInputStream</strong><ul>
<li><code>public int read()</code>//ä»è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼Œè¿”å›è¯»åˆ°çš„å­—èŠ‚æ•°æ®ï¼Œå¦‚æœè¾¾åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›-1ã€‚</li>
<li><code>public int read(byte[] b)</code>//ä»è¾“å…¥æµä¸­è¯»å–å­—èŠ‚æ•°ç»„é•¿åº¦çš„å­—èŠ‚æ•°æ®å­˜å…¥æ•°ç»„ä¸­ï¼Œè¿”å›å®é™…è¯»åˆ°çš„å­—èŠ‚æ•°ï¼›å¦‚æœè¾¾åˆ°æ–‡ä»¶çš„å°¾éƒ¨ï¼Œåˆ™è¿”å›-1ã€‚</li>
</ul>
</li>
<li><strong>FileOutputStream</strong><ul>
<li><code>public void write(int b)</code>//å°†æŒ‡å®šå­—èŠ‚å†™å…¥è¾“å‡ºæµã€‚</li>
<li><code>public void write(bute[] b)</code>//ä¸€æ¬¡å†™å¤šä¸ªå­—èŠ‚ï¼Œå°†bæ•°ç»„ä¸­æ‰€æœ‰å­—èŠ‚ï¼Œå†™å…¥è¾“å‡ºæµã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºæ–‡ä»¶å­—èŠ‚è¾“å…¥æµçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * FileInputStream</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">//æ–‡ä»¶å†…å®¹ï¼šabcdefg</span></span><br><span class="line">		FileInputStream fileInputStream=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\aaa.txt&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//read();è¯»å…¥å•ä¸ªå­—èŠ‚</span></span><br><span class="line">		<span class="type">int</span> data=fileInputStream.read();</span><br><span class="line">		System.out.println((<span class="type">char</span>)data);<span class="comment">//a</span></span><br><span class="line">		<span class="keyword">while</span>((data=fileInputStream.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">			System.out.print((<span class="type">char</span>)data);</span><br><span class="line">		&#125;<span class="comment">//bcdefg</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//read(byte[] b);è¯»å…¥å¤šä¸ªå­—èŠ‚</span></span><br><span class="line">		<span class="type">byte</span>[] b=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];	</span><br><span class="line">		<span class="keyword">if</span>((data=fileInputStream.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">			System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(b,<span class="number">0</span>,data));</span><br><span class="line">		&#125;<span class="comment">//bcdefg</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å…³é—­æµ</span></span><br><span class="line">		fileInputStream.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºæ–‡ä»¶å­—èŠ‚è¾“å‡ºæµçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * FileOutputStream</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">//å¦‚æœæ²¡æœ‰æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line">		FileOutputStream fileOutputStream=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\bbb.txt&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//write(int b);</span></span><br><span class="line">		fileOutputStream.write(<span class="number">97</span>);</span><br><span class="line">		fileOutputStream.write(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">		fileOutputStream.write(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//write(byte[] b);</span></span><br><span class="line">		fileOutputStream.write(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;helloworld&quot;</span>).getBytes());</span><br><span class="line">		<span class="comment">//æ­¤æ—¶æ–‡ä»¶bbb.txtå†…å®¹ä¸ºabc	helloworld</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å…³é—­æµ</span></span><br><span class="line">		fileOutputStream.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–‡ä»¶å­—èŠ‚æµå°æ¡ˆä¾‹"><a href="#æ–‡ä»¶å­—èŠ‚æµå°æ¡ˆä¾‹" class="headerlink" title="æ–‡ä»¶å­—èŠ‚æµå°æ¡ˆä¾‹"></a><strong>æ–‡ä»¶å­—èŠ‚æµå°æ¡ˆä¾‹</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ–‡ä»¶å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">//å°†å›¾ç‰‡è¯»å–åˆ°è¾“å…¥æµ</span></span><br><span class="line">		FileInputStream fileInputStream=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\MrG1.jpg&quot;</span>);</span><br><span class="line">		<span class="comment">//ä»è¾“å‡ºæµå†™å…¥æ•°æ®</span></span><br><span class="line">		FileOutputStream fileOutputStream=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\MrG2.jpg&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="type">int</span> count;<span class="comment">//ä¿å­˜ä¸€æ¬¡è¯»å–åˆ°çš„å®é™…ä¸ªæ•°</span></span><br><span class="line">		<span class="type">byte</span>[] b=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">while</span>((count=fileInputStream.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">			fileOutputStream.write(b, <span class="number">0</span>, count);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¤åˆ¶æˆåŠŸ&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å…³é—­æµ</span></span><br><span class="line">		fileInputStream.close();</span><br><span class="line">		fileOutputStream.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å­—èŠ‚ç¼“å†²æµ"><a href="#å­—èŠ‚ç¼“å†²æµ" class="headerlink" title="å­—èŠ‚ç¼“å†²æµ"></a><strong>å­—èŠ‚ç¼“å†²æµ</strong></h3><ul>
<li><strong>ç¼“å†²æµ</strong>ï¼šBufferedInputStream/BufferedOutputStream<ul>
<li>æé«˜IOæ•ˆç‡ï¼Œå‡å°‘è®¿é—®ç£ç›˜çš„æ¬¡æ•°ï¼›</li>
<li>æ•°æ®å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­ã€‚flushå¯ä»¥å°†ç¼“å­˜åŒºçš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥closeã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å­—èŠ‚ç¼“å†²æµè¯»å–</span></span><br><span class="line"><span class="comment"> * BufferedInputStream</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨è¯¥è¾“å…¥æµæ¯æ¬¡ä¼šä»ç¡¬ç›˜è¯»å…¥</span></span><br><span class="line">        FileInputStream fileInputStream=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\aaa.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//ç¼“å†²æµéœ€è¦ä¸€ä¸ªåº•å±‚æµ</span></span><br><span class="line">        <span class="comment">//ç¼“å†²æµæ¯æ¬¡ä»ç¼“å†²åŒºè¯»å–</span></span><br><span class="line">        BufferedInputStream bufferedInputStream=<span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(fileInputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯»å–</span></span><br><span class="line">        <span class="type">int</span> data; </span><br><span class="line">        <span class="keyword">while</span>((data=bufferedInputStream.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>)data); </span><br><span class="line">        &#125;	 </span><br><span class="line"></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼›</span></span><br><span class="line">        <span class="comment">//æ¯æ¬¡è¯»å–ä»è‡ªå·±åˆ›å»ºçš„ç¼“å†²åŒºä¸­è¯»å–ã€‚</span></span><br><span class="line">        <span class="type">int</span> count;</span><br><span class="line">        <span class="type">byte</span>[] buf=<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((count=bufferedInputStream.read(b,<span class="number">0</span>,b.length))!=-<span class="number">1</span>) &#123;			</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf,<span class="number">0</span>,count));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bufferedInputStream.close();	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å­—èŠ‚ç¼“å†²æµå†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * BufferedOutputStream</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		FileOutputStream fileOutputStream=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\buf.txt&quot;</span>);</span><br><span class="line">		<span class="comment">//ç¼“å†²æµå°†æ•°æ®å†™å…¥åˆ°ç¼“å†²åŒº</span></span><br><span class="line">		BufferedOutputStream bufferedOutputStream=<span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(fileOutputStream);</span><br><span class="line">		<span class="comment">//å†™å…¥æ–‡ä»¶</span></span><br><span class="line">		bufferedOutputStream.write(<span class="string">&quot;helloworld&quot;</span>.getBytes());</span><br><span class="line">		bufferedOutputStream.flush();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å…¶å®å†…éƒ¨ä¹Ÿä¼šè°ƒç”¨flush</span></span><br><span class="line">		bufferedOutputStream.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å¯¹è±¡æµ"><a href="#å¯¹è±¡æµ" class="headerlink" title="å¯¹è±¡æµ"></a><strong>å¯¹è±¡æµ</strong></h1><ul>
<li><p><strong>å¯¹è±¡æµ</strong>ï¼šObjectOutputStream/ObjectInputStream</p>
<ul>
<li>å¢åŠ äº†ç¼“å†²åŒºåŠŸèƒ½ã€‚</li>
<li>å¢å¼ºäº†è¯»å†™8ç§åŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸²åŠŸèƒ½ã€‚</li>
<li>å¢å¼ºäº†è¯»å†™å¯¹è±¡çš„åŠŸèƒ½ï¼š<ul>
<li><code>readObject()</code>//ä»æµä¸­è¯»å–ä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li><code>writeObject(Object obj)</code>å‘æµä¸­å†™å…¥ä¸€ä¸ªå¯¹è±¡ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨æµä¼ è¾“å¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºåºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€‚</strong></p>
</li>
</ul>
<h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a><strong>åºåˆ—åŒ–</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>();</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ObjectOutputStreamå®ç°å¯¹è±¡çš„åºåˆ—åŒ–</span></span><br><span class="line"><span class="comment"> * æ³¨ï¼šåºåˆ—åŒ–çš„ç±»å¿…è¦è¦å®ç°Serializableæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//è¿™ä¸ªæ–‡ä»¶åç¼€åè¡¨ç¤ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†ä½ å¯ä»¥å†™æˆå…¶ä»–å¦‚objç­‰ä»»æ„åç¼€ã€‚</span></span><br><span class="line">		FileOutputStream fileOutputStream=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\stu.bin&quot;</span>);</span><br><span class="line">		ObjectOutputStream objectOutputStream=<span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fileOutputStream);</span><br><span class="line">		<span class="comment">//åºåˆ—åŒ–ï¼ˆå†™å…¥æ“ä½œï¼‰</span></span><br><span class="line">		Student tang=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å”ç‘&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		objectOutputStream.writeObject(tang);</span><br><span class="line">		objectOutputStream.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;åºåˆ—åŒ–å®Œæ¯•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨</strong>ï¼šæ‰§è¡Œä¸Šè¿°ä»£ç åIDEä¼šæŠ›å‡º<code>java.io.NotSerializableException</code>ï¼Œæ„æ€æ˜¯Studentç±»ä¸èƒ½è¢«åºåˆ—åŒ–ï¼Œéœ€è¦å®ç°Serializableæ¥å£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸éœ€è¦å®ç°ä»»ä½•æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<p>Serializableå…¶å®æ˜¯ä¸€ä¸ªæ ‡å¿—æ¥å£ï¼Œç”¨æ¥æ ‡å¿—è¯¥ç±»æ˜¯å¦å¯ä»¥è¢«åºåˆ—åŒ–ã€‚æˆ‘ä»¬è¿›åˆ°è¯¥æ¥å£çš„æºç å¯ä»¥å‘ç°é‡Œé¢ä¸å«ä»»ä½•å±æ€§å’ŒæŠ½è±¡æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ååºåˆ—åŒ–"><a href="#ååºåˆ—åŒ–" class="headerlink" title="ååºåˆ—åŒ–"></a><strong>ååºåˆ—åŒ–</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ObjectInputStreamå®ç°ååºåˆ—åŒ–ï¼ˆè¯»å–é‡æ„å¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">		FileInputStream fileInputStream=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\stu.bin&quot;</span>);</span><br><span class="line">		ObjectInputStream objectInputStream=<span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(fileInputStream);</span><br><span class="line">		<span class="comment">//è¯»å–æ–‡ä»¶ï¼ˆååºåˆ—åŒ–ï¼‰</span></span><br><span class="line">		Student student=(Student) objectInputStream.readObject();</span><br><span class="line">		</span><br><span class="line">		objectInputStream.close();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">		System.out.println(student.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ³¨æ„äº‹é¡¹"><a href="#åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ³¨æ„äº‹é¡¹" class="headerlink" title="åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ³¨æ„äº‹é¡¹"></a><strong>åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ³¨æ„äº‹é¡¹</strong></h2><ul>
<li>åºåˆ—åŒ–ç±»å¿…é¡»å®ç°Serializableæ¥å£ï¼Œå‰æ–‡å·²ç»è¯´è¿‡ã€‚</li>
<li>åºåˆ—åŒ–ç±»ä¸­çš„å¯¹è±¡å±æ€§ä¹Ÿè¦æ±‚å®ç°Serializableæ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœStudentç±»ä¸­æœ‰ä¸€ä¸ªGradç±»å‹çš„å±æ€§<code>private Grad info;</code>é‚£ä¹ˆGradè¿™ä¸ªç±»ä¹Ÿè¦å®ç°Serializableæ¥å£ã€‚</li>
<li>åºåˆ—åŒ–ç±»ä¸­å¯ä»¥æ·»åŠ åºåˆ—åŒ–ç‰ˆæœ¬å·IDï¼Œä»¥ä¿è¯åºåˆ—åŒ–çš„ç±»å’Œè¢«åºåˆ—åŒ–çš„ç±»æ˜¯åŒä¸€ä¸ªç±»ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘å¹¶æ²¡æœ‰æ·»åŠ åºåˆ—å·ç‰ˆæœ¬ï¼Œè™½ç„¶IDEæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯ä¼šæ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œæç¤ºæˆ‘æ·»åŠ åºåˆ—åŒ–ç‰ˆæœ¬å·ï¼ˆä¸²è¡Œç‰ˆæœ¬æ ‡è¯†ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Studentç±»ä¸­æ·»åŠ ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">66666L</span>;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å†è¿è¡ŒDemo7å°±ä¼šæŠ¥ä¸€ä¸ªæ— æ•ˆç±»çš„å¼‚å¸¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java.io.InvalidClassException:</span><br><span class="line">local <span class="keyword">class</span> <span class="title class_">incompatible</span>: stream <span class="type">classdesc</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">3126921853274410929</span>, local <span class="keyword">class</span> <span class="title class_">serialVersionUID</span> = <span class="number">666660</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ„æ€å°±æ˜¯ä¸¤ä¸ªç±»çš„serialVersionUIDä¸ä¸€æ ·ã€‚å¯ä»¥çœ‹åˆ°ä¹‹å‰è™½ç„¶æ²¡æœ‰æ˜¾å¼æ·»åŠ åºåˆ—ç‰ˆæœ¬å·ï¼Œä½†å®ƒå·²ç»è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªã€‚æˆ‘ä»¬å†è¿è¡Œä¸€ä¸‹Demo6åºåˆ—åŒ–ï¼Œå†è¿è¡ŒDemo7ååºåˆ—åŒ–å°±å¯ä»¥æ­£å¸¸æ‰§è¡Œäº†ã€‚</li>
<li>ä½¿ç”¨transientï¼ˆçŸ­æš‚çš„ï¼‰ä¿®é¥°å±æ€§ï¼Œå¯ä»¥é¿å…è¯¥å±æ€§è¢«åºåˆ—åŒ–ã€‚ç”¨å®ƒæ¥ä¿®é¥°ageï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">int</span> age;</span><br></pre></td></tr></table></figure>

<ul>
<li>æŠŠtangè¿™ä¸ªå¯¹è±¡åºåˆ—åŒ–åå†ååºåˆ—åŒ–ï¼Œè¿™ä¸ªå¯¹è±¡çš„ageå±æ€§å°±å˜æˆäº†0ã€‚</li>
<li>é™æ€å±æ€§ä¸èƒ½è¢«åºåˆ—åŒ–ã€‚</li>
<li>å¯ä»¥åˆ©ç”¨é›†åˆæ¥åºåˆ—åŒ–å¤šä¸ªå¯¹è±¡ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ArrayList&lt;Student&gt; arrayList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Student&gt;();</span><br><span class="line">arrayList.add(s1);</span><br><span class="line">arrayList.add(s2);</span><br><span class="line">arrayList.add(s3);</span><br><span class="line">objectOutputStream.writeObject(arrayList);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ArrayList&lt;Student&gt; list=(ArrayList&lt;Student&gt;)objectInputStream.readObject();</span><br></pre></td></tr></table></figure>

<h1 id="ç¼–ç æ–¹å¼"><a href="#ç¼–ç æ–¹å¼" class="headerlink" title="ç¼–ç æ–¹å¼"></a><strong>ç¼–ç æ–¹å¼</strong></h1><ul>
<li><p>IOS-8859-1</p>
<p>æ”¶å½•é™¤ASCIIå¤–ï¼Œè¿˜åŒ…æ‹¬è¥¿æ¬§ã€å¸Œè…Šè¯­ã€æ³°è¯­ã€é˜¿æ‹‰ä¼¯è¯­ã€å¸Œä¼¯æ¥è¯­å¯¹åº”çš„æ–‡å­—ç¬¦å·ã€‚é‡‡ç”¨1ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œæœ€å¤šåªèƒ½è¡¨ç¤º256ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p>UTF-8</p>
<p>é’ˆå¯¹Unicodeç è¡¨çš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ã€‚å›½é™…ä¸Šä½¿ç”¨çš„ç¼–ç ï¼Œä¹Ÿç§°ä¸ºâ€œä¸‡å›½ç â€ï¼Œæ”¶å½•äº†å‡ ä¹æ‰€æœ‰å›½å®¶çš„å¸¸ç”¨å­—ç¬¦ã€‚é‡‡ç”¨1è‡³3ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p>GB2312</p>
<p>ç®€ä½“ä¸­æ–‡ï¼Œé‡‡ç”¨1ä¸ªæˆ–2ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ï¼Œ95å¹´ä¹‹å‰æ‰€é‡‡ç”¨çš„ç¼–ç ã€‚</p>
</li>
<li><p>GBK</p>
<p>ç®€ä½“ä¸­æ–‡çš„æ‰©å……ï¼ŒGB2312çš„å‡çº§ç‰ˆæœ¬ã€‚</p>
</li>
<li><p>BIG5</p>
<p>å°æ¹¾ï¼Œç¹ä½“ä¸­æ–‡ã€‚</p>
</li>
</ul>
<p><strong>å½“ç¼–ç æ–¹å¼å’Œè§£ç æ–¹å¼ä¸ä¸€è‡´æ—¶ï¼Œä¼šå‡ºç°ä¹±ç ã€‚</strong>å‡å¦‚Demo1ä¸­çš„æ–‡ä»¶å†…å®¹ä¸æ˜¯å­—æ¯è€Œæ˜¯â€œ<strong>æˆ‘çˆ±ä¸­å›½</strong>â€è¿™æ ·çš„æ±‰å­—ï¼Œé‚£ä¹ˆè¯»å–å‡ºæ¥çš„ä¿¡æ¯å°±æ˜¯ä¹±ç ã€‚å› ä¸ºå­—èŠ‚æµæŒ‰å­—èŠ‚è¾“å…¥è¾“å‡ºï¼Œè€Œè¿™å››ä¸ªæ±‰å­—å äº†12ä¸ªå­—èŠ‚ï¼ŒæŠŠä¸€ä¸ªæ±‰å­—æŒ‰ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚è¯»å…¥è‡ªç„¶ä¼šå‡ºç°é—®é¢˜ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨å­—ç¬¦æµã€‚</p>
<h1 id="å­—ç¬¦æµ"><a href="#å­—ç¬¦æµ" class="headerlink" title="å­—ç¬¦æµ"></a><strong>å­—ç¬¦æµ</strong></h1><p><img src="https://pic.downk.cc/item/5f9ef3151cd1bbb86b28470e.png" alt="img"></p>
<h2 id="å­—ç¬¦æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼š"><a href="#å­—ç¬¦æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼š" class="headerlink" title="å­—ç¬¦æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼š"></a><strong>å­—ç¬¦æµçš„çˆ¶ç±»ï¼ˆæŠ½è±¡ç±»ï¼‰</strong>ï¼š</h2><ul>
<li><p><strong>Readerï¼š</strong>å­—ç¬¦è¾“å…¥æµ</p>
<ul>
<li><p><code>public int read()</code></p>
<p>ä»æµä¸­è¯»å–å•ä¸ªå­—ç¬¦ï¼Œç”¨æ•´å‹æ¥è¿”å›è¯»å–çš„å­—ç¬¦ï¼›å½“è¯»åˆ°æµåº•éƒ¨æ—¶è¿”å›-1ã€‚</p>
</li>
<li><p><code>public int read(char[] c)</code></p>
<p>ä»æµä¸­è¯»å–å­—ç¬¦ä¿å­˜åˆ°cæ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–çš„å­—ç¬¦ä¸ªæ•°ï¼Œå½“è¯»åˆ°æµåº•éƒ¨æ—¶è¿”å›-1ã€‚</p>
</li>
<li><p><code>public int read(char[] cbuf,int off,int len)&#123;&#125;</code></p>
<p>æŠ½è±¡æ–¹æ³•ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>Writerï¼š</strong>å­—ç¬¦è¾“å‡ºæµ</p>
<ul>
<li><p><code>public void write(int n)</code></p>
<p>å†™å…¥å•ä¸ªå­—ç¬¦ï¼Œåªèƒ½å†™å…¥åŒ…å«16ä½ä½é˜¶å­—èŠ‚çš„æ•´å‹æ•°å€¼ï¼Œ16ä½é«˜é˜¶å­—èŠ‚å°†ä¼šè¢«å¿½ç•¥ã€‚</p>
</li>
<li><p><code>public void write(String str)</code></p>
<p>å†™å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
</li>
<li><p><code>public void write(char[] cbuf)</code></p>
<p>å†™å…¥ä¸€ä¸ªå­—ç¬¦æ•°ç»„ã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 id="å­—ç¬¦æµçš„å­ç±»"><a href="#å­—ç¬¦æµçš„å­ç±»" class="headerlink" title="å­—ç¬¦æµçš„å­ç±»"></a><strong>å­—ç¬¦æµçš„å­ç±»</strong></h2><ul>
<li><p><strong>FileReaderï¼š</strong></p>
<ul>
<li><p><code>public int read()</code></p>
<p>ç»§æ‰¿è‡ªInputStreamReaderç±»ã€‚è¯»å–å•ä¸ªå­—ç¬¦ï¼Œè¿”å›è¯»å–çš„å­—ç¬¦ï¼Œå½“è¯»åˆ°æµåº•éƒ¨æ—¶è¿”å›-1ã€‚</p>
</li>
<li><p><code>public int read(char[] c)</code></p>
<p>ç»§æ‰¿è‡ªReaderç±»ã€‚</p>
</li>
<li><p><code>public int read(char[] cbuf,int offset,int length)</code></p>
<p>ç»§æ‰¿è‡ªInputStreamReaderç±»ã€‚ä»æµä¸­è¯»å–éƒ¨åˆ†å­—ç¬¦åˆ°cbufä¸­æŒ‡å®šä½ç½®ï¼Œè¿”å›è¯»å–åˆ°çš„å­—ç¬¦ä¸ªæ•°ï¼Œå½“è¯»åˆ°æµåº•éƒ¨æ—¶è¿”å›-1ã€‚</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;	</span><br><span class="line">		<span class="comment">//æ–‡ä»¶å†…å®¹ï¼š</span></span><br><span class="line">		<span class="comment">//æµ‹è¯•æµ‹è¯•æµ‹è¯•ã€‚</span></span><br><span class="line">		FileReader fileReader=<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;d:\\cbuf.txt&quot;</span>);</span><br><span class="line">		<span class="type">int</span> data;</span><br><span class="line">		<span class="comment">//read();ä¸å­—èŠ‚æµä¸åŒï¼Œè¯¥æ–¹æ³•è¯»å–å•ä¸ªå­—ç¬¦è€Œä¸æ˜¯å­—èŠ‚</span></span><br><span class="line">		<span class="keyword">while</span>((data=fileReader.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">			System.out.print((<span class="type">char</span>)data);</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">//è¾“å‡ºï¼š</span></span><br><span class="line">        <span class="comment">//æµ‹è¯•æµ‹è¯•æµ‹è¯•ã€‚</span></span><br><span class="line">		fileReader.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç æ‰§è¡Œåç†åº”æ˜¯æ­£å¸¸è¾“å‡ºä¸€æ®µæ–‡å­—ï¼Œä½†æˆ‘è¿™é‡Œå‡ºç°äº†æ–‡å­—ä¹±ç ã€‚çŒœæµ‹æ˜¯ç¼–ç å‡ºç°äº†é—®é¢˜ï¼Œäºæ˜¯æŸ¥çœ‹æœ¬åœ°æ–‡æœ¬çš„ä¿å­˜æ ¼å¼ä¸ºUTF-8ï¼Œæ„Ÿè§‰ä¹Ÿæ²¡é”™ï¼Œäºæ˜¯æ‰“å¼€JDK APIæŸ¥çœ‹FileReaderç±»çš„æè¿°ï¼š</p>
<blockquote>
<p>Convenience class for reading character files. The constructors of this class assume that the default character encoding and the default byte-buffer size are appropriate. To specify these values yourself, construct an InputStreamReader on a FileInputStream.</p>
</blockquote>
<p>å¤§æ„å°±æ˜¯è¯¥ç±»çš„æ„é€ æ–¹æ³•æœ‰ä¸€ä¸ªé»˜è®¤çš„å­—ç¬¦ç¼–ç æ ¼å¼å’Œä¸€ä¸ªé»˜è®¤å­—èŠ‚ç¼“å†²åŒºï¼Œå¹¶æ²¡æœ‰æŒ‡æ˜è¿™ä¸ªç¼–ç æ ¼å¼å°±æ˜¯UTF-8ã€‚äºæ˜¯æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤ç¼–ç ï¼Œæ‰“å¼€CMDè¾“å…¥chcpï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ä¸º936çš„æ´»åŠ¨ç¼–ç é¡µï¼Œé€šè¿‡æŸ¥è¯¢å¾—çŸ¥è¯¥ä»£ç é¡µæ‰€å¯¹åº”çš„å›½å®¶ï¼ˆåœ°åŒºï¼‰æˆ–è¯­è¨€ä¸ºï¼šä¸­å›½ - ç®€ä½“ä¸­æ–‡(GB2312)ã€‚è¿™ä¸æœ¬åœ°æ‰€ä¿å­˜çš„æ–‡æœ¬ç¼–ç UTF-8ä¸ä¸€è‡´ï¼Œæ‰€ä»¥å¯¼è‡´äº†æ–‡å­—ä¹±ç çš„å‡ºç°ã€‚è€Œè¦æŒ‡å®šç¼–ç æ ¼å¼éœ€è¦åˆ›å»ºä¸€ä¸ªInputStreamReaderæˆ–FileInputStreamå¯¹è±¡ä½¿ç”¨å…¶æ„é€ æ–¹æ³•ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åœ¨æœ¬åœ°èƒ½æ­£å¸¸è¿è¡Œçš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;	</span><br><span class="line">        <span class="comment">//æŒ‡å®šç¼–ç æ ¼å¼</span></span><br><span class="line">		InputStreamReader inputStreamReader=<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\cbuf.txt&quot;</span>),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">		<span class="type">int</span> data;</span><br><span class="line">		<span class="keyword">while</span>((data=inputStreamReader.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">			System.out.print((<span class="type">char</span>)data);</span><br><span class="line">		&#125;</span><br><span class="line">		inputStreamReader.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>FileWriter:</strong></p>
<ul>
<li><p><code>public void write(int c)</code></p>
<p>ç»§æ‰¿è‡ªOutputStreamWriterç±»ï¼Œå†™å…¥ä¸€ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p><code>public void write(String str)</code></p>
<p>ç»§æ‰¿è‡ªWriterç±»ã€‚</p>
</li>
<li><p><code>public void Write(char[] cbuf)</code></p>
<p>ç»§æ‰¿è‡ªWriterç±»ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨FileWriterå†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		FileWriter fileWriter=<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;d:\\w.txt&quot;</span>);</span><br><span class="line">		<span class="comment">//å†™å…¥</span></span><br><span class="line">		fileWriter.write(<span class="string">&quot;å†™æµ‹è¯•ã€‚&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å…³é—­</span></span><br><span class="line">		fileWriter.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å­—ç¬¦æµå°æ¡ˆä¾‹"><a href="#å­—ç¬¦æµå°æ¡ˆä¾‹" class="headerlink" title="å­—ç¬¦æµå°æ¡ˆä¾‹"></a><strong>å­—ç¬¦æµå°æ¡ˆä¾‹</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨FileReaderå’ŒFileWriteå¤åˆ¶æ–‡æœ¬æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> *  æ³¨ï¼šä¸èƒ½å¤åˆ¶å›¾ç‰‡æˆ–äºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		InputStreamReader inputStreamReader=<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\w.txt&quot;</span>));</span><br><span class="line">		FileWriter fileWriter=<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;d:\\w2.txt&quot;</span>);</span><br><span class="line">		<span class="comment">//è¯»å†™</span></span><br><span class="line">		<span class="type">int</span> data=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>((data=inputStreamReader.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">			fileWriter.write(data);			</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		inputStreamReader.close();</span><br><span class="line">		fileWriter.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å­—ç¬¦ç¼“å†²æµ"><a href="#å­—ç¬¦ç¼“å†²æµ" class="headerlink" title="å­—ç¬¦ç¼“å†²æµ"></a><strong>å­—ç¬¦ç¼“å†²æµ</strong></h3><ul>
<li><strong>ç¼“å†²æµ</strong>ï¼šBufferedReader/BufferedWriter<ul>
<li>é«˜æ•ˆè¯»å†™</li>
<li>æ”¯æŒæ¢è¡Œè¾“å…¥ç¬¦</li>
<li>å¯ä¸€æ¬¡å†™ä¸€è¡Œã€è¯»ä¸€è¡Œã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å­—ç¬¦ç¼“å†²æµè¯»å–æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * BufferedReader</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		InputStreamReader inputStreamReader=<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\cbuf.txt&quot;</span>),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">		BufferedReader bufferedReader=<span class="keyword">new</span> <span class="title class_">BufferedReader</span>(inputStreamReader);</span><br><span class="line">		<span class="comment">//read(char[] cbuf)</span></span><br><span class="line">		<span class="type">char</span>[] cbuf=<span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>];</span><br><span class="line">		<span class="type">int</span> count;</span><br><span class="line">		<span class="keyword">while</span>((count=bufferedReader.read(cbuf))!=-<span class="number">1</span>) &#123;</span><br><span class="line">			System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(cbuf,<span class="number">0</span>,count));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//readline();</span></span><br><span class="line">		<span class="comment">//è¯¥æ–¹æ³•ä¸€æ¬¡è¯»å–ä¸€è¡Œï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">		String line;</span><br><span class="line">		<span class="keyword">while</span>((line=bufferedReader.readLine())!=<span class="literal">null</span>) &#123;</span><br><span class="line">			System.out.println(line);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å­—ç¬¦ç¼“å†²æµå†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * BufferedWriter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		BufferedWriter bufferedWriter=<span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;d:\\w3.txt&quot;</span>));</span><br><span class="line">		bufferedWriter.write(<span class="string">&quot;å››çº§æˆç»©ï¼Ÿ&quot;</span>);</span><br><span class="line">		<span class="comment">//å†™å…¥ä¸€ä¸ªæ¢è¡Œç¬¦windows \r\n  linux \n</span></span><br><span class="line">		bufferedWriter.newLine();</span><br><span class="line">		bufferedWriter.write(<span class="string">&quot;æµ‹è¯•&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		bufferedWriter.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰“å°æµ"><a href="#æ‰“å°æµ" class="headerlink" title="æ‰“å°æµ"></a><strong>æ‰“å°æµ</strong></h3><ul>
<li><strong>PrintWriterï¼š</strong><ul>
<li>å°è£…äº†print()/println()æ–¹æ³•ï¼Œæ”¯æŒå†™å…¥åæ¢è¡Œã€‚</li>
<li>æ”¯æŒæ•°æ®åŸæ ·æ‰“å°ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PrintWriterçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">		PrintWriter printWriter=<span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;d:\\p.txt&quot;</span>);</span><br><span class="line">		<span class="comment">//æ‰“å°åˆ°æ–‡ä»¶</span></span><br><span class="line">		printWriter.println(<span class="number">97</span>);<span class="comment">//97</span></span><br><span class="line">		printWriter.println(<span class="string">&#x27;b&#x27;</span>);<span class="comment">//b</span></span><br><span class="line">		printWriter.println(<span class="number">3.14</span>);<span class="comment">//3.14</span></span><br><span class="line">		printWriter.println(<span class="literal">true</span>);<span class="comment">//true</span></span><br><span class="line">		</span><br><span class="line">		printWriter.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è½¬æ¢æµ"><a href="#è½¬æ¢æµ" class="headerlink" title="è½¬æ¢æµ"></a><strong>è½¬æ¢æµ</strong></h3><ul>
<li><strong>æ¡¥è½¬æ¢æµ</strong>ï¼šInputStreamReader/OutputStreamWriter<ul>
<li>å¯å°†å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµã€‚</li>
<li>å¯è®¾ç½®å­—ç¬¦çš„ç¼–ç æ–¹å¼ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨OutputStreamWriterå†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">//å¯ä»¥è‡ªè¡ŒæŒ‡å®šç¼–ç </span></span><br><span class="line">		OutputStreamWriter outputStreamWriter=<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\info.txt&quot;</span>));</span><br><span class="line">		</span><br><span class="line">		outputStreamWriter.write(<span class="string">&quot;çŸ¥é“çš„è¶Šå¤šï¼Œä¸æ˜ç™½çš„ä¹Ÿå°±æ›´å¤šï¼Œå­¦æµ·æ— æ¶¯ã€‚&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		outputStreamWriter.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Fileç±»"><a href="#Fileç±»" class="headerlink" title="Fileç±»"></a><strong>Fileç±»</strong></h1><ul>
<li><p><strong>æ¦‚å¿µ</strong>ï¼šä»£è¡¨ç‰©ç†ç›˜ç¬¦ä¸­çš„ä¸€ä¸ª<strong>æ–‡ä»¶</strong>æˆ–è€…<strong>æ–‡ä»¶å¤¹</strong>ã€‚</p>
</li>
<li><p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><p><code>public boolean CreateNewFile()</code></p>
<p>å½“ä¸”ä»…å½“æŒ‡å®šçš„æ–‡ä»¶åä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„æ–°çš„ã€ç©ºçš„æ–‡ä»¶ã€‚åˆ›å»ºæˆåŠŸè¿”å›trueï¼Œå¦‚æœæŒ‡å®šæ–‡ä»¶åå·²å­˜åœ¨è¿”å›falseã€‚</p>
</li>
<li><p><code>public boolean mkdir()</code></p>
<p>åˆ›å»ºä¸€ä¸ªæŒ‡å®šè·¯å¾„åçš„æ–‡ä»¶å¤¹ã€‚å½“ä¸”ä»…å½“æ–‡ä»¶å¤¹è¢«åˆ›å»ºæ—¶è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p>
</li>
<li><p><code>public boolean delete()</code></p>
<p>åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å¿…é¡»ä¸ºç©ºæ‰èƒ½è¢«åˆ é™¤ã€‚å½“ä¸”ä»…å½“æŒ‡å®šçš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è¢«åˆ é™¤æ—¶è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p>
</li>
<li><p><code>public boolean exists()</code></p>
<p>æ£€æŸ¥æŒ‡å®šçš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ã€‚å½“ä¸”ä»…å½“æŒ‡å®šçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹å­˜åœ¨æ—¶è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p>
</li>
<li><p><code>public File[] listFiles()</code></p>
<p>åˆ—å‡ºç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šè·¯å¾„åä¸­çš„æ–‡ä»¶æ•°ç»„ï¼Œå¦‚æœæŒ‡å®šçš„è·¯å¾„åä¸ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰å°±è¿”å›nullã€‚</p>
</li>
<li><p><code>public boolean renameTo(File dest)</code></p>
<p>é‡å‘½åä¸€ä¸ªè·¯å¾„åæ‰€æŒ‡å®šçš„æ–‡ä»¶ã€‚å½“ä¸”ä»…å½“ä¿®æ”¹æ“ä½œæˆåŠŸæ—¶è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a><strong>æ–‡ä»¶æ“ä½œ</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºæ–‡ä»¶æ“ä½œ</span></span><br><span class="line"><span class="comment"> * åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">		<span class="comment">//è¾“å‡ºï¼š</span></span><br><span class="line">		<span class="comment">//è·¯å¾„åˆ†éš”ç¬¦ï¼š;</span></span><br><span class="line">		<span class="comment">//åç§°åˆ†éš”ç¬¦ï¼š\</span></span><br><span class="line">		separator();</span><br><span class="line">		</span><br><span class="line">		fileOp();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">separator</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è·¯å¾„åˆ†éš”ç¬¦ï¼š&quot;</span>+File.pathSeparator);</span><br><span class="line">		System.out.println(<span class="string">&quot;åç§°åˆ†éš”ç¬¦ï¼š&quot;</span>+File.separator);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">fileOp</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">		<span class="comment">//1.åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">		File file=<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\file.txt&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(!file.exists()) &#123;</span><br><span class="line">			<span class="type">boolean</span> flag=file.createNewFile();			</span><br><span class="line">			System.out.println(<span class="string">&quot;åˆ›å»ºçŠ¶æ€ï¼š&quot;</span>+flag);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.åˆ é™¤æ–‡ä»¶</span></span><br><span class="line">		<span class="comment">//2.1 ç›´æ¥åˆ é™¤</span></span><br><span class="line">		<span class="comment">/* System.out.println(&quot;åˆ é™¤ç»“æœï¼š&quot;+file.delete()); */</span></span><br><span class="line">		<span class="comment">//2.2 ä½¿ç”¨JVMé€€å‡ºæ—¶åˆ é™¤ï¼ˆä¸æ˜¯è‡ªå·±åˆ é™¤ï¼‰</span></span><br><span class="line">		file.deleteOnExit();</span><br><span class="line">		<span class="comment">//è°ƒç”¨ä¼‘çœ ç¨‹åºè§‚å¯Ÿåˆ é™¤æ“ä½œ</span></span><br><span class="line">		Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//3.è·å–æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">		System.out.println(<span class="string">&quot;æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼š&quot;</span>+file.getAbsolutePath());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–è·¯å¾„ï¼š&quot;</span>+file.getPath());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–çˆ¶ç›®å½•ï¼š&quot;</span>+file.getParent());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–æ–‡ä»¶åç§°ï¼š&quot;</span>+file.getName());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–æ–‡ä»¶é•¿åº¦ï¼š&quot;</span>+file.length());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–æ–‡ä»¶åˆ›å»ºæ—¶é—´ï¼š&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>(file.lastModified()).toLocaleString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦å¯å†™ï¼š&quot;</span>+file.canWrite());</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦å¯è¯»ï¼š&quot;</span>+file.canRead());</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦éšè—ï¼š&quot;</span>+file.isHidden());</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦æ˜¯æ–‡ä»¶ï¼š&quot;</span>+file.isFile());</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ï¼š&quot;</span>+file.isDirectory());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶å¤¹æ“ä½œ"><a href="#æ–‡ä»¶å¤¹æ“ä½œ" class="headerlink" title="æ–‡ä»¶å¤¹æ“ä½œ"></a><strong>æ–‡ä»¶å¤¹æ“ä½œ</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶å¤¹çš„æ“ä½œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		directorOp();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title function_">directorOp</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//1.åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">		File dir=<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\aaa\\bbb\\ccc&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (!dir.exists()) &#123;</span><br><span class="line">			<span class="comment">//mkdir();åªèƒ½åˆ›å»ºå•çº§ç›®å½•</span></span><br><span class="line">			<span class="type">boolean</span> flag=dir.mkdirs();<span class="comment">//åˆ›å»ºå¤šçº§ç›®å½•</span></span><br><span class="line">			System.out.println(<span class="string">&quot;åˆ›å»ºç»“æœï¼š&quot;</span>+flag);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.åˆ é™¤æ–‡ä»¶å¤¹</span></span><br><span class="line">		<span class="comment">//2.1 ç›´æ¥åˆ é™¤ï¼ˆå¿…é¡»ä¸ºç©ºç›®å½•ï¼‰</span></span><br><span class="line">		<span class="comment">//System.out.println(&quot;åˆ é™¤ç»“æœï¼š&quot;+dir.delete());</span></span><br><span class="line">		<span class="comment">//2.2 ä½¿ç”¨jvmåˆ é™¤</span></span><br><span class="line">		dir.deleteOnExit();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//3.è·å–æ–‡ä»¶å¤¹ä¿¡æ¯</span></span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–ç»å¯¹è·¯å¾„ï¼š&quot;</span>+dir.getAbsolutePath());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–è·¯å¾„ï¼š&quot;</span>+dir.getPath());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–çˆ¶ç›®å½•ï¼š&quot;</span>+dir.getParent());</span><br><span class="line">		System.out.println(<span class="string">&quot;è·å–åˆ›å»ºæ—¶é—´ï¼š&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>(dir.lastModified()).toLocaleString());</span><br><span class="line">		System.out.println(<span class="string">&quot;æ–‡ä»¶å¤¹åç§°ï¼š&quot;</span>+dir.getName());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦éšè—ï¼š&quot;</span>+dir.isHidden());</span><br><span class="line">		System.out.println(<span class="string">&quot;æ˜¯å¦æ˜¯æ–‡ä»¶ï¼š&quot;</span>+dir.isFile());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//5.éå†æ–‡ä»¶å¤¹</span></span><br><span class="line">		File dir2=<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:\\&quot;</span>);</span><br><span class="line">		String[] files=dir2.list();</span><br><span class="line">		<span class="keyword">for</span> (String string : files) &#123;</span><br><span class="line">			System.out.println(string);</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶è¿‡æ»¤å™¨"><a href="#æ–‡ä»¶è¿‡æ»¤å™¨" class="headerlink" title="æ–‡ä»¶è¿‡æ»¤å™¨"></a><strong>æ–‡ä»¶è¿‡æ»¤å™¨</strong></h2><ul>
<li><p><strong>FileFilteræ¥å£ï¼š</strong></p>
<p><code>public interface FileFilter</code></p>
<ul>
<li><code>boolean accepte(File pathname)</code></li>
<li>å½“è°ƒç”¨Fileç±»ä¸­çš„listFiles()æ–¹æ³•æ—¶ï¼Œæ”¯æŒä¼ å…¥FileFilteræ¥å£å®ç°ç±»ï¼Œå¯¹è·å–çš„æ–‡ä»¶è¿›è¡Œè¿‡æ»¤ï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶æ‰å¯ä»¥å‡ºç°åœ¨listFiles()çš„è¿”å›å€¼ä¸­ã€‚</li>
</ul>
<p>åœ¨ä¸Šæ–‡Demo2ä¸­æ·»åŠ æ¼”ç¤ºä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title function_">directorOp</span><span class="params">()</span> &#123;</span><br><span class="line">    File[] files1=dir2.listFiles(<span class="keyword">new</span> <span class="title class_">FileFilter</span>() &#123;		</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">accept</span><span class="params">(File pathname)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(pathname.getName().endsWith(<span class="string">&quot;.txt&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (File file : files1) &#123;</span><br><span class="line">        System.out.println(file.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶æ“ä½œå°æ¡ˆä¾‹"><a href="#æ–‡ä»¶æ“ä½œå°æ¡ˆä¾‹" class="headerlink" title="æ–‡ä»¶æ“ä½œå°æ¡ˆä¾‹"></a><strong>æ–‡ä»¶æ“ä½œå°æ¡ˆä¾‹</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1.é€’å½’éå†æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment"> * 2.é€’å½’åˆ é™¤æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//ç•¥</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æ¡ˆä¾‹1ï¼šé€’å½’éå†æ–‡ä»¶å¤¹</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">listDer</span><span class="params">(File dir)</span> &#123;</span><br><span class="line">		File[] files=dir.listFiles();</span><br><span class="line">		<span class="keyword">if</span>(files!=<span class="literal">null</span>&amp;&amp;files.length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">				<span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">					listDer(file);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					System.out.println(file.getName());</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æ¡ˆä¾‹2ï¼šé€’å½’åˆ é™¤æ–‡ä»¶å¤¹</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteDir</span><span class="params">(File dir)</span> &#123;</span><br><span class="line">		File[] files=dir.listFiles();</span><br><span class="line">		<span class="keyword">if</span> (files!=<span class="literal">null</span>&amp;&amp;files.length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">				<span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">					deleteDir(file);</span><br><span class="line">				&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">					file.delete();</span><br><span class="line">				&#125;				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;	</span><br><span class="line">		dir.delete();	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="è¡¥å……ï¼šProperties"><a href="#è¡¥å……ï¼šProperties" class="headerlink" title="è¡¥å……ï¼šProperties"></a><strong>è¡¥å……ï¼šProperties</strong></h1><ul>
<li><p><strong>Propertiesï¼š</strong>å±æ€§é›†åˆ</p>
</li>
<li><p><strong>ç‰¹ç‚¹ï¼š</strong></p>
</li>
<li><p>å­˜å‚¨å±æ€§åå’Œå±æ€§å€¼ï¼ˆé”®å€¼å¯¹ï¼‰ã€‚</p>
<ul>
<li>å±æ€§åå’Œå±æ€§å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚</li>
<li>æ²¡æœ‰æ³›å‹ã€‚</li>
<li>å’Œæµæœ‰å…³ï¼ˆæ‰€ä»¥æ²¡æœ‰æ•´ç†åœ¨é›†åˆé‡Œé¢ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>æ–¹æ³•ï¼š</strong></p>
<ul>
<li><p><code>public String getProperty(String key)</code></p>
<p>æ ¹æ®keyåœ¨å±æ€§åˆ—è¡¨é‡ŒæŸ¥æ‰¾valueï¼Œå¦‚æœåŸå§‹å±æ€§åˆ—è¡¨æ‰¾ä¸åˆ°å°±å»é»˜è®¤å±æ€§åˆ—è¡¨æ‰¾ã€‚è¿”å›keyæ‰€å¯¹åº”çš„valueã€‚</p>
</li>
<li><p><code>public void list(PrintWriter out)</code></p>
<p>å°†å±æ€§åˆ—è¡¨æ‰“å°åœ¨æŒ‡å®šçš„è¾“å‡ºæµä¸Šï¼Œåœ¨debugæ—¶å¾ˆæœ‰ç”¨ã€‚</p>
</li>
<li><p><code>public Object setProperty(String key,String value)</code></p>
<p>å†…éƒ¨è°ƒç”¨çš„æ˜¯Hashtableçš„putæ–¹æ³•ï¼Œå°†keyå’Œvalueæˆå¯¹åœ°ä¿å­˜åœ¨å±æ€§åˆ—è¡¨ä¸­ã€‚è¿”å›è¿™ä¸ªkeyä¸Šä¸€ä¸ªå¯¹åº”çš„valueï¼Œæ²¡æœ‰å°±è¿”å›nullã€‚</p>
</li>
</ul>
<p>Propertieså¯ä»¥ä¿å­˜åœ¨ä¸€ä¸ªæµä¸­æˆ–æ˜¯ä»ä¸€ä¸ªæµä¸­åŠ è½½ï¼Œå±æ€§åˆ—è¡¨ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸€ä¸ªå±æ€§åˆ—è¡¨å¯ä»¥åŒ…æ‹¬å¦ä¸€ä¸ªç¬¬äºŒå±æ€§åˆ—è¡¨æ¥ä½œä¸ºå®ƒçš„é»˜è®¤å€¼ï¼Œå¦‚æœåœ¨åŸå§‹å±æ€§åˆ—è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°keyæ—¶å°±æœç´¢ç¬¬äºŒå±æ€§åˆ—è¡¨ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºé›†åˆpropertiesçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		Properties properties=<span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">		<span class="comment">//æ·»åŠ æ•°æ®</span></span><br><span class="line">		properties.setProperty(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;tangrui&quot;</span>);</span><br><span class="line">		properties.setProperty(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;21&quot;</span>);</span><br><span class="line">		System.out.println(properties.toString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//éå†</span></span><br><span class="line">		<span class="comment">//3.1 keySet ç•¥</span></span><br><span class="line">		<span class="comment">//3.2 entrySet ç•¥</span></span><br><span class="line">		<span class="comment">//3.3 stringPropertyNames()</span></span><br><span class="line">		Set&lt;String&gt; set=properties.stringPropertyNames();</span><br><span class="line">		<span class="keyword">for</span> (String string : set) &#123;</span><br><span class="line">			System.out.println(string+<span class="string">&quot; &quot;</span>+properties.getProperty(string));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å’Œæµæœ‰å…³çš„æ–¹æ³•</span></span><br><span class="line">		<span class="comment">//list</span></span><br><span class="line">		PrintWriter printWriter=<span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;d:\\print.txt&quot;</span>);</span><br><span class="line">		properties.list(printWriter);</span><br><span class="line">		printWriter.close();</span><br><span class="line">		<span class="comment">//storeä¿å­˜</span></span><br><span class="line">		FileOutputStream fileOutputStream=<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:\\s.properties&quot;</span>);</span><br><span class="line">		properties.store(fileOutputStream, <span class="string">&quot;NOTES&quot;</span>);</span><br><span class="line">		fileOutputStream.close();</span><br><span class="line">		<span class="comment">//loadåŠ è½½</span></span><br><span class="line">		Properties properties2=<span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">		FileInputStream fileInputStream=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:\\s.properties&quot;</span>);</span><br><span class="line">		properties2.load(fileInputStream);</span><br><span class="line">		fileInputStream.close();</span><br><span class="line">		System.out.println(properties2.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring</title>
    <url>/2021/05/16/Spring/</url>
    <content><![CDATA[<h1 id="ä¸€ã€Springæ¦‚è¿°"><a href="#ä¸€ã€Springæ¦‚è¿°" class="headerlink" title="ä¸€ã€Springæ¦‚è¿°"></a>ä¸€ã€Springæ¦‚è¿°</h1><h2 id="1-1-æ¦‚å¿µ"><a href="#1-1-æ¦‚å¿µ" class="headerlink" title="1.1 æ¦‚å¿µ"></a>1.1 æ¦‚å¿µ</h2><ul>
<li>Springæ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†æ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€å¥—java EEè§£å†³æ–¹æ¡ˆã€‚</li>
<li>Springæ˜¯ä¼—å¤šä¼˜ç§€è®¾è®¡æ¨¡å¼çš„ç»„åˆï¼ˆå·¥å‚ã€å•ä¾‹ã€ä»£ç†ã€é€‚é…å™¨ã€åŒ…è£…å™¨ã€è§‚å¯Ÿè€…ã€æ¨¡æ¿ã€ç­–ç•¥ï¼‰ã€‚</li>
<li>Springå¹¶æœªæ›¿ä»£ç°æœ‰æ¡†æ¶äº§å“ï¼Œè€Œæ˜¯å°†ä¼—å¤šæ¡†æ¶è¿›è¡Œæœ‰æœºæ•´åˆï¼Œç®€åŒ–ä¼ä¸šçº§å¼€å‘ï¼Œä¿—ç§°â€œèƒ¶æ°´æ¡†æ¶â€</li>
</ul>
<h2 id="1-2-Springæ¶æ„ç»„æˆ"><a href="#1-2-Springæ¶æ„ç»„æˆ" class="headerlink" title="1.2 Springæ¶æ„ç»„æˆ"></a>1.2 Springæ¶æ„ç»„æˆ</h2><p>Springæ¶æ„ç”±è¯¸å¤šæ¨¡å—ç»„æˆï¼Œå¯åˆ†ç±»ä¸ºï¼š</p>
<ul>
<li><p>æ ¸å¿ƒæŠ€æœ¯ï¼š<strong>ä¾èµ–æ³¨å…¥</strong>ï¼Œäº‹ä»¶ï¼Œèµ„æºï¼Œi18nï¼ŒéªŒè¯ï¼Œæ•°æ®ç»‘å®šï¼Œç±»å‹è½¬æ¢ï¼ŒSpELï¼Œ<strong>AOP</strong>ã€‚</p>
</li>
<li><p>æµ‹è¯•ï¼šæ¨¡æ‹Ÿå¯¹è±¡ï¼ŒTestContextæ¡†æ¶ï¼ŒSpringMVCæµ‹è¯•ï¼ŒWebTestClientã€‚</p>
</li>
<li><p>æ•°æ®è®¿é—®ï¼š<strong>äº‹åŠ¡</strong>ï¼ŒDAOæ”¯æŒï¼ŒJDBCï¼ŒORMï¼Œå°é€XMLã€‚</p>
</li>
<li><p>Spring MVCå’ŒSpring WebFlux Webæ¡†æ¶ã€‚</p>
</li>
<li><p>é›†æˆï¼šè¿œç¨‹å¤„ç†ï¼ŒJMSï¼ŒJCAï¼ŒJMXï¼Œç”µå­é‚®ä»¶ï¼Œä»»åŠ¡ï¼Œè°ƒåº¦ï¼Œç¼“å­˜ã€‚</p>
</li>
<li><p>è¯­è¨€ï¼šKotlinï¼ŒGroovyï¼ŒåŠ¨æ€è¯­è¨€ã€‚</p>
<p><img src="https://img.imgdb.cn/item/602f7cb7e7e43a13c67cef1b.jpg" alt="img"></p>
</li>
</ul>
<p>Springæ¶æ„ä¸­æœ€æ ¸å¿ƒçš„ä¸€å—ç§°ä¸ºCore Containerï¼ˆæ ¸å¿ƒå®¹å™¨ï¼‰ï¼Œå®ƒæ­å»ºå¹¶ç®¡ç†ç€ä¸€ä¸ªâ€œå·¥å‚â€çš„è®¾è®¡æ¨¡å¼ï¼Œå·¥å‚ä¸­ç”¨æ¥ç”Ÿäº§ä¸€ä¸ªä¸€ä¸ªçš„å¯¹è±¡ã€‚Springæœ‰äº†è¿™æ ·çš„ç”Ÿäº§èƒ½åŠ›ä¹‹åå°±å¯ä»¥å»ç®¡ç†å®ƒæ‰€ç”Ÿäº§çš„å¯¹è±¡ï¼Œè¿›è€ŒæŠŠé¡¹ç›®ä¸­è¿™äº›å¯¹è±¡çš„åä½œå…³ç³»ã€è¿è¡Œæ¨¡å¼åŠ ä»¥è°ƒæ•´ä¼˜åŒ–ï¼Œè¾¾åˆ°å¯¹æ•´ä¸ªé¡¹ç›®çš„ä¸€ç§æ›´ä¼˜åŒ–åœ°ç®¡ç†ã€‚</p>
<h1 id="äºŒã€è‡ªå®šä¹‰å·¥å‚"><a href="#äºŒã€è‡ªå®šä¹‰å·¥å‚" class="headerlink" title="äºŒã€è‡ªå®šä¹‰å·¥å‚"></a>äºŒã€è‡ªå®šä¹‰å·¥å‚</h1><p>åœ¨å­¦ä¹ Springä¹‹å‰æˆ‘ä»¬å¯ä»¥è‡ªå·±æ­å»ºä¸€ä¸ªå·¥å‚ï¼Œæ¥çœ‹çœ‹å·¥å‚çš„åŸºæœ¬å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆã€‚</p>
<h2 id="2-1-é…ç½®æ–‡ä»¶"><a href="#2-1-é…ç½®æ–‡ä»¶" class="headerlink" title="2.1 é…ç½®æ–‡ä»¶"></a>2.1 é…ç½®æ–‡ä»¶</h2><p>bean.properties</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">userDao=lazydog.dao.UserDaoImpl</span><br><span class="line">userService=lazydog.service.UserServiceImpl</span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶ä¸­çš„ä¸¤ä¸ªç±»ä»¥åŠå…¶å®ç°ç±»éƒ½åªæœ‰ä¸€ä¸ªdeleteUseræ–¹æ³•ï¼Œæ–¹æ³•å†…åªæœ‰ä¸€ä¸ªæ‰“å°è¯­å¥ï¼Œæ‰€ä»¥æ­¤å¤„çœç•¥ã€‚</p>
<h2 id="2-2-å·¥å‚ç±»"><a href="#2-2-å·¥å‚ç±»" class="headerlink" title="2.2 å·¥å‚ç±»"></a>2.2 å·¥å‚ç±»</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> å·¥å‚ç±»</span></span><br><span class="line"><span class="comment"> 1.åŠ è½½é…ç½®æ–‡ä»¶ï¼Œä»¥ç¡®å®šç”Ÿäº§å“ªäº›ç±»</span></span><br><span class="line"><span class="comment"> 2.ç”Ÿäº§é…ç½®ä¸­è®°å½•çš„å¯¹åº”å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Properties properties=<span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFactory</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFactory</span><span class="params">(String config)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">        properties.load(MyFactory.class.getResourceAsStream(config));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getBean</span><span class="params">(String name)</span> <span class="keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡nameè·å–ç±»è·¯å¾„</span></span><br><span class="line">        String classPath=properties.getProperty(name);</span><br><span class="line">        <span class="comment">//é€šè¿‡åå°„æ„å»ºå¯¹è±¡</span></span><br><span class="line">        Class clazz=Class.forName(classPath);</span><br><span class="line">        <span class="comment">//è¿”å›å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-æµ‹è¯•ç±»"><a href="#2-3-æµ‹è¯•ç±»" class="headerlink" title="2.3 æµ‹è¯•ç±»"></a>2.3 æµ‹è¯•ç±»</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FactoryTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, IllegalAccessException, InstantiationException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºå·¥å‚å¯¹è±¡</span></span><br><span class="line">        MyFactory myFactory=<span class="keyword">new</span> <span class="title class_">MyFactory</span>(<span class="string">&quot;/bean.properties&quot;</span>);</span><br><span class="line">        <span class="comment">//2.åˆ©ç”¨å·¥å‚ç”Ÿäº§å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) myFactory.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        userDao.deleteUser(<span class="number">1</span>);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) myFactory.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">        userService.deleteUser(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œè¯´æ˜ç”Ÿäº§çš„ç±»å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">delete in Dao.</span><br><span class="line">delete in Service.</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€ç¯å¢ƒæ­å»º"><a href="#ä¸‰ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸‰ã€ç¯å¢ƒæ­å»º"></a>ä¸‰ã€ç¯å¢ƒæ­å»º</h1><h2 id="3-1-æ„å»ºMavené¡¹ç›®"><a href="#3-1-æ„å»ºMavené¡¹ç›®" class="headerlink" title="3.1 æ„å»ºMavené¡¹ç›®"></a>3.1 æ„å»ºMavené¡¹ç›®</h2><p>åœ¨Ideaä¸­åˆ›å»ºMavené¡¹ç›®å¹¶åœ¨pomä¸­å¯¼å…¥Springç›¸å…³ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2-åˆ›å»ºSpringé…ç½®æ–‡ä»¶"><a href="#3-2-åˆ›å»ºSpringé…ç½®æ–‡ä»¶" class="headerlink" title="3.2 åˆ›å»ºSpringé…ç½®æ–‡ä»¶"></a>3.2 åˆ›å»ºSpringé…ç½®æ–‡ä»¶</h2><p>å‘½åæ— é™åˆ¶ï¼Œä½†çº¦å®šæˆä¿—çš„å‘½åæœ‰ï¼šspring-context.xmlã€applicationContext.xmlã€beans.xmlã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éœ€è¦å·¥å‚ç”Ÿäº§çš„å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.dao.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-æµ‹è¯•ä¸€ä¸‹"><a href="#3-3-æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="3.3 æµ‹è¯•ä¸€ä¸‹"></a>3.3 æµ‹è¯•ä¸€ä¸‹</h2><p>åœ¨pomä¸­å†å¯¼å…¥junitåŒ…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringFactory</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSpringFactory</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.å¯åŠ¨å·¥å‚</span></span><br><span class="line">        ApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/spring-context.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//2.ç”Ÿäº§å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) context.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">        <span class="comment">//3.ä½¿ç”¨å¯¹è±¡</span></span><br><span class="line">        userDao.deleteUser(<span class="number">1</span>);</span><br><span class="line">        userService.deleteUser(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœæ­£å¸¸ã€‚</p>
<h1 id="å››ã€ä¾èµ–ä¸é…ç½®æ–‡ä»¶"><a href="#å››ã€ä¾èµ–ä¸é…ç½®æ–‡ä»¶" class="headerlink" title="å››ã€ä¾èµ–ä¸é…ç½®æ–‡ä»¶"></a>å››ã€ä¾èµ–ä¸é…ç½®æ–‡ä»¶</h1><p>Springæ¡†æ¶åŒ…å«å¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å„å¸å…¶èŒï¼Œå¯ä»¥ç»“åˆéœ€æ±‚å¼•å…¥ç›¸å…³ä¾èµ–jaråŒ…å®ç°åŠŸèƒ½ã€‚</p>
<p>åœ¨3.1èŠ‚ä¸­ï¼Œå¯¼å…¥ä¾èµ–æ—¶åªå¯¼äº†ä¸€ä¸ªï¼Œä½†é¡¹ç›®å®é™…å¯¼å…¥äº†å¤šä¸ªä¾èµ–ï¼Œåˆ†åˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://img.imgdb.cn/item/602faa90e7e43a13c692c835.jpg" alt="img"></p>
<h2 id="4-1-ä¾èµ–å…³ç³»"><a href="#4-1-ä¾èµ–å…³ç³»" class="headerlink" title="4.1 ä¾èµ–å…³ç³»"></a>4.1 ä¾èµ–å…³ç³»</h2><p><img src="https://img.imgdb.cn/item/602faaede7e43a13c692f4bd.jpg" alt="img"></p>
<p>ç®­å¤´çš„æŒ‡å‘è¡¨ç¤ºAä¾èµ–éœ€è¦ä¾èµ–Bä¾èµ–ï¼Œé‚£ä¹ˆå¯¼å…¥Aä¾èµ–æ—¶ä¼šè‡ªåŠ¨å¯¼å…¥Bä¾èµ–ã€‚æ‰€ä»¥åªéœ€è¦å¯¼å…¥æœ€å¤–å±‚jarå³å¯ç”±Mavenè‡ªåŠ¨å°†ç›¸å…³ä¾èµ–jarå¼•å…¥åˆ°é¡¹ç›®ä¸­ã€‚</p>
<h2 id="4-2-schema"><a href="#4-2-schema" class="headerlink" title="4.2 schema"></a>4.2 schema</h2><p>schemaçš„æ„æ€æ˜¯è§„èŒƒï¼Œ3.2èŠ‚å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶ä¸­çš„é¡¶çº§æ ‡ç­¾ä¸­åŒ…å«äº†è¯­ä¹‰åŒ–æ ‡ç­¾çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<ul>
<li>xmlnsï¼šè¯­ä¹‰åŒ–æ ‡ç­¾æ‰€åœ¨çš„å‘½åç©ºé—´ã€‚</li>
<li>xmlns:xsiï¼šXMLSchema-instance æ ‡ç­¾éµå¾ªschemaæ ‡ç­¾æ ‡å‡†ã€‚</li>
<li>xsi:schemaLocationï¼šxsdæ–‡ä»¶ä½ç½®ï¼Œç”¨ä»¥æè¿°æ ‡ç­¾è¯­ä¹‰ã€å±æ€§ã€å–å€¼èŒƒå›´ç­‰ã€‚</li>
</ul>
<p>xsdå°±æ˜¯xml schema definitionï¼Œxmlè§„èŒƒå®šä¹‰ã€‚</p>
<h1 id="äº”ã€IoCï¼ˆæ§åˆ¶åè½¬ï¼‰"><a href="#äº”ã€IoCï¼ˆæ§åˆ¶åè½¬ï¼‰" class="headerlink" title="äº”ã€IoCï¼ˆæ§åˆ¶åè½¬ï¼‰"></a>äº”ã€IoCï¼ˆæ§åˆ¶åè½¬ï¼‰</h1><p><strong>Inversion of Control</strong>ï¼šæ§åˆ¶åè½¬ã€‚</p>
<p>åè½¬äº†<strong>ä¾èµ–å…³ç³»</strong>çš„æ»¡è¶³æ–¹å¼ï¼Œç”±è‡ªå·±åˆ›å»ºçš„ä¾èµ–å¯¹è±¡ï¼Œå˜ä¸ºç”±å·¥å‚æ¨é€ï¼ˆå˜ä¸»åŠ¨ä¸ºè¢«åŠ¨ï¼Œå³ä¸ºåè½¬ï¼‰ã€‚è§£å†³äº†å…·æœ‰ä¾èµ–å…³ç³»çš„ç»„ä»¶ä¹‹é—´çš„å¼ºè€¦åˆï¼Œä½¿å¾—é¡¹ç›®å½¢æ€æ›´åŠ ç¨³å¥ã€‚</p>
<p>æ‰€è°“ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚UserServiceImplä¸­éœ€è¦è°ƒç”¨Daoå±‚æ–¹æ³•ï¼Œå°±ä¼šå»newä¸€ä¸ªDaoå¯¹è±¡ï¼›é‚£ä¹ˆserviceå°±ä¾èµ–daoï¼Œserviceæ»¡è¶³ä¾èµ–å…³ç³»çš„æ–¹å¼å°±æ˜¯newä¸€ä¸ªdaoå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="comment">//æ»¡è¶³ä¾èµ–å…³ç³»</span></span><br><span class="line">    UserDao userDao=<span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        userDao.deleteUser(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;delete in Service.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨newä¸€ä¸ªå¯¹è±¡çš„æ–¹å¼æ¥æ»¡è¶³ä¾èµ–å°±ä¼šé€ æˆå¼ºè€¦åˆï¼Œå¼ºè€¦åˆæ˜¯éœ€è¦æåŠ›é¿å…çš„ï¼Œå¦åˆ™ä¼šæœ‰â€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€çš„éº»çƒ¦ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åªç•™ä¸€ä¸ªdaoæ¥å£ï¼Œè€Œä¸å»newä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œç„¶åè®¾ç½®getå’Œsetæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">    userDao.deleteUser(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;delete in Service.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å°±æ²¡æœ‰å’Œä»»ä½•ä¸€ä¸ªdaoç±»å‘ç”Ÿè€¦åˆï¼Œä½†æ˜¯åŒæ ·è°ƒç”¨äº†deleteUseræ–¹æ³•ï¼Œç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.service.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸ºuserDaoå±æ€§èµ‹å€¼ï¼Œrefå€¼ä¸ºidä¸ºuserDaoçš„ä¸€ä¸ªbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åé‡æ–°æµ‹è¯•ä¸€ä¸‹ä»£ç ï¼Œå¦‚æœæ²¡æœ‰å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå°±è¯´æ˜é…ç½®æ–‡ä»¶ç”Ÿæ•ˆäº†ï¼›æœ€åè¿è¡Œæ­£å¸¸ã€‚å¦‚æœä»¥åéœ€è¦ä½¿ç”¨å…¶ä»–daoç±»ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å“åº”çš„beanï¼Œç„¶ååœ¨å±æ€§çš„refä¸­æ”¹æˆbeanç›¸åº”çš„idå³å¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶æ²¡æœ‰ä¿®æ”¹serviceæœ¬èº«çš„ä»£ç ï¼Œè¿™æ ·å°±ä¼šä½¿å¾—ä»£ç ç¨³å¥ã€‚è¿™æ ·çš„ä¸€ç§æ€æƒ³å°±æ˜¯IoCã€‚</p>
<h1 id="å…­ã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰"><a href="#å…­ã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰" class="headerlink" title="å…­ã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰"></a>å…­ã€DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰</h1><h2 id="6-1-æ¦‚å¿µ"><a href="#6-1-æ¦‚å¿µ" class="headerlink" title="6.1 æ¦‚å¿µ"></a>6.1 æ¦‚å¿µ</h2><p>åœ¨Springåˆ›å»ºå¯¹è±¡çš„åŒæ—¶ï¼Œä¸ºå…¶å±æ€§èµ‹å€¼ï¼Œç§°ä¹‹ä¸ºä¾èµ–æ³¨å…¥ã€‚</p>
<p>åœ¨ç¬¬äº”èŠ‚ä¸­é…ç½®å±æ€§çš„æ–¹æ³•å°±å«åšæ³¨å…¥ï¼Œä¹‹æ‰€ä»¥å«ä¾èµ–æ³¨å…¥æ˜¯å› ä¸ºå®ƒæ˜¯ä¸ºäº†å®Œæˆä¸€ç§ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æ§åˆ¶åè½¬æ˜¯ä¸€ç§æ€æƒ³ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€æ¬¡ä¸€æ¬¡çš„ä¾èµ–æ³¨å…¥ã€‚</p>
<h2 id="6-2-setæ³¨å…¥"><a href="#6-2-setæ³¨å…¥" class="headerlink" title="6.2 setæ³¨å…¥"></a>6.2 setæ³¨å…¥</h2><p>åˆ›å»ºå¯¹è±¡æ—¶ï¼ŒSpringå·¥å‚ä¼šé€šè¿‡setæ–¹æ³•ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼ã€‚</p>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼ˆçœç•¥äº†getå’Œsetæ–¹æ³•ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date bornDate;</span><br><span class="line">    <span class="keyword">private</span> String[] hobbies;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; phones;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; names;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; countries;</span><br><span class="line">    <span class="keyword">private</span> Properties files;</span><br><span class="line">    <span class="comment">//çœç•¥äº†getå’Œsetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.entity.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç®€å•ï¼šåŒ…æ‹¬8ä¸­åŸºæœ¬ç±»å‹ï¼ŒString,Date--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;36&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;22&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bornDate&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1999/01/30 12:00:00&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•°ç»„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>football<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>basketball<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é›†åˆ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;names&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>tang<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>wang<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;phones&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>15299999999<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>13566666666<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;countries&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;zh&quot;</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;en&quot;</span> <span class="attr">value</span>=<span class="string">&quot;english&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;files&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;username&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;url&quot;</span>&gt;</span>jdbc:mysql:xxx<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼Œæ¥æŸ¥çœ‹æ˜¯å¦å¤åˆ¶æˆåŠŸï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSet</span><span class="params">()</span>&#123;</span><br><span class="line">    ApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/spring-context.xml&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;ss&quot;</span>);<span class="comment">//æ­¤å¤„è®¾æ–­ç‚¹ï¼Œç„¶ådebug</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒè¯•ç•Œé¢çœ‹åˆ°userçš„å±æ€§å·²ç»æˆåŠŸé€šè¿‡setæ³¨å…¥èµ‹å€¼äº†ã€‚</p>
<p>Userç±»å¯èƒ½å­˜åœ¨jdkä¹‹å¤–çš„ç±»å‹æ¯”å¦‚Addressï¼Œç§°ä¸ºè‡ªå»ºç±»å‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡setæ³¨å…¥çš„æ–¹å¼èµ‹å€¼ï¼Œåªéœ€è¦å¤šå†™ä¸€ä¸ªAddressç±»çš„beanæ ‡ç­¾ï¼Œç„¶åè®¾ç½®å±æ€§å€¼ï¼ˆæ–¹å¼åŒä¸Šï¼‰ï¼Œç„¶ååœ¨userçš„beanæ ‡ç­¾ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§åä¸ºaddressï¼Œrefå€¼ä¸ºAddressçš„beançš„idå³å¯ã€‚</p>
<h1 id="ä¸ƒã€Beanç»†èŠ‚"><a href="#ä¸ƒã€Beanç»†èŠ‚" class="headerlink" title="ä¸ƒã€Beanç»†èŠ‚"></a>ä¸ƒã€Beanç»†èŠ‚</h1><h2 id="7-1-æ§åˆ¶ç®€å•å¯¹è±¡çš„å•ã€å¤šä¾‹æ¨¡å¼"><a href="#7-1-æ§åˆ¶ç®€å•å¯¹è±¡çš„å•ã€å¤šä¾‹æ¨¡å¼" class="headerlink" title="7.1 æ§åˆ¶ç®€å•å¯¹è±¡çš„å•ã€å¤šä¾‹æ¨¡å¼"></a>7.1 æ§åˆ¶ç®€å•å¯¹è±¡çš„å•ã€å¤šä¾‹æ¨¡å¼</h2><p>åœ¨ä¸Šå‡ èŠ‚çš„æµ‹è¯•ç±»ä¸­ç”±å·¥å‚ç”Ÿäº§çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªï¼ˆå“ªæ€•è°ƒç”¨å¤šæ¬¡getBeanæ–¹æ³•ï¼‰ï¼Œè¿™ç§å«åšå•ä¾‹æ¨¡å¼ã€‚</p>
<p>é€šè¿‡é…ç½®å¯ä»¥è®¾ç½®ä¸ºå•/å¤šä¾‹æ¨¡å¼ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	singletonï¼ˆé»˜è®¤ï¼‰ï¼šæ¯æ¬¡è°ƒç”¨å·¥å‚ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼›</span></span><br><span class="line"><span class="comment">	prototypeï¼šæ¯æ¬¡è°ƒç”¨å·¥å‚ï¼Œéƒ½ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>éœ€è¦æ ¹æ®åœºæ™¯å†³å®šå¯¹è±¡çš„å•ä¾‹ã€å¤šä¾‹æ¨¡å¼ã€‚</li>
<li>å¯ä»¥å…±ç”¨ï¼šServiceã€Daoã€SqlSessionFactoryï¼ˆæˆ–è€…æ˜¯æ‰€æœ‰çš„å·¥å‚ï¼‰ã€‚</li>
<li>ä¸å¯å…±ç”¨ï¼šConnectionã€SqlSessionã€ShoppingCartã€‚</li>
</ul>
<h1 id="å…«ã€Springå·¥å‚ç‰¹æ€§"><a href="#å…«ã€Springå·¥å‚ç‰¹æ€§" class="headerlink" title="å…«ã€Springå·¥å‚ç‰¹æ€§"></a>å…«ã€Springå·¥å‚ç‰¹æ€§</h1><h2 id="8-1-é¥¿æ±‰å¼åˆ›å»ºä¼˜åŠ¿"><a href="#8-1-é¥¿æ±‰å¼åˆ›å»ºä¼˜åŠ¿" class="headerlink" title="8.1 é¥¿æ±‰å¼åˆ›å»ºä¼˜åŠ¿"></a>8.1 é¥¿æ±‰å¼åˆ›å»ºä¼˜åŠ¿</h2><p>å·¥å‚åˆ›å»ºä¹‹åï¼Œä¼šå°†Springé…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰å¯¹è±¡éƒ½åˆ›å»ºå®Œæˆï¼ˆé¥¿æ±‰å¼ï¼‰ã€‚</p>
<p>å®ƒå¯ä»¥æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œé¿å…å¤šæ¬¡IOï¼Œå‡å°‘å¯¹è±¡åˆ›å»ºæ—¶é—´ï¼ˆæ¦‚å¿µæ¥è¿‘è¿æ¥æ± ï¼Œä¸€æ¬¡æ€§åˆ›å»ºå¥½ï¼Œä½¿ç”¨æ—¶ç›´æ¥è·å–ï¼‰ã€‚</p>
<h2 id="8-2-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•"><a href="#8-2-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•" class="headerlink" title="8.2 ç”Ÿå‘½å‘¨æœŸæ–¹æ³•"></a>8.2 ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h2><ul>
<li>è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•ï¼šæ·»åŠ â€œinit-methodâ€å±æ€§ï¼ŒSpringåˆ™ä¼šåœ¨åˆ›å»ºå¯¹è±¡ä¹‹åï¼Œè°ƒç”¨æ­¤æ–¹æ³•ã€‚</li>
<li>è‡ªå®šä¹‰é”€æ¯æ–¹æ³•ï¼šæ·»åŠ â€œdestory-methodâ€å±æ€§ï¼ŒSpringåˆ™ä¼šåœ¨é”€æ¯å¯¹è±¡ä¹‹å‰ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ã€‚</li>
<li>é”€æ¯ï¼šå·¥å‚çš„closeæ–¹æ³•è¢«è°ƒç”¨ä¹‹åï¼ŒSpringä¼šé”€æ¯æ‰€æœ‰å·²åˆ›å»ºçš„å•ä¾‹å¯¹è±¡ã€‚</li>
<li>åˆ†ç±»ï¼šSingletonå¯¹è±¡ç”±Springå®¹å™¨é”€æ¯ã€Prototypeå¯¹è±¡ç”±JVMé”€æ¯ã€‚</li>
</ul>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨å·¥å‚åˆ›å»ºä¸€ä¸ªå•ä¾‹å¯¹è±¡æ—¶ï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•æ¥ä½“éªŒå•ä¾‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="comment">//å±æ€§åŠå…¶ä»–ä»£ç çœç•¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•æ‰§è¡Œã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initUser</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é”€æ¯æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destoryUser</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é”€æ¯ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å±æ€§æ¥ä½¿è‡ªå®šä¹‰æ–¹æ³•ç”Ÿæ•ˆï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.entity.User&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;initUser&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destoryUser&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLife</span><span class="params">()</span>&#123;</span><br><span class="line">    ClassPathXmlApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/spring-context.xml&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">    context.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æ„é€ æ–¹æ³•æ‰§è¡Œã€‚</span><br><span class="line">åˆå§‹åŒ–ã€‚</span><br><span class="line">==========</span><br><span class="line">é”€æ¯ã€‚</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯å•ä¾‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¤šä¾‹å¯¹è±¡ç•¥æœ‰ä¸åŒã€‚</p>
<h2 id="8-3-ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ"><a href="#8-3-ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ" class="headerlink" title="8.3 ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ"></a>8.3 ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å•ä¾‹bean: singleton</span><br><span class="line">éšå·¥å‚å¯åŠ¨åˆ›å»º--ã€‹æ„é€ æ–¹æ³•--ã€‹setæ–¹æ³•ï¼ˆæ³¨å…¥å€¼ï¼‰--ã€‹initï¼ˆåˆå§‹åŒ–ï¼‰--ã€‹æ„å»ºå®Œæˆ--ã€‹éšå·¥å‚å…³é—­ é”€æ¯</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¤šä¾‹bean: prototype</span><br><span class="line">è¢«ä½¿ç”¨æ—¶åˆ›å»º--ã€‹æ„é€ æ–¹æ³•--ã€‹setæ–¹æ³•ï¼ˆæ³¨å…¥å€¼ï¼‰--ã€‹initï¼ˆåˆå§‹åŒ–ï¼‰--ã€‹æ„å»ºå®Œæˆ--ã€‹JVMåƒåœ¾å›æ”¶ é”€æ¯</span><br></pre></td></tr></table></figure>

<h1 id="ä¹ã€ä»£ç†è®¾è®¡æ¨¡å¼"><a href="#ä¹ã€ä»£ç†è®¾è®¡æ¨¡å¼" class="headerlink" title="ä¹ã€ä»£ç†è®¾è®¡æ¨¡å¼"></a>ä¹ã€ä»£ç†è®¾è®¡æ¨¡å¼</h1><h2 id="9-1-æ¦‚å¿µ"><a href="#9-1-æ¦‚å¿µ" class="headerlink" title="9.1 æ¦‚å¿µ"></a>9.1 æ¦‚å¿µ</h2><p>å°†æ ¸å¿ƒåŠŸèƒ½ä¸è¾…åŠ©åŠŸèƒ½ï¼ˆäº‹åŠ¡ã€æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ä»£ç ï¼‰åˆ†ç¦»ï¼Œè¾¾åˆ°æ ¸å¿ƒä¸šåŠ¡æ›´çº¯ç²¹ï¼Œè¾…åŠ©åŠŸèƒ½ä¸šåŠ¡å¯å¤ç”¨ã€‚</p>
<p><img src="https://img.imgdb.cn/item/603120325f4313ce25b96522.jpg" alt="img"></p>
<h2 id="9-2-é™æ€ä»£ç†è®¾è®¡æ¨¡å¼"><a href="#9-2-é™æ€ä»£ç†è®¾è®¡æ¨¡å¼" class="headerlink" title="9.2 é™æ€ä»£ç†è®¾è®¡æ¨¡å¼"></a>9.2 é™æ€ä»£ç†è®¾è®¡æ¨¡å¼</h2><p>é€šè¿‡ä»£ç†ç±»çš„å¯¹è±¡ï¼Œä¸ºåŸå§‹ç±»çš„å¯¹è±¡ï¼ˆç›®æ ‡ç±»çš„å¯¹è±¡ï¼‰æ·»åŠ è¾…åŠ©åŠŸèƒ½ï¼Œæ›´å®¹æ˜“æ›´æ¢ä»£ç†å®ç°ç±»ï¼Œåˆ©äºç»´æŠ¤ã€‚</p>
<p>æ¯”å¦‚å‡ºç§Ÿä¸€ä¸ªæˆ¿å­ä½ éœ€è¦åšå››ä»¶äº‹ï¼Œä½†ä½œä¸ºæˆ¿ä¸œä½ åªå…³å¿ƒä¸¤ä»¶äº‹ï¼Œè¿™ä¸¤ä»¶äº‹å°±æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">landlordServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">landlordService</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è¾…åŠ©åŠŸèƒ½/é¢å¤–åŠŸèƒ½</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å‘å¸ƒç§Ÿæˆ¿ä¿¡æ¯ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¸¦ç§Ÿå®¢çœ‹æˆ¿ã€‚&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ ¸å¿ƒåŠŸèƒ½</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾åˆåŒã€‚&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶æˆ¿ç§Ÿã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªä»£ç†ç±»ï¼Œæ¥å°†è¿™ä¸ªåŸå§‹ç±»çš„è¾…åŠ©åŠŸèƒ½å¤„ç†æ‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">landlordProxy</span> <span class="keyword">implements</span> <span class="title class_">landlordService</span>&#123;</span><br><span class="line">    landlordService landlordService=<span class="keyword">new</span> <span class="title class_">landlordServiceImpl</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è¾…åŠ©åŠŸèƒ½/é¢å¤–åŠŸèƒ½</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å‘å¸ƒç§Ÿæˆ¿ä¿¡æ¯ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¸¦ç§Ÿå®¢çœ‹æˆ¿ã€‚&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        landlordService.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åŸå§‹ç±»å°±å¯ä»¥ä¸“å¿ƒå…³æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼Œè€Œä½œä¸ºç§Ÿå®¢ï¼Œåªéœ€è¦è°ƒç”¨è¿™ä¸ªä»£ç†ç±»å°±å¯ä»¥äº†ã€‚</p>
<p>è¿™ç§ç”±æˆ‘ä»¬æ˜ç¡®å†™å‡ºæ¥çš„ä»£ç†ç±»å«åš<strong>é™æ€ä»£ç†ç±»</strong>ã€‚</p>
<h2 id="9-3-åŠ¨æ€ä»£ç†è®¾è®¡æ¨¡å¼"><a href="#9-3-åŠ¨æ€ä»£ç†è®¾è®¡æ¨¡å¼" class="headerlink" title="9.3 åŠ¨æ€ä»£ç†è®¾è®¡æ¨¡å¼"></a>9.3 åŠ¨æ€ä»£ç†è®¾è®¡æ¨¡å¼</h2><p>åŠ¨æ€åˆ›å»ºä»£ç†ç±»çš„å¯¹è±¡ï¼Œä¸ºåŸå§‹ç±»çš„å¯¹è±¡æ·»åŠ è¾…åŠ©åŠŸèƒ½ã€‚</p>
<h3 id="9-3-1-JDKåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºæ¥å£ï¼‰"><a href="#9-3-1-JDKåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºæ¥å£ï¼‰" class="headerlink" title="9.3.1 JDKåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºæ¥å£ï¼‰"></a>9.3.1 JDKåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºæ¥å£ï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJDK</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//ç›®æ ‡</span></span><br><span class="line">    landlordService ls=<span class="keyword">new</span> <span class="title class_">landlordServiceImpl</span>();</span><br><span class="line">    <span class="comment">//è¾…åŠ©åŠŸèƒ½ï¼Œé¢å¤–åŠŸèƒ½</span></span><br><span class="line">    InvocationHandler invocationHandler=<span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å‘å¸ƒç§Ÿæˆ¿ä¿¡æ¯ã€‚&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;å¸¦ç§Ÿå®¢çœ‹æˆ¿ã€‚&quot;</span>);</span><br><span class="line">            ls.rent();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//åŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">    <span class="type">landlordService</span> <span class="variable">proxy</span> <span class="operator">=</span> (landlordService) Proxy.newProxyInstance(DynamicProxy.class.getClassLoader(),</span><br><span class="line">                                                                     ls.getClass().getInterfaces(),</span><br><span class="line">                                                                     invocationHandler);</span><br><span class="line">    proxy.rent();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>proxyè¿™ä¸ªå¯¹è±¡æ˜¯åŠ¨æ€ç”Ÿæˆå‡ºæ¥çš„ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°å®ƒæ˜¯å“ªä¸€ä¸ªç±»ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„<strong>åŠ¨æ€ä»£ç†</strong>ã€‚</p>
<h3 id="9-3-2-CGlibåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºç»§æ‰¿ï¼‰"><a href="#9-3-2-CGlibåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºç»§æ‰¿ï¼‰" class="headerlink" title="9.3.2 CGlibåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºç»§æ‰¿ï¼‰"></a>9.3.2 CGlibåŠ¨æ€ä»£ç†å®ç°ï¼ˆåŸºäºç»§æ‰¿ï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCGlib</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//ç›®æ ‡</span></span><br><span class="line">    landlordService ls=<span class="keyword">new</span> <span class="title class_">landlordServiceImpl</span>();</span><br><span class="line">    <span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">    <span class="comment">//ä»£ç†ç±»éœ€è¦å’Œç›®æ ‡ç±»åŠŸèƒ½ä¸€è‡´ã€‚æ‰€ä»¥å®ƒé™¤äº†å®ç°ç›¸åŒçš„æ¥å£å¤–ï¼ˆjdkï¼‰ï¼Œè¿˜å¯ä»¥æŠŠä»£ç†ç±»ä½œä¸ºçˆ¶ç±»</span></span><br><span class="line">    enhancer.setSuperclass(landlordServiceImpl.class);</span><br><span class="line">    <span class="comment">//è¾…åŠ©åŠŸèƒ½</span></span><br><span class="line">    enhancer.setCallback(<span class="keyword">new</span> <span class="title class_">org</span>.springframework.cglib.proxy.InvocationHandler() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object o, Method method, Object[] objects)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å‘å¸ƒç§Ÿæˆ¿ä¿¡æ¯ã€‚&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;å¸¦ç§Ÿå®¢çœ‹æˆ¿ã€‚&quot;</span>);</span><br><span class="line">            ls.rent();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//åŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">    <span class="type">landlordServiceImpl</span> <span class="variable">proxy</span> <span class="operator">=</span> (landlordServiceImpl) enhancer.create();</span><br><span class="line">    proxy.rent();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸¤ç§åŠ¨æ€ä»£ç†æ–¹æ³•çœ‹ä¸Šå»æ˜¯å¾ˆæŠ½è±¡çš„ï¼Œå®é™…ä¸Šä¹Ÿä¸ä¼šå»è¿™ä¹ˆå»ä½¿ç”¨ï¼Œè¿™ä¸¤ç§ä»£ç†æ–¹æ³•ä¼šåœ¨AOPä¸­è¢«å°è£…åˆ°åº•å±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬çœŸæ­£ä½¿ç”¨åŠ¨æ€ä»£ç†çš„æ—¶å€™æ˜¯ä¼šå€ŸåŠ©AOPçš„æ”¯æŒçš„ã€‚</p>
<h1 id="åã€é¢å‘åˆ‡é¢ç¼–ç¨‹"><a href="#åã€é¢å‘åˆ‡é¢ç¼–ç¨‹" class="headerlink" title="åã€é¢å‘åˆ‡é¢ç¼–ç¨‹"></a>åã€é¢å‘åˆ‡é¢ç¼–ç¨‹</h1><h2 id="10-1-æ¦‚å¿µåŠæœ¯è¯­"><a href="#10-1-æ¦‚å¿µåŠæœ¯è¯­" class="headerlink" title="10.1 æ¦‚å¿µåŠæœ¯è¯­"></a>10.1 æ¦‚å¿µåŠæœ¯è¯­</h2><p>AOPï¼ˆAspect Oriented Programmingï¼‰,å³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–å¼€å°è£…çš„å†…éƒ¨å¯¹è±¡ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶å‘½åä¸ºâ€œAspectâ€ï¼Œå³åˆ‡é¢ã€‚æ‰€è°“â€åˆ‡é¢â€œï¼Œç®€å•è¯´å°±æ˜¯é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p><strong>Springçš„AOPç¼–ç¨‹å³æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†ç±»ä¸ºåŸå§‹ç±»çš„æ–¹æ³•æ·»åŠ è¾…åŠ©åŠŸèƒ½</strong>ã€‚</p>
<ul>
<li>è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ï¼šè¿æ¥ç‚¹æ˜¯ç¨‹åºç±»ä¸­å®¢è§‚å­˜åœ¨çš„æ–¹æ³•ï¼Œå¯è¢«Springæ‹¦æˆªå¹¶åˆ‡å…¥å†…å®¹ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šè¢«Springåˆ‡å…¥è¿æ¥ç‚¹ã€‚</li>
<li><strong>é€šçŸ¥</strong>ã€<strong>å¢å¼º</strong>ï¼ˆAdviceï¼‰ï¼šå¯ä»¥ä¸ºåˆ‡å…¥ç‚¹æ·»åŠ é¢å¤–åŠŸèƒ½ï¼Œåˆ†ä¸ºå‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ã€å¼‚å¸¸é€šçŸ¥ã€ç¯ç»•é€šçŸ¥ç­‰ã€‚</li>
<li>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡ã€‚</li>
<li>å¼•ä»‹ï¼ˆIntroductionï¼‰ï¼šä¸€ç§ç‰¹æ®Šçš„å¢å¼ºï¼Œå¯åœ¨è¿è¡ŒæœŸä¸ºç±»åŠ¨æ€æ·»åŠ Fieldå’ŒMethodã€‚</li>
<li>ç»‡å…¥ï¼ˆWeavingï¼‰ ï¼šæŠŠé€šçŸ¥åº”ç”¨åˆ°å…·ä½“çš„ç±»ï¼Œè¿›è€Œåˆ›å»ºçš„ä»£ç†ç±»çš„è¿‡ç¨‹ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šè¢«AOPç»‡å…¥é€šçŸ¥åï¼Œäº§ç”Ÿçš„ç»“æœç±»ã€‚</li>
<li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šç”±åˆ‡ç‚¹å’Œé€šçŸ¥ç»„æˆï¼Œå°†æ¨ªåˆ‡é€»è¾‘ç»‡å…¥åˆ‡é¢æ‰€æŒ‡å®šçš„è¿æ¥ç‚¹ä¸­ã€‚</li>
</ul>
<h2 id="10-2-å¼€å‘æµç¨‹"><a href="#10-2-å¼€å‘æµç¨‹" class="headerlink" title="10.2 å¼€å‘æµç¨‹"></a>10.2 å¼€å‘æµç¨‹</h2><p>ä»¥å‰æ–‡çš„ç§Ÿæˆ¿äº‹ä»¶ä¸ºæ¡ˆä¾‹ï¼Œç®€å•å±•ç¤ºé¢å‘åˆ‡é¢çš„å¼€å‘æµç¨‹ã€‚</p>
<h3 id="10-2-1-ç¯å¢ƒæ­å»º"><a href="#10-2-1-ç¯å¢ƒæ­å»º" class="headerlink" title="10.2.1 ç¯å¢ƒæ­å»º"></a>10.2.1 ç¯å¢ƒæ­å»º</h3><p>å¼•å…¥AOPç›¸å…³ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-2-2-ç¼–å†™å¢å¼ºæ–¹æ³•"><a href="#10-2-2-ç¼–å†™å¢å¼ºæ–¹æ³•" class="headerlink" title="10.2.2 ç¼–å†™å¢å¼ºæ–¹æ³•"></a>10.2.2 ç¼–å†™å¢å¼ºæ–¹æ³•</h3><p>åŒ9.2èŠ‚ä»£ç ï¼Œå°†rentçš„é¢å¤–åŠŸèƒ½æå–å‡ºæ¥ï¼Œä½¿rentæ–¹æ³•ä¿æŒå•ä¸€èŒèƒ½ï¼Œä¾¿äºç»´æŠ¤ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">landlordBeforeAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//é¢å¤–åŠŸèƒ½</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] objects, Object o)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘å¸ƒç§Ÿæˆ¿ä¿¡æ¯ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¸¦ç§Ÿå®¢çœ‹æˆ¿ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šçŸ¥åˆ†ä¸ºå‰åç½®é€šçŸ¥ç­‰ï¼Œå› ä¸ºrentçš„é¢å¤–åŠŸèƒ½éœ€è¦åœ¨æ ¸å¿ƒåŠŸèƒ½å‰é¢å‡ºç°ï¼Œæ‰€ä»¥æ­¤å¤„ä¸ºå‰ç½®é€šçŸ¥ï¼Œå¢å¼ºæ–¹æ³•éœ€è¦å®ç°MethodBeforeAdviceæ¥å£ï¼Œå¹¶å®ç°beforeæ–¹æ³•ã€‚</p>
<h3 id="10-2-3-é…ç½®æ–‡ä»¶"><a href="#10-2-3-é…ç½®æ–‡ä»¶" class="headerlink" title="10.2.3 é…ç½®æ–‡ä»¶"></a>10.2.3 é…ç½®æ–‡ä»¶</h3><p>æ–°å»ºspringé…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åé€šå¸¸ä¸ºspring-context.xmlï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç›®æ ‡å¯¹è±¡ï¼šåŸå§‹ä¸šåŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;landlordService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.service.landlordServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é€šçŸ¥ï¼šé¢å¤–åŠŸèƒ½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;landlordBeforeAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.advice.landlordBeforeAdvice&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç¼–ç»‡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;landlord_rent&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void rent())&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç»„è£…--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;landlordBeforeAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;landlord_rent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åŒ3.2èŠ‚çš„é…ç½®æ–‡ä»¶æ¯”è¾ƒï¼Œå¤šäº†ä¸€ä¸ªå‘½åç©ºé—´<code>xmlns=&quot;http://www.springframework.org/schema/aop&quot;</code>ï¼Œå› ä¸ºå‘½åç©ºé—´ä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥é€šå¸¸å–åä¸ºaopã€‚</p>
<p>configå³ä¸ºaopå‘½åç©ºé—´ä¸­çš„æ ‡ç­¾ï¼Œå…¶ä¸­å®šä¹‰åˆ‡å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰springè°æ˜¯éœ€è¦åˆ‡å…¥çš„æ–¹æ³•ï¼ˆéœ€è¦è¿½åŠ é¢å¤–åŠŸèƒ½çš„æ–¹æ³•ï¼‰ä»¥åŠé¢å¤–åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸€æ•´ä¸ªè¿‡ç¨‹ç§°ä¸ºç¼–ç»‡ã€‚</p>
<p>pointcutæ ‡ç­¾å®šä¹‰åˆ‡å…¥ç‚¹ï¼Œexpressionå¡«å†™è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨execution()åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œæ‹¬å·ä¸­å¡«å†™å®Œæ•´çš„æ–¹æ³•å®šä¹‰ã€‚æ­¤å¤„ä¸ºrentæ–¹æ³•ï¼Œå…¶ä¸­åªåŒ…æ‹¬ç§Ÿæˆ¿çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>advisoræ ‡ç­¾æœ‰ä¸¤ä¸ªå±æ€§ï¼Œadvice-refç”¨æ¥å‘Šè¯‰springè°æ˜¯å¢å¼ºæ–¹æ³•ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰ï¼Œå…¶å€¼ä¸ºå¢å¼ºæ–¹æ³•beançš„idå€¼ï¼›pointcut-refç”¨æ¥å‘Šè¯‰springæŠŠè¿™ä¸ªå¢å¼ºæ–¹æ³•ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰åˆ‡å…¥ç»™è°ï¼Œå…¶å€¼ä¸ºå¯¹åº”pointcutæ ‡ç­¾çš„çš„idå€¼ã€‚</p>
<p>å°†é…ç½®æ–‡ä»¶å®Œæˆåï¼Œå¼€å‘æµç¨‹å°±å¤§è‡´ç»“æŸäº†ã€‚</p>
<h3 id="10-2-4-æµ‹è¯•ä»£ç "><a href="#10-2-4-æµ‹è¯•ä»£ç " class="headerlink" title="10.2.4 æµ‹è¯•ä»£ç "></a>10.2.4 æµ‹è¯•ä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSpringAop</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å¯åŠ¨å·¥å‚</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ApplicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/spring-context.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//é€šè¿‡ç›®æ ‡beançš„idè·å¾—å…¶ä»£ç†ç±»</span></span><br><span class="line">    <span class="type">landlordService</span> <span class="variable">landlordService</span> <span class="operator">=</span> (lazydog.service.landlordService) ApplicationContext.getBean(<span class="string">&quot;landlordService&quot;</span>);</span><br><span class="line">    landlordService.rent();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¹¶æ²¡æœ‰åˆ›å»ºä»£ç†ç±»ï¼Œä¹Ÿæ²¡æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä»£ç†ç±»çš„beanï¼Œä½†æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»£ç†ç±»æ¥è°ƒç”¨rentæ–¹æ³•ï¼Œæ˜¯å¦æœ‰é—æ¼çš„åœ°æ–¹ï¼Ÿ</p>
<p>å…¶å®åœ¨è°ƒç”¨getBean()æ–¹æ³•æ—¶ï¼Œspringè¿”å›çš„å°±æ˜¯ç›®æ ‡ç±»çš„ä»£ç†ç±»ï¼Œæ–¹æ³•å‚æ•°å†™ä¸Šç›®æ ‡ç±»beançš„idå°±å¯ä»¥äº†ã€‚</p>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å‘å¸ƒç§Ÿæˆ¿ä¿¡æ¯ã€‚</span><br><span class="line">å¸¦ç§Ÿå®¢çœ‹æˆ¿ã€‚</span><br><span class="line">ç­¾åˆåŒã€‚</span><br><span class="line">æ”¶æˆ¿ç§Ÿã€‚</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œåœ¨rentæ–¹æ³•ä¸­åªæœ‰åä¸¤å¥æ ¸å¿ƒåŠŸèƒ½ï¼Œå°†ä»£ç è€¦åˆåº¦é™è‡³äº†æœ€ä½ã€‚</p>
<h2 id="10-3-é€šçŸ¥ç±»"><a href="#10-3-é€šçŸ¥ç±»" class="headerlink" title="10.3 é€šçŸ¥ç±»"></a>10.3 é€šçŸ¥ç±»</h2><p>10.2.2èŠ‚å°±æ˜¯ä¸€ä¸ªé€šçŸ¥ç±»ï¼Œé™¤äº†å‰ç½®é€šçŸ¥ï¼Œè¿˜æœ‰ä»¥ä¸‹å‡ ç§é€šçŸ¥ï¼š</p>
<ul>
<li>åç½®é€šçŸ¥ï¼šAfterAdvice</li>
<li>åç½®é€šçŸ¥ï¼šAfterReturningAdvice</li>
<li>å¼‚å¸¸é€šçŸ¥ï¼šThrowsAdvice</li>
<li>ç¯ç»•é€šçŸ¥ï¼šMethodIntercptor</li>
</ul>
<p>AfterAdviceæ˜¯AfterReturningAdviceå’ŒThrowsAdviceçš„çˆ¶ç±»ã€‚</p>
<p>AfterAdviceåœ¨æ ¸å¿ƒåŠŸèƒ½ä¹‹åæ‰§è¡Œï¼Œä¸è®ºæ ¸å¿ƒæ˜¯å¦äº§ç”Ÿå¼‚å¸¸ã€‚</p>
<p>AfterReturningAdviceåœ¨æ ¸å¿ƒåŠŸèƒ½ä¹‹åæ‰§è¡Œï¼Œå¦‚æœæœ‰å¼‚å¸¸åˆ™ä¸æ‰§è¡Œï¼Œæ–¹æ³•å› å¼‚å¸¸è€Œç»“æŸï¼Œæ— è¿”å›å€¼ã€‚</p>
<p>ThrowsAdviceåœ¨æ ¸å¿ƒåŠŸèƒ½ä¹‹åæ‰§è¡Œï¼Œä½†åªæœ‰äº§ç”Ÿå¼‚å¸¸æ—¶æ‰æ‰§è¡Œã€‚</p>
<p>MethodIntercptoråœ¨æ ¸å¿ƒåŠŸèƒ½å‰åéƒ½æ‰§è¡Œã€‚</p>
<p>æœ¬æ–‡åªæ¼”ç¤ºæœ€åä¸€ç§é€šçŸ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">landlordAroundAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(MethodInvocation methodInvocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼€å§‹ï¼&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> methodInvocation.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“æŸï¼&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>methodInvocation.proceed()æ–¹æ³•è§¦å‘æ ¸å¿ƒåŠŸèƒ½çš„æ‰§è¡Œï¼Œåœ¨è¿™å‰ååˆ†åˆ«ç¼–å†™ç¯ç»•çš„åŠŸèƒ½ã€‚</p>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­å†™å…¥é€šçŸ¥ç±»beanåç»„è£…ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;landlordAroundAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.advice.landlordAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;landlord_rent&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(public void rent())&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç»„è£…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;landlordAroundAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;landlord_rent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">COPYå¼€å§‹ï¼</span><br><span class="line">ç­¾åˆåŒã€‚</span><br><span class="line">æ”¶æˆ¿ç§Ÿã€‚</span><br><span class="line">ç»“æŸï¼</span><br></pre></td></tr></table></figure>

<h2 id="10-4-é€šé…åˆ‡å…¥ç‚¹"><a href="#10-4-é€šé…åˆ‡å…¥ç‚¹" class="headerlink" title="10.4 é€šé…åˆ‡å…¥ç‚¹"></a>10.4 é€šé…åˆ‡å…¥ç‚¹</h2><p>execution()åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¸­æŒ‰ç…§â€œè®¿é—®ä¿®é¥°ç¬¦ï¼ˆå¯çœç•¥ï¼‰+è¿”å›å€¼+åŒ…å.ç±»+æ–¹æ³•å(å‚æ•°åˆ—è¡¨)â€å¡«å†™ï¼Œä½†ä¹Ÿæœ‰å¾ˆå¤šä¾¿æ·çš„é€šé…å†™æ³•</p>
<ul>
<li><p><strong>åŒ¹é…å‚æ•°</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(* *(lazydog.entity.User))â€ /&gt;ã€‚</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥è¿”å›å€¼å’Œæ–¹æ³•åï¼Œåªè¦æ˜¯Userç±»çš„å‚æ•°å°±åˆ‡å…¥ã€‚</p>
</li>
<li><p><strong>åŒ¹é…æ–¹æ³•åï¼ˆæ— å‚ï¼‰</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(* rent())â€ /&gt;</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥è¿”å›å€¼ï¼Œåªè¦æ–¹æ³•åä¸ºrentä¸”æ— å‚å°±åˆ‡å…¥ã€‚</p>
</li>
<li><p><strong>åŒ¹é…æ–¹æ³•åï¼ˆä»»æ„å‚æ•°ï¼‰</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(* rent(..))â€ /&gt;</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨ï¼Œåªè¦æ–¹æ³•åä¸ºrentå°±åˆ‡å…¥ã€‚</p>
</li>
<li><p><strong>åŒ¹é…è¿”å›å€¼ç±»å‹</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(lazydog.entity.User *(..))â€ /&gt;</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ï¼Œåªè¦è¿”å›å€¼ä¸ºUserå°±åˆ‡å…¥ã€‚</p>
</li>
<li><p><strong>åŒ¹é…ç±»å</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(* lazydog.entity.UserServiceImpl.*(..))â€ /&gt;</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥è¿”å›å€¼ã€æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ï¼Œåªè¦æ–¹æ³•çš„ç±»åä¸ºUserServiceImplå°±åˆ‡å…¥ã€‚</p>
</li>
<li><p><strong>åŒ¹é…åŒ…å</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(* lazydog.service.*.*(..))â€ /&gt;</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥è¿”å›å€¼ã€æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ï¼Œåªè¦æ˜¯lazydog.serviceåŒ…ä¸‹çš„æ–¹æ³•å°±åˆ‡å…¥ã€‚</p>
</li>
<li><p><strong>åŒ¹é…åŒ…åä»¥åŠå­åŒ…å</strong>ï¼š&lt;aop:pointcut id=â€myPointCutâ€ expression=â€execution(* lazydog.service..*.*(..))â€ /&gt;</p>
<p>è¯¥è¡¨è¾¾å¼å¿½ç•¥è¿”å›å€¼ã€æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ï¼Œåªè¦æ˜¯lazydog.serviceåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ–¹æ³•å°±åˆ‡å…¥ã€‚</p>
</li>
</ul>
<h2 id="10-5-Springä»£ç†å®ç°çš„é€‰æ‹©"><a href="#10-5-Springä»£ç†å®ç°çš„é€‰æ‹©" class="headerlink" title="10.5 Springä»£ç†å®ç°çš„é€‰æ‹©"></a>10.5 Springä»£ç†å®ç°çš„é€‰æ‹©</h2><p>Springåº•å±‚åŒ…å«äº†JDKåŠ¨æ€ä»£ç†å’ŒCGlibåŠ¨æ€ä»£ç†ä¸¤ç§æœºåˆ¶ï¼Œå®ƒæ˜¯å¦‚ä½•é€‰æ‹©è¿™ä¸¤ç§æœºåˆ¶çš„å‘¢ï¼Ÿ</p>
<p>å®ƒçš„æ ¸å¿ƒé€‰æ‹©å‘ç”Ÿåœ¨DefaultAopProxyFactoryç±»ä¸­ï¼Œåœ¨ideaä¸­åŒå‡»shiftæŸ¥æ‰¾è¯¥ç±»æŸ¥çœ‹æºä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> AopProxy <span class="title function_">createAopProxy</span><span class="params">(AdvisedSupport config)</span> <span class="keyword">throws</span> AopConfigException &#123;</span><br><span class="line">    <span class="keyword">if</span> (!config.isOptimize() &amp;&amp; !config.isProxyTargetClass() &amp;&amp; !<span class="built_in">this</span>.hasNoUserSuppliedProxyInterfaces(config)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JdkDynamicAopProxy</span>(config);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Class&lt;?&gt; targetClass = config.getTargetClass();</span><br><span class="line">        <span class="keyword">if</span> (targetClass == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AopConfigException</span>(<span class="string">&quot;TargetSource cannot determine target class: Either an interface or a target is required for proxy creation.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (AopProxy)(!targetClass.isInterface() &amp;&amp; !Proxy.isProxyClass(targetClass) ? <span class="keyword">new</span> <span class="title class_">ObjenesisCglibAopProxy</span>(config) : <span class="keyword">new</span> <span class="title class_">JdkDynamicAopProxy</span>(config));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•ä¸­çš„if-elseè¯­å¥å°±æ˜¯åœ¨åšä»£ç†æœºåˆ¶çš„é€‰æ‹©ã€‚</p>
<p>ç¬¬ä¸€ä¸ªifæœ‰ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œconfig.isOptimize()å’Œconfig.isProxyTargetClass()é»˜è®¤è¿”å›çš„falseã€‚å‰è€…é€šè¿‡cglibæ§åˆ¶çš„ä»£ç†ä½¿ç”¨ä¼˜åŒ–ç­–ç•¥ï¼›åè€…è®¾ç½®ç›´æ¥é€šè¿‡ç›®æ ‡ç±»æ¥ä»£ç†ï¼Œè€Œä¸æ˜¯æ¥å£ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­configæ ‡ç­¾é‡Œè¿›è¡Œè®¾ç½®ï¼Œä¸ºtrueå°±ä½¿ç”¨cglibä»£ç†æœºåˆ¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">COPY&lt;aop:config proxy-target-class=&quot;true&quot;&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>

<p>å‰ä¸¤è€…é»˜è®¤ä¸ºfalseï¼Œæ‰€ä»¥ç”±this.hasNoUserSuppliedProxyInterfaces(config)å†³å®šä»£ç†æœºåˆ¶ã€‚å®ƒçš„æ„æ€æ˜¯ç›®æ ‡ï¼ˆä»£ç†å¯¹è±¡ï¼‰æ˜¯å¦å®ç°äº†æ¥å£ï¼Œæœ‰å®ç°æ¥å£çš„è¯å°±return new JdkDynamicAopProxy(config)ï¼›ä½¿ç”¨jdkä»£ç†æœºåˆ¶ã€‚</p>
<p>æœ€åä¸€ä¸ªelseåˆ†æ”¯çš„è¿”å›è¯­å¥ä½¿ç”¨äº†ä¸‰ç›®è¡¨è¾¾å¼ï¼ŒtargetClass.isInterfaceçš„æ„æ€æ˜¯ä»£ç†å¯¹è±¡æ˜¯å¦æ˜¯Interfaceç±»å‹ï¼Œæ˜¯çš„è¯ä»ç„¶ä½¿ç”¨jdkä»£ç†ï¼›Proxy.isProxyClass(targetClass)çš„æ„æ€æ˜¯å½“ä»£ç†ç›®æ ‡æ˜¯getProxyClassæ–¹æ³•æˆ–è€…newProxyInstanceæ–¹æ³•ç”Ÿæˆæ—¶ï¼Œä»ç„¶ä½¿ç”¨jdkä»£ç†ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹çš„åŸºæœ¬è§„åˆ™ä¸ºï¼š</p>
<p><strong>ç›®æ ‡ä¸šåŠ¡ç±»å¦‚æœæœ‰æ¥å£ä½¿ç”¨JDKä»£ç†</strong>ï¼Œ<strong>å¦åˆ™ä½¿ç”¨CDlibä»£ç†æ–¹å¼</strong>ã€‚</p>
<h2 id="10-6-åå¤„ç†å™¨"><a href="#10-6-åå¤„ç†å™¨" class="headerlink" title="10.6 åå¤„ç†å™¨"></a>10.6 åå¤„ç†å™¨</h2><p>Springä¸­å®šä¹‰äº†å¾ˆå¤šåå¤„ç†å™¨ã€‚æ¯ä¸ªbeanåœ¨åˆ›å»ºå®Œæˆä¹‹å‰ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªåå¤„ç†å™¨è¿‡ç¨‹ï¼Œå³å†åŠ å·¥ï¼Œå¯¹beanåšå‡ºç›¸å…³æ”¹å˜å’Œè°ƒæ•´ã€‚</p>
<p>spring-AOPä¸­å°±æœ‰ä¸€ä¸ªä¸“é—¨çš„åå¤„ç†å™¨ï¼Œè´Ÿè´£é€šè¿‡åŸå§‹ä¸šåŠ¡ç»„ä»¶ï¼ˆServiceï¼‰ï¼Œå†åŠ å·¥å¾—åˆ°ä¸€ä¸ªä»£ç†ç»„ä»¶ã€‚</p>
<p>8.3èŠ‚ä¸­å±•ç¤ºäº†beançš„ç”Ÿå‘½å‘¨æœŸï¼Œé‚£ä¹ˆåå¤„ç†å™¨æ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸçš„å“ªä¸ªé˜¶æ®µå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ªåå¤„ç†å™¨ï¼Œé€šè¿‡æ‰“å°è¯­å¥æ¥ä½“éªŒbeançš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 id="10-6-1-å®šä¹‰åå¤„ç†å™¨"><a href="#10-6-1-å®šä¹‰åå¤„ç†å™¨" class="headerlink" title="10.6.1 å®šä¹‰åå¤„ç†å™¨"></a>10.6.1 å®šä¹‰åå¤„ç†å™¨</h3><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªå®ä½“Userç±»ä¾›æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Set User&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ User&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initUser</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init User&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™åå¤„ç†å™¨ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åå¤„ç†å™¨</span></span><br><span class="line"><span class="comment">//beanç”Ÿå‘½å‘¨æœŸï¼šæ„é€ ã€setã€initã€destroy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="comment">//å‚æ•°beanæ˜¯æ„é€ å’Œsetç»“æŸåçš„åŸå§‹beanå¯¹è±¡ï¼ŒbeanNameä¸ºbeanå¯¹åº”çš„id</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åå¤„ç†1&quot;</span>);</span><br><span class="line">        System.out.println(bean+<span class="string">&quot; :&quot;</span>+beanName);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åå¤„ç†2&quot;</span>);</span><br><span class="line">        System.out.println(bean+<span class="string">&quot; :&quot;</span>+beanName);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡ªå·±åˆ›å»ºçš„åå¤„ç†å™¨éœ€è¦å®ç°BeanPostProcessoræ¥å£ï¼Œç¼–è¯‘å™¨ä¸ä¼šæç¤ºä½ éœ€è¦å®ç°æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡æŒ‰ä½ctrlåŒæ—¶ç‚¹å‡»æ¥å£åæŸ¥çœ‹æºä»£ç ï¼Œå°†è¿™ä¸¤ä¸ªæ–¹æ³•å¤åˆ¶åˆ°è‡ªå·±çš„æ–¹æ³•ä¸­ã€‚</p>
<h3 id="10-6-2-é…ç½®åå¤„ç†å™¨"><a href="#10-6-2-é…ç½®åå¤„ç†å™¨" class="headerlink" title="10.6.2 é…ç½®åå¤„ç†å™¨"></a>10.6.2 é…ç½®åå¤„ç†å™¨</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.entity.User&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;initUser&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åå¤„ç†å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.processor.MyBeanPostProcessor&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æ³¨å…¥ä¸€ä¸ªidå€¼æ¥ä½¿beanå±•ç¤ºç”Ÿå‘½é˜¶æ®µã€‚</p>
<h3 id="10-6-3-æµ‹è¯•åå¤„ç†å™¨"><a href="#10-6-3-æµ‹è¯•åå¤„ç†å™¨" class="headerlink" title="10.6.3 æµ‹è¯•åå¤„ç†å™¨"></a>10.6.3 æµ‹è¯•åå¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSpringAop</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å¯åŠ¨å·¥å‚</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ApplicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/spring-context.xml&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦å¯åŠ¨ä¸€ä¸‹å·¥å‚å°±å¯ä»¥äº†ï¼Œbeanéšå·¥å‚å¯åŠ¨è€Œåˆ›å»ºã€‚</p>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ„é€ User</span><br><span class="line">Set User</span><br><span class="line">åå¤„ç†1</span><br><span class="line">lazydog.entity.User@77ec78b9 :lazydog.entity.User#0</span><br><span class="line">init User</span><br><span class="line">åå¤„ç†2</span><br><span class="line">lazydog.entity.User@77ec78b9 :lazydog.entity.User#0</span><br></pre></td></tr></table></figure>

<h3 id="10-6-4-Beanç”Ÿå‘½å‘¨æœŸ"><a href="#10-6-4-Beanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="10.6.4 Beanç”Ÿå‘½å‘¨æœŸ"></a>10.6.4 Beanç”Ÿå‘½å‘¨æœŸ</h3><p>å®é™…å·¥ä½œä¸­ä¸ç”¨è‡ªå·±å†™åå¤„ç†å™¨ï¼Œæ­¤å¤„ä¸ºäº†ä½“éªŒbeançš„ç”Ÿå‘½é˜¶æ®µï¼Œç”±ä¸Šè¿°ä¾‹å­ï¼Œå¯ä»¥çœ‹å‡ºbeançš„ç”Ÿå‘½å‘¨æœŸæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ„é€ --ã€‹æ³¨å…¥å±æ€§--ã€‹åå¤„ç†å™¨å‰ç½®è¿‡ç¨‹--ã€‹åˆå§‹åŒ–--ã€‹åå¤„ç†å™¨åç½®è¿‡ç¨‹--ã€‹è¿”å›--ã€‹é”€æ¯</span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€ä»£ç†çš„åˆ›å»ºæ—¶åˆ»ä¹Ÿæ˜¯åœ¨åå¤„ç†å™¨è¿‡ç¨‹ä¸­å®Œæˆçš„ã€‚</p>
<h1 id="åä¸€ã€æ•´åˆMybatis"><a href="#åä¸€ã€æ•´åˆMybatis" class="headerlink" title="åä¸€ã€æ•´åˆMybatis"></a>åä¸€ã€æ•´åˆMybatis</h1><h2 id="11-1-é…ç½®æ•°æ®æº"><a href="#11-1-é…ç½®æ•°æ®æº" class="headerlink" title="11.1 é…ç½®æ•°æ®æº"></a>11.1 é…ç½®æ•°æ®æº</h2><p>æ–°å»ºmavené¡¹ç›®ï¼Œåˆ›å»ºé…ç½®æ–‡ä»¶ApplicationContext.xmlï¼Œå°†æ•°æ®æºé…ç½®åˆ°é¡¹ç›®ä¸­ã€‚</p>
<h3 id="11-1-1-å¼•å…¥propertiesé…ç½®æ–‡ä»¶"><a href="#11-1-1-å¼•å…¥propertiesé…ç½®æ–‡ä»¶" class="headerlink" title="11.1.1 å¼•å…¥propertiesé…ç½®æ–‡ä»¶"></a>11.1.1 å¼•å…¥propertiesé…ç½®æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#jdbc.properties</span><br><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/userdb?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=UTC</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=170912036</span><br><span class="line">#åˆå§‹åŒ–è¿æ¥</span><br><span class="line">initialSize=10</span><br><span class="line">#æœ€å¤§è¿æ¥æ•°é‡</span><br><span class="line">maxActive=50</span><br><span class="line">#æœ€å°ç©ºé—²è¿æ¥</span><br><span class="line">minIdle=5</span><br><span class="line">#è¶…æ—¶ç­‰å¾…æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½</span><br><span class="line">maxWait=10000</span><br><span class="line">#é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span><br><span class="line">timeBetweenEvictionRunsMillis=60000</span><br><span class="line">#é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span><br><span class="line">minEvictableIdleTimeMillis=60000</span><br></pre></td></tr></table></figure>

<h3 id="11-1-2-æ•´åˆSpringé…ç½®"><a href="#11-1-2-æ•´åˆSpringé…ç½®" class="headerlink" title="11.1.2 æ•´åˆSpringé…ç½®"></a>11.1.2 æ•´åˆSpringé…ç½®</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ApplicationContext.xml--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨äº†Druidè¿æ¥æ± --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;initialSize&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;maxActive&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;minIdle&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;maxWait&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;timeBetweenEvictionRunsMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;timeBetweenEvictionRunsMillis&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minEvictableIdleTimeMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;minEvictableIdleTimeMillis&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="11-1-3-å¯¼å…¥ç›¸å…³ä¾èµ–"><a href="#11-1-3-å¯¼å…¥ç›¸å…³ä¾èµ–" class="headerlink" title="11.1.3 å¯¼å…¥ç›¸å…³ä¾èµ–"></a>11.1.3 å¯¼å…¥ç›¸å…³ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Springç›¸å…³ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Mybatis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Mysqlé©±åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--druidè¿æ¥æ± --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="11-2-æ•´åˆMybatis"><a href="#11-2-æ•´åˆMybatis" class="headerlink" title="11.2 æ•´åˆMybatis"></a>11.2 æ•´åˆMybatis</h2><h3 id="11-2-1-å¯¼å…¥é¡¹ç›®ä¾èµ–"><a href="#11-2-1-å¯¼å…¥é¡¹ç›®ä¾èµ–" class="headerlink" title="11.2.1 å¯¼å…¥é¡¹ç›®ä¾èµ–"></a>11.2.1 å¯¼å…¥é¡¹ç›®ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Springæ•´åˆMybatis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="11-2-2-é…ç½®SqlSessionFactory"><a href="#11-2-2-é…ç½®SqlSessionFactory" class="headerlink" title="11.2.2 é…ç½®SqlSessionFactory"></a>11.2.2 é…ç½®SqlSessionFactory</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ApplicationContext.xml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç”Ÿäº§SqlSessionFactory--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å…¥è¿æ¥æ± --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å…¥dao-mapperæ–‡ä»¶ä¿¡æ¯ï¼Œå¦‚æœæ˜ å°„æ–‡ä»¶å’Œdaoæ¥å£åŒåŒ…ä¸”åŒåï¼Œåˆ™æ­¤é…ç½®å¯çœç•¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:lazydog/dao/*.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä¸ºdao-mapperæ–‡ä»¶ä¸­çš„å®ä½“å®šä¹‰çœç¼ºåŒ…è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lazydog.entity&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>mapperLocationså±æ€§æŒ‡å®šæ˜ å°„æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼›typeAliasesPackageå±æ€§æŒ‡å®šåˆ«åçš„åŒåç­–ç•¥ï¼Œåˆ«åä¸å®ä½“ç±»ååŒåã€‚</p>
<h3 id="11-2-3-æ•´åˆæµ‹è¯•"><a href="#11-2-3-æ•´åˆæµ‹è¯•" class="headerlink" title="11.2.3 æ•´åˆæµ‹è¯•"></a>11.2.3 æ•´åˆæµ‹è¯•</h3><p>æµ‹è¯•éœ€è¦ä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œè¡¨åä¸ºt_userï¼Œå…¶ä¸­æ’å…¥å‡ æ¡æ•°æ®ï¼Œå…¶å¯¹åº”çš„å®ä½“ç±»å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Integer id;</span><br><span class="line">    <span class="keyword">public</span> String username;</span><br><span class="line">    <span class="keyword">public</span> String password;</span><br><span class="line">    <span class="keyword">public</span> Character gender;</span><br><span class="line">    <span class="keyword">public</span> Date register_time;</span><br><span class="line">    <span class="comment">//getå’Œsetæ–¹æ³•ã€æ„é€ æ–¹æ³•ç­‰çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºDAOæ¥å£åŠå…¶æ˜ å°„æ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">queryAllUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--UserDaoMapper.xml--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mytais.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;lazydog.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select id,username,password,gender,register_time</span><br><span class="line">        from t_user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥junitæµ‹è¯•ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¼–å†™æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testSpringMybatis</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/ApplicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> (SqlSessionFactory) applicationContext.getBean(<span class="string">&quot;sqlSessionFactory&quot;</span>);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        List&lt;User&gt; users=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line">        List&lt;User&gt; allUser = mapper.queryAllUser();</span><br><span class="line">        <span class="keyword">for</span> (User user:allUser</span><br><span class="line">            ) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆåŠ è½½springé…ç½®æ–‡ä»¶å¯åŠ¨å·¥å‚ï¼Œbeanéšå·¥å‚å¯åŠ¨è€Œåˆ›å»ºï¼Œåˆ©ç”¨å·¥å‚è·å–sqlSessionFactoryå¯¹è±¡ï¼Œç„¶åå¾—åˆ°sqlSessionå¯¹è±¡ï¼Œä¹‹åå°±å’ŒMybatisæ“ä½œä¸€æ ·ï¼Œè·å¾—mapperå¯¹è±¡ï¼Œè°ƒç”¨æ–¹æ³•ï¼Œç»“æœæ‰§è¡Œæ­£å¸¸ã€‚</p>
<h3 id="11-2-4-é…ç½®MapperScannerConfigurer"><a href="#11-2-4-é…ç½®MapperScannerConfigurer" class="headerlink" title="11.2.4 é…ç½®MapperScannerConfigurer"></a>11.2.4 é…ç½®MapperScannerConfigurer</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mapperScannerConfigurer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--daoæ¥å£æ‰€åœ¨çš„åŒ…ï¼Œå¦‚æœæœ‰å¤šä¸ªåŒ…ç”¨é€—å·æˆ–åˆ†å·éš”å¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lazydog.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚æœå·¥å‚ä¸­åªæœ‰ä¸€ä¸ªSqlSessionFactoryçš„beanï¼Œæ­¤é…ç½®å¯çœç•¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MapperScannerConfigurerç®¡ç†DAOå®ç°ç±»çš„åˆ›å»ºï¼Œå®ƒæ‰«ææ‰€æœ‰DAOæ¥å£å¹¶æ„å»ºDAOå®ç°ï¼Œåˆ›å»ºDAOå¯¹è±¡å­˜å…¥å·¥å‚ç®¡ç†ã€‚</p>
<p>DAOå®ç°ç±»çš„å¯¹è±¡åœ¨å·¥å‚ä¸­çš„idæ˜¯â€œé¦–å­—æ¯å°å†™+æ¥å£ç±»çš„ç±»åâ€ï¼Œå¦‚UserDao=ã€‹userDaoï¼›OrderDao=ã€‹orderDaoã€‚</p>
<p>ç¼–å†™æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDao</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/ApplicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> (UserDao) applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userDao.queryAllUser();</span><br><span class="line">    <span class="keyword">for</span> (User user:users</span><br><span class="line">        ) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ApplicationContext.xmlå¹¶æ²¡æœ‰å®šä¹‰idä¸ºuserDaoçš„beanï¼Œå´æˆåŠŸæ‹¿åˆ°äº†beanå¯¹è±¡ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p>
<h3 id="11-2-5-é…ç½®Service"><a href="#11-2-5-é…ç½®Service" class="headerlink" title="11.2.5 é…ç½®Service"></a>11.2.5 é…ç½®Service</h3><p>é¦–å…ˆåˆ›å»ºserviceæ¥å£åŠå…¶å®ç°ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">queryAllUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">queryAllUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.queryAllUsers();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.service.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>refçš„å€¼ä¸º idä¸ºuserDaoçš„beanï¼Œè¿™ä¸ªbeanæ˜¯ä¸æ˜¯æˆ‘ä»¬å†™çš„ï¼Œè€Œæ˜¯ä¸Šä¸€èŠ‚ä¸­MapperScannerConfigureré…ç½®æ‰€åˆ›å»ºçš„ã€‚</p>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testService</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/ApplicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) applicationContext.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userService.queryAllUser();</span><br><span class="line">    <span class="keyword">for</span> (User user:users</span><br><span class="line">        ) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡ŒæˆåŠŸã€‚</p>
<h1 id="åäºŒã€äº‹åŠ¡"><a href="#åäºŒã€äº‹åŠ¡" class="headerlink" title="åäºŒã€äº‹åŠ¡"></a>åäºŒã€äº‹åŠ¡</h1><h2 id="12-1-é…ç½®äº‹åŠ¡ç®¡ç†å™¨"><a href="#12-1-é…ç½®äº‹åŠ¡ç®¡ç†å™¨" class="headerlink" title="12.1 é…ç½®äº‹åŠ¡ç®¡ç†å™¨"></a>12.1 é…ç½®äº‹åŠ¡ç®¡ç†å™¨</h2><p>DataSourceTransactionManageræ˜¯ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨ç»„ä»¶ï¼Œå®ƒå¸®æˆ‘ä»¬ç®¡ç†äº‹åŠ¡ç®¡ç†çš„ç›¸å…³åŠŸèƒ½ï¼Œæ¯”å¦‚æäº¤å’Œå›æ»šã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;tx&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>DataSourceTransactionManagerå’ŒSqlSessionFactoryBeanéœ€è¦æ³¨å…¥åŒä¸€ä¸ªdataSourceçš„beanï¼Œå¦åˆ™äº‹åŠ¡æ§åˆ¶å¤±è´¥ã€‚</p>
<h2 id="12-2-é…ç½®äº‹åŠ¡é€šçŸ¥"><a href="#12-2-é…ç½®äº‹åŠ¡é€šçŸ¥" class="headerlink" title="12.2 é…ç½®äº‹åŠ¡é€šçŸ¥"></a>12.2 é…ç½®äº‹åŠ¡é€šçŸ¥</h2><p>å®ƒåŸºäºäº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿›ä¸€æ­¥å®šåˆ¶ï¼Œç”Ÿæˆä¸€ä¸ªé¢å¤–åŠŸèƒ½ï¼ˆAdviceï¼‰ã€‚</p>
<p>äº‹åŠ¡éœ€è¦åœ¨æ ¸å¿ƒä¹‹å‰å¼€å¯ï¼Œæ ¸å¿ƒä¹‹åæäº¤ï¼Œæ®æ­¤æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç¯ç»•é€šçŸ¥æ¥å®Œæˆäº‹åŠ¡æ§åˆ¶ï¼›ä½†å®é™…ä¸ŠSpringå¸®æˆ‘ä»¬å®Œæˆäº†å¤§éƒ¨åˆ†å·¥ä½œï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸€äº›é…ç½®å°±å¯ä»¥æ‹¥æœ‰æ§åˆ¶äº‹åŠ¡çš„é¢å¤–åŠŸèƒ½ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txManager&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;tx&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å®šä¹‰äº‹åŠ¡å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯¹äºä»¥Userç»“å°¾çš„æ–¹æ³•ï¼Œåˆ‡å…¥æ—¶å®è¡Œå¯¹åº”äº‹åŠ¡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*User&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;Exception&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯¹äºä»¥queryå¼€å¤´çš„æ–¹æ³•ï¼Œåˆ‡å…¥æ—¶å®è¡Œå¯¹åº”äº‹åŠ¡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;SUPPORTS&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰©ä½™æ‰€æœ‰æ–¹æ³•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„adviceæ ‡ç­¾ä½¿ç”¨äº†txåˆ«åï¼Œåœ¨æ–‡ä»¶å¤´åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> &lt;!<span class="attr">--åŠ å…¥å¦‚ä¸‹å†…å®¹--</span>&gt;</span></span><br><span class="line">       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/tx</span><br><span class="line">                           http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>adviceæ ‡ç­¾çš„idå±æ€§å¡«å†™ä¸€ä¸ªæ ‡è¯†å³å¯ï¼ˆä»»æ„ï¼‰ï¼›transaction-manageræŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨ï¼Œä¹Ÿå°±æ˜¯12.1èŠ‚çš„beançš„idï¼›è¯¥æ ‡ç­¾åŸºäºäº‹åŠ¡ç®¡ç†å™¨çš„é€»è¾‘å®šåˆ¶å‡ºä¸€ä¸ªäº‹åŠ¡é€šçŸ¥ã€‚</p>
<p>methodæ ‡ç­¾çš„nameå±æ€§æ·»åŠ è¢«åˆ‡å…¥çš„æ–¹æ³•åï¼Œé™¤æ­¤ä¹‹å¤–è¿˜èƒ½å®šåˆ¶å…¶ä»–çš„äº‹åŠ¡å±æ€§ï¼Œä¸‹é¢ä¼šå¯¹äº‹åŠ¡å±æ€§è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p>
<h2 id="12-3-äº‹åŠ¡å±æ€§"><a href="#12-3-äº‹åŠ¡å±æ€§" class="headerlink" title="12.3 äº‹åŠ¡å±æ€§"></a>12.3 äº‹åŠ¡å±æ€§</h2><h3 id="12-3-1-éš”ç¦»çº§åˆ«"><a href="#12-3-1-éš”ç¦»çº§åˆ«" class="headerlink" title="12.3.1 éš”ç¦»çº§åˆ«"></a>12.3.1 éš”ç¦»çº§åˆ«</h3><p>äº‹åŠ¡ä¹‹é—´æ˜¯æœ‰éš”ç¦»çš„ï¼Œéš”ç¦»çº§åˆ«æœ‰é«˜æœ‰ä½ï¼Œå®ƒä»¬ä¸»è¦å½±å“ç€<strong>å¹¶å‘æ€§</strong>å’Œ<strong>å®‰å…¨æ€§</strong>ä¸¤ä¸ªæ–¹é¢ã€‚</p>
<p><strong>å®‰å…¨æ€§</strong>ï¼šçº§åˆ«è¶Šé«˜ï¼Œå¤šäº‹åŠ¡å¹¶å‘æ—¶ï¼Œ<strong>è¶Šå®‰å…¨</strong>ï¼›å› ä¸ºå…±äº«çš„æ•°æ®è¶Šæ¥è¶Šå°‘ï¼Œäº‹åŠ¡é—´å½¼æ­¤å¹²æ‰°å‡å°‘ã€‚</p>
<p><strong>å¹¶å‘æ€§</strong>ï¼šçº§åˆ«è¶Šé«˜ï¼Œå¤šäº‹åŠ¡å¹¶å‘æ—¶ï¼Œ<strong>å¹¶å‘è¶Šå·®</strong>ï¼›å› ä¸ºå…±äº«çš„æ•°æ®è¶Šæ¥è¶Šå°‘ï¼Œäº‹åŠ¡é—´é˜»å¡æƒ…å†µå¢å¤šã€‚</p>
<p>methodæ ‡ç­¾çš„å±æ€§<strong>isolation</strong>å³<strong>éš”ç¦»çº§åˆ«</strong>ï¼Œå®ƒæœ‰å¦‚ä¸‹çš„å–å€¼ï¼š</p>
<ul>
<li>DEFAULTï¼šé»˜è®¤å€¼ï¼Œé‡‡ç”¨æ•°æ®åº“é»˜è®¤çš„è®¾ç½®ï¼ˆå»ºè®®ï¼‰ï¼›</li>
<li>READ-UNCOMMITEDï¼šè¯»æœªæäº¤ï¼›</li>
<li>READ-COMMITEDï¼šè¯»æäº¤ï¼›ï¼ˆOracleæ•°æ®åº“é»˜è®¤éš”ç¦»çº§åˆ«ï¼‰</li>
<li>REPEATABLE-READï¼šå¯é‡å¤è¯»ï¼›ï¼ˆMySqlæ•°æ®åº“é»˜è®¤éš”ç¦»çº§åˆ«ï¼‰</li>
<li>SERIALIZED-READï¼šåºåˆ—åŒ–è¯»ã€‚</li>
</ul>
<p>éš”ç¦»çº§åˆ«ä»ä½åˆ°é«˜ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">READ-UNCOMMITED &lt; READ-COMMITED &lt; REPEATABLE-READ &lt; SERIALIZED-READ</span><br></pre></td></tr></table></figure>

<p>å¤šäº‹åŠ¡å¹¶å‘æ—¶çš„å®‰å…¨é—®é¢˜ï¼š</p>
<ul>
<li>è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æœªæäº¤çš„æ•°æ®ã€‚éš”ç¦»çº§åˆ«å¤§äºç­‰äºREAD-COMMITEDå¯é˜²æ­¢ã€‚</li>
<li>ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–ä¸€è¡Œæ•°æ®çš„ç›¸åŒå†…å®¹ï¼Œå…¶ç»“æœä¸ä¸€è‡´ã€‚éš”ç¦»çº§åˆ«å¤§äºç­‰äºREPEATABLE-READå¯é˜²æ­¢ã€‚</li>
<li>å¹»å½±è¯»ï¼šä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–ä¸€å¼ è¡¨ä¸­çš„ç›¸åŒå†…å®¹ï¼Œå…¶ç»“æœï¼ˆè¡¨è¡Œæ•°ï¼‰ä¸ä¸€è‡´ã€‚éš”ç¦»çº§åˆ«å¤§äºç­‰äºSERIALIZED-READå¯é˜²æ­¢ã€‚</li>
</ul>
<h3 id="12-3-2-ä¼ æ’­è¡Œä¸º"><a href="#12-3-2-ä¼ æ’­è¡Œä¸º" class="headerlink" title="12.3.2 ä¼ æ’­è¡Œä¸º"></a>12.3.2 ä¼ æ’­è¡Œä¸º</h3><p>methodæ ‡ç­¾çš„å±æ€§<strong>propagation</strong>å³<strong>ä¼ æ’­è¡Œä¸º</strong>ã€‚</p>
<p>å…ˆæ¥è§£é‡Šä»¥ä¸‹ä»€ä¹ˆå«<strong>äº‹åŠ¡åµŒå¥—</strong>ã€‚å‡è®¾æœ‰ä¸¤ä¸ªServiceï¼Œå®ƒä»¬åˆ†åˆ«æœ‰å„è‡ªçš„æ–¹æ³•ï¼Œæ–¹æ³•å†…æœ‰è‡ªå·±çš„äº‹åŠ¡æ§åˆ¶ï¼›å½“Service1è°ƒç”¨äº†Service2çš„æ–¹æ³•æ—¶ï¼Œå°±ä¼šå‘ç”Ÿäº‹åŠ¡åµŒå¥—ï¼Œå½“Service2çš„æ–¹æ³•å‘ç”Ÿå›æ»šæ—¶ï¼Œå¯èƒ½åªä¼šå½±å“Service2çš„äº‹åŠ¡æ§åˆ¶ï¼Œè€Œä¸å½±å“Service1çš„äº‹åŠ¡æ§åˆ¶ã€‚</p>
<p>å½“æ¶‰åŠåˆ°äº‹åŠ¡åµŒå¥—æ—¶ï¼Œå¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ã€‚å±æ€§<strong>propagation</strong>æœ‰ä»¥ä¸‹å–å€¼ï¼š</p>
<ul>
<li>SUPPORTSï¼šä¸å­˜åœ¨å¤–éƒ¨äº‹åŠ¡ï¼Œåˆ™ä¸å¼€å¯æ–°äº‹åŠ¡ï¼›å­˜åœ¨å¤–éƒ¨äº‹ç‰©ï¼Œåˆ™åˆå¹¶åˆ°å¤–éƒ¨äº‹åŠ¡ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è‡ªå·±å‘ç”Ÿé”™è¯¯ä¼šå›æ»šï¼Œå¤–éƒ¨å‘ç”Ÿé”™è¯¯ä¹Ÿä¼šè·Ÿå®ƒå›æ»šã€‚ï¼ˆé€‚åˆæŸ¥è¯¢ï¼‰</li>
<li>REQUIREDï¼šä¸å­˜åœ¨å¤–éƒ¨äº‹åŠ¡ï¼Œåˆ™å¼€å¯æ–°äº‹åŠ¡ï¼›å­˜åœ¨å¤–éƒ¨äº‹ç‰©ï¼Œåˆ™åˆå¹¶åˆ°å¤–éƒ¨äº‹åŠ¡ä¸­ã€‚ï¼ˆé»˜è®¤å€¼ï¼Œé€‚åˆå¢åˆ æ”¹ï¼‰</li>
</ul>
<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†é…ç½®ä¸€ä¸‹äº‹åŠ¡é€šçŸ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;tx:method name=&quot;queryAllUser&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;SUPPORTS&quot; rollback-for=&quot;Exception&quot;/&gt;</span><br><span class="line">&lt;tx:method name=&quot;insertUser&quot; propagation=&quot;REQUIRED&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-3-è¯»å†™æ€§"><a href="#12-3-3-è¯»å†™æ€§" class="headerlink" title="12.3.3 è¯»å†™æ€§"></a>12.3.3 è¯»å†™æ€§</h3><p>methodæ ‡ç­¾çš„å±æ€§<strong>read-only</strong>å³<strong>è¯»å†™æ€§</strong>ï¼Œå®ƒæœ‰ä»¥ä¸‹å–å€¼ï¼š</p>
<ul>
<li>trueï¼šåªè¯»ï¼Œå¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li>falseï¼šé»˜è®¤å€¼ï¼Œå¯è¯»å¯å†™ï¼Œé€‚åˆå¢åˆ æ”¹ã€‚</li>
</ul>
<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†é…ç½®ä¸€ä¸‹äº‹åŠ¡é€šçŸ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;tx:method name=&quot;queryAllUser&quot; read-only=&quot;true&quot; propagation=&quot;SUPPORTS&quot; rollback-for=&quot;Exception&quot;/&gt;</span><br><span class="line">&lt;tx:method name=&quot;insertUser&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-4-äº‹åŠ¡è¶…æ—¶"><a href="#12-3-4-äº‹åŠ¡è¶…æ—¶" class="headerlink" title="12.3.4 äº‹åŠ¡è¶…æ—¶"></a>12.3.4 äº‹åŠ¡è¶…æ—¶</h3><p>methodæ ‡ç­¾çš„å±æ€§<strong>timeout</strong>å³<strong>äº‹åŠ¡è¶…æ—¶æ—¶é—´</strong>ï¼ˆå•ä½ç§’ï¼‰ã€‚</p>
<p>äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¿ä¸åˆ°éœ€è¦çš„èµ„æºå°±ä¼šè¢«é˜»å¡ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¦‚æœä¸€ç›´ç­‰å¾…æœ‰å¯èƒ½å˜æˆå‡ºç°æ­»é”ï¼Œæ‰€ä»¥éœ€è¦ç»™äº‹åŠ¡è®¾ç½®ä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œè¶…æ—¶åå°±ä¼šæŠ¥é”™å¹¶åœæ­¢äº‹åŠ¡ã€‚</p>
<p>è¯¥å±æ€§å–å€¼ä¸º**-1**æ—¶ï¼Œç”±æ•°æ®åº“æŒ‡å®šç­‰å¾…æ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤å€¼ï¼ˆå»ºè®®è®¾ç½®ï¼‰ã€‚</p>
<h3 id="12-3-5-äº‹åŠ¡å›æ»š"><a href="#12-3-5-äº‹åŠ¡å›æ»š" class="headerlink" title="12.3.5 äº‹åŠ¡å›æ»š"></a>12.3.5 äº‹åŠ¡å›æ»š</h3><p>methodæ ‡ç­¾çš„å±æ€§<strong>rollback-for</strong>å³<strong>äº‹åŠ¡å›æ»š</strong>ã€‚</p>
<p>é»˜è®¤å¦‚æœäº‹åŠ¡ä¸­æŠ›å‡ºRuntimeExceptionï¼Œåˆ™è‡ªåŠ¨å›æ»šï¼›</p>
<p>å¦‚æœäº‹åŠ¡ä¸­æŠ›å‡ºCheckExceptionï¼ˆéè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼Œä¸ä¼šè‡ªåŠ¨å›æ»šï¼Œè€Œæ˜¯é»˜è®¤æäº¤äº‹åŠ¡ã€‚</p>
<p>å¯ä»¥é€šè¿‡å°†è¯¥å±æ€§å€¼è®¾ä¸ºâ€œ<strong>Exception</strong>â€æ¥è¿›è¡Œå›æ»šï¼Œæˆ–è€…å°†CheckExceptionè½¬æ¢æˆRuntimeExceptionä¸ŠæŠ›ã€‚</p>
<p>æ®æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†é…ç½®ä¸€ä¸‹äº‹åŠ¡é€šçŸ¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;tx:method name=&quot;queryAllUser&quot; read-only=&quot;true&quot; propagation=&quot;SUPPORTS&quot; rollback-for=&quot;Exception&quot;/&gt;</span><br><span class="line">&lt;tx:method name=&quot;insertUser&quot; rollback-for=&quot;Exception&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="12-3-6-ç¼–ç»‡"><a href="#12-3-6-ç¼–ç»‡" class="headerlink" title="12.3.6 ç¼–ç»‡"></a>12.3.6 ç¼–ç»‡</h3><p>æœ€åçš„äº‹åŠ¡é€šçŸ¥å®šä¹‰ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txManager&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;tx&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å®šä¹‰äº‹åŠ¡å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;queryAllUsers&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;SUPPORTS&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;Exception&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*User&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;Exception&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰©ä½™æ‰€æœ‰æ–¹æ³•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å®šä¹‰å®Œäº‹åŠ¡é€šçŸ¥åï¼Œè¦å°†äº‹åŠ¡ç®¡ç†çš„Adviceåˆ‡å…¥éœ€è¦äº‹åŠ¡çš„ä¸šåŠ¡æ–¹æ³•ä¸­ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;tx_userService&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* lazydog.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txManager&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;tx_userService&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTx</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;/ApplicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) applicationContext.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">    userService.deleteUser(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ•°æ®åº“å·²æˆåŠŸåˆ é™¤ã€‚</p>
<p>è¿™ç§æ§åˆ¶äº‹åŠ¡çš„æ–¹æ³•å«åšå£°æ˜å¼æ§åˆ¶ã€‚</p>
<h1 id="åä¸‰ã€æ³¨è§£å¼€å‘"><a href="#åä¸‰ã€æ³¨è§£å¼€å‘" class="headerlink" title="åä¸‰ã€æ³¨è§£å¼€å‘"></a>åä¸‰ã€æ³¨è§£å¼€å‘</h1><p>ä½¿ç”¨æ³¨è§£å¯ä»¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘æ­¥éª¤ï¼Œå¾ˆå¤šæ³¨è§£éƒ½å¯ä»¥ä»£æ›¿ä»£ç é…ç½®ã€‚</p>
<h2 id="13-1-å£°æ˜Bean"><a href="#13-1-å£°æ˜Bean" class="headerlink" title="13.1 å£°æ˜Bean"></a>13.1 å£°æ˜Bean</h2><p>è¿™ç±»æ³¨è§£å¯ä»¥æ›¿æ¢è‡ªå»ºç±»å‹ç»„ä»¶çš„æ ‡ç­¾ï¼Œæ›´å¿«é€Ÿçš„å£°æ˜beanã€‚</p>
<p>å£°æ˜Beançš„æ³¨è§£æœ‰å¦‚ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>@Serviceï¼šä¸šåŠ¡ç±»ä¸“ç”¨ï¼›</li>
<li>@Repositoryï¼šdaoå®ç°ç±»ä¸“ä¸šï¼›</li>
<li>@Controllerï¼šwebå±‚ä¸“ç”¨ï¼›</li>
<li>@Componentï¼šé€šç”¨ï¼›</li>
<li>@Scopeï¼šç”¨æˆ·æ§åˆ¶beançš„åˆ›å»ºæ¨¡å¼ã€‚</li>
</ul>
<p>å‰å››ä¸ªæ³¨è§£é™¤äº†åç§°ä¸ä¸€æ ·å…¶ä»–åŸºæœ¬ä¸€æ ·ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//ä»£ç ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç±»ä¸Šæ ‡æ³¨ä¸€ä¸ªæ³¨è§£ï¼Œè¿™æ ·å†™å°±ç›¸å½“äºåœ¨é…ç½®æ–‡ä»¶ä¸­çš„ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazydog.service.UserServiceImpl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å•å†™æ³¨è§£ï¼Œä¸åŠ æ‹¬å·ï¼Œidåå³ä¸ºé¦–å­—æ¯å°å†™çš„ç±»åï¼Œå³userServiceImplã€‚</p>
<p>å‰å››ç§ç”¨æ³•ä¸€è‡´ï¼Œä¸å†ä¸€ä¸€æ¼”ç¤ºã€‚</p>
<p>Springé»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå¦‚æœä½ éœ€è¦å¤šä¾‹æ¨¡å¼å°±å¯ä»¥ä½¿ç”¨Scopeæ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">//ä»£ç ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-2-æ³¨å…¥"><a href="#13-2-æ³¨å…¥" class="headerlink" title="13.2 æ³¨å…¥"></a>13.2 æ³¨å…¥</h2><p>æ³¨å…¥æ³¨è§£ç”¨äºå®Œæˆbeanå±æ€§çš„æ³¨å…¥ã€‚</p>
<p>æ³¨å…¥æ³¨è§£æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>@Autowiredï¼šåŸºäºç±»å‹è‡ªåŠ¨æ³¨å…¥ï¼›</li>
<li>@Resourceï¼šåŸºäºåç§°è‡ªåŠ¨æ³¨å…¥ï¼›</li>
<li>@Qualifier(â€œuserDaoâ€)ï¼šé™å®šæ³¨å…¥çš„beançš„idï¼Œä¸€èˆ¬ä¸@Autowiredè”ç”¨ã€‚</li>
<li>@Valueï¼šæ³¨å…¥ç®€å•ç±»å‹æ•°æ®ï¼ˆjdk8ä¸­åŸºæœ¬ç±»å‹+Stringï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;userDao&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Resourceæ‹¬å·å†…çš„nameå±æ€§æŒ‡å®šäº†æ³¨å…¥çš„beançš„idå€¼ä¸ºuserDaoï¼›æ‹¬å·å¯ä»¥çœç•¥ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå¯»æ‰¾ä¸å±æ€§åŒåçš„bean idè¿›è¡Œæ³¨å…¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier(&quot;userDao&quot;)</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure>

<p>@Autowiredä¼šå¯»æ‰¾ç±»å‹ä¸ºUserDaoç±»å‹çš„beanè¿›è¡Œæ³¨å…¥ï¼Œå½“é…ç½®æ–‡ä»¶ä¸­æœ‰å¤šä¸ªåŒç±»å‹çš„beanæ—¶å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨@Qualifier(â€œuserDaoâ€)æ¥æŒ‡å®šidå€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;10&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer testId;</span><br></pre></td></tr></table></figure>

<p>@Valueçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œåœ¨å±æ€§ä¸Šæ‰“èµæ ‡æ³¨ï¼Œæ‹¬å·å†…å¡«å€¼å³å¯ã€‚</p>
<h2 id="13-3-äº‹åŠ¡æ§åˆ¶"><a href="#13-3-äº‹åŠ¡æ§åˆ¶" class="headerlink" title="13.3 äº‹åŠ¡æ§åˆ¶"></a>13.3 äº‹åŠ¡æ§åˆ¶</h2><p>è¿™ç±»æ³¨è§£ç”¨äºæ§åˆ¶äº‹åŠ¡åˆ‡å…¥ï¼Œä¸“ç”¨äºä¸šåŠ¡ç±»ï¼Œå› ä¸ºä¸šåŠ¡ç±»æ‰éœ€è¦åšäº‹åŠ¡æ§åˆ¶ã€‚</p>
<ul>
<li>@Transactionalï¼šå¯ä»¥åŠ åœ¨ç±»ä¸Šæˆ–è€…æ–¹æ³•ä¸Šï¼ŒåŠ åœ¨ç±»ä¸Šè¡¨ç¤ºåº”ç”¨äºç±»ç§æ‰€æœ‰æ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Transactional(isolation = Isolation.DEFAULT,propagation = Propagation.REQUIRED,timeout = -1,readOnly = false,rollbackFor = Exception.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ‹¬å·ç§è®¾ç½®äº‹åŠ¡å±æ€§ã€‚</p>
<p>å½“ç»™æ–¹æ³•å•ç‹¬æ·»åŠ äº‹åŠ¡æ³¨è§£æ—¶ï¼Œç±»ä¸Šçš„äº‹åŠ¡æ³¨è§£å°±ä¼šå¤±æ•ˆã€‚</p>
<h2 id="13-4-æ³¨è§£æ‰€éœ€é…ç½®"><a href="#13-4-æ³¨è§£æ‰€éœ€é…ç½®" class="headerlink" title="13.4 æ³¨è§£æ‰€éœ€é…ç½®"></a>13.4 æ³¨è§£æ‰€éœ€é…ç½®</h2><p>è¿›è¡Œæ³¨è§£å¼€å‘åï¼Œæ³¨è§£å¯èƒ½å­˜åœ¨åœ¨å„ç§ç±»å’Œæ–¹æ³•ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Springè¿™äº›æ³¨è§£ä½ç½®ï¼Œç„¶åè¿›è¡Œè¯†åˆ«å’Œè§£æã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å‘Šè¯‰Springæ³¨è§£ä½ç½®ï¼Œå¡«å†™ä¸€ä¸ªçˆ¶åŒ…ï¼ŒSpringå°±ä¼šå¯»æ‰¾åŒ…ä¸‹ç±»çš„æ³¨è§£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;lazydog&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å•ç‹¬é…ç½®Transactionalæ³¨è§£ï¼ŒæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;tx&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿›è¡Œå®Œå¦‚ä¸Šçš„è®¾ç½®åï¼Œ12.6.6èŠ‚çš„é…ç½®å°±å¯ä»¥å…¨éƒ¨æ³¨é‡Šæ‰äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è‡ªè¡Œä½¿ç”¨æ³¨è§£è¿›è¡Œé…ç½®ï¼Œç¹çæ“ä½œä¸å†æ¼”ç¤ºã€‚</p>
<h2 id="13-5-AOPå¼€å‘"><a href="#13-5-AOPå¼€å‘" class="headerlink" title="13.5 AOPå¼€å‘"></a>13.5 AOPå¼€å‘</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜æ­¤ç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»ï¼ŒåŒ…å«åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰å’Œé€šçŸ¥ï¼ˆAdviceï¼‰</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="comment">//å£°æ˜beanï¼Œè¿›å…¥å·¥å‚</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰åˆ‡å…¥ç‚¹ï¼Œpc()æ–¹æ³•åªæ˜¯ä¸€ç§å½¢å¼</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* lazydog.service.UserServiceImpl.*())&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pc</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//å¼•ç”¨pc()æ–¹æ³•ï¼Œæœ¬è´¨æ˜¯åœ¨å¼•å…¥åˆ‡å…¥ç‚¹</span></span><br><span class="line">    <span class="comment">//å‚æ•°JoinPointæ˜¯è¿æ¥ç‚¹ç±»</span></span><br><span class="line">    <span class="meta">@Before(&quot;pc()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">MyBefore</span><span class="params">(JoinPoint a)</span>&#123;</span><br><span class="line">        <span class="comment">//è¯¥æ–¹æ³•è·å¾—å½“å‰ç›®æ ‡</span></span><br><span class="line">        System.out.println(<span class="string">&quot;target : &quot;</span>+a.getTarget());</span><br><span class="line">        <span class="comment">//è¯¥æ–¹æ³•è·å¾—å½“å‰æ–¹æ³•çš„å‚æ•°è¡¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;args : &quot;</span>+a.getArgs());</span><br><span class="line">        <span class="comment">//è¯¥æ–¹æ³•è·å¾—å½“å‰è°ƒç”¨æ–¹æ³•çš„åç§°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;method&#x27;s name : &quot;</span>+a.getSignature().getName());</span><br><span class="line">        <span class="comment">//ä»¥ä¸Šéƒ½æ˜¯å¯é€‰æ–¹æ³•</span></span><br><span class="line">        System.out.println(<span class="string">&quot;before~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//valueå¼•ç”¨åˆ‡å…¥ç‚¹ï¼›returningè·å¾—æ ¸å¿ƒåŠŸèƒ½çš„è¿”å›å€¼ï¼ŒåŒæ–¹æ³•å‚æ•°çš„ret</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;pc()&quot;,returning = &quot;ret&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">MyAfterReturning</span><span class="params">(JoinPoint a,Object ret)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after~~~ : &quot;</span>+ret);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//proceed()æ–¹æ³•æ‰§è¡Œæ ¸å¿ƒåŠŸèƒ½ï¼Œproceedå¯¹è±¡å­˜æ”¾æ ¸å¿ƒåŠŸèƒ½è¿”å›çš„ä»£ç </span></span><br><span class="line">    <span class="meta">@Around(&quot;pc()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">MyInterceptor</span><span class="params">(ProceedingJoinPoint p)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;interceptor~~~1&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> p.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;interceptor~~~2&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼‚å¸¸é€šçŸ¥</span></span><br><span class="line">    <span class="comment">//exç”¨æ¥ä¿å­˜å½“å‰çš„å¼‚å¸¸ï¼Œå¯¹åº”å‚æ•°ä¸­çš„e</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;pc()&quot;,throwing = &quot;ex&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">MyThrows</span><span class="params">(JoinPoint a,Exception e)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;throws : &quot;</span>+e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç åŒºå—ä¸­æ‰€å±•ç¤ºçš„6ä¸ªæ ‡ç­¾åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>@Aspectï¼šå£°æ˜åˆ‡é¢ç±»ï¼›</li>
<li>@Pointcutï¼šå®šä¹‰åˆ‡å…¥ç‚¹ï¼›</li>
<li>@Beforeï¼šå‰ç½®é€šçŸ¥ï¼›</li>
<li>@AfterReturningï¼šåç½®é€šçŸ¥ï¼›</li>
<li>@Aroundï¼šç¯ç»•é€šçŸ¥ï¼›</li>
<li>@AfterThrowingï¼šå¼‚å¸¸é€šçŸ¥ã€‚</li>
</ul>
<p>ä½†ä»…ä»…æ˜¯æ·»åŠ æ³¨è§£æ˜¯æ²¡ç”¨çš„ï¼Œè¿˜éœ€è¦å†é…ç½®ä¸­å¼€å¯ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯ç”¨aopæ³¨è§£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä¸Šè¿°é…ç½®æ˜¯åœ¨13.4é…ç½®çš„åŸºç¡€ä¸Šã€‚</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVA å¼‚å¸¸è¯¦è§£</title>
    <url>/2021/04/22/JAVA-%E5%BC%82%E5%B8%B8%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h1 id="å¼‚å¸¸çš„æ¦‚å¿µ"><a href="#å¼‚å¸¸çš„æ¦‚å¿µ" class="headerlink" title="å¼‚å¸¸çš„æ¦‚å¿µ"></a>å¼‚å¸¸çš„æ¦‚å¿µ</h1><ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„ä¸æ­£å¸¸ç°è±¡ã€‚å‡ºç°å¼‚å¸¸ä¸å¤„ç†å°†ç»ˆæ­¢ç¨‹åºè¿è¡Œã€‚</li>
<li><strong>å¼‚å¸¸å¤„ç†çš„å¿…è¦æ€§</strong>ï¼šä»»ä½•ç¨‹åºéƒ½å¯èƒ½å­˜åœ¨å¤§é‡çš„æœªçŸ¥é—®é¢˜ã€é”™è¯¯ï¼›å¦‚æœä¸å¯¹è¿™äº›é—®é¢˜è¿›è¡Œæ­£ç¡®å¤„ç†ï¼Œåˆ™å¯èƒ½å¯¼è‡´ç¨‹åºçš„ä¸­æ–­ï¼Œé€ æˆä¸å¿…è¦çš„æŸå¤±ã€‚</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šJAVAç¼–ç¨‹è¯­è¨€ä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸ºç¨‹åºæä¾›äº†å¤„ç†å¼‚å¸¸çš„èƒ½åŠ›ã€‚</li>
</ul>
<p><img src="https://pic.downk.cc/item/5f9fe85d1cd1bbb86b7a13fe.png" alt="img"></p>
<h1 id="å¼‚å¸¸çš„åˆ†ç±»"><a href="#å¼‚å¸¸çš„åˆ†ç±»" class="headerlink" title="å¼‚å¸¸çš„åˆ†ç±»"></a>å¼‚å¸¸çš„åˆ†ç±»</h1><ul>
<li><p><strong>Throwableï¼š</strong>å¯æŠ›å‡ºçš„ï¼Œä¸€åˆ‡é”™è¯¯æˆ–å¼‚å¸¸çš„çˆ¶ç±»ï¼Œä½äºjava.langåŒ…ä¸­ã€‚</p>
<ul>
<li><p>Errorï¼š</p>
<p>JVMã€ç¡¬ä»¶ã€æ‰§è¡Œé€»è¾‘é”™è¯¯ã€ä¸èƒ½æ‰‹åŠ¨å¤„ç†ã€‚</p>
<ul>
<li>StackOverflowError</li>
<li>OutOfMemoryError</li>
</ul>
</li>
<li><p>Exceptionï¼š</p>
<p>ç¨‹åºåœ¨è¿è¡Œå’Œé…ç½®ä¸­äº§ç”Ÿçš„é—®é¢˜ï¼Œå¯å¤„ç†ã€‚</p>
<ul>
<li>RuntimeExceptionï¼šè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯å¤„ç†ï¼Œå¯ä¸å¤„ç†ã€‚</li>
<li>CheckedExceptionï¼š Exceptionç±»ä¸­é™¤RuntimeExceptionçš„å­ç±»å¤–éƒ½è¢«ç§°ä¸ºCheckedExceptionï¼ˆæ£€æŸ¥æ—¶å¼‚å¸¸ï¼‰ï¼Œå¿…é¡»å¤„ç†ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å¸¸è§è¿è¡Œæ—¶å¼‚å¸¸</strong></p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>NullPointerException</td>
<td>ç©ºæŒ‡é’ˆå¼‚å¸¸</td>
</tr>
<tr>
<td>ArrayIndexOutOfBoundsException</td>
<td>æ•°ç»„è¶Šç•Œå¼‚å¸¸</td>
</tr>
<tr>
<td>ClassCastException</td>
<td>ç±»å‹è½¬æ¢å¼‚å¸¸</td>
</tr>
<tr>
<td>NumberFormatException</td>
<td>æ•°å­—æ ¼å¼åŒ–å¼‚å¸¸</td>
</tr>
<tr>
<td>ArithmeticException</td>
<td>ç®—æ•°å¼‚å¸¸</td>
</tr>
</tbody></table>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå¸¸è§è¿è¡Œæ—¶å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * è¿è¡Œæ—¶å¼‚å¸¸ï¼šRuntimeExceptionä»¥åŠå­ç±»</span></span><br><span class="line"><span class="comment"> * æ£€æŸ¥æ—¶å¼‚å¸¸ï¼šExceptionä»¥åŠå…¶å­ç±»ï¼Œé™¤äº†RuntimeException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//NullPointerException</span></span><br><span class="line">		<span class="comment">//ä½¿ç”¨æ²¡æœ‰åˆå§‹åŒ–çš„å¯¹è±¡</span></span><br><span class="line">		String name=<span class="literal">null</span>;</span><br><span class="line">		System.out.println(name.equals(<span class="string">&quot;tang&quot;</span>));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ArrayIndexOutOfBoundsException</span></span><br><span class="line">		<span class="type">int</span>[] a= &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;;</span><br><span class="line">		System.out.println(a[<span class="number">3</span>]);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ClassCastException</span></span><br><span class="line">		Object person=<span class="string">&quot;tang&quot;</span>;</span><br><span class="line">		Integer integer=(Integer) person;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//NumberFormatException</span></span><br><span class="line">		<span class="type">int</span> n=integer.parseInt(<span class="string">&quot;036s&quot;</span>);</span><br><span class="line">		System.out.println(n);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ArithmeticException</span></span><br><span class="line">		<span class="type">int</span> m=<span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">		System.out.println(m);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’"><a href="#å¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’" class="headerlink" title="å¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’"></a>å¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’</h1><h2 id="å¼‚å¸¸çš„äº§ç”Ÿ"><a href="#å¼‚å¸¸çš„äº§ç”Ÿ" class="headerlink" title="å¼‚å¸¸çš„äº§ç”Ÿ"></a>å¼‚å¸¸çš„äº§ç”Ÿ</h2><ul>
<li>å½“ç¨‹åºåœ¨è¿è¡Œæ—¶é‡åˆ°ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æˆ–ç»“æœæ—¶ï¼Œä¼šäº§ç”Ÿå¼‚å¸¸æˆ–ç¨‹åºå‘˜ä½¿ç”¨throwå…³é”®å­—æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<h2 id="å¼‚å¸¸çš„ä¼ é€’"><a href="#å¼‚å¸¸çš„ä¼ é€’" class="headerlink" title="å¼‚å¸¸çš„ä¼ é€’"></a>å¼‚å¸¸çš„ä¼ é€’</h2><ul>
<li>æŒ‰ç…§æ–¹æ³•çš„è°ƒç”¨é“¾åå‘ä¼ é€’ï¼Œå¦‚å§‹ç»ˆæ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œæœ€ç»ˆä¼šç”±JVMè¿›è¡Œé»˜è®¤å¼‚å¸¸å¤„ç†ï¼ˆæ‰“å°å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œç»ˆæ­¢å½“å‰ç¨‹åºè¿è¡Œï¼‰ã€‚</li>
</ul>
<h2 id="æ¼”ç¤ºå¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’"><a href="#æ¼”ç¤ºå¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’" class="headerlink" title="æ¼”ç¤ºå¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’"></a>æ¼”ç¤ºå¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå¼‚å¸¸çš„äº§ç”Ÿå’Œä¼ é€’</span></span><br><span class="line"><span class="comment"> * è¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼Œå®ç°ä¸¤ä¸ªæ•°å­—ç›¸é™¤ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">		<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">		<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+num1/num2);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">        in.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä»£ç ï¼Œè¾“å…¥10å’Œ2ï¼Œç¨‹åºæ­£å¸¸è¿è¡Œï¼Œè¾“å‡º5ã€‚</p>
<p>è¿è¡Œä»£ç ï¼Œè¾“å…¥10å’Œ0ï¼Œç¨‹åºäº§ç”Ÿå¼‚å¸¸ï¼š<code>java.lang.ArithmeticException</code>ï¼Œå¹¶ä¸”ç¨‹åºä¹Ÿæ²¡æœ‰æ‰“å°æœ€åä¸€å¥è¯ï¼ˆç¨‹åºè¢«ä¸­æ–­ï¼‰ã€‚</p>
<p>è¿è¡Œä»£ç ï¼Œè¾“å…¥aï¼Œç¨‹åºäº§ç”Ÿå¼‚å¸¸ï¼š<code>java.util.InputMismatchException</code>ï¼Œå¹¶ä¸”ç¨‹åºæ²¡æœ‰è®©ä½ è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼ˆç¨‹åºè¢«ä¸­æ–­ï¼‰ã€‚</p>
<p>ä¸Šé¢çš„ä»£ç ä¸­æˆ‘å¹¶æ²¡æœ‰å¤„ç†ä»»ä½•å¼‚å¸¸ï¼Œæ²¡æœ‰try catchä¹Ÿæ²¡æœ‰throwsï¼Œå†™çš„æ—¶å€™IDEä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œåªæ˜¯è¿è¡Œçš„æ—¶å€™äº§ç”Ÿäº†å¼‚å¸¸ã€‚</p>
<p>ä¿®æ”¹ä¸Šè¿°ä»£ç ä»¥æ¼”ç¤ºæ‰€è°“å¼‚å¸¸çš„ä¼ é€’ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		operation();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">operation</span><span class="params">()</span> &#123;</span><br><span class="line">		divide();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">		<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">		<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+num1/num2);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œmainè°ƒç”¨operationï¼Œoperationè°ƒç”¨divideæ–¹æ³•ã€‚è¿è¡Œä»£ç ï¼Œé‡å¤ä¸Šæ–‡çš„æ“ä½œï¼Œç¨‹åºäº§ç”Ÿäº†å¼‚å¸¸ã€‚æ˜¾ç„¶è¿™ä¸ªå¼‚å¸¸å‘ç”Ÿåœ¨äº†divideæ–¹æ³•ï¼Œå½“ç¨‹åºå‘ç”Ÿå¼‚å¸¸åï¼Œæ£€æŸ¥divideï¼Œå‘ç°æ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œå†æŠŠå¼‚å¸¸äº¤ç»™operationæ–¹æ³•ï¼Œå‘ç°ä¹Ÿæ²¡æœ‰å¤„ç†ï¼Œå†æŠŠå¼‚å¸¸äº¤ç»™mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¹Ÿæ²¡æœ‰å¤„ç†ï¼Œäºæ˜¯JVMæ‰“å°å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œç»ˆæ­¢å½“å‰ç¨‹åºè¿è¡Œã€‚</p>
<hr>
<h1 id="å¼‚å¸¸çš„å¤„ç†"><a href="#å¼‚å¸¸çš„å¤„ç†" class="headerlink" title="å¼‚å¸¸çš„å¤„ç†"></a>å¼‚å¸¸çš„å¤„ç†</h1><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><ul>
<li>Javaçš„å¼‚å¸¸å¤„ç†æ˜¯é€šå…³5ä¸ªå…³é”®å­—æ¥å®ç°çš„ï¼š<ul>
<li><strong>tryï¼š</strong>æ‰§è¡Œå¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„ä»£ç ã€‚</li>
<li><strong>catchï¼š</strong>æ•è·å¼‚å¸¸ï¼Œå¹¶å¤„ç†ã€‚</li>
<li><strong>finallyï¼š</strong>æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œä»£ç æ€»èƒ½æ‰§è¡Œï¼Œä¸€èˆ¬ç”¨æ¥é‡Šæ”¾èµ„æºç­‰ã€‚finallyå”¯ä¸€ä¸æ‰§è¡Œçš„æƒ…å†µå°±æ˜¯é€€å‡ºjavaè™šæ‹Ÿæœºã€‚</li>
<li><strong>throw ï¼š</strong>æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><strong>throwsï¼š</strong>å£°æ˜æ–¹æ³•å¯èƒ½è¦æŠ›å‡ºçš„å„ç§å¼‚å¸¸ã€‚</li>
</ul>
</li>
</ul>
<h2 id="try-catchè¯­å¥å—"><a href="#try-catchè¯­å¥å—" class="headerlink" title="try catchè¯­å¥å—"></a>try catchè¯­å¥å—</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºtry...catch...è¯­å¥çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * try&#123;...å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125;</span></span><br><span class="line"><span class="comment"> * catch&#123;...æ•è·å‘ç”Ÿçš„å¼‚å¸¸å¹¶å¤„ç†&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">            <span class="comment">//å¯èƒ½å‘ç”ŸInputMismatchException</span></span><br><span class="line">			<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">            <span class="comment">//å¯èƒ½å‘ç”ŸArithmeticException</span></span><br><span class="line">			result=num1/num2;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">//æ‰“å°å †æ ˆä¿¡æ¯ï¼Œä½ ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰è¿™è¡Œä»£ç æ„Ÿå—ä¸€ä¸‹</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;	</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä»£ç ï¼Œè¾“å…¥å­—æ¯æˆ–è€…é™¤æ•°ä¸º0æ—¶å¼‚å¸¸è¢«æ•è·ï¼ŒåŒæ—¶ç¨‹åºå¾€ä¸‹æ‰§è¡Œå®Œæ¯•ï¼Œæ‰“å°å‡ºäº†æœ€åä¸€å¥è¯ï¼Œè¯´æ˜æ•è·å¼‚å¸¸åç¨‹åºæ²¡æœ‰è¢«ä¸­æ–­ã€‚</p>
<p>è¿è¡Œè¿™æ®µä»£ç çš„æ—¶å€™å¯èƒ½æœ‰ä¸‰ç§æƒ…å†µï¼š</p>
<ol>
<li><p>æ­£å¸¸è¿è¡Œæ²¡æœ‰å¼‚å¸¸ã€‚</p>
</li>
<li><p>å‘ç”Ÿå¼‚å¸¸å¹¶æ•è·ã€‚</p>
</li>
<li><p>å‘ç”Ÿå¼‚å¸¸ä¸èƒ½æ•è·ã€‚</p>
<p>å‰ä¸¤ç§æƒ…å†µå¾ˆå®¹æ˜“ç†è§£ï¼Œç¬¬ä¸‰ç§æƒ…å†µçš„æ„æ€å°±æ˜¯é¢„è®¡æ•è·çš„å¼‚å¸¸å’Œå‘ç”Ÿçš„å¼‚å¸¸ä¸ä¸€è‡´ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å’Œæ²¡æœ‰try catchä»£ç å—ä¸€æ ·ï¼Œç¨‹åºä¾ç„¶ä¼šè¢«ä¸­æ–­ã€‚æ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­ï¼ŒæŠŠcatché‡Œçš„å‚æ•°æ”¹ä¸ºNullPointerExceptionç±»å‹ï¼Œç¨‹åºå‘ç”Ÿå¼‚å¸¸æ—¶å°±æ— æ³•è¢«æ•è·ï¼Œæ‰€ä»¥å»ºè®®ç›´æ¥åœ¨å‚æ•°é‡Œå†™çˆ¶ç±»Exceptionã€‚</p>
</li>
</ol>
<h2 id="try-catch-finallyè¯­å¥å—"><a href="#try-catch-finallyè¯­å¥å—" class="headerlink" title="try catch finallyè¯­å¥å—"></a>try catch finallyè¯­å¥å—</h2><p>ä¿®æ”¹Demo2ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºtry...catch...finallyè¯­å¥çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * try&#123;...å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125;</span></span><br><span class="line"><span class="comment"> * catch&#123;...æ•è·å‘ç”Ÿçš„å¼‚å¸¸å¹¶å¤„ç†&#125;</span></span><br><span class="line"><span class="comment"> * finally&#123;...æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">			result=num1/num2;</span><br><span class="line">			<span class="comment">//é€€å‡ºè™šæ‹Ÿæœºï¼Œå…³é—­ç¨‹åºï¼Œä»¥ä¸‹ä»£ç å‡ä¸æ‰§è¡Œ</span></span><br><span class="line">			<span class="comment">//System.exit(0);</span></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">//æ‰“å°å †æ ˆä¿¡æ¯ï¼Œä½ ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰è¿™è¡Œä»£ç æ„Ÿå—ä¸€ä¸‹</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			in.close();</span><br><span class="line">			System.out.println(<span class="string">&quot;é‡Šæ”¾èµ„æºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¤šé‡catch"><a href="#å¤šé‡catch" class="headerlink" title="å¤šé‡catch"></a>å¤šé‡catch</h2><p>å¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œä¸è¿‡å¤šè§£é‡Šäº†ï¼Œä¿®æ”¹ä¸Šè¿°ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå¤šé‡catchçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * try&#123;</span></span><br><span class="line"><span class="comment"> * &#125;catch&#123;</span></span><br><span class="line"><span class="comment"> * &#125;catch&#123;</span></span><br><span class="line"><span class="comment"> * &#125;catch&#123;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">			result=num1/num2;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InputMismatchException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;è¾“å…¥ä¸åŒ¹é…å¼‚å¸¸&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;ç®—æ•°å¼‚å¸¸&quot;</span>);</span><br><span class="line">		&#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;æœªçŸ¥å¼‚å¸¸&quot;</span>);</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			in.close();</span><br><span class="line">			System.out.println(<span class="string">&quot;é‡Šæ”¾èµ„æºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">		&#125;		</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>å‘ç”Ÿå¼‚å¸¸æ—¶ä»ä¸Šåˆ°ä¸‹æŒ‰é¡ºåºé€ä¸ªåŒ¹é…ã€‚</li>
<li>å­ç±»å¼‚å¸¸åœ¨å‰ï¼Œçˆ¶ç±»å¼‚å¸¸åœ¨åã€‚å› ä¸ºæŒ‰ç…§åŒ¹é…é¡ºåºï¼Œå¦‚æœçˆ¶ç±»åœ¨å‰ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å¼‚å¸¸éƒ½åŒ¹é…çˆ¶ç±»è€Œåé¢çš„å­ç±»å¼‚å¸¸å°†æ°¸è¿œä¸ä¼šæ‰§è¡Œã€‚</li>
<li>åªæ‰§è¡Œç¬¬ä¸€ä¸ªä¸å¼‚å¸¸åŒ¹é…çš„catchè¯­å¥ï¼ŒåŒ¹é…æˆåŠŸååé¢çš„catchè¯­å¥å°†ä¸å†æ‰§è¡Œã€‚</li>
<li>finallyæ ¹æ®éœ€è¦å¯å†™å¯ä¸å†™ã€‚</li>
</ol>
<h2 id="try-finallyè¯­å¥å—"><a href="#try-finallyè¯­å¥å—" class="headerlink" title="try finallyè¯­å¥å—"></a>try finallyè¯­å¥å—</h2><ul>
<li>tryâ€¦finallyä¸èƒ½æ•è·å¼‚å¸¸ï¼Œä»…ä»…ç”¨æ¥å½“å‘ç”Ÿå¼‚å¸¸æ—¶ç”¨æ¥é‡Šæ”¾èµ„æºã€‚</li>
<li>ä¸€èˆ¬ç”¨åœ¨åº•å±‚ä»£ç ï¼Œåªé‡Šæ”¾èµ„æºè€Œä¸åšå¼‚å¸¸å¤„ç†ï¼ŒæŠŠå¼‚å¸¸å‘ä¸ŠæŠ›å‡ºï¼ˆå¼‚å¸¸çš„ä¼ é€’ï¼‰ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºtry finallyçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * try&#123;</span></span><br><span class="line"><span class="comment"> * &#125;finally&#123;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			divide();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;			</span><br><span class="line">			System.out.println(<span class="string">&quot;å‡ºç°å¼‚å¸¸&quot;</span>+e.getMessage());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">			System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">			<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">			result=num1/num2;</span><br><span class="line">		&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">			in.close();</span><br><span class="line">			System.out.println(<span class="string">&quot;é‡Šæ”¾èµ„æºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);			</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç¨‹åºå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œæ¯”å¦‚é™¤æ•°æ˜¯0ï¼Œè¿™æ—¶å€™divideæ–¹æ³•å‘ç”Ÿå¼‚å¸¸æ— æ³•æ•è·è€Œå‘ä¸Šä¼ é€’ç»™mainæ–¹æ³•ï¼Œç”±mainæ–¹æ³•æ•è·å¼‚å¸¸å¹¶æ‰“å°å¼‚å¸¸ã€‚ä½†æ­¤æ—¶ä¸ä¼šè¾“å‡ºç»“æœå’Œâ€œæ‰§è¡Œå®Œæ¯•â€ï¼Œå› ä¸ºå‘ç”Ÿå¼‚å¸¸æ—¶å‘ä¸Šä¼ é€’ç»™mainæ–¹æ³•è¿›è¡Œå¤„ç†äº†ï¼Œåœ¨mainæ–¹æ³•é‡Œå¤„ç†å®Œç¨‹åºä¾¿æ‰§è¡Œå®Œæ¯•äº†ã€‚</p>
<h2 id="throwså£°æ˜å¼‚å¸¸"><a href="#throwså£°æ˜å¼‚å¸¸" class="headerlink" title="throwså£°æ˜å¼‚å¸¸"></a>throwså£°æ˜å¼‚å¸¸</h2><p>å‡å¦‚åœ¨ä¸€ä¸ªæ–¹æ³•ä½“ä¸­æœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸è€Œæ²¡æœ‰å¤„ç†ï¼Œå°†å¼‚å¸¸æŠ›å‡ºï¼Œé‚£è°ƒç”¨è€…å¦‚ä½•çŸ¥é“æ‰€è°ƒç”¨çš„æ–¹æ³•ä½“æœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸å‘¢ï¼Ÿè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°throwså…³é”®å­—æ¥å£°æ˜å¼‚å¸¸ã€‚åº•å±‚ä»£ç å‘ä¸Šå£°æ˜æˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼Œæœ€ä¸Šå±‚ä¸€å®šè¦å¤„ç†å¼‚å¸¸ï¼Œå¦åˆ™ç¨‹åºä¸­æ–­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * throwsï¼šå£°æ˜å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			divide();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;			</span><br><span class="line">			System.out.println(<span class="string">&quot;å‘ç”Ÿå¼‚å¸¸ï¼š&quot;</span>+e.getMessage());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//å£°æ˜å¼‚å¸¸ï¼Œå¤šä¸ªå¼‚å¸¸ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼Œå½“ç„¶æˆ‘è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªçˆ¶ç±»å¼‚å¸¸ã€‚</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">		<span class="type">int</span> num1=in.nextInt();</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š&quot;</span>);</span><br><span class="line">		<span class="type">int</span> num2=in.nextInt();</span><br><span class="line">		result=num1/num2;</span><br><span class="line">		in.close();</span><br><span class="line">		System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œdivideæ–¹æ³•çŸ¥é“è‡ªå·±æœ‰å¯èƒ½å‡ºç°å¼‚å¸¸ä½†å¹¶ä¸æƒ³å¤„ç†ï¼Œä¾¿ç”¨throwså£°æ˜å¼‚å¸¸ï¼Œå‘Šè¯‰å…¶è°ƒç”¨è€…mainæ–¹æ³•è‡ªå·±æœ‰å¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œmainæ–¹æ³•åœ¨è°ƒç”¨æ—¶å¾—çŸ¥äº†divideçš„å£°æ˜ï¼Œå°±æ˜ç™½éœ€è¦å¤„ç†å¼‚å¸¸äº†ï¼Œä½†mainä¹Ÿä¸æƒ³å¤„ç†å¼‚å¸¸çš„è¯ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨throwså…³é”®å­—æŠ›å‡ºï¼Œè¿™æ—¶å€™å°±äº¤ç»™äº†JVMæ¥å¤„ç†ï¼ˆæ‰“å°å †æ ˆä¿¡æ¯å’Œç»ˆæ­¢ç¨‹åºï¼‰ã€‚åœ¨è¿™ä¸ªDemoä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æ–¹æ³•æœ‰å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™ä¹ˆå†™å¯ä»¥å—ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> <span class="keyword">throws</span> ArithmeticException,InputMismatchException&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¹ˆå†™å½“ç„¶å¯ä»¥ï¼Œä¸è¿‡è¿™ä¸¤ä¸ªå¼‚å¸¸æ˜¯RuntimeExceptionçš„å­ç±»ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ï¼Œé‚£ä¹ˆè°ƒç”¨å®ƒçš„mainæ–¹æ³•å°±å¯å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ï¼ŒIDEå¹¶ä¸ä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥é”™ã€‚</p>
<h2 id="throwæŠ›å‡ºå¼‚å¸¸"><a href="#throwæŠ›å‡ºå¼‚å¸¸" class="headerlink" title="throwæŠ›å‡ºå¼‚å¸¸"></a>throwæŠ›å‡ºå¼‚å¸¸</h2><ul>
<li>é™¤äº†ç³»ç»Ÿè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸å¤–ï¼ˆä¾‹å¦‚ä¸Šæ–‡demoä¸­ï¼Œä»£ç ä¸­å¦‚æœä¸å¤„ç†å¼‚å¸¸ï¼Œå½“ç¨‹åºå‘ç°divideå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¼šé€çº§å‘ä¸ŠæŠ›ç»™JVMå¤„ç†ï¼‰ï¼Œæœ‰äº›é—®é¢˜ï¼ˆä¸ä¸€å®šæ˜¯ä»£ç é—®é¢˜ï¼‰éœ€è¦ç¨‹åºå‘˜è‡ªè¡ŒæŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stuent</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String sex;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> sex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (sex.equals(<span class="string">&quot;ç”·&quot;</span>)||sex.equals(<span class="string">&quot;å¥³&quot;</span>)) &#123;</span><br><span class="line">			<span class="built_in">this</span>.sex = sex;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">//æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ€§åˆ«ä¸ç¬¦åˆè¦æ±‚&quot;</span>);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (age&gt;<span class="number">0</span>&amp;&amp;age&lt;<span class="number">120</span>) &#123;</span><br><span class="line">			<span class="built_in">this</span>.age = age;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">//æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;å¹´é¾„ä¸ç¬¦åˆè¦æ±‚&quot;</span>);</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºthrowçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testStu</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">Stuent</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Stuent</span>();</span><br><span class="line">		s1.setAge(<span class="number">21</span>);</span><br><span class="line">        <span class="comment">//ä¸ç¬¦åˆè¦æ±‚</span></span><br><span class="line">		s1.setSex(<span class="string">&quot;ç¥&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€§åˆ«å±æ€§çš„è®¾ç½®ä¸ç¬¦åˆStudentç±»çš„è¦æ±‚ï¼Œè¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºä¸€ä¸ªRuntimeExceptionå¼‚å¸¸ï¼Œå‘Šè¯‰ä½ æ€§åˆ«ä¸ç¬¦åˆè¦æ±‚ã€‚å¦‚æœåœ¨Studentä¸­throwäº†ä¸€ä¸ªæ£€æŸ¥æ—¶å¼‚å¸¸ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°IDEæŠ¥é”™ï¼Œé€šçŸ¥ä½ æŠ›å‡ºçš„å¼‚å¸¸éœ€è¦ä½ æ¥å¤„ç†ï¼Œä½ å¯ä»¥throwså£°æ˜ä¸€ä¸‹å‘ä¸ŠæŠ›å‡ºï¼Œä¹Ÿå¯ä»¥try catchè¿›è¡Œæ•è·ã€‚</p>
<hr>
<h1 id="è‡ªå®šä¹‰å¼‚å¸¸"><a href="#è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸"></a>è‡ªå®šä¹‰å¼‚å¸¸</h1><ul>
<li>éœ€ç»§æ‰¿è‡ªExceptionæˆ–Exceptionçš„å­ç±»ï¼Œå¸¸ç”¨RuntimeExceptionã€‚</li>
<li>å¿…è¦æä¾›çš„æ„é€ æ–¹æ³•ï¼š<ul>
<li>æ— å‚æ„é€ æ–¹æ³•</li>
<li>String messageå‚æ•°çš„æ„é€ æ–¹æ³•</li>
</ul>
</li>
</ul>
<p>å…¶å®Javaæœ¬èº«å·²ç»æä¾›äº†éå¸¸å¤šçš„å¼‚å¸¸ç±»ï¼Œä½†æœ‰äº›æ—¶å€™ä»£ç æ‰€æ˜ å°„åˆ°å®é™…ç”Ÿæ´»ä¸­çš„å¼‚å¸¸å¹¶ä¸èƒ½åæ˜ åœ¨javaçš„å¼‚å¸¸ç±»ä¸­ã€‚æ¯”å¦‚ä¸Šæ–‡Studentç±»ä¸­å¹´é¾„ä¸ç¬¦åˆè¦æ±‚æŠ›å‡ºçš„æ˜¯ä¸€ä¸ªRuntimeExceptionï¼Œè™½ç„¶æœ‰é™„å¸¦çš„ä¿¡æ¯ï¼Œä½†æˆ‘ä»¬ä»ç±»åä¸­å¹¶ä¸èƒ½å‡†ç¡®åœ°çŸ¥é“æ‰€å‘ç”Ÿçš„çš„å¼‚å¸¸åŸå› ï¼Œè¿™æ—¶å€™ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸å¯ä»¥å¾ˆå¥½åœ°è§£å†³é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å¼‚å¸¸ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgeException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">AgeException</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">AgeException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(message);</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥å¼‚å¸¸ç±»ä¸­ä¸éœ€è¦æ·»åŠ ä»»ä½•ä»£ç ï¼Œå®ƒçš„æ„ä¹‰ä¸»è¦æ˜¯ä½¿å¼‚å¸¸ä¸å…¶åå­—ç›¸ç¬¦ã€‚</p>
<p>ç„¶ååœ¨Studentç±»ä¸­ä¿®æ”¹æŠ›å‡ºçš„å¼‚å¸¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (age&gt;<span class="number">0</span>&amp;&amp;age&lt;<span class="number">120</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AgeException</span>(<span class="string">&quot;å¹´é¾„ä¸ç¬¦åˆè¦æ±‚&quot;</span>);</span><br><span class="line">    &#125;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿è¡Œæµ‹è¯•ç±»ï¼Œæ•…æ„å†™ä¸ª200ï¼Œè¿è¡Œåä½ å°±ä¼šå‘ç°å‡ºç°çš„å¼‚å¸¸å°±æ˜¯AgeExceptionã€‚</p>
<p>å¼‚å¸¸ç±»ç±»åé€šå¸¸ä»¥Exceptionç»“å°¾ï¼Œè™½ç„¶ä¸æ˜¯å¿…é¡»çš„ä½†å®ƒæ˜¯ä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯ã€‚</p>
<hr>
<h1 id="æ–¹æ³•è¦†ç›–ï¼ˆé‡å†™ï¼‰çš„è¡¥å……"><a href="#æ–¹æ³•è¦†ç›–ï¼ˆé‡å†™ï¼‰çš„è¡¥å……" class="headerlink" title="æ–¹æ³•è¦†ç›–ï¼ˆé‡å†™ï¼‰çš„è¡¥å……"></a>æ–¹æ³•è¦†ç›–ï¼ˆé‡å†™ï¼‰çš„è¡¥å……</h1><ul>
<li>å¸¦æœ‰å¼‚å¸¸å£°æ˜çš„æ–¹æ³•è¦†ç›–ï¼š<ul>
<li>æ–¹æ³•åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼ç±»å‹å¿…é¡»å’Œçˆ¶ç±»ç›¸åŒã€‚</li>
<li>å­ç±»çš„è®¿é—®ä¿®é¥°ç¬¦ä¸çˆ¶ç±»ç›¸åŒæˆ–æ˜¯æ›´å®½ã€‚</li>
<li>å­ç±»ä¸­çš„æ–¹æ³•ï¼Œä¸èƒ½æŠ›å‡ºæ¯”çˆ¶ç±»æ›´å¤šã€æ›´å®½çš„æ£€æŸ¥æ—¶å¼‚å¸¸</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">	<span class="comment">//å£°æ˜å¼‚å¸¸</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> RuntimeException&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;çˆ¶ç±»æ–¹æ³•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="comment">//åªèƒ½å£°æ˜ç›¸åŒå¼‚å¸¸æˆ–å…¶å­ç±»</span></span><br><span class="line">	<span class="comment">//æˆ–è€…ä¸å£°æ˜</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> ArithmeticException&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å­ç±»æ–¹æ³•&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAå¸¸ç”¨ç±»æ€»ç»“</title>
    <url>/2021/04/22/JAVA%E5%B8%B8%E7%94%A8%E7%B1%BB%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h1><ul>
<li><p><strong>å†…éƒ¨ç±»çš„æ¦‚å¿µ</strong></p>
<p>åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨å†å®šä¹‰ä¸€ä¸ªå®Œæ•´çš„ç±»ï¼Œä¸€èˆ¬å†…javaç±»å’Œå¤–éƒ¨ç±»éƒ½ä¼šæœ‰ä¾èµ–ï¼ˆå±‚æ¬¡ï¼‰å…³ç³»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¤–éƒ¨ç±» èº«ä½“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Body</span>&#123;</span><br><span class="line">    <span class="comment">//å†…éƒ¨ç±» å¤´</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Head</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>å†…éƒ¨ç±»çš„ç‰¹ç‚¹</strong></p>
<ul>
<li><p><strong>ç¼–è¯‘ä¹‹åå¯ç”Ÿæˆç‹¬ç«‹çš„å­—èŠ‚ç æ–‡ä»¶</strong>ã€‚</p>
<p>ä¸Šè¿°ä»£ç åœ¨ç¼–è¯‘ä¹‹åï¼Œé™¤äº†ç”Ÿæˆä¸€ä¸ª<code>Body.class</code>æ–‡ä»¶ï¼Œè¿˜ä¼šç”Ÿæˆä¸€ä¸ªå†…éƒ¨ç±»æ–‡ä»¶<code>Body$Head.class</code>ã€‚</p>
</li>
<li><p><strong>å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„ç§æœ‰æˆå‘˜</strong>ï¼Œ<strong>è€Œä¸ç ´å¤–å°è£…æ€§</strong>ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Body</span>&#123;   </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> headNum=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Head</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">//ç›´æ¥è®¿é—®ï¼Œæ²¡æœ‰é—®é¢˜</span></span><br><span class="line">			System.out.println(headNum);</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><ul>
<li><p><strong>å¯ä¸ºå¤–éƒ¨ç±»æä¾›å¿…è¦çš„å†…éƒ¨åŠŸèƒ½ç»„ä»¶</strong>ã€‚</p>
<p>æ¯”å¦‚Headä½œä¸ºBodyçš„â€œç»„ä»¶â€ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>å†…éƒ¨ç±»çš„åˆ†ç±»</strong></p>
<ol>
<li>æˆå‘˜å†…éƒ¨ç±»</li>
<li>é™æ€å†…éƒ¨ç±»</li>
<li>å±€éƒ¨å†…éƒ¨ç±»</li>
<li>åŒ¿åå†…éƒ¨ç±»</li>
</ol>
</li>
</ul>
<h2 id="æˆå‘˜å†…éƒ¨ç±»"><a href="#æˆå‘˜å†…éƒ¨ç±»" class="headerlink" title="æˆå‘˜å†…éƒ¨ç±»"></a>æˆå‘˜å†…éƒ¨ç±»</h2><ul>
<li><strong>åœ¨ç±»çš„å†…éƒ¨å®šä¹‰çš„</strong>ï¼Œ<strong>ä¸å®ä¾‹å˜é‡</strong>ã€<strong>å®ä¾‹æ–¹æ³•åŒçº§åˆ«çš„ç±»</strong>ã€‚</li>
<li><strong>ä½œä¸ºå¤–éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹éƒ¨åˆ†</strong>ï¼Œ<strong>åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡æ—¶</strong>ï¼Œ<strong>å¿…é¡»ä¾èµ–å¤–éƒ¨ç±»å¯¹è±¡</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">	<span class="comment">//å®ä¾‹å˜é‡</span></span><br><span class="line">	<span class="keyword">private</span> String name=<span class="string">&quot;tang&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age=<span class="number">21</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">		<span class="keyword">private</span> String phone=<span class="string">&quot;110&quot;</span>;</span><br><span class="line">		<span class="keyword">private</span> String address=<span class="string">&quot;å››å·&quot;</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="comment">//è®¿é—®å¤–éƒ¨ç±»</span></span><br><span class="line">			System.out.println(name);</span><br><span class="line">			System.out.println(age);</span><br><span class="line">			<span class="comment">//è®¿é—®å†…éƒ¨ç±»</span></span><br><span class="line">			System.out.println(phone);</span><br><span class="line">			System.out.println(address);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testOuter</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//1.åˆ›å»ºå¤–éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">		Outer outer=<span class="keyword">new</span> <span class="title class_">Outer</span>();</span><br><span class="line">		<span class="comment">//2.åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">		Inner inner=outer.<span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä¸€æ­¥åˆ°ä½</span></span><br><span class="line">		Inner inner2=<span class="keyword">new</span> <span class="title class_">Outer</span>().<span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">        </span><br><span class="line">		inner.show();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å½“å¤–éƒ¨ç±»</strong>ã€<strong>å†…éƒ¨ç±»å­˜åœ¨åŒåå±æ€§æ—¶</strong>ï¼Œ<strong>ä¼šä¼˜å…ˆè®¿é—®å†…éƒ¨ç±»å±æ€§</strong>ã€‚</p>
<p>åœ¨Innerç±»ä¸­æ–°å¢å±æ€§<code>private int age=18;</code></p>
<p>å†æ¬¡è¿è¡ŒtestOuterç±»ï¼Œæ§åˆ¶å°æ‰“å°çš„ageå±æ€§ä¸º18è€Œä¸æ˜¯21ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•åœ¨Innerå†…éƒ¨ç±»ä¸­è®¿é—®å¤–éƒ¨ç±»çš„åŒåå±æ€§å‘¢ï¼Ÿå¾ˆç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™è¡¨ç¤ºè®¿é—®Outerç±»çš„å½“å‰å¯¹è±¡çš„age</span></span><br><span class="line">System.out.println(Outer.<span class="built_in">this</span>.age);<span class="comment">//21</span></span><br><span class="line"><span class="comment">//è¿™è¡¨ç¤ºè®¿é—®å½“å‰ç±»å¯¹è±¡çš„age</span></span><br><span class="line">System.out.println(<span class="built_in">this</span>.age);<span class="comment">//18</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>ç¬¬äºŒå¥è¯ä¸­ä¸åŠ thisä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯åŠ äº†ä¼šæ›´æ¸…æ¥šè®¿é—®çš„æ˜¯å“ªä¸ªç±»ä¸­çš„å±æ€§ã€‚</p>
</li>
<li><p><strong>æˆå‘˜å†…éƒ¨ç±»ä¸èƒ½å®šä¹‰é™æ€æˆå‘˜</strong>ã€‚</p>
<p>ä¾‹å¤–å°±æ˜¯å¯ä»¥åŒ…å«finalä¿®é¥°çš„é™æ€å¸¸é‡ã€‚</p>
</li>
</ul>
<h2 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h2><ul>
<li><strong>åœ¨æˆå‘˜å†…éƒ¨ç±»çš„åŸºç¡€ä¹‹ä¸Šæ·»åŠ ä¸€ä¸ªstaticå…³é”®å­—</strong>ï¼Œ<strong>å°±å˜æˆäº†é™æ€å†…éƒ¨ç±»</strong>ã€‚</li>
<li><strong>ä¸ä¾èµ–å¤–éƒ¨å¯¹è±¡</strong>ï¼Œ<strong>å¯ç›´æ¥åˆ›å»ºæˆ–é€šè¿‡ç±»åè®¿é—®</strong>ï¼Œ<strong>å¯å£°æ˜é™æ€æˆå‘˜</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *æ¼”ç¤ºé™æ€å†…éƒ¨ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name=<span class="string">&quot;tang&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age=<span class="number">21</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//é™æ€å†…éƒ¨ç±»ï¼Œç›¸å½“äºä¸€ä¸ªå¤–éƒ¨ç±»</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">		<span class="keyword">private</span> String phone=<span class="string">&quot;110&quot;</span>;</span><br><span class="line">		<span class="keyword">private</span> String address=<span class="string">&quot;å››å·&quot;</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">			<span class="comment">//è®¿é—®å¤–éƒ¨ç±»çš„å±æ€§ï¼Œéœ€è¦åˆ›å»ºå¤–éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">			Outer outer=<span class="keyword">new</span> <span class="title class_">Outer</span>();</span><br><span class="line">			System.out.println(outer.name);</span><br><span class="line">			System.out.println(outer.age);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//è°ƒç”¨é™æ€å†…éƒ¨ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨</span></span><br><span class="line">			System.out.println(phone);</span><br><span class="line">			System.out.println(address);		</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testOuter</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//é™æ€å†…éƒ¨ç±»ç›´æ¥åˆ›å»º</span></span><br><span class="line">		<span class="comment">//å¤–éƒ¨ç±».å†…éƒ¨ç±» ä»…è¡¨ç¤ºä¸€ç§åŒ…å«å…³ç³»</span></span><br><span class="line">		Outer.Inner inner=<span class="keyword">new</span> <span class="title class_">Outer</span>.Inner();</span><br><span class="line">		inner.show();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨ï¼š</strong>åªæœ‰å†…éƒ¨ç±»æ‰å¯ä»¥ç”¨staticä¿®é¥°ï¼Œæ™®é€šçš„ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰ä¸å¯ä»¥ã€‚</p>
<h2 id="å±€éƒ¨å†…éƒ¨ç±»"><a href="#å±€éƒ¨å†…éƒ¨ç±»" class="headerlink" title="å±€éƒ¨å†…éƒ¨ç±»"></a>å±€éƒ¨å†…éƒ¨ç±»</h2><ul>
<li><strong>ç±»ä¼¼å±€éƒ¨å˜é‡</strong>ï¼Œ<strong>å®šä¹‰åœ¨å¤–éƒ¨ç±»æ–¹æ³•ä¸­</strong>ï¼›<strong>ä½œç”¨èŒƒå›´å’Œåˆ›å»ºå¯¹è±¡èŒƒå›´ä»…é™äºå½“å‰æ–¹æ³•</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºå±€éƒ¨å†…éƒ¨ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name=<span class="string">&quot;tang&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age=<span class="number">21</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">//å®šä¹‰å±€éƒ¨å˜é‡</span></span><br><span class="line">		String address=<span class="string">&quot;å››å·&quot;</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å±€éƒ¨å†…éƒ¨ç±»,ä¸èƒ½åŠ ä»»ä½•è®¿é—®ä¿®é¥°ç¬¦</span></span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">			<span class="keyword">private</span> String phone=<span class="string">&quot;110&quot;</span>;</span><br><span class="line">			<span class="keyword">private</span> String email=<span class="string">&quot;99@qq.com&quot;</span>;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">innerShow</span><span class="params">()</span> &#123;</span><br><span class="line">				<span class="comment">//ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„å±æ€§</span></span><br><span class="line">				System.out.println(name);</span><br><span class="line">				<span class="comment">//å…¶å®ä¸Šä¸€å¥çœç•¥äº†å‰ç¼€ï¼Œå»ºè®®ä»¥åä½¿ç”¨æ—¶åŠ ä¸Šã€‚</span></span><br><span class="line">				System.out.println(Outer.<span class="built_in">this</span>.age);</span><br><span class="line">				</span><br><span class="line">				<span class="comment">//è®¿é—®å†…éƒ¨ç±»å±æ€§</span></span><br><span class="line">				System.out.println(phone);</span><br><span class="line">				<span class="comment">//ä¸Šä¸€å¥çœç•¥äº†this</span></span><br><span class="line">				System.out.println(<span class="built_in">this</span>.email);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testOuter</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºå¤–éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">		Outer outer=<span class="keyword">new</span> <span class="title class_">Outer</span>();</span><br><span class="line">		<span class="comment">//ç›´æ¥ä½¿ç”¨showæ–¹æ³•ï¼Œä¼šæœ‰è¾“å‡ºç»“æœå—ï¼Ÿ</span></span><br><span class="line">		outer.show();	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨testOuterä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¤–éƒ¨ç±»å¯¹è±¡è°ƒç”¨å…¶showæ–¹æ³•ï¼Œä¸ä¼šæœ‰ä»»ä½•ç»“æœï¼Œå› ä¸ºåœ¨showæ–¹æ³•ä¸­ï¼Œåªæ˜¯å®šä¹‰äº†ä¸€ä¸ªå±€éƒ¨å˜é‡å’Œä¸€ä¸ªç±»ï¼Œé™¤æ­¤ä¹‹å¤–æ²¡æœ‰åšä»»ä½•äº‹ã€‚å¦‚æœè¦è°ƒç”¨innerShowæ–¹æ³•ï¼Œæƒ³æƒ³è¯¥æ€ä¹ˆä¿®æ”¹ä»£ç ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">innerShow</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">			&#125;</span><br><span class="line">        <span class="comment">//è¦è°ƒç”¨å±€éƒ¨å†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œå°±è¦åˆ›å»ºå±€éƒ¨å†…éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">        Inner inner=<span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">        inner.innerShow();</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>è¿™æ—¶å€™é‡æ–°è¿è¡Œä»£ç ï¼Œæ§åˆ¶å°å°±æ­£å¸¸æ‰“å°äº†ã€‚</p>
</li>
<li><p><strong>å±€éƒ¨å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»å½“å‰æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡æ—¶</strong>ï¼Œ<strong>å› æ— æ³•ä¿éšœå˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸è‡ªèº«ç›¸åŒ</strong>ï¼Œ<strong>å˜é‡å¿…é¡»ä¿®é¥°ä¸ºfinal</strong>ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œçœ‹ä¸Šæ–‡çš„Outerç±»ä»£ç æ®µï¼Œåœ¨JDK1.7ä¹‹å‰ï¼Œåœ¨å±€éƒ¨å†…éƒ¨ç±»Innerçš„innerShowæ–¹æ³•ä¸­æ·»åŠ ä»£ç ï¼š</p>
<p><code>System.out.println(address);//è®¿é—®å±€éƒ¨å˜é‡</code></p>
<p>è¿™æ˜¯ä¸è¡Œçš„ï¼Œé™¤éaddresså˜é‡è¢«finalä¿®é¥°æˆä¸ºä¸€ä¸ªå¸¸é‡ã€‚å› ä¸ºæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡åœ¨ç¦»å¼€æ–¹æ³•ä½“ä¹‹åå°±ä¼šè¢«ç«‹å³é”€æ¯ï¼Œè€Œåœ¨æ–¹æ³•ä½“ä¸­newçš„å±€éƒ¨å†…éƒ¨ç±»å¯¹è±¡å´ä¸ä¼šç«‹å³æ¶ˆå¤±ï¼ˆå½“ç„¶innerè¿™ä¸ªå˜é‡æ˜¯æ²¡æœ‰äº†ï¼‰ï¼Œè€Œæ˜¯ç•™åœ¨å †ä¸­ç­‰å¾…å›æ”¶ã€‚æƒ³ä¸€æƒ³ï¼Œå±€éƒ¨å†…éƒ¨ç±»å¯¹è±¡è¿˜å­˜åœ¨ï¼Œè€Œä»–æ‰€è®¿é—®çš„å±€éƒ¨å˜é‡è¢«é”€æ¯äº†ï¼Œè¿™æ˜¯ä¸å¯è¡Œçš„ã€‚è€Œå±€éƒ¨å˜é‡è¢«finalä¿®é¥°ä¹‹åå°±å˜æˆäº†ä¸€ä¸ªå¸¸é‡ï¼Œä¸Šæ–‡æ‰€æ·»åŠ çš„ä»£ç å°±ç›¸å½“äºï¼š</p>
<p>``System.out.println(â€œå››å·â€);`</p>
<p>åœ¨JDK1.8ä¸­ï¼Œå±€éƒ¨å˜é‡å³ä½¿æ²¡æœ‰è¢«finalä¿®é¥°ï¼Œåœ¨å±€éƒ¨å†…éƒ¨ç±»ä½¿ç”¨æ—¶IDEä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºåœ¨JDK1.8ä¸­ä¼šè‡ªåŠ¨æ·»åŠ finalä¿®é¥°è¯ã€‚</p>
</li>
</ul>
<h2 id="åŒ¿åå†…éƒ¨ç±»"><a href="#åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»"></a>åŒ¿åå†…éƒ¨ç±»</h2><ul>
<li><p><strong>æ²¡æœ‰ç±»åçš„å±€éƒ¨å†…éƒ¨ç±»</strong>ï¼ˆ<strong>ä¸€åˆ‡ç‰¹å¾éƒ½ä¸å±€éƒ¨å†…éƒ¨ç±»ç›¸åŒ</strong>ï¼‰ã€‚</p>
<p>å®é™…ä¸Šåªæ˜¯æˆ‘ä»¬å®šä¹‰çš„æ—¶å€™æ²¡æœ‰å–åå­—ç½¢äº†ï¼Œç¼–è¯‘å™¨ç¼–è¯‘ä¹‹åä¼šè‡ªåŠ¨å–ä¸€ä¸ªåå­—ã€‚</p>
</li>
<li><p><strong>å¿…é¡»ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»æˆ–è€…å®ç°ä¸€ä¸ªæ¥å£</strong>ã€‚</p>
<p>è¿™ä¸ä»…æ˜¯ä½¿ç”¨çš„è¦æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„ç›®çš„ã€‚</p>
</li>
</ul>
<p>æ¼”ç¤ºä¸€ä¸‹åŒ¿åå†…éƒ¨ç±»çš„ç”¨æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">USB</span> &#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ä¸ªå®ç°æ¥å£çš„ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">implements</span> <span class="title class_">USB</span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;é¼ æ ‡æ­£åœ¨å·¥ä½œã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testUSB</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		USB usb=<span class="keyword">new</span> <span class="title class_">Mouse</span>();</span><br><span class="line">		usb.work();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ–°å»ºä¸€ä¸ªå®ç°ç±»ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸åŒç±»ä¸­å¤šæ¬¡ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœæŸä¸ªå®ç°ç±»åªéœ€è¦ç”¨åˆ°ä¸€æ¬¡ï¼Œä¹‹åå°±ä¸ä¼šå†ç”¨äº†ï¼Œå¦‚æœè¿˜æ˜¯å•ç‹¬å»ºä¸€ä¸ªclassæ¥å®ç°çš„è¯æ˜¯å¦éº»çƒ¦ä¸”å¤šä½™äº†ï¼Ÿè¿™æ—¶å€™å°±å¯ä»¥ç®€åŒ–æˆå±€éƒ¨å†…éƒ¨ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testUSB</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="keyword">class</span> <span class="title class_">Phone</span> <span class="keyword">implements</span> <span class="title class_">USB</span>&#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">&quot;æ‰‹æœºå·²è¿æ¥ã€‚&quot;</span>);			</span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;</span><br><span class="line">		Phone phone=<span class="keyword">new</span> <span class="title class_">Phone</span>();</span><br><span class="line">		phone.work();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå®ç°ç±»åªä½¿ç”¨ä¸€æ¬¡ï¼Œç±»åçœ‹èµ·æ¥ä¹Ÿæ˜¯å¤šä½™çš„ï¼Œé‚£ä¹ˆå†ç²¾ç®€ä¼˜åŒ–ä¸€ä¸‹å°±å˜æˆäº†<strong>åŒ¿åå†…éƒ¨ç±»</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testUSB</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åœ¨newçš„æ¥å£ä¸­å®ç°æ–¹æ³•ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•æˆ–è€…ä¸€ä¸ªçˆ¶ç±»</span></span><br><span class="line">		USB phone=<span class="keyword">new</span> <span class="title class_">USB</span>() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;</span><br><span class="line">				System.out.println(<span class="string">&quot;æ‰‹æœºå·²è¿æ¥ã€‚&quot;</span>);		</span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;;</span><br><span class="line">		phone.work();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>å®ƒæ˜¯å®šä¹‰ç±»</strong>ã€<strong>å®ç°ç±»</strong>ã€<strong>åˆ›å»ºå¯¹è±¡çš„è¯­æ³•åˆå¹¶</strong>ï¼Œ<strong>åªèƒ½åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡</strong>ã€‚</p>
</li>
<li><p><strong>ä¼˜ç‚¹æ˜¯å‡å°‘ä»£ç é‡</strong>ï¼Œ<strong>ç¼ºç‚¹æ˜¯å¯è¯»æ€§å·®</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æœ¬åœ°ç”Ÿæˆçš„classæ–‡ä»¶ï¼Œå‘ç°ä¼šä¸€ä¸ª<code>testUSB$1.class</code>æ–‡ä»¶ï¼Œè¿™ä¸ª1å°±å¯ä»¥ç†è§£æ˜¯åŒ¿åå†…éƒ¨ç±»çš„åå­—ã€‚</p>
</li>
</ul>
<hr>
<h1 id="Objectç±»"><a href="#Objectç±»" class="headerlink" title="Objectç±»"></a>Objectç±»</h1><ul>
<li><p><strong>è¶…ç±»</strong>ã€<strong>åŸºç±»</strong>ï¼Œ<strong>æ‰€æœ‰ç±»çš„ç›´æ¥æˆ–é—´æ¥çˆ¶ç±»</strong>ï¼Œ<strong>ä½äºç»§æ‰¿æ ‘çš„æœ€é¡¶å±‚</strong>ã€‚</p>
</li>
<li><p><strong>ä»»ä½•ç±»</strong>ï¼Œ<strong>å¦‚æœæ²¡å†™extendså…³é”®å­—ç»§æ‰¿æŸä¸ªç±»</strong>ï¼Œ<strong>é‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯ç›´æ¥ç»§æ‰¿Objectç±»</strong>ã€‚</p>
</li>
<li><p><strong>Objectç±»ä¸­æ‰€å®šä¹‰çš„æ–¹æ³•</strong>ï¼Œ<strong>æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½å…·å¤‡çš„æ–¹æ³•</strong>ã€‚</p>
</li>
<li><p>Objectç±»å‹å¯ä»¥å­˜å‚¨ä»»ä½•å¯¹è±¡</p>
<p>ã€‚</p>
<ul>
<li>ä½œä¸ºå‚æ•°ï¼Œå¯æ¥å—ä»»ä½•å¯¹è±¡ã€‚</li>
<li>ä½œä¸ºè¿”å›å€¼ï¼Œå¯è¿”å›ä»»ä½•å¯¹è±¡ã€‚</li>
</ul>
</li>
</ul>
<h2 id="getClass-æ–¹æ³•"><a href="#getClass-æ–¹æ³•" class="headerlink" title="getClass()æ–¹æ³•"></a>getClass()æ–¹æ³•</h2><ul>
<li><code>public final Class&lt;?&gt; getClass()&#123;&#125;</code></li>
<li><strong>è¿”å›å¼•ç”¨ä¸­å­˜å‚¨çš„å®é™…å¯¹è±¡ç±»å‹</strong>ã€‚</li>
<li><strong>åº”ç”¨</strong>ï¼š<strong>é€šå¸¸ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå¼•ç”¨ä¸­å®é™…å­˜å‚¨å¯¹è±¡ç±»å‹æ˜¯å¦ä¸€è‡´</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *æ¼”ç¤ºgetClassæ–¹æ³•çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		String s1=<span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">		String s2=<span class="string">&quot;bbb&quot;</span>;</span><br><span class="line">		Class class1=s1.getClass();</span><br><span class="line">		Class class2=s2.getClass();</span><br><span class="line">		<span class="keyword">if</span>(class1==class2) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;å±äºåŒä¸€ç±»&quot;</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;ä¸å±äºåŒä¸€ç±»&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="hashCode-æ–¹æ³•"><a href="#hashCode-æ–¹æ³•" class="headerlink" title="hashCode()æ–¹æ³•"></a>hashCode()æ–¹æ³•</h2><ul>
<li><p><code>pubilc int hashCode()&#123;&#125;</code></p>
</li>
<li><p><strong>è¿”å›è¯¥å¯¹è±¡çš„å“ˆå¸Œç å€¼</strong>ã€‚</p>
</li>
<li><p><strong>å“ˆå¸Œå€¼æ ¹æ®å¯¹è±¡çš„åœ°å€æˆ–å­—ç¬¦ä¸²æˆ–æ•°å­—ä½¿ç”¨hashç®—æ³•è®¡ç®—å‡ºæ¥çš„intç±»å‹çš„æ•°å€¼</strong>ã€‚</p>
</li>
<li><p><strong>ä¸€èˆ¬æƒ…å†µä¸‹ç›¸åŒå¯¹è±¡è¿”å›ç›¸åŒå“ˆå¸Œç </strong>ã€‚</p>
<p>åœ¨æˆ‘çš„å¦ä¸€ç¯‡æœ‰å…³é›†åˆçš„åšå®¢é‡Œå°±é‡å†™è¿‡è¿™ä¸ªæ–¹æ³•ä½¿ä¸åŒçš„å¯¹è±¡è¿”å›ç›¸åŒçš„å“ˆå¸Œç å€¼ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		String s1=<span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">		String s2=<span class="string">&quot;bbb&quot;</span>;</span><br><span class="line">		String s3=<span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">		System.out.println(s1.hashCode());<span class="comment">//96321</span></span><br><span class="line">		System.out.println(s2.hashCode());<span class="comment">//97314</span></span><br><span class="line">		<span class="comment">//ç›¸åŒå­—ç¬¦ä¸²ç”Ÿæˆçš„å“ˆå¸Œå€¼ç›¸åŒ</span></span><br><span class="line">		System.out.println(s3.hashCode());<span class="comment">//96321</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="toString-æ–¹æ³•"><a href="#toString-æ–¹æ³•" class="headerlink" title="toString()æ–¹æ³•"></a>toString()æ–¹æ³•</h2><ul>
<li><p><code>public String toString()&#123;&#125;</code></p>
</li>
<li><p><strong>è¿”å›è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º</strong>ï¼ˆ<strong>è¡¨ç°å½¢å¼</strong>ï¼‰ã€‚</p>
<p>é»˜è®¤è¿”å›çš„æ˜¯ç±»åå’Œä¸€ä¸ªåå…­è¿›åˆ¶è¡¨ç¤ºçš„å“ˆå¸Œå€¼ï¼Œä¹Ÿå°±æ˜¯<code>getClass().getName() + &#39;@&#39; + Integer.toHexString(hashCode())</code>ã€‚</p>
</li>
<li><p><strong>å¯ä»¥æ ¹æ®ç¨‹åºéœ€æ±‚è¦†ç›–è¯¥æ–¹æ³•</strong>ï¼Œ<strong>å¦‚å±•ç¤ºå¯¹è±¡çš„å„ä¸ªå±æ€§å€¼</strong>ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;tang&quot;</span>, <span class="number">21</span>);</span><br><span class="line">        <span class="comment">//è¾“å‡º åŒ…å.Student@15db9742</span></span><br><span class="line">		System.out.println(s1.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹å¼æ—¶ä¸ä¼šç›´æ¥è°ƒç”¨Objectçš„çˆ¶ç±»æ–¹æ³•ï¼Œè€Œæ˜¯é‡å†™æˆè‡ªå·±æœŸæœ›çš„è¾“å‡ºï¼Œä¾‹å¦‚é€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•å¾—çŸ¥å½“å‰å¯¹è±¡çš„å±æ€§å€¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Studentç±»ä¸­é‡å†™æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™å†è¿è¡Œç¨‹åºå°±æ˜¯æˆ‘ä»¬æƒ³çœ‹åˆ°çš„ç»“æœäº†ã€‚</p>
<h2 id="equals-æ–¹æ³•"><a href="#equals-æ–¹æ³•" class="headerlink" title="equals()æ–¹æ³•"></a>equals()æ–¹æ³•</h2><ul>
<li><code>public boolean equals(Object obj)&#123;&#125;</code></li>
<li><strong>é»˜è®¤å®ç°ä¸ºï¼ˆthis==objï¼‰</strong>ï¼Œ<strong>æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡åœ°å€æ˜¯å¦ç›¸åŒ</strong>ã€‚</li>
<li><strong>å¯è¿›è¡Œè¦†ç›–</strong>ï¼Œ<strong>æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒ</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *æ¼”ç¤ºequalsçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;tang&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		Student s2=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;tang&quot;</span>,<span class="number">21</span>);        </span><br><span class="line">		System.out.println(s1.equals(s2));<span class="comment">//false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºä¸¤ä¸ªå¯¹è±¡çš„åœ°å€ä¸åŒæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡å±æ€§ç›¸åŒä¾¿è®¤ä¸ºä»–ä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é‡å†™equalsä»£ç ï¼Œé‡å†™ä¸€èˆ¬ä¼šæœ‰å›ºå®šçš„æ­¥éª¤ï¼š</p>
<ol>
<li>æ¯”è¾ƒä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>åˆ¤æ–­objæ˜¯å¦ä¸ºnullã€‚</li>
<li>åˆ¤æ–­ä¸¤ä¸ªå¼•ç”¨æŒ‡å‘çš„å®é™…å¯¹è±¡ç±»å‹æ˜¯å¦ä¸€è‡´ã€‚</li>
<li>å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</li>
<li>ä¾æ¬¡æ¯”è¾ƒå„ä¸ªå±æ€§å€¼æ˜¯å¦ç›¸åŒã€‚</li>
</ol>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨IDEçš„å¿«æ·åŠŸèƒ½è‡ªåŠ¨é‡å†™ï¼Œä»¥ä¸‹æ˜¯eclipesçš„é‡å†™å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) obj;</span><br><span class="line">    <span class="keyword">if</span> (age != other.age)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (name == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (other.name != <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†æ¬¡è¿è¡Œä»£ç ï¼Œæ§åˆ¶å°å°±è¾“å‡ºtrueäº†ã€‚</p>
<h2 id="finalize-æ–¹æ³•"><a href="#finalize-æ–¹æ³•" class="headerlink" title="finalize()æ–¹æ³•"></a>finalize()æ–¹æ³•</h2><ul>
<li><p><strong>å½“å¯¹è±¡è¢«åˆ¤å®šä¸ºåƒåœ¾å¯¹è±¡æ—¶</strong>ï¼Œ<strong>ç”±JVMè‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•</strong>ï¼Œ<strong>ç”¨ä»¥æ ‡è®°åƒåœ¾å¯¹è±¡</strong>ï¼Œ<strong>è¿›å…¥å›æ”¶é˜Ÿåˆ—</strong>ã€‚</p>
<ul>
<li><p><strong>åƒåœ¾å¯¹è±¡</strong></p>
<p>æ²¡æœ‰æœ‰æ•ˆå¼•ç”¨æŒ‡å‘æ­¤å¯¹è±¡æ—¶ï¼Œä¸ºåƒåœ¾å¯¹è±¡ã€‚</p>
</li>
<li><p><strong>åƒåœ¾å›æ”¶</strong></p>
<p>ç”±GCé”€æ¯åƒåœ¾å¯¹è±¡ï¼Œé‡Šæ”¾æ•°æ®å­˜å‚¨ç©ºé—´ã€‚</p>
</li>
<li><p><strong>è‡ªåŠ¨å›æ”¶æœºåˆ¶</strong></p>
<p>JVMçš„å†…å­˜è€—å°½ï¼Œä¸€æ¬¡æ€§å›æ”¶æ‰€æœ‰åƒåœ¾å¯¹è±¡ã€‚</p>
</li>
<li><p><strong>æ‰‹åŠ¨å›æ”¶æœºåˆ¶</strong></p>
<p>ä½¿ç”¨<code>System.gc();</code>é€šçŸ¥JVMæ‰§è¡Œåƒåœ¾å›æ”¶ã€‚</p>
</li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯ä¸åŒ…å«ä»»ä½•ä»£ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºçš„æ–¹æ³•ï¼Œä½ å¯ä»¥é‡å†™è¯¥æ–¹æ³•æ¥è§‚å¯ŸJVMæ˜¯å¦å›æ”¶äº†æŸäº›å¯¹è±¡ï¼Œæ­¤å¤„ä¸å†æ¼”ç¤ºã€‚</p>
</li>
</ul>
<hr>
<h1 id="åŒ…è£…ç±»"><a href="#åŒ…è£…ç±»" class="headerlink" title="åŒ…è£…ç±»"></a>åŒ…è£…ç±»</h1><ul>
<li><p><strong>ä»€ä¹ˆæ˜¯åŒ…è£…ç±»</strong>ï¼Ÿ</p>
<p>åŸºæœ¬æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„å¼•ç”¨æ•°æ®ç±»å‹ã€‚</p>
</li>
<li><p><strong>Objectå¯ç»Ÿä¸€æ‰€æœ‰æ•°æ®</strong>ï¼Œ<strong>åŒ…è£…çš„é»˜è®¤å€¼ä¸ºnull</strong>ã€‚</p>
<table>
<thead>
<tr>
<th>åŸºæœ¬æ•°æ®ç±»å‹</th>
<th>åŒ…è£…ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td>byte</td>
<td>Byte</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
</tr>
<tr>
<td>int</td>
<td>Integer</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>char</td>
<td>Character</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="è£…ç®±å’Œæ‹†ç®±"><a href="#è£…ç®±å’Œæ‹†ç®±" class="headerlink" title="è£…ç®±å’Œæ‹†ç®±"></a>è£…ç®±å’Œæ‹†ç®±</h2><p>æ¯ä¸ªåŸºæœ¬ç±»å‹éƒ½å¯¹åº”ç€ä¸€ä¸ªå¼•ç”¨ï¼ˆåŒ…è£…ï¼‰ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹å­˜å‚¨åœ¨æ ˆç©ºé—´è€Œå¼•ç”¨ç±»å‹å­˜å‚¨åœ¨å †ç©ºé—´ï¼›æŠŠåŸºç¡€ç±»å‹è½¬æ¢æˆå¼•ç”¨ç±»å‹çš„è¿‡ç¨‹å«åšè£…ç®±ï¼Œæ¯ä¸ªå¼•ç”¨ç±»å‹éƒ½æä¾›äº†ä¸€äº›æ–¹æ³•å’Œå±æ€§å¯ä¾›ä½¿ç”¨ï¼›æŠŠå¼•ç”¨ç±»å‹è½¬æ¢æˆåŸºç¡€ç±»å‹çš„è¿‡ç¨‹å«åšæ‹†ç®±ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‹†ç®±å’Œè£…ç®±æ¼”ç¤º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//è£…ç®±ï¼ˆä¸¤ç§æ–¹æ³•ï¼‰</span></span><br><span class="line">		<span class="type">int</span> num1=<span class="number">10</span>;</span><br><span class="line">		Integer integer1=<span class="keyword">new</span> <span class="title class_">Integer</span>(num1);</span><br><span class="line">		Integer integer2=Integer.valueOf(num1);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//æ‹†ç®±</span></span><br><span class="line">		<span class="type">int</span> num2=integer1.intValue();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨JDK1.5ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå¦‚ä¸Šçš„æ“ä½œæ¥è£…ç®±å’Œæ‹†ç®±ï¼Œä½†åœ¨JDK1.5ä¹‹åï¼Œjavaå°±æä¾›äº†è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//è£…ç®±</span></span><br><span class="line">    <span class="type">int</span> num1=<span class="number">10</span>;</span><br><span class="line">    Integer integer1=num1;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‹†ç®±</span></span><br><span class="line">    <span class="type">int</span> num2=integer1;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸å¿…è°ƒç”¨æ–¹æ³•ä¼ å€¼ä¾¿å¯ä»¥å®ç°è£…ç®±å’Œæ‹†ç®±ã€‚ä½†å®é™…ä¸Šå¹¶ä¸æ˜¯ä¸éœ€è¦å†™ï¼Œè€Œæ˜¯ç¼–è¯‘çš„æ—¶å€™javaè‡ªåŠ¨å¸®ä½ åšäº†è¿™äº›å·¥ä½œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå°å·¥å…·Xjadæ¥éªŒè¯ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªåç¼–è¯‘çš„å·¥å…·ï¼Œå¯ä»¥æŠŠclassæ–‡ä»¶åç¼–è¯‘æˆjavaä»£ç ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªå·±ç™¾åº¦ä¸‹ï¼Œè¿™é‡Œåªç®€å•æè¿°ä¸€ä¸‹ã€‚è¿è¡Œä¸Šä¸€æ®µä»£ç ï¼Œå°†ç¼–è¯‘çš„classæ–‡ä»¶æ‹–åˆ°è¿™ä¸ªå°å·¥å…·ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">integer1</span> <span class="operator">=</span> Integer.valueOf(num1);</span><br><span class="line">    <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> integer1.intValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶åœ¨ç¼–è¯‘åè‡ªåŠ¨è°ƒç”¨äº†Integerä¸­çš„æ–¹æ³•ã€‚</p>
<h2 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h2><ul>
<li>8ç§åŒ…è£…ç±»æä¾›ä¸åŒç±»å‹é—´çš„è½¬æ¢æ–¹å¼ã€‚<ol>
<li>Numberçˆ¶ç±»ä¸­æä¾›çš„6ä¸ªå…±æ€§æ–¹æ³•ã€‚</li>
<li>parseXXX()é™æ€æ–¹æ³•ã€‚</li>
<li>valueOf()é™æ€æ–¹æ³•ã€‚</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="comment">//åŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//1.åŸºæœ¬ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line">		<span class="type">int</span> n1=<span class="number">255</span>;</span><br><span class="line">		<span class="comment">//1.1 ä½¿ç”¨+å·</span></span><br><span class="line">		String s1=n1+<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="comment">//1.2 ä½¿ç”¨Integerä¸­çš„tostringæ–¹æ³•</span></span><br><span class="line">		String s3=Integer.toString(n1);</span><br><span class="line">		String s2=Integer.toString(n1, <span class="number">10</span>);<span class="comment">//ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŸºæ•°ï¼Œå¯ä»¥ç†è§£ä¸ºxè¿›åˆ¶</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.å­—ç¬¦ä¸²è½¬æ¢æˆåŸºæœ¬ç±»å‹</span></span><br><span class="line">		String string=<span class="string">&quot;150&quot;</span>;</span><br><span class="line">		<span class="type">int</span> n2=Integer.parseInt(string);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å­—ç¬¦ä¸²è½¬æ¢æˆbooleanç±»å‹ï¼Œ&quot;true&quot;-&gt;&quot;true&quot;  &quot;étrue&quot;-&gt;&quot;false&quot;</span></span><br><span class="line">		String string2=<span class="string">&quot;true&quot;</span>;</span><br><span class="line">		String string3=<span class="string">&quot;123&quot;</span>;</span><br><span class="line">		<span class="type">boolean</span> b1=Boolean.parseBoolean(string2);<span class="comment">//true</span></span><br><span class="line">		<span class="type">boolean</span> b2=Boolean.parseBoolean(string3);<span class="comment">//false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ•´æ•°ç¼“å†²åŒºã€é‡ç‚¹ã€‘"><a href="#æ•´æ•°ç¼“å†²åŒºã€é‡ç‚¹ã€‘" class="headerlink" title="æ•´æ•°ç¼“å†²åŒºã€é‡ç‚¹ã€‘"></a>æ•´æ•°ç¼“å†²åŒºã€é‡ç‚¹ã€‘</h2><ul>
<li><p><strong>Javaé¢„å…ˆåˆ›å»ºäº†256ä¸ªå¸¸ç”¨çš„æ•´æ•°åŒ…è£…ç±»å‹å¯¹è±¡</strong>ã€‚</p>
<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç»™å¤§å®¶ä¸‰ä¸ªé—®é¢˜ï¼Œåœ¨ç»§ç»­å¾€ä¸‹çœ‹æ—¶ï¼Œä½ å…ˆåœ¨å¿ƒé‡Œç»™å‡ºä¸€ä¸ªç­”æ¡ˆï¼š</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//1. ç»“æœè¾“å‡ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">		Integer integer1=<span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">100</span>);</span><br><span class="line">		Integer integer2=<span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">100</span>);</span><br><span class="line">		System.out.println(integer1==integer2);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.ç»“æœè¾“å‡ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">		Integer integer3=<span class="number">100</span>;</span><br><span class="line">		Integer integer4=<span class="number">100</span>;</span><br><span class="line">		System.out.println(integer3==integer4);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//3.ç»“æœè¾“å‡ºä»€ä¹ˆï¼Ÿ</span></span><br><span class="line">		Integer integer5=<span class="number">200</span>;</span><br><span class="line">		Integer integer6=<span class="number">200</span>;</span><br><span class="line">		System.out.println(integer5==integer6);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‰ä¸ªé—®é¢˜çš„ç»“æœåˆ†åˆ«æ˜¯<strong>false</strong>ï¼Œ<strong>true</strong>ï¼Œ<strong>false</strong>ã€‚</p>
<p>å…ˆæ¥å›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªå­˜å‚¨åœ¨æ ˆç©ºé—´çš„å˜é‡åˆ†åˆ«æŒ‡å‘çš„æ˜¯ä¸¤ä¸ªå †ç©ºé—´ä¸­çš„å¯¹è±¡ï¼Œä¸¤ä¸ªå¯¹è±¡çš„åœ°å€ä¸ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨æ¯”è¾ƒæ—¶è¿”å›äº†falseã€‚</p>
<p>ç¬¬äºŒä¸ªé—®é¢˜å’Œç¬¬ä¸‰ä¸ªé—®é¢˜éƒ½æ˜¯è¿›è¡Œäº†è‡ªåŠ¨è£…ç®±ï¼Œä¸ºä»€ä¹ˆç»“æœä¸ä¸€æ ·ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹javaæ˜¯å¦‚ä½•è‡ªåŠ¨è£…ç®±çš„ï¼ŒåŒæ ·å€ŸåŠ©Xjadå°å·¥å…·åç¼–è¯‘Demo2.classæ–‡ä»¶ï¼Œå¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">Integer</span> <span class="variable">integer1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">100</span>);</span><br><span class="line">		<span class="type">Integer</span> <span class="variable">integer2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">100</span>);</span><br><span class="line">		System.out.println(integer1 == integer2);</span><br><span class="line">		<span class="type">Integer</span> <span class="variable">integer3</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>);</span><br><span class="line">		<span class="type">Integer</span> <span class="variable">integer4</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>);</span><br><span class="line">		System.out.println(integer3 == integer4);</span><br><span class="line">		<span class="type">Integer</span> <span class="variable">integer5</span> <span class="operator">=</span> Integer.valueOf(<span class="number">200</span>);</span><br><span class="line">		<span class="type">Integer</span> <span class="variable">integer6</span> <span class="operator">=</span> Integer.valueOf(<span class="number">200</span>);</span><br><span class="line">		System.out.println(integer5 == integer6);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>å‘ç°javaè‡ªåŠ¨è£…ç®±è°ƒç”¨çš„æ˜¯valueOfè¿™ä¸ªæ–¹æ³•ï¼Œ<strong>é‡ç‚¹</strong>æ¥äº†ï¼Œè¿›å…¥åˆ°è¿™ä¸ªæ–¹æ³•çš„æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">valueOf</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">        <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹è§è¯¥æ–¹æ³•é¦–å…ˆåˆ¤æ–­äº†ä¼ å…¥å€¼çš„èŒƒå›´ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªèŒƒå›´çš„å¤§å°ï¼Œè¿›å…¥åˆ°IntegerCacheç±»çš„æºç ï¼ˆéƒ¨åˆ†ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»¥ä¸‹ä»£ç åªæˆªå–äº†éƒ¨åˆ†ï¼Œä»¥ä¾¿æ›´å¥½åœ°åˆ†æä¸è®²è§£</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntegerCache</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> -<span class="number">128</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> high;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">        high = h;</span><br><span class="line">        cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[(high - low) + <span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">            cache[k] = <span class="keyword">new</span> <span class="title class_">Integer</span>(j++);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>IntegerCacheå­—é¢æ„æ€å°±æ˜¯æ•´å‹ç¼“å†²åŒºã€‚è¯¥ç±»å®šä¹‰äº†ä¸€ä¸ªå€¼ä¸º-128çš„å˜é‡lowå’Œä¸€ä¸ªå€¼ä¸º127çš„å˜é‡highï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°ç»„å¤§å°ä¸º[(127+128)+1]=256çš„å˜é‡cacheï¼›å¹¶ä¸”ï¼Œä½¿ç”¨äº†ä¸€ä¸ªforå¾ªç¯ï¼Œç”¨-128åˆ°127èŒƒå›´çš„å€¼åˆå§‹åŒ–äº†cacheæ•°ç»„ã€‚</p>
<p>è¿™æ—¶å€™å†å›åˆ°valueOfæ–¹æ³•æºç ä¸­ï¼Œå‘ç°ifåˆ¤æ–­çš„å°±æ˜¯ä¼ å…¥å€¼æ˜¯å¦åœ¨-128åˆ°127ä¹‹é—´ï¼Œæ˜¯çš„è¯å°±ç›´æ¥è¿”å›cacheæ•°ç»„ä¸­çš„å¯¹åº”å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¼ å…¥çš„æ•°å­—åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œé‚£ä¹ˆå¯¹åº”è£…ç®±çš„Integerå¯¹è±¡å…¶å®å·²ç»æ˜¯åˆå§‹åŒ–è¿‡çš„ï¼Œç›´æ¥æ‹¿æ¥ç”¨ã€‚å¦‚æœvalueOfæ–¹æ³•ä¼ å…¥çš„å€¼ä¸åœ¨è¿™ä¸ªèŒƒå›´ï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯ç”¨Integeræ„é€ æ–¹æ³•newçš„ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>æ‰€ä»¥ç¬¬äºŒä¸ªé—®é¢˜ç­”æ¡ˆæ˜¯trueï¼Œå®ƒä»¬æ‰€å¼•ç”¨çš„å°±æ˜¯cacheæ•°ç»„ä¸­çš„åŒä¸€ä¸ªåœ°å€ï¼›è€Œç¬¬ä¸‰ä¸ªé—®é¢˜ä¸­çš„å˜é‡ä¸åœ¨cacheèŒƒå›´å†…ï¼Œæ‰€ä»¥æ‰€æ‰§è¡Œçš„ä»£ç åŒç¬¬ä¸€ä¸ªé—®é¢˜ã€‚</p>
</li>
</ul>
<hr>
<h1 id="å¯å˜å­—ç¬¦ä¸²"><a href="#å¯å˜å­—ç¬¦ä¸²" class="headerlink" title="å¯å˜å­—ç¬¦ä¸²"></a>å¯å˜å­—ç¬¦ä¸²</h1><ul>
<li><strong>StringBuffer</strong>ï¼šå¯å˜é•¿å­—ç¬¦ä¸²ï¼ŒJDK1.0æä¾›ï¼Œè¿è¡Œæ•ˆç‡æ…¢ã€çº¿ç¨‹å®‰å…¨ã€‚</li>
<li><strong>StringBuilder</strong>ï¼šå¯å˜é•¿å­—ç¬¦ä¸²ï¼ŒJDK1.5æä¾›ï¼Œè¿è¡Œæ•ˆç‡å¿«ã€çº¿ç¨‹ä¸å®‰å…¨ã€‚</li>
</ul>
<p>è¿™ä¸¤ä¸ªç±»ç›¸å½“äºStringçš„å¢å¼ºç±»ï¼Œäº‹å…ˆå¼€è¾Ÿäº†ä¸€å—ç¼“å†²åŒºï¼›è¿™ä¸¤ä¸ªç±»çš„ç”¨æ³•æ˜¯ä¸€æ ·çš„ï¼Œæ•ˆç‡éƒ½æ¯”Stringé«˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºStringBuilderå¸¸ç”¨æ–¹æ³•çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * æ•ˆç‡æ¯”Stringé«˜ï¼›æ¯”StringèŠ‚çœå†…å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		StringBuilder stringBuilder=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">		<span class="comment">//1. append();è¿½åŠ </span></span><br><span class="line">		stringBuilder.append(<span class="string">&quot;æˆ‘&quot;</span>);<span class="comment">//æˆ‘</span></span><br><span class="line">		stringBuilder.append(<span class="string">&quot;èœ&quot;</span>);<span class="comment">//æˆ‘èœ</span></span><br><span class="line">		<span class="comment">//2. insert();æ’å…¥</span></span><br><span class="line">		stringBuilder.insert(<span class="number">0</span>, <span class="string">&quot;å‰&quot;</span>);<span class="comment">//å‰æˆ‘èœ</span></span><br><span class="line">		<span class="comment">//3. replace();æ›¿æ¢</span></span><br><span class="line">		stringBuilder.replace(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;ä½ &quot;</span>);<span class="comment">//å‰ä½ èœ</span></span><br><span class="line">		<span class="comment">//4. delete();åˆ é™¤</span></span><br><span class="line">		stringBuilder.delete(<span class="number">0</span>, <span class="number">1</span>);<span class="comment">//ä½ èœ</span></span><br><span class="line">		System.out.println(stringBuilder.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="BigDecimalç±»"><a href="#BigDecimalç±»" class="headerlink" title="BigDecimalç±»"></a>BigDecimalç±»</h1><p>ä¸‹é¢çš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> b1=<span class="number">1.0</span>;</span><br><span class="line"><span class="type">double</span> b2=<span class="number">0.9</span>;</span><br><span class="line">System.out.print(b1-b2);</span><br></pre></td></tr></table></figure>

<p>æ­£å¸¸çš„è¿ç®—ç­”æ¡ˆæ˜¯0.1ï¼Œè€Œç¨‹åºè¾“å‡ºçš„ç»“æœæ˜¯<code>0.0999...98</code>ã€‚å› ä¸ºæµ®ç‚¹ç±»å‹å­˜å‚¨çš„å®é™…æ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œç»è¿‡è®¡ç®—ä¹‹åè‚¯å®šä¼šæœ‰è¯¯å·®ï¼Œåªä¸è¿‡è¿™ç§è¯¯å·®å¾ˆå°ã€‚</p>
<p>å¾ˆå¤šå®é™…åº”ç”¨ä¸­éœ€è¦ç²¾ç¡®è®¡ç®—ï¼Œç”¨doubleè‚¯å®šä¸ç¬¦åˆè¦æ±‚ï¼Œè¿™æ—¶å€™éœ€è¦å€ŸåŠ©BigDecimalç±»æ¥å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºBigDecimalç±»çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		BigDecimal b1=<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1.0&quot;</span>);</span><br><span class="line">		BigDecimal b2=<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.9&quot;</span>);</span><br><span class="line">		System.out.println(b1.subtract(b2));<span class="comment">//å‡æ³• 0.1</span></span><br><span class="line">		System.out.println(b1.add(b2));<span class="comment">//åŠ æ³• 1.9</span></span><br><span class="line">		System.out.println(b1.multiply(b2));<span class="comment">//ä¹˜æ³• 0.90	</span></span><br><span class="line">        System.out.println(b2.divide(b1));<span class="comment">//é™¤æ³• 0.9</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ä»¥ä¸Šè®¡ç®—æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé™¤æ³•çš„ç»“æœé™¤ä¸å°½ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥ä¸€ä¸ªå¼‚å¸¸ï¼›æ‰€ä»¥åœ¨é™¤æ³•è¿ç®—çš„æ—¶å€™éœ€è¦ä½¿ç”¨divideçš„å¦å¤–ä¸€ä¸ªæ„é€ æ–¹æ³•<code>divide(divisor, scale, roundingMode)</code>ã€‚</p>
<ul>
<li>å‚æ•°divisorï¼šé™¤æ•°</li>
<li>å‚æ•°scaleï¼šæŒ‡å®šç²¾ç¡®åˆ°å°æ•°ç‚¹åå‡ ä½</li>
<li>å‚æ•°roundingModeï¼š<ul>
<li>æŒ‡å®šå°æ•°éƒ¨åˆ†çš„å–èˆæ¨¡å¼ï¼Œé€šå¸¸é‡‡ç”¨å››èˆäº”å…¥çš„æ¨¡å¼ã€‚</li>
<li>å–å€¼ä¸º<code>BigDecimal.ROUND_HALF_UP</code></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;10&quot;</span>).divide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;3&quot;</span>), <span class="number">2</span>, BigDecimal.ROUND_HALF_UP));<span class="comment">//3.33</span></span><br><span class="line">		System.out.println(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;20&quot;</span>).divide(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;3&quot;</span>), <span class="number">2</span>, BigDecimal.ROUND_HALF_UP));<span class="comment">//6.67</span></span><br></pre></td></tr></table></figure>

<h1 id="æ—¶é—´ç±»"><a href="#æ—¶é—´ç±»" class="headerlink" title="æ—¶é—´ç±»"></a>æ—¶é—´ç±»</h1><h2 id="Dateç±»"><a href="#Dateç±»" class="headerlink" title="Dateç±»"></a>Dateç±»</h2><ul>
<li>Dateè¡¨ç¤ºç‰¹å®šçš„ç¬é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’ã€‚Dateç±»ä¸­çš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½å·²ç»è¢«Calendarç±»ä¸­çš„æ–¹æ³•æ‰€å–ä»£ï¼ˆå·²è¿‡æ—¶ï¼‰ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºDateç±»ä¸­å°šæœªè¿‡æ—¶çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Date d1=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">		Date d2=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">		<span class="comment">//å½“å‰æ—¶é—´ Wed Nov 04 12:01:52 CST 2020</span></span><br><span class="line">		System.out.println(d1.toString());</span><br><span class="line">		<span class="comment">//å·²è¿‡æ—¶ï¼Œæ‰“å°å½“åœ°æ—¶é—´</span></span><br><span class="line">		<span class="comment">//2020-11-4 12:01:52</span></span><br><span class="line">		System.out.println(d1.toLocaleString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//after beforeåˆ¤æ–­ä¸¤ä¸ªæ—¶é—´å‰åå…³ç³»</span></span><br><span class="line">		d2=<span class="keyword">new</span> <span class="title class_">Date</span>(d1.getTime()-<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">1000</span>);<span class="comment">//æ˜¨å¤©æ­¤åˆ»</span></span><br><span class="line">		System.out.println(d1.after(d2));<span class="comment">//true ä»Šå¤©åœ¨æ˜¨å¤©åé¢</span></span><br><span class="line">		System.out.println(d1.before(d2));<span class="comment">//false</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//compareToæ¯”è¾ƒï¼Œä¸¤è€…æ¯«ç§’æ•°ç›¸å‡ï¼Œè¿”å›æ­£è´Ÿ0</span></span><br><span class="line">		System.out.println(d1.compareTo(d2));<span class="comment">//1</span></span><br><span class="line">		System.out.println(d2.compareTo(d1));<span class="comment">//-1</span></span><br><span class="line">		System.out.println(d1.compareTo(d1));<span class="comment">//0</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//equalsåˆ¤æ–­æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">		System.out.println(d1.equals(d2));<span class="comment">//false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Calendarç±»"><a href="#Calendarç±»" class="headerlink" title="Calendarç±»"></a>Calendarç±»</h2><ul>
<li><p><strong>Calendaræä¾›äº†è·å–æˆ–è®¾ç½®å„ç§æ—¥å†å­—æ®µçš„æ–¹æ³•</strong>ã€‚</p>
</li>
<li><p><strong>æ„é€ æ–¹æ³•</strong><code>protected Calendar()</code></p>
<p>ç”±äºä¿®é¥°ç¬¦æ˜¯protectedï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥åˆ›å»ºè¯¥å¯¹è±¡ã€‚</p>
</li>
</ul>
<p>å…¶ä»–æ–¹æ³•ï¼š</p>
<ul>
<li><p><code>static Calendar getInstance()</code></p>
<p>ä½¿ç”¨é»˜è®¤æ—¶åŒºå’ŒåŒºåŸŸè·å–æ—¥å†ã€‚</p>
</li>
<li><p><code>void set(int year,int month,int date,int hourOfDay,int minute,int second)</code></p>
<p>è®¾ç½®æ—¥å†çš„å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ã€‚</p>
</li>
<li><p><code>int get(int field)</code></p>
<p>è¿”å›ç»™å®šæ—¥å†å­—æ®µçš„å€¼ã€‚å­—æ®µæ¯”å¦‚å¹´ã€æœˆã€æ—¥ç­‰ã€‚</p>
</li>
<li><p><code>void setTime(Date date)</code></p>
<p>ç”¨ç»™å®šçš„Dateè®¾ç½®æ¬¡æ—¥å†çš„æ—¶é—´ã€‚Date-&gt;Calendar</p>
</li>
<li><p><code>Date getTime()</code></p>
<p>è¿”å›ä¸€ä¸ªDateè¡¨ç¤ºæ­¤æ—¥å†çš„æ—¶é—´ã€‚Calendar-&gt;Date</p>
</li>
<li><p><code>void add(int field,int amount)</code></p>
<p>æŒ‰ç…§æ—¥å†çš„è§„åˆ™ï¼Œç»™æŒ‡å®šå­—æ®µæ·»åŠ æˆ–å‡å°‘æ—¶é—´é‡ã€‚</p>
</li>
<li><p><code>long getTimeMillies()</code></p>
<p>æ¯«ç§’ä¸ºå•ä½è¿”å›è¯¥æ—¥å†çš„æ—¶é—´å€¼ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºCalendarç±»å¸¸ç”¨æ–¹æ³•çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºCalendarå¯¹è±¡</span></span><br><span class="line">		Calendar calendar=Calendar.getInstance();</span><br><span class="line">		<span class="comment">//2020-11-4 13:50:56</span></span><br><span class="line">		System.out.println(calendar.getTime().toLocaleString());</span><br><span class="line">		<span class="comment">//1604469056368</span></span><br><span class="line">		System.out.println(calendar.getTimeInMillis());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//è·å–æ—¶é—´ä¿¡æ¯</span></span><br><span class="line">		<span class="comment">//å¹´ 2020</span></span><br><span class="line">		System.out.println(calendar.get(Calendar.YEAR));</span><br><span class="line">		<span class="comment">//æœˆ 11 å€¼ä¸º0-11</span></span><br><span class="line">		System.out.println(calendar.get(Calendar.MONTH)+<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//æ—¥ 4</span></span><br><span class="line">		System.out.println(calendar.get(Calendar.DAY_OF_MONTH));</span><br><span class="line">		<span class="comment">//å°æ—¶ 1/13 12å°æ—¶/24å°æ—¶</span></span><br><span class="line">		System.out.println(calendar.get(Calendar.HOUR));</span><br><span class="line">		System.out.println(calendar.get(Calendar.HOUR_OF_DAY));</span><br><span class="line">		<span class="comment">//åˆ†é’Ÿ 50</span></span><br><span class="line">		System.out.println(calendar.get(Calendar.MINUTE));</span><br><span class="line">		<span class="comment">//ç§’ 56</span></span><br><span class="line">		System.out.println(calendar.get(Calendar.SECOND));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">		calendar.set(Calendar.YEAR, <span class="number">2019</span>);</span><br><span class="line">		<span class="comment">//2019-11-4 13:50:56</span></span><br><span class="line">		System.out.println(calendar.getTime().toLocaleString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//æ·»åŠ æˆ–å‡å°‘æ—¶é—´é‡</span></span><br><span class="line">		calendar.add(Calendar.MONTH, -<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//2019-10-4 13:50:56</span></span><br><span class="line">		System.out.println(calendar.getTime().toLocaleString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//è·å–æ—¶é—´å­—æ®µçš„æœ€å¤§å€¼ã€æœ€å°å€¼</span></span><br><span class="line">		<span class="comment">//31 / 1</span></span><br><span class="line">		System.out.println(calendar.getActualMaximum(Calendar.DAY_OF_MONTH));</span><br><span class="line">		System.out.println(calendar.getActualMinimum(Calendar.DAY_OF_MONTH));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SimpleDateFormatç±»"><a href="#SimpleDateFormatç±»" class="headerlink" title="SimpleDateFormatç±»"></a>SimpleDateFormatç±»</h2><ul>
<li><p><strong>SimpleDateFormatæ˜¯ä¸€ä¸ªä»¥è¯­è¨€ç¯å¢ƒæœ‰å…³çš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»</strong>ã€‚</p>
</li>
<li><p><strong>å¯ä»¥è¿›è¡Œæ ¼å¼åŒ–</strong>ï¼ˆ<strong>æ—¥æœŸåˆ°æ–‡æœ¬</strong>ï¼‰<strong>å’Œè§£æ</strong>ï¼ˆ<strong>æ–‡æœ¬å’Œæ—¥æœŸ</strong>ï¼‰ã€‚</p>
</li>
<li><p><strong>å¸¸ç”¨çš„æ—¶é—´æ¨¡å¼å­—æ¯</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ¯</th>
<th>æ—¥æœŸæˆ–æ—¶é—´</th>
</tr>
</thead>
<tbody><tr>
<td>y</td>
<td>å¹´</td>
</tr>
<tr>
<td>M</td>
<td>å¹´ä¸­æœˆä»½</td>
</tr>
<tr>
<td>d</td>
<td>æœˆä¸­å¤©æ•°</td>
</tr>
<tr>
<td>H</td>
<td>1å¤©ä¸­å°æ—¶æ•°ï¼ˆ0-23ï¼‰</td>
</tr>
<tr>
<td>m</td>
<td>åˆ†é’Ÿ</td>
</tr>
<tr>
<td>s</td>
<td>ç§’</td>
</tr>
<tr>
<td>S</td>
<td>æ¯«ç§’</td>
</tr>
</tbody></table>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException &#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">		SimpleDateFormat simpleDateFormat=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd HH:mm:ss&quot;</span>);</span><br><span class="line">		<span class="comment">//åˆ›å»ºDateå¯¹è±¡</span></span><br><span class="line">		Date date=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//æ ¼å¼åŒ–</span></span><br><span class="line">		String string=simpleDateFormat.format(date);</span><br><span class="line">		<span class="comment">//2020/11/04 14:10:21</span></span><br><span class="line">		System.out.println(string);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//è§£æï¼ˆå¿…é¡»æŒ‰ç…§ä¸Šé¢æ ¼å¼åŒ–çš„å½¢å¼ï¼‰</span></span><br><span class="line">		Date date2=simpleDateFormat.parse(<span class="string">&quot;1999/01/30 00:00:00&quot;</span>);</span><br><span class="line">		<span class="comment">//1999-1-30 0:00:00</span></span><br><span class="line">		System.out.println(date2.toLocaleString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Systemç±»"><a href="#Systemç±»" class="headerlink" title="Systemç±»"></a>Systemç±»</h1><ul>
<li><p>ç³»ç»Ÿç±»ï¼Œä¸»è¦ç”¨äºè·å–ç³»ç»Ÿçš„å±æ€§æ•°æ®å’Œå…¶ä»–æ“ä½œï¼Œå…¶æ„é€ æ–¹æ³•æ˜¯ç§æœ‰çš„ã€‚</p>
</li>
<li><p>å¸¸ç”¨æ–¹æ³•</p>
<ul>
<li><p><code>static void arraycopy(...)</code></p>
<p>å¤åˆ¶æ•°ç»„</p>
</li>
<li><p><code>static long currentTimeMillis()</code></p>
<p>è·å–å½“å‰ç³»ç»Ÿæ—¶é—´ï¼Œè¿”å›çš„æ˜¯æ¯«ç§’å€¼ã€‚é€šå¸¸ç”¨æ¥è®¡ç®—æŸä¸ªæ“ä½œçš„ç”¨æ—¶ï¼Œæ“ä½œå‰åå„è·å–ä¸€ä¸ªæ—¶é—´ç„¶åç›¸å‡ï¼Œæ‰€å¾—çš„æ¯«ç§’æ•°å°±æ˜¯ç”¨æ—¶ã€‚</p>
</li>
<li><p><code>static void gc()</code></p>
<p>å»ºè®®JVMèµ¶å¿«å¯åŠ¨åƒåœ¾å›æ”¶å™¨å›æ”¶åƒåœ¾ï¼Œå…·ä½“æ˜¯å¦è°ƒç”¨æ˜¯ç”±ç³»ç»Ÿå†³å®šçš„ã€‚</p>
</li>
<li><p><code>static void exit(int status)</code></p>
<p>é€€å‡ºJVMï¼Œå¦‚æœå‚æ•°æ˜¯0è¡¨ç¤ºæ­£å¸¸é€€å‡ºJVMï¼Œé0è¡¨ç¤ºå¼‚å¸¸é€€å‡ºJVMã€‚</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºarraycopyçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">int</span>[] src= &#123;<span class="number">3</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">92</span>,<span class="number">65</span>,<span class="number">35</span>,<span class="number">85</span>&#125;;</span><br><span class="line">		<span class="type">int</span>[] dest = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">7</span>];</span><br><span class="line">		<span class="type">int</span> srcPos=<span class="number">0</span>,destPos=<span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> length=src.length;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * src:æºæ•°ç»„</span></span><br><span class="line"><span class="comment">		 * scrPosï¼šå¤åˆ¶çš„æºæ•°ç»„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">		 * destï¼šç›®æ ‡æ•°ç»„</span></span><br><span class="line"><span class="comment">		 * destPosï¼šå¤åˆ¶çš„ç›®æ ‡æ•°ç»„èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="comment">		 * lengthï¼šå¤åˆ¶çš„æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		System.arraycopy(src, srcPos, dest, destPos, length);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨Arraysç±»é‡Œä¹Ÿæœ‰ä¸€ä¸ªcopyOfå¤åˆ¶æ•°ç»„çš„æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿé€šè¿‡æŸ¥çœ‹æºç å‘ç°Arraysçš„è¿™ä¸ªæ–¹æ³•å†…éƒ¨è°ƒç”¨çš„å°±æ˜¯<code>System.arraycopy()</code>æ–¹æ³•ï¼Œè€Œarraycopyæ–¹æ³•çš„æºç æ˜¯è¢«nativeä¿®é¥°çš„æœ¬åœ°æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">arraycopy</span><span class="params">(Object src,  <span class="type">int</span>  srcPos,</span></span><br><span class="line"><span class="params">                                    Object dest, <span class="type">int</span> destPos,</span></span><br><span class="line"><span class="params">                                    <span class="type">int</span> length)</span>;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æ–¹æ³•ä½“æ˜¯ç©ºçš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸç”Ÿå‡½æ•°ï¼Œå¹¶ä¸æ˜¯ç”±javaæ¥å®ç°çš„ï¼Œè€Œæ˜¯ç”±c/c++æ¥å®ç°çš„ï¼Œjavaåªæ˜¯è°ƒç”¨äº†å®ƒï¼Œç”±c++å®ç°çš„è¿™ä¸ªæ–¹æ³•æ•ˆç‡ä¼šæ¯”javaå¿«å¾ˆå¤šã€‚</p>
]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAé›†åˆæ¡†æ¶è¯¦è§£</title>
    <url>/2021/03/22/JAVA%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h1 id="é›†åˆæ¦‚è¿°"><a href="#é›†åˆæ¦‚è¿°" class="headerlink" title="é›†åˆæ¦‚è¿°"></a><strong>é›†åˆæ¦‚è¿°</strong></h1><hr>
<ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šå¯¹è±¡çš„å®¹å™¨ï¼Œå®šä¹‰äº†å¯¹å¤šä¸ªå¯¹è±¡è¿›é¡¹æ“ä½œçš„çš„å¸¸ç”¨æ–¹æ³•ã€‚å¯å®ç°æ•°ç»„çš„åŠŸèƒ½ã€‚</li>
<li><strong>å’Œæ•°ç»„çš„åŒºåˆ«</strong>ï¼š</li>
</ul>
<ol>
<li>æ•°ç»„é•¿åº¦å›ºå®šï¼Œé›†åˆé•¿åº¦ä¸å›ºå®šã€‚</li>
<li>æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Œé›†åˆåªèƒ½å­˜å‚¨å¼•ç”¨ç±»å‹ã€‚</li>
</ol>
<ul>
<li><strong>ä½ç½®</strong>ï¼š java.util.*;</li>
</ul>
<h2 id="Collectionä½“ç³»é›†åˆ"><a href="#Collectionä½“ç³»é›†åˆ" class="headerlink" title="Collectionä½“ç³»é›†åˆ"></a><strong>Collectionä½“ç³»é›†åˆ</strong></h2><hr>
<p><img src="https://pic.imgdb.cn/item/5f9912e21cd1bbb86b6c3035.png" alt="img"></p>
<h3 id="Collectionçˆ¶æ¥å£"><a href="#Collectionçˆ¶æ¥å£" class="headerlink" title="Collectionçˆ¶æ¥å£"></a><strong>Collectionçˆ¶æ¥å£</strong></h3><hr>
<ul>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼šä»£è¡¨ä¸€ç»„ä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œæ— åºã€æ— ä¸‹æ ‡ã€ä¸èƒ½é‡å¤ã€‚</p>
</li>
<li><p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><code>boolean add(Object obj) //æ·»åŠ ä¸€ä¸ªå¯¹è±¡ã€‚</code></li>
<li><code>boolean addAll(Collection c) //è®²ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å¯¹è±¡æ·»åŠ åˆ°æ­¤é›†åˆä¸­ã€‚</code></li>
<li><code>void clear() //æ¸…ç©ºæ­¤é›†åˆä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</code></li>
<li><code>boolean contains(Object o) //æ£€æŸ¥æ­¤é›†åˆä¸­æ˜¯å¦åŒ…å«oå¯¹è±¡ã€‚</code></li>
<li><code>boolean equals(Object o) //æ¯”è¾ƒæ­¤é›†åˆæ˜¯å¦ä¸æŒ‡å®šå¯¹è±¡ç›¸ç­‰ã€‚</code></li>
<li><code>boolean isEmpty() //åˆ¤æ–­æ­¤é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</code></li>
<li><code>boolean remove(Object o) //åœ¨æ­¤é›†åˆä¸­ç§»é™¤oå¯¹è±¡ã€‚</code></li>
<li><code>int size() //è¿”å›æ­¤é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</code></li>
<li><code>Object[] toArray() //å§œæ­¤é›†åˆè½¬æ¢æˆæ•°ç»„ã€‚</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Collectionæ¥å£çš„ä½¿ç”¨ï¼ˆä¸€ï¼‰</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span>&#123;</span><br><span class="line">    pubic <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé›†åˆ</span></span><br><span class="line">        Collection collection=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();        </span><br><span class="line"><span class="comment">//      * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">        Collection.add(<span class="string">&quot;è‹¹æœ&quot;</span>);</span><br><span class="line">        Collection.add(<span class="string">&quot;è¥¿ç“œ&quot;</span>);</span><br><span class="line">        Collection.add(<span class="string">&quot;æ¦´è²&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+collection.size());</span><br><span class="line">        System.out.println(collection);</span><br><span class="line"><span class="comment">//      * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">        collection.remove(<span class="string">&quot;æ¦´è²&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤ä¹‹åï¼š&quot;</span>+collection.size());</span><br><span class="line"><span class="comment">//      * 3.éå†å…ƒç´ </span></span><br><span class="line">        <span class="comment">//3.1 ä½¿ç”¨å¢å¼ºfor </span></span><br><span class="line">        <span class="keyword">for</span>(Object object : collection)&#123;</span><br><span class="line">            System.out.println(object);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.2 ä½¿ç”¨è¿­ä»£å™¨ï¼ˆè¿­ä»£å™¨ä¸“é—¨ç”¨æ¥éå†é›†åˆçš„ä¸€ç§æ–¹å¼ï¼‰</span></span><br><span class="line">        <span class="comment">//hasnext();åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//next();è·å–ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//remove();åˆ é™¤å½“å‰å…ƒç´ </span></span><br><span class="line">        Iterator iterator=collection.Itertor();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasnext())&#123;</span><br><span class="line">            String object=(String)iterator.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">            <span class="comment">//åˆ é™¤æ“ä½œ</span></span><br><span class="line">            <span class="comment">//collection.remove(s);å¼•å‘é”™è¯¯ï¼šå¹¶å‘ä¿®æ”¹å¼‚å¸¸</span></span><br><span class="line">            <span class="comment">//iterator.remove();åº”ä½¿ç”¨è¿­ä»£å™¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">//      * 4.åˆ¤æ–­</span></span><br><span class="line">        System.out.println(collection.contains(<span class="string">&quot;è¥¿ç“œ&quot;</span>));<span class="comment">//true</span></span><br><span class="line">        System.out.println(collection.isEmpty());<span class="comment">//false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Collectionæ¥å£çš„ä½¿ç”¨ï¼ˆäºŒï¼‰</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Collection collection=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">18</span>);</span><br><span class="line">		Student s2=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;æå››&quot;</span>, <span class="number">20</span>);</span><br><span class="line">		Student s3=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">19</span>);</span><br><span class="line">		<span class="comment">//1.æ·»åŠ æ•°æ®</span></span><br><span class="line">		collection.add(s1);</span><br><span class="line">		collection.add(s2);</span><br><span class="line">		collection.add(s3);</span><br><span class="line">		<span class="comment">//collection.add(s3);å¯é‡å¤æ·»åŠ ç›¸åŒå¯¹è±¡</span></span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+collection.size());</span><br><span class="line">		System.out.println(collection.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤æ•°æ®</span></span><br><span class="line">		collection.remove(s1);</span><br><span class="line">		System.out.println(<span class="string">&quot;åˆ é™¤ä¹‹åï¼š&quot;</span>+collection.size());</span><br><span class="line">		<span class="comment">//3.éå†æ•°æ®</span></span><br><span class="line">		<span class="comment">//3.1 å¢å¼ºfor</span></span><br><span class="line">		<span class="keyword">for</span>(Object object:collection) &#123;</span><br><span class="line">			Student student=(Student) object;</span><br><span class="line">			System.out.println(student.toString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2è¿­ä»£å™¨</span></span><br><span class="line">		<span class="comment">//è¿­ä»£è¿‡ç¨‹ä¸­ä¸èƒ½ä½¿ç”¨collectionçš„åˆ é™¤æ–¹æ³•</span></span><br><span class="line">		Iterator iterator=collection.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">			Student student=(Student) iterator.next();</span><br><span class="line">			System.out.println(student.toString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­å’Œä¸Šä¸€å—ä»£ç ç±»ä¼¼ã€‚</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>();</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age +<span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Collectionå­æ¥å£"><a href="#Collectionå­æ¥å£" class="headerlink" title="Collectionå­æ¥å£"></a><strong>Collectionå­æ¥å£</strong></h3><h4 id="Listé›†åˆ"><a href="#Listé›†åˆ" class="headerlink" title="Listé›†åˆ"></a><strong>Listé›†åˆ</strong></h4><ul>
<li><p><strong>ç‰¹ç‚¹</strong>ï¼šæœ‰åºã€æœ‰ä¸‹æ ‡ã€å…ƒç´ å¯ä»¥é‡å¤ã€‚</p>
</li>
<li><p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><code>void add(int index,Object o) //åœ¨indexä½ç½®æ’å…¥å¯¹è±¡oã€‚</code></li>
<li><code>boolean addAll(index,Collection c) //å°†ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ æ·»åŠ åˆ°æ­¤é›†åˆä¸­çš„indexä½ç½®ã€‚</code></li>
<li><code>Object get(int index) //è¿”å›é›†åˆä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</code></li>
<li><code>List subList(int fromIndex,int toIndex) //è¿”å›fromIndexå’ŒtoIndexä¹‹é—´çš„é›†åˆå…ƒç´ ã€‚</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Listå­æ¥å£çš„ä½¿ç”¨ï¼ˆä¸€ï¼‰</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ï¼š1.æœ‰åºæœ‰ä¸‹æ ‡ 2.å¯ä»¥é‡å¤</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> * 5.è·å–ä½ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		List list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		list.add(<span class="string">&quot;tang&quot;</span>);</span><br><span class="line">		list.add(<span class="string">&quot;he&quot;</span>);</span><br><span class="line">		list.add(<span class="number">0</span>,<span class="string">&quot;yu&quot;</span>);<span class="comment">//æ’å…¥æ“ä½œ</span></span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+list.size());</span><br><span class="line">		System.out.println(list.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		list.remove(<span class="number">0</span>);</span><br><span class="line">		<span class="comment">//list.remove(&quot;yu&quot;);ç»“æœåŒä¸Š</span></span><br><span class="line">		System.out.println(<span class="string">&quot;åˆ é™¤ä¹‹åï¼š&quot;</span>+list.size());</span><br><span class="line">		System.out.println(list.toString());</span><br><span class="line">		<span class="comment">//3.éå†å…ƒç´ </span></span><br><span class="line">		<span class="comment">//3.1 ä½¿ç”¨foréå†</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;list.size();++i) &#123;</span><br><span class="line">			System.out.println(list.get(i));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2 ä½¿ç”¨å¢å¼ºfor</span></span><br><span class="line">		<span class="keyword">for</span>(Object object:list) &#123;</span><br><span class="line">			System.out.println(object);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.3 ä½¿ç”¨è¿­ä»£å™¨</span></span><br><span class="line">		Iterator iterator=list.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">			System.out.println(iterator.next());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.4ä½¿ç”¨åˆ—è¡¨è¿­ä»£å™¨ï¼ŒlistIteratorå¯ä»¥åŒå‘éå†ï¼Œæ·»åŠ ã€åˆ é™¤åŠä¿®æ”¹å…ƒç´ ã€‚</span></span><br><span class="line">		ListIterator listIterator=list.listIterator();</span><br><span class="line">		<span class="comment">//ä»å‰å¾€å</span></span><br><span class="line">		<span class="keyword">while</span> (listIterator.hasNext()) &#123;</span><br><span class="line">			System.out.println(listIterator.next());		</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//ä»åå¾€å‰ï¼ˆæ­¤æ—¶â€œéå†æŒ‡é’ˆâ€å·²ç»æŒ‡å‘æœ«å°¾ï¼‰</span></span><br><span class="line">		<span class="keyword">while</span>(listIterator.hasPrevious()) &#123;</span><br><span class="line">			System.out.println(listIterator.previous());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(list.isEmpty());</span><br><span class="line">		System.out.println(list.contains(<span class="string">&quot;tang&quot;</span>));</span><br><span class="line">		<span class="comment">//5.è·å–ä½ç½®</span></span><br><span class="line">		System.out.println(list.indexOf(<span class="string">&quot;tang&quot;</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Listå­æ¥å£çš„ä½¿ç”¨ï¼ˆäºŒï¼‰</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> * 5.è·å–ä½ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		List list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">		<span class="comment">//1.æ·»åŠ æ•°å­—æ•°æ®ï¼ˆè‡ªåŠ¨è£…ç®±ï¼‰</span></span><br><span class="line">		list.add(<span class="number">20</span>);</span><br><span class="line">		list.add(<span class="number">30</span>);</span><br><span class="line">		list.add(<span class="number">40</span>);</span><br><span class="line">		list.add(<span class="number">50</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+list.size());</span><br><span class="line">		System.out.println(list.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		list.remove(<span class="number">0</span>);</span><br><span class="line">		<span class="comment">//list.remove(20);å¾ˆæ˜æ˜¾æ•°ç»„è¶Šç•Œé”™è¯¯ï¼Œæ”¹æˆå¦‚ä¸‹</span></span><br><span class="line">		<span class="comment">//list.remove(Object(20));</span></span><br><span class="line">		<span class="comment">//list.remove(new Integer(20));</span></span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+list.size());</span><br><span class="line">		System.out.println(list.toString());</span><br><span class="line">		<span class="comment">//3-5ä¸å†æ¼”ç¤ºï¼Œä¸ä¹‹å‰ç±»ä¼¼</span></span><br><span class="line">		<span class="comment">//6.è¡¥å……æ–¹æ³•subListï¼Œè¿”å›å­é›†åˆï¼Œå«å¤´ä¸å«å°¾</span></span><br><span class="line">		List list2=list.subList(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">		System.out.println(list2.toString());	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h4 id="Listå®ç°ç±»"><a href="#Listå®ç°ç±»" class="headerlink" title="Listå®ç°ç±»"></a><strong>Listå®ç°ç±»</strong></h4><h5 id="ArrayListã€é‡ç‚¹ã€‘"><a href="#ArrayListã€é‡ç‚¹ã€‘" class="headerlink" title="ArrayListã€é‡ç‚¹ã€‘"></a><strong>ArrayListã€é‡ç‚¹ã€‘</strong></h5><ul>
<li>æ•°ç»„ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢å—ã€å¢åˆ æ…¢ï¼›</li>
<li>JDK1.2ç‰ˆæœ¬ï¼Œè¿è¡Œæ•ˆç‡å¿«ã€çº¿ç¨‹ä¸å®‰å…¨ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayListçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨ç»“æ„ï¼šæ•°ç»„ï¼›</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ï¼šæŸ¥æ‰¾éå†é€Ÿåº¦å¿«ï¼Œå¢åˆ æ…¢ã€‚</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> * 5.æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		ArrayList arrayList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å”&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		Student s2=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ä½•&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		Student s3=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ä½™&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		arrayList.add(s1);</span><br><span class="line">		arrayList.add(s2);</span><br><span class="line">		arrayList.add(s3);</span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+arrayList.size());</span><br><span class="line">		System.out.println(arrayList.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		arrayList.remove(s1);</span><br><span class="line">		<span class="comment">//arrayList.remove(new Student(&quot;å”&quot;, 21));</span></span><br><span class="line">		<span class="comment">//æ³¨ï¼šè¿™æ ·å¯ä»¥åˆ é™¤å—ï¼ˆä¸å¯ä»¥ï¼‰ï¼Ÿæ˜¾ç„¶è¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚</span></span><br><span class="line">		<span class="comment">//å‡å¦‚ä¸¤ä¸ªå¯¹è±¡å±æ€§ç›¸åŒä¾¿è®¤ä¸ºå…¶æ˜¯åŒä¸€å¯¹è±¡ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿®æ”¹ä»£ç ï¼Ÿ</span></span><br><span class="line">		<span class="comment">//3.éå†å…ƒç´ </span></span><br><span class="line">		<span class="comment">//3.1ä½¿ç”¨è¿­ä»£å™¨</span></span><br><span class="line">		Iterator iterator=arrayList.iterator();</span><br><span class="line">		<span class="keyword">while</span>(iterator.hasNext()) &#123;</span><br><span class="line">			System.out.println(iterator.next());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2ä½¿ç”¨åˆ—è¡¨è¿­ä»£å™¨</span></span><br><span class="line">		ListIterator listIterator=arrayList.listIterator();</span><br><span class="line">		<span class="comment">//ä»å‰å¾€åéå†</span></span><br><span class="line">		<span class="keyword">while</span>(listIterator.hasNext()) &#123;</span><br><span class="line">			System.out.println(listIterator.next());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//ä»åå¾€å‰éå†</span></span><br><span class="line">		<span class="keyword">while</span>(listIterator.hasPrevious()) &#123;</span><br><span class="line">			System.out.println(listIterator.previous());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(arrayList.isEmpty());</span><br><span class="line">		<span class="comment">//System.out.println(arrayList.contains(new Student(&quot;ä½•&quot;, 22)));</span></span><br><span class="line">		<span class="comment">//æ³¨ï¼šä¸ä¸Šæ–‡ç›¸åŒçš„é—®é¢˜ã€‚</span></span><br><span class="line">		<span class="comment">//5.æŸ¥æ‰¾</span></span><br><span class="line">		System.out.println(arrayList.indexOf(s1));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨</strong>ï¼šObjecté‡Œçš„equals(this==obj)ç”¨åœ°å€å’Œå½“å‰å¯¹è±¡æ¯”è¾ƒï¼Œå¦‚æœæƒ³å®ç°ä»£ç ä¸­çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨å­¦ç”Ÿç±»ä¸­é‡å†™equalsæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">	<span class="comment">//1.æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>==obj) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//2.åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">	<span class="keyword">if</span> (obj==<span class="literal">null</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//3.åˆ¤æ–­æ˜¯å¦æ˜¯Studentç±»å‹</span></span><br><span class="line">	<span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Student) &#123;</span><br><span class="line">		Student student=(Student) obj;</span><br><span class="line">		<span class="comment">//4.æ¯”è¾ƒå±æ€§</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">this</span>.name.equals(student.getName())&amp;&amp;<span class="built_in">this</span>.age==student.age) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ä¸æ»¡è¶³ï¼Œè¿”å›false</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ArrayListæºç åˆ†æ"><a href="#ArrayListæºç åˆ†æ" class="headerlink" title="ArrayListæºç åˆ†æ"></a><strong>ArrayListæºç åˆ†æ</strong></h5><ul>
<li><p>é»˜è®¤å®¹é‡å¤§å°ï¼š<code>private static final int DEFAULT_CAPACITY = 10;</code></p>
</li>
<li><p>å­˜æ”¾å…ƒç´ çš„æ•°ç»„ï¼š<code>transient Object[] elementData;</code></p>
</li>
<li><p>å®é™…å…ƒç´ ä¸ªæ•°ï¼š<code>private int size;</code></p>
</li>
<li><p>åˆ›å»ºå¯¹è±¡æ—¶è°ƒç”¨çš„æ— å‚æ„é€ å‡½æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µæºç è¯´æ˜å½“ä½ æ²¡æœ‰å‘é›†åˆä¸­æ·»åŠ ä»»ä½•å…ƒç´ æ—¶ï¼Œé›†åˆå®¹é‡ä¸º0ã€‚é‚£ä¹ˆé»˜è®¤çš„10ä¸ªå®¹é‡æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ</p>
<p>è¿™å°±å¾—çœ‹çœ‹addæ–¹æ³•çš„æºç äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡è®¾ä½ newäº†ä¸€ä¸ªæ•°ç»„ï¼Œå½“å‰å®¹é‡ä¸º0ï¼Œsizeå½“ç„¶ä¹Ÿä¸º0ã€‚è¿™æ—¶è°ƒç”¨addæ–¹æ³•è¿›å…¥åˆ°<code>ensureCapacityInternal(size + 1);</code>è¯¥æ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•ä¸­çš„å‚æ•°minCapacityä¼ å…¥çš„å€¼ä¸ºsize+1ä¹Ÿå°±æ˜¯ 1ï¼Œæ¥ç€æˆ‘ä»¬å†è¿›å…¥åˆ°<code>calculateCapacity(elementData, minCapacity)</code>é‡Œé¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculateCapacity</span><span class="params">(Object[] elementData, <span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šæ–‡è¯´è¿‡ï¼ŒelementDataå°±æ˜¯å­˜æ”¾å…ƒç´ çš„æ•°ç»„ï¼Œå½“å‰å®¹é‡ä¸º0ï¼Œifæ¡ä»¶æˆç«‹ï¼Œè¿”å›é»˜è®¤å®¹é‡<code>DEFAULT_CAPACITY</code>ä¹Ÿå°±æ˜¯10ã€‚è¿™ä¸ªå€¼ä½œä¸ºå‚æ•°åˆä¼ å…¥<code>ensureExplicitCapacity()</code>æ–¹æ³•ä¸­ï¼Œè¿›å…¥è¯¥æ–¹æ³•æŸ¥çœ‹æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><del>æˆ‘ä»¬å…ˆä¸è¦ç®¡modCountè¿™ä¸ªå˜é‡ã€‚</del></p>
<p>å› ä¸ºelementDataæ•°ç»„é•¿åº¦ä¸º0ï¼Œæ‰€ä»¥ifæ¡ä»¶æˆç«‹ï¼Œè°ƒç”¨growæ–¹æ³•ï¼Œ<strong>é‡è¦çš„éƒ¨åˆ†æ¥äº†</strong>ï¼Œæˆ‘ä»¬å†æ¬¡è¿›å…¥åˆ°growæ–¹æ³•çš„æºç ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ³•å…ˆå£°æ˜äº†ä¸€ä¸ªoldCapacityå˜é‡å°†æ•°ç»„é•¿åº¦èµ‹ç»™å®ƒï¼Œå…¶å€¼ä¸º0ï¼›åˆå£°æ˜äº†ä¸€ä¸ªnewCapacityå˜é‡å…¶å€¼ä¸º<code>oldCapacity+ä¸€ä¸ªå¢é‡</code>ï¼Œå¯ä»¥å‘ç°è¿™ä¸ªå¢é‡æ˜¯å’ŒåŸæ•°ç»„é•¿åº¦æœ‰å…³çš„é‡ï¼Œå½“ç„¶åœ¨è¿™é‡Œä¹Ÿä¸º0ã€‚ç¬¬ä¸€ä¸ªifæ¡ä»¶æ»¡è¶³ï¼ŒnewCapacityçš„å€¼ä¸º10ï¼ˆè¿™å°±æ˜¯é»˜è®¤çš„å®¹é‡ï¼Œä¸ç†è§£çš„è¯å†çœ‹çœ‹å‰é¢ï¼‰ã€‚ç¬¬äºŒä¸ªifæ¡ä»¶ä¸æˆç«‹ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨æ³¨æ„ï¼Œå› ä¸ºMAX_ARRAY_SIZEçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ARRAY_SIZE</span> <span class="operator">=</span> Integer.MAX_VALUE - <span class="number">8</span>;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå€¼å¤ªå¤§äº†ä»¥è‡³äºç¬¬äºŒä¸ªifæ¡ä»¶æ²¡æœ‰äº†è§£çš„å¿…è¦ã€‚</p>
<p>æœ€åä¸€å¥è¯å°±æ˜¯ä¸ºelementDataæ•°ç»„èµ‹äºˆäº†æ–°çš„é•¿åº¦ï¼Œ<code>Arrays.copyOf()</code>æ–¹æ³•è¿”å›çš„æ•°ç»„æ˜¯æ–°çš„æ•°ç»„å¯¹è±¡ï¼ŒåŸæ•°ç»„å¯¹è±¡ä¸ä¼šæ”¹å˜ï¼Œè¯¥æ‹·è´ä¸ä¼šå½±å“åŸæ¥çš„æ•°ç»„ã€‚<code>copyOf()</code>çš„ç¬¬äºŒä¸ªè‡ªå˜é‡æŒ‡å®šè¦å»ºç«‹çš„æ–°æ•°ç»„é•¿åº¦ï¼Œå¦‚æœæ–°æ•°ç»„çš„é•¿åº¦è¶…è¿‡åŸæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™ä¿ç•™æ•°ç»„é»˜è®¤å€¼ã€‚</p>
<p>è¿™æ—¶å€™å†å›åˆ°addçš„æ–¹æ³•ä¸­ï¼Œæ¥ç€å°±å‘ä¸‹æ‰§è¡Œ<code>elementData[size++] = e;</code>åˆ°è¿™é‡Œä¸ºæ­¢å…³äºArrayListå°±è®²è§£å¾—å·®ä¸å¤šäº†ï¼Œå½“æ•°ç»„é•¿åº¦ä¸º10çš„æ—¶å€™ä½ ä»¬å¯ä»¥è¯•ç€è¿‡ä¸€ä¸‹æºç ï¼ŒæŸ¥ä¸€ä¸‹æ¯æ¬¡çš„å¢é‡æ˜¯å¤šå°‘ï¼ˆç­”æ¡ˆæ˜¯æ¯æ¬¡æ‰©å®¹ä¸ºåŸæ¥çš„1.5å€ï¼‰ã€‚</p>
<h5 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a><strong>Vector</strong></h5><ul>
<li><p>æ•°ç»„ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢å¿«ã€å¢åˆ æ…¢ï¼›</p>
</li>
<li><p>JDK1.0ç‰ˆæœ¬ï¼Œè¿è¡Œæ•ˆç‡æ…¢ã€çº¿ç¨‹å®‰å…¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Vectorçš„æ¼”ç¤ºä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *1.æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="comment"> *2.åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment"> *3.éå†</span></span><br><span class="line"><span class="comment"> *4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Vector vector=<span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">		<span class="comment">//1.æ·»åŠ æ•°æ®</span></span><br><span class="line">		vector.add(<span class="string">&quot;tang&quot;</span>);</span><br><span class="line">		vector.add(<span class="string">&quot;he&quot;</span>);</span><br><span class="line">		vector.add(<span class="string">&quot;yu&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+vector.size());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤æ•°æ®</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * vector.remove(0); vector.remove(&quot;tang&quot;);</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//3.éå†</span></span><br><span class="line">		<span class="comment">//ä½¿ç”¨æšä¸¾å™¨</span></span><br><span class="line">		Enumeration enumeration=vector.elements();</span><br><span class="line">		<span class="keyword">while</span> (enumeration.hasMoreElements()) &#123;</span><br><span class="line">			<span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String) enumeration.nextElement();</span><br><span class="line">			System.out.println(s);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(vector.isEmpty());</span><br><span class="line">		System.out.println(vector.contains(<span class="string">&quot;he&quot;</span>));</span><br><span class="line">		<span class="comment">//5. Vectorå…¶ä»–æ–¹æ³•</span></span><br><span class="line">		<span class="comment">//firstElement()  lastElement()  ElementAt();</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h5 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a><strong>LinkedList</strong></h5><ul>
<li>é“¾è¡¨ç»“æ„å®ç°ï¼Œå¢åˆ å¿«ï¼ŒæŸ¥è¯¢æ…¢ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * LinkedListçš„ç”¨æ³•</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨ç»“æ„ï¼šåŒå‘é“¾è¡¨</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†</span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		LinkedList linkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å”&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		Student s2=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ä½•&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		Student s3=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ä½™&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		linkedList.add(s1);</span><br><span class="line">		linkedList.add(s2);</span><br><span class="line">		linkedList.add(s3);</span><br><span class="line">		linkedList.add(s3);</span><br><span class="line">		System.out.println(<span class="string">&quot;å…ƒç´ ä¸ªæ•°ï¼š&quot;</span>+linkedList.size());</span><br><span class="line">		System.out.println(linkedList.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * linkedList.remove(new Student(&quot;å”&quot;, 21));</span></span><br><span class="line"><span class="comment">		 * System.out.println(linkedList.toString());</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//3.éå†</span></span><br><span class="line">		<span class="comment">//3.1 ä½¿ç”¨for</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;linkedList.size();++i) &#123;</span><br><span class="line">			System.out.println(linkedList.get(i));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2 ä½¿ç”¨å¢å¼ºfor</span></span><br><span class="line">		<span class="keyword">for</span>(Object object:linkedList) &#123;</span><br><span class="line">			Student student=(Student) object;</span><br><span class="line">			System.out.println(student.toString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.3 ä½¿ç”¨è¿­ä»£å™¨</span></span><br><span class="line">		<span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span>linkedList.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">			<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) iterator.next();</span><br><span class="line">			System.out.println(student.toString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.4 ä½¿ç”¨åˆ—è¡¨è¿­ä»£å™¨ï¼ˆç•¥ï¼‰</span></span><br><span class="line">		<span class="comment">//4. åˆ¤æ–­</span></span><br><span class="line">		System.out.println(linkedList.contains(s1));</span><br><span class="line">		System.out.println(linkedList.isEmpty());</span><br><span class="line">		System.out.println(linkedList.indexOf(s3));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="LinkedListæºç åˆ†æ"><a href="#LinkedListæºç åˆ†æ" class="headerlink" title="LinkedListæºç åˆ†æ"></a><strong>LinkedListæºç åˆ†æ</strong></h5><p>LinkedListé¦–å…ˆæœ‰ä¸‰ä¸ªå±æ€§ï¼š</p>
<ul>
<li>é“¾è¡¨å¤§å°ï¼š<code>transient int size = 0;</code></li>
<li>ï¼ˆæŒ‡å‘ï¼‰ç¬¬ä¸€ä¸ªç»“ç‚¹/å¤´ç»“ç‚¹ï¼š<code> transient Node&lt;E&gt; first;</code></li>
<li>ï¼ˆæŒ‡å‘ï¼‰æœ€åä¸€ä¸ªç»“ç‚¹/å°¾ç»“ç‚¹ï¼š<code>transient Node&lt;E&gt; last;</code></li>
</ul>
<p>å…³äºNodeç±»å‹æˆ‘ä»¬å†è¿›å…¥åˆ°ç±»é‡Œçœ‹çœ‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆitemå­˜æ”¾çš„æ˜¯å®é™…æ•°æ®ï¼›nextæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹è€ŒprevæŒ‡å‘ä¸Šä¸€ä¸ªç»“ç‚¹ã€‚</p>
<p>Nodeå¸¦å‚æ„é€ æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å‰ä¸€ä¸ªç»“ç‚¹ã€å­˜å‚¨çš„æ•°æ®ã€åä¸€ä¸ªç»“ç‚¹ï¼Œè°ƒç”¨è¿™ä¸ªæ„é€ æ–¹æ³•æ—¶å°†å®ƒä»¬èµ‹å€¼ç»™å½“å‰å¯¹è±¡ã€‚</p>
<p>LinkedListæ˜¯å¦‚ä½•æ·»åŠ å…ƒç´ çš„å‘¢ï¼Ÿå…ˆçœ‹çœ‹addæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥åˆ°linkLastæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);</span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡è®¾åˆšå¼€å§‹newäº†ä¸€ä¸ªLinkedListå¯¹è±¡ï¼Œfirstå’Œlastå±æ€§éƒ½ä¸ºç©ºï¼Œè°ƒç”¨addè¿›å…¥åˆ°linkLastæ–¹æ³•ã€‚</p>
</li>
</ul>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªNodeå˜é‡ l å°†lastï¼ˆæ­¤æ—¶ä¸ºç©ºï¼‰èµ‹ç»™å®ƒï¼Œç„¶ånewä¸€ä¸ªnewNodeå˜é‡å­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”å®ƒçš„å‰é©±æŒ‡å‘lï¼Œåç»§æŒ‡å‘nullï¼›å†æŠŠlastæŒ‡å‘newNodeã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://pic.downk.cc/item/5f9a62a01cd1bbb86bc58487.png" alt="img"></p>
<p>å¦‚æœæ»¡è¶³ifæ¡ä»¶ï¼Œè¯´æ˜è¿™æ˜¯æ·»åŠ çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œå°†firstæŒ‡å‘newNodeï¼š</p>
<p><img src="https://pic.downk.cc/item/5f9a631c1cd1bbb86bc59ca6.png" alt="img"></p>
<p>è‡³æ­¤ï¼ŒLinkedListå¯¹è±¡çš„ç¬¬ä¸€ä¸ªæ•°æ®æ·»åŠ å®Œæ¯•ã€‚å‡è®¾éœ€è¦å†æ·»åŠ ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¥èµ°ä¸€éï¼Œè¿‡ç¨‹åŒä¸Šä¸å†èµ˜è¿°ï¼Œå›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://pic.downk.cc/item/5f9a680e1cd1bbb86bc681f6.png" alt="img"></p>
<h5 id="ArrayListå’ŒLinkedListåŒºåˆ«"><a href="#ArrayListå’ŒLinkedListåŒºåˆ«" class="headerlink" title="ArrayListå’ŒLinkedListåŒºåˆ«"></a><strong>ArrayListå’ŒLinkedListåŒºåˆ«</strong></h5><ul>
<li>ArrayListï¼šå¿…é¡»å¼€è¾Ÿè¿ç»­ç©ºé—´ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢ã€‚</li>
<li>LinkedListï¼šæ— éœ€å¼€è¾Ÿè¿ç»­ç©ºé—´ï¼ŒæŸ¥è¯¢æ…¢ï¼Œå¢åˆ å¿«ã€‚</li>
</ul>
<p><img src="https://pic.downk.cc/item/5f9a6b371cd1bbb86bc74cda.png" alt="img"></p>
<hr>
<h4 id="æ³›å‹æ¦‚è¿°"><a href="#æ³›å‹æ¦‚è¿°" class="headerlink" title="æ³›å‹æ¦‚è¿°"></a><strong>æ³›å‹æ¦‚è¿°</strong></h4><ul>
<li><p>Javaæ³›å‹æ˜¯JDK1.5ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå…¶æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼ŒæŠŠç±»å‹ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p>
</li>
<li><p>å¸¸è§å½¢å¼æœ‰æ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€‚</p>
</li>
<li><p>è¯­æ³•ï¼š</p>
<ul>
<li>&lt;T,â€¦&gt; Tç§°ä¸ºç±»å‹å ä½ç¬¦ï¼Œè¡¨ç¤ºä¸€ç§å¼•ç”¨ç±»å‹ã€‚</li>
</ul>
</li>
<li><p>å¥½å¤„ï¼š</p>
<ul>
<li>æé«˜ä»£ç çš„é‡ç”¨æ€§ã€‚</li>
<li>é˜²æ­¢ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œæé«˜ä»£ç çš„å®‰å…¨æ€§ã€‚</li>
</ul>
</li>
</ul>
<h5 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a><strong>æ³›å‹ç±»</strong></h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³›å‹ç±»</span></span><br><span class="line"><span class="comment"> * è¯­æ³•ï¼šç±»å&lt;T&gt;</span></span><br><span class="line"><span class="comment"> * Tæ˜¯ç±»å‹å ä½ç¬¦ï¼Œè¡¨ç¤ºä¸€ç§å¼•ç”¨ç±»å‹ï¼Œç¼–å†™å¤šä¸ªä½¿ç”¨é€—å·éš”å¼€</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">myGeneric</span>&lt;T&gt;&#123;</span><br><span class="line">	<span class="comment">//1.åˆ›å»ºæ³›å‹å˜é‡</span></span><br><span class="line">	<span class="comment">//ä¸èƒ½ä½¿ç”¨newæ¥åˆ›å»ºï¼Œå› ä¸ºæ³›å‹æ˜¯ä¸ç¡®å®šçš„ç±»å‹ï¼Œä¹Ÿå¯èƒ½æ‹¥æœ‰ç§å¯†çš„æ„é€ æ–¹æ³•ã€‚</span></span><br><span class="line">	T t;</span><br><span class="line">	<span class="comment">//2.æ³›å‹ä½œä¸ºæ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(T t)</span> &#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æ³›å‹ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼</span></span><br><span class="line">	<span class="keyword">public</span> T <span class="title function_">getT</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment"> * 1.æ³›å‹åªèƒ½ä½¿ç”¨å¼•ç”¨ç±»å‹</span></span><br><span class="line"><span class="comment"> * 2.ä¸åŒæ³›å‹ç±»å‹çš„å¯¹è±¡ä¸èƒ½ç›¸äº’èµ‹å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testGeneric</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">//ä½¿ç”¨æ³›å‹ç±»åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">		myGeneric&lt;String&gt; myGeneric1=<span class="keyword">new</span> <span class="title class_">myGeneric</span>&lt;String&gt;();</span><br><span class="line">		myGeneric1.t=<span class="string">&quot;tang&quot;</span>;</span><br><span class="line">		myGeneric1.show(<span class="string">&quot;he&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		myGeneric&lt;Integer&gt; myGeneric2=<span class="keyword">new</span> <span class="title class_">myGeneric</span>&lt;Integer&gt;();</span><br><span class="line">		myGeneric2.t=<span class="number">10</span>;</span><br><span class="line">		myGeneric2.show(<span class="number">20</span>);</span><br><span class="line">		Integer integer=myGeneric2.getT();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a><strong>æ³›å‹æ¥å£</strong></h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³›å‹æ¥å£</span></span><br><span class="line"><span class="comment"> * è¯­æ³•ï¼šæ¥å£å&lt;T&gt;</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ï¼šä¸èƒ½åˆ›å»ºæ³›å‹é™æ€å¸¸é‡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyInterface</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå¸¸é‡</span></span><br><span class="line">	String nameString=<span class="string">&quot;tang&quot;</span>;</span><br><span class="line">    </span><br><span class="line">	T <span class="title function_">server</span><span class="params">(T t)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°æ¥å£æ—¶ç¡®å®šæ³›å‹ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterfaceImpl</span> <span class="keyword">implements</span> <span class="title class_">MyInterface</span>&lt;String&gt;&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">server</span><span class="params">(String t)</span> &#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">		<span class="keyword">return</span> t; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line">MyInterfaceImpl myInterfaceImpl=<span class="keyword">new</span> <span class="title class_">MyInterfaceImpl</span>();</span><br><span class="line">myInterfaceImpl.server(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line"><span class="comment">//xxx</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°æ¥å£æ—¶ä¸ç¡®å®šæ³›å‹ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterfaceImpl2</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">MyInterface</span>&lt;T&gt;&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> T <span class="title function_">server</span><span class="params">(T t)</span> &#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line">MyInterfaceImpl2&lt;Integer&gt; myInterfaceImpl2=<span class="keyword">new</span> <span class="title class_">MyInterfaceImpl2</span>&lt;Integer&gt;();</span><br><span class="line">myInterfaceImpl2.server(<span class="number">2000</span>);</span><br><span class="line"><span class="comment">//2000</span></span><br></pre></td></tr></table></figure>

<h5 id="æ³›å‹æ–¹æ³•"><a href="#æ³›å‹æ–¹æ³•" class="headerlink" title="æ³›å‹æ–¹æ³•"></a><strong>æ³›å‹æ–¹æ³•</strong></h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³›å‹æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * è¯­æ³•ï¼š&lt;T&gt; è¿”å›ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyGenericMethod</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(T t)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ³›å‹æ–¹æ³•&quot;</span>+t);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line">MyGenericMethod myGenericMethod=<span class="keyword">new</span> <span class="title class_">MyGenericMethod</span>();</span><br><span class="line">myGenericMethod.show(<span class="string">&quot;tang&quot;</span>);</span><br><span class="line">myGenericMethod.show(<span class="number">200</span>);</span><br><span class="line">myGenericMethod.show(<span class="number">3.14</span>);</span><br></pre></td></tr></table></figure>

<h5 id="æ³›å‹é›†åˆ"><a href="#æ³›å‹é›†åˆ" class="headerlink" title="æ³›å‹é›†åˆ"></a><strong>æ³›å‹é›†åˆ</strong></h5><ul>
<li><p><strong>æ¦‚å¿µ</strong>ï¼šå‚æ•°åŒ–ç±»å‹ã€ç±»å‹å®‰å…¨çš„é›†åˆï¼Œå¼ºåˆ¶é›†åˆå…ƒç´ çš„ç±»å‹å¿…é¡»ä¸€è‡´ã€‚</p>
</li>
<li><p>ç‰¹ç‚¹</p>
<p>ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶å³å¯æ£€æŸ¥ï¼Œè€Œéè¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>è®¿é—®æ—¶ï¼Œä¸å¿…ç±»å‹è½¬æ¢ï¼ˆæ‹†ç®±ï¼‰ã€‚</li>
<li>ä¸åŒæ³›å‹æŒ‡å°–å¼•ç”¨ä¸èƒ½ç›¸äº’èµ‹å€¼ï¼Œæ³›å‹ä¸å­˜åœ¨å¤šæ€ã€‚</li>
</ul>
</li>
</ul>
<p>ä¹‹å‰æˆ‘ä»¬åœ¨åˆ›å»ºLinkedListç±»å‹å¯¹è±¡çš„æ—¶å€™å¹¶æ²¡æœ‰ä½¿ç”¨æ³›å‹ï¼Œä½†æ˜¯è¿›åˆ°å®ƒçš„æºç ä¸­ä¼šå‘ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">extends</span> <span class="title class_">AbstractSequentialList</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable&#123;<span class="comment">//ç•¥&#125;</span></span><br></pre></td></tr></table></figure>

<p>å®ƒæ˜¯ä¸€ä¸ªæ³›å‹ç±»ï¼Œè€Œæˆ‘ä¹‹å‰ä½¿ç”¨çš„æ—¶å€™å¹¶æ²¡æœ‰ä¼ é€’ï¼Œè¯´æ˜javaè¯­æ³•æ˜¯å…è®¸çš„ï¼Œè¿™ä¸ªæ—¶å€™ä¼ é€’çš„ç±»å‹æ˜¯Objectç±»ï¼Œè™½ç„¶å®ƒæ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œå¯ä»¥å­˜å‚¨ä»»æ„çš„ç±»å‹ï¼Œä½†æ˜¯åœ¨éå†ã€è·å–å…ƒç´ æ—¶éœ€è¦åŸæ¥çš„ç±»å‹å°±è¦è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œå‡å¦‚å¾€é“¾è¡¨é‡Œå­˜å‚¨äº†è®¸å¤šä¸åŒç±»å‹çš„æ•°æ®ï¼Œåœ¨å¼ºè½¬çš„æ—¶å€™å°±è¦åˆ¤æ–­æ¯ä¸€ä¸ªåŸæ¥çš„ç±»å‹ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å‡ºç°é”™è¯¯ã€‚</p>
<h4 id="Seté›†åˆæ¦‚è¿°"><a href="#Seté›†åˆæ¦‚è¿°" class="headerlink" title="Seté›†åˆæ¦‚è¿°"></a><strong>Seté›†åˆæ¦‚è¿°</strong></h4><h5 id="Setå­æ¥å£"><a href="#Setå­æ¥å£" class="headerlink" title="Setå­æ¥å£"></a><strong>Setå­æ¥å£</strong></h5><ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ— åºã€æ— ä¸‹æ ‡ã€å…ƒç´ ä¸å¯é‡å¤ã€‚</li>
<li><strong>æ–¹æ³•</strong>ï¼šå…¨éƒ¨ç»§æ‰¿è‡ªCollectionä¸­çš„æ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•Setæ¥å£çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ï¼š1.æ— åºï¼Œæ²¡æœ‰ä¸‹æ ‡ï¼›2.é‡å¤</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment"> * 3.éå†ã€é‡ç‚¹ã€‘</span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Set&lt;String&gt; set=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;();</span><br><span class="line">		<span class="comment">//1.æ·»åŠ æ•°æ®</span></span><br><span class="line">		set.add(<span class="string">&quot;tang&quot;</span>);</span><br><span class="line">		set.add(<span class="string">&quot;he&quot;</span>);</span><br><span class="line">		set.add(<span class="string">&quot;yu&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;æ•°æ®ä¸ªæ•°ï¼š&quot;</span>+set.size());</span><br><span class="line">		System.out.println(set.toString());<span class="comment">//æ— åºè¾“å‡º</span></span><br><span class="line">		<span class="comment">//2.åˆ é™¤æ•°æ®</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * set.remove(&quot;tang&quot;); System.out.println(set.toString());</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//3.éå†ã€é‡ç‚¹ã€‘</span></span><br><span class="line">		<span class="comment">//3.1 ä½¿ç”¨å¢å¼ºfor</span></span><br><span class="line">		<span class="keyword">for</span> (String string : set) &#123;</span><br><span class="line">			System.out.println(string);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2 ä½¿ç”¨è¿­ä»£å™¨</span></span><br><span class="line">		Iterator&lt;String&gt; iterator=set.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">			System.out.println(iterator.next());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(set.contains(<span class="string">&quot;tang&quot;</span>));</span><br><span class="line">		System.out.println(set.isEmpty());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Setå®ç°ç±»"><a href="#Setå®ç°ç±»" class="headerlink" title="Setå®ç°ç±»"></a><strong>Setå®ç°ç±»</strong></h4><h5 id="HashSetã€é‡ç‚¹ã€‘"><a href="#HashSetã€é‡ç‚¹ã€‘" class="headerlink" title="HashSetã€é‡ç‚¹ã€‘"></a><strong>HashSetã€é‡ç‚¹ã€‘</strong></h5><ul>
<li>åŸºäºHashCodeè®¡ç®—å…ƒç´ å­˜æ”¾ä½ç½®ã€‚</li>
<li>å½“å­˜å…¥å…ƒç´ çš„å“ˆå¸Œç ç›¸åŒæ—¶ï¼Œä¼šè°ƒç”¨equalsè¿›è¡Œç¡®è®¤ï¼Œå¦‚ç»“æœä¸ºtrueï¼Œåˆ™æ‹’ç»åè€…å­˜å…¥ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äººç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name,<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Peerson [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashSeté›†åˆçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨ç»“æ„ï¼šå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰</span></span><br><span class="line"><span class="comment"> * 1.æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 2.åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment"> * 3.éå†</span></span><br><span class="line"><span class="comment"> * 4.åˆ¤æ–­</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		HashSet&lt;Person&gt; hashSet=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">		Person p1=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tang&quot;</span>,<span class="number">21</span>);</span><br><span class="line">		Person p2=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;he&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		Person p3=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		hashSet.add(p1);</span><br><span class="line">		hashSet.add(p2);</span><br><span class="line">		hashSet.add(p3);</span><br><span class="line">        <span class="comment">//é‡å¤ï¼Œæ·»åŠ å¤±è´¥</span></span><br><span class="line">        hashSet.add(p3);</span><br><span class="line">        <span class="comment">//ç›´æ¥newä¸€ä¸ªç›¸åŒå±æ€§çš„å¯¹è±¡ï¼Œä¾ç„¶ä¼šè¢«æ·»åŠ ï¼Œä¸éš¾ç†è§£ã€‚</span></span><br><span class="line">        <span class="comment">//å‡å¦‚ç›¸åŒå±æ€§ä¾¿è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ€ä¹ˆä¿®æ”¹ï¼Ÿ</span></span><br><span class="line">        hashSet.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">21</span>));</span><br><span class="line">		System.out.println(hashSet.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		hashSet.remove(p2);</span><br><span class="line">		<span class="comment">//3.éå†</span></span><br><span class="line">		<span class="comment">//3.1 å¢å¼ºfor</span></span><br><span class="line">		<span class="keyword">for</span> (Person person : hashSet) &#123;</span><br><span class="line">			System.out.println(person);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2 è¿­ä»£å™¨</span></span><br><span class="line">		Iterator&lt;Person&gt; iterator=hashSet.iterator();</span><br><span class="line">		<span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">			System.out.println(iterator.next());		</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(hashSet.isEmpty());</span><br><span class="line">        <span class="comment">//ç›´æ¥newä¸€ä¸ªç›¸åŒå±æ€§çš„å¯¹è±¡ç»“æœè¾“å‡ºæ˜¯falseï¼Œä¸éš¾ç†è§£ã€‚</span></span><br><span class="line">        <span class="comment">//æ³¨ï¼šå‡å¦‚ç›¸åŒå±æ€§ä¾¿è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ</span></span><br><span class="line">		System.out.println(hashSet.contains(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tang&quot;</span>, <span class="number">21</span>)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨</strong>ï¼šhashSetå­˜å‚¨è¿‡ç¨‹ï¼š</p>
<ol>
<li>æ ¹æ®hashCodeè®¡ç®—ä¿å­˜çš„ä½ç½®ï¼Œå¦‚æœä½ç½®ä¸ºç©ºï¼Œåˆ™ç›´æ¥ä¿å­˜ï¼Œå¦åˆ™æ‰§è¡Œç¬¬äºŒæ­¥ã€‚</li>
<li>æ‰§è¡Œequalsæ–¹æ³•ï¼Œå¦‚æœæ–¹æ³•è¿”å›trueï¼Œåˆ™è®¤ä¸ºæ˜¯é‡å¤ï¼Œæ‹’ç»å­˜å‚¨ï¼Œå¦åˆ™å½¢æˆé“¾è¡¨ã€‚</li>
</ol>
<p>å­˜å‚¨è¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯é‡å¤ä¾æ®ï¼Œè¦å®ç°â€œæ³¨â€é‡Œçš„é—®é¢˜ï¼Œå¯ä»¥é‡å†™hashCodeå’Œequalsä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    result = prime * result + age;</span><br><span class="line">    result = prime * result + ((name == <span class="literal">null</span>) ? <span class="number">0</span> : name.hashCode());</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">other</span> <span class="operator">=</span> (Person) obj;</span><br><span class="line">    <span class="keyword">if</span> (age != other.age)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (name == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (other.name != <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>hashCodeæ–¹æ³•é‡Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨31è¿™ä¸ªæ•°å­—å¤§æ¦‚æœ‰ä¸¤ä¸ªåŸå› ï¼š</p>
<ol>
<li>31æ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œè¿™æ ·çš„æ•°å­—åœ¨è®¡ç®—æ—¶å¯ä»¥å°½é‡å‡å°‘æ•£åˆ—å†²çªã€‚</li>
<li>å¯ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸º31*i=(i&lt;&lt;5)-iï¼Œ31ä¹˜ä»¥ä¸€ä¸ªæ•°å¯ä»¥è½¬æ¢æˆç§»ä½æ“ä½œï¼Œè¿™æ ·èƒ½å¿«ä¸€ç‚¹ï¼›ä½†æ˜¯ä¹Ÿæœ‰ç½‘ä¸Šä¸€äº›äººå¯¹è¿™ä¸¤ç‚¹æå‡ºè´¨ç–‘ã€‚</li>
</ol>
<hr>
<h5 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a><strong>TreeSet</strong></h5><ul>
<li>åŸºäºæ’åºé¡ºåºå®ç°ä¸é‡å¤ã€‚</li>
<li>å®ç°äº†SortedSetæ¥å£ï¼Œå¯¹é›†åˆå…ƒç´ è‡ªåŠ¨æ’åºã€‚</li>
<li>å…ƒç´ å¯¹è±¡çš„ç±»å‹å¿…é¡»å®ç°Comparableæ¥å£ï¼ŒæŒ‡å®šæ’åºè§„åˆ™ã€‚</li>
<li>é€šè¿‡CompareToæ–¹æ³•ç¡®å®šæ˜¯å¦ä¸ºé‡å¤å…ƒç´ ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨TreeSetä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨ç»“æ„ï¼šçº¢é»‘æ ‘</span></span><br><span class="line"><span class="comment"> * è¦æ±‚ï¼šå…ƒç´ ç±»å¿…é¡»å®ç°Comparableæ¥å£ï¼ŒcompareToæ–¹æ³•è¿”å›0ï¼Œè®¤ä¸ºæ˜¯é‡å¤å…ƒç´  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		TreeSet&lt;Person&gt; persons=<span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;Person&gt;();</span><br><span class="line">		Person p1=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tang&quot;</span>,<span class="number">21</span>);</span><br><span class="line">		Person p2=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;he&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		Person p3=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		persons.add(p1);</span><br><span class="line">		persons.add(p2);</span><br><span class="line">		persons.add(p3);</span><br><span class="line">		<span class="comment">//æ³¨ï¼šç›´æ¥æ·»åŠ ä¼šæŠ¥ç±»å‹è½¬æ¢é”™è¯¯ï¼Œéœ€è¦å®ç°Comparableæ¥å£</span></span><br><span class="line">		System.out.println(persons.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		persons.remove(p1);</span><br><span class="line">		persons.remove(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;he&quot;</span>, <span class="number">22</span>));</span><br><span class="line">		System.out.println(persons.toString());</span><br><span class="line">		<span class="comment">//3.éå†ï¼ˆç•¥ï¼‰</span></span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(persons.contains(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">21</span>)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹Comparableæ¥å£çš„æºç ï¼Œå‘ç°åªæœ‰ä¸€ä¸ªcompareToæŠ½è±¡æ–¹æ³•ï¼Œåœ¨äººç±»ä¸­å®ç°å®ƒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Person&gt;&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="comment">//1.å…ˆæŒ‰å§“åæ¯”</span></span><br><span class="line">	<span class="comment">//2.å†æŒ‰å¹´é¾„æ¯”</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Person o)</span> &#123;</span><br><span class="line">		<span class="type">int</span> n1=<span class="built_in">this</span>.getName().compareTo(o.getName());</span><br><span class="line">		<span class="type">int</span> n2=<span class="built_in">this</span>.age-o.getAge();</span><br><span class="line">		<span class="keyword">return</span> n1==<span class="number">0</span>?n2:n1;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤äº†å®ç°Comparableæ¥å£é‡Œçš„æ¯”è¾ƒæ–¹æ³•ï¼ŒTreeSetä¹Ÿæä¾›äº†ä¸€ä¸ªå¸¦æ¯”è¾ƒå™¨Comparatorçš„æ„é€ æ–¹æ³•ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¥å®ç°å®ƒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TreeSetçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * Comparatorï¼šå®ç°å®šåˆ¶æ¯”è¾ƒï¼ˆæ¯”è¾ƒå™¨ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		TreeSet&lt;Person&gt; persons=<span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;Person&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Person&gt;() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Person o1, Person o2)</span> &#123;</span><br><span class="line">				<span class="comment">// å…ˆæŒ‰å¹´é¾„æ¯”è¾ƒ</span></span><br><span class="line">				<span class="comment">// å†æŒ‰å§“åæ¯”è¾ƒ</span></span><br><span class="line">				<span class="type">int</span> n1=o1.getAge()-o2.getAge();</span><br><span class="line">				<span class="type">int</span> n2=o1.getName().compareTo(o2.getName());</span><br><span class="line">				<span class="keyword">return</span> n1==<span class="number">0</span>?n2:n1;</span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;);</span><br><span class="line">		Person p1=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tang&quot;</span>,<span class="number">21</span>);</span><br><span class="line">		Person p2=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;he&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		Person p3=<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		persons.add(p1);</span><br><span class="line">		persons.add(p2);</span><br><span class="line">		persons.add(p3);</span><br><span class="line">		System.out.println(persons.toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åšä¸€ä¸ªå°æ¡ˆä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¦æ±‚ï¼šä½¿ç”¨TreeSeté›†åˆå®ç°å­—ç¬¦ä¸²æŒ‰ç…§é•¿åº¦è¿›è¡Œæ’åº</span></span><br><span class="line"><span class="comment"> * helloworld tangrui hechengyang wangzixu yuguoming</span></span><br><span class="line"><span class="comment"> * Comparatoræ¥å£å®ç°å®šåˆ¶æ¯”è¾ƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		TreeSet&lt;String&gt; treeSet=<span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;String&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="comment">//å…ˆæ¯”è¾ƒå­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">			<span class="comment">//å†æ¯”è¾ƒå­—ç¬¦ä¸²</span></span><br><span class="line">			<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> &#123;</span><br><span class="line">				<span class="type">int</span> n1=o1.length()-o2.length();</span><br><span class="line">				<span class="type">int</span> n2=o1.compareTo(o2);</span><br><span class="line">				<span class="keyword">return</span> n1==<span class="number">0</span>?n2:n1;</span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;);</span><br><span class="line">		treeSet.add(<span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">		treeSet.add(<span class="string">&quot;tangrui&quot;</span>);</span><br><span class="line">		treeSet.add(<span class="string">&quot;hechenyang&quot;</span>);</span><br><span class="line">		treeSet.add(<span class="string">&quot;yuguoming&quot;</span>);</span><br><span class="line">		treeSet.add(<span class="string">&quot;wangzixu&quot;</span>);</span><br><span class="line">		System.out.println(treeSet.toString());</span><br><span class="line">        <span class="comment">//è¾“å‡º[tangrui, wangzixu, yuguoming, hechenyang, helloworld]</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Mapä½“ç³»é›†åˆ</strong></p>
<ul>
<li><ol>
<li><p>Mapæ¥å£çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>ç”¨äºå­˜å‚¨ä»»æ„é”®å€¼å¯¹(Key-Value)ã€‚</li>
<li>é”®ï¼šæ— åºã€æ— ä¸‹æ ‡ã€ä¸å…è®¸é‡å¤ï¼ˆå”¯ä¸€ï¼‰ã€‚</li>
<li>å€¼ï¼šæ— åºã€æ— ä¸‹æ ‡ã€å…è®¸é‡å¤ã€‚</li>
</ol>
<p><img src="https://pic.downk.cc/item/5f9bbd991cd1bbb86b208d82.png" alt="img"></p>
</li>
</ol>
</li>
</ul>
<h2 id="Mapé›†åˆæ¦‚è¿°"><a href="#Mapé›†åˆæ¦‚è¿°" class="headerlink" title="Mapé›†åˆæ¦‚è¿°"></a><strong>Mapé›†åˆæ¦‚è¿°</strong></h2><ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå­˜å‚¨ä¸€å¯¹æ•°æ®ï¼ˆKey-Valueï¼‰ï¼Œæ— åºã€æ— ä¸‹æ ‡ï¼Œé”®ä¸å¯é‡å¤ã€‚</li>
<li><strong>æ–¹æ³•</strong>ï¼š<ul>
<li><code>V put(K key,V value)</code>//å°†å¯¹è±¡å­˜å…¥åˆ°é›†åˆä¸­ï¼Œå…³è”é”®å€¼ã€‚keyé‡å¤åˆ™è¦†ç›–åŸå€¼ã€‚</li>
</ul>
</li>
<li><code>Object get(Object key)</code>//æ ¹æ®é”®è·å–ç›¸åº”çš„å€¼ã€‚<ul>
<li><code>Set&lt;K&gt;</code>//è¿”å›æ‰€æœ‰çš„key</li>
<li><code>Collection&lt;V&gt; values()</code>//è¿”å›åŒ…å«æ‰€æœ‰å€¼çš„Collectioné›†åˆã€‚</li>
<li><code>Set&lt;Map.Entry&lt;K,V&gt;&gt;</code>//é”®å€¼åŒ¹é…çš„seté›†åˆ</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mapæ¥å£çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * ç‰¹ç‚¹ï¼š1.å­˜å‚¨é”®å€¼å¯¹ 2.é”®ä¸èƒ½é‡å¤ï¼Œå€¼å¯ä»¥é‡å¤ 3.æ— åº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		Map&lt;String,Integer&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Integer&gt;();</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		map.put(<span class="string">&quot;tang&quot;</span>, <span class="number">21</span>);</span><br><span class="line">		map.put(<span class="string">&quot;he&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		map.put(<span class="string">&quot;fan&quot;</span>, <span class="number">23</span>);</span><br><span class="line">		System.out.println(map.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		map.remove(<span class="string">&quot;he&quot;</span>);</span><br><span class="line">		System.out.println(map.toString());</span><br><span class="line">		<span class="comment">//3.éå†</span></span><br><span class="line">		<span class="comment">//3.1 ä½¿ç”¨keySet();</span></span><br><span class="line">		<span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">			System.out.println(key+<span class="string">&quot; &quot;</span>+map.get(key));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2 ä½¿ç”¨entrySet();æ•ˆç‡è¾ƒé«˜</span></span><br><span class="line">		<span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">			System.out.println(entry.getKey()+<span class="string">&quot; &quot;</span>+entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mapé›†åˆçš„å®ç°ç±»"><a href="#Mapé›†åˆçš„å®ç°ç±»" class="headerlink" title="Mapé›†åˆçš„å®ç°ç±»"></a><strong>Mapé›†åˆçš„å®ç°ç±»</strong></h3><h4 id="HashMapã€é‡ç‚¹ã€‘"><a href="#HashMapã€é‡ç‚¹ã€‘" class="headerlink" title="HashMapã€é‡ç‚¹ã€‘"></a><strong>HashMapã€é‡ç‚¹ã€‘</strong></h4><ul>
<li>JDK1.2ç‰ˆæœ¬ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œè¿è¡Œæ•ˆç‡å¿«ï¼›å…è®¸ç”¨nullä½œä¸ºkeyæˆ–æ˜¯valueã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">  	<span class="keyword">private</span> String name;</span><br><span class="line">  	<span class="keyword">private</span> <span class="type">int</span> id;	</span><br><span class="line">  	<span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> id)</span> &#123;</span><br><span class="line">  		<span class="built_in">super</span>();</span><br><span class="line">  		<span class="built_in">this</span>.name = name;</span><br><span class="line">  		<span class="built_in">this</span>.id = id;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">  		<span class="keyword">return</span> name;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">  		<span class="built_in">this</span>.name = name;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">  		<span class="keyword">return</span> id;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">  		<span class="built_in">this</span>.id = id;</span><br><span class="line">  	&#125;</span><br><span class="line">  	<span class="meta">@Override</span></span><br><span class="line">  	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">  		<span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + id + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * HashMapçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment">   * å­˜å‚¨ç»“æ„ï¼šå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  		HashMap&lt;Student, String&gt; hashMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Student, String&gt;();</span><br><span class="line">  		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;tang&quot;</span>, <span class="number">36</span>);</span><br><span class="line">  		Student s2=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">101</span>);</span><br><span class="line">  		Student s3=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;he&quot;</span>, <span class="number">10</span>);</span><br><span class="line">  		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">  		hashMap.put(s1, <span class="string">&quot;æˆéƒ½&quot;</span>);</span><br><span class="line">  		hashMap.put(s2, <span class="string">&quot;æ­å·&quot;</span>);</span><br><span class="line">  		hashMap.put(s3, <span class="string">&quot;éƒ‘å·&quot;</span>);</span><br><span class="line">  		<span class="comment">//æ·»åŠ å¤±è´¥ï¼Œä½†ä¼šæ›´æ–°å€¼</span></span><br><span class="line">  		hashMap.put(s3,<span class="string">&quot;ä¸Šæµ·&quot;</span>);</span><br><span class="line">  		<span class="comment">//æ·»åŠ æˆåŠŸï¼Œä¸è¿‡ä¸¤ä¸ªå±æ€§ä¸€æ¨¡ä¸€æ ·ï¼›</span></span><br><span class="line">  		<span class="comment">//æ³¨ï¼šå‡å¦‚ç›¸åŒå±æ€§ä¾¿è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ€ä¹ˆä¿®æ”¹ï¼Ÿ</span></span><br><span class="line">  		hashMap.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;he&quot;</span>, <span class="number">10</span>),<span class="string">&quot;ä¸Šæµ·&quot;</span>);</span><br><span class="line">  		System.out.println(hashMap.toString());</span><br><span class="line">  		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">  		hashMap.remove(s3);</span><br><span class="line">  		System.out.println(hashMap.toString());</span><br><span class="line">  		<span class="comment">//3.éå†</span></span><br><span class="line">  		<span class="comment">//3.1 ä½¿ç”¨keySet()éå†</span></span><br><span class="line">  		<span class="keyword">for</span> (Student key : hashMap.keySet()) &#123;</span><br><span class="line">  			System.out.println(key+<span class="string">&quot; &quot;</span>+hashMap.get(key));</span><br><span class="line">  		&#125;</span><br><span class="line">  		<span class="comment">//3.2 ä½¿ç”¨entrySet()éå†</span></span><br><span class="line">  		<span class="keyword">for</span> (Entry&lt;Student, String&gt; entry : hashMap.entrySet()) &#123;</span><br><span class="line">  			System.out.println(entry.getKey()+<span class="string">&quot; &quot;</span>+entry.getValue());</span><br><span class="line">  		&#125;</span><br><span class="line">  		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">  		<span class="comment">//æ³¨ï¼šåŒä¸Š</span></span><br><span class="line">  		System.out.println(hashMap.containsKey(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;he&quot;</span>, <span class="number">10</span>)));</span><br><span class="line">  		System.out.println(hashMap.containsValue(<span class="string">&quot;æˆéƒ½&quot;</span>));</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨ï¼šå’Œä¹‹å‰è¯´è¿‡çš„HashSetç±»ä¼¼ï¼Œé‡å¤ä¾æ®æ˜¯hashCodeå’Œequalsæ–¹æ³•ï¼Œé‡å†™å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">      result = prime * result + id;</span><br><span class="line">      result = prime * result + ((name == <span class="literal">null</span>) ? <span class="number">0</span> : name.hashCode());</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) obj;</span><br><span class="line">      <span class="keyword">if</span> (id != other.id)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (name == <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (other.name != <span class="literal">null</span>)</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="ashMapæºç åˆ†æ"><a href="#ashMapæºç åˆ†æ" class="headerlink" title="ashMapæºç åˆ†æ"></a><strong>ashMapæºç åˆ†æ</strong></h4></li>
<li><p>é»˜è®¤åˆå§‹åŒ–å®¹é‡ï¼š<code>static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</code></p>
<ul>
<li>æ•°ç»„æœ€å¤§å®¹é‡ï¼š<code>static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</code></li>
</ul>
</li>
<li><p>é»˜è®¤åŠ è½½å› å­ï¼š<code>static final float DEFAULT_LOAD_FACTOR = 0.75f;</code></p>
</li>
<li><p>é“¾è¡¨è°ƒæ•´ä¸ºçº¢é»‘æ ‘çš„é“¾è¡¨é•¿åº¦é˜ˆå€¼ï¼ˆJDK1.8ï¼‰ï¼š<code>static final int TREEIFY_THRESHOLD = 8;</code></p>
</li>
<li><p>çº¢é»‘æ ‘è°ƒæ•´ä¸ºé“¾è¡¨çš„é“¾è¡¨é•¿åº¦é˜ˆå€¼ï¼ˆJDK1.8ï¼‰ï¼š<code>static final int UNTREEIFY_THRESHOLD = 6;</code></p>
</li>
<li><p>é“¾è¡¨è°ƒæ•´ä¸ºçº¢é»‘æ ‘çš„æ•°ç»„æœ€å°é˜ˆå€¼ï¼ˆJDK1.8ï¼‰ï¼š<code>static final int MIN_TREEIFY_CAPACITY = 64;</code></p>
</li>
<li><p>HashMapå­˜å‚¨çš„æ•°ç»„ï¼š<code>transient Node&lt;K,V&gt;[] table;</code></p>
</li>
<li><p>HashMapå­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ï¼š<code>transient int size;</code></p>
<blockquote>
<ul>
<li>é»˜è®¤åŠ è½½å› å­æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li>å°±æ˜¯åˆ¤æ–­æ•°ç»„æ˜¯å¦æ‰©å®¹çš„ä¸€ä¸ªå› å­ã€‚å‡å¦‚æ•°ç»„å®¹é‡ä¸º100ï¼Œå¦‚æœHashMapçš„å­˜å‚¨å…ƒç´ ä¸ªæ•°è¶…è¿‡äº†100*0.75=75ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œæ‰©å®¹ã€‚</li>
</ul>
</li>
<li>é“¾è¡¨è°ƒæ•´ä¸ºçº¢é»‘æ ‘çš„é“¾è¡¨é•¿åº¦é˜ˆå€¼æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li>å‡è®¾åœ¨æ•°ç»„ä¸­ä¸‹æ ‡ä¸º3çš„ä½ç½®å·²ç»å­˜å‚¨äº†æ•°æ®ï¼Œå½“æ–°å¢æ•°æ®æ—¶é€šè¿‡å“ˆå¸Œç å¾—åˆ°çš„å­˜å‚¨ä½ç½®åˆæ˜¯3ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨è¯¥ä½ç½®å½¢æˆä¸€ä¸ªé“¾è¡¨ï¼Œå½“é“¾è¡¨è¿‡é•¿æ—¶å°±ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œè¿™ä¸ªé˜ˆå€¼å°±æ˜¯é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘çš„æœ€çŸ­é“¾è¡¨é•¿åº¦ï¼›</li>
</ul>
</li>
<li>çº¢é»‘æ ‘è°ƒæ•´ä¸ºé“¾è¡¨çš„é“¾è¡¨é•¿åº¦é˜ˆå€¼æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li>å½“çº¢é»‘æ ‘çš„å…ƒç´ ä¸ªæ•°å°äºè¯¥é˜ˆå€¼æ—¶å°±ä¼šè½¬æ¢æˆé“¾è¡¨ã€‚</li>
</ul>
</li>
<li>é“¾è¡¨è°ƒæ•´ä¸ºçº¢é»‘æ ‘çš„æ•°ç»„æœ€å°é˜ˆå€¼æ˜¯ä»€ä¹ˆï¼Ÿ<ul>
<li>å¹¶ä¸æ˜¯åªè¦é“¾è¡¨é•¿åº¦å¤§äº8å°±å¯ä»¥è½¬æ¢æˆçº¢é»‘æ ‘ï¼Œåœ¨å‰è€…æ¡ä»¶æˆç«‹çš„æƒ…å†µä¸‹ï¼Œæ•°ç»„çš„å®¹é‡å¿…é¡»å¤§äºç­‰äº64æ‰ä¼šè¿›è¡Œè½¬æ¢ã€‚</li>
</ul>
</li>
</ul>
</blockquote>
<p>HashMapçš„æ•°ç»„tableå­˜å‚¨çš„å°±æ˜¯ä¸€ä¸ªä¸ªçš„Node&lt;K,V&gt;ç±»å‹ï¼Œå¾ˆæ¸…æ™°åœ°çœ‹åˆ°æœ‰ä¸€å¯¹é”®å€¼ï¼Œè¿˜æœ‰ä¸€ä¸ªæŒ‡å‘nextçš„æŒ‡é’ˆï¼ˆä»¥ä¸‹åªæˆªå–äº†éƒ¨åˆ†æºç ï¼‰ï¼š</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line">      <span class="keyword">final</span> K key;</span><br><span class="line">      V value;</span><br><span class="line">      Node&lt;K,V&gt; next;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ä¹‹å‰çš„ä»£ç ä¸­åœ¨newå¯¹è±¡æ—¶è°ƒç”¨çš„æ˜¯HashMapçš„æ— å‚æ„é€ æ–¹æ³•ï¼Œè¿›å…¥åˆ°è¯¥æ„é€ æ–¹æ³•çš„æºç æŸ¥çœ‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>å‘ç°æ²¡ä»€ä¹ˆå†…å®¹ï¼Œåªæ˜¯èµ‹å€¼äº†ä¸€ä¸ªé»˜è®¤åŠ è½½å› å­ï¼›è€Œåœ¨ä¸Šæ–‡æˆ‘ä»¬è§‚å¯Ÿåˆ°æºç ä¸­tableå’Œsizeéƒ½æ²¡æœ‰èµ‹äºˆåˆå§‹å€¼ï¼Œè¯´æ˜åˆšåˆ›å»ºçš„HashMapå¯¹è±¡æ²¡æœ‰åˆ†é…å®¹é‡ï¼Œå¹¶ä¸æ‹¥æœ‰é»˜è®¤çš„16ä¸ªç©ºé—´å¤§å°ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†èŠ‚çº¦ç©ºé—´ï¼Œæ­¤æ—¶tableä¸ºnullï¼Œsizeä¸º0ã€‚</p>
<p>å½“æˆ‘ä»¬å¾€å¯¹è±¡é‡Œæ·»åŠ å…ƒç´ æ—¶è°ƒç”¨putæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>putæ–¹æ³•æŠŠkeyå’Œvalueä¼ ç»™äº†putValï¼ŒåŒæ—¶è¿˜ä¼ å…¥äº†ä¸€ä¸ªhash(Key)æ‰€è¿”å›çš„å€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªäº§ç”Ÿå“ˆå¸Œå€¼çš„æ–¹æ³•ï¼Œå†è¿›å…¥åˆ°putValæ–¹æ³•ï¼ˆéƒ¨åˆ†æºç ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">                    <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">      <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">          n = (tab = resize()).length;</span><br><span class="line">      <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">          tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">      <span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="comment">//ç•¥</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªtabæ•°ç»„å’Œä¸€ä¸ªNodeå˜é‡pï¼Œç¬¬ä¸€ä¸ªifå®é™…æ˜¯åˆ¤æ–­tableæ˜¯å¦ä¸ºç©ºï¼Œè€Œæˆ‘ä»¬ç°åœ¨åªå…³æ³¨åˆšåˆ›å»ºHashMapå¯¹è±¡æ—¶çš„çŠ¶æ€ï¼Œæ­¤æ—¶tabå’Œtableéƒ½ä¸ºç©ºï¼Œæ»¡è¶³æ¡ä»¶ï¼Œæ‰§è¡Œå†…éƒ¨ä»£ç ï¼Œè¿™æ¡ä»£ç å…¶å®å°±æ˜¯æŠŠresize()æ‰€è¿”å›çš„ç»“æœèµ‹ç»™tabï¼Œnå°±æ˜¯tabçš„é•¿åº¦ï¼Œresizeé¡¾åæ€ä¹‰å°±æ˜¯é‡æ–°è°ƒæ•´å¤§å°ã€‚æŸ¥çœ‹resize()æºç ï¼ˆéƒ¨åˆ†ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">      Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">      <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">      <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;</span><br><span class="line">      <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>);</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>);</span><br><span class="line">      <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">          newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">          newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">      &#125; </span><br><span class="line">      <span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class="line">      Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">      table = newTab;</span><br><span class="line">      <span class="keyword">return</span> newTab;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•é¦–å…ˆæŠŠtableåŠå…¶é•¿åº¦èµ‹å€¼ç»™oldTabå’ŒoldCapï¼›thresholdæ˜¯é˜ˆå€¼çš„æ„æ€ï¼Œæ­¤æ—¶ä¸º0ï¼Œæ‰€ä»¥å‰ä¸¤ä¸ªifå…ˆä¸ç®¡ï¼Œæœ€åelseé‡ŒnewCapçš„å€¼ä¸ºé»˜è®¤åˆå§‹åŒ–å®¹é‡16ï¼›å¾€ä¸‹åˆ›å»ºäº†ä¸€ä¸ªnewCapå¤§å°çš„æ•°ç»„å¹¶å°†å…¶èµ‹ç»™äº†tableï¼Œåˆšåˆ›å»ºçš„HashMapå¯¹è±¡å°±åœ¨è¿™é‡Œè·å¾—äº†åˆå§‹å®¹é‡ã€‚ç„¶åæˆ‘ä»¬å†å›åˆ°putValæ–¹æ³•ï¼Œç¬¬äºŒä¸ªifå°±æ˜¯æ ¹æ®å“ˆå¸Œç å¾—åˆ°çš„tabä¸­çš„ä¸€ä¸ªä½ç½®æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºä¾¿ç›´æ¥æ·»åŠ å…ƒç´ ï¼Œæ­¤æ—¶æ•°ç»„ä¸­æ— å…ƒç´ æ‰€ä»¥ç›´æ¥æ·»åŠ ã€‚è‡³æ­¤HashMapå¯¹è±¡å°±å®Œæˆäº†ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ·»åŠ ã€‚å½“æ·»åŠ çš„å…ƒç´ è¶…è¿‡16*0.75=12æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,<span class="type">boolean</span> evict)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">          resize();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>æ‰©å®¹çš„ä»£ç å¦‚ä¸‹ï¼ˆéƒ¨åˆ†ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">      <span class="type">int</span> newCap;</span><br><span class="line">      <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;<span class="comment">//ç•¥&#125;</span></span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                   oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ ¸å¿ƒéƒ¨åˆ†æ˜¯else ifé‡Œçš„ç§»ä½æ“ä½œï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡æ‰©å®¹éƒ½æ˜¯åŸæ¥å¤§å°çš„ä¸¤å€</strong>ã€‚</li>
<li>*æ³¨**ï¼šé¢å¤–è¯´æ˜çš„ä¸€ç‚¹æ˜¯åœ¨JDK1.8ä»¥å‰é“¾è¡¨æ˜¯å¤´æ’å…¥ï¼ŒJDK1.8ä»¥åé“¾è¡¨æ˜¯å°¾æ’å…¥ã€‚</li>
</ul>
<h4 id="HashSetæºç åˆ†æ"><a href="#HashSetæºç åˆ†æ" class="headerlink" title="HashSetæºç åˆ†æ"></a><strong>HashSetæºç åˆ†æ</strong></h4><p>äº†è§£å®ŒHashMapä¹‹åï¼Œå†å›è¿‡å¤´æ¥çœ‹ä¹‹å‰çš„HashSetæºç ï¼Œä¸ºä»€ä¹ˆæ”¾åœ¨åé¢å†™ä½ ä»¬çœ‹ä¸€ä¸‹æºç å°±çŸ¥é“äº†ï¼ˆéƒ¨åˆ†ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSet</span>&lt;E&gt;</span><br><span class="line">      <span class="keyword">extends</span> <span class="title class_">AbstractSet</span>&lt;E&gt;</span><br><span class="line">      <span class="keyword">implements</span> <span class="title class_">Set</span>&lt;E&gt;, Cloneable, java.io.Serializable</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">PRESENT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">()</span> &#123;</span><br><span class="line">          map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹è§HashSetçš„å­˜å‚¨ç»“æ„å°±æ˜¯HashMapï¼Œé‚£å®ƒçš„å­˜å‚¨æ–¹å¼æ˜¯æ€æ ·çš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸€ä¸‹addæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> map.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜äº†åœ°å‘ç°å®ƒçš„addæ–¹æ³•è°ƒç”¨çš„å°±æ˜¯mapçš„putæ–¹æ³•ï¼ŒæŠŠå…ƒç´ ä½œä¸ºmapçš„keyä¼ è¿›å»çš„ã€‚ã€‚</p>
<h4 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a><strong>Hashtable</strong></h4><ul>
<li><p>JDK1.0ç‰ˆæœ¬ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œè¿è¡Œæ•ˆç‡æ…¢ï¼›ä¸å…è®¸nullä½œä¸ºkeyæˆ–æ˜¯valueã€‚</p>
</li>
<li><p>åˆå§‹å®¹é‡11ï¼ŒåŠ è½½å› å­0.75ã€‚</p>
<p>è¿™ä¸ªé›†åˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­å·²ç»ä¸ç”¨äº†ï¼Œç¨å¾®äº†è§£å³å¯ã€‚</p>
</li>
</ul>
<h4 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a><strong>Properties</strong></h4><ul>
<li>Hashtableçš„å­ç±»ï¼Œè¦æ±‚keyå’Œvalueéƒ½æ˜¯Stringã€‚é€šå¸¸ç”¨äºé…ç½®æ–‡ä»¶çš„è¯»å–ã€‚</li>
</ul>
<p>å®ƒç»§æ‰¿äº†Hashtableçš„æ–¹æ³•ï¼Œä¸æµå…³ç³»å¯†åˆ‡ï¼Œæ­¤å¤„ä¸è¯¦è§£ã€‚</p>
<h4 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a><strong>TreeMap</strong></h4><ul>
<li>å®ç°äº†SortedMapæ¥å£ï¼ˆæ˜¯Mapçš„å­æ¥å£ï¼‰ï¼Œå¯ä»¥å¯¹keyè‡ªåŠ¨æ’åºã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TreeMapçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> * å­˜å‚¨ç»“æ„ï¼šçº¢é»‘æ ‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		TreeMap&lt;Student, Integer&gt; treeMap=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;Student, Integer&gt;();</span><br><span class="line">		Student s1=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;tang&quot;</span>, <span class="number">36</span>);</span><br><span class="line">		Student s2=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;yu&quot;</span>, <span class="number">101</span>);</span><br><span class="line">		Student s3=<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;he&quot;</span>, <span class="number">10</span>);</span><br><span class="line">		<span class="comment">//1.æ·»åŠ å…ƒç´ </span></span><br><span class="line">		treeMap.put(s1, <span class="number">21</span>);</span><br><span class="line">		treeMap.put(s2, <span class="number">22</span>);</span><br><span class="line">		treeMap.put(s3, <span class="number">21</span>);</span><br><span class="line">		<span class="comment">//ä¸èƒ½ç›´æ¥æ‰“å°ï¼Œéœ€è¦å®ç°Comparableæ¥å£ï¼Œå› ä¸ºçº¢é»‘æ ‘éœ€è¦æ¯”è¾ƒå¤§å°</span></span><br><span class="line">		System.out.println(treeMap.toString());</span><br><span class="line">		<span class="comment">//2.åˆ é™¤å…ƒç´ </span></span><br><span class="line">		treeMap.remove(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;he&quot;</span>, <span class="number">10</span>));</span><br><span class="line">		System.out.println(treeMap.toString());</span><br><span class="line">		<span class="comment">//3.éå†</span></span><br><span class="line">		<span class="comment">//3.1 ä½¿ç”¨keySet()</span></span><br><span class="line">		<span class="keyword">for</span> (Student key : treeMap.keySet()) &#123;</span><br><span class="line">			System.out.println(key+<span class="string">&quot; &quot;</span>+treeMap.get(key));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//3.2 ä½¿ç”¨entrySet()</span></span><br><span class="line">		<span class="keyword">for</span> (Entry&lt;Student, Integer&gt; entry : treeMap.entrySet()) &#123;</span><br><span class="line">			System.out.println(entry.getKey()+<span class="string">&quot; &quot;</span>+entry.getValue());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//4.åˆ¤æ–­</span></span><br><span class="line">		System.out.println(treeMap.containsKey(s1));</span><br><span class="line">		System.out.println(treeMap.isEmpty());		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å­¦ç”Ÿç±»ä¸­å®ç°Comparableæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span> &#123;</span><br><span class="line">        <span class="type">int</span> n1=<span class="built_in">this</span>.id-o.id;</span><br><span class="line">        <span class="keyword">return</span> n1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨æ¯”è¾ƒå™¨æ¥å®šåˆ¶æ¯”è¾ƒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">TreeMap&lt;Student, Integer&gt; treeMap2=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;Student, Integer&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Student&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Student o1, Student o2)</span> &#123;</span><br><span class="line">        <span class="comment">// ç•¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="TreeSetæºç "><a href="#TreeSetæºç " class="headerlink" title="TreeSetæºç "></a><strong>TreeSetæºç </strong></h4><p>å’ŒHashSetç±»ä¼¼ï¼Œæ”¾åœ¨TreeMapä¹‹åè®²ä¾¿ä¸€ç›®äº†ç„¶ï¼ˆéƒ¨åˆ†ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSet</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractSet</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">NavigableSet</span>&lt;E&gt;, Cloneable, java.io.Serializable</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> NavigableMap&lt;E,Object&gt; m;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">PRESENT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    TreeSet(NavigableMap&lt;E,Object&gt; m) &#123;</span><br><span class="line">        <span class="built_in">this</span>.m = m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeSet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;E,Object&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TreeSetçš„å­˜å‚¨ç»“æ„å®é™…ä¸Šå°±æ˜¯TreeMapï¼Œå†æ¥çœ‹å…¶å­˜å‚¨æ–¹å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> m.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒçš„addæ–¹æ³•è°ƒç”¨çš„å°±æ˜¯TreeMapçš„putæ–¹æ³•ï¼Œå°†å…ƒç´ ä½œä¸ºkeyä¼ å…¥åˆ°å­˜å‚¨ç»“æ„ä¸­ã€‚</p>
<h2 id="Collectionså·¥å…·ç±»"><a href="#Collectionså·¥å…·ç±»" class="headerlink" title="Collectionså·¥å…·ç±»"></a><strong>Collectionså·¥å…·ç±»</strong></h2><ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šé›†åˆå·¥å…·ç±»ï¼Œå®šä¹‰äº†é™¤äº†å­˜å–ä»¥å¤–çš„é›†åˆå¸¸ç”¨æ–¹æ³•ã€‚</li>
<li><strong>æ–¹æ³•</strong>ï¼š<ul>
<li><code>public static void reverse(List&lt;?&gt; list)</code>//åè½¬é›†åˆä¸­å…ƒç´ çš„é¡ºåº</li>
<li><code>public static void shuffle(List&lt;?&gt; list)</code>//éšæœºé‡ç½®é›†åˆå…ƒç´ çš„é¡ºåº</li>
<li><code>public static void sort(List&lt;T&gt; list)</code>//å‡åºæ’åºï¼ˆå…ƒç´ ç±»å‹å¿…é¡»å®ç°Comparableæ¥å£ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºCollectionså·¥å…·ç±»çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">		list.add(<span class="number">20</span>);</span><br><span class="line">		list.add(<span class="number">10</span>);</span><br><span class="line">		list.add(<span class="number">30</span>);</span><br><span class="line">		list.add(<span class="number">90</span>);</span><br><span class="line">		list.add(<span class="number">70</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//sortæ’åº</span></span><br><span class="line">		System.out.println(list.toString());</span><br><span class="line">		Collections.sort(list);</span><br><span class="line">		System.out.println(list.toString());</span><br><span class="line">		System.out.println(<span class="string">&quot;---------&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//binarySearchäºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">		<span class="type">int</span> i=Collections.binarySearch(list, <span class="number">10</span>);</span><br><span class="line">		System.out.println(i);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//copyå¤åˆ¶</span></span><br><span class="line">		List&lt;Integer&gt; list2=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i1=<span class="number">0</span>;i1&lt;<span class="number">5</span>;++i1) &#123;</span><br><span class="line">			list2.add(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//è¯¥æ–¹æ³•è¦æ±‚ç›®æ ‡å…ƒç´ å®¹é‡å¤§äºç­‰äºæºç›®æ ‡</span></span><br><span class="line">		Collections.copy(list2, list);</span><br><span class="line">		System.out.println(list2.toString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//reserveåè½¬</span></span><br><span class="line">		Collections.reverse(list2);</span><br><span class="line">		System.out.println(list2.toString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//shuffle æ‰“ä¹±</span></span><br><span class="line">		Collections.shuffle(list2);</span><br><span class="line">		System.out.println(list2.toString());</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//è¡¥å……ï¼šlistè½¬æˆæ•°ç»„</span></span><br><span class="line">		Integer[] arr=list.toArray(<span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">0</span>]);</span><br><span class="line">		System.out.println(arr.length);</span><br><span class="line">		<span class="comment">//è¡¥å……ï¼šæ•°ç»„è½¬æˆé›†åˆ </span></span><br><span class="line">		String[] nameStrings= &#123;<span class="string">&quot;tang&quot;</span>,<span class="string">&quot;he&quot;</span>,<span class="string">&quot;yu&quot;</span>&#125;;</span><br><span class="line">		<span class="comment">//å—é™é›†åˆï¼Œä¸èƒ½æ·»åŠ å’Œåˆ é™¤</span></span><br><span class="line">		List&lt;String&gt; list3=Arrays.asList(nameStrings);</span><br><span class="line">		System.out.println(list3);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//æ³¨ï¼šåŸºæœ¬ç±»å‹è½¬æˆé›†åˆæ—¶éœ€è¦ä¿®æ”¹ä¸ºåŒ…è£…ç±»</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAåå°„</title>
    <url>/2020/03/02/JAVA%E5%8F%8D%E5%B0%84/</url>
    <content><![CDATA[<h1 id="1-ç±»å¯¹è±¡æ¦‚è¿°"><a href="#1-ç±»å¯¹è±¡æ¦‚è¿°" class="headerlink" title="1. ç±»å¯¹è±¡æ¦‚è¿°"></a>1. ç±»å¯¹è±¡æ¦‚è¿°</h1><ul>
<li><p>ç±»çš„å¯¹è±¡ï¼šåŸºäºæŸä¸ªç±» newåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œä¹Ÿç§°å®ä¾‹å¯¹è±¡ã€‚</p>
</li>
<li><p><strong>ç±»å¯¹è±¡</strong>ï¼š<strong>ç±»åŠ è½½çš„äº§ç‰©</strong>ï¼Œ<strong>å°è£…äº†ä¸€ä¸ªç±»çš„æ‰€æœ‰ä¿¡æ¯</strong>ï¼ˆç±»åã€çˆ¶ç±»ã€æ¥å£ã€å±æ€§ã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ï¼‰ã€‚</p>
<p>æ¯ä¸ªç±»åŠ è½½åˆ°å†…å­˜åéƒ½å¯¹åº”ä¸€ä¸ªclasså¯¹è±¡ï¼Œæ¯ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªclasså¯¹è±¡ã€‚</p>
</li>
<li><p>åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™å¯ä»¥é€šè¿‡ä¸€ä¸ªJVMå‚æ•°æ¥<strong>æ˜¾ç¤ºç±»çš„åŠ è½½è¿‡ç¨‹</strong>ï¼š<code>-verbose:class</code>ã€‚</p>
</li>
</ul>
<p>ä»¥eclipseä¸ºä¾‹æ¼”ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo0</span> &#123;</span><br><span class="line">  	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  		<span class="comment">//Personç±»ï¼Œå°è£…äº†nameå’Œageä¸¤ä¸ªå±æ€§</span></span><br><span class="line">  		Person person=<span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">  		person.setName(<span class="string">&quot;tang&quot;</span>);</span><br><span class="line">  		person.setAge(<span class="number">21</span>);</span><br><span class="line">  		System.out.println(person.getName()+person.getAge()+<span class="string">&quot;å²ã€‚&quot;</span>);</span><br><span class="line">  	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°eclipseèœå•çš„â€œ<strong>è¿è¡Œ/run</strong>â€æˆ–è€…ç›´æ¥<strong>é¼ æ ‡å³å‡»ç¼–è¾‘åŒº</strong>ï¼Œé€‰æ‹©â€œ<strong>è¿è¡Œæ–¹å¼/run as</strong>â€ï¼Œåœ¨â€œ<strong>è¿è¡Œé…ç½®/run configurations</strong>â€ä¸­æ‰¾åˆ°â€œ<strong>è‡ªå˜é‡/Arguments</strong>â€,åœ¨â€œ<strong>VM è‡ªå˜é‡/VM arguments</strong>â€ä¸­è¾“å…¥ä¸Šè¿°å‚æ•°ï¼Œæœ€åâ€œ<strong>è¿è¡Œ/run</strong>â€ï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  [Opened E:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_181</span>\jre\lib\rt.jar]</span><br><span class="line">  [Loaded java.lang.Object from E:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_181</span>\jre\lib\rt.jar]</span><br><span class="line">  [Loaded java.io.Serializable from E:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_181</span>\jre\lib\rt.jar]</span><br><span class="line">  ......</span><br><span class="line">  tang21å²ã€‚</span><br><span class="line">  [Loaded java.lang.Shutdown from E:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_181</span>\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.Shutdown$Lock from E:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_181</span>\jre\lib\rt.jar]</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°æ˜¾ç¤ºäº†ç¨‹åºè¿è¡Œæ—¶ç±»çš„åŠ è½½è¿‡ç¨‹ã€‚</p>
<h1 id="2-è·å–ç±»å¯¹è±¡"><a href="#2-è·å–ç±»å¯¹è±¡" class="headerlink" title="2. è·å–ç±»å¯¹è±¡"></a>2. è·å–ç±»å¯¹è±¡</h1><ol>
<li><p>é€šè¿‡ç±»çš„å¯¹è±¡ï¼Œè·å–ç±»å¯¹è±¡ï¼š</p>
</li>
<li><p>```<br>Person person=new Person();<br>Class personClass=person.getClass();</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">2. é€šè¿‡ç±»åè·å–ç±»å¯¹è±¡ï¼š</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Class class=ç±»å.class;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">3. é€šè¿‡é™æ€æ–¹æ³•è·å–ç±»å¯¹è±¡ï¼š</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Class oneClass=Class.forName(â€œåŒ…å.ç±»åâ€);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">é€šè¿‡ä»£ç æ¼”ç¤ºè¿™ä¸‰ç§æ–¹å¼ï¼š</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class Demo1 &#123;</span><br><span class="line">	public static void main(String[] args) throws ClassNotFoundException &#123;</span><br><span class="line">		getClazz();</span><br><span class="line">	&#125;</span><br><span class="line">	public static void getClazz() throws ClassNotFoundException &#123;</span><br><span class="line">		Person tang=new Person();</span><br><span class="line">		//1.ä½¿ç”¨ç±»çš„å¯¹è±¡è·å–ç±»å¯¹è±¡ã€‚</span><br><span class="line">		Class&lt;?&gt; class1=tang.getClass();</span><br><span class="line">		System.out.println(class1.toString());</span><br><span class="line">		System.out.println(class1.hashCode());//æ‰“å°ç±»å¯¹è±¡çš„hashcode</span><br><span class="line">		//2.ä½¿ç”¨ç±»å.classå±æ€§</span><br><span class="line">		Class&lt;?&gt; class2=Person.class;</span><br><span class="line">		System.out.println(class2.hashCode());</span><br><span class="line">		//3.ä½¿ç”¨classçš„é™æ€æ–¹æ³•ã€æ¨èã€‘</span><br><span class="line">		Class&lt;?&gt; class3=Class.forName(&quot;cn.lee.demo.Person&quot;);</span><br><span class="line">		System.out.println(class3.hashCode());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">io</span>.gitee.lazydog036.demo.Person</span><br><span class="line"><span class="number">366712642</span></span><br><span class="line"><span class="number">366712642</span></span><br><span class="line"><span class="number">366712642</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸‰ä¸ªç±»çš„hashcodeä¸€æ ·ï¼Œè¯´æ˜è¿™ä¸‰ä¸ªç±»å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œè€Œä¸”æ¯ä¸ªç±»åŠ è½½åˆ°å†…å­˜ä¸­åªå¯¹åº”ä¸€ä¸ªç±»å¯¹è±¡ã€‚</p>
<p>åœ¨è·å–ç±»å¯¹è±¡æ—¶æ¨èä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå‰ä¸¤ç§çœ‹ä¸Šå»å¾ˆç®€å•ä½†æ˜¯ä»£ç çš„ä¾èµ–æ€§å¤ªå¼ºï¼Œå‡å¦‚ç¼–è¯‘çš„æ—¶å€™æ²¡æœ‰Personè¿™ä¸ªç±»å°±ä¼šæŠ¥é”™ ï¼Œè€Œç¬¬ä¸‰ç§çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç¼–è¯‘çš„æ—¶å€™å¯ä»¥æ²¡æœ‰Personç±»ï¼Œåªè¦è¿è¡Œçš„æ—¶å€™æœ‰å°±è¡Œã€‚</p>
<h1 id="3-åå°„å¸¸è§æ“ä½œ"><a href="#3-åå°„å¸¸è§æ“ä½œ" class="headerlink" title="3. åå°„å¸¸è§æ“ä½œ"></a>3. åå°„å¸¸è§æ“ä½œ</h1><p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><p><code>public String getName()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»çš„åå­—ã€‚</p>
</li>
<li><p><code>public Package getPackage()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„åŒ…çš„åå­—ã€‚</p>
</li>
<li><p><code>public Class&lt;? super T&gt; getSuperclass()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»çš„çˆ¶ç±»ã€‚</p>
</li>
<li><p><code>public Class&lt;?&gt;[] getInterfaces()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»æˆ–æ¥å£å®ç°çš„æ¥å£ã€‚</p>
</li>
<li><p><code>public Constructors&lt;?&gt;[] getConstructors()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»çš„æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚</p>
</li>
<li><p><code>public T newInstance()</code></p>
<p>åˆ›å»ºç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»ä¸€ä¸ªæ–°å®ä¾‹ã€‚</p>
</li>
<li><p><code>public Method[] getMethods()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»æˆ–æ¥å£çš„å…¬å…±æˆå‘˜æ–¹æ³•ã€‚</p>
</li>
<li><p><code>public Field[] getFields()</code></p>
<p>è·å–ç±»å¯¹è±¡æ‰€ä»£è¡¨çš„ç±»æˆ–æ¥å£çš„å…¬å…±è®¿é—®å­—æ®µã€‚</p>
</li>
</ul>
<h2 id="3-1-æ–¹æ³•æ¼”ç¤ºï¼ˆ1ï¼‰"><a href="#3-1-æ–¹æ³•æ¼”ç¤ºï¼ˆ1ï¼‰" class="headerlink" title="3.1 æ–¹æ³•æ¼”ç¤ºï¼ˆ1ï¼‰"></a>3.1 æ–¹æ³•æ¼”ç¤ºï¼ˆ1ï¼‰</h2><ul>
<li><strong>ä½¿ç”¨åå°„è·å–ç±»çš„åå­—</strong>ã€<strong>åŒ…å</strong>ã€<strong>çˆ¶ç±»</strong>ã€<strong>æ¥å£</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reflectOp1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;	</span><br><span class="line">    Class&lt;?&gt; class1=Class.forName(<span class="string">&quot;io.gitee.lazydog036.demo.Person&quot;</span>);</span><br><span class="line">    <span class="comment">//1.è·å–ç±»çš„åå­—</span></span><br><span class="line">    System.out.println(class1.getName());</span><br><span class="line">    <span class="comment">//2.è·å–åŒ…çš„åå­—</span></span><br><span class="line">    System.out.println(class1.getPackage());</span><br><span class="line">    <span class="comment">//3.è·å–ç±»çš„çˆ¶ç±»</span></span><br><span class="line">    System.out.println(class1.getSuperclass());</span><br><span class="line">    <span class="comment">//4.è·å–ç±»çš„æ¥å£</span></span><br><span class="line">    System.out.println(Arrays.toString(class1.getInterfaces()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬å››ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœè¯¥å¯¹è±¡è¡¨ç¤ºäº†ä¸€ä¸ª<strong>ä¸å®ç°</strong>ä»»ä½•æ¥å£çš„ç±»ï¼Œåˆ™è¿”å›ä¸€ä¸ª<strong>æ•°ç»„é•¿åº¦ä¸º0</strong>çš„æ•°ç»„ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">io.gitee.lazydog036.demo.Person</span><br><span class="line"><span class="keyword">package</span> io.gitee.lazydog036.demo</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">java</span>.lang.Object</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<h2 id="3-2-æ–¹æ³•æ¼”ç¤ºï¼ˆ2ï¼‰"><a href="#3-2-æ–¹æ³•æ¼”ç¤ºï¼ˆ2ï¼‰" class="headerlink" title="3.2 æ–¹æ³•æ¼”ç¤ºï¼ˆ2ï¼‰"></a>3.2 æ–¹æ³•æ¼”ç¤ºï¼ˆ2ï¼‰</h2><ul>
<li><strong>ä½¿ç”¨åå°„è·å–ç±»çš„æ„é€ æ–¹æ³•</strong>ï¼Œ<strong>å¹¶åˆ›å»ºå¯¹è±¡</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Personç±»ï¼Œæ‹¥æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">Person</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(<span class="type">int</span> age, String name)</span>&#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¸¦å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚&quot;</span>);</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Person [age=&quot;</span> + age + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reflectOp2</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    Class&lt;?&gt; class1=Class.forName(<span class="string">&quot;io.gitee.lazydog036.demo.Person&quot;</span>);</span><br><span class="line">    <span class="comment">//1.è·å–ç±»çš„æ„é€ æ–¹æ³•Constructor</span></span><br><span class="line">    Constructor&lt;?&gt;[] cnos=class1.getConstructors();</span><br><span class="line">    <span class="keyword">for</span> (Constructor&lt;?&gt; constructor : cnos) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•ï¼š&quot;</span>+constructor.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.è·å–ç±»çš„æ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    Constructor&lt;?&gt; con1=class1.getConstructor();</span><br><span class="line">    Person tang=(Person) con1.newInstance();</span><br><span class="line">    System.out.println(tang.toString());</span><br><span class="line">    <span class="comment">//2.1 ç®€ä¾¿æ–¹å¼ï¼šç±»å¯¹è±¡.newInstance();</span></span><br><span class="line">    Person he=(Person) class1.newInstance();</span><br><span class="line">    System.out.println(he.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.è·å–ç±»çš„å¸¦å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    Constructor&lt;?&gt; con2=class1.getConstructor(<span class="type">int</span>.class,String.class);</span><br><span class="line">    Person yu=(Person) con2.newInstance(<span class="number">21</span>,<span class="string">&quot;yu&quot;</span>);</span><br><span class="line">    System.out.println(yu.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>getConstructorè¿”å›çš„æ˜¯æ„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªConstructorå¯¹è±¡ï¼Œå‚æ•°ä¸ºæ„é€ æ–¹æ³•å£°æ˜çš„å½¢å‚ç±»å‹ã€‚ä½¿ç”¨å¸¦å‚æ„é€ æ–¹æ³•å¯¹è±¡åˆ›å»ºå®ä¾‹æ—¶éœ€è¦ä¼ é€’ç›¸åº”çš„å‚æ•°ï¼Œå¦‚ä»£ç ä¸­çš„ç¬¬3ä¸ªæ¼”ç¤ºæ‰€ç¤ºã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æ„é€ æ–¹æ³•ï¼š<span class="keyword">public</span> io.gitee.lazydog036.demo.Person()</span><br><span class="line">æ„é€ æ–¹æ³•ï¼š<span class="keyword">public</span> io.gitee.lazydog036.demo.Person(<span class="type">int</span>,java.lang.String)</span><br><span class="line">æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line">Person [age=<span class="number">0</span>, name=<span class="literal">null</span>]</span><br><span class="line">æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line">Person [age=<span class="number">0</span>, name=<span class="literal">null</span>]</span><br><span class="line">å¸¦å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line">Person [age=<span class="number">21</span>, name=yu]</span><br></pre></td></tr></table></figure>

<h2 id="3-3-æ–¹æ³•æ¼”ç¤ºï¼ˆ3ï¼‰"><a href="#3-3-æ–¹æ³•æ¼”ç¤ºï¼ˆ3ï¼‰" class="headerlink" title="3.3 æ–¹æ³•æ¼”ç¤ºï¼ˆ3ï¼‰"></a>3.3 æ–¹æ³•æ¼”ç¤ºï¼ˆ3ï¼‰</h2><ul>
<li><strong>ä½¿ç”¨åå°„è·å–ç±»ä¸­çš„æ–¹æ³•</strong>ï¼Œ<strong>å¹¶è°ƒç”¨æ–¹æ³•</strong>ã€‚</li>
</ul>
<h3 id="3-3-1-æ¼”ç¤ºgetMethodsæ–¹æ³•"><a href="#3-3-1-æ¼”ç¤ºgetMethodsæ–¹æ³•" class="headerlink" title="3.3.1 æ¼”ç¤ºgetMethodsæ–¹æ³•"></a>3.3.1 æ¼”ç¤ºgetMethodsæ–¹æ³•</h3><p>åœ¨Personç±»ä¸­æ·»åŠ ä¸€äº›æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span>  <span class="title class_">Person</span>&#123;	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="built_in">this</span>.getName()+<span class="string">&quot;æ­£åœ¨å­¦ä¹ ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">privateMethod</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">protectedMethod</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªå—ä¿æŠ¤çš„æ–¹æ³•ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">defaultMethod</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ–¹æ³•ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reflectOp3</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    Class&lt;?&gt; class1=Class.forName(<span class="string">&quot;io.gitee.lazydog036.demo.Person&quot;</span>);</span><br><span class="line">    <span class="comment">//2.è·å–æ–¹æ³• Methodå¯¹è±¡</span></span><br><span class="line">    <span class="comment">//2.1 getMethods()</span></span><br><span class="line">    Method[] methods=class1.getMethods();</span><br><span class="line">    <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">        System.out.println(method.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªMethodç±»å‹çš„æ•°ç»„ã€‚æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼Œä¸ºäº†ä¾¿äºè§‚å¯Ÿç»“æœï¼Œæˆ‘æŠŠç»“æœåœ¨è¿™é‡Œåˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> java.lang.String io.gitee.lazydog036.demo.Person.toString()</span><br><span class="line"><span class="keyword">public</span> java.lang.String io.gitee.lazydog036.demo.Person.getName()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.setName(java.lang.String)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.setAge(<span class="type">int</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.study()</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> io.gitee.lazydog036.demo.Person.getAge()</span><br><span class="line">                       --------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> java.lang.Object.wait() <span class="keyword">throws</span> java.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> java.lang.Object.wait(<span class="type">long</span>,<span class="type">int</span>) <span class="keyword">throws</span> java.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.wait(<span class="type">long</span>) <span class="keyword">throws</span> java.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> java.lang.Object.equals(java.lang.Object)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">native</span> <span class="type">int</span> java.lang.Object.hashCode()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> java.lang.Class java.lang.Object.getClass()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.notify()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.notifyAll()</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥è§‚å¯Ÿåˆ°è¯¥æ–¹æ³•è¿”å›çš„Methodæ•°ç»„ä¸­ä¸ä»…åŒ…å«Personç±»çš„æ–¹æ³•ï¼Œä¹ŸåŒ…å«äº†ç»§æ‰¿è‡ªObjectçš„æ–¹æ³•ï¼›ä½†æ˜¯åœ¨Personçš„æ–¹æ³•ä¸­ï¼Œæ²¡æœ‰épublicæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•è·å–äº†<strong>ç±»ä¸­å’Œç»§æ‰¿è‡ªçˆ¶ç±»çš„å…¬å¼€æ–¹æ³•</strong>ã€‚</p>
<h3 id="3-3-2-æ¼”ç¤ºgetDeclaredMethodsæ–¹æ³•"><a href="#3-3-2-æ¼”ç¤ºgetDeclaredMethodsæ–¹æ³•" class="headerlink" title="3.3.2 æ¼”ç¤ºgetDeclaredMethodsæ–¹æ³•"></a>3.3.2 æ¼”ç¤ºgetDeclaredMethodsæ–¹æ³•</h3><p>è¦è·å–ç±»ä¸­çš„ç§æœ‰æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2.2 getDeclaredMethods()</span></span><br><span class="line">Method[]  methods=class1.getDeclaredMethods();</span><br><span class="line"><span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">    System.out.println(method.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> java.lang.String io.gitee.lazydog036.demo.Person.toString()</span><br><span class="line"><span class="keyword">public</span> java.lang.String io.gitee.lazydog036.demo.Person.getName()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.setName(java.lang.String)</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.privateMethod()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.setAge(<span class="type">int</span>)</span><br><span class="line"><span class="keyword">void</span> io.gitee.lazydog036.demo.Person.defaultMethod()</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.protectedMethod()</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> io.gitee.lazydog036.demo.Person.getAge()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> io.gitee.lazydog036.demo.Person.study()</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥è§‚å¯Ÿåˆ°æ§åˆ¶å°åªæ‰“å°äº†è¯¥ç±»ä¸­æ‰€å£°æ˜çš„æ–¹æ³•ï¼Œä½†åŒ…æ‹¬äº†æ‰€æœ‰å…¬æœ‰çš„ï¼Œç§æœ‰çš„ï¼Œå—ä¿æŠ¤çš„å’Œé»˜è®¤çš„æ–¹æ³•ã€‚</p>
<h3 id="3-3-3-è·å–å•ä¸ªæ–¹æ³•"><a href="#3-3-3-è·å–å•ä¸ªæ–¹æ³•" class="headerlink" title="3.3.3 è·å–å•ä¸ªæ–¹æ³•"></a>3.3.3 è·å–å•ä¸ªæ–¹æ³•</h3><p>è¦è·å–å•ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨<code>getMethod(String name,Class&lt;?&gt;... parameterTypes)</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–¹æ³•åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–¹æ³•çš„å½¢å‚åˆ—è¡¨çš„ç±»ï¼Œæ²¡æœ‰å½¢å‚å°±ä¸å†™ã€‚</p>
<p>è·å¾—æ–¹æ³•åä½¿ç”¨<code>invoke(Object obj,Object... args)</code>æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è°ƒç”¨æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ï¼Œæ²¡æœ‰å°±ä¸å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3.è·å–å•ä¸ªæ— å‚æ–¹æ³•</span></span><br><span class="line"><span class="comment">//3.1 study</span></span><br><span class="line">Method studyMethod=class1.getMethod(<span class="string">&quot;study&quot;</span>);</span><br><span class="line">Person tangPerson=<span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">studyMethod.invoke(tangPerson);</span><br><span class="line"><span class="comment">//3.2 toString</span></span><br><span class="line">Method toStringMethod=class1.getMethod(<span class="string">&quot;toString&quot;</span>);</span><br><span class="line"><span class="comment">//æ­¤æ—¶è¯¥æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼ç±»å‹ä¸ºObject</span></span><br><span class="line">Object object=toStringMethod.invoke(tangPerson);</span><br><span class="line">System.out.println(object);</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line">nullæ­£åœ¨å­¦ä¹ ã€‚</span><br><span class="line">Person [age=0, name=null]</span><br></pre></td></tr></table></figure>

<p>åœ¨Personç±»ä¸­æ·»åŠ ä¸€ä¸ªå¸¦å‚çš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">(String subject)</span> &#123;</span><br><span class="line">    System.out.println(<span class="built_in">this</span>.getName()+<span class="string">&quot;æ­£åœ¨å­¦ä¹ &quot;</span>+subject+<span class="string">&quot;ã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3.3 è·å–å•ä¸ªå¸¦å‚æ–¹æ³•</span></span><br><span class="line">Person tangPerson=<span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">Method studyMethod=class1.getMethod(<span class="string">&quot;study&quot;</span>, String.class);</span><br><span class="line">studyMethod.invoke(tangPerson, <span class="string">&quot;å¦‚ä½•æ‰“æ¸¸æˆ&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°æ‰“å°å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line"><span class="literal">null</span>æ­£åœ¨å­¦ä¹ å¦‚ä½•æ‰“æ¸¸æˆã€‚</span><br></pre></td></tr></table></figure>

<p>åœ¨Personç±»ä¸­æ·»åŠ ä¸€ä¸ªé™æ€æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static void staticMethod() &#123;</span><br><span class="line">    System.out.println(&quot;è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3.4 è·å–ç§æœ‰æ–¹æ³•		</span></span><br><span class="line">Method privateMethod=class1.getDeclaredMethod(<span class="string">&quot;privateMethod&quot;</span>);</span><br><span class="line"><span class="comment">//3.4.1 è®¾ç½®è®¿é—®æƒé™æ— æ•ˆ</span></span><br><span class="line">privateMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">privateMethod.invoke(tangPerson);</span><br><span class="line"><span class="comment">//3.5 è·å–é™æ€æ–¹æ³•</span></span><br><span class="line">Method staticMethod=class1.getMethod(<span class="string">&quot;staticMethod&quot;</span>);</span><br><span class="line">staticMethod.invoke(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè·å–ç§æœ‰æ–¹æ³•æ—¶éœ€è¦ä½¿ç”¨<code>getDeclaredMethod</code>ï¼Œå¹¶ä¸”éœ€è¦è®¾ç½®è®¿é—®æƒé™æ— æ•ˆæ‰èƒ½è°ƒç”¨ï¼Œä¸ç„¶ç§æœ‰æ–¹æ³•æ˜¯ä¸å…è®¸åœ¨å…¶ä»–ç±»ä¸­è°ƒç”¨çš„ã€‚</p>
<p>è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œinvokeä¸­è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡è¿™ä¸ªå‚æ•°å†™nullã€‚æ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚</span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="3-4-æ–¹æ³•æ¼”ç¤ºï¼ˆ4ï¼‰"><a href="#3-4-æ–¹æ³•æ¼”ç¤ºï¼ˆ4ï¼‰" class="headerlink" title="3.4 æ–¹æ³•æ¼”ç¤ºï¼ˆ4ï¼‰"></a>3.4 æ–¹æ³•æ¼”ç¤ºï¼ˆ4ï¼‰</h2><ul>
<li><strong>ä½¿ç”¨åå°„å¯ä»¥å®ç°ä¸€ä¸ª</strong> <strong>å¯ä»¥è°ƒç”¨ä»»ä½•å¯¹è±¡æ–¹æ³•çš„é€šç”¨æ–¹æ³•</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> obj è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> methodName è°ƒç”¨æ–¹æ³•çš„åå­—</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> types è°ƒç”¨æ–¹æ³•çš„å½¢å‚ç±»</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args è°ƒç”¨æ–¹æ³•ä¼ å…¥å¯¹è±¡çš„å½¢å‚åˆ—è¡¨</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">invokeAll</span><span class="params">(Object obj,String methodName,Class&lt;?&gt;[] types,Object...args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">//1.è·å–ç±»å¯¹è±¡</span></span><br><span class="line">    Class&lt;?&gt; class1=obj.getClass();</span><br><span class="line">    <span class="comment">//2.è·å–æ–¹æ³•</span></span><br><span class="line">    Method method=class1.getMethod(methodName, types);</span><br><span class="line">    <span class="comment">//3.è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">return</span> method.invoke(obj, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ¥è°ƒç”¨ä»»ä½•å¯¹è±¡çš„å…¬å¼€æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Properties properties=<span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">//properties.setProperty(&quot;name&quot;, &quot;tang&quot;);</span></span><br><span class="line">    invokeAll(properties, <span class="string">&quot;setProperty&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class,String.class&#125;, <span class="string">&quot;username&quot;</span>,<span class="string">&quot;tang&quot;</span>);</span><br><span class="line">    System.out.println(properties.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨é‡Šçš„å†…å®¹æ˜¯æ­£å¸¸ä½¿ç”¨å¯¹è±¡å˜é‡æ¥è°ƒç”¨æ–¹æ³•ï¼Œä½¿ç”¨åå°„è°ƒç”¨æ­¤æ–¹æ³•ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;username=tang&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-5-æ–¹æ³•æ¼”ç¤ºï¼ˆ5ï¼‰"><a href="#3-5-æ–¹æ³•æ¼”ç¤ºï¼ˆ5ï¼‰" class="headerlink" title="3.5 æ–¹æ³•æ¼”ç¤ºï¼ˆ5ï¼‰"></a>3.5 æ–¹æ³•æ¼”ç¤ºï¼ˆ5ï¼‰</h2><ul>
<li><strong>ä½¿ç”¨åå°„è·å–ç±»ä¸­çš„å±æ€§</strong>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reflectOp4</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    Class&lt;?&gt; class1=Class.forName(<span class="string">&quot;io.gitee.lazydog036.demo.Person&quot;</span>);</span><br><span class="line">    <span class="comment">//1.è·å–å±æ€§ï¼ˆå­—æ®µï¼‰</span></span><br><span class="line">    Field[] fields=class1.getFields();</span><br><span class="line">    System.out.println(fields.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä¹‹åæ§åˆ¶å°æ‰“å°çš„ç»“æœæ˜¯â€œ0â€ï¼Œå› ä¸º<code>getFields()</code>è·å–çš„æ˜¯å…¬å¼€çš„å’Œä»çˆ¶ç±»ç»§æ‰¿çš„å­—æ®µï¼Œè€ŒPersonç±»ä¸­çš„å­—æ®µï¼ˆå±æ€§ï¼‰æ˜¯ç§æœ‰çš„ï¼Œæƒ³è¦è·å–è¿™äº›å±æ€§éœ€è¦ç”¨<code>getDeclaredFields()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ç±»å£°æ˜çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ç§æœ‰ã€é»˜è®¤ã€å—ä¿æŠ¤çš„å±æ€§ï¼Œä½†ä¸åŒ…æ‹¬ç»§æ‰¿çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class&lt;?&gt; class1=Class.forName(<span class="string">&quot;io.gitee.lazydog036.demo.Person&quot;</span>);</span><br><span class="line">Field[] fields=class1.getDeclaredFields();</span><br><span class="line"><span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">    System.out.println(field.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> io.gitee.lazydog036.demo.Person.age</span><br><span class="line"><span class="keyword">private</span> java.lang.String io.gitee.lazydog036.demo.Person.name</span><br></pre></td></tr></table></figure>

<p>è¯»å†™å±æ€§åˆ†åˆ«ä½¿ç”¨getæ–¹æ³•å’Œsetæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–nameå±æ€§</span></span><br><span class="line">Field namefield=class1.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">//ç»™å±æ€§èµ‹å€¼</span></span><br><span class="line">Person person=(Person) class1.newInstance();</span><br><span class="line">namefield.set(person, <span class="string">&quot;æ‡’ç‹—&quot;</span>);<span class="comment">//person.name=&quot;æ‡’ç‹—&quot;</span></span><br><span class="line"><span class="comment">//è·å–å€¼</span></span><br><span class="line">System.out.println(namefield.get(person));</span><br></pre></td></tr></table></figure>

<p>ç»“æœè¾“å‡ºæŠ¥é”™ï¼Œå› ä¸ºnameå±æ€§æ˜¯ç§æœ‰æˆå‘˜ï¼Œä¸å…è®¸ä¿®æ”¹ã€‚å°±åƒä¹‹å‰è°ƒç”¨ç§æœ‰æ–¹æ³•ä¸€æ ·ï¼Œåœ¨ä¿®æ”¹å±æ€§ä¹‹å‰éœ€è¦è®¾ç½®è®¿é—®æƒé™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">namefield.setAccessible(true);</span><br></pre></td></tr></table></figure>

<p>æœ€åç»“æœæ­£å¸¸è¿è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ— å‚æ„é€ æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span><br><span class="line">æ‡’ç‹—</span><br></pre></td></tr></table></figure>

<h1 id="4-è®¾è®¡æ¨¡å¼ä»‹ç»"><a href="#4-è®¾è®¡æ¨¡å¼ä»‹ç»" class="headerlink" title="4. è®¾è®¡æ¨¡å¼ä»‹ç»"></a>4. è®¾è®¡æ¨¡å¼ä»‹ç»</h1><ul>
<li><p><strong>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼</strong>ï¼Ÿ</p>
<p>ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ç®€å•ç†è§£ï¼šç‰¹å®šé—®é¢˜çš„å›ºå®šè§£å†³æ–¹æ³•ã€‚</p>
</li>
<li><p><strong>å¥½å¤„</strong>ï¼Ÿ</p>
<p>ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ï¼Œè®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ï¼Œä¿è¯ä»£ç å¯é æ€§ã€é‡ç”¨æ€§ã€‚</p>
</li>
<li><p>åœ¨Gofçš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¹¦ä¸­æè¿°äº†23ä¸­è®¾è®¡æ¨¡å¼ã€‚æœ¬æ–‡åªä»‹ç»å‡ ç§å¸¸è§çš„ã€‚</p>
</li>
</ul>
<h2 id="4-1-å·¥å‚è®¾è®¡æ¨¡å¼"><a href="#4-1-å·¥å‚è®¾è®¡æ¨¡å¼" class="headerlink" title="4.1 å·¥å‚è®¾è®¡æ¨¡å¼"></a>4.1 å·¥å‚è®¾è®¡æ¨¡å¼</h2><ul>
<li>å·¥å‚æ¨¡å¼ä¸»è¦è´Ÿè´£å¯¹è±¡åˆ›å»ºçš„é—®é¢˜ã€‚</li>
<li>å¼€å‘ä¸­æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„åŸåˆ™â€œå¼€é—­åŸåˆ™â€ï¼Œå¯¹æ‹“å±•å¼€æ”¾ã€å¯¹ä¿®æ”¹å…³é—­ã€‚</li>
<li>å¯é€šè¿‡åå°„è¿›è¡Œå·¥å‚æ¨¡å¼çš„è®¾è®¡ï¼Œå®ŒæˆåŠ¨æ€çš„å¯¹è±¡åˆ›å»ºã€‚</li>
</ul>
<p>å·¥å‚æ¨¡å¼ä¸€èˆ¬æœ‰çˆ¶ç±»äº§å“ã€å­ç±»äº§å“ã€å·¥å‚å’Œå®¢æˆ·ã€‚ä»¥ä¸‹æ¼”ç¤ºå·¥å‚æ¨¡å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * çˆ¶ç±»äº§å“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Usb</span> &#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">service</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å­ç±»äº§å“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">implements</span> <span class="title class_">Usb</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;é¼ æ ‡å¼€å§‹å·¥ä½œã€‚ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å­ç±»äº§å“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">KeyBoard</span> <span class="keyword">implements</span> <span class="title class_">Usb</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;é”®ç›˜å¼€å§‹å·¥ä½œã€‚ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å­ç±»äº§å“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Upan</span> <span class="keyword">implements</span> <span class="title class_">Usb</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;uç›˜å¼€å§‹å·¥ä½œã€‚ã€‚&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å·¥å‚ç±»ï¼ˆè´Ÿè´£å¯¹è±¡åˆ›å»ºï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsbFactory</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Usb <span class="title function_">createUsb</span><span class="params">(<span class="type">int</span> type)</span> &#123;</span><br><span class="line">		Usb usb=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (type==<span class="number">1</span>) &#123;<span class="comment">//é¼ æ ‡</span></span><br><span class="line">			usb=<span class="keyword">new</span> <span class="title class_">Mouse</span>();</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(type==<span class="number">2</span>)&#123;<span class="comment">//é”®ç›˜</span></span><br><span class="line">			usb=<span class="keyword">new</span> <span class="title class_">KeyBoard</span>();</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> (type==<span class="number">3</span>) &#123;<span class="comment">//Uç›˜</span></span><br><span class="line">			usb=<span class="keyword">new</span> <span class="title class_">Upan</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> usb;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®¢æˆ·</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;è¯·é€‰æ‹©äº§å“ï¼š1.é¼ æ ‡ 2.é”®ç›˜ 3.Uç›˜&quot;</span>);</span><br><span class="line">		Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span> type=in.nextInt();</span><br><span class="line">		Usb usb=UsbFactory.createUsb(type);</span><br><span class="line">		<span class="keyword">if</span>(usb!=<span class="literal">null</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;è´­ä¹°æˆåŠŸã€‚&quot;</span>);</span><br><span class="line">			usb.service();</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;äº§å“ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¯·é€‰æ‹©äº§å“ï¼š<span class="number">1.</span>é¼ æ ‡ <span class="number">2.</span>é”®ç›˜ <span class="number">3.</span>Uç›˜</span><br><span class="line"><span class="number">2</span></span><br><span class="line">è´­ä¹°æˆåŠŸã€‚</span><br><span class="line">é”®ç›˜å¼€å§‹å·¥ä½œã€‚ã€‚</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ–°å¢äº†ä¸€ä¸ªäº§å“ï¼Œæ¯”å¦‚ç”»æ¿ï¼Œé‚£ä¹ˆéœ€è¦æ–°å»ºä¸€ä¸ªå­ç±»äº§å“ç±»ï¼Œç„¶ååœ¨å·¥å‚ç±»çš„ifè¯­å¥ä¸­åŠ ä¸€ä¸ªtypeï¼Œåœ¨newä¸€ä¸ªç”»æ¿ç±»ã€‚è¿™ä¹ˆåšå°±ç ´åäº†â€œå¼€é—­åŸåˆ™â€ï¼Œä¿®æ”¹äº†æºä»£ç ã€‚æ¥ä¸‹æ¥ä½¿ç”¨åå°„æ¥ä¼˜åŒ–è¿™ä¸ªç¨‹åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å·¥å‚ç±»ï¼ˆè´Ÿè´£å¯¹è±¡åˆ›å»ºï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsbFactory</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Usb <span class="title function_">createUsb</span><span class="params">(String type)</span> &#123;</span><br><span class="line">		Usb usb=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Class&lt;?&gt; class1=Class.forName(type);</span><br><span class="line">			usb=(Usb) class1.newInstance();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;	</span><br><span class="line">		<span class="keyword">return</span> usb;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å·¥å‚ç±»åˆ©ç”¨åå°„åˆ›å»ºæ–°å®ä¾‹ï¼Œä¼ é€’è¿‡æ¥çš„å°±éœ€è¦ä¸€ä¸ªå®Œæ•´çš„â€œåŒ…å.ç±»åâ€ã€‚</p>
<p>ä½†æ˜¯å®¢æˆ·è¿˜æ˜¯è¾“å…¥æ•°å­—æ¥é€‰æ‹©è´­ä¹°å“ªä¸ªäº§å“ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Propertiesç±»æ¥å°†<strong>å®¢æˆ·çš„é€‰æ‹©</strong>å’Œâ€œ<strong>åŒ…å.ç±»å</strong>â€å­˜å‚¨ä¸ºé”®å€¼å¯¹ï¼Œå¹¶å°†å®ƒæ”¾åœ¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#Usb.properties</span><br><span class="line"><span class="number">1</span> = io.gitee.lazydog036.pattern.Mouse</span><br><span class="line"><span class="number">2</span> = io.gitee.lazydog036.pattern.KeyBoard</span><br><span class="line"><span class="number">3</span> = io.gitee.lazydog036.pattern.Upan</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆå°±ç›¸åº”åœ°ä¿®æ”¹å®¢æˆ·ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;è¯·é€‰æ‹©äº§å“ï¼š1.é¼ æ ‡ 2.é”®ç›˜ 3.Uç›˜&quot;</span>);</span><br><span class="line">    Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    String choice=in.next();</span><br><span class="line">    Properties properties=<span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">//å°†æ–‡ä»¶è¯»å…¥åˆ°æµä¸­</span></span><br><span class="line">    FileInputStream fileInputStream=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;src\\Usb.properties&quot;</span>);</span><br><span class="line">    <span class="comment">//ä»æµä¸­åŠ è½½æ•°æ®</span></span><br><span class="line">    properties.load(fileInputStream);</span><br><span class="line">    fileInputStream.close();</span><br><span class="line">    Usb usb=UsbFactory.createUsb(properties.getProperty(choice));</span><br><span class="line">    <span class="keyword">if</span>(usb!=<span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è´­ä¹°æˆåŠŸã€‚&quot;</span>);</span><br><span class="line">        usb.service();</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;äº§å“ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…³äºPropertiesè¿™ä¸ªé›†åˆå’ŒIOæ¡†æ¶çš„çŸ¥è¯†é»˜è®¤ä½ å·²ç»çŸ¥æ™“äº†ï¼Œæˆ‘çš„å…¶ä»–åšå®¢é‡Œä¹Ÿæœ‰æ€»ç»“ã€‚</p>
<p>æ‰§è¡Œä»£ç ï¼Œç¨‹åºæ­£å¸¸è¿è¡Œã€‚è¿˜æ˜¯åˆšæ‰é‚£ä¸ªé—®é¢˜ï¼Œè¿™æ—¶å€™æ–°åŠ äº†ä¸€ä¸ªäº§å“ç”»æ¿ï¼Œæˆ‘ä»¬ä¹‹å‰éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œè€Œç°åœ¨æˆ‘ä»¬åªéœ€è¦åœ¨<code>Usb.properties</code>æ–‡ä»¶ä¸­æ–°åŠ ä¸€è¡Œä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">4 = io.gitee.lazydog036.pattern.DrawingBoard</span><br></pre></td></tr></table></figure>

<p>ä¸ç”¨å»ä¿®æ”¹æºä»£ç ï¼Œå†æ–°æ·»åŠ ä¸€ä¸ªDrawingBoardç±»ï¼Œç„¶åæ‰§è¡Œä»£ç ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯·é€‰æ‹©äº§å“ï¼š1.é¼ æ ‡ 2.é”®ç›˜ 3.Uç›˜</span><br><span class="line">4</span><br><span class="line">è´­ä¹°æˆåŠŸã€‚</span><br><span class="line">ç”»æ¿å¼€å§‹å·¥ä½œã€‚</span><br></pre></td></tr></table></figure>

<p>è¾“å…¥4ï¼Œæ­£å¸¸è¾“å‡ºç»“æœï¼Œç¬¦åˆäº†â€œå¼€é—­åŸåˆ™â€ã€‚</p>
<h2 id="4-2-å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#4-2-å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="4.2 å•ä¾‹è®¾è®¡æ¨¡å¼"></a>4.2 å•ä¾‹è®¾è®¡æ¨¡å¼</h2><ul>
<li><p>å•ä¾‹ï¼ˆSingletonï¼‰ï¼šåªå…è®¸åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡ã€‚</p>
<p>è¦ä¿è¯æ•´ä¸ªç³»ç»Ÿåœ¨è¿è¡Œè¿‡ç¨‹ä¸­åªèƒ½åˆ›å»ºå¯¹è±¡ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><strong>æ–¹å¼1</strong>ï¼š<strong>é¥¿æ±‰å¼</strong>ï¼ˆ<strong>ç±»åŠ è½½æ—¶åˆ›å»º</strong>ï¼Œ<strong>å¤©ç”Ÿçº¿ç¨‹å®‰å…¨</strong>ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é¥¿æ±‰å¼å•ä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton instance=<span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¥¿æ±‰å¼å•ä¾‹ä¸€å…±ä¸‰ä¸ªæ­¥éª¤ï¼Œå¾ˆç®€å•ï¼š</p>
<ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å¸¸é‡å¯¹è±¡ã€‚</li>
<li>æ„é€ æ–¹æ³•è®¾ç½®ä¸ºç§æœ‰ï¼Œç±»å¤–éƒ¨ä¸èƒ½åˆ›å»ºè¯¥å¯¹è±¡ã€‚</li>
<li>é€šè¿‡ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•ï¼Œè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚</li>
</ol>
<p>é€šè¿‡ä¸€ä¸ªå¤šçº¿ç¨‹çš„ä»£ç æ¥æµ‹è¯•å…¶æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testSingleton</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;				</span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">					<span class="comment">//è°ƒç”¨å…¶hashCodeæ–¹æ³•			</span></span><br><span class="line">					System.out.println(Singleton.getInstance().hashCode());</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;).start();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…³äºjavaå¤šçº¿ç¨‹é»˜è®¤ä½ å·²ç»æœ‰æ‰€äº†è§£ï¼Œæˆ‘çš„å…¶ä»–åšå®¢ä¸­æ€»ç»“å¾—ä¹Ÿå¾ˆè¯¦ç»†ã€‚</p>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¸‰ä¸ªå¯¹è±¡çš„hashcodeä¸€æ ·ï¼Œè¯´æ˜ä¸‰ä¸ªçº¿ç¨‹è·å–çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  1307179676</span><br><span class="line">  1307179676</span><br><span class="line">1307179676</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ–¹å¼2</strong>ï¼š<strong>æ‡’æ±‰å¼</strong>ï¼ˆ<strong>ä½¿ç”¨æ—¶åˆ›å»º</strong>ï¼Œ<strong>çº¿ç¨‹ä¸å®‰å…¨</strong>ï¼Œ<strong>éœ€è¦åŠ åŒæ­¥</strong>ï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‡’æ±‰å¼å•ä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton2</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton2 instance=<span class="literal">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span>  <span class="title function_">Singleton2</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Singleton2 <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(instance==<span class="literal">null</span>) &#123;</span><br><span class="line">			instance=<span class="keyword">new</span> <span class="title class_">Singleton2</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸æ¯”é¥¿æ±‰å¼å…ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡è€Œè¨€ï¼Œæ‡’æ±‰å¼åªæœ‰åœ¨è°ƒç”¨æ–¹æ³•æ—¶æ‰åˆ›å»ºå¯¹è±¡ï¼Œæ¯”é¥¿æ±‰å¼èŠ‚çœç©ºé—´ã€‚</p>
<p>æ‡’æ±‰å¼å•ä¾‹åŒæ ·æ˜¯ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>é¦–å…ˆåˆ›é€ ä¸€ä¸ªå¯¹è±¡ï¼Œèµ‹å€¼ä¸ºnullã€‚</li>
<li>æ„é€ æ–¹æ³•æ”¹æˆç§æœ‰ï¼Œç±»å¤–éƒ¨ä¸èƒ½åˆ›å»ºå¯¹è±¡ã€‚</li>
<li>é€šè¿‡ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•ï¼Œè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚</li>
</ol>
<p>é€šè¿‡ä¸€ä¸ªå¤šçº¿ç¨‹çš„ä»£ç æ¥æµ‹è¯•å…¶æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæµ‹è¯•ä»£ç åŒä¸Šï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">727916939</span><br><span class="line">1612280362</span><br><span class="line">727916939</span><br></pre></td></tr></table></figure>

<p>hashcodeä¸ä¸€æ ·ï¼Œè¯´æ˜åœ¨å¤šçº¿ç¨‹ä¸­åˆ›å»ºäº†ä¸åŒçš„å¯¹è±¡ã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°çš„æ˜¯ä½¿ç”¨åŒæ­¥æ–¹æ³•ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨åŒæ­¥ä»£ç å—ï¼Œåœ¨æ–¹æ³•åå‰åŠ ä¸€ä¸ªsynchronizedå…³é”®å­—ï¼Œæˆ–è€…æŠŠéœ€è¦åŒæ­¥çš„ä»£ç æ”¾è¿›åŒæ­¥ä»£ç å—ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‹¬å·é‡Œä¸èƒ½æ˜¯instanceï¼Œå› ä¸ºå‰é¢èµ‹å€¼æ˜¯nullï¼Œä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">synchronized</span> (Singleton2.class) &#123;</span><br><span class="line">    <span class="keyword">if</span>(instance==<span class="literal">null</span>) &#123;</span><br><span class="line">        instance=<span class="keyword">new</span> <span class="title class_">Singleton2</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p>åœ¨çº¿ç¨‹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å®ä¾‹æ—¶ï¼Œå¦‚æœéƒ½éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸Šé”çš„è¯æ‰§è¡Œæ•ˆç‡ä¼šå¤§æ‰“æŠ˜æ‰£ï¼›å…¶å®å½“ç¬¬ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åˆ°åŒæ­¥ä»£ç å—ä¸­æ—¶å°±è¯´æ˜å®ä¾‹å·²ç»åˆ›å»ºäº†ï¼Œåæ¥çš„å…¶ä»–çº¿ç¨‹æ‰§è¡Œçš„åªæ˜¯è¿”å›è¯­å¥ï¼Œæ‰€ä»¥å¯ä»¥è®©åæ¥çš„çº¿ç¨‹ç»•è¿‡åŒæ­¥ä»£ç å—ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (instance==<span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (Singleton2.class) &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance==<span class="literal">null</span>) &#123;</span><br><span class="line">            instance=<span class="keyword">new</span> <span class="title class_">Singleton2</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<ul>
<li><p>åœ¨åŒæ­¥ä»£ç å—ä¸­å†åŠ ä¸€ä¸ªifåˆ¤æ–­ï¼Œå°±å¯ä»¥è®©åæ¥çš„çº¿ç¨‹ç›´æ¥æ‰§è¡Œä¸‹é¢çš„è¿”å›è¯­å¥ï¼Œè€Œä¸å¿…å†å»åˆ¤æ–­æ˜¯å¦ä¸Šé”ã€‚è¿™æ ·å¯ä»¥ä¼˜åŒ–æ‰§è¡Œæ•ˆç‡ã€‚</p>
</li>
<li><p>æ€»ç»“å•ä¾‹æ¨¡å¼çš„ä¸¤ç§å†™æ³•çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<p>é¥¿æ±‰å¼ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œç±»ä¸€åŠ è½½å°±åˆ›å»ºäº†å®ä¾‹ã€‚</li>
<li>ç¼ºç‚¹ï¼šå®ä¾‹å¯¹è±¡å°±ç®—ä¸ç”¨ä¹Ÿå­˜åœ¨äºå†…å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸé•¿ï¼Œæµªè´¹ç©ºé—´ã€‚</li>
</ul>
<p>æ‡’æ±‰å¼ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šåªæœ‰åœ¨è°ƒç”¨getInstanceæ‰ä¼šå®ä¾‹åŒ–ï¼Œç”Ÿå‘½å‘¨æœŸçŸ­ï¼ŒèŠ‚çœç©ºé—´</li>
<li>ç¼ºç‚¹ï¼šçº¿ç¨‹ä¸å®‰å…¨ã€‚ä¸è¿‡å¯ä»¥ä½¿ç”¨åŒæ­¥æ¥ä¿è¯çº¿ç¨‹äº’æ–¥è®¿é—®ã€‚</li>
</ul>
<p>è€ƒè™‘ä¸¤ç§æ–¹å¼çš„ä¼˜ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰ç¬¬ä¸‰ç§æ–¹å¼æ¥å®ç°å•ä¾‹æ¨¡å¼ï¼š</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨æ—¶åˆ›å»ºï¼Œçº¿ç¨‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton3</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">Singleton3</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Holder</span>&#123;</span><br><span class="line">		<span class="keyword">static</span> Singleton3 instance=<span class="keyword">new</span> <span class="title class_">Singleton3</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Singleton3 <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> Holder.instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ²¡æœ‰ä½¿ç”¨é™æ€å†…éƒ¨ç±»é‡Œçš„å†…å®¹æ—¶ï¼Œè¿™ä¸ªé™æ€å†…éƒ¨ç±»æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œåªæœ‰å½“è°ƒç”¨getInstanceæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå†…éƒ¨ç±»çš„å®ä¾‹åŒ–ï¼Œè€Œinstanceæ˜¯ä½¿ç”¨newæ¥å®ä¾‹åŒ–çš„ï¼Œè¿™ç§æ–¹å¼æœ¬èº«å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<p>é€šè¿‡ä¸€ä¸ªå¤šçº¿ç¨‹çš„ä»£ç æ¥æµ‹è¯•å…¶æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæµ‹è¯•ä»£ç åŒä¸Šï¼Œç»“æœå¦‚ä¸‹ï¼Œä¸‰ä¸ªhashcodeä¸€æ ·ï¼Œè¯´æ˜å¤šä¸ªçº¿ç¨‹è·å–äº†åŒä¸€ä¸ªå¯¹è±¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1612280362</span><br><span class="line">1612280362</span><br><span class="line">1612280362</span><br></pre></td></tr></table></figure>

<h1 id="5-æšä¸¾"><a href="#5-æšä¸¾" class="headerlink" title="5. æšä¸¾"></a>5. æšä¸¾</h1><h2 id="5-1-ä»€ä¹ˆæ˜¯æšä¸¾"><a href="#5-1-ä»€ä¹ˆæ˜¯æšä¸¾" class="headerlink" title="5.1 ä»€ä¹ˆæ˜¯æšä¸¾"></a>5.1 ä»€ä¹ˆæ˜¯æšä¸¾</h2><ul>
<li>æšä¸¾æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œæšä¸¾æ˜¯ä¸€ä¸ªè§„å®šäº†å–å€¼èŒƒå›´çš„æ•°æ®ç±»å‹ã€‚åæ˜ åˆ°ç°å®ç”Ÿæ´»ä¸­ï¼Œæ¯”å¦‚æ€§åˆ«å°±æ˜¯ç”·å’Œå¥³ï¼Œä¸€ä¸ªæ˜ŸæœŸå°±æ˜¯ä»å‘¨ä¸€åˆ°å‘¨æ—¥ç­‰ã€‚</li>
<li>æšä¸¾å˜é‡ä¸èƒ½ä½¿ç”¨å…¶ä»–çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨æšä¸¾ä¸­å¸¸é‡èµ‹å€¼ï¼Œæé«˜ç¨‹åºå®‰å…¨æ€§ã€‚</li>
<li>å®šä¹‰æšä¸¾ä½¿ç”¨enumå…³é”®å­—ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºæšä¸¾ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">	MALE,FMALE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æšä¸¾ç±»ä¸­å¿…é¡»åŒ…å«æšä¸¾å¸¸é‡ï¼Œå¦‚ä¸Šæ®µä¸­çš„MALEï¼Œå¤šä¸ªæšä¸¾å¸¸é‡ä¹‹é—´ä½¿ç”¨é€—å·éš”å¼€ï¼Œå¦‚æœç±»ä¸­åªæœ‰æšä¸¾å¸¸é‡æœ«å°¾å¯ä»¥ä¸åŠ åˆ†å·ã€‚</p>
<p>æšä¸¾ç±»ä¸­è¿˜å¯ä»¥åŒ…å«å±æ€§ï¼Œæ–¹æ³•ï¼Œ<strong>ç§æœ‰</strong>æ„é€ æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">	MALE,FMALE;	</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> a;</span><br><span class="line">	<span class="keyword">private</span> String bString;</span><br><span class="line">	<span class="keyword">static</span> HashMap&lt;Integer, String&gt; hashMap;</span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•å¿…é¡»ç§æœ‰</span></span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">Gender</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¼”ç¤ºæšä¸¾ç±»çš„ä½¿ç”¨ï¼Œç»“æœè¾“å‡ºFMALEï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testGender</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//æ„é€ æ–¹æ³•ç§æœ‰ï¼Œä¸èƒ½ä½¿ç”¨newæ¥åˆ›å»º</span></span><br><span class="line">		Gender gender=Gender.FMALE;</span><br><span class="line">		System.out.println(gender);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-2-æšä¸¾çš„æœ¬è´¨"><a href="#5-2-æšä¸¾çš„æœ¬è´¨" class="headerlink" title="5.2 æšä¸¾çš„æœ¬è´¨"></a>5.2 æšä¸¾çš„æœ¬è´¨</h2><p>åœ¨åˆ›å»ºæšä¸¾ç±»çš„æ—¶å€™ï¼Œæ³¨æ„åˆ°è¿™ä¸ªç±»å’Œä»¥å‰æ¥è§¦è¿‡çš„ç±»ä¸å¤ªä¸€æ ·ï¼Œæšä¸¾å¸¸é‡æ²¡æœ‰ä»»ä½•ä¿®é¥°å…³é”®å­—ï¼Œé‚£å®ƒæ˜¯ä¸€ä¸ªæ€ä¹ˆçš„å­˜åœ¨ï¼Ÿ</p>
<p>æ‰¾åˆ°ç¼–è¯‘ç”Ÿæˆçš„<code>Gender.class</code>æ–‡ä»¶ï¼Œå€ŸåŠ©Xjadå°å·¥å…·å°†å…¶åç¼–è¯‘æˆjavaä»£ç ï¼Œè¿™ä¸ªå°å·¥å…·åœ¨ç™¾åº¦ä¸Šå¯ä»¥æ‰¾åˆ°ï¼Œå¾—åˆ°ä»¥ä¸‹çš„åç¼–è¯‘ç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Gender</span> <span class="keyword">extends</span> <span class="title class_">Enum</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Gender MALE;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Gender FMALE;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Gender ENUM$VALUES[];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">Gender</span><span class="params">(String s, <span class="type">int</span> i)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">super</span>(s, i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Gender[] values()</span><br><span class="line">	&#123;</span><br><span class="line">		Gender agender[];</span><br><span class="line">		<span class="type">int</span> i;</span><br><span class="line">		Gender agender1[];</span><br><span class="line">		System.arraycopy(agender = ENUM$VALUES, <span class="number">0</span>, agender1 = <span class="keyword">new</span> <span class="title class_">Gender</span>[i = agender.length], <span class="number">0</span>, i);</span><br><span class="line">		<span class="keyword">return</span> agender1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Gender <span class="title function_">valueOf</span><span class="params">(String s)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> (Gender)Enum.valueOf(io/gitee/lazydog036/meiJu/Gender, s);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">static</span> </span><br><span class="line">	&#123;</span><br><span class="line">		MALE = <span class="keyword">new</span> <span class="title class_">Gender</span>(<span class="string">&quot;MALE&quot;</span>, <span class="number">0</span>);</span><br><span class="line">		FMALE = <span class="keyword">new</span> <span class="title class_">Gender</span>(<span class="string">&quot;FMALE&quot;</span>, <span class="number">1</span>);</span><br><span class="line">		ENUM$VALUES = (<span class="keyword">new</span> <span class="title class_">Gender</span>[] &#123;</span><br><span class="line">			MALE, FMALE</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°Genderç±»å˜æˆäº†finalä¿®é¥°çš„ç»ˆæ­¢ç±»ï¼Œæ„å‘³ç€è¿™ä¸ªç±»æ²¡æœ‰å­ç±»ï¼Œè€Œä¸”å®ƒç»§æ‰¿äº†EnumæŠ½è±¡ç±»ã€‚Enumæ˜¯jdk1.5ä¹‹åæ–°å¢çš„ä¸€ä¸ªç±»ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ‰€åˆ›å»ºçš„æšä¸¾ç±»éƒ½éšå¼åœ°ç»§æ‰¿äº†Enumç±»ã€‚è€ŒFMALEå’ŒMALEéƒ½å˜æˆäº†ç”¨è¯¥ç±»æ‰€åˆ›å»ºçš„é™æ€çš„ç»ˆæ­¢çš„å±æ€§ï¼Œå°½ç®¡æˆ‘ä»¬åªå†™äº†å¸¸é‡åã€‚</p>
<p>è¿˜å¯ä»¥çœ‹åˆ°javaç¼–è¯‘æ—¶è¿˜æ·»åŠ äº†ä¸€ä¸ªå¸¦å‚çš„ç§æœ‰æ„é€ æ–¹æ³•å’Œä¸¤ä¸ªé™æ€æ–¹æ³•ã€‚è¿˜æœ‰ä¸€ä¸ªé™æ€ä»£ç å—ï¼Œåœ¨å…¶ä¸­å¯¹è¿™äº›é™æ€å¸¸é‡è¿›è¡Œäº†èµ‹å€¼ã€‚</p>
<p>æ‰€ä»¥æšä¸¾çš„æœ¬è´¨å°±æ˜¯ï¼š</p>
<ul>
<li>ä¸€ä¸ªç»ˆæ­¢ç±»ï¼Œå¹¶ç»§æ‰¿EnumæŠ½è±¡ç±»ã€‚</li>
<li>æšä¸¾å¸¸é‡æ˜¯å½“å‰ç±»å‹çš„é™æ€å¸¸é‡ã€‚</li>
</ul>
<h2 id="5-3-æšä¸¾é…åˆswitch"><a href="#5-3-æšä¸¾é…åˆswitch" class="headerlink" title="5.3 æšä¸¾é…åˆswitch"></a>5.3 æšä¸¾é…åˆswitch</h2><p>åœ¨switchè¯­å¥ä¸­ï¼Œæ‹¬å·é‡Œçš„å†…å®¹ä¹Ÿå¯ä»¥æ˜¯æšä¸¾ç±»å‹çš„å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Gender gender=Gender.FMALE;</span><br><span class="line">    <span class="keyword">switch</span>(gender) &#123;</span><br><span class="line">        <span class="keyword">case</span> FMALE:</span><br><span class="line">            System.out.println(<span class="string">&quot;å¥³æ€§&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> MALE:</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”·æ€§&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>caseåé¢ç›´æ¥å†™æšä¸¾å¸¸é‡ã€‚ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¥³æ€§</span><br></pre></td></tr></table></figure>

<h1 id="6-æ³¨è§£"><a href="#6-æ³¨è§£" class="headerlink" title="6. æ³¨è§£"></a>6. æ³¨è§£</h1><h2 id="6-1-ä»€ä¹ˆæ˜¯æ³¨è§£"><a href="#6-1-ä»€ä¹ˆæ˜¯æ³¨è§£" class="headerlink" title="6.1 ä»€ä¹ˆæ˜¯æ³¨è§£"></a>6.1 ä»€ä¹ˆæ˜¯æ³¨è§£</h2><ul>
<li><p>æ³¨è§£ï¼ˆAnnotationï¼‰æ˜¯ä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œç¨‹åºå¯ä»¥è¯»å–æ³¨è§£ï¼Œä¸€èˆ¬ç”¨äºæ›¿ä»£é…ç½®æ–‡ä»¶ã€‚</p>
</li>
<li><p>å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡æ³¨è§£å‘Šè¯‰ç±»å¦‚ä½•è¿è¡Œã€‚</p>
<p>åœ¨JAVAæŠ€æœ¯é‡Œæ³¨è§£çš„å…¸å‹åº”ç”¨æ˜¯ï¼šå¯ä»¥é€šè¿‡åå°„æŠ€æœ¯å¾—åˆ°ç±»é‡Œé¢çš„æ³¨è§£ï¼Œä»¥å†³å®šæ€ä¹ˆå»è¿è¡Œç±»ã€‚</p>
</li>
<li><p>å¸¸è§æ³¨è§£ï¼š<code>@Override</code>è¡¨ç¤ºé‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œ<code>@Deprecated</code>è¡¨ç¤ºæ–¹æ³•å·²è¿‡æ—¶ã€‚</p>
</li>
<li><p>å®šä¹‰æ³¨è§£ä½¿ç”¨<code>@interface</code>å…³é”®å­—ï¼Œæ³¨è§£ä¸­åªèƒ½åŒ…å«å±æ€§ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºæ³¨è§£ç±»å‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">	<span class="comment">//å±æ€§ï¼Œæ— é»˜è®¤å€¼</span></span><br><span class="line">	String <span class="title function_">nameString</span><span class="params">()</span>;</span><br><span class="line">	<span class="comment">//æœ‰é»˜è®¤å€¼</span></span><br><span class="line">	<span class="type">int</span> <span class="title function_">age</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">18</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨è§£ç±»å‹çš„å±æ€§ä¸å…¶ä»–ç±»æœ‰æ‰€ä¸åŒï¼Œå®ƒéœ€è¦åœ¨å±æ€§ååé¢åŠ ä¸€ä¸ªæ‹¬å·ï¼Œä½†ä¸å«æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨è§£çš„ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="meta">@MyAnnotation(nameString = &quot;å¼ ä¸‰&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ³¨è§£æ—¶ç›´æ¥æ·»åŠ åˆ°æ–¹æ³•ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ·»åŠ åˆ°ç±»ä¸Šé¢ï¼›å¦‚æœå±æ€§æ²¡æœ‰é»˜è®¤å€¼çš„è¯ï¼Œéœ€è¦åœ¨æ³¨è§£åæ‹¬å·é‡Œå†™ä¸Šã€‚</p>
<ul>
<li>æ³¨è§£åŸºæœ¬ç±»å‹<ul>
<li>Stringç±»å‹</li>
<li>åŸºæœ¬æ•°æ®ç±»å‹</li>
<li>Classç±»å‹</li>
<li>æšä¸¾ç±»å‹</li>
<li>æ³¨è§£ç±»å‹</li>
<li>ä»¥ä¸Šç±»å‹çš„ä¸€ç»´æ•°ç»„</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">	<span class="comment">//Stringç±»å‹</span></span><br><span class="line">	String <span class="title function_">nameString</span><span class="params">()</span>;</span><br><span class="line">	<span class="comment">//åŸºæœ¬ç±»å‹</span></span><br><span class="line">	<span class="type">int</span> <span class="title function_">age</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">18</span>;</span><br><span class="line">	<span class="comment">//Classç±»å‹</span></span><br><span class="line">	Class&lt;?&gt; class1();</span><br><span class="line">	<span class="comment">//æšä¸¾ç±»å‹</span></span><br><span class="line">	Gender <span class="title function_">gender</span><span class="params">()</span>;</span><br><span class="line">	<span class="comment">//ä¸å…è®¸</span></span><br><span class="line">	<span class="comment">//ArrayList&lt;String&gt; arrayList();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-2-æ³¨è§£çš„æœ¬è´¨"><a href="#6-2-æ³¨è§£çš„æœ¬è´¨" class="headerlink" title="6.2 æ³¨è§£çš„æœ¬è´¨"></a>6.2 æ³¨è§£çš„æœ¬è´¨</h2><p>åŒä¸Šä½¿ç”¨Xjadå·¥å…·åç¼–è¯‘ç”Ÿæˆçš„<code>MyAnnotation.class</code>æ–‡ä»¶ï¼Œå¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyAnnotation</span></span><br><span class="line">	<span class="keyword">extends</span> <span class="title class_">Annotation</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">nameString</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æ³¨è§£ç±»å·²ç»å˜æˆäº†ä¸€ä¸ªæ¥å£ï¼Œè€Œåœ¨æ³¨è§£ç±»ä¸­å®šä¹‰çš„ä¸¤ä¸ªå±æ€§ä¹Ÿå˜æˆäº†ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</p>
<p>æ‰€ä»¥æ³¨è§£çš„æœ¬è´¨å…¶å®å°±æ˜¯<strong>æ¥å£</strong>ã€‚</p>
<h2 id="6-3-åå°„è·å–æ³¨è§£ä¿¡æ¯"><a href="#6-3-åå°„è·å–æ³¨è§£ä¿¡æ¯" class="headerlink" title="6.3 åå°„è·å–æ³¨è§£ä¿¡æ¯"></a>6.3 åå°„è·å–æ³¨è§£ä¿¡æ¯</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨è§£ç±»å‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PersonInfo &#123;</span><br><span class="line">	String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">	<span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">	String <span class="title function_">hobby</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Personç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">//åœ¨æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£</span></span><br><span class="line">	<span class="meta">@PersonInfo(age = 22, hobby = &quot;code&quot;, name = &quot;chinvan&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String name,<span class="type">int</span> age,String hobby)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å§“åï¼š&quot;</span>+name+<span class="string">&quot; å¹´é¾„ï¼š&quot;</span>+age+<span class="string">&quot; çˆ±å¥½ï¼š&quot;</span>+hobby);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testPersonInfo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">		<span class="comment">//1.è·å–ç±»å¯¹è±¡</span></span><br><span class="line">		Class&lt;?&gt; class1=Class.forName(<span class="string">&quot;io.gitee.lazydog036.annotation.Person&quot;</span>);</span><br><span class="line">		<span class="comment">//2.è·å–ç±»æ–¹æ³•</span></span><br><span class="line">		Method method=class1.getMethod(<span class="string">&quot;show&quot;</span>, String.class,<span class="type">int</span>.class,String.class);</span><br><span class="line">		<span class="comment">//3.è·å–æ–¹æ³•ä¸Šçš„æ³¨è§£ä¿¡æ¯</span></span><br><span class="line">		PersonInfo personInfo=method.getAnnotation(PersonInfo.class);</span><br><span class="line">		<span class="comment">//4.æ‰“å°æ³¨è§£ä¿¡æ¯</span></span><br><span class="line">		System.out.println(personInfo.name()+<span class="string">&quot;  &quot;</span>+personInfo.age()+<span class="string">&quot;  &quot;</span>+personInfo.hobby());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œçœ‹æ˜¯å¦æ‰“å°æˆåŠŸï¼Œå¾—åˆ°ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException</span><br><span class="line">	at io.gitee.lazydog036.annotation.testPersonInfo.main(testPersonInfo.java:<span class="number">14</span>)</span><br></pre></td></tr></table></figure>

<p>å‘ç°æŠ¥äº†ä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸çš„é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯çš„åŸå› å°±åœ¨äºpersonInfoçš„å€¼ä¸ºnullã€‚ç¬¬3æ­¥ä¸æ˜¯å·²ç»èµ‹å€¼äº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯nullï¼Ÿè¿™æ˜¯å› ä¸ºè¿™ä¸ªæ³¨è§£ä¿¡æ¯åœ¨è¿è¡Œçš„æ—¶å€™å°±æ²¡æœ‰äº†ï¼ŒPersonInfoæ³¨é‡Šç±»çš„ç±»åä¸Šæœ‰ä¸€ä¸ªé»˜è®¤çš„<strong>å…ƒæ³¨è§£</strong><code>@RetentionPolicy.CLASS</code>ï¼Œä½¿å®ƒåªä½œç”¨äºç¼–è¯‘åçš„classæ–‡ä»¶ä¸­ã€‚</p>
<h2 id="6-4-å…ƒæ³¨è§£"><a href="#6-4-å…ƒæ³¨è§£" class="headerlink" title="6.4 å…ƒæ³¨è§£"></a>6.4 å…ƒæ³¨è§£</h2><p>å…ƒæ³¨è§£ï¼šç”¨æ¥æè¿°æ³¨è§£çš„æ³¨è§£ã€‚</p>
<p><code>@Retention</code>ï¼šç”¨äºæŒ‡å®šæ³¨è§£å¯ä»¥ä¿ç•™çš„åŸŸã€‚</p>
<ul>
<li><code>@RetentionPolicy.CLASS</code>ï¼šæ³¨è§£è®°å½•åœ¨classæ–‡ä»¶ä¸­ï¼Œè¿è¡ŒJavaç¨‹åºæ—¶ï¼ŒJVMä¸ä¼šä¿ç•™ã€‚è¿™æ˜¯æ³¨è§£çš„<strong>é»˜è®¤å€¼</strong>ã€‚</li>
<li><code>@RetentionPolicy.RUNTIME</code>ï¼šæ³¨è§£è®°å½•åœ¨classæ–‡ä»¶ä¸­ï¼Œè¿è¡ŒJavaç¨‹åºä¸­ï¼ŒJVMä¼šä¿ç•™æ³¨è§£ï¼Œç¨‹åºå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨é‡Šã€‚</li>
<li><code>@RetentionPolicy.SOURCE</code>ï¼šç¼–è¯‘æ—¶ç›´æ¥ä¸¢å¼ƒè¿™ç§ç­–ç•¥çš„æ³¨é‡Šã€‚</li>
</ul>
<p>è§£å†³ä¸Šä¸€èŠ‚çš„é—®é¢˜ï¼Œåªéœ€è¦åœ¨æ³¨è§£ç±»ä¸ŠåŠ ä¸€ä¸ªå…ƒæ³¨è§£å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention(value = RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PersonInfo &#123;</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„æ‹¬å·é‡Œçš„å±æ€§ä¸ºvalueã€‚ç„¶åå†è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œæ§åˆ¶å°æˆåŠŸæ‰“å°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chinvan  22  code</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ³¨è§£é‡Œçš„å±æ€§å€¼ä¼ å…¥showæ–¹æ³•ä¸­å¹¶è¿›è¡Œè°ƒç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//5.è°ƒç”¨æ–¹æ³•</span><br><span class="line">Person person=(Person) class1.newInstance();</span><br><span class="line">method.invoke(person, personInfo.name(),personInfo.age(),personInfo.hobby());</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œæ–¹æ³•æˆåŠŸè°ƒç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å§“åï¼šchinvan å¹´é¾„ï¼š22 çˆ±å¥½ï¼šcode</span><br></pre></td></tr></table></figure>

<p><code>@Target</code>ï¼šå…ƒæ³¨è§£ï¼ŒæŒ‡å®šæ³¨è§£ç”¨äºä¿®é¥°ç±»çš„å“ªä¸ªæˆå‘˜ã€‚</p>
<p>ä¸Šæ–‡æ¼”ç¤ºçš„ä»£ç ä¸­PersonInfoæ³¨è§£æ˜¯æ”¾åœ¨showæ–¹æ³•ä¸Šçš„ï¼Œä¹Ÿå¯ä»¥è¯´ä¿®é¥°äº†è¿™ä¸ªæ–¹æ³•ã€‚åœ¨ä¸åŠ è¿™ä¸ªå…ƒæ³¨è§£çš„æ—¶å€™ï¼Œæ³¨è§£å¯ä»¥ä¿®é¥°åœ¨ä»»ä½•åœ°æ–¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention(value = RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(value = &#123; ElementType.TYPE &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PersonInfo &#123;</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Target</code>æœ‰ä¸€ä¸ªæšä¸¾æ•°ç»„ElementTypeç±»å‹çš„valueå±æ€§ï¼Œåœ¨èµ‹å€¼çš„æ—¶å€™éœ€è¦ä½¿ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚è¿™ä¸ªæšä¸¾æ•°ç»„ä¸­æœ‰ä¸åŒçš„æšä¸¾å¸¸é‡ï¼Œå¦‚ä¸Šçš„å…ƒæ³¨è§£è¡¨ç¤ºè¯¥æ³¨è§£åªèƒ½æ”¾åœ¨ç±»ä¸Šï¼Œæ¯”å¦‚æ”¾åœ¨showæ–¹æ³•ä¸Šç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼›å¦‚æœæšä¸¾å¸¸é‡ä¸ºMETHODï¼Œå°±è¡¨ç¤ºè¯¥æ³¨è§£åªèƒ½æ”¾åœ¨æ–¹æ³•ä¸Šã€‚</p>
<p>ElementTypeæšä¸¾ç±»å‹çš„æºç å¦‚ä¸‹ï¼ˆJDK1.8ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ElementType</span> &#123;</span><br><span class="line">    <span class="comment">/** Class, interface (including annotation type), or enum declaration */</span></span><br><span class="line">    TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Field declaration (includes enum constants) */</span></span><br><span class="line">    FIELD,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Method declaration */</span></span><br><span class="line">    METHOD,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Formal parameter declaration */</span></span><br><span class="line">    PARAMETER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Constructor declaration */</span></span><br><span class="line">    CONSTRUCTOR,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Local variable declaration */</span></span><br><span class="line">    LOCAL_VARIABLE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Annotation type declaration */</span></span><br><span class="line">    ANNOTATION_TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Package declaration */</span></span><br><span class="line">    PACKAGE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Type parameter declaration</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TYPE_PARAMETER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Use of a type</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TYPE_USE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ·»åŠ å½“å‰è®¿å®¢ä¿¡æ¯</title>
    <url>/2020/02/22/Hexo%E6%B7%BB%E5%8A%A0%E5%BD%93%E5%89%8D%E8%AE%BF%E5%AE%A2%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="71c7766a00c0c33de2079744662c8a8a1135dc3e0302f3520cb20d015cdf1960">a4d71f05c78391253da0c711f50d233f59077334aab1b3c07f77ba04b76a4ada9f7dbcf6389d1fa3b90db693008cf071d56f5215b4ed988eee8deac0cdb26869c30697dc8548adf1a036d53987722ae5e73cc810d57b6d6db78427927762af0e7e92b2e83c93a41443d998f6d9c44a8b18255946bf1ac71a9ea04dd0d38ea7f232bcf322b4a8bfe212af49b2950d8ebf0117a45060359388a02aded5f2d82f109bfccf42e870ad3acab64ca6582448d295c34ce8e3dca61ad9904107f7e144c496287866c9ad53304adf05051f7d9982808b134ceccf2fd8379397adc3a1c122183202a6d28986e44a89b130394e96d241663cd64815e34176de171742ec85116e558ed82bc935740413dcd2cf38276dfa1f8ce19ddc589cc823ca5f82b69cd9a8f7300101b1e98cc222ae397254a022a8f6f908ea602944e3cd730140d1d93ddfc3738ac8abc57717775b4fe07b782b927a356e6a485e9daf793338e870e905c034161e9d066c68b314d941445bc96698a418c9f933458ecae5143dafdc29e66027e1d5238d058360e95312afc555d729b4dc66e423ed639127989689acca6557ea0f2285f5bae4ace4312c5555c3d0469a75c368233bf390143ba250f3fb413b7ea7b36c1e14e62aefebea7ab742c0476c52c2635c912b20d0f99f9b15073db4b92da57ba3e660d3560a0ecd2f8f026588203691b5a35cb9fb1696c7fb9008b2c962a850a031f3be053bb7e5148505090d865697c5fcefde5f3eeea7f0bbe018e8aa89aae65a2df24b7dfdc41fbf0c89c928b6245a5153a8c1a4500db087ab5547ba6758a57ac396017c62e577e7ade301a35c52c23a3d1530a0dad9ce14ed5b7ec172a5a9a39a22c3d9105b58a6c6f5426dac3fb0bf651cd2f03fa2a50107a7a8382e27a252d92702d5e51f61d8775d31bebf633e3add68242d3e7cf8415829f7ff4632f52ef3bb64270ec1a150cdb69193517fd26618ac651db3badc504621f8de2f969f8faced2b06143aaee5d240ee9ce4f218ea3f18411b95c998addd6b7802625fea01db5c8909df20361fe03435438199869412bfe5c18aa895b1e83d83b1c077d2f8b1b5ffea35228373aed46dadf4cba575b70c01624438a831364922209c7ed51d9c5eff706ae8516599c602f02a842169cfe56b86ec6840733a47677cccbc4d640df12f4e0608a9014471dd5081917b8ba3146b95872494d9eefb3318941f61272e3dc34458f743db4c1ec2259e5a03cdd05cacbd28bf22af30f54ca497be00a407913db9cdb4deb8da7d631c5b94e0b295cf9ccffb6b3318af07982520adda77b5f9acc62d324b4bbaeb3c6143aeadb938849eb38ebf84990802f67a0670ee36aeff14a2fc6e8af4fd9a278f9a3aeb7f9bf78f2067828820aec1d3f5048e312f9bc6cf9901ccaeb682a922a43c7d7bc3b36f3ef6e2dda400e41789e0e0664778e81102edae1d544c69cc12176f145fa93a32f18a7cd0089d60ab12d0755d7484d8b13d030637cbf9d6cfda50cfd559789e944f033d91522f396bff74efc013fa0b29358300ef5183fa184f4697e8372699ca48b12fd089b1e2199313a2b8e5ff799875ffbf360016a5b42b0b192af11c3046b6fe9c59e69620dfbd2eb588fe839169a1ee6d2a15976a0382b397deb27a5c10f867c18e785ccc3530d2eb55f0505da99db32b8c6e99bc80a74f94781f7cfd6ac7aa0b826dc7e3d0026f2d411de22d1df0cbfa869a130bd75b6a3504ec96f64ef6fe2ae68df4d6701a542c72e6cdbfe55af8d900bdfb0bf30773d46d682a1a09b7d37cb8c84ceb2f1a6e738d3c6855ec4dfa7528488b72bad3118fee71c22091a7b71146db9ddac8c70475056f89c331da1229ea7d1d9dbfa12da82e0e1d1839d22cb9f94f36b69b490152839068b63c9133c6da3af17e609707a245d7209c6cb6b5186e6c890b790a630f9d55cd62ff695215a2200c9eefc02ec4613e1f46efd8d655138fb29c65b6bfc3505007901b00e3cd425d7941d807caacb316c62b8403a486cd5370684508af9e72e1718d6ee8b980bca38851e56db5437c3e94528b6d199e97cfff7859406e0d468257fbabb8e0b92038c8984a07ad19c893f7ed4248c2dc414e8f34f6d0485ef41e95c2789583abb7b03d8c33731dd767788e94dcb02de9591a78de7411fb5c441bb55e5fa656505f81cd80bd41528acc991710b19f6ff6a4877753e850dea538c77cb1a9d9657f07fb8143aac4b7c3d5efd6859cbcb9445fa3ad60cd4b1cb1d73d3ae3615820233521489424da8c449d16bb11cbf8a213e2b95e0542bdf760af336452af872a1df48a227c2295411ddc6eb9adc0c751becc5badc3dfbdeed7779087b999dccb13fa31398f237f8e0974c7042a470a5cf31bbe6423c9f6d3a70c576e5d59c37e69c22e7b0505bb593d39ca1de7f66928245cb9e7bc3f5ac695ef3bb4f6f182543f54c4edfa0fb87940da2e5a57b2d84422e0b60e70befa54a2340146452bfd73ee6e189d36abde232202a0406d815b59170b7a16f33ec617823acb7f47120614d299332a6f32f02652644286ce8468cc052aa7e51e0c56f139d672834dedbca510fcb5f55130641f433da4022e4cf12886df723a19a3769afdc951fbee9234401ddcff4e8d9e5ceda5a8e3519fd1ce66ac82dbd5b17ffe2d01f1d03ffa484559e272276fba0e2e497bd8ff3b8e492c0c2bc49dbfe16ba3201c67c2b7968d574fbc0536e6616280d989effb26a98b939eb803e06e6e5abd9c836729f07450a155f873ad1dd4ee80db0430bec6d1821379b3e154e56cd4e847922e6d5e0ddc52912aa412b6f3000d187017d19967095875a8007272141861e5e5bb414edb059ffa2dcf2b56e432e4b52e52ad51b5549e0b234ea12a5307a18de7636564df2501dd516e0f34634e9413d1961dba7dbd98472e6416b82fb000fd4c5a6093e8348cdef03c9d58fe9135b8345d38d5a1cda6ca871844646b54e550cba0b7f3363032188a3713d859f682636a4e08ddc61458f0401b67b3f6fe9a5aa12039c9557309a565738c15d5ea810e436aa25cc6b9916ff7c90cb29b0dd58ca559c870f392fb5bcc416bcd2ecfe9f9bf2664a7bd8b349ea65c329c37335b2e636ed3dfabed704ad618598712a22b753611d91fb59ed8cce3536f15f4b6f204a30643c3ff29aeadfcb7d51708454e834d72f4ff67a028a65d4eef120a22b7d5bd6ba4fc606b2354ac91698885600e9fb83e0d995cebc2101f6458c52e284dc9e8307f8f61feb535f2115da236220623c4dade5c2123b94a8547ed2f2f10ec53f87cfb37c62a9ee903effd6e986cad6f0147fc244257b69af02bda368b6f2bbca5576b3a5b561ba9726537a7bb92d1640a4e12bf57e2c24ccb3e2f5a184684d4c98732fa9110e8b13d002c97535aab00a9210f76bb0540257bed9c9f73b2cdb63d9348d4a58f3bc5415a9627293580d6bd74b2f371cbfc3fcc878b644d490c473a253f7b1ff5988619a5d7b41f9c9cc3ed7328f7822725f622d9f7f1d9daae9a7a30e98fac0ab9baf7ea90f038b889bbb0cc023d20d516bf39984071a64e2a874a1962924f03bbf3803f4d69eb338bc6cdef43ef68b55d495778b344e3310f7ccf39a21caebd1c20ebfea9f98ce4ebd30b2d7debcf03015e1a5d1256fb4b67d27d574b76beeeb2992cb8c0e3213c1fbbdf4276e21a21b9bfcd32b110b1cea4704ec87e308f973f5177d20374f3a436446b4ecbe65af840ef82d9009749f7e3dc712e1757331cc6ef6f61251a95bc9a377106990d9eb4cbd72f593f7b36a8a240b07dd058569d9a7be0a3f3f16d711a9b5d09a48911159caf93951ba3456d0edeb420c76604c02cafd7d2215f72d36a151591349099fa6d855b44bedb7d7f78a5ee4f848b357141f2c2a41ef41cb85f162431e6ce088bd93807fb86faa4bb3a46c0c291df8534024e21fac97caddd72f37d83a82cef80aecd074e12867bc3132c17a3cf0650b64245b106a8ad7c5781937fc4713ca4becf160265d347a53a5e84ab7a2c2e330044b72d9acb73ec309c935d2b7db32c16a9d88337fcea6e2b42f7e4c6f39f4f0a6e940227f693e87efa723e5165f69ff13bdc2395dc9219b34305d44b8069b6ea28082ec93250e8d1c5d195648602d05a2496751489733ccb3fe763b6aec00bdbf7d777e06437f77935ed075befda35fbb68b054727912edb320740e0fe52a9cf8532211778bd4af78a60e89fd0474ccf26e7083f4a27d8c81a6dff56e3592069796f769d3d989a3697c891e819b396ada758f57ef18d6e272aeab69057602b237d58ab867813232627209ec3be497d1d4783ff99d854d9b3fb33d871da5ebf51e43b5da9d920a1322c85b1d1693168318396e835721d767fea661d830a366ef4231fd69eaeb157fe3091ceb636f8cc5b0067e70aee30d2d7473e1a20ec16c6620b371179e245c2444fa1aa3887bf705950a8ef135a8711c6627faae83a8354e17c11cd0a5dbad3638ce4bd407a5bd6b92d34bd50bbcb3b0e6a3bccc5cd93bfee3bc495ef815f53c585abfd2b0f9903591d7534d191d794ac08378dd862e578f72fe3fc7a16745031b3f37a5d616608436431a8b7ccdb5147c94e5e890a36c04635a9d9c987b3a4b961f7c5dc3731086a2c8e53a71e78f555aa76c4ad974db8ed8762d13f65b3ca78be247910f5c11ef808482379f5f9499379d84c4397f3116b4f3554d4a56f080fab18e08f6a027676e7e31894d32019191bbebafbbed58787676c8db48c6191a9a9964fdd713af56ff6002dfda5de2196ce29ae76b783bd123546d3f11fc74dcaf7309730302740b9f86ef9bdcab73e8214f4d7432c29eb82e4a68b293fe6c8adb37410e634e3a958d63fae91507a807e27c84df6e791f0c0a4bf0cbd2ecac9e34e5e07b0e7ed4b2f328041a0e17195a0849df4062f81feea9e99a4c47985d3e7c8e411826b740744163192e7230a5859208d47351b75b289a1598cbab34f3dab25cb543aa470bd09551f48ade67e1a32807dc1330a907e91918af77a9c032c9d14628d8b5c3465e706dd3c2ed572cd704a95d9d982a8a302441ac5c0f90a36ab03b6a97f04cb83b656e3a2963d1d93a00267fe8b9c6208b3bf281084410cabde242533e81016265aeb0c265e433697f0589e4a1ecd869ce356edc8231cfc979fb4e6502de4c14cd3c0ee810da26e38d5612686cb8b871c39df6fde52dba551f5d59152ee1b67e22194e3710002a4ada818fcf8a556865d5cad877b29913ff0ce79b4987958a456fb3c6806345da7cf35e9b02130f7aab3ebaa962ef37e6f59ab0227d0d0c538b1836346850349bfe788d3d99652a3f9bd2b871598f7a77ad3227d242cdd42396d6f28741eaadbd4d26749a8ff9cba0625c658b7ea0b46001c62e36dc17cb51cab137198a79dcde4043894873369f622baf6d011963bc47d72cacd3a29dcb12afc3659986fbe18ea1f560c4a91d8e8fa756fe1dbb018b80aaf0d723dbdf7c91ec536ad1dcf3e841d759a0807a8b5b8d248e0d15ac279c79d6cd07a06de406f9d8caefc089b4c5aacf3956944b7555065b3278d8809be5eb97bf6b72ad2a9c0d9292b0327238e1fc9a0553a9c0dee8a0dea21a0924dd2a2941378cf7599d5eda5bf00f1871f44cf2ba32263a69d2d4a2be67d3e50210f20bbe851ef6060afa3e310358e164e8525ec45060bee14dded99feb8227681ccd951179e287a8b9698b5bfdb306e0172d085e73e5ce52d8f1d8aac13ab90004deea0073cad3554871fe6f098293b1a7443ca78ea259acd62d049ef74ee582cec3838e5e5c2fde006d0188a3844f8e0d1fdd7ee271eb625711ec9386fb1a4624555b1ea9e611cde312820d83a424d3452b3899c5fc2876da44ebb89e87e3d71f1df017d401dd0248a53db404d3fdee145d8c2c3623325a530b9f4b39a1526c7d200f3498baefe14d91f5931f5b05f401ab067c2229cd9f28898079f5a9695df07e503ba52a22e7bf1d1eb2a80166f9c67db641839d99890292048a795c64fedfe4624225429b929f6cb816f65807204914147dd53e6d87aac572f4a8c1e0d76ba45c64c16b8db1becd2ad7b4acab1ff73a97ee85b448acafd637289841b103f5d573c5ad13b9f7cf2b7b7b523efe8cc03890b1a411f4f178a05443398f476ef358b128c0740fddc87ebe56ef8642617c520c53722729623f65b9f290070f221037870a3314842f09b30838a62840d924cee4cc3255702c1833d94474de110e687f3d3df0df1975e84bfac9dee1901d8654a8f18b4b85bc5e90a7e618ed7fd11d68a1d20843459c750c6831d3e7310e274a5cb4793e1aae078247d363df10686010a5b24c2acd71076fa0a812d6851bfe9ae8b60893ecb8dc03c6f788549e98f45c283d579d8ada317de3f610d4fc0dff21dfeef812cb28f4ffaef9fe8f61efcf92052d977d9a88f84dee62c7f0e267338f31403575aaf2926dad9863b6383bd75245be3534491c9caebc0fbdab131da0cd76b5f8441027aa111ea699c5909580128b803775db2152a0eefbd293e296313aa7b5a218dba565b86a73030fa9e2cb15aeb3915f1139ce0b2d91d048bfa22225532b9241ead20117c740f4918cbf5323b52760c8652488fe31f8da8084e8b4d2de6fe5e896961d8f748caae54164d737ccb4a2955cddae1ffd63cde21b8a9fa36b8b96381985963b792abcec9e31868a7f31bb6a8c83d5e9d7512a455fa5a5d97a9aeb98fc2e3820993b5b0a8b50b7764b99a103fda76ca7bcfa46be5d4c30321dcda0e038551c0fe1d741ec20254f40ec2c4e444bac65bf295ffd2e43d1aea136d1a8fac80bb0129ac6b8dd3555c7a81cfc6539151386da0e76d3b647f9d43a70baaeecbf8acb7207f8d0fd5ff549704696740f3307e1cac51d6b75c9866fd857d78437b956c5f20eb491ecec7cd242a0aef4a05a36eb0f298aafc6a587c4b6fed4bb8cd38b7c8c33ebf90e4aea23e56edacec74ba7a40b1f496aff4a549940100b2c6fe598e23380b8ec2efd1b0c120fc8be28a4aa679cf2963e490e41804c93410d2394e40ac92559b892c3e3c3c86cde03c618775f8fa4a24331ee3dd482964cb450bf2c1976b1068dd7b9f68806580eee1002824f0e02a57051bee6202329849dffd207340c89abd102f118ecba3bd357507bdd6ae1e50f7fa3f22724e9fea316d8e9c27aa84f7b106d6f1540a2887e2ef3265a40561ff7452f9c4c0d7984bf3c695389468d0cee5d818949a0738da20f7b91528182317ff5ecf66ac445b2df6df725cc0be6cd638a1b3b9f3ac3d4b9b546a66f050cfa33a7b52cc08403bc95d56f2089515585d9a791b156cb2cf7c54ed09c3e762737c1c17f3e0e86efa27be3a5ef386a79781dc3aca7354a091ae6e8176111c7a9083b6541e1afa50ef2220a961eb4290d2feecf8347d15e7f68833f7751f1266390855464ef5a4f9d5df9bed4583122cb7c1f50a85b53d5de162959f77514852c2eb95676078f168a82fe2f2082d450cc91cb95b3bfe1efcfca1d08e5ed256de83d6f149f60b62edfd4599e414f7d0d82ad50640581721aa201608d786e6b932f2bda7080379d9a81bc5a885cc09c7ed801c0839cfcf1841998da886c5fea81f2d5e455586e67d4fab24640be7d9bc7b1abcded656ef2ba8aa476e8454e1aaa6bf8ea3293803555c5008c25045bc29e39ca43c1bdec441da715dfaddd3b9df3b72a2f045699317dcfe1739b1a33559550144b0f1c0542f7a76193ad78d4c6496b035db9aa4b7f0e19d740726d4bd37c649bce0a0e44a054e8a128ca53509b170ddc34d9db6f656cb038423e236c6e54ff4e25d5cbc568c1f16e30b0d104c84adb44a97bc7c4eab591947fbd88567b84fd0832080332b751a79c7100f7bdd779132aed901392dc7345217e6244adf640e4caa7885ada3d29ecf754d7ba10fc1c12110e659812aded9a1e71654d39fc3fd41b206e4ecdc918cd917315982cce97704d5a1fe0143a6d5f03c541b13d11eabe6a40f690ef867aa49bd25c0995925a284bbd81d2f22d6df880f961351c5a8e3af93a27822e041afde30f1cb55adf58d94c3845f8e49dd77125ebf0f1de77d030d255330b71bc5fed77a00c7633a57ff526e9eed9ea975bff2eb05d4d49d2a5245d71919c7efcf4eac908af109ab12f05c0a3af1bb9e8b9ab783319b4b6bdcf886a6f0f973a898d457e584719219637a080335aff1ed36c9ed4292a1fed0165d1a48fa937654615bfc61c022f4b8f735f495504c75e9dba87deb11edc07c33196dc4831b0929c7ee01ba0db2b3b6cf7151cab3d10e1b2aa4354e4fa83f474f94dfe072d3490265ccf7c848e8a3ba0c05b04cb144b8b09bc45589cf003834fbc5c1c34668cabf57de7dbd016d7b2378369a61b6c0f5e424e28df38c2472ba86e77eb3d00b4758cc1ce7a7e5294ac49aae670060d2246bc35457ff2fab388291b54329d5db4d495b8ef7173675f9f38ada13122f155cbe1fd13866b10e25752302fbc56db41b0b76396f32e6d7281b3a5cb901cea71465f8e19797ec685da424b139f42d008027286a7d4a3f79389bd84e9864e5b3e7d5cbbd7bc918e45b2e56681e5cb6a25f911de8c4f777a2478ba28a3770c8e348b55e04972dabfc5459623c63afc8d285514578a76fa12241fcfd4139812d0fc45c7184275423b8bd37a733da953b7293ca4f9da11bb3b6e6656e0dd9a4355caf4ba3dff8d03580950821773f3e75c5ec68a078ac4850e0aa2964b51cc2b2280135c2af8c8925756ba9df7addb0c075affedd5eb31100b44e184473a6ae0390e904b1228a290987229c9ee00b3204b3f6a81452856cd31cc2aa3ddbd6869273d6d4dc933ebd0619b4dc9a075bd8defd6465b8180221f2f3d21626be00a6279a03d4f7b27cf7b899507988dc2b9bcf6086f5d8ab8f8bdf8bf90f28df4d360154249d849919d9018a31521df72f36475bb8f566e4e8c35f6eb21850a6c1110b5646241f1e418d44041f939a245e020a4a90da786041f931479f0cb2e8cdfe858b9f1a663e8487a8e16e89e63c9afec6d419e127686cbdc354e271d45e70c883e5886b817eb7c2c9358b4f3eb3f8a6bdd55c8dd3917acc693eeea0c3df76f0fed207a1182a3453d962703601379c0a83b7d9c9daec14a7d188c3ed58409d339922b905a6f1abe13177611d14bb172e094fea152b73e999e090aac6d0b256a8b34db4beb2b6e92b553167b56c6275ba68f216f141f5de3fc13c683b1c500aa4296740bcb819abb33193ab2a84769be07f7dedbb7c77d4af5f4ce457d9d31fc6b71bd593f022b6bbc7473bf97feb5a3d3ed7f4e185e3d47d3a65eceb1630bbf2a33148449283164886f9e48aef9ba957c88dc5cf640c043fcc450b7fa10e899d9bbb875325a2896ed186e51d1238c92abfc56a909d0bd3422ba978385dee432f8b2464b3f50fcd22b6da6e3dca8bade7834cd9307f476e4b8641752cac878a13e3c50d96ec6205573f4feb7006eea58292e70d01f75f57647edafb603cd1c73ce11a9591e3f0c0ce33d66086d822c2797b2515372a084220712cc73ed55f068b8fe51797d6ba6c30de5af547d3c4fdf58d43e3bd4893f1cfab90ed810661c8455b9b05f4bc76393b841266ff74ce32c9d79b6b3ff291d75ec718ac860860cb1d6bcc62bb786f6e33c95ad0a42514b23cc849e04071d2e1bdb487cb78a0cbbfe9c2203499b74d4b1338d3a09e740912e479eedf3092f077ec3a967f67cfed6d62350e7e76583be05dcacd66016615a85c87eb6d08cb9e0a471da2e445d3c10684175a0e08bcf47bc3e629913e0ba82947b7b9798b9599091c5740b3dc34916f3bfc518b25d54b35bd6b8a418d0cf0c036a1862b8665eae13ca9b8f8b3ef97f3c5cc4bf2473200a1f5e13a0f958fac70018619e49f3ef5a33bd31b8809bdf55dfc10d21027fb981af94005fe5860c5eaaf4a73431b74848b4ba2611d6c4f74a32080f0e6852f6a4c323f424b0d45f23c310e8e138ab4df366cccd6e6fbfa0082ea0757ff6ef5fa981a614d6edcdd3018a4baef632db5ce77e454e30018c1334c29af6a4c23a92eb8e1ee21dc0622fbd3d90fce3d10b45ab470bc442c05de27cff5ea45f62d89afaf56493749ad9201ccbc1b9d0856d4bbbb8222a5a900c1546924f637e83dbb954b481bc3859da964a0c4963e8e83c6a96595ed3b06cb8d4f3d5eccddc194da102327f32680c49a195439f1b2f3bac0f0d3fc99fa29c4220711fd487a0f4ed09ddb6a27f04adef8acc20259076a2645a2d4e3bc3079ba8d62f3878f7729edf19c057f377e7bec064131508922b9ed6896131885e1467ee1c9f1a5a9cf08c93c3eff0c2877fd67514adbb73cd2af99adef967599420890da7e184213807a75b53a3af2dde2d010a02da5bef15f1cec1c59b831c2a886905383d0c3f49b9197872122fb844c6fcdc4186becdd1c820c5c1b8e0d3c1d7b6c4e8e6bb401a24a3e81f04470c426d88a20d22d31143985908fafab0b3310a1ed939abba442f6e4159dfc4edda41fea40b128294b78741045b4f3850cd2e364af45d214e23ae5e6d8f31824a278ff5bb4026b3febe6737b1f0af40730575630907d00eb4213f2e0807ae13edffa322d10f8db23da022947826576a8bb5a78c93720d6ff144903437767e305a1bf7510e3ac9a7a48d9f8e3a2c23fff8ec32653ceddc508f3e1669be8ba7bf4814fca5dd6ad17a223ec86de7cb04747e70c6ff33b92bf35c535fd413e6a7715a155208ff81470b4296db4dec356d4dfb87f11e6821d32b7e1ed3e94565e04c383243423ab6c130ed839f3b206534b7fb8595ca087f88a200e78b537be1be46878ca696b79ba568603123792b7c499180412e2d34c1610e6a5e7ed32da08e028a972d69fc6fe544004ad187a11f3091a439af38a9d97f4e4b29b006215efdf4cf2a0c95be6fd6b45c7c76207a744ef03ffaabb117952a4d4ce83e2167f2a5406dd78471f907a2f5553e8a8a191e9031cf2326cf3882a5ad85cf4ed62cd6eb09119f697334373f9b0805eef6a4f7c663fe54aaeb2fff478458206eaac88ae3bdedf7aad09d312c3dcfe5eedcfbe50d98a4c4c79beacf631e211b311d2548e5f118fea74e7ad4f1489080453ae38be5c726f6a05c1674252c388191d1facc3437e2c26078c4780758f64165dc9b0d23678734b0bcaad9449fa5b6636cbe890437e0ee46b44920c7ec55e9828f34757cc8521091de699127e5285b88fb5d92c5ec7a21920b4150ce32702354fdb990c15c046827fcee7356a8e64680ddcbb9b2ba40f8493e3643240eecce2ebc4828959ed72a949c7ebb6608717a590951a913b50fa02fb02dbb12535873833263231fc5061513d156beaac83fc3c28bbf60c822428feb305feee4effb7d2a435bc6bb021c2c84503ca3edaa24f12659f87f704bc0cae508498c25db8aa27fbe4ad3553b94865e1f8aa1e721680810dea6974857e956165a6c80b647df5d59bdfe0758fafaec1421da8a8e66fa2dd4b983eb5e029dc64cd64a40b1b0b4fa7c68c0cad8c8a59f14babc01bdcb16e5f17edd318d3c5549334a4cac52290aedf2370c4fec020beafcd0bc8c5bf07ef319b84029b046da18ea33b24484e5475cf51962323071cfd36dd17e8ce39e66bd2195bf256ea5b704827567f1a4288a0d5099f77f97af9a49f3df84255b374056b245a422017cf03efc02b9ad9b2dbc08f7576c5e9969a3b6e237170ae823f8c6d80eff4b24667eee3d4b8216b7a4d8df4f88211f864334f7cdc23fa74552fe3d8b5b36e59ac9b62c36ad4f2c1c09f79fd8e6461b86ea15ed9425f108cb9aad062cdfb79e72b046f8636e7a027cfa30236af11b66f4aac36a91942a5a9f00eee1ab3662f6510e38160e1ce2e32f6ec6427379e32dd9efb66bade1e13d46e8e356f06d326808cd6e1ff3882a9c6025fc2a0f520b6d794eafc195b12a604b732c431a97f9efe70deb4c08ea210da55cfb5c6748f71287b65b15c9fdf02052aaedf1acdae96b05b03c1e8e052b2183cb260f17fd2a2b1aa68796dd9588a5584baf611c6dcdc2b9c4044d80696d75b7973fccda2126feea5f39958908f9df82ea311ad0a43f166dc97096fa6465509aac484eaeb7a3887c11a84aabf4eb36a2693ee67eda9e9391ad14a06125ed52d68e7b4623133c2f5fb1ad902ec8fd787627cfe5a00677565f66fb215cccb410ef3836bc8c67da7ee06140cdc842e74b8f908466798e0749b8502d0a0383f88122d7a8d971e0e6dcc31573ef707c30f43c453370db0bb513674384b4cfedbf4fdde8f9c7552bfb9d902f2a0e6f75d69898e46711b710d6e73b47fbc7043b194a6b97bd3c4e04d7c68bff612b0b26cd5eec5aebcdd217a4627fd3d07224a2642be4867e8dc9d657791b257b451abd6933e184294fa945f12e92c98550a9697dfa3852434eba9217263acea5143e4c4578106789635ca2da5c11a49c08ae51bd9673b278c3713438baf9e3883819c739e0798761517d66a3e448d5400d3a2e7137a0084be273524d324aa7afe89b4f00889cce0c6c4d269bac70490070a7d421c065619ba02b30a6ab4740376a5a9a22f5944312585417f5c7baace112c2d1afc5897862ad3dc287ed30711540725b38c14a3533c247c5dbefad5f890a0af74d072965126f0970cfb41cf4822829820f2a1be732ebeccf24ecb1ee900384dac97b46dc3b4b9c6e679296734c489579a43f12450ee68dd147c15e81772800bf85635bbc08c95f5cbb2d32924fd72130149f249c486233387caf5dcb77aa34a180fa65e2b090982178a1ecf0b2a2b8c97c8e1baa32ac7a7a04c733e5451c339b6f34acf0c803adc7bf819f09cf9089a568814d08467d8e6f3b11253b0a5c3af75a94319fa3e31e6f309c6b2a71c6afe3ff3227c16d49f1031b37752744bca953c2de218e4ecc798100e936210502465d1bd7b992a825bf3383c22b96402021b59b07cd70a7fe9a62c1925612b0eca8aa5756609d1d33057e23580358e8cbd15a629c875e13c55fc6d654649b243c0d1d863c04eb721df24778550fad2d5d4b7613d87ebfbfff81ce5a32c166b93e631dfc3f54d3c08c020f701b27043595ccc047beae49753406f3afe7e4ae3b9c7b67af2e917ef58d8ca76d84e791d91d7728a047e14fb9f07b3bc8f52d7b2113a021c68d428f477e9e8ad2e7c714dc0be44b33a76c2216a9b2b0db73eee9f04d4dabb4b4d677b5c2fa69c25a675cd43dc5a86cf304549b6188f109ef138aba97d6177b56f85a9d46f673ce5440e75f9171174e50d7d130d13932b1d5da20172a78ce5b92950de19d71c33feeeb58571cad4bc027a40787ba2cb38b3799154475a487435a4e4eea876f0d03ad70f874fa0f84c58bf578100f0292bfe339909a4c2a4dcd26b06f0ce0f2a7f7806e2fd79dbacff2c9378a2795d70e4d73930a796542785544a856643b3b974c219779df813cdc9a7267bc280d1628c3cdb1c642647b617ebcf0b4711f5f18a4694e09b42cef80ae7f901b42288da46fa36a49610afea0b12abc3fb1fc21bf36d3cbc9f6d94786c76bf263b7e2a68c2715d7f10425d2ab0b57874d4b5a28963d48f61cb24fb3f10e00c4ab318e64575e7d02810c5bc8c7c36a1fedc59a81e499003c043464c315342624d2fb556173ef1c0e18c2e310b30769dabf462382de5483e2ae09010d588f047681bdce11819fb8b2a7134bd0abb5a88593e1c369ff607a714c7f6067ab1486695e81cf6cccec00064511389f2377040a8d2c541b03d078a49bea320405ae63b41a79a2e24f2d69a979d93f98a5764939df524fd11eb66190ad73b55efff6390365a92fa3ff84aa7cc608062af30f2b5a5bbf6e6f2e841b3683eafd714d909af5108adfcb2db538260f956a6791702f3154f99efd36afb389abaaa1261b4c042b584a4f5a7b4e340bc486e989cb0aba23568c56a97f4d29c97fd41e7068a859f2cfbe986274c2618b0bced2345ac896f6417e1a166514b37385925535d316a3ffea0c56cd8f569a590fdba71219562319c0304af5f81904cea364bfcd13f78c02fd3cd93e10c2979195355a979a7bcee9f37d5f00d3097dffbe5bb50555892d8514e3826dbde3b977fbeff270e8f5856b0180a24d569b74816e2b25a8aac0977fec1326e6d2cd964c6647f5cc323229af2441912b85b90c3936980ed51b0bdbe3b0536412bf58da2ffb25626869224f94702aac9626d325bed293af40676a782282a11a87dd0ae614e752d1c9237d67c4c25bca6209f7a99fb60e1d866aa7ed1b14b907a3f3e23bc142ef858079feadf01f9f755ecb4cdb9879e9a377703351207459057a19ac56f087a966c1ba33722dd7ef8413d7db60994c8a7ecbbf8d89442f45772c63a43aaae21af85b9703330c8293407a01301a340f1944c65a772e9fcc2b5e48641e12ab6a26e7a6bef15639ad8308889fa5b63d23e66d9099a6f675d16f207fb2b07b0b2b55a146d67d4832bb4ea6341749423a783f3f7eddc74986f8cff33125390f8481a53620169dbcdfb037ffe4db9b5b7f8ca35a3c70be2334312802530dee38cc9b5db645e87a64807e1c1befb991068ee42f8a86872badab016fd4ae8767e70c674c9940d4c0e82bdebbb2ecde62c18e7b82965668606cd5108ddaf19e6f8e3d6b944ed01e206d555e9edd61f0803784ff200d50b5856b579f2b40b82d00a6548e0f2e0485abece9ef6812a30f147692844c01d8a3c27984a1047b0c5b19449a57a38856921cd5a34bd8738e0075de9393f8643ca046dcbfa181ab4cf8ef867ddae95169ff6456e24c1419870cd18fd5a5027592ef43924280853689814d90da54a089ddb173877188a66fed46fb08141c20dd3b87474c66e818b5b8b978c0e4387ee8f92912ab4d64eaa6ed68c9cc464fdaf8c262bc4092ab96fafe9b43929c1521554466c8b0a44b0bbb274a519e9e5a32d248767cb538c8ff20b416a6f25f5c4f5530e47a38893283fb21ae0fd7a91f1e856465108ed5d3f5e6179672084adca30ccca21a4681649e4413f5d9969a20e4fbc59ad2f9fd2c22485a2485a1eeb43072e9465dabbb157abd940144eac28e49534d3c6def107eabc00e00396fab3d4be3c44dbef625b34147c02c79563140fcae7152a1561c410752ebbdb77826ab12c605e6751f858c779490d11fab133467e46cc09599376ee149534b906e65aa8f734</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>blog3-å‘è¡¨æ–°æ–‡ç« </title>
    <url>/2020/01/22/blog3-%E5%8F%91%E8%A1%A8%E6%96%B0%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="bbccc35ee7178de6a0d4b81e4d719508ea43b596b36ad165dec7e3cc509b19df">a4d71f05c78391253da0c711f50d233f527930bfc6de26f44bfdfc9565318205407eeaa3c341326f1ef9cfb344968c5ae197023782adde767839cb7249624b7c50e468b4363a861bc6a8dd8ecaf4ba50b4fd62fc134be106c10a672fdbf5cb719f72b24b1fa75a89a9e431d76d883284df48688a991154f9b5b87af096abe419e8abd14c18585e303e5cb77f6182177db6bb03ec16e947b724cc1ec04f05efa8e024b7af1c14aa4b19e27604d7c3ce78be5b390b4eb50abeb6fd885d7d15b9e5ba9a13f8b1226a0e01e0ff1e20d3077e7fce62177b139cc71d517e7d040f2722845b2acc0b1749da500407f43d7f362e6ef9756cc084d0502b863a099de6e43026c48f59e2999ea82fdbb309b7abaafc712e1b957982c9b48ed4e7ab76c0ef7a2ebaa35336d49f05f2be2c7cc35780b56a983e46c509804fb7aee80668dcb830fa1a70d99872afed437ef05cca1f9a9b85b84bd002c2c664e77a1ab4eb319622e2abf2c65bd52d0976956ce5c37e694f3d07977e228626dabb3409a32cac05133486cf06cb87083bdb406be6c04ff4bec66266ce0af5ed55541195efa2ebded3637f7d6929f343d5dd79f261023722ae77602a41610935332b1824c10d8249f7d1a4d255a977e043e8e44e15f1af6b362ffb8187aecf7e2490129329d7e73c6b7b51e41793c2c01ad53138b0896ab473d37a7e18a2e34e12d5607e568c1a7a19019bd7d91e2749bac2a12f9fd3d99b90308018b8f071c7b6ee8648b6939b60b458e674188d65807a4c41a9e6a04dcf02572c3abec046ae86097b900d69d698810750720dcb239cc82e21af5c3021608e83084af13fb248cbc8d06282a150673b5f47e47f21e7518c73ec671f2f53ad90252759fe8e85db95e6ccbed9e8c862442343df725ca98a90718814d804043894ed0bc2731f2e003d4cf4c2b62c8af9e0387fb4898632cfd17e95c50035d0f91053532ea7d1dc39b57ea2c4c856cdc9771316f93236df11af7266d36165bdddab675467fe732aa801bc965114632c27a1e3f04c909e4fd09bcc044fdd0d8ae3b005f84ad15b1dbaf415c1630471ea98c82c9e12ac5bbc43ef23085594a3212bfcb883a0a8b3153db726c46d8f27795e92d916e310d519adfb2eacea623518bfacb444ba8a09237832435cc30b07b84467a43a13a8637e589053f7443f53f2d6c5e835ce31a459f8f87ea98d68a23e1113136001e4ea934fc4f463bfcb10cb0b6ff9031ae3a3d8e6c0511557973e16bd8784442f2d7ed45c313007cd347b21148d7a52902315b59a71553140f7422b744b6d865dc598193482df20ba3ce59703658ffe98ff2e2c6cbe93d09fb4e5025fbb970c1f04be0d13f32108eacd639e5dba6fee5b580a6198da2de5dad0b857d9be8198b7dc16aaf29190ab8ce12006faffe5dcbf7a65119fc88322606d1d8548e2799cc3b9b754db844bf135a3851077a21c27991a82445c2bfc5eee27bfbb1b76c23b1b781693697cd5ad12780434694428351593109df790e749de26506299e8ddc21c74afb51c9547d0f510f4e949d06eabd86f22eb8d798ba4ca917f47dc2c5b6e2c6f1135d3bc548fda9b6868b28a62a650ef099ed8f71bf72618a576c3ebea6e4204760fc5f43a41fcdc877eb4beac56dea3224d0cb043df059a710f2f62c9afda5087aec5e1023da6688ab86c4d00fa0c5104268f85a7086bdacd0bc07710b890a7ef8db345b10faf97cb251f49f3bd8a287bf5ed005a2d9de81e239fb816dda5dfafd2925acc1bb6ddc5cba74781cbfc866d0528d98423898f5473dbe77d5ddf7d03dd08e7bbcf1d5caf8779595091e5a018888a9d5351507725fb6efee6b0cee2a4ad100f5cb1b462c91ce5e46ed62f3268559b82e702e7a65ce212aed7bf0848c90855f73b9181296fb553f822c65fc8fba510997c3236543372d1ffdb93947451a661d0ef2dfe4f4cadf98dc733528cd66ee2793251b701202c584f1ad6de4417f1177a54275719c4a0b019e28c16ff0b2a474991f1353a8770e0b727f525b184862ce5b5597c365ad3fb4c0507769dc317f267faac85e493864d4ec4abcd8c68d735e8884adcbf55db752871fb61ada242c08d661fcb3f5ed6b0197e00911b6bf3c16f22c70a3165cf5c26830545ac02d68ec766c699a79f19a02334ef1b80a1b222a20e6493ce2d2cbc0a8ff577161a5a0111e9f1f5fc2ceb6cff5ac6ced49f0dc3dd2faa24fea25bdb5007559cfab6a81b832f3dd84cbcf97e0bc6d20dd53726d3e3252385a0bf434add75aa8f53698066daa7e08162a81884b18131715ab1195f10db849e79b36fa618888bab981e9c8b9f7463554279ebd11358b1e6c591332371ea6f96a3904ea52123b8d0353c543d508236633a4d5497fd5d14baa1a716830a7de5b6d667303bda3c49ad92bdadc63b5f6f8a07ce86f090250ade2941776372bdeaa66a176fa43db38daa1c35bb6d446831621ba96e5e5e6069062e07818d59060b0dabdfb9efdd0c2e601806063c7540f25a77eff7ff346beaac012c5beb10fe67129b04748d37a173d338e4edf0c9a67a3b867942263006e07a62209aa2f94e5cf8122535b5459703f5fe5f4f87d7e71a510287e928f84eb89ecfd27c09187753e18e977fdd59d610cb4f81a1b554005a77c8aa5c6b174a05e960d65a6a9f78777bd84951cd5c2d90a41a0ea284f7ca25f569abb383eac6b2fb8700a490e8b49fb794461822cb6d333a9062de1e167e71ae64c125ad96ef5c61ecdf547c4c24f838eac7679fbe03798bfecb0cb582f02fdd5dc8c141fb98fc80902e254c33cf3d899def1f8b5866623fa0941105fcd475d49c64b352939be4122d50e17c39bea42ed314cd27095b93b7836def7f4f7cc88c2a3f9f67bc302d06de18b9244237363fd59257ffd76035bc87c700fbd9d9efca3bf9109daf7c2d8cec8dc9530cf0d8097db81be48422cc6e2c6fe4f32a862cee96039fce97b48e9e1bfcbcb22a7c426fc7bd466b97d8b60ffa77a98374dac4eda18268bb06cd3748b64b452997b323464e9b5281d2666dd38d096677f1bbf9352e5663383c89ec05fa32a3fb810bc7eaa05344f4c922bc92cb5281a65be2eafc3ccfad4ba65bfc3954b2b2d98d097bb10bda75452f769694ca193f56131b31411abde5537c9eb86ce8c487bdcd77f74a8c29d3a6ede65a529e63e8c8a86ec06eb7abd373b8af43a291ca6e3dae30b7e60e0beecae5b546df40418c17a5b1b369516a6899633908000a2eceb81e6ae257e8f2d7254646f00698cfc4b0b9b6a49f87c6e4d6f691337d5fde01818047d021fa3d9f4175453a456f629439c594b3ad78254c6e8e6de3c2df36369411b184ccbcd25e8b2169d6318f01deda6eebeab73c752aae8eb788cce4a5e924d5af84782ca144ac4072de86891cdc1a0b0ab20d25cc7987e046aa3955d62a474636282e67b93bfba164b6c33aa94a74ea48d3fd8490333138043b1cc77964e114a01efd8676365b051fce461e9f8d62ea0dd7129db6d7c193bb3e9ce09af7d3c85e824385f3191fb97b28709c88356ee419aaa4618c6c9ede95ea80efa5a6b05b4827a33ac3943574b6256f200b9fa0e6e6dae93347a7898d2715f0ac3e0998386f669cfa023644b2a07cbd8b6fa213e7375f1d281f0cd6c3f4aa3a67291a2a5e407ce23897ccbee11e1538ed2902587b1d523ade47f9ff0a03deb4191b7f36617fbfa54d6a7d6d7b2b596b8a107ebc896ddbcadb92afaef9e4ecc50daea21ab0be5d0a988a74001591d6d1fd43b33d3688b08ff7c98515d7fe99fcaac9639eb8326bfc1ce727c50b30bf5dd0859ab42652ea1e2373ee67a0f9247c4d00d17acd69d1aeb27ed184a68116e99cc91f922174f1f34d53593132bacb76f859ef4a0c59e87c9840ef3ff7bf9ac32a215dff407c5c341c3a77fa21008ced5f5e7989a7f38f43e5b52285e8d20505ffa4f8cfc915c32097726fc6bc032595c859554332b88a9c43f52c80ecc4bb7926defeffb5134dc19b78ac8f73cd41d888c08ec0b1a4a96fdc74ff2e45b917512afaa10d18ee0f4ab797d5cd36cc5a593fe33a30f9f956a628678ed9235cc0e22c14daeb44e8ef152d5e09459d6f7632c0d7a068f7283e1c9723ed804200f5ce7365356401ca73c3731456fa6f10e89f851c7dc8ebcb621c04b207d83809282d2fbeebc3b61862650917d215f0181bef9c0745a620ef1ca9968a54134f3410a4cb0267ecb44502bdd360c047a9184571202fc764209e493086114e5d99ec326276b81cd35a1cb7a37d1698c7eaea507aefd2cacd1e316604e5d2fd9e2228b550e4e095199a4f1f14aaab4fe030f6367b5c690e28daf8bcf83abb98c5245a8ff9663fde3f5e5b4e6bc1e5eb2b579c09377d1eea14345b2af7ff307a0cd12cfac82babfb86b013fe03a7a30c000965dcd53c31bc77467daa74d6a59ad8582ea4cbf5e145f61ea3e79e261ebf2db6a8206f261598037613cf37b0d8dfc69bf24779bea088584755dabae149589ccba5fb70aec37445bef5070c06ada45e14f689b789e2e4a5f420181cd0b49014dcec84ade0cf57c3e1054ed61bbef6e55d1e7da1a94518c6610d950548fdfc42feabd3e7bcb0366e33ab38799b437e3a260615c80d4634243e138ed95aa52033019a9b826df90b5aaf11f7e193c7911864d9cdc26bdc40d57c8b3ffc47244cd5b6daa9cbca040c58440103c3d87112a97489432a501f61e471cf373b43332148d4f48e20c1a29aab3a7abd0b4e0d8b6b09cf0d0e992ea6e53c550915028e7973dadf188f728581ae3a89d106624bc1ab8206698d50383fc1e4c6f86fb6657234b5278cd7f2270a470f4075f59c71cce51f</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>blog2-ä¸»é¢˜åŠä¸ªæ€§åŒ–</title>
    <url>/2020/01/22/blog2-%E4%B8%BB%E9%A2%98%E5%8F%8A%E4%B8%AA%E6%80%A7%E5%8C%96/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="44ecf96b229360bfa8f1ceef0a3d945f5ea5e97e8a1b99a6d5b2af599403dada">a4d71f05c78391253da0c711f50d233f4aed0542dee245598aaf93d0b52600683f8cc00892f23393dcaf5b1fee2369c1dca0248c20b6753713afc6ffe43b76a06ae400ea528e89fb65e2a8d68640827991f4d955f1ea9412b02f7838846208918521e85e651ad6ede3e87da916a413c525f298a106cae9dd0e150f82a50076b01d435aeba93afb79ca2e2d6a6f27d77d773b56557a80a135424a0f04e706a4a601eac37360776fe92b51bdf419070227b478981fd29a4d6cabdf1b22a47cad057e24121749849085e486ba347dcbcecf023c8a9992764a3bee1ba8dbd29ea7656ba90e8ce6f9a4669c8b90e9b5a1112aeb2775d1d024e232e8563ae869749ffcf74f475c5b94e1b95370b5f954add4c3f6deeb55e51ef97363cb76e17d115f45efda983aad917bf24a4be65760675aca67e58d880397512116eca13f937f48adb31b5285afc71d39cfab7c962f2281c3a7bb27b9becda297c9de385e36d2e0c5c8db3447c4188723d195502b5f799ec3fe1ff02be3bf5e23565e5ac8118d7eaa417d2502ebbea2c1a01a5881acc8301aca23e11b0c9536ee3a4895436f4ec144b660910f05fa3d6a037c696acb0667b4cb177e3febcc914685ea1149c0eba5ec49f84bd1fd9e4af98983007344b542a357efe91a4183e7c246a863be66226af3c7e6d447a996d215efe15cdf1858a8952966423727345e139ccce7e4aae260988d73c88a802f1ac69ed4998ab973edc43e094bb4e48b4bb787da7e4ddb42a8ecaad0a872ad3d47f4d1bf268a6366aaa65c575e1688a11f0c7dbc77e4bd86a3ecb4c77c1419e456740c34c3a6916ecc3f15ac2f6ae7f3e4bed4f5995076c263d2c8d03bf9f1879cf37bc6b59b0fedf49d0e7143be24a911b8061a09ce6298a5c3401075f23ec1e8c1daf16db976c84ea4d844216a17686304b2d5460c9a130cef03fe4f85406067305de470502dea474bdf8759bab6387a8a5a5f5347081fe7d4441e9e3fd2102d4948e91381f35cf2b8a15cd4df3a15418fdf27d8b792e6b362d1a94db2e159fe5ab97b225ba79a92f6977f7802c24cb023a5c2e8ba7ba8a454939934059e013c334e6e841548a543332ac484355b21eabcd9d3fe63b2eeb2cd0f6a04ba3d1d529bcfaf986bb4c2ec6ae53ee97a5fc64fe67d79ce84e682a7466ad7e0371926dd5db4b5c7aeaac6dd3d5d45d210662eb5c43d532964503498d7ed07386e842be32365624125453f265937af0785846dc6d1ba6026f2c8ca455dc8da17833b809882098767fccefa2b191dc7cd5f4257cc1287b7cae69e03c378c37fdc4c7cf84592647c594e794d4f2ea126c51f4902cf57d4ed8b7ab141b40559f85259d0b05c47ffadce78a1ecaf7abd06de914fbd4de9649ec796469391bd606d33dd78597a6635084e4ee88f4d05a07cec1ca7dddaa34833729333f024506e829aecaf7cfcf428e5392b2fdf086a80c2edea3e7b5e4c423a2a9ace1b23d821f4d37069b750724e71da9d6c835f18503d41475e317cd35e255ef44119577a81fd57f4eb90c69c98c806210c4edf987486f587c2b47c3b4270beb62d079890ce852fa7084638d966901a98066246c3dcf648d6dc02f8f0a646fb2c83af706cb59ef39a05621794fec275cfc02ad1065ee518a7a8cc7b7aa970dc74092afdfbf8ac270699580a48e1d81cfdb82631fa2294408348d9a60ca3cfdb12e2ab9f6d8e22a6c18b2a2d075ba9b9cc420d565263bcc8a23cabb42533d6647f0f645a2250667c9329cea69561df7e8766d4e70fca8dd01ad8f6241205616aa7e468bec5637f8705f48ed526cbe0a0565e47b62361fd7ff524d650ba5c39dc3bb9fb140dd4fdcf2892967f3b2500f5f07955e13c3093d4eeb977545a77db0fc84e6888fd69d1379b1b3fc4befdd7d00dc95f04433fa5dafb643726546b51039d15694af2b0bca77496b31b7cdcdd6e121ba6d4ef59d94d010ef1abe088fe669d7d85049400a16a38bb027374eee2fee6d0f9dc7fdb765bd2745d47575af6a1d6c5a90b016ce80cb3eb540b7f7b34f1effd7ef5ff68dab77a38bef1cac7814316455b96320fc2a18e7cf0b48ee0f8a5b73e203cd4467248bfa6ced013b270d258fcbe68767f357fc6cd6d505de214627ccd5501abc2bf85e4b0ca549444b9b608b6120bb27a362c1f4cca256f35534610d2d801ef0ffcc9d371dc1a4dded0295dee4e16370fb1f05fbc379b6988aeb1f6bab5f4ad065c87be52c692f3061252459914bc7d7795773c05cf720f0352c00fc62aa853ce20935e20541e825f6db26fa31e7bf679dcb2b97ab7bbcbabd93204375da8cc2ed499da3a275cfb9be7795267c0adcda023e12853d429adcef9caae4b55666299cea6771540aeb692ea666bd1a316faf712b87876ba1b0b4e85a7aa7163e06cd724e8a789ac110d04e8bf5da7a748b145f0c1c237d96a1492fd93993a1326c37b99a77a365bd6303dcf2b9e3bc60cac53dfe8391832c14a349cd17047f4c2bfab1be350789cd1ce13081c7aac00fd4d0e36289c558faa267ca8d34d5ea642428526183e4523266ba19e28e5c22474d9c1501ed89e3d0db05637ce60c459e777eb2fe0da3697eeb06e4c58f2f0b236598d768047e9b8c810cd92318c43cfcde9855aeac089ed11382bc58816e4205c77b93e23dbb2f559e01cbfeee14b3f59cae33264f56896857dbba2cd234ee4cb34ded439f5ddf7804a37172c082c30c5f58a603e27ac871337c80e934b8d82ddff6149bba26542dafd084c877885d49fbac319aa89c58772be3cd5784481e277f168a37a77dac26bb020ecd5b3cf381d215cba86fe8a8db050b72561ee9fba182ce797898f0ed836ac0ae924c00d79ecb52ca5e470c2959e334da95a4b46900344f7492949851d83c3b53a54c0491357be8fb94dc6aba7812b87c6be66d5790d5320b8b6d5bcefc7a0b2b7725e26de0b148685bac86dc9e4326438b5b495143149d2e23e5b73009c1d98c3a9f0c35e437f05ae56ff57e2a33845bde3c789a7fb8f67536dc639b0b0d3772d80e2a8a39212bdc761d92d228b1b2b6ce4deec960eb54f5d3350bc36d572dde443758ff9a6f45dad9e2a340f50c7eb9d24a403e59bd20ea010da300e63ffa93ba4d9eaca5147cc476425442300f1a53faef1b926d305f0b532731e5a2d111569d3ab880f65cd77738a943a71a069dd80f5a626e550728439bfc6902634bcfb44583b8f144afc813e9005ac439422fb2bd6938190e8377fd8cfc9254ac7d3637991de1e8b6a6149720e5906c392935a668e89d6de37c4ed49312184348fa84498b7269d8785d0744c34fdd51ab5883ac66c19397e2ccbd66a082ad0173f2a25c76c6d3dccc42cd3fbc8c81359c09944464bc51be94cf3ef66a6c93ccd7e185e9f9593eebd7b0ec2569dae5244580be11574eb921e0820960581060ec5805fb6f8a69f673250164bf2283ec78aaa2688edcf0994c374aa71f1b7ffc531cf9261c5e223898b8457dd833fd6040fb58f2c13242ed08c1e2173625ee2cacfa0f16ed3d16dca5e48c1fa0968858173f9b2a950b62a080ad1aa9e1f71a9f486ef01ecf3fa1a13db7a471fa346febebfe6ca2d88fe0fd427f18ea41190c48c589dce45ebec87507b519c16efac2d54f8667dc18ab61aa3a906fddddd840cec75de2873120132fae195684ab767f2600e99b727dd0c658af9828e397a83c679e590b394921bf6021011661a8e5661394a67afabd91d94ad8833f01baeda1b1f2fcfa369acdfdbf1248f1dc6ee61f482d9d0797e523676658e855cc3731d1df42d6fc44fff76dc5653ed95dbc70411f10937f39d02dbe2b16561c544e18085550a366aa81cb9343b7820c0adda01ff72e3c29d3e6616f72e27fb14c5ebc9f5a84e36ec25f93f7272e5d9317284dab03dad9d31a79b3c35878e4e75523a9366ce07d5eb1e79adbd4a632a53039fa20a9d038456f792166eceb679820590b4329dc7cb3a8be7af4ff2a83d606b9127e781694f0f9677443816cb6403aeed50c129a629b3209340b52f1f441882859a370dd3227b117acf1b65f27fa5b1352cbd2ca43220d171dc18ecc51cb8284a550cfb6242699363851bfbb601394daa208f8aca790b3831d52f93131f8b04127773c9eeac7e118043b4825e692c91203db86bdd523e9d80c88f57aee2c2afab48908e282cca1de6b286cb679beebed2db3a3b8d93de5e27fad82eb789751fa742e286aa4cc54cf02d1fecb88870cecad43cc0c6790778ecd5f55a7831c4fe5b73f86afc450a2b6f33f8e242f79e487c84a87695ca2388b7ec535474124f4d9ba31fba569d5daddb05010da53e9624027174253764f48330ad5cd8a45cc2a2b9147f0b3d6a20fa533cd4eea01adc5e3d90154d06abbad114f188485064b2a7293c1e143e917c7f0f8a0dabd8715eea8eebdfde56fa3bd8d381fe3d0b7b404cbc614842be0ce14cde8723c28c54b4ac9f1670c0ccc2e2d24678c254eea9966e12ab994c6a20068a82222658e2ce3cedece6fd18e51f76089820f069f538c62b1ad542c76b99d8c22dd1eab87764de31a7c10c907349a763a4f6841a9c9abe42d8413540d3ba24c2b28a83e8835c483ced861c213b9af7cb97f550a91b2e38aa46766c1e571d19d9675a84118082d5772ba03afdb7f1c2c13629a425c31de0b2fb3e8f41653f0fdf9a8ac9235c9101fdbae3bc29a523ff3e33ae1789d074e536adce26a1fb59c53f3681dad2757894e44da7a3c00e275d8f817e257ff8c808d043273666f734513bf6e0338e27cf0cc034df8140d1408089a768c141f736f43e4e17ea2ba59b104ed26ad1be99effd38ff3eb0886f9b2f64b38859277ee12edd1123bde0ec65615c909cfa54a7ca7b3a03a6956515e46f93a3f2fd287ab263d8b99fdb7348a4df9f9f02e162403361ff2899442363887992563e1e09649ff2a5d8cbd69402e308d583f3d4fce5a3cd1b485daa895222e0f5715046cc5b6c6bca0376a27ca8676bb90a490b6d425fc791b98360acdb63070334c02b90969d3a08bb16ea53e20534dc3607bb2629a7309fb43f17fabc7904311e7407713aa3ef752652c19a4f43bac2bffce7612a44eb624566060f93327abf3901b074a86eae432c7ad7a5a8ac9e65b74e5528cbbe1fe361f87bae0e3ad6e6c2a1cb09c0f302413b58c0087fbc17bd6d3c68bc440f8f476414f35afc174e3dda94cedc0241fea1617932359fe8a370893cd0aa94c7bf03d5c0ddf59f26e79a06c801482df647e8bfb8960d9a0a508beabb81489a2d6772a2b988fb6636511242321ae973450d1c054e8ab39a5a8ee23ef74a8a8453c013dadc41b34aee266c5ca9856431da8f1e7fe5973c1f1ed2932c6508741f56b4cf9e62d876013560f063bf3fb37831571e9b01046ccd3c7fa2ad47ac797e663a48436cffdec071a2dca8de185770bb47b29117f65cd6ad2798ccc284068407d3b2b23945bf3c92b8555358764013bb7d3f9d2913ceb0234ad86e89c1b1da681ecb750801af784f37db6b3f0bb870ca96141885fd6e3c81cb4cde2693dbf44f91f49d75ff0992fb9d9d7ab17f8fb043b7c5dd31e7b1f30902bd8acd29f83d2927d705ac576fae0a909fc28979d0923106742787640ba33ad49e8f1df1f617746e1304910493cc92ae82fd2c39113519f3d38b35d4cea7807a00b473848adc63ae74a70c488e453e26a457d635a7085a6dcb016a541fb783813885b8a58d69c21b4b1db4d37f1a76ca087ff4dfb7cceac8a1b4483e38eb5b748f43aeb70b18a94285d8eef4e26db0b23a72a63c49c5f061ec5de632fac47ec25af76dd217e5fcf0c01477413f47477b23950a1d52e5c9431229cc87ca3ade20ab1087866700a1084331f7485e89a7b74eadce9ede2ee3a384dc73a6149de21b7f0eb8abcb199fab871e824c8101d2940ab64433e15b1f91cada8bd857eb205f7edc848295cbeca5a6e9e11de30fa393b3280230d9e2a4e0bdeb661a047ac4611b4ed89cc6b9cc7c6086ab42aea1097bd274f0c2200e0abab0af1ac658be8093005738377ca3f9397ddee72bf809ff043a131e98e164d3004b81fc0a3b0804cce67e9e0b1181ba8e0f9724c742e582949637a06c9e2027dcdd40c6d6be2fbc59543604d404b66fd51883c8f8b92bf8a20fac02f314315f032725e7fcde3334cde6b8f92cef431242173ed74222794fdf7bc9f6d852adcd7b7229919a5c4208371d58a46c1bf8d652f7959ccfdf7a420c04988e538f7bd1fcd4910ddc69b175b924745878793ddee38d4d95394abbaeccd4b886ee6b7af5c21335b0a7129aa0b45e0f555cdb041ce73794bbb9ce8339e95fc756de811bb2042710ac7c3d4c0ddf5aaacba25a7662f7b65444c0645d081c098f09dd3d4bedcbbc853e57d36ee88a8890228e56aeba6c66138dc5228a2a5c3e683f4fda917ea4ebf00372f8ad8c469fc007d71d2e2cc88c5dc290525c341b02634971f9aa8d7503a292f8097329c1b7bd869f80a27f0c393f0eb5a590542848d36c7f94218fa1a8547c289911e63f5f1e2802d8ef4243affa220fdf930e4c36254e1f639d550e1e3f6aa6f07daa4cdd7127495f77f6258ae3df5f06612619ba10b5a4910d2344308406f93945686c8ed5be8b1777a3169b1efa3676e502c85f433178ccabf7bf69b14c20e12eafbb349bac0e8e44a31d73f937c8098cdd94c7097db86f559a1e0508d11029496d2035d240336a20f273e298ad8b354655e06c53315b3de70c68ad8323573b0c4191ce2384f9e87e13f615c5b9704e75a0d2c1c0fc1fe399518da90c52f5ddeed0acd8b4d1348e99879a375b7e9c96243be52dc9110a24bec8141a238122e74ac152a5e294ed61b59d254b5b794100cbaecf9e10af71729460e1f432979fd9438a62fda53e8fb505d8f7b93d64baddce1c0ab07c2c278adca8e6eec58a9f274372251c2bf5bdb7da4d6d565f82b9e08580556040aad91a258b12e948371d76054a1681e32910682805b9ae62569241f6087923cd9f953c90c98235f297986bf1b3fb71dfa16cb6fc15e3a02150fb59e3666298b5ef533eba3dcf9b3893e17631eda9844ce89695c97ef5216626fdfa91014b15ecab1c83d8f928a6d61fda04e517959d352071c4ffb35c76c7f94f48eded43cb416216814c2552f40353f31880c87f6a21f0f02bcaeb709d2bf9effaf46ebede3c250310be92b02e83c30da084dd63985ece546d8f9dd991873884eb82964e614e5aee2745c8bdf94d7940a479cf79278175d2bb2da226a36a8e45cb809f2c50243610a8a298b9e81c7aab51a105cd73fef691520c95ec0542835b592ab9c89e92f4419e3eaabb7863b2f3ebd0b3a50ad6939d9294885a2f15c97ece0df8ee55a0ca412e065596091610631f7c1f91833bc64375bf9389e41c8eae166a46f8234df4dd6298f8966adbdc5c7c8c44d68f07d5678216e8e26fccdd33c0654f230a7094fbb415e611f48cc61e5d2ac6200879a130f3901a3001c534117af48438eb762a3284892bd790919d4e217f17fbec432162fefcaa0bf3356c2a3c853b6597b166f33139d8b33718c45181fab388f4af7ccba78ce346c98eb769087e5b782918281c4a0faf6d48d915677716ad4c61ffd31429f8e6655b29cf6a54e42fef3f1a246a41f57153c85e8692f55af6fe7590406eefb48e7acae8b57f04a58f118415c3d6298db360b3a9cc037d75f01ed021ee36f2f1de4710846ea8155876d61a35da305e15582ac386670a19813fa3cdd805ae5cd8fbce1a96438920aabcb2d9c1b64ce07908c1d8f9a5b473bd534a0073f780bf7dcb3fac70b5c0eebe71152e9991bda59b1d85604076fac28d30199d7e97ff9cb5ae0d0d721dec246e1cfea818f387a4e60fde36f937bcd2e84f8ab2cffd556f8fbb19fdd1fa906aae2444f9d65fe2b04d1b3c73d283f98bf6ec02db0c80478c7ae9e16934427706364d07fb18a5eca65ef85b72bfede31b89c88181e8a59c169d9e5e8e86aa708ca5c37eb6bdfcaa3783e8be3aad1ba4fd9f71d2ee4bde0d3f15aeaf2067f16c538706379256a8331dd81d35536c7a1d9db6f63ba1b8c233376cd92126b558ab55219920e9f5e6014b961a443359228ec416e93c6ab7d6285491d2079bb1bef15bc5d6d2ee7cd1a48997d77300850f0aef72a1c3618694be75def3e4c132ea5f36255ba6f5e3147aa7e61e31fa9aabb65d786d83349128afc7ca9d84968d891e8fad46a66d64486e5a116c917a715011443c06d8542e75de191b7a7e0d1dd71f2448bb437b40ae61203c7540e8346091dc3d1cc028142ea2b2ecab82fa8179d568fe9c415dca1c446d92ac98f9780b19368fea8c1019ef83c1f933776cd64659c05fff231512d4d17a1db69253f8b25e4243e784eadbf9ca4aac50f402596aaf7108fb868226f49be00a90038016aafc10ce07e25159db7fd75f3531d8e8f8a4c417293cf55097077c8f1311edcbbef73b276a2b53e0d3f028a90c3f9fad2b27fdb15b7c8acf991b011cfc97062c9c432137c72764930872747f4933200664b56a66da40e6e2f0273851fe3d8b936401fadd54e793c27562ba2c2a89820a482d08016c3054be0755206ea6386d870cf38f3ea438880b3846675fe05a754580659359462bf8d2d1ba7a30a32fd1a5186244619a53087bb51a6d242f935c2fc712dfa082d6d1abb62b0570684cdcd27ea0f4c5f149f043b960ba8da5d85948463aa95b039bb39c7810ffef490dcd2807c540489bfddcd4821142c3fe79e34c73e90c7d33fa39c74ff80ce2e508552d3ed095aa13fcc28eaa1e695f15457f937c6bfa4327782b33d1fba87bafcec0a2053a855cac28c475926b4fee22d86814fe1ec77d894fcc69f17088f8655940f6d7cfedae3c9bd7a88b52081f641f46cc626d6920f0cb5856b12ee1ff930f7981ad2a595a84b1dca59a57adbec9ab08ea0a2332fb6483cfa0304c878fe0fe76aee477e9452006638b8c76a86efbbecc81fe081ceb19112ee2c1867791507b4a259edff9c83cafb60534aa6c85de26a48b26435ecc59d2c1e768e5b200921a70f8e2d5074dd5aa28ce2ff711e66296fda39cc24aaf07abe228f4909d6719181cedc8fb0a3ddfbf942f3a1a32ab46fdb9d5ff9cf718563010da7ea731712b9cd357b9a0ad8efb0731d0eca12d23b2db2b65bdab66a64a52f835951680f514f65167142341a4bbf578f779508d391ffd9dbf1ceb1daa41f406eb1fae9651368c0a15e1a4948f9cfd22122d4d9b92329a1c8eec909a2932c18ee73ef3ad435c340ff44d3be1f6f4567a79b03a5854d51644dbe133ae5a98a157a875d66f32e91b97268d043d44958bfd1bf53f5b537e9d65c4c2338602e2e80ba237da798944a5aa8d9f7b0c538f092a577fbc001ab66b55917d2a5d0ed0fff955e104209f5eed5b424477f439c2ec954838450171a3412d82ae9c8e01666bfbec5e8b797cf5a6de414af0e9a5a075fd30401a81c4ab5111baf2666ca2a050866494cc84de44fc35f47d33fa6964f9882421daad3e20f410cacb7bf7fa9c7b5f8f4ffaf54fadc1f1fcef6721ecc3b26edee1075b19dfdd010ee6cb1809a21399201f2d61c28c83775c930397584de80bf6fbd4aa484da18fbb3eae19424e082b3df1aa6cb68c425627455be8bb78c6251855d037d1e4b420a2bff1760a40ada2b2271a18d2ae6008a0378c8916b4f8e07aad259ee9bdbf2e96bbee316119ffd6b38074124062e9d4b16e322a7fdbda07429b1f13f0336ee23bdb77f9ed0abdd8a07d938b608149fb3523d6aea7bf96bcfffee9f7fe3c119e6a810ac76ae2f93cd4afdc6302b273721c653b8c9cf2311b24aa7705abef27b1f2410504fe660bc27332ed37e01cf19111499b99e9757176ec3d2899e8874b39305377f2cb34a5564fa9a979a7d07b8f17ab0f5306a73440f6068cf08ea76ea6d5ac5078eeda37ea83e0b11d230d94ce1a7a3bd83d0c767115900a866c57037fe6f741160e533d605df63363b9e16673f0797fabda8dabb910ccd3ab7e5b16a151fd0d232b3ae97e95b901f1167720f9edde2cfc6b31a7fd20cb2c12c02a35bb8ed2df9f78c6f105e4c86d6bdecc0200a554d572b0e263a2ae0b5f7d1f5a0ed50190ee7482f2760dca31323ce1de2148a444d2d89e2febeac451335b39fc93469d1645b7bad21e19f87d617328f1b9970480d81371403477f75c9c0109f10c5f73c4966562e34438dc5f4b31439281b973a01de2a14de7d474027c2a7d2bcf78253bab76fe5e98c46cf0e67795b6ee38a68fbf8dff216fc8c8d0e3fecb949b5fde39896fb4c578352e0c8564256c1665b2d6b92046d9ae7d4feb86b998496f40bb653148e73a5639a62c4fea1ec6e9d887c578b39d12541400c9a305c4a21f6d35c60f4854fc27eb2b9dbf74f209f1e517fa9c3985c4b2ee2751995734dfadc12227ae505eec0521f972f571d9066513701c9bbec2b23458235fc2eb9b500ffd046030e016a7fa501a7668f75e7ad367c594a55135ccfea82f841b8db5e4a96799df8f6656d88b5d243832aba815f2b78e470e58486e5751e39a0a43c4a82698d78a66a075e6fb55b49583feff19b47ef8b4b426cb9b123ec8e508671b7486f6c88f7f7f5f0fc73b73b062777eab5b7a60660f4a64b495f16ffb1bc37614928cff9926bda695fdf1d4d18962135f99826c55bdd406f3f12a1aa32c68fdb20b5a45015b7fc6c894213e86731a0c143dbcbd67faf4946b04233dbd9611d7dd603bd18a508ba60144558b051dceaa21b40e8feb96536b8f76442080eaf6c1028190d0e79e907d36b7371e612f69ee281b248b5650b34fa8f30a762c5d9d39d11714b5d5ee128eff3fec36d6f1f973821a9b8c0c10d794b883318ed9ed09381a23df37ca33325e32bc1b7b22b9ffe8b6264fa80595f517cc1117eed157900a4232106c82d9a2e3ee00f569f4c0b127773d424c7652726b52e2e9d61871ebef6327b4bc1b8d3cb018d3bffa8815e7d0d15919dad07eff941f960deb2b1ee11761195477021056d9badf21382cad3a0772916b42ff50a318c145dcc53bddc540677e953e2ac87faf7c34befa931920cb78bbfdfd91cb5af4f89f9e14d2f6badef45add240285f63f35f2d3c772ddffe289c8e6eb8901776b0aa34682e99c0347401b88da57a936c9567fff25d160c32dbd371de518187000957890e40090570227fc49fb2e708683ab5537ae8ee1d9d77619409f606b7de8b226c17a89c642682c20acfd4e12162fae5c5719def0714e3b5273ca0b56678fd19fd558c58f094794dc81ebb631f69c1fd66639f61f9ce90aa01cf23662bde0097634e5e74518d24298f8ccbaeead5b2a62a2be46992a965df0152a0216fa8e39889ccfb7c45a9801da140fbe09bdb2cf1863d1050e829f11850de67c0224884648fe5486df36e45e9d435de6da92b9ef31a2f34a56f5edbc8af18fa9fa41e8eaf57936d0f69392f4093dccee1660d8c95e3e2873351e9f8472f652f3817f3ba717792b72b8f7f90cb12bc160478f388fbaf48e43867fe0dd83704a6b4926e84930adf439730b1a7024be590310567b901c5a4f41d87c2495f43a9e3b286b818918face18468634d36bb10cabaedd45427ad1ea174b72a1ea70dce7c85ef3ef9b62987564542165865de2e1d08b2be10014182631c56bb3c8cd8f297062c321e038392f9b6ab2154ef0639a7a6e26b07f047ee8efb77a29ebf69573f4cc52e36f5063237e4b80b02d4e924249deb1783b3b450cee8cef60b3474610b2a94362e97c57e2eb845d6fe85f01c18919a4305965e17ecc60123034b3c13b6d4e96c7858876b5bfae6c2fd3efa941d1c04bca16da99265312a670993fcbf9b6c3f9e902f3ce9adc444253d37d1e664c4a746d9b95502899ae6d8002ce8e5056e4c93fa2ef5cd37f64d69964b97c94fd918b819dcac57c1591cfe06e52798dff49cc8f0df05d779722c19f627a49134c5cebf2ce7efe8a863fe9b6da8f6c0ff05b466e9de48343b7c493d367316b7964d9b8fce86161dd056aedd814868fde5948c2d074eb88fc2476bd23dee80cb553740794140ecb6d605c4c0a23fcf4bab2373da4fc71eddaf734ca8f547ba7cb22baf5c7ca1e792a8e9531212c8663d9c024ec2a481de87a18229eea3278c593b1ecb042aba08fd6a41d5a585293d6a5a8a1cbb95f19f1c9bc2f3f7ae1c8118f63b9b1ebe607040d56f53946676fcf4fe249ac623e3edb5409c365126625804ee6b920d198325cf8288c5825387cf214bf4600e8573a4f380af3eca1c2bc6556a6a78f05639d0fb3689d186987b28b7c7efc154bfafd9ec2047f4b4eaf6c23951b7028e6f8addf60be447d081b697a3fecd48156f4b70abf285407728cc2001cbf3e37819b0ccdf9e78b0c91ed5582b0d0ef9f840a5b4969a81a7cc735dc19cef78024b104a591332605f94617fc6f834aabe75405099077e113fbb45601940f7a5e916a7ffafaea68cd7a35ce406419354ce707c4cda06e0ab02a0fc0cd0b1f6bf7ab9a9392c548ceca3f4a8f53cdb2066ce9054ebb396e69b4c507f5c11dade59ecdffdc313647922a61f90a7f4e8c3cf7bf1579e63d7ba3e710ee737e5998ef6e25caa2846f49d139da9b9ae10395e6553650819507fb22aee623bfc5a355bf984538df0b981fcbcfde2ef47967305d6753ea95473bd4f3928b23ab5d39ce9574b4dd052c5dab9989cbc9e1953817578caed2066a0d489a9b6748f30498d9145351820b21d68476f3ed1f434e6c5bbe4dbcbff7160300ed416bf6bac96aeb7dcf8b32942607944e46fd2ecac7b987f64db72469abb4d01359400c74bfaf25e8b5bc64227e0ce4ae5c7e0b9874606dd017b91c4da7b5dbedd2379abf003b64e074cfac9756f9b8385dbd4795fea0b0ab2a002b530e1423d84046a685247194223538b54c7fe2dcc563705930cfa89bee9227cd7aa3a0b74de4247ad84aa2f2c2d13c1eabbb880630f5603c1fb9cd9c242e8115ad89b03867fd0dad6a8185ec0bc4be2eb1272f5352bfbe48e0aa0ed53fa2c466562a30e14836beb51fb0a391725d25b4c2ccf4231515382fb08c621dcdcb0afe9d2749a76e63273db5fef18339f508b6520fe60790a9232c5320bba3c7b462db937c06af338cc298af6b851354cc560fa03593de4a54fc66355a3e843236ec3c7a552749d33eaccc2a601f4bd0cfbf9df786148bafb36c2dd8319373eb77ee79101b28dbe701f5962169d53e954cccaaf03bb376f5380a19341759968a2ea88bdaa4dc866f71afe68568b6c4c5f7b36cc0dd3fca833cba8dc973b1deb329441de5748eeae97347d48b17fb09002d1c29c862dc0ff0962ff0f0bf0e2e8ab33cc81e5e6777c4db31fa855d0107c368bd700051bb5870f771a26cd17f88ad20f842d2d781823ab6b08a297f7379f0c53a28af30ee5590c562f0e390de86a7719685784a2dc2469522766cb5549bb8a23730b353ff388320bad3e9123081b582b1274eaea74648571df3da9edc5e6f213f7dc745c59fa4f1191a7fee44bb727f0d01a92af3dc19d89c72345c8d5cd932bb94b391166f762cc4c5cce28093653cac54c1c8e9e18edd7ff8329f91e65ee4163317086abbdd0bfaa1a182ffabf8a7885aa1b443a1c3917324e7c006edc073103d35c488f432554f787d33ac9235ad968fc6a6a8912017f408f104271bc9203d09dffab82232c28b01f19f4ec9d9a36d7d368ce55cbca80076fece7774bdac4565fcbb90b5411c7fcd8f4c8a7328f360d5119155a8a78eceae20ccb7a7238ff39c6b3d03654adc641e07d48de049a387777767441c884e707f6d54a6e94a087dbf0e919432cd091849eb3c01c3fa07e1cbce8faba24135175b070d4e09025e6c1c44b55fc029976f60aa574e92bfb79b2a4bcd8d6dd6002aa1db8e5086e22e0ba929c75aacaeeadb74c0f54fa54cf37b65803a853f2580dd5b3751579c19c39c2f2b3b995331fe2ab240914f0f8223ba76b8946bb9a86bbf2b9194fc6134d63b76690c391b2939e7a8e85c0ce64ede1a82f45d4fd8aa8bc43e34538951c635592fd47feddb2cc8ed9eb667f369b603c8035c788dcd5366a5d3c5e9bed84e6c4b484af20b00454c1f76b0f0eb4183260b9440ca053645c6dc838ec9a71f2218f457069ba221b8c3c9c48f8336eb67a5b44c3ed84d6c275ac45798b914e9746d2fa5c47a2e0a9f3e444268214b882c0d6bb8f114c18adb75048543b9a07de745f0b2d35865c5ae2e9c96ba96475345b01c9175629c566626347ea1da89c563c6b61087b060d7e1c048a4d39c2ff36f51b5a3d79ecec22978f48516d319d5067213a100d1d5ad2581a14d6779c20bbdd49856c63d1fa3d09b932d2e7c16ac2cafb2a07c1029f9696e73e3ac8b330d223a21e7df848164c3a15ad30e20eb534701cf5805f979dc0ef8d20371e86bcda9ebb2824c516a7bb878c23e52e9fa442af3c72345364ae8d8b2ab7745a563b965f0ba3dbee4d990b6bd67856b8d0ea27ef7a8e1420690310c8fe1588f14a2b0c577f0d7bff15d9113464e1798fdcf9e8bc098a37c4809d56898d05657052877056d3d9e9020a9c33a755f3ab4f4a80818fa04a44513cf590e7f106d6e311d7fdf13569487e10e3639c5c65a1f41c6ec7ade06e38d5c3aec5f058e83d011d9a3651d57d107898c1b90cf58ae684a17c4da8ae9a8e7030f815d53bf17973edee4642fc9d5da1dae5dc6699cc591ded761378f9827aa0ae8bcd860fe4ce0260f3eebe71d06e4ed9fbbf3b72507a180e922441182b2d477e734966836b1f80d6774242fbb98c52cf88ba6c83ad5f9c920dc2b8045a03abc7a087bd22f46f8a687b3f3ee5e627456db9dc7f4d37c125d2758034dd61cf581250dbaf9a340f966abd4c29a28fcbb22f551108a3a60bd6634980fcd9ad65404dfa4967c94a067fc8c103fb7eeee455001524ae1431d634689074c8e2e5df154124f211710e754cead467257e38f636e1cfc9e73139905e66a547474d73de84c7d8511a900038163ffefe8511527ac791c0cf96abc5334e0fbb3bfce1c2c2ae301be087bd146a406791e0201339cc233d6b1583c4fb6167f71e10ea82325acc1e01caa8051fc65ee2e920486a87e91d51a5ad6d0706687058d8c5f82573935f41d0eebb3df0999c3f38629a793baebd65d85a5c22e9daa3eb0db79af4cc9346eb37353385ce6a8e354684bb5c07b48098ed6e0e53cba59cd7cba9a3f9f51a5d1857e318ced290a15e85bd57a50969cb7ce37a32e72fb9bc92ed15c585a6344a7f12c27436f8bb083c2ed4acd52b8b2991e0dc25b5d0d7166de4a2bcc434c9e3e1d9d108009eb5dfc29c544d1a05340c51fa1c772bce8f7906f56f7aeb94b5edd0a1cfc6d0b8b3c937a627ced73198d3b3bac0eda0147cb397ea69747b690ce43196bbc070a7f8be2d7f49e10f8a970d0f8af058377fddae1fdc35ab3db28f222c0b2fef4f027853b73afaae5e3a916428f86025a1527ee5c2518e8c91bb085b26875166bbb560d74fe3bcdf60c55fb4a14aca39e2062ff3287af619d2829232486dd733301ea25de7dc9ba6bde902795bdbce8aa716b41dfa22e4e5f6814812382cbc4c0f76126645946916079a522f5ddc8c7b0fce255f97e174c7e9440c39f90bdddbbf06bd275fbb97bb35e23fc8a5155e9a36be0fab26466e7f970a59b24d5a25e725c1088e0a969aba12ef906285af0f30524f3ede7b039b5cfccb5d417193602ae4e6375326f8c839298c7719418be3bd8bd044d0348eb0276fb623ea84fc21c62594e646e6090a1758850b97d0860e1ee5696ffe9e9a3a52541c589b7d5d53a972f6225146d4064f17d380210a44be5424e88c9944b5c5514870f5be6205467366b0829d718947e31080438be2449c9d2d2774c1e42174c4f92764fa0d15c983e7f2cd510b87f7426fda1554eb02ccd217c2aecef87f49eb9b7e9987db28c9a436542807d4ebb99f3c78222254f4c89a7e5f968072ef2f128cec4bdf6ce6f0748e8e43ba99d487278603225696308a5d1347ce4a414f9c2f8abf1e8f475432b762717423f60c1d5b80e53163e428f8c7d7c95011d31606fc9966a3b9a3b976faa12b18f94e7160e9f268c5c666870ec7e60e07518c0f662491cdba7d311c3d21d83aca1def185e9c3587fad2494669186c68333a01b664aee58bef682698e63637a1f682ee57c1657fbef49a2e5e50fb6ec6e0db7005080ffe38fb64dbeb45358101e6dd06f054d9c7ab7efe981f08bbaf99e241df40d026945b6df19ecbd701a001a597042830915a4861b2920c709be350904446443ec8b60cbb09f52e4b4cd01b17ce408f4269987a2272e1a1f41395d2c01eaa284b4a0f0e25f0b6ad77d039496d134949634c5cbcd53ede2d7573c4ff0a437cefcc8fd9be26f4dfb773fdf7d4c724cb239884e72b4674da2f0100fdec15c48b8313aae4cf353137c3226c47d9cd1467d48e137538069ddda985b6777ed720ccad1548917e2f43d172d1796dcf80e6512890f16e568226806c682c83b78fae6c0676ba4ee893924a7d9d97e2603f71a53541b8c14e63e94d951de6a3dc10c4a0dbe50be0e3544c373b3954180210db3384d975303fb3703210c73fcd7ea899d487f0793eb0417e01e1d64549c8d971d9897cc5de94bacb9b258118a7e1ff53b2b40cbbc1980ea264dfacfa5ccd138005da8712c1b8446fee318ca1e20a8ab7f94654b996e3ccacaaffa7eacd14d3ac69cbfebaef2e6b00ac708f7d74a1902f15375212d18b7ed7bee264f0b75465fb2927b5d3f95b146f044505bc248704ae0794c73bfff4a32d9375c845424c7c6c22fa4dcf8eac0eef34ef060c98fb2ec081beba5fb8b5ee4af3774b9f9f568c4d379a55afbf19c1a6724fe115f8a17c216ad3e2e958902c64de969dd7c9619a38fd6d39617af84f6a0bacd237460ee87c5e57d9d6d8d942bd17565b8880605c4647eb79178203f6f3829047d2b4822b584a77d8a1a01d83c45489633fa4fa127c288e28fe9a9d118f8b541013cd492620a886ac112b912fbf196551e5d7145ea1e99cce92ce95fc5e296d5e794c71f2bae6c8019da270d844b3a2d3f27377259e9056edaa6f5a42f3af60fe9f3b31d9092d8f6ecc249f3544475aa4e33bd873e4c17338b9446e47053045a1c9afd550915af891747f41447eed8117eabc41b0dc799e352e838c73971051737161cf239de0a268cfb33ba2f9d577c6c7e69e16d8dd11510ca001cd152c76606d688d585b32943553668948ebca8a978aba9712791df70a41bd5785cda1075579b43f1721d5e9b963722406bfdbc6eb25e1e72fcd87829d3ae74f2684775099bddbfac969731f411d31d5eab84e337eb99a37df2d0cef9c004d6faca5d43910fd2c1505e3cff93a3aed4ce9897552641464aa555e994fabba674554deb2510f7c0b1c5dadbaaa7406a4fed66f83c31da2d6979e33b4107a6339e0ab13cb13f877dfe23109858263687f3d894cad01cae1e584e86858a63196f440a87aab4cadf5937882ae6ceeb928d6ff33f6f06f000e278221e8587098d74c60be73f3690f33f01786a9ec3d1a2b92bdfcdb42b4ae55d76eb041a34cd448137dc7df661e6c3ffd73d9e646089615853795ec883a774b474d2b1f3de3f6b586f351edaa789d5e7338663b7473c6696f1ad4ad04e024698c3ef8844a4d950c80f58536757a609531dea2090d30c4aaa94a897b1baa7c5dfc7e9686058a72081683793921ea0dca6e842ba4e78ed966ec54d19be3cab16afbf720944e0fe625eb2ebf3e5567b90e2569bdcd7218fd2697f8662ad5712798d4f353212531d940cc141ed96ed18a854f5d1fd7041560140500298ef6a5ab54927bfd116fcf68e1f4ebc393e71aa84d071ab2a6f43b4e7bf488c70ab04bc22f8d47127ee90eee4a3a4679f60a3d544d61a8f7bbf15660d0f029543606936487eaf83b7b206303ec3d5cbe80b594d6292a1bb1b91e7f1d913fbc03ca72f27b0447ce8ccc838c6b6c6d87b82df86b297fc6eb0b22387783d095635c0624ccce8a9b0b5d229d62f8b61a32ae6708f43e8ddb618ad2a8774179eca1d27da82f3b922f66301a16cd0a5ebf97c022cc654283e22315679ce31f0458f4b2189bc988dce19b52c8cca920c96e276dcf38ff72755ef4f171cec984c561ced6c0f82236132c083bdff2c6dd1a843b921b31f8f7d637236dfb520fdfb4f157c97354ec0f978885cf7f9449d4251b895b193f1be47d298df9c724b547d94d4c93cff78dd1fbd0f66ddf1da3216fcb374ca8c7cdd4f8b8f2f251ea6beb47d5d281ec42b2c96b1ede04f0cb271de843ed5ac07854993e24c5617f6350cc94e79306058473ca0172545e7dc383aa23aeb6e4f61959ffe57a36b2541639977b99c3a644b57b7106ecc0ffad6</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>blog1-Hexo+Github</title>
    <url>/2020/01/22/blog1-Hexo-Github/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="deaec971ce417489a16200a57e0394acb061fe1a42f4b4472c691c03bb0c5492">a4d71f05c78391253da0c711f50d233f083e82d9216fdb03ece8d7c28bbc10b7c094a3851acb848b9133aca0c359b28451b08e1ec8050cc76cec9f03c11f76adccf3e89071bb68243f4086ccd91f4cb0ad4426b948e6c945acbcb4f84f30da2de396e83f8bf9433736287880d037bcfa3c2d7427306587768517a6402282312e5f84a3b8f3c3ca3356ecfbf93bf7fa2a143e9b579cb2a3f808b7c21a44f82ede63af54cc9cb829247aad35af50e2d4ccc7aa7263e2604cfc3e10ada8e52c4e7e886f2e5d26178e7afd527c03c69f1e9944f3397296c147730cf57328e38ba6742d98b13d3f723c3ddbce650317fe8d7f9d51743901baae8bc248ef017dc8e14cdf2e610e425d76e7d4d5f0f900f5633cf28caa79de931c6bedc0efcc765dd949a8d53796b4822eae9a8c5d4efac5a7527ad56a78a8386a6cc7b530052f0b71f180331c85211369f3d91ee8ac5de476b6c881f984b89ff7744bfa4f66bf377bdea5473b9c2c56589b2fce822fbea6860c59a5d3127b23555507f52bf7740f8f0a19184febe3ee215139edda12484e2f7ae8a57200d4f9e72baba0ffd41765431b03041b5f50acad9aae71b6f3dd41410de7c8c8ac02627f4d632bac301ad148f18968433436b832b1389a884a0fb9feb229739cd5014406c7d9fa7a11a0183caa226f793a2a83551183b3c7c538394ed2da50b0f7af12303f6c5f4ca8fbcfa4ee334da563754618eb5d4f2af0f7ea01e4eff718ede9b994eb4236ad17e510b4d757daf8549e52beccc58e4153149087c18404d56c41d899302acc52657027958346277271406ad93f121b2999634fc7cb3cddfa0b93c62b16102efeea6f28f8d57e988dd59d0f294cff982dc51fbf5b9a67b5dccbf6c6a89a40537dda350393beab758e5733679bd8cded4ae432551f410c89680645b35668a744154e86672dc7e2cbd63ad31c2796792fffcffe754112f5e4a491941cd06fdd5a6369720c1b330f621da77613e218daa13ef7c1770c234201533fe25b8ab38b41ac9dcf7e2348a2619c8cf754760e13cb69ea704f22e6f8423e1040ee131950649274e1c4afbbda3270cbf253b1facc9da668ae0a0bdef586a6f09698b62d2934737a37b259c6ed7d0d28f5492f8311d5761ee865282e553b6b67ead6474719dffae771321661be409eff9419551195c7e6068688cd8d61d02135076cc85993eceacd6be53ed6acd49b473dea213a878fe1c9ac9dc7a76c45ade08644f19c56c4f23c8bbd640df936aee74d2743b0b93416272d8232294646ea782ab24fb475f0e5d1e56bfe03643334306ffe26037d684932de24bdfd3608bc4ddf15e98f2b2f52410a06acd5089f42d54f10e742eb64b4dc139e05defd85bc799e2a69ccddfaf45ead6f4c8668fd2f0279550127c2f90eb0387475ffddddb2485a12861a008eb55d13a569a18e07d3345b3b5adcda8dd38f9dd163d6fecda436b396c71121f071795680747f6ae3f0a1f2d0eb31bc604974cadfcc341f5d97d90dfc70df3ef3366943575ff1aae1aa5c4f28a65f059e787156f0f84704a4b2e2c597b9896c1c749ff58796a76410e384951c6c414def82ac906533626e6c81728f8061c53fd8b0da263ffd210fdb7db2676b8529f1aee4465a9240d37d20073dbac6fbef1940de4813cb47ec856fc73c0ec810e9beb8c2908f383fbc7bd920419978238c7c13f4762a61e233ec62dd2ec10d14c43529cadaf7cd3794f8542fb77efdfbfd5f95a7f3433aca14967a1e79fc2b483c20597bf6ae04219b40ba68941f0adeeecdae78d832790cc4bd1485773a6750cbbd000809466253440560f679a7cbf00fe23d4747f2b57ef659421ea411b62e2688fd9e06f992e108d5193ff6ba1e7f5e0af9365ca6208c4216789dac946386d0e9d12259dac9bf6df04f82d33e76e050cf3348e1271584927b5e1c9a1063cb8b5761e82be24f690dc2be96d9ff982e127f032babfefc73a4d0edf451b977948ee5ecafa25264e8e47805979f5ee36320f76f814e225325eaeaec5c1501e926849fc86890e4b6d5ece70e4ed50853e71dae317527ce18d8c9e1dbbe44306d973a876df86c0b07cf9dd4a34455dea42437bb3f388e8fbbb54644e0ca343aa69bb2b203c506b64d63155bfcc409860b7bccf762441e8741514562ee439aca34639db7d975528368dec1460fb2d86d3aca3f7926c5bdec503b6268afcca817f081037a53a154a2063df1585cb0cb0eb63ddd28612b069dce851b9ae78f62a9f90dc2ca04dc6acdafafe0bb129b46591d57cf66312eeec4b21fa41535c040289e0d5da8e77f40bb979edd03be5ed336b5fb341db712788d5dba0b5b236149c1e54f7955235b8c792f42abeaf18459ed4f72edfe5f99a7464fa0edd530b0050c4d3c463f8d50bc187e46408d363aecf5617bad9cf3067a084a6cc1bf99206d1f466d284a5ddcdf00674e657283de6108d89cf4ca822b7d3a31c986c9c2e590d1fdb98318d10c8bfcde78b0c7f1c3dbb1067d5eb68ffd7ac927029043321fe4f217aa3c2a22ba048093370c7bcea45ed8742c59adfbc7d945cdd60fa9948400a795e052340297ec561c3617ef834f1a496a5c4017b9ed5e2ebf9e708466e9d5b09c361939192e8a91de1ff8adbc8e0ab64a83ecf59b99382eb3326e9dc2d84632866b9084781190646640ecd32842472b1c225bb397be49a6a809852d08ab19bbf149793c80c69631d448c08face8ed5f8882193a2af5a0270f7c8d7dbe2593042d26067ed9a4ba2374d618b682f1a93bce43ea3444c2e6f8bb0ee39ab57464e254ed3d333790a5d8ba9964ec2f2be2e4b2b4d92a3641903b081c5c6ca108d17111e1af5c9dd1085d690b4caad03001959b05139f9b40b4c022b80c9641019cd6ef712cc6c53c46e92987094b351725ceb381ae108aabff90a0b87754b0750b3a1555d7ef74286792e84304e76e4d07a65eddd0daf2a89b319e249554ddbe02b64ef0dfab4706c35d05f3fe3a563eab942dc223271a1963337f580b65a903749453a131a101b60e1c0b58d386f1b31053ceb965e12a9c22216e68fcfd3ada36cdbe29767f14237804364179821e829f2ee73b8f2b3382eb4990e96e5d9dfacfff5764e3e7836ac18697d94250391a02202978d067c628f119ed1f3097f0aef3a3ebe6fd39e89be7a69cb0ea2fc48a0097991c480a3ab6baa393ab75eec7cf124afa4e7d46c3e3a482b2195d3aece1ce5ba7f63f59fadea657ca081e53756a9942b3668e46e0ee879fb4e9eb0358ff7f5a511b94ae0683b26fd5960abfd03cf5af9d9805ccfbd4c35c90b6b749b192b1c7d6ca855fac4884ecd4861a9931f941344cfc87196b44ea7683186c9267328a0c0c9f2f664615ab8ab064278c5fa283aad6f44ccbbcb6b95b4123e521f6545fcbf11096debcfbed69498b228a8410a55c3db2ee33cfcb0845f52bfe2ce475aadeafdf4b456805f29b82d56c2afe114011f986a9f5e8a7fca0a87c4770a8cba1fbbb7fca1cb2ee6b0228e6734e3681604ffeaee757b1e285fad945b3ba7ba55a69cdc37e54baa02e82bfafb62330cd5fdd2217f0e2914adbf96ccc44dbf84559d3a65dbc6f9d3a5d132f6295894943436f8a56a06006c7cc2cee4b92121d0aa027b70c47ba7da6853480c7c9354dac48caae3c9a10270bf237f27a495b1ef94e8e72b2117f42d2c66df373af6ce6b042e5f0d4e51c7aae585287d6016d8358a879026e6b7459c0216f15e2ee0ce8e7ff97c15fac992f8334a14b5b14270468708b7967d0757f0d3c240efd8c93f06a0a87ee68db5518e3e7025181243cab55ae727cae700fd04a59e36c5744eb02141cd68774dfabadbb93285c01a027238c68f02bf37797c8e17fae6ed4b484bac3a621acc90263e734aa196dd0b58312ac12297e1220f992b3b288a2cd4d0e454ad7d803db44016e90308a3775735ecbcce3ea0fdb900683156ef13980aa26a503d115c4b2ca6c2dcb0a905d1df74bd13ddc87a0c02e7dd22e00232c3c7754ef19c33b7bbc93b1bdfa7fa8d72159a7eb9d4df006de3f74fd027fc439aeaf1dea56000df9402c200402d3789a4b89dfdc11b011a078d3ae36004168644a10ab355732c76ead27d3f0e9bb50918ce99e8aa0649634bede8fd996955a9d552c92a01dc40412c17ea6b9648a133f4304003f60733870efe6530247a11c411f8e6b070e6b9c17f4e8cd8e0b69f8ed5c2c54326b82f06af31133142a2f44bcebcfb2b19eae1e5fbd3548dac6aae8386cf7a8dfc01b579c7b4738ee548f91eeeefc5eb0349e89e497b267888e2ebbf31b72929860d8ac8bce0b4440857b555b97eca1e5fbaf352045c9564b52aa058c412591d61cdc15adf47024686f70760be66166464e2c681a239ade4882fb170a85e76e62e1597d5286aa065f5069c2e9fb1b29e5ba04b5673602bfe0d7ad3b5a8728fc1872b0fe24a28ec0a014e9aef32114606621cdb25591f118ca9993b99051281bfde1c67087542b85a3f7112acb02a8208e7e3dfde539f554405fafc95bc0159218ce1a0d4fbe2568d24fb05f3ef967b598a7426b924519f28fb5f7981543296cc4bd37b61e10da341651192829fef54581dc6377100b5bdb7fdd2e4e61115f56dbbe6d967db16a207550830a16b86984ad4bf7dc5a3cb55763904c9dac541db6396382ce0c872f30ca5e61f56d632c5efb558e1c9d8e561285a5385b674fa32e7714c586b60a9b10a70c8d4dad039c080b7c19067118103b8dd58a3b0751bfc4a0a5081ba040c62be6e9cf7204790fd167bfb9eaa4caaf4f8948f598adf98977d4a4711bc4e0bcc721655f7e1de860de482c7c96e74c17f394a077a57175af239aaad8bbb203e42497f7b83353a734819ade8228db967c02a9e0f528f0a7c8ddb01a5cfe24877e118c737c9922165f4ed83d1692ed2001082634833824d87080c11137955c41f2fbfdf34194cf649f5d7e13ef15be7698b21667b89ba796d58770ee917bb5a4bca0ba54622d75cc6966fa5246c08bfcace6c7cde1a8db75781b5f71fa01b651e59fd20ffb199f79191f552867e3d0197e59ae62eb69c465a4b55cc33f003b1521cb14b6c944c19bf777bf3030f91d5ad4785ab8d7728e96193ed7c136d6decdda3fb475ad8529fac1416cc12c68485a1c7f380a0f852a43cc967ef5e727b8646edce227b6c6a2acfcc4a28b03e4e7a108a544fdf7bf567ce85bd63d03ef1e8c173707061b00390ba24a2e87bb84e20ae7fdbfe3462c33db331fc9596208a43281fe1062423f284045c3f9a2e467c0e080571a3adb67c57a3374cada8884424359f2c3da3a3151d95a2871ec5487468ee53e535d2c7cfd64d680433560ba1b068299de730e99640878beba49655def7618394a01ec87af4cc46b7378ed6bf599bd4cd78afe825fc5bd4dc788ad9a63c9631ef7b2e2163656d490340bbafece8a5a9f45a9e64b00f440de7378c912661137cd98bf175a1066fe1a1b22674dbef902efef08e6da08ef4a3e849dec1700c98d135b4015ad46944547be27ad87ee3c35dee1e8d2e44c90459105a30f8bbd55be7e7be22848005500830dd76701f2f1a9bace574b3a87b7b13a63f94a2831dd39cade2f03b9ba3c82c9520ff40398b45ea593b23dd7d9658b979a2e3a0c4f874495acc2af09a53b4bd235212211e26a52588969f41a482107d90bfca3486aca7ba5e3b178468785e70b2e8173e37c17f32bf720366928a2b430e29d514bab5933ab4aeee3bc11fe1232702083d26981525fa2d37494525fe35317ae050da31670d2076774b17ec255d390cddf1b9eaf29e2f8a8f80818317e5e7a51b825daf416cac5cb0fce2ba165713a14bdbbcc6ca5c38232c76e00e2cc6ef31b48f168085e294a819af400bdf138fb77ae6ad98da7651d8d83695da5d4b8b40f74c0282f5974376c822297c837f43cdc255eb102ccdbff1a072372b78a936a3ade51000036b18e2eca142678bc71f2852c146d4b1fab8ab2d4879c9d72ec6dd3a9db9d1c3d1add03c8abd5f086345062a93b4da0cef63c68cc4bd9833651fe93209a7434d4ebb2a1e702e397291bba6d7808950ddf94fdc079f93b1deaa685f29d065b8a26dbe5218df447d72b7636a0d6bbfe451cdb0ac11c772d1eaed5a58b153092c85f43707324c19a5f5449870f93bff4721bd370208a60526c1e0217e5fb2674709841245b1aa8b28a66c47bdcf72e72d5e424838ebd9230957b4f43d00bd07794fa58d5f8144bbea7397b62f4970f4ae4e3e94204c67cc9f4b07cf00062619dbeee71fc28b02c5bd2ac60725d600f5542e9a62545c1978e902a4c2266c08fee9b82bca66fca47857f842c828f33ccbb3b98e8b156660f983898b2436d5d00665354191ca755d641ae1d688c8018cd189dc16fac299099c6c8cc46e7dba10a6026b0a6a2d98b0fc4c2fecbd61d100df229b5c2be9518d1857da3ea1be75a0479a6be4b98b13af0e858c89bf94066d2a7cfd5bc9b071b5c37740e5a5e66e5386c0b6a4bf49f24aa8e091fb00b7dfd085320e69de55ac24c4cf3cc25be82a67406cb2a824b9cddebeb67554a97cd2317a371d24cf36e57079ccd9a0ad56c8f35aa33fc1d1987b5a41be1ba8147eb35a90101ad9469a34ec389a673542d7770774566b73c97838f53de2f21e2cb1c628c1121de904704b1afdee39cc2b1e51803f0d194ac6c3e8996c4c3a7060a2bc21d65d83adb8ee9e3f71052aca0524a113ef14bd0ad5565b3162676871cd69f134298ded838f99ff47b30b3222d2e2b585328295fbb4c68fa2eed8b129d6fd82de81674c5ce6a28f9938572b55c22ecf6f614dcba28c3cb586c031b1c84176b4f30237d5cefd609738bd79a7c55896409045274bf2a6f80fa8271cb7d5d2c03e9232e397eb94b6ca8d3444c5b4ebc619472313a94918ad8d58b428923c775c5142ed3274171b966a7f3f47be34a6981bab7c0e6048296316c1b4aa6cba4f76599453bd1ab872bf4d5c504c363d63a7d7526f48ffa8efc42a6b83317fb01c9aa228e0b52414cca14b2a669c323571c6ad60a1a8dbef2ca5a6dd29bf059123982824c56cda484f3e487c8cbf3fb86c6c05ad3c8420411f20ce2cc977c954ee58ddbe329af7eacbbd4df82d9be334195ad42e4447e2ddb753ef832eebe7988263b796c0ef394e4b2a67936e7d162a45dddfc6d3e5966557c8029ed63b6269d9ac123288c793ceff7aecb7e8323f77e50345c75a1bcae01b2b4b2bac15178de31cd258e41b3221966b1b0213e1942d0b4083aa72cb1d5eeebcafc6e5e59ee9ce136ebd110f49a0778ace9fedead7a7ca8fec74ece8473202858d414f5f3b99392e7c8f5cb687396ec4c12371d3bac980ca8516dd4e3873d09ae27d7698d198113fde3f8dc6e2b1b007ff23a373a216c7b2a9f2597272e0a05ee375fc0e40b3e9876f8f9deee939ba820a6149f8835fae5dafa0c44820cf3d6eb62faea0faa6de1533df8d72646d703ef0f5fb34365ada58af5e083982922f2d7722fe8454e5e3619d716981af1d2e57cfa23aa41d49ad468971d2082f065162d9f7c568330526b3bcb7251af4d1294b0d1c3214260a7353c18adf8712c071a32048503a74e26378d8caf56ad74de6743494169755f84491047bc5b666ec84c083716a5146eb204860110e9f3261f1569a980137b78795f68efd76c685fbb50cb705e7fe53e26e7abf90659f717d0ee17987b821284e1950dfa99229dbeae86b371aeca7e432af8ee281b5357c8a9441f02790b1545f372e729078b8141543234cc7c3d323e08db061d06948bcf13451fd4a9e9382111d5c9defcef7391ec32fa431bafd0e5506b5957d32159571e417426dbf6ad181880f7fecfd9cee7c6df711340a0aa365141c5d932316cdb4a92616ac51ba92a5cfdbad7378009754002021724423dcc31070bf03ecb4024f8520c7d2245bf0e73aae89bbb25cdd4b79391db0383d2b787a66b4027e208c5cf713646c287a24d33cfc4f56f2e69c8537d0a4a1594e388a0f26740b6a9163542b76f5523d536ef204b0db8eea030150b923ac49ff239509f77e94fca542e08da4fd39f5c319f4fbb3ddcf56618da29ecf84d86f9cca155ca14f752961f3d6f417097e0e298440f492cd848772a0fb72c40274178ec787cf996d818ef0607595573eef1c65713b8f8df57e77aed5bf5817fb93b664548110ea5a7170c7c549d08dd62dd8ceb44981ae12d6aa6d6f612da4ea0a58cb9813a041b56226d7fbec59f0be85c0095cdb32f0ded50bf88e88fd913e2934a05eb1c7b09189d10d245bdbc0405eb43be2beb4f4e5729b5f14deb0916756ad2ac47fe7a8aba93196f4688936e0e194aa2d896b976a14eaa536034149062d44edfad07d1cea58e0536e27b5060ab275ea39fe4e60fe7ed0897b1bcb8e877aefddd332b8e7a52b1fac964d6e9de80317516fe66af4c4f5d8131e5fe7b01f3704e549227e75bd746360478cf36e3cd8b0e4516ed3152c58dd8193e8e94def9646ddb4ba2f251305a101a849344f2e939c4ca491f3139301605c2f49aad5ec0cc5d6b230f95fee19c490e55945e80766297c61c0b5519e44805bb0ac51f7d1d1a2fb271cd402562bc2177ad02bebc363be571acfdaf075b53a752a4a3098f8919113fdfdcc0e914f50e04982b4befb14a17442d383ce135587f6444fd4f909d3072dfa7171b18a0b8d912554032f71b8a2cc1e33a67d1ed6452494a82f01613d81290177e27d2f8e260f78c66fd9ab9c9aec9696f091ef1113896e37e57b42ccecc1e61fd05d71ea6e154cd8ca4ec4fe957a040c4b421b63bf0f7ecdcd3cfb8f4baacc8e0883011b515d64b1679fca33af343b5329ab9f0b6fc8aea704ed66d528824cf47443fbaf07732387bca94d2acd5cc70bc2763107623f77985842c0766dc04ff92ef368a45bfd54cf253d3160df993f632fe05881a4cc5c693672cc08d969bcdbc3f4638750e0320ef10ccf123606f94004081c62f376f0fee9e5f4de78f40d819a4cb3eee7e02a68c802048b47314f23a6aa06831ae8b5e3fe497bbdeea30f6d0aa285d0fb11f1b73395a62277d8e3c54cb6e5480b655aedb931b6559fc4f3127ea0273aa2e582d5ef994b4154ff3f3d5ccbb5c00a0d5bf2f077f2af83bd3cb5fabc633d01e030d9ebc18b41878e6150ad1f3f2b37c7ec4fe1e68acecb48934fbe03ce971997720fbed1e07246725cb141ca2ce8eb5b9c09b69c5974ca91e703ce01a5d81c062e007706ebf1ebb74909c4519b15f08f58cc28ac9c4081237aaeae2a77f1e6db6c986710a16de54bf25a5d57370cdb6bd0035d6360154286fb69d3564f8bc99fbddb6d46e9a47f61c79b86026b0f2daeb98a6d0ee685c0d77c01076448074c023ab9d56addba568f5ebc82cc4bb019bf26e1a969fc3bb2d27a5ab6cd05b6243a654f70b9de541c3b98ce178876c930a04dee394bb308e130f5c1c2631447e014e4c46459d0d9d7519f8c256be607d4c853475a359c567537860697642e73b65b2db70f083931f8bf30b2788119ba7cfd8c030354e409a984988443185cc90aebfc39cb6a47eb22fb91fddaa7445a69a0b56a0a4a1415163eeb38305c8c0ca134dd33f32fc7bed67da780477f2e3b0ab266a8cd921ef08df26b2e63689f20d2ad0db372b922ec0bd40e28e358ee64165c1b5a7ff5e08022dfb2634b7e052068fca74056b318035fc8bfbfbff901ac47ce66fd86902f48c9a83ead9fa2527999cecd1d477b8f2090192f6f1bce84f58e127e34da6abd259ba51f655452b3ab9a39113c277a4398c232e274f3002a6939aaf84a5374cb4bbad2b949d963a9706b3003dbea9d1ae4fa288954b283046a71bd5cf6fde3b81bb44e3a1f01f39c6e5872cd122f9da9c3fe26072243ff07bcfc55bec8ad588ea6a7df5689915c7f4e18a6918c48a1054e7d4126ec2bb68c7d32a08e00c09d3be9193cdfec0dcc3f67b0da8aae27db7155ae63f2810da7b142210e06972cb26765302672b7713c1dad9a6c2f5f5970edcd7b5905ba65860bc6f91d1693f8e7954b4f4064610f2c175a9711964919b25c87e7809abc2b6a511ff558c11b04e88e8b0d24c5444c18fa34746a64eabadb1b5f0a9b9ff9e3fd4f39111aeb3f79185d682b7891e089c749d3992928fa19eb59c9047b724ccf3bff6196c8ac0042ccac63bb57163150fb492e8aadab3e82fef0f9e9af891dda4a41e2a50c4262478c62e0c93fdf1725d6df68277dc3a36aa637f695d59aaebd15bc239d519ceac123df447aa985b330d9665d4d02e0d8f9e902d0fe414ddd3cc940dee69e3defad558bf829fd9bf5eec12e65c144be264f8d58162df58c544788318defc1d0342cd4ed9c67e628dd4f4bd30496aee32a9f31b1a5db8be8c84c27433d7eacedccdecdc266989619cb3063ba083f7c1afdd44c1a6b399a7cc7aecbe3ca784f7ba901b375f2c1424a0b144fa80ade11cbf42fa8c0da0ed23ae0450226f9c5dcfef3f6a46f7eb0da7052daa2808801e468df64bcc8c1f90cf6d6fa254e0f1c11355f8dd7a047f0920ea1daa6904daad4dde49eaad8f9454d60b53972a7099b6f0634da922e44744b88f640668c5b420f1e69e5642e512ce0e9a50ca7fe5f260143af4ca3797646fca26d90f6a2a85f400b1ffe23715d94808de69f82488af2e6eb98b225bac9c7470783a2374b17fb67564ef426533997c9986b9d4aae90f5ff1c5674652537bcf3498dc3f9003895d85c011d0864328bcaed7b88808b7b1f60d32a63093290cc2c028f2cdb7ad03152ac017608183d609e4a99584d76c9ed5d19dc07abc209683be808d6329aa12ff819ebc7b66460db38d363ed5d56e28b38284233b3867b9ce17c1426895b79516d89aeb18b768a46860a35b321ef01a675fd7e4d87c6ae64bbdd00d4327be027f945fa0e673ac32c4852b48612bca1053d9435906ec4e79f02f49d3e40e0109518e74286e97f2ea1fbc77723d5655820257d82cd44f6ed5d06e70ac9e61fb4209ea4801ce0d465391b95e10c634670ed687df808d1c93907c4036ca02c3a6cfbb73ffc6217e3971a58e469c6945e19fe892554a759f4a3a48bc83e35759cb71e05cfa4107363e4e08e6d3d1c141118476df3870dea144aad8a0e7a63f7e0e89ec1baca804b7bdd5f61a7a3362d6b5ad206a2dc531e2443060692446b7da0b13370b8e60051811e8c849ef8f8d765e85ba6945daeaedf52bbb12c7270f327e26413a4208728dbdccc075f00ec754f511a0423b277c8e1909a858f3bccdb01cb163047d92e6a96fec9d1bb3d536a0d227a8dad382e60cc1f6db1f2e6d6291172730e712ad1c19d5997e55194c58d262fb1f96b8713b83676140a0f955d8a04826f588782e5ab19651a6f97991021e83822de82aba56ac22513bbec7010b9127384fef262e693fcc77ee206d5aef3b05e4f40a29a9703715a31e7128e7f7f6cb5c44236089990dad84064409f705784df889887c236324554745fd4d396a0308fc66c94857ec3290078e0456bbaabd0ad136f35c97ff0878ee6b8504b8d1c2a452536abdad79907e90ad35a46fc6c750d4c7e005fae479bb372a1123a13df30da6597518661be1ca6a9697b6585479af1d25162596a84b9f69f5d1434d91ff5f95e8e452e1027115f7e8cf80ff20a5af58d599bf6333b6b60a1e7bfd910a8b081bd30561ee9955b478ffe6fd9eb3f360e7339bde688c636cb585a8bb16270257c2ca42cda100e0c6ae21ef7c30fe27b60d2967f7f2d35518ab37dd50cff6a70faed074e443299e72c659a497ca255d44783148d0e1c5436aa1bdfd20d8262260a1c4400dc34cb5cba0e6057aeec47572b194054d549bce9883a67a08d337cdece616b97b01b4d15d656ed1277ed0b37c85775237138f95cd69d67bb3d56c763b927ce8412b706cd9031ca86abf36da2495dd80014e07b253ba58a1d66e7069b55926a4d007b68a3bf938a34bb2b7f8de76ecde9933f26dbd1336478dbaa98907f7a374e1176440399c33e74a3cc0564dab6fd4e66156092d2d7deada6c4f194890c7a0ce8e13840381b7f2d2f09516d1f4e48712adef22fa32ea884570c47a8da962e26b2aa11e82fb940810f9c28547f2f6cb1233f610206ae917d23eda36062161d46798453f9cac0da5d69f600ce5cb70f0b55fe28c0d68773fcf5cbbe28133e258989d8830753dad9efba1ed287f52ab5a7f10d5905fd9a5a72509a5cd28ef88284864e3ef8164790f0457b97d2de72aa5167da7921c9ae6fa10ab021001eb71750777f00b923edd2d357ba4bb64013d2720bc45f8319bb8eeb987656588c0bfb356b23e97cf3c38a148c62df11b916ca9a4627aaeb7452953932774bbfa4586500d8fac0b4f677fb525127c22c1b6406057eebd011b73afcce589f6bccf3e44ed1e4a2a1fc18d3a069a762318e68fd418a0800c88ef2bc925552219854e28e55fc585099ff00235d5495a4c43ac8400937fcfbca07efeb30c31dde9b3e82b9761f6dde8c1ddf7d3e1b75b8d73f0fd3b754349eb6041fd6c432438996b579c82670fb3a69e71f91ef5f9ddb3d541bf3a5070d9b866da8966c36f985f7bfba24cbe08fa05c34419356c4a11161985c68d4d1b9acf1870ed5736d546169ae23eb5a70cfb4101c5e170d214a73bcf8fd07ac1ea048f81a6458cd1212644145aec6b7e44aa5af9843a312b2fde6ed9fcd12d1cf42c3390f3d5dcf16386006f6610ddbf201f0beb6613d5c495a98a906da81993b6191f89200873c6dee42e40f6245cc80d360782de31e5f5c36f1e63d9a3a35a2046dd4b2b7a2f7daec81f412983c8d2d9134145c3dadf03436a2b5e261bdfb8ebb7b5a3b410466f18ae6747755249fcef006a306ff992f6370d98df587baa88d23d85e2fdabab1122941afc11a7d46a95bc368335b1f1b71ba241180f25b30cb091b659d8cb2a0ee90f1a725c7a3d768a385bbd78f5da93d32eff9e21881f23f8be02d095c7cf6c1b07dfbf3779c80f8b5d59f30b30ca8131c10e15d286a221275c501d61132b8dcbd34b2cf3131610cea7203c0d6dfddd7f3876bf8980981faa172e74cd2c5cefaa4d23f2e6248352cb3797641783af8a904ca17d3b6f34bcb829f3193284e5de80b2d0bd17cfda8b8ba31f101bb46f23724c71648ec3cbf743d90e5abea8fe1430811fcc0f86c5d5e789ea63235469a4eb1ca72930f4902512cc8e8a6776e08bce45ceedf634acab570191557d12b831718b12c1ae1580bd1b2193ee09d686271ac3b367c571dc55900969bfc59aac8dacf1fbd45914eddb545b00518dab87f7e4658ace348eda3e9a275c97166b10e5cf2bc6af6ea0cc157b5417b7668d3e4727bfafb89c45bab794fbbea4e7bfad4167e59bcb37981a356a507a35b0a20b88306ae7d32e334c4791bdecd04c2e37028be2a39c4afea8277a1d664176c814c0cb09007a1e1fa2ca04f310f230771776b58e909af34714399d050e40f936a33181e9c8e521b2e8aad9eeac8f62a02800cf7ef24c3a188e49c289584975b3df8e54c223fffe9ba510199fb5eb944daa25cd3276deba00e062d0af97cfd75e5645f1102e61db5e0aadd4721ca0661845de633de986589c5e03b4ecb2df4fdd0a78cb6de0768be4693350d19753877407254d914df09b729913ace1a15c36d04a8aa5381ca5d0034c11d11752976346e799f83098072fffc5bfa1f4d18985284c0520fa9fced44504f563d9943c510f9b28b2e7c477b9dd497fcc69c944d889835ebaddcaea70801531993e887c7dd438d80a062c47e3ddfec1287819acded8d4d0de4dfdcf3387684801b4fee09d2c3ffd326be102b3422931ed967e2b6830d5fdc8497b3b1ad333a825a481eb995ef72a4a8a8daf75aea7279f1b3ac291fb4256ec8e3cd21f42856602550b6fb73acb3564c336bb088eb40770de610b7a5c91e5aecc6f44a7697d6c0dd15c7168c665df381626de3382b15b10a302168bf7637e49b10b239c81bc9a632b48d710f261d5b0d5f61d26b0f48355d1aba74fd4db6c56862bf03225214554ccdb81b2f3ecbce7d1a43f9e9ff07d46ed38ffd6225e906b6a3ca8712f06d240922c1e4c40b0c53dce77943c5716ec73b2668970a23bd430475af65155a755ff760bc841c258ae742e679e04e39224f525b49f2ac6e91bf138784ddc88638b2a38d7fcf9b51c31c57adbe3faa2703f51d451054af62fa4a11f1429424411bf2852e062cc26d2f6c375c2278ef646c1321a3afedba987482419fd0fa0018884e909f9fd1be8ec63d1fcb1f4af209e2aa44873c19131db59db4717edb27d659aa393c872cb5071dd8fe7eedee75ac9eb1c9089f416811e54be8b60597dbaa9b66e7e3211ff492ae44d891c0bc8eb9406b2b3ba15980c7eef1b473d0ba892ae990b349525ad7bf99fd9118d818c248a021365d914cd65babbb41cfb8629d7b7d5c061f98098758d800096dbed1385e2939e933585f35efd9c1376037bb6339854ac7877dc0ff881354e4fe4fae25432ab6ba6081f8fd5881c3765aad50d24900711ef9305efbd27fbecf48314ae96245f47a38a04bda8e880b899f939e8b90e2c6879e78017bef31b504d031bc46614efbd514cbf36d0760f09a82f7428b2a73af120666733e4ca19497004c930b2a56ec263401f142ea05b2f9a2c9ad17e6f334a4f13500e2f0e7724ea13b30fcb26b57bfb0969b559c628b160b3c55a538ec71ec465ce4e01c0652d9fddcb1726ad69363a0b410e6f9321d06c3321be05d5049d7cafb5031aefe668619932a3b8917a13422de8a0fa19b9653355dcc7ff263e72d6b0a8176d07f7f94e06c6bf2e875f1d495a1708602179ed38db54295c1c2b44c9d7d0be8699c07768c984ad5cb593eb38f53b329d4c5b1a9bec5cc0d993ebf5ffb00d0a49067c91fd13fbada23076fbc5cdca8bbfb1c236b8dccf8cbdedf6639eb4d015d36e684e9f710f54c99dc8ae132f51da61b91efe1b30e63f83c4415bb9c3608d222383401f37d7f4cdb8a8a70eab28cb6af82ccc17069a39a381fa2133925da4ba512dbfdb8b81b2543b021a075fa0609446b43d0c1ee872b487a338bdb0148816d33e6ef88d28551ac65117b7efa03d6860b4b85541ade09e06b7ff8933535b451fb58dfa35c26d183265448738fb834f5748c5e73c4bdf2f3caa33d4e7036e83baffecd2eb12e00f3313642ae16422ae6e00d176b54c22e0036125755e8c67c783c8a6df8d6df11ac4cbcc0292c0ae5c02ec3065f573905c5a7ac8bc3639d14c7ef0b678204a21795694c330f3260bc3252f4f9d2b343922059abade4ebdf6cc4a359fe5581d0750222d820ddf9fc745a445a92239d425491ad8a9077b93ee383c6e3d8f9a0c9ab0373173034d863e6812b7a8eea93b8b3b6a1389e89dc3147c33ecf2b606e37f0a02e6138c2b5a9134704c4d6729b8e05da81003922f5d0b6bb0fb69353e7da42742070d72cd70fa7d994d297b063ddb75e6fe3684942170552c1b84474c3e1afa95f436b1ee80df63e117a2f9769111d1158daf3feb47b8da8f2a2b23a966048ec33e2d7790ee9a9f2394d9a41f1efca940bbc253ce24c7ab3e8720a1f0564531b672d515dcf9c93eccee6dc81f3bff2c15dc8823c7edc3f9e32eb383802cb841af9e38f39b0e70891e5aba333ef72f4303dc595f91476589f2510f26de7656f4a18fcc0093a5f4ce17634f00f6108afb4b0c2fca0483af03914115da07b32ba31fdf7a1bc25997fa853890d388a5afff3ef17b10bd6185381779ae50ca4de868f5c7afd772a9fdeb1f612854dc3d5fef95368faef78faf5a882d9d65c5ce5318786c915090fdff6b05c31b9f6535f8052cd8bd762f5efb1f50902491da6ddd78487d67f81c1214261bf340bbcf7df6ea2a373b5356a8630d3a935050ef672bd2d560b1216edab9dc809c24f0e7af4aaefe55e30950cb076b6b361241c617d3718e65bd5b52984640d50511eca07e9d3baf5be5f22eecd342f40b576c45d92f2892d9b6c492533b07934df8d041b05308e6fce5e5546f916fdec072daf1330f18a8a38d9767360f47cddd1e31fa5a438558570848887e634875324fafca979cfd45471c07089e4f0c1a1973c94d8750600085c13076f20df299b51db8540c5a439e09e2fc3739f97abf54998ee4ee27aba948a9600f4920143089e1774af311fb977273d88bc477314404b8bb6bd2ca4a7c12c419718898514d79d72b1e5fb47c61046c34da33482ae2ac59760143bea36261b9b557756c911c5b5aa6aea2b453018fa233da8dee1f096d622b3157f6d247c161fde511e43417f3b866719a5081229e0021088360976dc06c662418d4c05edade686f5964c5316189c23197b5a021cc15fe7588031d48dd704c3d5d15ca6b3d1c51a67ad48e6e8f92d10854893d260376e97ba457e480f140e1e22f28747e89e6b06240e71ce7352a84256c12b00986c452b124231ae908ce55e1764ba5c215be5497a3068935fd37ca134c68bd06f0133fd1c02291b8577ed5cfae5233403fde424433ec2acba4b134e7cedb5b58b7f47d6ad8af76d354248528f8fc4f25ce1a4c28255c24ed5d5657c77469a4803ea579e0129ba2257971414ca98ed05e36b0fc06ac6147af80d8f2829323756e3f0923ea93d8eb10e0ac22</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2016/02/22/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
</search>
